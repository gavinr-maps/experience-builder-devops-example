name: Build and Deploy
on: push
# on:
#   push:
#     branches:
#       - master

jobs:
  Build-and-Deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: Download Experience Builder
        run: npx arcgis-lib-downloader -p arcgis-experience-builder -v 1.6
        env:
          ARCGIS_LIB_DOWNLOADER_USERNAME: ${{ secrets.ARCGIS_LIB_DOWNLOADER_USERNAME }}
          ARCGIS_LIB_DOWNLOADER_PASSWORD: ${{ secrets.ARCGIS_LIB_DOWNLOADER_PASSWORD }}
      - name: Unzip Experience Builder
        run: unzip -q arcgis-experience-builder-1.6.zip -d arcgis-experience-builder-1.6
      - name: ls
        run: ls -al
      - name: Copy Custom Widgets
        run: cp -r widgets/* arcgis-experience-builder-1.6/ArcGISExperienceBuilder/client/your-extensions/widgets
      - name: ls
        run: ls -al client/your-extensions/widgets
        working-directory: arcgis-experience-builder-1.6/ArcGISExperienceBuilder
      # - name: Unzip
      #   # ExB has non-standard file permissions so use chmod after unzip
      #   run: |
      #     unzip -q app.zip -d app
      #     chmod -R 777 app
      # - name: Deploy to GH Pages
      #   uses: JamesIves/github-pages-deploy-action@4.1.4
      #   with:
      #     branch: gh-pages
      #     folder: app
