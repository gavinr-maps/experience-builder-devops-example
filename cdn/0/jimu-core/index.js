System.register(["jimu-core/react","jimu-core/react-dom"],(function(e){var t,n;return{setters:[function(e){t=e},function(e){n=e}],execute:function(){e(function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=203)}([function(e,n){e.exports=t},,function(e,t,n){"use strict";var r,o,i,a,s,u,c;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),function(e){e.NotCreated="NOT_CREATED",e.Created="CREATED",e.CreateError="CREATE_ERROR",e.NotReady="NOT_READY",e.Unloaded="UNLOADED",e.Loading="LOADING",e.Loaded="LOADED",e.LoadError="LOAD_ERROR",e.Saving="SAVING",e.Saved="SAVED",e.SaveError="SAVE_ERROR",e.Closed="CLOSED",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.Closing="CLOSING"}(r||(r={})),function(e){e.SimpleLocal="SIMPLE_LOCAL",e.CSV="CSV",e.FeatureLayer="FEATURE_LAYER",e.SceneLayer="SCENE_LAYER",e.GroupLayer="GROUP_LAYER",e.FeatureService="FEATURE_SERVICE",e.MapService="MAP_SERVICE",e.SceneService="SCENE_SERVICE"}(o||(o={})),function(e){e.FeatureLayer="Feature Layer",e.Table="Table",e.GroupLayer="Group Layer",e.SceneLayerPoint="Point",e.SceneLayer3DObject="3DObject"}(i||(i={})),function(e){e.FeatureService="FeatureServer",e.MapService="MapServer",e.SceneService="SceneServer"}(a||(a={})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service",e.MapService="Map Service",e.SceneService="Scene Service",e.FeatureCollection="Feature Collection"}(s||(s={})),function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene"}(u||(u={})),function(e){e.InAllData="IN_ALL_DATA",e.InRemoteConfigView="IN_REMOTE_CONFIG_VIEW",e.InConfigView="IN_CONFIG_VIEW",e.InRuntimeView="IN_RUNTIME_VIEW"}(c||(c={}));class l extends Error{constructor(e,t){super(t),this.dataSourceId=e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11);function o(e){return void 0===e&&(e={}),e.portal?Object(r.a)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h}));var r=n(3),o=n(48),i=n(27),a=n(22),s=n(26),u=n(17),c="@esri/arcgis-rest-js",l={httpMethod:"POST",params:{f:"json"}};function d(e,t){e.authentication&&!t&&Object(u.a)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),l=e}var f=function(e){function t(t,n,r,o,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var a=e.call(this,t,n,r,o,i)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,a}return Object(r.b)(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var o=0,i=function(a,s){e(n.url,n.options).then((function(e){var t=Object(r.a)(Object(r.a)({},n.options),{authentication:e});return o+=1,h(n.url,t)})).then((function(e){a(e)})).catch((function(e){"ArcGISAuthError"===e.name&&o<t?i(a,s):"ArcGISAuthError"===e.name&&o>=t?s(n):s(e)}))};return new Promise((function(e,t){i(e,t)}))},t}(s.a);function p(e,t,n,r,o){if(e.code>=400){var i=e.message,a=e.code;throw new s.a(i,a,e,t,r)}if(e.error){var u=e.error,c=(i=u.message,a=u.code,u.messageCode),l=c||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===c||400===a&&"Unable to generate token."===i)throw o||new f(i,l,e,t,r);throw new s.a(i,l,e,t,r)}if("failed"===e.status||"failure"===e.status){i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,a=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new s.a(i,a,e,t,r)}return e}function h(e,t){void 0===t&&(t={params:{f:"json"}});var n=Object(r.a)(Object(r.a)(Object(r.a)({httpMethod:"POST"},l),t),{params:Object(r.a)(Object(r.a)({},l.params),t.params),headers:Object(r.a)(Object(r.a)({},l.headers),t.headers)}),u=[],d=[];if(n.fetch||"undefined"==typeof fetch?(u.push("`fetch`"),d.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(u.push("`Promise`"),d.push("`es6-promise`")),"undefined"==typeof FormData&&(u.push("`FormData`"),d.push("`isomorphic-form-data`")),!n.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+u.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var f=n.httpMethod,h=n.authentication,g=n.rawResponse,m=Object(r.a)({f:"json"},n.params),v=null,y={method:f,credentials:"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(y.credentials="include"),(h?h.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,v=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(m.token=t);var s={};if("GET"===y.method){m.token&&n.hideToken&&"undefined"==typeof window&&(s["X-Esri-Authorization"]="Bearer "+m.token,delete m.token);var u=""===Object(i.b)(m)?e:e+"?"+Object(i.b)(m);n.maxUrlLength&&u.length>n.maxUrlLength||m.token&&n.hideToken?(y.method="POST",t.length&&n.hideToken&&(m.token=t,delete s["X-Esri-Authorization"])):e=u}var l=new RegExp("/items/.+/updateResources").test(e);return"POST"===y.method&&(y.body=Object(o.a)(m,l)),y.headers=Object(r.a)(Object(r.a)({},s),n.headers),"undefined"!=typeof window||y.headers.referer||(y.headers.referer=c),Object(a.b)(m)||l||(y.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,y)})).then((function(t){if(!t.ok){var r=t.status,o=t.statusText;throw new s.a(o,"HTTP "+r,t,e,n)}if(g)return t;switch(m.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==m.f&&"geojson"!==m.f||g)return t;var r=p(t,e,0,n,v);if(v){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.trustedServers[o]={token:[],expires:new Date(Date.now()+864e5)},v=null}return r}))}},function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,"__immutable_invariants_hold")))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var l=["setPrototypeOf"],d=(l.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function f(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function p(e,t){return a(e,"__immutable_invariants_hold",!0),e}function h(e,t){var n=e[t];a(e,t,(function(){return V(n.apply(e,arguments))}))}function g(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=V.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=I.call(this);return o[e]=V(t),y(o)}l.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),f.prototype=new Error,f.prototype.constructor=Error;var m=V([]);function v(e,t,n){var r=e[0];if(1===e.length)return g.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=V.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?v.call(m,i,t):j.call(R,i,t)}if(r in this&&a===o)return this;var u=I.call(this);return u[r]=o,y(u)}function y(e){for(var t in d){if(d.hasOwnProperty(t))h(e,d[t])}o.use_static||(a(e,"flatMap",S),a(e,"asObject",E),a(e,"asMutable",I),a(e,"set",g),a(e,"setIn",v),a(e,"update",k),a(e,"updateIn",N),a(e,"getIn",L));for(var n=0,r=e.length;n<r;n++)e[n]=V(e[n]);return p(e)}function b(){return new Date(this.getTime())}function S(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return y(n)}function w(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return $(n)}function I(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(O(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function E(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return $(n)}function O(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,"__immutable_invariants_hold")||e instanceof Date?e:V.asMutable(e,{deep:!0})}function T(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function C(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",l=t&&t.merger;function d(e,r,o){var s,d=V(r[o]),f=l&&l(e[o],d,t),p=e[o];void 0===n&&void 0===f&&e.hasOwnProperty(o)&&u(d,p)||(u(p,s=void 0!==f?f:a&&c(p)&&c(d)?V.merge(p,d,t):d)&&e.hasOwnProperty(o)||(void 0===n&&(n=T(e,i(e))),n[o]=s))}function f(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=T(e,i(e))),delete n[r])}if(o)for(var p=0,h=e.length;p<h;p++){var g=e[p];for(r in g)g.hasOwnProperty(r)&&d(void 0!==n?n:this,g,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&d(this,e,r);"replace"===s&&f(this,e)}return void 0===n?this:$(n)}function A(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return V.merge(this,e,{deep:n,mode:"replace"})}var x,P,D,R=V({});function j(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return _.call(this,r,t,n);var o,a=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?V.setIn(s,a,t):j.call(R,a,t),this.hasOwnProperty(r)&&s===o)return this;var u=T(this,i(this));return u[r]=o,$(u)}function _(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=V.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=T(this,i(this));return o[e]=V(t),$(o)}function k(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return V.set(this,e,t.apply(r,[r].concat(n)))}function M(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function N(e,t){var n=Array.prototype.slice.call(arguments,2),r=M(this,e);return V.setIn(this,e,t.apply(r,[r].concat(n)))}function L(e,t){var n=M(this,e);return void 0===n?t:n}function U(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=O(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function F(){return{}}function $(e){return o.use_static||(a(e,"merge",C),a(e,"replace",A),a(e,"without",w),a(e,"asMutable",U),a(e,"set",_),a(e,"setIn",j),a(e,"update",k),a(e,"updateIn",N),a(e,"getIn",L)),p(e)}function V(e,t,n){if(s(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(V);if(Array.isArray(e))return y(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||a(i,"asMutable",b),p(i);var i,u=t&&t.prototype,c=(u&&u!==Object.prototype?function(){return Object.create(u)}:F)();for(var l in e)Object.getOwnPropertyDescriptor(e,l)&&(c[l]=V(e[l],void 0,n));return $(c)}function B(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function G(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return V.from=V,V.isImmutable=s,V.ImmutableError=f,V.merge=B(C),V.replace=B(A),V.without=B(w),V.asMutable=(x=U,P=I,D=b,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?P.apply(t,e):t instanceof Date?D.apply(t,e):x.apply(t,e)}),V.set=G(_,g),V.setIn=G(j,v),V.update=B(k),V.updateIn=B(N),V.getIn=B(L),V.flatMap=B(S),V.asObject=B(E),o.use_static||(V.static=e({use_static:!0})),Object.freeze(V),V}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";n.r(t);var r=n(5);n.d(t,"NODEJS_DEFAULT_REFERER_HEADER",(function(){return r.b})),n.d(t,"setDefaultRequestOptions",(function(){return r.e})),n.d(t,"ArcGISAuthError",(function(){return r.a})),n.d(t,"checkForErrors",(function(){return r.c})),n.d(t,"request",(function(){return r.d}));var o=n(12);n.d(t,"appendCustomParams",(function(){return o.a}));var i=n(26);n.d(t,"ArcGISRequestError",(function(){return i.a}));var a=n(11);n.d(t,"cleanUrl",(function(){return a.a}));var s=n(48);n.d(t,"encodeFormData",(function(){return s.a}));var u=n(27);n.d(t,"encodeParam",(function(){return u.a})),n.d(t,"encodeQueryString",(function(){return u.b}));var c=n(82);n.d(t,"decodeParam",(function(){return c.a})),n.d(t,"decodeQueryString",(function(){return c.b}));var l=n(133);n.d(t,"ErrorTypes",(function(){return l.a}));var d=n(134);for(var f in d)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return d[e]}))}(f);var p=n(135);for(var f in p)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return p[e]}))}(f);var h=n(136);for(var f in h)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return h[e]}))}(f);var g=n(137);for(var f in g)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return g[e]}))}(f);var m=n(138);for(var f in m)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return m[e]}))}(f);var v=n(139);for(var f in v)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return v[e]}))}(f);var y=n(140);for(var f in y)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return y[e]}))}(f);var b=n(141);for(var f in b)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return b[e]}))}(f);var S=n(142);for(var f in S)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return S[e]}))}(f);var w=n(143);for(var f in w)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return w[e]}))}(f);var I=n(22);n.d(t,"requiresFormData",(function(){return I.b})),n.d(t,"processParams",(function(){return I.a}));var E=n(144);for(var f in E)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return E[e]}))}(f);var O=n(145);for(var f in O)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return O[e]}))}(f);var T=n(17);n.d(t,"warn",(function(){return T.a}))},function(e,t,n){"use strict";function r(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function o(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){const r=n(31);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(42).SEMVER_SPEC_VERSION,SemVer:n(13),compareIdentifiers:n(60).compareIdentifiers,rcompareIdentifiers:n(60).rcompareIdentifiers,parse:n(32),valid:n(167),clean:n(168),inc:n(169),diff:n(170),major:n(171),minor:n(172),patch:n(173),prerelease:n(174),compare:n(18),rcompare:n(175),compareLoose:n(176),compareBuild:n(62),sort:n(177),rsort:n(178),gt:n(45),lt:n(63),eq:n(61),neq:n(84),gte:n(64),lte:n(65),cmp:n(85),coerce:n(179),Comparator:n(46),Range:n(19),satisfies:n(47),toComparators:n(183),maxSatisfying:n(184),minSatisfying:n(185),minVersion:n(186),validRange:n(187),outside:n(66),gtr:n(188),ltr:n(189),intersects:n(190),simplifyRange:n(191),subset:n(192)}},function(e,t,n){"use strict";var r=n(57),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},function(e,t,n){"use strict";function r(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3);function o(e,t,n){var o=Object(r.a)(Object(r.a)({params:{}},n),e);return o.params=t.reduce((function(t,n){return(e[n]||"boolean"==typeof e[n])&&(t[n]=e[n]),t}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{})}},function(e,t,n){const r=n(43),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=n(42),{re:a,t:s}=n(31),u=n(44),{compareIdentifiers:c}=n(60);class l{constructor(e,t){if(t=u(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return c(n,o)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return c(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this}}e.exports=l},function(e,t,n){(function(n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=i.URL||i.webkitURL,u=document.createElement("a");n=n||e.name||"download",u.download=n,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?o(u):r(u.href)?t(e,n,a):o(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(r(e))t(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){o(a)}))}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},l.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);o?o.location=f:location.href=f,o=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,o):r)||(e.exports=i)}).call(this,n(38))},function(e,t,n){"use strict";const r=n(159),o=n(160),i=n(161),a=n(162);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function u(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function c(e,t){return t.decode?o(e):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!o&&c(n,e).includes(e.arrayFormatSeparator);n=i?c(n,e):n;const a=o||i?n.split(e.arrayFormatSeparator).map(t=>c(t,e)):null===n?n:c(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{const o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o)return void(r[t]=n?c(n,e):n);const i=null===n?[]:n.split(e.arrayFormatSeparator).map(t=>c(t,e));void 0!==r[t]?r[t]=[].concat(r[t],i):r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){if(""===o)continue;let[e,a]=i(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:c(a,t),n(c(e,t),a,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else r[e]=f(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[u(t,e),"[",o,"]"].join("")]:[...n,[u(t,e),"[",u(o,e),"]=",u(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[u(t,e),"[]"].join("")]:[...n,[u(t,e),"[]=",u(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:(o=null===o?"":o,0===r.length?[[u(n,e),t,u(o,e)].join("")]:[[r,u(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,u(t,e)]:[...n,[u(t,e),"=",u(r,e)].join("")]}}(t),o={};for(const t of Object.keys(e))n(t)||(o[t]=e[t]);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map(n=>{const o=e[n];return void 0===o?"":null===o?u(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?u(n,t)+"[]":o.reduce(r(n),[]).join("&"):u(n,t)+"="+u(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:c(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=l(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),a=Object.assign(i,e.query);let s=t.stringify(a,n);s&&(s="?"+s);let c=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c="#"+u(e.fragmentIdentifier,n)),`${r}${s}${c}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:i,fragmentIdentifier:s}=t.parseUrl(e,r);return t.stringifyUrl({url:o,query:a(i,n),fragmentIdentifier:s},r)},t.exclude=(e,n,r)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,o,r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(4),o=n(53);function i(e){var t=e.authentication.username,n=e.owner||t;return Object(r.a)(e)+"/content/users/"+encodeURIComponent(n)+"/items/"+e.id+"/share"}function a(e){var t=e.authentication.username;return(e.owner||t)===t}function s(e){return e.authentication.getUser(e).then((function(e){return e&&"org_admin"===e.role&&!e.roleId}))}function u(e){return Object(o.a)(e.groupId,e).then((function(e){return e.userMembership.memberType})).catch((function(){return"none"}))}},function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn.apply(console,[e])}n.d(t,"a",(function(){return r}))},function(e,t,n){const r=n(13);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},function(e,t,n){class r{constructor(e,t){if(t=i(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!h(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=o.get(t);if(n)return n;const r=this.options.loose,i=r?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];e=e.replace(i,A(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(c[l.COMPARATORTRIM],d),s("comparator trim",e,c[l.COMPARATORTRIM]),e=(e=(e=e.replace(c[l.TILDETRIM],f)).replace(c[l.CARETTRIM],p)).split(/\s+/).join(" ");const u=r?c[l.COMPARATORLOOSE]:c[l.COMPARATOR],g=e.split(" ").map(e=>v(e,this.options)).join(" ").split(/\s+/).map(e=>C(e,this.options)).filter(this.options.loose?e=>!!e.match(u):()=>!0).map(e=>new a(e,this.options)),m=(g.length,new Map);for(const e of g){if(h(e))return[e];m.set(e.value,e)}m.size>1&&m.has("")&&m.delete("");const y=[...m.values()];return o.set(t,y),y}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>m(n,t)&&e.set.some(e=>m(e,t)&&n.every(n=>e.every(e=>n.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const o=new(n(180))({max:1e3}),i=n(44),a=n(46),s=n(43),u=n(13),{re:c,t:l,comparatorTrimReplace:d,tildeTrimReplace:f,caretTrimReplace:p}=n(31),h=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,m=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every(e=>o.intersects(e,t)),o=r.pop();return n},v=(e,t)=>(s("comp",e,t),e=w(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=E(e,t),s("xrange",e),e=T(e,t),s("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{const n=t.loose?c[l.TILDELOOSE]:c[l.TILDE];return e.replace(n,(t,n,r,o,i)=>{let a;return s("tilde",e,t,n,r,o,i),y(n)?a="":y(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:y(o)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${o} <${n}.${+r+1}.0-0`,s("tilde return",a),a})},w=(e,t)=>e.trim().split(/\s+/).map(e=>I(e,t)).join(" "),I=(e,t)=>{s("caret",e,t);const n=t.loose?c[l.CARETLOOSE]:c[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(t,n,o,i,a)=>{let u;return s("caret",e,t,n,o,i,a),y(n)?u="":y(o)?u=`>=${n}.0.0${r} <${+n+1}.0.0-0`:y(i)?u="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:a?(s("replaceCaret pr",a),u="0"===n?"0"===o?`>=${n}.${o}.${i}-${a} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}-${a} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i}-${a} <${+n+1}.0.0-0`):(s("no pr"),u="0"===n?"0"===o?`>=${n}.${o}.${i}${r} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i} <${+n+1}.0.0-0`),s("caret return",u),u})},E=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map(e=>O(e,t)).join(" ")),O=(e,t)=>{e=e.trim();const n=t.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return e.replace(n,(n,r,o,i,a,u)=>{s("xRange",e,n,r,o,i,a,u);const c=y(o),l=c||y(i),d=l||y(a),f=d;return"="===r&&f&&(r=""),u=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(i=0),a=0,">"===r?(r=">=",l?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===r&&(r="<",l?o=+o+1:i=+i+1),"<"===r&&(u="-0"),n=`${r+o}.${i}.${a}${u}`):l?n=`>=${o}.0.0${u} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${i}.0${u} <${o}.${+i+1}.0-0`),s("xRange return",n),n})},T=(e,t)=>(s("replaceStars",e,t),e.trim().replace(c[l.STAR],"")),C=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),A=e=>(t,n,r,o,i,a,s,u,c,l,d,f,p)=>`${n=y(r)?"":y(o)?`>=${r}.0.0${e?"-0":""}`:y(i)?`>=${r}.${o}.0${e?"-0":""}`:a?">="+n:`>=${n}${e?"-0":""}`} ${u=y(c)?"":y(l)?`<${+c+1}.0.0-0`:y(d)?`<${c}.${+l+1}.0-0`:f?`<=${c}.${l}.${d}-${f}`:e?`<${c}.${l}.${+d+1}-0`:"<="+u}`.trim(),x=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(s(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},,function(e,t,n){var r;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";function r(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){var t={};return Object.keys(e).forEach((function(n){var r,o,i=e[n];if(i&&i.toParam&&(i=i.toParam()),i||0===i||"boolean"==typeof i||"string"==typeof i){var a;switch(i.constructor.name){case"Array":var s=null===(o=null===(r=i[0])||void 0===r?void 0:r.constructor)||void 0===o?void 0:o.name;a="Array"===s?i:"Object"===s?JSON.stringify(i):i.join(",");break;case"Object":a=JSON.stringify(i);break;case"Date":a=i.valueOf();break;case"Function":a=null;break;case"Boolean":a=i+"";break;default:a=i}(a||0===a||"string"==typeof a||Array.isArray(a))&&(t[n]=a)}})),t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";var r=n(67),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=u(t),g=u(n),m=0;m<a.length;++m){var v=a[m];if(!(i[v]||r&&r[v]||g&&g[v]||s&&s[v])){var y=f(n,v);try{c(t,v,y)}catch(e){}}}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t){var n=t;return n.rawResponse=!1,Object(r.d)(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}},function(e,t,n){"use strict";function r(e,t){if(0===e.length)return[];for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=o};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(22);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return o(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e){var t=Object(r.a)(e);return Object.keys(t).map((function(e){return o(e,t[e])})).join("&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t,n={httpMethod:"GET"};if("string"==typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var a=e.username||e.authentication.username;t=Object(i.a)(e)+"/community/users/"+encodeURIComponent(a),n=Object(r.a)(Object(r.a)({},e),n)}return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(12),o=n(5),i=n(37),a=n(4);function s(e,t){var n,u,c;switch(u="string"==typeof e||e instanceof i.a?{httpMethod:"GET",params:{q:e}}:Object(r.a)(e,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"}),t){case"item":c="/search";break;case"group":c="/community/groups";break;case"groupContent":if("string"==typeof e||e instanceof i.a||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));c="/content/groups/"+e.groupId+"/search";break;default:c="/portals/self/users/search"}return n=Object(a.a)(u)+c,Object(o.d)(n,u).then((function(n){return n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){var r;return"string"==typeof e||e instanceof i.a?r={q:e,start:n.nextStart}:(r=e).start=n.nextStart,s(r,t)}),n}))}},,function(e,t,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n(42),o=n(43),i=(t=e.exports={}).re=[],a=t.src=[],s=t.t={};let u=0;const c=(e,t,n)=>{const r=u++;o(r,t),s[e]=r,a[r]=t,i[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),c("FULL",`^${a[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),c("LOOSE",`^${a[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",a[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),c("XRANGEIDENTIFIER",a[s.NUMERICIDENTIFIER]+"|x|X|\\*"),c("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),c("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",a[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(e,t,n){const{MAX_LENGTH:r}=n(42),{re:o,t:i}=n(31),a=n(13),s=n(44);e.exports=(e,t)=>{if(t=s(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[i.LOOSE]:o[i.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(103);n.d(t,"addItemData",(function(){return r.a})),n.d(t,"addItemRelationship",(function(){return r.b})),n.d(t,"addItemResource",(function(){return r.c}));var o=n(104);n.d(t,"getUserContent",(function(){return o.a}));var i=n(105);n.d(t,"createFolder",(function(){return i.a})),n.d(t,"createItemInFolder",(function(){return i.c})),n.d(t,"createItem",(function(){return i.b}));var a=n(106);n.d(t,"exportItem",(function(){return a.a}));var s=n(83);n.d(t,"getItem",(function(){return s.a})),n.d(t,"getItemBaseUrl",(function(){return s.b})),n.d(t,"getItemData",(function(){return s.c})),n.d(t,"getRelatedItems",(function(){return s.k})),n.d(t,"getItemResources",(function(){return s.i})),n.d(t,"getItemResource",(function(){return s.h})),n.d(t,"getItemGroups",(function(){return s.d})),n.d(t,"getItemStatus",(function(){return s.j})),n.d(t,"getItemParts",(function(){return s.g})),n.d(t,"getItemInfo",(function(){return s.e})),n.d(t,"getItemMetadata",(function(){return s.f}));var u=n(107);n.d(t,"protectItem",(function(){return u.a})),n.d(t,"unprotectItem",(function(){return u.b}));var c=n(108);n.d(t,"reassignItem",(function(){return c.a}));var l=n(109);n.d(t,"removeItem",(function(){return l.b})),n.d(t,"removeItemRelationship",(function(){return l.c})),n.d(t,"removeItemResource",(function(){return l.d})),n.d(t,"removeFolder",(function(){return l.a}));var d=n(54);n.d(t,"searchItems",(function(){return d.a}));var f=n(52);n.d(t,"updateItem",(function(){return f.b})),n.d(t,"updateItemInfo",(function(){return f.c})),n.d(t,"updateItemResource",(function(){return f.d})),n.d(t,"moveItem",(function(){return f.a}));var p=n(8);n.d(t,"serializeItem",(function(){return p.b})),n.d(t,"determineOwner",(function(){return p.a}));var h=n(110);n.d(t,"addItemPart",(function(){return h.a})),n.d(t,"commitItemUpload",(function(){return h.c})),n.d(t,"cancelItemUpload",(function(){return h.b}));var g=n(55);n.d(t,"addGroupUsers",(function(){return g.a}));var m=n(56);n.d(t,"removeGroupUsers",(function(){return m.a}));var v=n(111);n.d(t,"inviteGroupUsers",(function(){return v.a}));var y=n(112);n.d(t,"createGroup",(function(){return y.a}));var b=n(53);n.d(t,"getGroup",(function(){return b.a})),n.d(t,"getGroupCategorySchema",(function(){return b.b})),n.d(t,"getGroupContent",(function(){return b.c})),n.d(t,"getGroupUsers",(function(){return b.d})),n.d(t,"searchGroupUsers",(function(){return b.e}));var S=n(113);for(var w in S)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers"].indexOf(w)<0&&function(e){n.d(t,e,(function(){return S[e]}))}(w);var I=n(114);n.d(t,"createGroupNotification",(function(){return I.a}));var E=n(115);n.d(t,"protectGroup",(function(){return E.a})),n.d(t,"unprotectGroup",(function(){return E.b}));var O=n(116);n.d(t,"removeGroup",(function(){return O.a}));var T=n(117);n.d(t,"searchGroups",(function(){return T.b})),n.d(t,"searchGroupContent",(function(){return T.a}));var C=n(118);n.d(t,"updateGroup",(function(){return C.a}));var A=n(40);n.d(t,"updateUserMemberships",(function(){return A.a}));var x=n(119);n.d(t,"joinGroup",(function(){return x.a})),n.d(t,"leaveGroup",(function(){return x.b}));var P=n(120);n.d(t,"createOrgNotification",(function(){return P.a}));var D=n(28);n.d(t,"getUser",(function(){return D.a}));var R=n(121);n.d(t,"getUserTags",(function(){return R.a}));var j=n(122);n.d(t,"getUserUrl",(function(){return j.a}));var _=n(123);n.d(t,"getUserInvitations",(function(){return _.d})),n.d(t,"getUserInvitation",(function(){return _.c})),n.d(t,"acceptInvitation",(function(){return _.a})),n.d(t,"declineInvitation",(function(){return _.b}));var k=n(124);n.d(t,"getUserNotifications",(function(){return k.a})),n.d(t,"removeNotification",(function(){return k.b}));var M=n(125);n.d(t,"searchUsers",(function(){return M.a}));var N=n(126);n.d(t,"updateUser",(function(){return N.a}));var L=n(127);n.d(t,"setItemAccess",(function(){return L.a}));var U=n(128);n.d(t,"shareItemWithGroup",(function(){return U.b})),n.d(t,"ensureMembership",(function(){return U.a}));var F=n(129);n.d(t,"unshareItemWithGroup",(function(){return F.a}));var $=n(35);n.d(t,"isItemSharedWithGroup",(function(){return $.a}));var V=n(16);n.d(t,"getSharingUrl",(function(){return V.a})),n.d(t,"isItemOwner",(function(){return V.c})),n.d(t,"isOrgAdmin",(function(){return V.d})),n.d(t,"getUserMembership",(function(){return V.b}));var B=n(130);n.d(t,"getSelf",(function(){return B.b})),n.d(t,"getPortal",(function(){return B.a}));var G=n(131);n.d(t,"getPortalSettings",(function(){return G.a}));var W=n(4);n.d(t,"getPortalUrl",(function(){return W.a}));var q=n(50);n.d(t,"scrubControlChars",(function(){return q.a}));var z=n(132);for(var w in z)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers","createGroupNotification","protectGroup","unprotectGroup","removeGroup","searchGroups","searchGroupContent","updateGroup","updateUserMemberships","joinGroup","leaveGroup","createOrgNotification","getUser","getUserTags","getUserUrl","getUserInvitations","getUserInvitation","acceptInvitation","declineInvitation","getUserNotifications","removeNotification","searchUsers","updateUser","setItemAccess","shareItemWithGroup","ensureMembership","unshareItemWithGroup","isItemSharedWithGroup","getSharingUrl","isItemOwner","isOrgAdmin","getUserMembership","getSelf","getPortal","getPortalSettings","getPortalUrl","scrubControlChars"].indexOf(w)<0&&function(e){n.d(t,e,(function(){return z[e]}))}(w);var H=n(37);n.d(t,"SearchQueryBuilder",(function(){return H.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(54);function o(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"};return Object(r.a)(t).then((function(t){if(t.total>0)return t.results.some((function(t){return t.id===e.id}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t){var n=t;return"undefined"!=typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=r.b,Object(r.d)(e,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17),o=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):(Object(r.a)(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?(Object(r.a)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?(Object(r.a)("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?(Object(r.a)("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?(Object(r.a)("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?(Object(r.a)("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.hasWhiteSpace=function(e){return/\s/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.hasWhiteSpace(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(t){return e.formatTerm(t)})).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for(Object(r.a)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&Object(r.a)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),o=n(5);function i(e){var t=Object(r.a)(e)+"/community/groups/"+e.id+"/updateUsers",n={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?n.params.admins=e.users:n.params.users=e.users,Object(o.d)(t,n)}},function(e,t,n){"use strict";(function(e){var r=n(10),o=n(148),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||o.a;t.a=u}).call(this,n(80)(e))},function(e,t){const n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},function(e,t,n){(function(t){const n="object"==typeof t&&t.env&&t.env.NODE_DEBUG&&/\bsemver\b/i.test(t.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=n}).call(this,n(166))},function(e,t){const n=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:n.filter(t=>e[t]).reduce((e,t)=>(e[t]=!0,e),{}):{}},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>r(e,t,n)>0},function(e,t,n){const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&a||s||c}}e.exports=o;const i=n(44),{re:a,t:s}=n(31),u=n(85),c=n(43),l=n(13),d=n(19)},function(e,t,n){const r=n(19);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(22),o=n(27);function i(e,t){var n=Object(r.b)(e)||t,i=Object(r.a)(e);if(n){var a=new FormData;return Object.keys(i).forEach((function(e){if("undefined"!=typeof Blob&&i[e]instanceof Blob){var t=i.fileName||i[e].name||e;a.append(e,i[e],t)}else a.append(e,i[e])})),a}return Object(o.b)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);function o(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/validateAppAccess",i={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(o,i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=/[\x00-\x1F\x7F-\x9F\xA0]/g;function o(e){return e.replace(r,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(11);function i(e){return Object(r.d)(Object(o.a)(e.url),e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(3),o=n(5),i=n(4),a=n(8);function s(e){return Object(a.a)(e).then((function(t){var n=e.folderId?Object(i.a)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":Object(i.a)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),Object(a.b)(e.item)),Object(o.d)(n,e)}))}function u(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateinfo";return e.params=Object(r.a)({folderName:e.folderName,file:e.file},e.params),Object(o.d)(n,e)}))}function c(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),Object(o.d)(n,e)}))}function l(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",a=e.folderId;return a||(a="/"),e.params=Object(r.a)({folder:a},e.params),Object(o.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d}));var r=n(3),o=n(5),i=n(12),a=n(4);function s(e,t){var n=Object(a.a)(t)+"/community/groups/"+e,i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function u(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/categorySchema",i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function c(e,t){var n=Object(a.a)(t)+"/content/groups/"+e,i=Object(r.a)(Object(r.a)({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(i.params=Object(r.a)({},t.paging)),Object(o.d)(n,i)}function l(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/users",i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}function d(e,t){var n=Object(a.a)(t)+"/community/groups/"+e+"/userlist",r=Object(i.a)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return Object(o.d)(n,r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(29);function o(e){return Object(r.a)(e,"item")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(25);function s(e){var t=e.id,n=Object(i.a)(e)+"/community/groups/"+t+"/addUsers",a=Object.assign({},e,{admins:void 0,users:void 0}),s=Object(r.c)(u("users",e.users,a),u("admins",e.admins,a)).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(c)}function u(e,t,n){return!t||t.length<1?[]:Object(a.a)(t,25).map((function(t){return function(e,t,n){var o,i;return Object.assign({},n,((o={})[e]=t,o.params=Object(r.a)(Object(r.a)({},n.params),((i={})[e]=t,i)),o))}(e,t,n)}))}function c(e){var t=e.filter((function(e){return e.notAdded})).reduce((function(e,t){return e.concat(t.notAdded)}),[]),n=e.filter((function(e){return e.errors})).reduce((function(e,t){return e.concat(t.errors)}),[]),r={notAdded:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(25);function s(e){var t=e.id,n=e.users,s=Object(i.a)(e)+"/community/groups/"+t+"/removeUsers",u=Object(a.a)(n,25).map((function(t){return n=t,i=Object(r.a)(Object(r.a)({},e),{users:n,params:{users:n}}),Object(o.d)(s,i).catch((function(e){return{errors:[e]}}));var n,i}));return Promise.all(u).then((function(e){var t=function(t){return e.filter((function(e){return e[t]})).reduce((function(e,n){return e.concat(n[t])}),[])},n=t("errors"),o={notRemoved:t("notRemoved")};return n.length?Object(r.a)(Object(r.a)({},o),{errors:n}):o}))}},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(38))},function(e,t,n){var r=n(75),o=n(163);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},function(e,t){const n=/^[0-9]+$/,r=(e,t)=>{const r=n.test(e),o=n.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>0===r(e,t,n)},function(e,t,n){const r=n(13);e.exports=(e,t,n)=>{const o=new r(e,n),i=new r(t,n);return o.compare(i)||o.compareBuild(i)}},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>r(e,t,n)<0},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>r(e,t,n)>=0},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>r(e,t,n)<=0},function(e,t,n){const r=n(13),o=n(46),{ANY:i}=o,a=n(19),s=n(47),u=n(45),c=n(63),l=n(65),d=n(64);e.exports=(e,t,n,f)=>{let p,h,g,m,v;switch(e=new r(e,f),t=new a(t,f),n){case">":p=u,h=l,g=c,m=">",v=">=";break;case"<":p=c,h=d,g=u,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,f))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let a=null,s=null;if(r.forEach(e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,s=s||e,p(e.semver,a.semver,f)?a=e:g(e.semver,s.semver,f)&&(s=e)}),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&h(e,s.semver))return!1;if(s.operator===v&&g(e,s.semver))return!1}return!0}},function(e,t,n){"use strict";e.exports=n(158)},function(e,t,n){"use strict";n.r(t);var r=n(87);n.d(t,"ApplicationSession",(function(){return r.a}));var o=n(88);n.d(t,"ApiKey",(function(){return o.a}));var i=n(147);n.d(t,"UserSession",(function(){return i.a}));var a=n(24);n.d(t,"fetchToken",(function(){return a.a}));var s=n(36);n.d(t,"generateToken",(function(){return s.a}));var u=n(89);for(var c in u)["default","ApplicationSession","ApiKey","UserSession","fetchToken","generateToken"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(c);var l=n(81);n.d(t,"exchangeToken",(function(){return l.a})),n.d(t,"platformSelf",(function(){return l.b}));var d=n(49);n.d(t,"validateAppAccess",(function(){return d.a}))},function(e,t,n){"use strict";(function(e){var r=n(57),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.a.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n(80)(e))},,,function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(74),o=n(77),i=n(165);function a(e,t){return new i(t).process(e)}for(var s in(t=e.exports=a).filterXSS=a,t.FilterXSS=i,r)t[s]=r[s];for(var s in o)t[s]=o[s];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},function(e,t,n){var r=n(58).FilterCSS,o=n(58).getDefaultWhiteList,i=n(59);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new r;function u(e){return e.replace(c,"&lt;").replace(l,"&gt;")}var c=/</g,l=/>/g,d=/"/g,f=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,g=/&newline;?/gim,m=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(d,"&quot;")}function S(e){return e.replace(f,'"')}function w(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function I(e){return e.replace(h,":").replace(g," ")}function E(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function O(e){return e=E(e=I(e=w(e=S(e))))}function T(e){return e=u(e=b(e))}var C=/<!--[\s\S]*?-->/g;t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=a,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=O(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(m.lastIndex=0,m.test(n))return""}else if("style"===t){if(v.lastIndex=0,v.test(n))return"";if(y.lastIndex=0,y.test(n)&&(m.lastIndex=0,m.test(n)))return"";!1!==r&&(n=(r=r||s).process(n))}return n=T(n)},t.escapeHtml=u,t.escapeQuote=b,t.unescapeQuote=S,t.escapeHtmlEntities=w,t.escapeDangerHtml5Entities=I,t.clearNonPrintableCharacter=E,t.friendlyAttrValue=O,t.escapeAttrValue=T,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(a,s,u){if(function(t){return!!n||-1!==i.indexOf(e,t)}(a)){if(u.isClosing){var c="[/removed]",l=u.position+c.length;return r.push([!1!==o?o:u.position,l]),o=!1,c}return o||(o=u.position),"[removed]"}return t(a,s,u)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){return e.replace(C,"")},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=s,t.getDefaultCSSWhiteList=o},function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t,n){var r=n(59);function o(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function u(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",a=0,s=!1,u=!1,c=0,l=e.length,d="",f="";e:for(c=0;c<l;c++){var p=e.charAt(c);if(!1===s){if("<"===p){s=c;continue}}else if(!1===u){if("<"===p){r+=n(e.slice(a,c)),s=c,a=c;continue}if(">"===p){r+=n(e.slice(a,s)),d=o(f=e.slice(s,c+1)),r+=t(s,r.length,d,f,i(f)),a=c+1,s=!1;continue}if('"'===p||"'"===p)for(var h=1,g=e.charAt(c-h);""===g.trim()||"="===g;){if("="===g){u=p;continue e}g=e.charAt(c-++h)}}else if(p===u){u=!1;continue}}return a<e.length&&(r+=n(e.substr(a))),r},t.parseAttr=function(e,t){"use strict";var n=0,o=[],i=!1,l=e.length;function d(e,n){if(!((e=(e=r.trim(e)).replace(a,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&o.push(i)}}for(var f=0;f<l;f++){var p,h=e.charAt(f);if(!1!==i||"="!==h)if(!1===i||f!==n||'"'!==h&&"'"!==h||"="!==e.charAt(f-1))if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(p=s(e,f))){d(r.trim(e.slice(n,f))),i=!1,n=f+1;continue}f=p-1;continue}if(-1===(p=u(e,f-1))){d(i,c(r.trim(e.slice(n,f)))),i=!1,n=f+1;continue}}else;else{if(-1===(p=e.indexOf(h,f+1)))break;d(i,r.trim(e.slice(n+1,p))),i=!1,n=(f=p)+1}else i=e.slice(n,f),n=f+1}return n<e.length&&(!1===i?d(e.slice(n)):d(i,c(r.trim(e.slice(n))))),r.trim(o.join(" "))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&u()}function s(){i(a)}function u(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},d=v(0,0,0,0);function f(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=l(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=f(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=f(r.width),u=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=p(r,"left","right")+i),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(e){return e===l(e).document.documentElement}(e)){var c=Math.round(s+i)-t,h=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(h)&&(u-=h)}return v(o.left,o.top,s,u)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return r?g(e)?function(e){var t=e.getBBox();return v(0,0,t.width,t.height)}(e):h(e):d}function v(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,o,i,a,s,u,l=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),c(u,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),u);c(this,{target:e,contentRect:l})},S=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new S(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){I.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var E=void 0!==o.ResizeObserver?o.ResizeObserver:I;t.a=E}).call(this,n(38))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(5);function o(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/exchangeToken",i={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(o,i).then((function(e){return e.token}))}function i(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var o=n+"/oauth2/platformSelf?f=json",i={method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}};return Object(r.d)(o,i)}},function(e,t,n){"use strict";function r(e){var t=e.split("="),n=t[0],r=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}function o(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var n=r(t),o=n.key,i=n.value;return e[o]=i,e}),{})}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"j",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return b}));var r=n(3),o=n(5),i=n(12),a=n(4),s=n(50),u=n(8);function c(e,t){var n=l(e,t),i=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(n,i)}var l=function(e,t){return("string"==typeof t?t:Object(a.a)(t))+"/content/items/"+e};function d(e,t){var n=l(e,t)+"/data",i=Object(r.a)({httpMethod:"GET",params:{}},t);return i.file&&(i.params.f=null),Object(o.d)(n,i).catch((function(e){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function f(e){var t=l(e.id,e)+"/relatedItems",n=Object(r.a)({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?n.params.relationshipType=e.relationshipType:n.params.relationshipTypes=e.relationshipType,delete n.direction,delete n.relationshipType,Object(o.d)(t,n)}function p(e,t){var n=l(e,t)+"/resources",i=Object(r.a)({},t);return i.params=Object(r.a)({num:1e3},i.params),Object(o.d)(n,i)}function h(e,t){var n=t.readAs||"blob";return S(e,"/resources/"+t.fileName,n,t)}function g(e,t){var n=l(e,t)+"/groups";return Object(o.d)(n,t)}function m(e){return Object(u.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/status",s=Object(i.a)(e,["jobId","jobType"],{params:Object(r.a)({},e.params)});return Object(o.d)(n,s)}))}function v(e){return Object(u.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/parts";return Object(o.d)(n,e)}))}function y(e,t){var n=t||{},o=n.fileName,i=void 0===o?"iteminfo.xml":o,a=n.readAs;return S(e,"/info/"+i,void 0===a?"text":a,Object(r.a)({httpMethod:"GET"},t))}function b(e,t){return y(e,Object(r.a)(Object(r.a)({},t),{fileName:"metadata/metadata.xml"}))}function S(e,t,n,i){var a=""+l(e,i)+t,u=Object(r.a)({params:{}},i),c=u.rawResponse;return u.rawResponse=!0,u.params.f=null,Object(o.d)(a,u).then((function(e){return c?e:"json"!==n?e[n]():e.text().then((function(e){return JSON.parse(Object(s.a)(e))}))}))}},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>0!==r(e,t,n)},function(e,t,n){const r=n(61),o=n(84),i=n(45),a=n(64),s=n(63),u=n(65);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return o(e,n,c);case">":return i(e,n,c);case">=":return a(e,n,c);case"<":return s(e,n,c);case"<=":return u(e,n,c);default:throw new TypeError("Invalid operator: "+t)}}},function(e){e.exports=JSON.parse('{"exbVersion":"1.5.0","exbBuildNum":"675","exbBuildCommit":"597b6468a18ff26f3b2f85b01c9bcf71efa42465","exbExtensionsBuildCommit":"8c7ee3238dbe54402ad9573eaa68f43a379ee891","exbBuildDate":"20210707.154913.CST","productVersion":"ArcGIS Experience Builder"}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(24),i=function(){function e(e){this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}return e.prototype.getToken=function(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)},e.prototype.refreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return Object(o.a)(this.portal+"/oauth2/token/",n).then((function(e){return t._pendingTokenRequest=null,t.token=e.token,t.expires=e.expires,e.token}))},e.prototype.refreshSession=function(){var e=this;return this.refreshToken().then((function(){return e}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){this.key=e.key}return e.prototype.getToken=function(e){return Promise.resolve(this.key)},e}()},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(3),o=n(11),i=n(5),a=n(12);function s(e){var t=Object(o.a)(e.url)+"/"+e.id,n=Object(r.a)({httpMethod:"GET"},e);return Object(i.d)(t,n).then((function(e){return n.rawResponse?e:e.feature}))}function u(e){var t=Object(a.a)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object(r.a)({where:"1=1",outFields:"*"},e.params)});return Object(i.d)(Object(o.a)(e.url)+"/query",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(11),i=n(12),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/addFeatures",n=Object(i.a)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(11),i=n(12),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/updateFeatures",n=Object(i.a)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(11),i=n(12),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/deleteFeatures",n=Object(i.a)(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(11),i=n(12),a=n(5);function s(e){var t=Object(o.a)(e.url)+"/applyEdits",n=Object(i.a)(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object(r.a)({},e.params)});return Object(a.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(11);function a(e){var t=Object(r.a)({httpMethod:"GET"},e);return Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/attachments",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(11);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachment=e.attachment,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/addAttachment",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(11);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/updateAttachment",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(11);function a(e){var t=Object(r.a)({params:{}},e);return t.params.attachmentIds=e.attachmentIds,Object(o.d)(Object(i.a)(t.url)+"/"+t.featureId+"/deleteAttachments",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(12),i=n(5),a=n(11);function s(e){var t=Object(o.a)(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:Object(r.a)({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return Object(i.d)(Object(a.a)(e.url)+"/queryRelatedRecords",t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(11);function i(e){return Object(r.d)(Object(o.a)(e.url),e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(51);function i(e){return new Promise((function(t){if(!e.fields)return Object(o.a)({url:e.url}).then((function(n){t(e.fields=n.fields)}));t(e.fields)})).then((function(t){var n=function(e){return e.reduce((function(e,t){var n=t.domain;return n&&"codedValue"===n.type&&(e[t.name]=n),e}),{})}(t);if(Object.keys(n).length<1)return e.queryResponse;var o=e.queryResponse.features.map((function(e){var t={};for(var o in e.attributes)if(e.attributes.hasOwnProperty(o)){var i=e.attributes[o],s=n[o];t[o]=null!==i&&s?a(i,s):i}return Object(r.a)(Object(r.a)({},e),{attributes:t})}));return Object(r.a)(Object(r.a)({},e.queryResponse),{features:o})}))}function a(e,t){var n=t.codedValues.find((function(t){return e===t.code}));return n?n.name:e}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(3),o=n(12),i=n(5),a=n(4),s=n(8),u=n(52);function c(e){var t=Object(r.a)({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,Object(u.b)(t)}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/addRelationship",s=Object(o.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(i.d)(n,s)}))}function d(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(4),i=n(8),a=function(e){var t=e.folderId,n=e.start,a=void 0===n?1:n,s=e.num,u=void 0===s?10:s,c=e.authentication,l=t?"/"+t:"";return Object(i.a)(e).then((function(t){return Object(o.a)(e)+"/content/users/"+t+l})).then((function(e){return Object(r.d)(e,{httpMethod:"GET",authentication:c,params:{start:a,num:u}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(3),o=n(5),i=n(12),a=n(4),s=n(8);function u(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/createFolder";return e.params=Object(r.a)({title:e.title},e.params),Object(o.d)(n,e)}))}function c(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t,u=n+"/addItem";e.folderId&&(u=n+"/"+e.folderId+"/addItem"),e.params=Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item));var c=Object(i.a)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:Object(r.a)({},e.params)});return Object(o.d)(u,c)}))}function l(e){return c(Object(r.a)({folderId:null},e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(8),i=n(4),a=function(e){var t=e.authentication,n=e.id,a=e.title,s=e.exportFormat,u=e.exportParameters;return Object(o.a)(e).then((function(t){return Object(i.a)(e)+"/content/users/"+t+"/export"})).then((function(e){return Object(r.d)(e,{httpMethod:"POST",authentication:t,params:{itemId:n,title:a,exportFormat:s,exportParameters:u}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(5),o=n(4),i=n(8);function a(e){return Object(i.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/protect";return Object(r.d)(n,e)}))}function s(e){return Object(i.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect";return Object(r.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(4),i=n(16);function a(e){return Object(i.d)(e).then((function(t){if(!t)throw Error("Item "+e.id+" can not be reassigned because current user is not an organization administrator.");var n=Object(o.a)(e)+"/content/users/"+e.currentOwner+"/items/"+e.id+"/reassign",i={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return Object(r.d)(n,i)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(3),o=n(5),i=n(12),a=n(4),s=n(8);function u(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/delete";return Object(o.d)(n,e)}))}function c(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/deleteRelationship",s=Object(i.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(o.d)(n,s)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=Object(r.a)(Object(r.a)({},e.params),{resource:e.resource}),Object(o.d)(n,e)}))}function d(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete";return Object(o.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(3),o=n(12),i=n(5),a=n(4),s=n(8);function u(e){var t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):Object(s.a)(e).then((function(n){var s=Object(a.a)(e)+"/content/users/"+n+"/items/"+e.id+"/addPart?partNum="+t,u=Object(o.a)(e,["file"],{params:Object(r.a)({},e.params)});return Object(i.d)(s,u)}))}function c(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/commit",u=Object(o.a)(e,[],{params:Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item))});return Object(i.d)(n,u)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/cancel";return Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(25);function s(e){var t=e.id,n=Object(i.a)(e)+"/community/groups/"+t+"/invite",s=function(e){return Object(a.a)(e.users,25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,role:n.role,expiration:n.expiration}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(u)}function u(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/createGroup";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(o.d)(t,e)}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/createNotification",n=Object(r.a)({params:Object(r.a)({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(5),o=n(4);function i(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/protect";return Object(r.d)(t,e)}function a(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/unprotect";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/delete",n=Object(r.a)({},e);return Object(o.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(29);function o(e){return Object(r.a)(e,"group")}function i(e){return Object(r.a)(e,"groupContent")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.group.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(o.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(5),o=n(4);function i(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/join";return Object(r.d)(t,e)}function a(e){var t=Object(o.a)(e)+"/community/groups/"+e.id+"/leave";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4),a=n(25);function s(e){var t=Object(i.a)(e)+"/portals/self/createNotification",n=function(e){return Object(a.a)(e.users,e.batchSize||25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:n.notificationChannelType}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(o.d)(e,t).catch((function(e){return{errors:[e]}}))}(t,e)}));return Promise.all(n).then(u)}function u(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(4);function i(e){var t=e.username||e.authentication.username,n=Object(o.a)(e)+"/community/users/"+encodeURIComponent(t)+"/tags";return Object(r.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function o(e){return Object(r.a)(e)+"/community/users/"+encodeURIComponent(e.username)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n(3),o=n(5),i=n(4);function a(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),a=Object(i.a)(e)+"/community/users/"+n+"/invitations";return t=Object(r.a)(Object(r.a)({},e),t),Object(o.d)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId,a={httpMethod:"GET"};return a=Object(r.a)(Object(r.a)({},e),a),Object(o.d)(n,a)}function u(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",a=Object(r.a)({},e);return Object(o.d)(n,a)}function c(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",a=Object(r.a)({},e);return Object(o.d)(n,a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(3),o=n(5),i=n(4);function a(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),a=Object(i.a)(e)+"/community/users/"+n+"/notifications";return t=Object(r.a)(Object(r.a)({},e),t),Object(o.d)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(i.a)(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete";return Object(o.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(29);function o(e){return Object(r.a)(e,"user")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e){var t=e.user.username||e.authentication.username,n=Object(i.a)(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=Object(r.a)(Object(r.a)({},e.user),e.params),delete e.user,Object(o.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(16);function a(e){var t=Object(i.a)(e);return Object(i.c)(e)?s(t,e):Object(i.d)(e).then((function(n){if(n)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=Object(r.a)({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),Object(o.d)(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(5),o=n(4),i=n(16),a=n(28),s=n(55),u=n(56),c=n(40),l=n(35);function d(e){return Object(l.a)(e).then((function(t){if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};var n=e.authentication.username,r=e.owner,o=e.confirmItemControl,s=r||n;return s!==n?Promise.all([Object(a.a)({username:n,authentication:e.authentication}),Object(a.a)({username:s,authentication:e.authentication}),Object(i.b)(e)]).then((function(t){var n=t[0],r=t[1],i=t[2];return function(e,t,n,r,o,i){var a=[];if(i.groupId!==e.favGroupId)if(t){if(!r)throw Error("This item can not be shared to shared editing group "+i.groupId+" by "+e.username+" as they not the item owner or org admin.");a.push(p(e,e,!1,"Error adding "+e.username+" as member to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i),p(e,o,!0,"none"===n?"Error adding user "+o.username+" to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.":"Error promoting user "+o.username+" to admin in edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i))}else if(r)a.push(p(e,e,!1,"Error adding "+e.username+" as member to view group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i));else if("none"===n)throw new Error("This item can not be shared by "+e.username+" as they are not a member of the specified group "+i.groupId+".");return a}(n,!!o,i,"org_admin"===n.role&&!n.roleId,r,e)})).then((function(t){var n=t[0],r=(void 0===n?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:n).revert;return Promise.all(t.map((function(e){return e.promise}))).then((function(){return f(e)})).then((function(e){return r(e)}))})):f(e)})).then((function(t){if(t.notSharedWith.length)throw Error("Item "+e.id+" could not be shared to group "+e.groupId+".");return t}))}function f(e){var t=e.authentication.username,n=e.owner||t,i=Object(o.a)(e)+"/content/items/"+e.id+"/share";return n===t&&(i=Object(o.a)(e)+"/content/users/"+n+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},Object(r.d)(i,e)}function p(e,t,n,r,o){var i,a,l,d=t.groups||[],f=d.find((function(e){return e.id===o.groupId}));if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+o.groupId+" nor can item "+o.id+" be shared to the group.");if(!f&&d.length>511)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+o.groupId+". Consequently item "+o.id+" can not be shared to the group.");if(f)n&&"member"===f.userMembership.memberType?(a=Object(c.a)({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then((function(e){var t=e.results.reduce((function(e,t){return t.success||e.push(t.username),e}),[]);return Promise.resolve({notAdded:t})})).catch((function(){return{notAdded:[t.username]}})),l=function(e){return Object(c.a)({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then((function(){return e})).catch((function(){return e}))}):(a=Promise.resolve({notAdded:[]}),l=function(e){return Promise.resolve(e)});else{var p=n?"admins":"users";a=Object(s.a)((i={id:o.groupId},i[p]=[t.username],i.authentication=o.authentication,i)).then((function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((function(){return{notAdded:[t.username]}})),l=function(e){return Object(u.a)({id:o.groupId,users:[t.username],authentication:o.authentication}).then((function(){return e}))}}return{promise:a.then((function(e){if(e.notAdded.length)throw new Error(r);return e})),revert:l}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(4),i=n(16),a=n(35),s=n(28);function u(e){return Object(a.a)(e).then((function(t){if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});var n=e.authentication.username,a=e.owner;return Promise.all([Object(i.b)(e),Object(s.a)({username:n,authentication:e.authentication})]).then((function(t){var i=t[0],s=t[1],u=(a||n)===n,c="org_admin"===s.role&&!s.roleId;if(!u&&!c&&["admin","owner"].indexOf(i)<0)throw Error("This item can not be unshared from group "+e.groupId+" by "+n+" as they not the item owner, an org admin, group admin or group owner.");return function(e){var t=e.authentication.username,n=e.owner||t,i=Object(o.a)(e)+"/content/items/"+e.id+"/unshare";n===t&&(i=Object(o.a)(e)+"/content/users/"+n+"/items/"+e.id+"/unshare");return e.params={groups:e.groupId},Object(r.d)(i,e)}(e)})).then((function(t){if(t.notUnsharedFrom.length)throw Error("Item "+e.id+" could not be unshared to group "+e.groupId);return t}))}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(3),o=n(5),i=n(4);function a(e){return s(null,e)}function s(e,t){var n=e||"self",a=Object(i.a)(t)+"/portals/"+n,s=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(a,s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(5),i=n(4);function a(e,t){var n=e||"self",a=Object(i.a)(t)+"/portals/"+n+"/settings",s=Object(r.a)({httpMethod:"GET"},t);return Object(o.d)(a,s)}},function(e,t){},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(r||(r={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(3),o=n(11),i=n(27),a=n(5),s=n(82),u=n(36),c=n(24),l=/^https?:\/\/(\S+)\.arcgis\.com.+/;function d(e){return l.test(e)}function f(e){if(!l.test(e))return null;var t=e.match(l)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function p(e,t){var n=Object(o.a)(function(e){if(!l.test(e))return e;switch(f(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),r=Object(o.a)(e).replace(/https?:\/\//,"");return new RegExp(r,"i").test(n)}var h=n(49);var g=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?Object(o.a)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||1440,this.trustedServers={},e.server){var t=this.getServerRootUrl(e.server);this.trustedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window);var o,s=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",duration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),u=s.portal,c=s.provider,l=s.clientId,d=s.duration,f=s.redirectUri,p=s.popup,h=s.popupWindowFeatures,g=s.state,m=s.locale,v=s.params;if(o="arcgis"===c?u+"/oauth2/authorize?client_id="+l+"&response_type=token&expiration="+d+"&redirect_uri="+encodeURIComponent(f)+"&state="+g+"&locale="+m:u+"/oauth2/social/authorize?client_id="+l+"&socialLoginProviderName="+c+"&autoAccountCreateForSocial=true&response_type=token&expiration="+d+"&redirect_uri="+encodeURIComponent(f)+"&state="+g+"&locale="+m,v&&(o=o+"&"+Object(i.b)(v)),p){var y,b=((y={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){y.resolve=e,y.reject=t})),y);return n["__ESRI_REST_AUTH_HANDLER_"+l]=function(t,n){if(t){var r=JSON.parse(t);b.reject(new a.a(r.errorMessage,r.error))}else if(n){var o=JSON.parse(n);b.resolve(new e({clientId:l,portal:u,ssl:o.ssl,token:o.token,tokenExpires:new Date(o.expires),username:o.username}))}},n.open(o,"oauth-window",h),b.promise}n.location.href=o},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var o=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),i=o.portal,u=o.clientId,c=o.popup;function l(t,r){try{var o=void 0,s="__ESRI_REST_AUTH_HANDLER_"+u;if(c&&(n.opener?n.opener.parent&&n.opener.parent[s]?o=n.opener.parent[s]:n.opener&&n.opener[s]&&(o=n.opener[s]):n!==n.parent&&n.parent&&n.parent[s]&&(o=n.parent[s]),o))return o(t?JSON.stringify(t):void 0,JSON.stringify(r)),void n.close()}catch(e){throw new a.a('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new a.a(t.errorMessage,t.error);return new e({clientId:u,portal:i,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var d=Object(s.b)(n.location.hash);if(!d.access_token){var f=void 0,p="Unknown error";return d.error&&(f=d.error,p=d.error_description),l({error:f,errorMessage:p})}var h=d.access_token,g=new Date(Date.now()+1e3*parseInt(d.expires_in,10)-6e4),m=d.username;return l(void 0,{token:h,expires:g,ssl:"true"===d.ssl,username:m})},e.fromParent=function(t,n){var r;return!n&&window&&(n=window),new Promise((function(o,i){r=function(t){if(t.source===n.parent&&t.data)try{return o(e.parentMessageHandler(t))}catch(e){return i(e)}},n.addEventListener("message",r,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",r,!1),e}))},e.authorize=function(e,t){var n=Object(r.a)({portal:"https://arcgis.com/sharing/rest",duration:20160},e),o=n.portal,i=n.clientId,a=n.duration,s=n.redirectUri;t.writeHead(301,{Location:o+"/oauth2/authorize?client_id="+i+"&duration="+a+"&response_type=code&redirect_uri="+encodeURIComponent(s)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var o=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:1440},t),i=o.portal,a=o.clientId,s=o.redirectUri,u=o.refreshTokenTTL;return Object(c.a)(i+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:a,redirect_uri:s,code:n}}).then((function(t){return new e({clientId:a,portal:i,ssl:t.ssl,redirectUri:s,refreshToken:t.refreshToken,refreshTokenTTL:u,refreshTokenExpires:new Date(Date.now()+1e3*(u-1)),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){var n=void 0===t.ssl||t.ssl,r=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:n,token:t.token,username:t.userId,tokenExpires:new Date(r)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var n=new Error(t.data.error.message);throw n.name=t.data.error.name,n}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",o=Object(r.a)(Object(r.a)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=Object(a.d)(n,o).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return n=this.portal,r=e,o=d(n),i=d(r),a=f(n),s=f(r),o&&i&&a===s||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var n,r,o,i,a,s},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return Object(h.a)(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new a.a("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=Object(o.a)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),r=t[2].split("/"),i=r[0],a=r.slice(1);return""+n+i.toLowerCase()+"/"+a.join("/")},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){var r=e.indexOf(n.origin)>-1,o="arcgis:auth:requestCredential"===n.data.type;if(r&&o){var i=t.toCredential();i.server=i.server.replace("/sharing/rest",""),n.source.postMessage({type:"arcgis:auth:credential",credential:i},n.origin)}}},e.prototype.getTokenForServer=function(e,t){var n=this,r=this.getServerRootUrl(e),o=this.trustedServers[r];return o&&o.expires&&o.expires.getTime()>Date.now()?Promise.resolve(o.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=Object(a.d)(r+"/rest/info").then((function(o){if(o.owningSystemUrl){if(p(o.owningSystemUrl,n.portal))return Object(a.d)(o.owningSystemUrl+"/sharing/rest/info",t);throw new a.a(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}if(o.authInfo&&void 0!==n.trustedServers[r])return Promise.resolve({authInfo:o.authInfo});throw new a.a(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?Object(u.a)(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):Object(u.a)(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.trustedServers[r]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[r],e.token}))),this._pendingTokenRequests[r])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=Object(r.a)({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return Object(u.a)(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Object(c.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Object(c.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e}()},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[c]=u,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t,n){
/*!
 * CSSJanus. https://github.com/cssjanus/cssjanus
 *
 * Copyright 2014 Trevor Parscal
 * Copyright 2010 Roan Kattouw
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r;function o(e,t){var n=[],r=0;function o(e){return n.push(e),t}function i(){return n[r++]}return{tokenize:function(t){return t.replace(e,o)},detokenize:function(e){return e.replace(new RegExp("("+t+")","g"),i)}}}r=new function(){var e="(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f])",t="(?:[_a-z0-9-]|[^\\u0020-\\u007e]|"+e+")",n="(?:[0-9]*\\.[0-9]+|[0-9]+)(?:\\s*(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)|-?(?:[_a-z]|[^\\u0020-\\u007e]|(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f]))(?:[_a-z0-9-]|[^\\u0020-\\u007e]|(?:(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f]))*)?",r="((?:-?"+n+")|(?:inherit|auto))",i="(#?"+t+"+|(?:rgba?|hsla?)\\([ \\d.,%-]+\\))",a="(?:[!#$%&*-~]|[^\\u0020-\\u007e]|"+e+")*?",s="(?!("+t+"|\\r?\\n|\\s|#|\\:|\\.|\\,|\\+|>|~|\\(|\\)|\\[|\\]|=|\\*=|~=|\\^=|'[^']*'|\"[^\"]*\"|`COMMENT`)*?{)",u="(?!"+a+"['\"]?\\s*\\))",c="(?="+a+"['\"]?\\s*\\))",l="(\\s*(?:!important\\s*)?[;}])",d=/`TMP`/g,f=new RegExp("\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\/","gi"),p=new RegExp("(\\/\\*\\!?\\s*@noflip\\s*\\*\\/"+s+"[^;}]+;?)","gi"),h=new RegExp("(\\/\\*\\!?\\s*@noflip\\s*\\*\\/[^\\}]*?})","gi"),g=new RegExp("(direction\\s*:\\s*)ltr","gi"),m=new RegExp("(direction\\s*:\\s*)rtl","gi"),v=new RegExp("(^|[^a-zA-Z])(left)(?![a-zA-Z])"+u+s,"gi"),y=new RegExp("(^|[^a-zA-Z])(right)(?![a-zA-Z])"+u+s,"gi"),b=new RegExp("(^|[^a-zA-Z])(left)"+c,"gi"),S=new RegExp("(^|[^a-zA-Z])(right)"+c,"gi"),w=new RegExp("(^|[^a-zA-Z])(ltr)"+c,"gi"),I=new RegExp("(^|[^a-zA-Z])(rtl)"+c,"gi"),E=new RegExp("(^|[^a-zA-Z])([ns]?)e-resize","gi"),O=new RegExp("(^|[^a-zA-Z])([ns]?)w-resize","gi"),T=new RegExp("((?:margin|padding|border-width)\\s*:\\s*)"+r+"(\\s+)"+r+"(\\s+)"+r+"(\\s+)"+r+l,"gi"),C=new RegExp("((?:-color|border-style)\\s*:\\s*)"+i+"(\\s+)"+i+"(\\s+)"+i+"(\\s+)"+i+l,"gi"),A=new RegExp("(background(?:-position)?\\s*:\\s*(?:[^:;}\\s]+\\s+)*?)("+n+")","gi"),x=new RegExp("(background-position-x\\s*:\\s*)(-?(?:[0-9]*\\.[0-9]+|[0-9]+)%)","gi"),P=new RegExp("(border-radius\\s*:\\s*)"+r+"(?:(?:\\s+"+r+")(?:\\s+"+r+")?(?:\\s+"+r+")?)?(?:(?:(?:\\s*\\/\\s*)"+r+")(?:\\s+"+r+")?(?:\\s+"+r+")?(?:\\s+"+r+")?)?"+l,"gi"),D=new RegExp("(box-shadow\\s*:\\s*(?:inset\\s*)?)"+r,"gi"),R=new RegExp("(text-shadow\\s*:\\s*)"+r+"(\\s*)"+i,"gi"),j=new RegExp("(text-shadow\\s*:\\s*)"+i+"(\\s*)"+r,"gi"),_=new RegExp("(text-shadow\\s*:\\s*)"+r,"gi"),k=new RegExp("(transform\\s*:[^;}]*)(translateX\\s*\\(\\s*)"+r+"(\\s*\\))","gi"),M=new RegExp("(transform\\s*:[^;}]*)(translate\\s*\\(\\s*)"+r+"((?:\\s*,\\s*"+r+"){0,2}\\s*\\))","gi");function N(e,t,n){var r,o;return"%"===n.slice(-1)&&(-1!==(r=n.indexOf("."))?(o=n.length-r-2,n=(n=100-parseFloat(n)).toFixed(o)+"%"):n=100-parseFloat(n)+"%"),t+n}function L(e){switch(e.length){case 4:e=[e[1],e[0],e[3],e[2]];break;case 3:e=[e[1],e[0],e[1],e[2]];break;case 2:e=[e[1],e[0]];break;case 1:e=[e[0]]}return e.join(" ")}function U(e,t){var n=[].slice.call(arguments),r=n.slice(2,6).filter((function(e){return e})),o=n.slice(6,10).filter((function(e){return e})),i=n[10]||"";return t+(o.length?L(r)+" / "+L(o):L(r))+i}function F(e){return 0===parseFloat(e)?e:"-"===e[0]?e.slice(1):"-"+e}function $(e,t,n){return t+F(n)}function V(e,t,n,r,o){return t+n+F(r)+o}function B(e,t,n,r,o){return t+n+r+F(o)}return{transform:function(e,t){var n=new o(p,"`NOFLIP_SINGLE`"),r=new o(h,"`NOFLIP_CLASS`"),i=new o(f,"`COMMENT`");return e=i.tokenize(r.tokenize(n.tokenize(e.replace("`","%60")))),t.transformDirInUrl&&(e=e.replace(w,"$1`TMP`").replace(I,"$1ltr").replace(d,"rtl")),t.transformEdgeInUrl&&(e=e.replace(b,"$1`TMP`").replace(S,"$1left").replace(d,"right")),e=e.replace(g,"$1`TMP`").replace(m,"$1ltr").replace(d,"rtl").replace(v,"$1`TMP`").replace(y,"$1left").replace(d,"right").replace(E,"$1$2`TMP`").replace(O,"$1$2e-resize").replace(d,"w-resize").replace(P,U).replace(D,$).replace(R,B).replace(j,B).replace(_,$).replace(k,V).replace(M,V).replace(T,"$1$2$3$8$5$6$7$4$9").replace(C,"$1$2$3$8$5$6$7$4$9").replace(A,N).replace(x,N),e=n.detokenize(r.detokenize(i.detokenize(e)))}}},e.exports?t.transform=function(e,t,n){var o;return"object"==typeof t?o=t:(o={},"boolean"==typeof t&&(o.transformDirInUrl=t),"boolean"==typeof n&&(o.transformEdgeInUrl=n)),r.transform(e,o)}:"undefined"!=typeof window&&(window.cssjanus=r)},function(e,t,n){"use strict";n.r(t);var r=n(90);n.d(t,"getFeature",(function(){return r.a})),n.d(t,"queryFeatures",(function(){return r.b}));var o=n(91);n.d(t,"addFeatures",(function(){return o.a}));var i=n(92);n.d(t,"updateFeatures",(function(){return i.a}));var a=n(93);n.d(t,"deleteFeatures",(function(){return a.a}));var s=n(94);n.d(t,"applyEdits",(function(){return s.a}));var u=n(95);n.d(t,"getAttachments",(function(){return u.a}));var c=n(96);n.d(t,"addAttachment",(function(){return c.a}));var l=n(97);n.d(t,"updateAttachment",(function(){return l.a}));var d=n(98);n.d(t,"deleteAttachments",(function(){return d.a}));var f=n(99);n.d(t,"queryRelated",(function(){return f.a}));var p=n(51);n.d(t,"getLayer",(function(){return p.a}));var h=n(100);n.d(t,"getService",(function(){return h.a}));var g=n(101);n.d(t,"decodeValues",(function(){return g.a}));var m=n(102);for(var v in m)["default","getFeature","queryFeatures","addFeatures","updateFeatures","deleteFeatures","applyEdits","getAttachments","addAttachment","updateAttachment","deleteAttachments","queryRelated","getLayer","getService","decodeValues"].indexOf(v)<0&&function(e){n.d(t,e,(function(){return m[e]}))}(v)},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")(),l=Object.prototype.toString,d=Math.max,f=Math.min,p=function(){return c.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=o.test(e);return s||i.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,o,i,a,s,u,c=0,l=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function b(e){return c=e,s=setTimeout(w,t),l?y(e):a}function S(e){var n=e-u;return void 0===u||n>=t||n<0||m&&e-c>=i}function w(){var e=p();if(S(e))return I(e);s=setTimeout(w,function(e){var n=t-(e-u);return m?f(n,i-(e-c)):n}(e))}function I(e){return s=void 0,v&&r?y(e):(r=o=void 0,a)}function E(){var e=p(),n=S(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return b(u);if(m)return s=setTimeout(w,t),y(u)}return void 0===s&&(s=setTimeout(w,t)),a}return t=g(t)||0,h(n)&&(l=!!n.leading,i=(m="maxWait"in n)?d(g(n.maxWait)||0,t):i,v="trailing"in n?!!n.trailing:v),E.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},E.flush=function(){return void 0===s?a:I(p())},E}}).call(this,n(38))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")(),l=Object.prototype.toString,d=Math.max,f=Math.min,p=function(){return c.Date.now()};function h(e,t,n){var r,o,i,a,s,u,c=0,l=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function b(e){return c=e,s=setTimeout(w,t),l?y(e):a}function S(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-c>=i}function w(){var e=p();if(S(e))return I(e);s=setTimeout(w,function(e){var n=t-(e-u);return h?f(n,i-(e-c)):n}(e))}function I(e){return s=void 0,v&&r?y(e):(r=o=void 0,a)}function E(){var e=p(),n=S(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return b(u);if(h)return s=setTimeout(w,t),y(u)}return void 0===s&&(s=setTimeout(w,t)),a}return t=m(t)||0,g(n)&&(l=!!n.leading,i=(h="maxWait"in n)?d(m(n.maxWait)||0,t):i,v="trailing"in n?!!n.trailing:v),E.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},E.flush=function(){return void 0===s?a:I(p())},E}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=o.test(e);return s||i.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),h(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,n(38))},,function(e,t,n){e.exports=n(156)()},function(e,t,n){"use strict";var r=n(157);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function I(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case d:case f:case a:case u:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case v:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return I(e)===f}t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=p,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=i,t.Profiler=u,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||I(e)===d},t.isConcurrentMode=E,t.isContextConsumer=function(e){return I(e)===l},t.isContextProvider=function(e){return I(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return I(e)===p},t.isFragment=function(e){return I(e)===a},t.isLazy=function(e){return I(e)===v},t.isMemo=function(e){return I(e)===m},t.isPortal=function(e){return I(e)===i},t.isProfiler=function(e){return I(e)===u},t.isStrictMode=function(e){return I(e)===s},t.isSuspense=function(e){return I(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===u||e===s||e===h||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===b||e.$$typeof===S||e.$$typeof===w||e.$$typeof===y)},t.typeOf=I},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="";for(var i=Object.keys(t),s=0;s<i.length;s++){var u=i[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),i=0;i<r.length;i++){var a=r[i],s=e[a];(o?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}},function(e,t,n){var r=n(75),o=n(164);n(76);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return o(e,(function(e,t,o,u,c){var l=n[o],d=!1;if(!0===l?d=l:"function"==typeof l?d=l(u):l instanceof RegExp&&(d=l.test(u)),!0!==d&&(d=!1),u=s(o,u)){var f,p={position:t,sourcePosition:e,source:c,isWhite:d};return d?i(f=r(o,u,p))?o+":"+u:f:i(f=a(o,u,p))?void 0:f}}))},e.exports=a},function(e,t,n){var r=n(76);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,o=!1,i=0,a=0,s="";function u(){if(!o){var n=r.trim(e.slice(i,a)),u=n.indexOf(":");if(-1!==u){var c=r.trim(n.slice(0,u)),l=r.trim(n.slice(u+1));if(c){var d=t(i,s.length,c,l,n);d&&(s+=d+"; ")}}}i=a+1}for(;a<n;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var l=e.indexOf("*/",a+2);if(-1===l)break;i=(a=l+1)+1,o=!1}else"("===c?o=!0:")"===c?o=!1:";"===c?o||u():"\n"===c&&u()}return r.trim(s)}},function(e,t,n){var r=n(58).FilterCSS,o=n(74),i=n(77),a=i.parseTag,s=i.parseAttr,u=n(59);function c(e){return null==e}function l(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList=e.whiteList||o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}l.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,l=t.onTagAttr,d=t.onIgnoreTagAttr,f=t.safeAttrValue,p=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;if(t.stripIgnoreTagBody){g=o.StripTagBody(t.stripIgnoreTagBody,i);i=g.onIgnoreTag}var m=a(e,(function(e,t,o,a,g){var m,v={sourcePosition:e,position:t,isClosing:g,isWhite:n.hasOwnProperty(o)};if(!c(m=r(o,a,v)))return m;if(v.isWhite){if(v.isClosing)return"</"+o+">";var y=function(e){var t=u.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=u.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=u.trim(e.slice(0,-1))),{html:e,closing:n}}(a),b=n[o],S=s(y.html,(function(e,t){var n,r=-1!==u.indexOf(b,e);return c(n=l(o,e,t,r))?r?(t=f(o,e,t,h))?e+'="'+t+'"':e:c(n=d(o,e,t,r))?void 0:n:n}));a="<"+o;return S&&(a+=" "+S),y.closing&&(a+=" /"),a+=">"}return c(m=i(o,a,v))?p(a):m}),p);return g&&(m=g.remove(m)),m},e.exports=l},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){const r=n(32);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},function(e,t,n){const r=n(32);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},function(e,t,n){const r=n(13);e.exports=(e,t,n,o)=>{"string"==typeof n&&(o=n,n=void 0);try{return new r(e,n).inc(t,o).version}catch(e){return null}}},function(e,t,n){const r=n(32),o=n(61);e.exports=(e,t)=>{if(o(e,t))return null;{const n=r(e),o=r(t),i=n.prerelease.length||o.prerelease.length,a=i?"pre":"",s=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==o[e])return a+e;return s}}},function(e,t,n){const r=n(13);e.exports=(e,t)=>new r(e,t).major},function(e,t,n){const r=n(13);e.exports=(e,t)=>new r(e,t).minor},function(e,t,n){const r=n(13);e.exports=(e,t)=>new r(e,t).patch},function(e,t,n){const r=n(32);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},function(e,t,n){const r=n(18);e.exports=(e,t,n)=>r(t,e,n)},function(e,t,n){const r=n(18);e.exports=(e,t)=>r(e,t,!0)},function(e,t,n){const r=n(62);e.exports=(e,t)=>e.sort((e,n)=>r(e,n,t))},function(e,t,n){const r=n(62);e.exports=(e,t)=>e.sort((e,n)=>r(n,e,t))},function(e,t,n){const r=n(13),o=n(32),{re:i,t:a}=n(31);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=i[a.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),i[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[a.COERCERTL].lastIndex=-1}else n=e.match(i[a.COERCE]);return null===n?null:o(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},function(e,t,n){"use strict";const r=n(181),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),h=()=>1;const g=(e,t,n)=>{const r=e[f].get(t);if(r){const t=r.value;if(m(e,t)){if(y(e,r),!e[s])return}else n&&(e[p]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[u]&&n>e[u]},v=e=>{if(e[i]>e[o])for(let t=e[d].tail;e[i]>e[o]&&null!==t;){const n=t.prev;y(e,t),t=n}},y=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[i]-=n.length,e[f].delete(n.key),e[d].removeNode(t)}};class b{constructor(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}}const S=(e,t,n,r)=>{let o=n.value;m(e,o)&&(y(e,n),e[s]||(o=void 0)),o&&t.call(r,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,v(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,v(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[i]=0,this[d].forEach(e=>{e.length=this[a](e.value,e.key),this[i]+=e.length})),v(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const r=n.prev;S(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const r=n.next;S(this,e,n,t),n=r}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach(e=>this[c](e.key,e.value)),this[f]=new Map,this[d]=new r,this[i]=0}dump(){return this[d].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[u])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](t,e);if(this[f].has(e)){if(s>this[o])return y(this,this[f].get(e)),!1;const a=this[f].get(e).value;return this[c]&&(this[l]||this[c](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),v(this),!0}const p=new b(e,t,s,r,n);return p.length>this[o]?(this[c]&&this[c](e,t),!1):(this[i]+=p.length,this[d].unshift(p),this[f].set(e,this[d].head),v(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const e=o-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[f].forEach((e,t)=>g(this,t,!1))}}},function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,o=arguments.length;n<o;n++)t.push(arguments[n]);return t}function o(e,t,n){var r=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function i(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,o=this.head;null!==o;)n.push(e.call(t,o.value,this)),o=o.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,o=this.tail;null!==o;)n.push(e.call(t,o.value,this)),o=o.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var a=[];for(r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=o(this,i,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(182)(r)}catch(e){}},function(e,t,n){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},function(e,t,n){const r=n(19);e.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},function(e,t,n){const r=n(13),o=n(19);e.exports=(e,t,n)=>{let i=null,a=null,s=null;try{s=new o(t,n)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new r(i,n)))}),i}},function(e,t,n){const r=n(13),o=n(19);e.exports=(e,t,n)=>{let i=null,a=null,s=null;try{s=new o(t,n)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new r(i,n)))}),i}},function(e,t,n){const r=n(13),o=n(19),i=n(45);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let a=null;o.forEach(e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}),!a||n&&!i(n,a)||(n=a)}return n&&e.test(n)?n:null}},function(e,t,n){const r=n(19);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},function(e,t,n){const r=n(66);e.exports=(e,t,n)=>r(e,t,">",n)},function(e,t,n){const r=n(66);e.exports=(e,t,n)=>r(e,t,"<",n)},function(e,t,n){const r=n(19);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},function(e,t,n){const r=n(47),o=n(18);e.exports=(e,t,n)=>{const i=[];let a=null,s=null;const u=e.sort((e,t)=>o(e,t,n));for(const e of u){r(e,t,n)?(s=e,a||(a=e)):(s&&i.push([a,s]),s=null,a=null)}a&&i.push([a,null]);const c=[];for(const[e,t]of i)e===t?c.push(e):t||e!==u[0]?t?e===u[0]?c.push("<="+t):c.push(`${e} - ${t}`):c.push(">="+e):c.push("*");const l=c.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},function(e,t,n){const r=n(19),o=n(46),{ANY:i}=o,a=n(47),s=n(18),u=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=n.includePrerelease?[new o(">=0.0.0-0")]:[new o(">=0.0.0")]}if(1===t.length&&t[0].semver===i){if(n.includePrerelease)return!0;t=[new o(">=0.0.0")]}const r=new Set;let u,d,f,p,h,g,m;for(const t of e)">"===t.operator||">="===t.operator?u=c(u,t,n):"<"===t.operator||"<="===t.operator?d=l(d,t,n):r.add(t.semver);if(r.size>1)return null;if(u&&d){if(f=s(u.semver,d.semver,n),f>0)return null;if(0===f&&(">="!==u.operator||"<="!==d.operator))return null}for(const e of r){if(u&&!a(e,String(u),n))return null;if(d&&!a(e,String(d),n))return null;for(const r of t)if(!a(e,String(r),n))return!1;return!0}let v=!(!d||n.includePrerelease||!d.semver.prerelease.length)&&d.semver,y=!(!u||n.includePrerelease||!u.semver.prerelease.length)&&u.semver;v&&1===v.prerelease.length&&"<"===d.operator&&0===v.prerelease[0]&&(v=!1);for(const e of t){if(m=m||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,u)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(p=c(u,e,n),p===e&&p!==u)return!1}else if(">="===u.operator&&!a(u.semver,String(e),n))return!1;if(d)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(h=l(d,e,n),h===e&&h!==d)return!1}else if("<="===d.operator&&!a(d.semver,String(e),n))return!1;if(!e.operator&&(d||u)&&0!==f)return!1}return!(u&&g&&!d&&0!==f)&&(!(d&&m&&!u&&0!==f)&&(!y&&!v))},c=(e,t,n)=>{if(!e)return t;const r=s(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},l=(e,t,n)=>{if(!e)return t;const r=s(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let o=!1;e:for(const r of e.set){for(const e of t.set){const t=u(r,e,n);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"AppRoot",(function(){return JE})),n.d(t,"React",(function(){return E})),n.d(t,"ReactDOM",(function(){return T})),n.d(t,"ExtensionManager",(function(){return xp})),n.d(t,"BaseWidget",(function(){return kI})),n.d(t,"WidgetManager",(function(){return eE})),n.d(t,"ConfigManager",(function(){return uE})),n.d(t,"DataSourceManager",(function(){return _g})),n.d(t,"urlUtils",(function(){return p})),n.d(t,"SessionManager",(function(){return lv})),n.d(t,"SessionChangedReasonType",(function(){return rv})),n.d(t,"appActions",(function(){return h})),n.d(t,"extensionSpec",(function(){return l})),n.d(t,"utils",(function(){return u})),n.d(t,"appConfigUtils",(function(){return f})),n.d(t,"themeUtils",(function(){return m})),n.d(t,"ReactRedux",(function(){return r})),n.d(t,"MessageManager",(function(){return JI})),n.d(t,"Immutable",(function(){return be})),n.d(t,"classNames",(function(){return we.a})),n.d(t,"uuidv1",(function(){return _e})),n.d(t,"queryString",(function(){return ye})),n.d(t,"moduleLoader",(function(){return c})),n.d(t,"jimuHistory",(function(){return w})),n.d(t,"portalUrlUtils",(function(){return d})),n.d(t,"portalUtils",(function(){return g})),n.d(t,"i18n",(function(){return s})),n.d(t,"defaultMessages",(function(){return sy})),n.d(t,"DataSourceComponent",(function(){return KE})),n.d(t,"MultipleDataSourceComponent",(function(){return eO})),n.d(t,"IntlProvider",(function(){return bf})),n.d(t,"injectIntl",(function(){return $d})),n.d(t,"jsx",(function(){return cn})),n.d(t,"css",(function(){return dn})),n.d(t,"Global",(function(){return ln})),n.d(t,"ThemeContext",(function(){return Yt})),n.d(t,"styled",(function(){return un})),n.d(t,"xss",(function(){return fn})),n.d(t,"polished",(function(){return cA})),n.d(t,"MutableStoreManager",(function(){return WI})),n.d(t,"Keyboard",(function(){return NE})),n.d(t,"keyMap",(function(){return ny})),n.d(t,"keyCodes",(function(){return ry})),n.d(t,"AppKeyboardComponent",(function(){return LE})),n.d(t,"keyboardUtils",(function(){return v})),n.d(t,"requestUtils",(function(){return b})),n.d(t,"expressionUtils",(function(){return I})),n.d(t,"dateUtils",(function(){return a})),n.d(t,"createIntl",(function(){return yf})),n.d(t,"createIntlCache",(function(){return Td})),n.d(t,"useIntl",(function(){return cI})),n.d(t,"FormattedDate",(function(){return gI})),n.d(t,"FormattedMessage",(function(){return SI})),n.d(t,"FormattedNumber",(function(){return vI})),n.d(t,"FormattedPlural",(function(){return II})),n.d(t,"FormattedRelativeTime",(function(){return PI})),n.d(t,"FormattedTime",(function(){return mI})),n.d(t,"esri",(function(){return uA})),n.d(t,"lodash",(function(){return sA})),n.d(t,"RepeatedDataSourceProvider",(function(){return RI})),n.d(t,"withRepeatedDataSource",(function(){return jI})),n.d(t,"dataSourceUtils",(function(){return S})),n.d(t,"ExportJson",(function(){return gE})),n.d(t,"ExportCSV",(function(){return SE})),n.d(t,"ExportGeoJSON",(function(){return PE})),n.d(t,"DataActionManager",(function(){return KI})),n.d(t,"ThemeManager",(function(){return Sv})),n.d(t,"invariant",(function(){return pr})),n.d(t,"CONSTANTS",(function(){return i})),n.d(t,"ReactResizeDetector",(function(){return Ar})),n.d(t,"ResizeObserver",(function(){return xr.a})),n.d(t,"ExpressionResolverComponent",(function(){return rO})),n.d(t,"ExpressionResolverErrorCode",(function(){return ZE})),n.d(t,"ServiceManager",(function(){return $y})),n.d(t,"version",(function(){return aA})),n.d(t,"privilegeUtils",(function(){return y})),n.d(t,"spring",(function(){return o})),n.d(t,"ThemeProvider",(function(){return Kt})),n.d(t,"withTheme",(function(){return Qt})),n.d(t,"saveAs",(function(){return Qo.saveAs})),n.d(t,"LayoutItemType",(function(){return Tp})),n.d(t,"LayoutType",(function(){return Cp})),n.d(t,"JimuMapViewStatus",(function(){return XO})),n.d(t,"ContainerType",(function(){return Yp})),n.d(t,"RootContainerType",(function(){return Xp})),n.d(t,"LayoutParentType",(function(){return Kp})),n.d(t,"ScreenTransitionType",(function(){return Qp})),n.d(t,"ScreenTriggerType",(function(){return Zp})),n.d(t,"PageType",(function(){return eh})),n.d(t,"PageMode",(function(){return th})),n.d(t,"DialogMode",(function(){return nh})),n.d(t,"DialogPosition",(function(){return rh})),n.d(t,"DialogInteractionType",(function(){return oh})),n.d(t,"MessageCarryData",(function(){return KO})),n.d(t,"BrowserSizeMode",(function(){return la})),n.d(t,"JimuFieldType",(function(){return da})),n.d(t,"EsriFieldType",(function(){return fa})),n.d(t,"AjaxState",(function(){return pa})),n.d(t,"AppMode",(function(){return ha})),n.d(t,"WidgetState",(function(){return ga})),n.d(t,"LinkType",(function(){return ma})),n.d(t,"WidgetType",(function(){return va})),n.d(t,"ESRI_DATE_FORMAT_ARRAY",(function(){return wa})),n.d(t,"PagePart",(function(){return Ia})),n.d(t,"UrlProtocol",(function(){return Ea})),n.d(t,"APP_FRAME_NAME_IN_BUILDER",(function(){return Oa})),n.d(t,"ResourceType",(function(){return Ta})),n.d(t,"LoadingType",(function(){return Ca})),n.d(t,"ThemeFontVariantKeys",(function(){return wv})),n.d(t,"ThemeCommonColorKeys",(function(){return Iv})),n.d(t,"ThemeThemeAlertColorKeys",(function(){return Ev})),n.d(t,"ThemeThemeMainColorKeys",(function(){return Ov})),n.d(t,"ThemeThemeColorKeys",(function(){return Tv})),n.d(t,"ThemeBoxStyleKeys",(function(){return Cv})),n.d(t,"COMPONENT_CATEGORIES",(function(){return Av})),n.d(t,"ExpressionPartType",(function(){return Ew})),n.d(t,"ExpressionFunctions",(function(){return Ow})),n.d(t,"SqlExpressionMode",(function(){return Qy})),n.d(t,"ClauseLogic",(function(){return Zy})),n.d(t,"ClauseCascade",(function(){return eb})),n.d(t,"ClauseOperator",(function(){return tb})),n.d(t,"ClauseSourceType",(function(){return nb})),n.d(t,"EMPTY_OPTION_VALUE",(function(){return rb})),n.d(t,"ClauseType",(function(){return ob})),n.d(t,"ClauseLabelDisplay",(function(){return ib})),n.d(t,"ClauseDisplayType",(function(){return ab})),n.d(t,"OrderRule",(function(){return sb})),n.d(t,"USER_SETTING_FILE_KEY",(function(){return ZO})),n.d(t,"UrlInfoPartType",(function(){return eT})),n.d(t,"DataSourceStatus",(function(){return Aa.b})),n.d(t,"DataSourceTypes",(function(){return Aa.c})),n.d(t,"SupportedLayerServiceTypes",(function(){return Aa.f})),n.d(t,"SupportedServiceTypes",(function(){return Aa.h})),n.d(t,"SupportedItemTypes",(function(){return Aa.e})),n.d(t,"SupportedLayerTypes",(function(){return Aa.g})),n.d(t,"QueryScope",(function(){return Aa.d})),n.d(t,"DataSourceError",(function(){return Aa.a})),n.d(t,"MessageType",(function(){return tT})),n.d(t,"getMessageTypeLabel",(function(){return rT})),n.d(t,"StringSelectionChangeMessage",(function(){return oT})),n.d(t,"DataRecordsSelectionChangeMessage",(function(){return iT})),n.d(t,"ExtentChangeMessage",(function(){return aT})),n.d(t,"RecordSetChangeType",(function(){return nT})),n.d(t,"DataRecordSetChangeMessage",(function(){return sT})),n.d(t,"SelectDataRecordMessage",(function(){return uT})),n.d(t,"AbstractMessageAction",(function(){return cT})),n.d(t,"DummyMessageAction",(function(){return lT})),n.d(t,"translatedLocales",(function(){return CT})),n.d(t,"init",(function(){return xT})),n.d(t,"preloadModulesForSSR",(function(){return jT})),n.d(t,"createAppStore",(function(){return gg})),n.d(t,"getAppStore",(function(){return mg})),n.d(t,"observeStore",(function(){return vg})),n.d(t,"TrackingManager",(function(){return nE})),n.d(t,"LoadingHandler",(function(){return kT})),n.d(t,"loadDependency",(function(){return Ty})),n.d(t,"loadDependencies",(function(){return Cy})),n.d(t,"loadArcGISJSAPIModules",(function(){return jy})),n.d(t,"loadArcGISJSAPIModule",(function(){return _y})),n.d(t,"ErrorBoundary",(function(){return VE})),n.d(t,"AbstractDataAction",(function(){return lE})),n.d(t,"DummnyDataAction",(function(){return dE})),n.d(t,"groupExpressionPartsByFunction",(function(){return Bw})),n.d(t,"StatisticType",(function(){return Tw})),n.d(t,"ESRIOBJECTIDTYPE",(function(){return Cw})),n.d(t,"resolveExpression",(function(){return Xw})),n.d(t,"BaseVersionManager",(function(){return oE})),n.d(t,"AppVersionManager",(function(){return iE})),n.d(t,"AppDialog",(function(){return GC})),n.d(t,"AnimationTriggerType",(function(){return MT})),n.d(t,"AnimationType",(function(){return NT})),n.d(t,"AnimationEffectType",(function(){return LT})),n.d(t,"AnimationDirection",(function(){return UT})),n.d(t,"AnimationPlayMode",(function(){return FT})),n.d(t,"Animation",(function(){return dC})),n.d(t,"OneByOneAnimation",(function(){return hC})),n.d(t,"useIntersection",(function(){return oC})),n.d(t,"AnimationContext",(function(){return iC})),n.d(t,"isDirectionalTransition",(function(){return iA})),n.d(t,"getIndexFromProgress",(function(){return eA})),n.d(t,"getTransition",(function(){return nA})),n.d(t,"clamp",(function(){return tA})),n.d(t,"isIntegerProgress",(function(){return ZC})),n.d(t,"TransitionContainer",(function(){return oA})),n.d(t,"TransitionDirection",(function(){return WC})),n.d(t,"TransitionType",(function(){return qC})),n.d(t,"INTERACTIVE_CLASS",(function(){return WE})),n.d(t,"FocusVisibility",(function(){return qE}));var r={};n.r(r),n.d(r,"Provider",(function(){return j})),n.d(r,"connectAdvanced",(function(){return q})),n.d(r,"ReactReduxContext",(function(){return C})),n.d(r,"connect",(function(){return se})),n.d(r,"batch",(function(){return T.unstable_batchedUpdates})),n.d(r,"useDispatch",(function(){return fe})),n.d(r,"createDispatchHook",(function(){return de})),n.d(r,"useSelector",(function(){return me})),n.d(r,"createSelectorHook",(function(){return he})),n.d(r,"useStore",(function(){return le})),n.d(r,"createStoreHook",(function(){return ce})),n.d(r,"shallowEqual",(function(){return H}));var o={};n.r(o),n.d(o,"apply",(function(){return Jo})),n.d(o,"config",(function(){return so})),n.d(o,"update",(function(){return ro})),n.d(o,"animated",(function(){return Ko})),n.d(o,"a",(function(){return Ko})),n.d(o,"interpolate",(function(){return ao})),n.d(o,"Globals",(function(){return Zr})),n.d(o,"useSpring",(function(){return go})),n.d(o,"useTrail",(function(){return mo})),n.d(o,"useTransition",(function(){return So})),n.d(o,"useChain",(function(){return uo})),n.d(o,"useSprings",(function(){return ho}));var i={};n.r(i),n.d(i,"BREAK_POINTS",(function(){return hc})),n.d(i,"DEFAULT_VIEWPORT_SIZE",(function(){return gc})),n.d(i,"DEFAULT_PAGE_WIDTH",(function(){return mc})),n.d(i,"SCREEN_RESOLUTIONS",(function(){return yc})),n.d(i,"SHARED_THEME",(function(){return bc})),n.d(i,"SELECTION_DATA_VIEW_ID",(function(){return Sc})),n.d(i,"DATA_VIEW_ID_FOR_NO_SELECTION",(function(){return wc})),n.d(i,"OUTPUT_DATA_VIEW_ID",(function(){return Ic})),n.d(i,"REPEAT_CONTEXT_DATA_VIEW_ID",(function(){return Ec})),n.d(i,"CURRENT_PAGE",(function(){return Oc})),n.d(i,"DEFAULT_QUERY_PAGE_SIZE",(function(){return Tc})),n.d(i,"USER_LOCALE_KEY",(function(){return Cc}));var a={};n.r(a),n.d(a,"VirtualDateType",(function(){return Ac})),n.d(a,"TimeUnit",(function(){return xc})),n.d(a,"ESRI_DATE_FORMAT_MAP",(function(){return Pc})),n.d(a,"DATE_TIME_CONNECTOR",(function(){return Dc})),n.d(a,"DATE_TIME_DEFAULT_FORMAT",(function(){return Rc})),n.d(a,"getEsriDateFormat",(function(){return jc})),n.d(a,"getDateTimeFormat",(function(){return _c})),n.d(a,"formatDateField",(function(){return kc})),n.d(a,"formatDateLocally",(function(){return Mc})),n.d(a,"getIntlOptions",(function(){return Nc})),n.d(a,"getDateOptions",(function(){return Lc})),n.d(a,"getTimeOption",(function(){return Uc})),n.d(a,"formatDate",(function(){return Fc})),n.d(a,"formatTime",(function(){return $c}));var s={};n.r(s),n.d(s,"getLocaleToLoad",(function(){return wf})),n.d(s,"getBrowserLanguage",(function(){return If})),n.d(s,"getTranslatedLocale",(function(){return Ef})),n.d(s,"isSameLanguage",(function(){return Of})),n.d(s,"loadLocaleMessages",(function(){return Tf})),n.d(s,"isRTLLocale",(function(){return Cf})),n.d(s,"getIntl",(function(){return xf})),n.d(s,"getDecimalSeparator",(function(){return Pf})),n.d(s,"findLocale",(function(){return Df}));var u={};n.r(u),n.d(u,"getValue",(function(){return Ks})),n.d(u,"isDeepEqual",(function(){return pc})),n.d(u,"getWidgetCallbackNamesFromWidgetState",(function(){return jf})),n.d(u,"getPanelCallbackNamesFromPanelState",(function(){return _f})),n.d(u,"isTouchDevice",(function(){return kf})),n.d(u,"getBrowserSizeMode",(function(){return Mf})),n.d(u,"findViewportSize",(function(){return Nf})),n.d(u,"getSizeModeWidth",(function(){return Lf})),n.d(u,"loadstyle",(function(){return Ff})),n.d(u,"applyMixins",(function(){return $f})),n.d(u,"isArrayContainSameItems",(function(){return Vf})),n.d(u,"hyphenateStyleName",(function(){return Wf})),n.d(u,"styleObjectToString",(function(){return qf})),n.d(u,"tryGet",(function(){return zf})),n.d(u,"getLocalStorageAppKey",(function(){return Hf})),n.d(u,"getUID",(function(){return Jf})),n.d(u,"getUUID",(function(){return Yf})),n.d(u,"calculateDigits",(function(){return Xf})),n.d(u,"getOverlayUniqueId",(function(){return Kf})),n.d(u,"replaceI18nPlaceholdersInObject",(function(){return Qf})),n.d(u,"checkUpdate",(function(){return Zf})),n.d(u,"showApp",(function(){return ep})),n.d(u,"getIntlOption",(function(){return tp})),n.d(u,"memoize",(function(){return np})),n.d(u,"readLocalStorageKeys",(function(){return rp})),n.d(u,"readLocalStorage",(function(){return op})),n.d(u,"setLocalStorage",(function(){return ip})),n.d(u,"readSessionStorageKeys",(function(){return ap})),n.d(u,"readSessionStorage",(function(){return sp})),n.d(u,"setSessionStorage",(function(){return up})),n.d(u,"removeFromLocalStorage",(function(){return cp})),n.d(u,"removeFromSessionStorage",(function(){return lp})),n.d(u,"formatNumber",(function(){return dp})),n.d(u,"formatPercentageNumber",(function(){return fp})),n.d(u,"formatPixelNumber",(function(){return pp}));var c={};n.r(c),n.d(c,"getModuleSync",(function(){return mp})),n.d(c,"loadModule",(function(){return vp})),n.d(c,"loadModules",(function(){return yp})),n.d(c,"resolveModuleFullUrl",(function(){return bp})),n.d(c,"resolveModuleFullPath",(function(){return Sp})),n.d(c,"getJimuForBuilderModules",(function(){return wp})),n.d(c,"deleteModule",(function(){return Ip}));var l={};n.r(l),n.d(l,"ExtensionPoints",(function(){return hp})),n.d(l,"EP_SUPPORT_MULTIPLE_EXTENSIONS",(function(){return Ep})),n.d(l,"DummyExtension",(function(){return Op}));var d={};n.r(d),n.d(d,"getPortalSelfInfoUrl",(function(){return Pp})),n.d(d,"getPortalUrlFromLocation",(function(){return Dp})),n.d(d,"getPortalRestUrl",(function(){return Rp})),n.d(d,"getPortalUrlFromRestUrl",(function(){return jp})),n.d(d,"isSamePortalUrl",(function(){return _p})),n.d(d,"isAGOLDomain",(function(){return kp})),n.d(d,"getStandardPortalUrl",(function(){return Mp})),n.d(d,"getBaseItemUrl",(function(){return Np})),n.d(d,"getItemUrl",(function(){return Lp})),n.d(d,"getBaseUserUrl",(function(){return Up})),n.d(d,"getUserUrl",(function(){return Fp})),n.d(d,"getContentUrl",(function(){return $p})),n.d(d,"getUserContentUrl",(function(){return Vp})),n.d(d,"getUserItemsUrl",(function(){return Bp})),n.d(d,"shareItemUrl",(function(){return Gp})),n.d(d,"getHomeIndexUrl",(function(){return Wp})),n.d(d,"getHomeMapViewerUrl",(function(){return qp})),n.d(d,"fixPortalUrlProtocol",(function(){return zp})),n.d(d,"getPortalProxyUrl",(function(){return Hp})),n.d(d,"getHostUrlByOrgUrl",(function(){return Jp}));var f={};n.r(f),n.d(f,"getWidgetContext",(function(){return lh})),n.d(f,"addWidgetManifestProperties",(function(){return dh})),n.d(f,"addWidgetDefaultLabelAndIcon",(function(){return fh})),n.d(f,"addLayoutLabel",(function(){return ph})),n.d(f,"getUniqueId",(function(){return hh})),n.d(f,"getUniqueLabel",(function(){return gh})),n.d(f,"getAllWidgets",(function(){return mh})),n.d(f,"getWidgetMessageActionJsons",(function(){return vh})),n.d(f,"isTwoViewsInSaveSection",(function(){return yh})),n.d(f,"fixLayoutIds",(function(){return bh})),n.d(f,"updateStateWhenAppConfigChange",(function(){return Sh})),n.d(f,"isWidgetFromSameSource",(function(){return wh})),n.d(f,"getLayoutIdInSizeMode",(function(){return Ih})),n.d(f,"buildDataActionRelatedWidgetMap",(function(){return Eh})),n.d(f,"getWidgetIdByOutputDataSource",(function(){return Th})),n.d(f,"getRealAppResourceUrl",(function(){return ah})),n.d(f,"appendPortalInfoToResource",(function(){return sh})),n.d(f,"cleanPortalInfoFromResource",(function(){return uh})),n.d(f,"replaceAppConfigNodeValue",(function(){return ch}));var p={};n.r(p),n.d(p,"parsePath",(function(){return Ch})),n.d(p,"isAbsoluteUrl",(function(){return Ah})),n.d(p,"getDataSourceInfosFromQueryObject",(function(){return xh})),n.d(p,"getSectionNavInfoFromQueryObject",(function(){return Dh})),n.d(p,"getAppIdPageIdFromUrl",(function(){return Rh})),n.d(p,"parseAppPath",(function(){return jh})),n.d(p,"getPageLink",(function(){return _h})),n.d(p,"getPageLinkUrl",(function(){return kh})),n.d(p,"getFolder",(function(){return Mh})),n.d(p,"getFixedRootPath",(function(){return Nh})),n.d(p,"getAbsoluteRootUrl",(function(){return Lh})),n.d(p,"createLocation",(function(){return Uh})),n.d(p,"createHref",(function(){return Fh})),n.d(p,"getHrefFromLinkTo",(function(){return $h})),n.d(p,"getLinkResultFromHref",(function(){return Vh})),n.d(p,"updateQueryStringParameter",(function(){return Bh})),n.d(p,"getProtocol",(function(){return Gh})),n.d(p,"setProtocol",(function(){return Wh})),n.d(p,"removeProtocol",(function(){return qh})),n.d(p,"getUrlHost",(function(){return zh})),n.d(p,"removeSearchFromUrl",(function(){return Hh})),n.d(p,"appendQueryParam",(function(){return Jh})),n.d(p,"normalize",(function(){return Yh})),n.d(p,"getAppUrl",(function(){return Xh})),n.d(p,"getExperienceBuilderOnlineUrl",(function(){return Kh})),n.d(p,"getArcgisOnlineUrl",(function(){return Qh}));var h={};n.r(h),n.d(h,"ActionKeys",(function(){return jg})),n.d(h,"appConfigLoaded",(function(){return kg})),n.d(h,"loadAppConfigFailed",(function(){return Mg})),n.d(h,"appConfigChanged",(function(){return Ng})),n.d(h,"appPathChanged",(function(){return Lg})),n.d(h,"appInfoChanged",(function(){return Ug})),n.d(h,"appIdChanged",(function(){return Fg})),n.d(h,"widgetClassLoaded",(function(){return $g})),n.d(h,"widgetConfigUpgraded",(function(){return Vg})),n.d(h,"widgetConfigLoaded",(function(){return Bg})),n.d(h,"openWidget",(function(){return Gg})),n.d(h,"openWidgets",(function(){return Wg})),n.d(h,"closeWidget",(function(){return qg})),n.d(h,"closeWidgets",(function(){return zg})),n.d(h,"activateWidget",(function(){return Hg})),n.d(h,"initAppContext",(function(){return Jg})),n.d(h,"i18nMessagesLoaded",(function(){return Yg})),n.d(h,"queryObjectChanged",(function(){return Xg})),n.d(h,"setAppInBuilder",(function(){return Kg})),n.d(h,"appModeChanged",(function(){return Qg})),n.d(h,"layoutClassLoaded",(function(){return Zg})),n.d(h,"dataSourceStatusChanged",(function(){return em})),n.d(h,"dataSourceCountStatusChanged",(function(){return tm})),n.d(h,"dataSourceInstanceStatusChanged",(function(){return nm})),n.d(h,"dataSourceSaveStatusChanged",(function(){return rm})),n.d(h,"dataSourceVersionAdded",(function(){return om})),n.d(h,"dataSourceSourceVersionAdded",(function(){return im})),n.d(h,"changeDataSourceGDBVersion",(function(){return am})),n.d(h,"clearDataSourceInfo",(function(){return sm})),n.d(h,"updateDataSourceInfo",(function(){return um})),n.d(h,"setDataNeedRefresh",(function(){return cm})),n.d(h,"updateWidgetQuery",(function(){return lm})),n.d(h,"jimuMapViewAdded",(function(){return dm})),n.d(h,"jimuMapViewUpdated",(function(){return fm})),n.d(h,"jimuMapViewRemoved",(function(){return pm})),n.d(h,"requestAutoControlMapWidget",(function(){return hm})),n.d(h,"releaseAutoControlMapWidget",(function(){return gm})),n.d(h,"MapWidgetInfoAdded",(function(){return mm})),n.d(h,"MapWidgetInfoUpdated",(function(){return vm})),n.d(h,"MapWidgetInfoRemoved",(function(){return ym})),n.d(h,"initStoreExtensionState",(function(){return bm})),n.d(h,"widgetStatePropChange",(function(){return Sm})),n.d(h,"widgetMutableStatePropChange",(function(){return wm})),n.d(h,"setPortalInfo",(function(){return Im})),n.d(h,"dataSourceSelectedIndexesChanged",(function(){return Em})),n.d(h,"dataSourceSelectedIdsChanged",(function(){return Om})),n.d(h,"sessionStart",(function(){return Tm})),n.d(h,"userSignIn",(function(){return Cm})),n.d(h,"userSignOut",(function(){return Am})),n.d(h,"browserSizeModeChanged",(function(){return xm})),n.d(h,"setWidgetIsInlineEditingState",(function(){return Pm})),n.d(h,"setWidgetPreloadProps",(function(){return Dm})),n.d(h,"setDataSourcePreloadData",(function(){return Rm})),n.d(h,"networkStatusChanged",(function(){return jm})),n.d(h,"currentPageChanged",(function(){return _m})),n.d(h,"currentDialogChanged",(function(){return km})),n.d(h,"dialogInfosChanged",(function(){return Mm})),n.d(h,"selectionChanged",(function(){return Nm})),n.d(h,"clipboardChanged",(function(){return Lm})),n.d(h,"updateStoreState",(function(){return Um})),n.d(h,"appRuntimeInfoInit",(function(){return Fm})),n.d(h,"themeVariablesChanged",(function(){return $m})),n.d(h,"setPortalSelf",(function(){return Vm})),n.d(h,"activePagePartChanged",(function(){return Bm})),n.d(h,"openOverlay",(function(){return Gm})),n.d(h,"closeOverlay",(function(){return Wm})),n.d(h,"activeOverlay",(function(){return qm})),n.d(h,"zoomScaleChange",(function(){return zm})),n.d(h,"setIsBusy",(function(){return Hm})),n.d(h,"layoutChanged",(function(){return Jm})),n.d(h,"sectionNavInfoChanged",(function(){return Ym})),n.d(h,"screenGroupNavInfoChanged",(function(){return Xm})),n.d(h,"screenPanelVisibleChanged",(function(){return Km})),n.d(h,"setupAnimationPreview",(function(){return Qm})),n.d(h,"clearAnimationPreview",(function(){return Zm})),n.d(h,"setHasNewVersion",(function(){return ev})),n.d(h,"userLocaleChanged",(function(){return tv})),n.d(h,"hasPrivilegeChanged",(function(){return nv}));var g={};n.r(g),n.d(g,"initPortalSelf",(function(){return hv})),n.d(g,"clearPortalSelf",(function(){return gv})),n.d(g,"getAppInfo",(function(){return vv})),n.d(g,"removeAppInfo",(function(){return yv}));var m={};n.r(m),n.d(m,"withTheme",(function(){return Qt})),n.d(m,"withStyles",(function(){return Mv})),n.d(m,"getThemeNameFromUri",(function(){return Nv})),n.d(m,"lighten",(function(){return Uv})),n.d(m,"darken",(function(){return Fv})),n.d(m,"valueOf",(function(){return $v})),n.d(m,"pathOf",(function(){return Vv})),n.d(m,"varsOf",(function(){return Bv})),n.d(m,"isCSSVar",(function(){return Gv})),n.d(m,"color",(function(){return Wv})),n.d(m,"withBuilderStyle",(function(){return zv})),n.d(m,"withBuilderTheme",(function(){return Hv})),n.d(m,"getBuilderThemeVariables",(function(){return Jv})),n.d(m,"getMappedShareThemeVariables",(function(){return Yv})),n.d(m,"getThemeVariablesByCategory",(function(){return Xv})),n.d(m,"appendSharedTheme",(function(){return Kv}));var v={};n.r(v),n.d(v,"triggerEvent",(function(){return oy}));var y={};n.r(y),n.d(y,"CheckTarget",(function(){return iy})),n.d(y,"InvalidInfo",(function(){return ay})),n.d(y,"checkAccess",(function(){return cy})),n.d(y,"getAccessCapabilities",(function(){return ly})),n.d(y,"checkExbAccess",(function(){return dy})),n.d(y,"getPortalVersion",(function(){return fy})),n.d(y,"isPortal1061OrBefore",(function(){return py})),n.d(y,"isPortal1080OrBefore",(function(){return hy})),n.d(y,"shouldCheckAppAccess",(function(){return by}));var b={};n.r(b),n.d(b,"requestWrapper",(function(){return Uy}));var S={};n.r(S),n.d(S,"queryAllAttachments",(function(){return Vb})),n.d(S,"filterAttachments",(function(){return Bb})),n.d(S,"convertFieldToJimuField",(function(){return Gb})),n.d(S,"isNumericalField",(function(){return Wb})),n.d(S,"getFieldInfoByFieldName",(function(){return qb})),n.d(S,"getDisplayValueForCodedValueOrSubtype",(function(){return zb})),n.d(S,"getDisplayValueForCodedValueOrSubtypeBatch",(function(){return Hb})),n.d(S,"getCodedValueListForCodedValueOrSubtypeField",(function(){return Jb})),n.d(S,"isHostedService",(function(){return rS})),n.d(S,"fixLayerId",(function(){return oS})),n.d(S,"getFixedLayerIdByLayer",(function(){return iS})),n.d(S,"getFixedLayerIdByLayerDefinition",(function(){return aS})),n.d(S,"isLayerDefinitionTypeSupported",(function(){return sS})),n.d(S,"isJSAPILayerTypeSupported",(function(){return uS})),n.d(S,"getFullServiceUrl",(function(){return cS})),n.d(S,"getSingleDsJsonFromLayerDefinition",(function(){return lS})),n.d(S,"getSingleDsJsonFromWholeServiceDefinition",(function(){return dS})),n.d(S,"getDsTypeFromWholeServiceUrl",(function(){return fS})),n.d(S,"fetchSupportedLayerDefinitionsFromUrls",(function(){return pS})),n.d(S,"fetchSupportedLayerDefinitions",(function(){return hS})),n.d(S,"isSupportedSingleLayerService",(function(){return gS})),n.d(S,"isSupportedWholeService",(function(){return mS})),n.d(S,"getServiceLabelFromUrl",(function(){return vS})),n.d(S,"isSupportedService",(function(){return yS})),n.d(S,"getSortedArrayByLabel",(function(){return bS})),n.d(S,"getChildDataSourceId",(function(){return SS})),n.d(S,"queryFeatureCountByField",(function(){return IS})),n.d(S,"queryValueLabelsByFieldAndPageSize",(function(){return ES})),n.d(S,"getUrlByLayer",(function(){return OS})),n.d(S,"getRealDataSourceId",(function(){return TS})),n.d(S,"fetchAssociatedFeatureLayerDefinition",(function(){return CS})),n.d(S,"fetchAssociatedFeatureLayerUrl",(function(){return AS})),n.d(S,"getAssumedAssociatedLayerUrl",(function(){return xS})),n.d(S,"fetchAssociatedFeatureServicePortalItem",(function(){return PS})),n.d(S,"findAssociatedFeatureLayerUrl",(function(){return DS})),n.d(S,"getDataSourceProxyUrl",(function(){return RS})),n.d(S,"getDataSourceSourceUrl",(function(){return jS})),n.d(S,"getWhetherUseProxy",(function(){return _S})),n.d(S,"isLayerDataSource",(function(){return kS})),n.d(S,"getOriginDataLabel",(function(){return MS})),n.d(S,"getJSAPILayerBySublayer",(function(){return NS})),n.d(S,"isDerivedFrom",(function(){return LS})),n.d(S,"isSelectionView",(function(){return US})),n.d(S,"supportSymbol",(function(){return FS})),n.d(S,"supportAttachment",(function(){return $S})),n.d(S,"getLayerDefinition",(function(){return VS})),n.d(S,"isOriginDataSubscriber",(function(){return WS})),n.d(S,"isOriginDataPremium",(function(){return qS})),n.d(S,"isDataSourceSubscriber",(function(){return zS})),n.d(S,"isDataSourceSubscriberOrPremium",(function(){return HS})),n.d(S,"isDataSourcePremium",(function(){return JS})),n.d(S,"createJSAPILayerByDataSource",(function(){return YS})),n.d(S,"createJSAPIFeatureLayerByDataSourceFromFeatureCollectionItem",(function(){return XS})),n.d(S,"createFeatureLayerByRecords",(function(){return Gy})),n.d(S,"changeToRestAPIFeature",(function(){return Hy})),n.d(S,"changeToJSAPIGraphic",(function(){return Jy})),n.d(S,"getPopupInfo",(function(){return Xy})),n.d(S,"changeJimuFeatureLayerQueryToJSAPILayerQuery",(function(){return Ky})),n.d(S,"getRealDateByVirtualDate",(function(){return Ib})),n.d(S,"getArcGISSQL",(function(){return Eb})),n.d(S,"parserSQL",(function(){return Ob})),n.d(S,"containsNonLatinCharacter",(function(){return Db})),n.d(S,"getUTCTimes",(function(){return _b})),n.d(S,"getLocalTimes",(function(){return kb})),n.d(S,"DateTimeType",(function(){return Lb})),n.d(S,"getUTCDateValue",(function(){return Ub}));var w={};n.r(w),n.d(w,"browserHistory",(function(){return dw})),n.d(w,"HistoryProvider",(function(){return pw})),n.d(w,"withHistory",(function(){return hw})),n.d(w,"changeQueryObject",(function(){return gw})),n.d(w,"replaceQueryObject",(function(){return mw})),n.d(w,"changePage",(function(){return vw})),n.d(w,"changeView",(function(){return yw})),n.d(w,"changeDialog",(function(){return bw})),n.d(w,"changeQueryObjectByDataRecordIds",(function(){return Sw})),n.d(w,"changeQueryObjectByDataRecordIndexes",(function(){return ww}));var I={};n.r(I),n.d(I,"getUseDataSourceFromExpParts",(function(){return Kw})),n.d(I,"mergeUseDataSources",(function(){return Qw})),n.d(I,"getWhetherExpressionValid",(function(){return Zw})),n.d(I,"getWhetherFunctionIncludeChildExpression",(function(){return eI})),n.d(I,"getWhetherFunctionIncludeFieldParam",(function(){return tI})),n.d(I,"getWhetherFieldInDs",(function(){return rI})),n.d(I,"getChildExpression",(function(){return oI})),n.d(I,"isSingleStringExpression",(function(){return iI})),n.d(I,"getSingleStringExpressionText",(function(){return aI})),n.d(I,"getUseDataSourcesWithoutFields",(function(){return sI})),n.d(I,"whetherHasFieldsInUseDataSources",(function(){return uI}));var E=n(0),O=n.n(E),T=n(33),C=(n(155),O.a.createContext(null));var A=function(e){e()},x={notify:function(){}};function P(){var e=A,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var D=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=x,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=P())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=x)},e}(),R="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?E.useLayoutEffect:E.useEffect;var j=function(e){var t=e.store,n=e.context,r=e.children,o=Object(E.useMemo)((function(){var e=new D(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),i=Object(E.useMemo)((function(){return t.getState()}),[t]);R((function(){var e=o.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,i]);var a=n||C;return O.a.createElement(a.Provider,{value:o},r)};function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var M=n(23),N=n.n(M),L=n(67),U=[],F=[null,null];function $(e,t){var n=e[1];return[t.payload,n+1]}function V(e,t,n){R((function(){return e.apply(void 0,t)}),n)}function B(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function G(e,t,n,r,o,i,a,s,u,c){if(e){var l=!1,d=null,f=function(){if(!l){var e,n,f=t.getState();try{e=r(f,o.current)}catch(e){n=e,d=e}n||(d=null),e===i.current?a.current||u():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=f,n.trySubscribe(),f();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var W=function(){return[null,0]};function q(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,i=n.methodName,a=void 0===i?"connectAdvanced":i,s=n.renderCountProp,u=void 0===s?void 0:s,c=n.shouldHandleStateChanges,l=void 0===c||c,d=n.storeKey,f=void 0===d?"store":d,p=(n.withRef,n.forwardRef),h=void 0!==p&&p,g=n.context,m=void 0===g?C:g,v=k(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),y=m;return function(t){var n=t.displayName||t.name||"Component",r=o(n),i=_({},v,{getDisplayName:o,methodName:a,renderCountProp:u,shouldHandleStateChanges:l,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=v.pure;var c=s?E.useMemo:function(e){return e()};function d(n){var r=Object(E.useMemo)((function(){var e=n.reactReduxForwardedRef,t=k(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),o=r[0],a=r[1],s=r[2],u=Object(E.useMemo)((function(){return o&&o.Consumer&&Object(L.isContextConsumer)(O.a.createElement(o.Consumer,null))?o:y}),[o,y]),d=Object(E.useContext)(u),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(d)&&Boolean(d.store);var p=f?n.store:d.store,h=Object(E.useMemo)((function(){return function(t){return e(t.dispatch,i)}(p)}),[p]),g=Object(E.useMemo)((function(){if(!l)return F;var e=new D(p,f?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,f,d]),m=g[0],v=g[1],b=Object(E.useMemo)((function(){return f?d:_({},d,{subscription:m})}),[f,d,m]),S=Object(E.useReducer)($,U,W),w=S[0][0],I=S[1];if(w&&w.error)throw w.error;var T=Object(E.useRef)(),C=Object(E.useRef)(s),A=Object(E.useRef)(),x=Object(E.useRef)(!1),P=c((function(){return A.current&&s===C.current?A.current:h(p.getState(),s)}),[p,w,s]);V(B,[C,T,x,s,P,A,v]),V(G,[l,p,m,h,C,T,x,A,v,I],[p,m,h]);var R=Object(E.useMemo)((function(){return O.a.createElement(t,_({},P,{ref:a}))}),[a,t,P]);return Object(E.useMemo)((function(){return l?O.a.createElement(u.Provider,{value:b},R):R}),[u,R,b])}var p=s?O.a.memo(d):d;if(p.WrappedComponent=t,p.displayName=d.displayName=r,h){var g=O.a.forwardRef((function(e,t){return O.a.createElement(p,_({},e,{reactReduxForwardedRef:t}))}));return g.displayName=r,g.WrappedComponent=t,N()(g,t)}return N()(p,t)}}function z(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function H(e,t){if(z(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!z(e[n[o]],t[n[o]]))return!1;return!0}function J(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function Y(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function X(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Y(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=Y(o),o=r(t,n)),o},r}}var K=[function(e){return"function"==typeof e?X(e):void 0},function(e){return e?void 0:J((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?J((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}];var Q=[function(e){return"function"==typeof e?X(e):void 0},function(e){return e?void 0:J((function(){return{}}))}];function Z(e,t,n){return _({},n,e,t)}var ee=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return Z}}];function te(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function ne(e,t,n,r,o){var i,a,s,u,c,l=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,p=!1;function h(o,p){var h,g,m=!d(p,a),v=!l(o,i);return i=o,a=p,m&&v?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):v?(h=e(i,a),g=!f(h,s),s=h,g&&(c=n(s,u,a)),c):c}return function(o,l){return p?h(o,l):(s=e(i=o,a=l),u=t(r,a),c=n(s,u,a),p=!0,c)}}function re(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=k(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?ne:te)(a,s,u,e,i)}function oe(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ie(e,t){return e===t}function ae(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?q:n,o=t.mapStateToPropsFactories,i=void 0===o?Q:o,a=t.mapDispatchToPropsFactories,s=void 0===a?K:a,u=t.mergePropsFactories,c=void 0===u?ee:u,l=t.selectorFactory,d=void 0===l?re:l;return function(e,t,n,o){void 0===o&&(o={});var a=o,u=a.pure,l=void 0===u||u,f=a.areStatesEqual,p=void 0===f?ie:f,h=a.areOwnPropsEqual,g=void 0===h?H:h,m=a.areStatePropsEqual,v=void 0===m?H:m,y=a.areMergedPropsEqual,b=void 0===y?H:y,S=k(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=oe(e,i,"mapStateToProps"),I=oe(t,s,"mapDispatchToProps"),E=oe(n,c,"mergeProps");return r(d,_({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:I,initMergeProps:E,pure:l,areStatesEqual:p,areOwnPropsEqual:g,areStatePropsEqual:v,areMergedPropsEqual:b},S))}}var se=ae();function ue(){return Object(E.useContext)(C)}function ce(e){void 0===e&&(e=C);var t=e===C?ue:function(){return Object(E.useContext)(e)};return function(){return t().store}}var le=ce();function de(e){void 0===e&&(e=C);var t=e===C?le:ce(e);return function(){return t().dispatch}}var fe=de(),pe=function(e,t){return e===t};function he(e){void 0===e&&(e=C);var t=e===C?ue:function(){return Object(E.useContext)(e)};return function(e,n){void 0===n&&(n=pe);var r=t(),o=function(e,t,n,r){var o,i=Object(E.useReducer)((function(e){return e+1}),0)[1],a=Object(E.useMemo)((function(){return new D(n,r)}),[n,r]),s=Object(E.useRef)(),u=Object(E.useRef)(),c=Object(E.useRef)(),l=Object(E.useRef)(),d=n.getState();try{if(e!==u.current||d!==c.current||s.current){var f=e(d);o=void 0!==l.current&&t(f,l.current)?l.current:f}else o=l.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return R((function(){u.current=e,c.current=d,l.current=o,s.current=void 0})),R((function(){function e(){try{var e=n.getState(),r=u.current(e);if(t(r,l.current))return;l.current=r,c.current=e}catch(e){s.current=e}i()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),o}(e,n,r.store,r.subscription);return Object(E.useDebugValue)(o),o}}var ge,me=he();ge=T.unstable_batchedUpdates,A=ge;var ve,ye=n(15),be=n(6),Se=n(21),we=n.n(Se),Ie=new Uint8Array(16);function Ee(){if(!ve&&!(ve="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(Ie)}var Oe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Te=function(e){return"string"==typeof e&&Oe.test(e)},Ce=[],Ae=0;Ae<256;++Ae)Ce.push((Ae+256).toString(16).substr(1));var xe,Pe,De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ce[e[t+0]]+Ce[e[t+1]]+Ce[e[t+2]]+Ce[e[t+3]]+"-"+Ce[e[t+4]]+Ce[e[t+5]]+"-"+Ce[e[t+6]]+Ce[e[t+7]]+"-"+Ce[e[t+8]]+Ce[e[t+9]]+"-"+Ce[e[t+10]]+Ce[e[t+11]]+Ce[e[t+12]]+Ce[e[t+13]]+Ce[e[t+14]]+Ce[e[t+15]]).toLowerCase();if(!Te(n))throw TypeError("Stringified UUID is invalid");return n},Re=0,je=0;var _e=function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||xe,a=void 0!==e.clockseq?e.clockseq:Pe;if(null==i||null==a){var s=e.random||(e.rng||Ee)();null==i&&(i=xe=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Pe=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:je+1,l=u-Re+(c-je)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||u>Re)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Re=u,je=c,Pe=a;var d=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;o[r++]=d>>>24&255,o[r++]=d>>>16&255,o[r++]=d>>>8&255,o[r++]=255&d;var f=u/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return t||De(o)};n(72);var ke=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Me=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ne=ke((function(e){return Me.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Le=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ue="-webkit-",Fe=Math.abs,$e=String.fromCharCode;function Ve(e){return e.trim()}function Be(e,t,n){return e.replace(t,n)}function Ge(e,t){return e.indexOf(t)}function We(e,t){return 0|e.charCodeAt(t)}function qe(e,t,n){return e.slice(t,n)}function ze(e){return e.length}function He(e){return e.length}function Je(e,t){return t.push(e),e}function Ye(e,t){return e.map(t).join("")}var Xe=1,Ke=1,Qe=0,Ze=0,et=0,tt="";function nt(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:Xe,column:Ke,length:a,return:""}}function rt(e,t,n){return nt(e,t.root,t.parent,n,t.props,t.children,0)}function ot(){return et=Ze<Qe?We(tt,Ze++):0,Ke++,10===et&&(Ke=1,Xe++),et}function it(){return We(tt,Ze)}function at(){return Ze}function st(e,t){return qe(tt,e,t)}function ut(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ct(e){return Xe=Ke=1,Qe=ze(tt=e),Ze=0,[]}function lt(e){return tt="",e}function dt(e){return Ve(st(Ze-1,function e(t){for(;ot();)switch(et){case t:return Ze;case 34:case 39:return e(34===t||39===t?t:et);case 40:41===t&&e(t);break;case 92:ot()}return Ze}(91===e?e+2:40===e?e+1:e)))}function ft(e){for(;(et=it())&&et<33;)ot();return ut(e)>2||ut(et)>3?"":" "}function pt(e,t){for(;--t&&ot()&&!(et<48||et>102||et>57&&et<65||et>70&&et<97););return st(e,at()+(t<6&&32==it()&&32==ot()))}function ht(e,t){for(;ot()&&e+et!==57&&(e+et!==84||47!==it()););return"/*"+st(t,Ze-1)+"*"+$e(47===e?e:ot())}function gt(e){for(;!ut(it());)ot();return st(e,Ze)}function mt(e){return lt(function e(t,n,r,o,i,a,s,u,c){var l=0,d=0,f=s,p=0,h=0,g=0,m=1,v=1,y=1,b=0,S="",w=i,I=a,E=o,O=S;for(;v;)switch(g=b,b=ot()){case 34:case 39:case 91:case 40:O+=dt(b);break;case 9:case 10:case 13:case 32:O+=ft(g);break;case 92:O+=pt(at()-1,7);continue;case 47:switch(it()){case 42:case 47:Je(yt(ht(ot(),at()),n,r),c);break;default:O+="/"}break;case 123*m:u[l++]=ze(O)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+d:h>0&&ze(O)-f&&Je(h>32?bt(O+";",o,r,f-1):bt(Be(O," ","")+";",o,r,f-2),c);break;case 59:O+=";";default:if(Je(E=vt(O,n,r,l,d,i,u,S,w=[],I=[],f),a),123===b)if(0===d)e(O,n,E,E,w,a,f,u,I);else switch(p){case 100:case 109:case 115:e(t,E,E,o&&Je(vt(t,E,E,0,0,i,u,S,i,w=[],f),I),i,I,f,u,o?w:I);break;default:e(O,E,E,E,[""],I,f,u,I)}}l=d=h=0,m=y=1,S=O="",f=s;break;case 58:f=1+ze(O),h=g;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==(et=Ze>0?We(tt,--Ze):0,Ke--,10===et&&(Ke=1,Xe--),et))continue;switch(O+=$e(b),b*m){case 38:y=d>0?1:(O+="\f",-1);break;case 44:u[l++]=(ze(O)-1)*y,y=1;break;case 64:45===it()&&(O+=dt(ot())),p=it(),d=ze(S=O+=gt(at())),b++;break;case 45:45===g&&2==ze(O)&&(m=0)}}return a}("",null,null,null,[""],e=ct(e),0,[0],e))}function vt(e,t,n,r,o,i,a,s,u,c,l){for(var d=o-1,f=0===o?i:[""],p=He(f),h=0,g=0,m=0;h<r;++h)for(var v=0,y=qe(e,d+1,d=Fe(g=a[h])),b=e;v<p;++v)(b=Ve(g>0?f[v]+" "+y:Be(y,/&\f/g,f[v])))&&(u[m++]=b);return nt(e,t,n,0===o?"rule":s,u,c,l)}function yt(e,t,n){return nt(e,t,n,"comm",$e(et),qe(e,2,-2),0)}function bt(e,t,n,r){return nt(e,t,n,"decl",qe(e,0,r),qe(e,r+1,-1),r)}function St(e,t){switch((((t<<2^We(n=e,0))<<2^We(n,1))<<2^We(n,2))<<2^We(n,3)){case 5103:return Ue+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ue+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ue+e+"-moz-"+e+"-ms-"+e+e;case 6828:case 4268:return Ue+e+"-ms-"+e+e;case 6165:return Ue+e+"-ms-flex-"+e+e;case 5187:return Ue+e+Be(e,/(\w+).+(:[^]+)/,Ue+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Ue+e+"-ms-flex-item-"+Be(e,/flex-|-self/,"")+e;case 4675:return Ue+e+"-ms-flex-line-pack"+Be(e,/align-content|flex-|-self/,"")+e;case 5548:return Ue+e+"-ms-"+Be(e,"shrink","negative")+e;case 5292:return Ue+e+"-ms-"+Be(e,"basis","preferred-size")+e;case 6060:return Ue+"box-"+Be(e,"-grow","")+Ue+e+"-ms-"+Be(e,"grow","positive")+e;case 4554:return Ue+Be(e,/([^-])(transform)/g,"$1"+Ue+"$2")+e;case 6187:return Be(Be(Be(e,/(zoom-|grab)/,Ue+"$1"),/(image-set)/,Ue+"$1"),e,"")+e;case 5495:case 3959:return Be(e,/(image-set\([^]*)/,Ue+"$1$`$1");case 4968:return Be(Be(e,/(.+:)(flex-)?(.*)/,Ue+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ue+e+e;case 4095:case 3583:case 4068:case 2532:return Be(e,/(.+)-inline(.+)/,Ue+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ze(e)-1-t>6)switch(We(e,t+1)){case 109:if(45!==We(e,t+4))break;case 102:return Be(e,/(.+:)(.+)-([^]+)/,"$1"+Ue+"$2-$3$1-moz-"+(108==We(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ge(e,"stretch")?St(Be(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==We(e,t+1))break;case 6444:switch(We(e,ze(e)-3-(~Ge(e,"!important")&&10))){case 107:return Be(e,":",":"+Ue)+e;case 101:return Be(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ue+(45===We(e,14)?"inline-":"")+"box$3$1"+Ue+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(We(e,t+11)){case 114:return Ue+e+"-ms-"+Be(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ue+e+"-ms-"+Be(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ue+e+"-ms-"+Be(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ue+e+"-ms-"+e+e}var n;return e}function wt(e,t){for(var n="",r=He(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function It(e,t,n,r){switch(e.type){case"@import":case"decl":return e.return=e.return||e.value;case"comm":return"";case"rule":e.value=e.props.join(",")}return ze(n=wt(e.children,r))?e.return=e.value+"{"+n+"}":""}var Et=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},Ot=function(e,t){return lt(function(e,t){var n=-1,r=44;do{switch(ut(r)){case 0:38===r&&12===it()&&(t[n]=1),e[n]+=gt(Ze-1);break;case 2:e[n]+=dt(r);break;case 4:if(44===r){e[++n]=58===it()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=$e(r)}}while(r=ot());return e}(ct(e),t))},Tt=new WeakMap,Ct=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Tt.get(n))&&!r){Tt.set(e,!0);for(var o=[],i=Ot(t,o),a=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<a.length;c++,u++)e.props[u]=o[s]?i[s].replace(/&\f/g,a[c]):a[c]+" "+i[s]}}},At=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},xt=[function(e,t,n,r){if(!e.return)switch(e.type){case"decl":e.return=St(e.value,e.length);break;case"@keyframes":return wt([rt(Be(e.value,"@","@"+Ue),e,"")],r);case"rule":if(e.length)return Ye(e.props,(function(t){switch((n=/(::plac\w+|:read-\w+)/.exec(n=t))?n[0]:n){case":read-only":case":read-write":return wt([rt(Be(t,/:(read-\w+)/,":-moz-$1"),e,"")],r);case"::placeholder":return wt([rt(Be(t,/:(plac\w+)/,":"+Ue+"input-$1"),e,""),rt(Be(t,/:(plac\w+)/,":-moz-$1"),e,""),rt(Be(t,/:(plac\w+)/,"-ms-input-$1"),e,"")],r)}var n;return""}))}}],Pt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||xt;var o,i,a={},s=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var u,c,l=[It,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=He(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}([Ct,At].concat(r,l));i=function(e,t,n,r){u=n,wt(mt(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Le({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend}),nonce:e.nonce,inserted:a,registered:{},insert:i};return f.sheet.hydrate(s),f},Dt=function(e,t){return N()(e,t)};function Rt(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var jt=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}};var _t=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},kt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mt=/[A-Z]|^ms/g,Nt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Lt=function(e){return 45===e.charCodeAt(1)},Ut=function(e){return null!=e&&"boolean"!=typeof e},Ft=ke((function(e){return Lt(e)?e:e.replace(Mt,"-$&").toLowerCase()})),$t=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Nt,(function(e,t,n){return Bt={name:t,styles:n,next:Bt},t}))}return 1===kt[e]||Lt(e)||"number"!=typeof t||0===t?t:t+"px"};function Vt(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Bt={name:n.name,styles:n.styles,next:Bt},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Bt={name:r.name,styles:r.styles,next:Bt},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Vt(e,t,n[o])+";";else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":Ut(a)&&(r+=Ft(i)+":"+$t(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=Vt(e,t,a);switch(i){case"animation":case"animationName":r+=Ft(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<a.length;u++)Ut(a[u])&&(r+=Ft(i)+":"+$t(i,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=Bt,i=n(e);return Bt=o,Vt(e,t,i)}break;case"string":}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Bt,Gt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Wt=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Bt=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=Vt(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=Vt(n,t,e[a]),r&&(o+=i[a]);Gt.lastIndex=0;for(var s,u="";null!==(s=Gt.exec(o));)u+="-"+s[1];return{name:_t(o)+u,styles:o,next:Bt}},qt=Object.prototype.hasOwnProperty,zt=Object(E.createContext)("undefined"!=typeof HTMLElement?Pt({key:"css"}):null),Ht=zt.Provider,Jt=function(e){return Object(E.forwardRef)((function(t,n){var r=Object(E.useContext)(zt);return e(t,r,n)}))},Yt=Object(E.createContext)({}),Xt=Et((function(e){return Et((function(t){return function(e,t){return"function"==typeof t?t(e):_({},e,t)}(e,t)}))})),Kt=function(e){var t=Object(E.useContext)(Yt);return e.theme!==t&&(t=Xt(t)(e.theme)),Object(E.createElement)(Yt.Provider,{value:t},e.children)};function Qt(e){var t=e.displayName||e.name||"Component",n=function(t,n){var r=Object(E.useContext)(Yt);return Object(E.createElement)(e,_({theme:r,ref:n},t))},r=Object(E.forwardRef)(n);return r.displayName="WithTheme("+t+")",Dt(r,e)}var Zt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",en=function(e,t){var n={};for(var r in t)qt.call(t,r)&&(n[r]=t[r]);return n[Zt]=e,n},tn=Jt((function(e,t,n){var r=e.css;"string"==typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var o=e[Zt],i=[r],a="";"string"==typeof e.className?a=Rt(t.registered,i,e.className):null!=e.className&&(a=e.className+" ");var s=Wt(i,void 0,"function"==typeof r||Array.isArray(r)?Object(E.useContext)(Yt):void 0);jt(t,s,"string"==typeof o);a+=t.key+"-"+s.name;var u={};for(var c in e)qt.call(e,c)&&"css"!==c&&c!==Zt&&(u[c]=e[c]);return u.ref=n,u.className=a,Object(E.createElement)(o,u)}));var nn=Ne,rn=function(e){return"theme"!==e},on=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?nn:rn},an=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},sn=function e(t,n){var r,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,o=n.target);var s=an(t,n,i),u=s||on(a),c=!u("as");return function(){var l=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==l[0]||void 0===l[0].raw)d.push.apply(d,l);else{0,d.push(l[0][0]);for(var f=l.length,p=1;p<f;p++)d.push(l[p],l[0][p])}var h=Jt((function(e,t,n){var r=c&&e.as||a,i="",l=[],f=e;if(null==e.theme){for(var p in f={},e)f[p]=e[p];f.theme=Object(E.useContext)(Yt)}"string"==typeof e.className?i=Rt(t.registered,l,e.className):null!=e.className&&(i=e.className+" ");var h=Wt(d.concat(l),t.registered,f);jt(t,h,"string"==typeof r);i+=t.key+"-"+h.name,void 0!==o&&(i+=" "+o);var g=c&&void 0===s?on(r):u,m={};for(var v in e)c&&"as"===v||g(v)&&(m[v]=e[v]);return m.className=i,m.ref=n,Object(E.createElement)(r,m)}));return h.displayName=void 0!==r?r:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",h.defaultProps=t.defaultProps,h.__emotion_real=h,h.__emotion_base=a,h.__emotion_styles=d,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+o}}),h.withComponent=function(t,r){return e(t,_({},n,r,{shouldForwardProp:an(h,r,!0)})).apply(void 0,d)},h}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){sn[e]=sn(e)}));var un=sn,cn=function(e,t){var n=arguments;if(null==t||!qt.call(t,"css"))return E.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=tn,o[1]=en(e,t);for(var i=2;i<r;i++)o[i]=n[i];return E.createElement.apply(null,o)},ln=Jt((function(e,t){var n=e.styles,r=Wt([n],void 0,"function"==typeof n||Array.isArray(n)?Object(E.useContext)(Yt):void 0),o=Object(E.useRef)();return Object(E.useLayoutEffect)((function(){var e=t.key+"-global",n=new Le({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),n.hydrate([a])),o.current=[n,i],function(){n.flush()}}),[t]),Object(E.useLayoutEffect)((function(){var e=o.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&jt(t,r.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}t.insert("",r,n,!1)}}),[t,r.name]),null}));function dn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Wt(t)}var fn=n(73);function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mn(e,t,n){return(mn=gn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&pn(o,n.prototype),o}).apply(null,arguments)}function vn(e){var t="function"==typeof Map?new Map:void 0;return(vn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return mn(e,arguments,hn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),pn(r,e)})(e)}function yn(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var bn={symbols:{"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:yn,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:yn,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"}}};var Sn=function(e){var t,n;function r(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,pn(t,n),r}(vn(Error)),wn=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function In(e,t){var n,r=e.pop();return t.push(r.f.apply(r,(n=[]).concat.apply(n,t.splice(-r.argCount)))),r.precedence}function En(e,t){var n,r=function(e){var t={};return t.symbols=e?_({},bn.symbols,e.symbols):_({},bn.symbols),t}(t),o=[r.symbols["("].prefix],i=[],a=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(r.symbols).map((function(e){return r.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");a.lastIndex=0;var s=!1;do{var u=(n=a.exec(e))||[")",void 0],c=u[0],l=u[1],d=r.symbols[c],f=d&&!d.prefix&&!d.func,p=!d||!d.postfix&&!d.infix;if(l||(s?p:f))throw new Sn(37,n?n.index:e.length,e);if(s){var h=d.postfix||d.infix;do{var g=o[o.length-1];if((h.precedence-g.precedence||g.rightToLeft)>0)break}while(In(o,i));s="postfix"===h.notation,")"!==h.symbol&&(o.push(h),s&&In(o,i))}else if(d){if(o.push(d.prefix||d.func),d.func&&(!(n=a.exec(e))||"("!==n[0]))throw new Sn(38,n?n.index:e.length,e)}else i.push(+c),s=!0}while(n&&o.length);if(o.length)throw new Sn(39,n?n.index:e.length,e);if(n)throw new Sn(40,n?n.index:e.length,e);return i.pop()}function On(e){return e.split("").reverse().join("")}function Tn(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Cn(e,t){return e.substr(-t.length)===t}var An=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function xn(e){return"string"!=typeof e?e:e.match(An)?parseFloat(e):e}var Pn=function(e){return function(t,n){void 0===n&&(n="16px");var r=t,o=n;if("string"==typeof t){if(!Cn(t,"px"))throw new Sn(69,e,t);r=xn(t)}if("string"==typeof n){if(!Cn(n,"px"))throw new Sn(70,e,n);o=xn(n)}if("string"==typeof r)throw new Sn(71,t,e);if("string"==typeof o)throw new Sn(72,n,e);return""+r/o+e}},Dn=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function Rn(e){if("string"!=typeof e)return[e,""];var t=e.match(Dn);return t?[parseFloat(e),t[2]]:[e,void 0]}var jn=Pn("rem");function _n(e){return Math.round(255*e)}function kn(e,t,n){return _n(e)+","+_n(t)+","+_n(n)}function Mn(e,t,n,r){if(void 0===r&&(r=kn),0===t)return r(n,n,n);var o=(e%360+360)%360/60,i=(1-Math.abs(2*n-1))*t,a=i*(1-Math.abs(o%2-1)),s=0,u=0,c=0;o>=0&&o<1?(s=i,u=a):o>=1&&o<2?(s=a,u=i):o>=2&&o<3?(u=i,c=a):o>=3&&o<4?(u=a,c=i):o>=4&&o<5?(s=a,c=i):o>=5&&o<6&&(s=i,c=a);var l=n-i/2;return r(s+l,u+l,c+l)}var Nn={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var Ln=/^#[a-fA-F0-9]{6}$/,Un=/^#[a-fA-F0-9]{8}$/,Fn=/^#[a-fA-F0-9]{3}$/,$n=/^#[a-fA-F0-9]{4}$/,Vn=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,Bn=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,Gn=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Wn=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function qn(e){if("string"!=typeof e)throw new Sn(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Nn[t]?"#"+Nn[t]:e}(e);if(t.match(Ln))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Un)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(Fn))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match($n)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var o=Vn.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=Bn.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var a=Gn.exec(t);if(a){var s="rgb("+Mn(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",u=Vn.exec(s);if(!u)throw new Sn(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var c=Wn.exec(t);if(c){var l="rgb("+Mn(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=Vn.exec(l);if(!d)throw new Sn(4,t,l);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new Sn(5)}function zn(e){return function(e){var t,n=e.red/255,r=e.green/255,o=e.blue/255,i=Math.max(n,r,o),a=Math.min(n,r,o),s=(i+a)/2;if(i===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=i-a,c=s>.5?u/(2-i-a):u/(i+a);switch(i){case n:t=(r-o)/u+(r<o?6:0);break;case r:t=(o-n)/u+2;break;default:t=(n-r)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:s,alpha:e.alpha}:{hue:t,saturation:c,lightness:s}}(qn(e))}var Hn=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function Jn(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function Yn(e){return Jn(Math.round(255*e))}function Xn(e,t,n){return Hn("#"+Yn(e)+Yn(t)+Yn(n))}function Kn(e,t,n){return Mn(e,t,n,Xn)}function Qn(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return Kn(e,t,n);if("object"==typeof e&&void 0===t&&void 0===n)return Kn(e.hue,e.saturation,e.lightness);throw new Sn(1)}function Zn(e,t,n,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?Kn(e,t,n):"rgba("+Mn(e,t,n)+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?Kn(e.hue,e.saturation,e.lightness):"rgba("+Mn(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Sn(2)}function er(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return Hn("#"+Jn(e)+Jn(t)+Jn(n));if("object"==typeof e&&void 0===t&&void 0===n)return Hn("#"+Jn(e.red)+Jn(e.green)+Jn(e.blue));throw new Sn(6)}function tr(e,t,n,r){if("string"==typeof e&&"number"==typeof t){var o=qn(e);return"rgba("+o.red+","+o.green+","+o.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?er(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?er(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Sn(7)}function nr(e){if("object"!=typeof e)throw new Sn(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return tr(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return er(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return Zn(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return Qn(e);throw new Sn(8)}function rr(e){return function e(t,n,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=n?t.apply(this,o):e(t,n,o)}}(e,e.length,[])}function or(e,t,n){return Math.max(e,Math.min(t,n))}function ir(e,t){if("transparent"===t)return t;var n=zn(t);return nr(_({},n,{lightness:or(0,1,n.lightness-parseFloat(e))}))}var ar=rr(ir);function sr(e){if("transparent"===e)return 0;var t=qn(e),n=Object.keys(t).map((function(e){var n=t[e]/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),r=n[0],o=n[1],i=n[2];return parseFloat((.2126*r+.7152*o+.0722*i).toFixed(3))}function ur(e,t){var n=sr(e),r=sr(t);return parseFloat((n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)).toFixed(2))}function cr(e,t){if("transparent"===t)return t;var n=zn(t);return nr(_({},n,{lightness:or(0,1,n.lightness+parseFloat(e))}))}var lr=rr(cr);function dr(e,t,n){if("transparent"===t)return n;if("transparent"===n)return t;if(0===e)return n;var r=qn(t),o=_({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),i=qn(n),a=_({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),s=o.alpha-a.alpha,u=2*parseFloat(e)-1,c=((u*s==-1?u:u+s)/(1+u*s)+1)/2,l=1-c;return tr({red:Math.floor(o.red*c+a.red*l),green:Math.floor(o.green*c+a.green*l),blue:Math.floor(o.blue*c+a.blue*l),alpha:o.alpha*(parseFloat(e)/1)+a.alpha*(1-parseFloat(e)/1)})}var fr=rr(dr);var pr=n(78),hr=n(152),gr=n.n(hr),mr=n(153),vr=n.n(mr),yr=function(e,t){return(yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function br(e,t){function n(){this.constructor=e}yr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var wr=function(e,t,n,r){switch(t){case"debounce":return gr()(e,n,r);case"throttle":return vr()(e,n,r);default:return e}},Ir=function(e){return"function"==typeof e},Er=function(){return"undefined"==typeof window},Or=function(e){return e instanceof Element||e instanceof HTMLDocument},Tr=function(e,t,n,r){return function(o){var i=o.width,a=o.height;t((function(t){return t.width===i&&t.height===a||t.width===i&&!r||t.height===a&&!n?t:(e&&Ir(e)&&e(i,a),{width:i,height:a})}))}},Cr=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!Er()){t&&t.current&&(n.targetRef.current=t.current);var o=n.getElement();o&&(n.observableElement&&n.observableElement===o||(n.observableElement=o,n.resizeObserver.observe(o,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(Er())return null;if(t)return document.querySelector(t);if(r&&Or(r))return r;if(n.targetRef&&Or(n.targetRef.current))return n.targetRef.current;var o=Object(T.findDOMNode)(n);if(!o)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,o=void 0===r||r,i=t.handleHeight,a=void 0===i||i,s=t.onResize;if(o||a){var u=Tr(s,n.setState.bind(n),o,a);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,o=t.height;!n.skipOnMount&&!Er()&&u({width:r,height:o}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,r=e.children;return Ir(t)?"renderProp":Ir(r)?"childFunction":Object(E.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,o=t.refreshMode,i=t.refreshRate,a=void 0===i?1e3:i,s=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.targetRef=Object(E.createRef)(),n.observableElement=null,Er()||(n.resizeHandler=wr(n.createResizeHandler,o,a,s),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}return br(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){Er()||(this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,r=t.children,o=t.nodeType,i=void 0===o?"div":o,a=this.state,s={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(s);case"childFunction":return(e=r)(s);case"child":if((e=r).type&&"string"==typeof e.type){var u=Sr(s,["targetRef"]);return Object(E.cloneElement)(e,u)}return Object(E.cloneElement)(e,s);case"childArray":return(e=r).map((function(e){return!!e&&Object(E.cloneElement)(e,s)}));default:return E.createElement(i,null)}},t}(E.PureComponent);Er()?E.useEffect:E.useLayoutEffect;var Ar=Cr,xr=n(79);const Pr={arr:Array.isArray,obj:e=>"[object Object]"===Object.prototype.toString.call(e),fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,nul:e=>null===e,set:e=>e instanceof Set,map:e=>e instanceof Map,equ(e,t){if(typeof e!=typeof t)return!1;if(Pr.str(e)||Pr.num(e))return e===t;if(Pr.obj(e)&&Pr.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!Pr.und(n)||e===t}};function Dr(){const e=Object(E.useState)(!1)[1];return Object(E.useCallback)(()=>e(e=>!e),[])}function Rr(e,t){return Pr.und(e)||Pr.nul(e)?t:e}function jr(e){return Pr.und(e)?[]:Pr.arr(e)?e:[e]}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pr.fun(e)?e(...n):e}function kr(e){const t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,k(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(Pr.und(t))return _({to:t},e);const n=Object.keys(e).reduce((n,r)=>Pr.und(t[r])?_({},n,{[r]:e[r]}):n,{});return _({to:t},n)}class Mr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){0===this.children.length&&this.attach(),this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}class Nr extends Mr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Mr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Mr&&e.removeChild(this))}}class Lr extends Mr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Mr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Mr&&e.removeChild(this))}getValue(e){void 0===e&&(e=!1);const t={};for(const n in this.payload){const r=this.payload[n];(!e||r instanceof Mr)&&(t[n]=r instanceof Mr?r[e?"getAnimatedValue":"getValue"]():r)}return t}getAnimatedValue(){return this.getValue(!0)}}let Ur,Fr;function $r(e,t){Ur={fn:e,transform:t}}function Vr(e){Fr=e}let Br,Gr=e=>"undefined"!=typeof window?window.requestAnimationFrame(e):-1,Wr=e=>{"undefined"!=typeof window&&window.cancelAnimationFrame(e)};function qr(e){Br=e}let zr,Hr=()=>Date.now();function Jr(e){zr=e}let Yr,Xr,Kr=e=>e.current;function Qr(e){Yr=e}var Zr=Object.freeze({get applyAnimatedValues(){return Ur},injectApplyAnimatedValues:$r,get colorNames(){return Fr},injectColorNames:Vr,get requestFrame(){return Gr},get cancelFrame(){return Wr},injectFrame:function(e,t){Gr=e,Wr=t},get interpolation(){return Br},injectStringInterpolator:qr,get now(){return Hr},injectNow:function(e){Hr=e},get defaultElement(){return zr},injectDefaultElement:Jr,get animatedApi(){return Kr},injectAnimatedApi:function(e){Kr=e},get createAnimatedStyle(){return Yr},injectCreateAnimatedStyle:Qr,get manualFrameloop(){return Xr},injectManualFrameloop:function(e){Xr=e}});class eo extends Lr{constructor(e,t){super(),this.update=void 0,this.payload=e.style?_({},e,{style:Yr(e.style)}):e,this.update=t,this.attach()}}let to=!1;const no=new Set,ro=()=>{if(!to)return!1;let e=Hr();for(let t of no){let n=!1;for(let r=0;r<t.configs.length;r++){let o,i,a=t.configs[r];for(let t=0;t<a.animatedValues.length;t++){let r=a.animatedValues[t];if(r.done)continue;let s=a.fromValues[t],u=a.toValues[t],c=r.lastPosition,l=u instanceof Mr,d=Array.isArray(a.initialVelocity)?a.initialVelocity[t]:a.initialVelocity;if(l&&(u=u.getValue()),a.immediate)r.setValue(u),r.done=!0;else if("string"!=typeof s&&"string"!=typeof u){if(void 0!==a.duration)c=s+a.easing((e-r.startTime)/a.duration)*(u-s),o=e>=r.startTime+a.duration;else if(a.decay)c=s+d/(1-.998)*(1-Math.exp(-(1-.998)*(e-r.startTime))),o=Math.abs(r.lastPosition-c)<.1,o&&(u=c);else{i=void 0!==r.lastTime?r.lastTime:e,d=void 0!==r.lastVelocity?r.lastVelocity:a.initialVelocity,e>i+64&&(i=e);let t=Math.floor(e-i);for(let e=0;e<t;++e){d+=1*((-a.tension*(c-u)+-a.friction*d)/a.mass)/1e3,c+=1*d/1e3}let n=!(!a.clamp||0===a.tension)&&(s<u?c>u:c<u),l=Math.abs(d)<=a.precision,f=0===a.tension||Math.abs(u-c)<=a.precision;o=n||l&&f,r.lastVelocity=d,r.lastTime=e}l&&!a.toValues[t].done&&(o=!1),o?(r.value!==u&&(c=u),r.done=!0):n=!0,r.setValue(c),r.lastPosition=c}else r.setValue(u),r.done=!0}t.props.onFrame&&(t.values[a.name]=a.interpolation.getValue())}t.props.onFrame&&t.props.onFrame(t.values),n||(no.delete(t),t.stop(!0))}return no.size?Xr?Xr():Gr(ro):to=!1,to};function oo(e,t,n){if("function"==typeof e)return e;if(Array.isArray(e))return oo({range:e,output:t,extrapolate:n});if(Br&&"string"==typeof e.output[0])return Br(e);const r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,s,u){let c=u?u(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=i(c),r===-1/0?c=-c:o===1/0?c+=r:c=c*(o-r)+r;return c}(e,i[t],i[t+1],o[t],o[t+1],u,a,s,r.map)}}class io extends Nr{constructor(e,t,n,r){super(),this.calc=void 0,this.payload=e instanceof Nr&&!(e instanceof io)?e.getPayload():Array.isArray(e)?e:[e],this.calc=oo(t,n,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,t,n){this.calc=oo(e,t,n)}interpolate(e,t,n){return new io(this,e,t,n)}}const ao=(e,t,n)=>e&&new io(e,t,n),so={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}};function uo(e,t,n){void 0===n&&(n=1e3);const r=Object(E.useRef)();Object(E.useEffect)(()=>{Pr.equ(e,r.current)?e.forEach(e=>{let t=e.current;return t&&t.start()}):t?e.forEach((e,r)=>{let o=e.current;if(o){const e=o.controllers;if(e.length){const o=n*t[r];e.forEach(e=>{e.queue=e.queue.map(e=>_({},e,{delay:e.delay+o})),e.start()})}}}):e.reduce((e,t,n)=>{let r=t.current;return e.then(()=>r.start())},Promise.resolve()),r.current=e})}class co extends Mr{constructor(e){var t;super(),t=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(e,n){void 0===n&&(n=!0),t.value=e,n&&t.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){0===this.animatedStyles.size&&function e(t,n){"update"in t?n.add(t):t.getChildren().forEach(t=>e(t,n))}(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,t,n){return new io(this,e,t,n)}}class lo extends Nr{constructor(e){super(),this.payload=e.map(e=>new co(e))}setValue(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((e,n)=>this.payload[n].setValue(e,t)):this.payload.forEach(n=>n.setValue(e,t))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,t){return new io(this,e,t)}}let fo=0;class po{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=fo++}update(e){if(!e)return this;const t=kr(e),n=t.delay,r=void 0===n?0:n,o=t.to,i=k(t,["delay","to"]);if(Pr.arr(o)||Pr.fun(o))this.queue.push(_({},i,{delay:r,to:o}));else if(o){let e={};Object.entries(o).forEach(t=>{let n=t[0];const o=_({to:{[n]:t[1]},delay:_r(r,n)},i),a=e[o.delay]&&e[o.delay].to;e[o.delay]=_({},e[o.delay],o,{to:_({},a,o.to)})}),this.queue=Object.values(e)}return this.queue=this.queue.sort((e,t)=>e.delay-t.delay),this.diff(i),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(e=>{let t=e.from,n=void 0===t?{}:t,r=e.to,o=void 0===r?{}:r;Pr.obj(n)&&(this.merged=_({},n,this.merged)),Pr.obj(o)&&(this.merged=_({},this.merged,o))});const t=this.local=++this.guid,n=this.localQueue=this.queue;this.queue=[],n.forEach((r,o)=>{let i=r.delay,a=k(r,["delay"]);const s=r=>{o===n.length-1&&t===this.guid&&r&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let u=Pr.arr(a.to)||Pr.fun(a.to);i?setTimeout(()=>{t===this.guid&&(u?this.runAsync(a,s):this.diff(a).start(s))},i):u?this.runAsync(a,s):this.diff(a).start(s)})}else Pr.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,no.has(t)||no.add(t),to||(to=!0,Gr(Xr||ro));var t;return this}stop(e){return this.listeners.forEach(t=>t(e)),this.listeners=[],this}pause(e){var t;return this.stop(!0),e&&(t=this,no.has(t)&&no.delete(t)),this}runAsync(e,t){var n=this;e.delay;let r=k(e,["delay"]);const o=this.local;let i=Promise.resolve(void 0);if(Pr.arr(r.to))for(let e=0;e<r.to.length;e++){const t=e,n=_({},r,kr(r.to[t]));Pr.arr(n.config)&&(n.config=n.config[t]),i=i.then(()=>{if(o===this.guid)return new Promise(e=>this.diff(n).start(e))})}else if(Pr.fun(r.to)){let e,t=0;i=i.then(()=>r.to(n=>{const i=_({},r,kr(n));if(Pr.arr(i.config)&&(i.config=i.config[t]),t++,o===this.guid)return e=new Promise(e=>this.diff(i).start(e))},(function(e){return void 0===e&&(e=!0),n.stop(e)})).then(()=>e))}i.then(t)}diff(e){this.props=_({},this.props,e);let t=this.props,n=t.from,r=void 0===n?{}:n,o=t.to,i=void 0===o?{}:o,a=t.config,s=void 0===a?{}:a,u=t.reverse,c=t.attach,l=t.reset,d=t.immediate;if(u){var f=[i,r];r=f[0],i=f[1]}this.merged=_({},r,this.merged,i),this.hasChanged=!1;let p=c&&c(this);if(this.animations=Object.entries(this.merged).reduce((e,t)=>{let n=t[0],o=t[1],i=e[n]||{};const a=Pr.num(o),u=Pr.str(o)&&!o.startsWith("#")&&!/\d/.test(o)&&!Fr[o],c=Pr.arr(o),f=!a&&!c&&!u;let h=Pr.und(r[n])?o:r[n],g=a||c||u?o:1,m=_r(s,n);p&&(g=p.animations[n].parent);let v,y=i.parent,b=i.interpolation,S=jr(p?g.getPayload():g),w=o;f&&(w=Br({range:[0,1],output:[o,o]})(1));let I=b&&b.getValue();const E=!Pr.und(y)&&i.animatedValues.some(e=>!e.done),O=!Pr.equ(w,I),T=!Pr.equ(w,i.previous),C=!Pr.equ(m,i.config);if(l||T&&O||C){if(a||u)y=b=i.parent||new co(h);else if(c)y=b=i.parent||new lo(h);else if(f){let e=i.interpolation&&i.interpolation.calc(i.parent.value);e=void 0===e||l?h:e,i.parent?(y=i.parent,y.setValue(0,!1)):y=new co(0);const t={output:[e,o]};i.interpolation?(b=i.interpolation,i.interpolation.updateConfig(t)):b=y.interpolate(t)}return S=jr(p?g.getPayload():g),v=jr(y.getPayload()),l&&!f&&y.setValue(h,!1),this.hasChanged=!0,v.forEach(e=>{e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=E?e.lastVelocity:void 0,e.lastTime=E?e.lastTime:void 0,e.startTime=Hr(),e.done=!1,e.animatedStyles.clear()}),_r(d,n)&&y.setValue(f?g:o,!1),_({},e,{[n]:_({},i,{name:n,parent:y,interpolation:b,animatedValues:v,toValues:S,previous:w,config:m,fromValues:jr(y.getValue()),immediate:_r(d,n),initialVelocity:Rr(m.velocity,0),clamp:Rr(m.clamp,!1),precision:Rr(m.precision,.01),tension:Rr(m.tension,170),friction:Rr(m.friction,26),mass:Rr(m.mass,1),duration:m.duration,easing:Rr(m.easing,e=>e),decay:m.decay})})}return O?e:(f&&(y.setValue(1,!1),b.updateConfig({output:[w,w]})),y.done=!0,this.hasChanged=!0,_({},e,{[n]:_({},e[n],{previous:w})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let e in this.animations)this.interpolations[e]=this.animations[e].interpolation,this.values[e]=this.animations[e].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}const ho=(e,t)=>{const n=Object(E.useRef)(!1),r=Object(E.useRef)(),o=Pr.fun(t),i=Object(E.useMemo)(()=>{let n;return r.current&&(r.current.map(e=>e.destroy()),r.current=void 0),[new Array(e).fill().map((e,r)=>{const i=new po,a=o?_r(t,r,i):t[r];return 0===r&&(n=a.ref),i.update(a),n||i.start(),i}),n]},[e]),a=i[0],s=i[1];r.current=a;Object(E.useImperativeHandle)(s,()=>({start:()=>Promise.all(r.current.map(e=>new Promise(t=>e.start(t)))),stop:e=>r.current.forEach(t=>t.stop(e)),get controllers(){return r.current}}));const u=Object(E.useMemo)(()=>e=>r.current.map((t,n)=>{t.update(o?_r(e,n,t):e[n]),s||t.start()}),[e]);Object(E.useEffect)(()=>{n.current?o||u(t):s||r.current.forEach(e=>e.start())}),Object(E.useEffect)(()=>(n.current=!0,()=>r.current.forEach(e=>e.destroy())),[]);const c=r.current.map(e=>e.getValues());return o?[c,u,e=>r.current.forEach(t=>t.pause(e))]:c},go=e=>{const t=Pr.fun(e),n=ho(1,t?e:[e]),r=n[0],o=n[1],i=n[2];return t?[r[0],o,i]:r},mo=(e,t)=>{const n=Object(E.useRef)(!1),r=Pr.fun(t),o=_r(t),i=Object(E.useRef)(),a=ho(e,(e,t)=>(0===e&&(i.current=[]),i.current.push(t),_({},o,{config:_r(o.config,e),attach:e>0&&(()=>i.current[e-1])}))),s=a[0],u=a[1],c=a[2],l=Object(E.useMemo)(()=>e=>u((t,n)=>{e.reverse;const r=e.reverse?t+1:t-1,a=i.current[r];return _({},e,{config:_r(e.config||o.config,t),attach:a&&(()=>a)})}),[e,o.reverse]);return Object(E.useEffect)(()=>{n.current&&!r&&l(t)}),Object(E.useEffect)(()=>{n.current=!0},[]),r?[s,l,c]:s};let vo=0;const yo=(e,t)=>("function"==typeof t?e.map(t):jr(t)).map(String),bo=e=>{let t=e.items,n=e.keys,r=void 0===n?e=>e:n,o=k(e,["items","keys"]);return t=jr(void 0!==t?t:null),_({items:t,keys:yo(t,r)},o)};function So(e,t,n){const r=_({items:e,keys:t||(e=>e)},n),o=bo(r),i=o.lazy,a=void 0!==i&&i,s=(o.unique,o.reset),u=void 0!==s&&s,c=(o.enter,o.leave,o.update,o.onDestroyed),l=(o.keys,o.items,o.onFrame),d=o.onRest,f=o.onStart,p=o.ref,h=k(o,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),g=Dr(),m=Object(E.useRef)(!1),v=Object(E.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!r.ref,instances:!m.current&&new Map,forceUpdate:g});return Object(E.useImperativeHandle)(r.ref,()=>({start:()=>Promise.all(Array.from(v.current.instances).map(e=>{let t=e[1];return new Promise(e=>t.start(e))})),stop:e=>Array.from(v.current.instances).forEach(t=>t[1].stop(e)),get controllers(){return Array.from(v.current.instances).map(e=>e[1])}})),v.current=function(e,t){let n=e.first,r=e.prevProps,o=k(e,["first","prevProps"]),i=bo(t),a=i.items,s=i.keys,u=i.initial,c=i.from,l=i.enter,d=i.leave,f=i.update,p=i.trail,h=void 0===p?0:p,g=i.unique,m=i.config,v=i.order,y=void 0===v?["enter","leave","update"]:v,b=bo(r),S=b.keys,w=b.items,I=_({},o.current),E=[...o.deleted],O=Object.keys(I),T=new Set(O),C=new Set(s),A=s.filter(e=>!T.has(e)),x=o.transitions.filter(e=>!e.destroyed&&!C.has(e.originalKey)).map(e=>e.originalKey),P=s.filter(e=>T.has(e)),D=-h;for(;y.length;){switch(y.shift()){case"enter":A.forEach((e,t)=>{g&&E.find(t=>t.originalKey===e)&&(E=E.filter(t=>t.originalKey!==e));const r=s.indexOf(e),o=a[r],i=n&&void 0!==u?"initial":"enter";I[e]={slot:i,originalKey:e,key:g?String(e):vo++,item:o,trail:D+=h,config:_r(m,o,i),from:_r(n&&void 0!==u?u||{}:c,o),to:_r(l,o)}});break;case"leave":x.forEach(e=>{const t=S.indexOf(e),n=w[t];E.unshift(_({},I[e],{slot:"leave",destroyed:!0,left:S[Math.max(0,t-1)],right:S[Math.min(S.length,t+1)],trail:D+=h,config:_r(m,n,"leave"),to:_r(d,n)})),delete I[e]});break;case"update":P.forEach(e=>{const t=s.indexOf(e),n=a[t];I[e]=_({},I[e],{item:n,slot:"update",trail:D+=h,config:_r(m,n,"update"),to:_r(f,n)})})}}let R=s.map(e=>I[e]);return E.forEach(e=>{let t,n=e.left,r=(e.right,k(e,["left","right"]));-1!==(t=R.findIndex(e=>e.originalKey===n))&&(t+=1),t=Math.max(0,t),R=[...R.slice(0,t),r,...R.slice(t)]}),_({},o,{changed:A.length||x.length||P.length,first:n&&0===A.length,transitions:R,current:I,deleted:E,prevProps:t})}(v.current,r),v.current.changed&&v.current.transitions.forEach(e=>{const t=e.slot,n=e.from,r=e.to,o=e.config,i=e.trail,s=e.key,g=e.item;v.current.instances.has(s)||v.current.instances.set(s,new po);const m=v.current.instances.get(s),y=_({},h,{to:r,from:n,config:o,ref:p,onRest:n=>{if(v.current.mounted){e.destroyed&&(p||a||wo(v,s),c&&c(g));!Array.from(v.current.instances).some(e=>!e[1].idle)&&(p||a)&&v.current.deleted.length>0&&wo(v),d&&d(g,t,n)}},onStart:f&&(()=>f(g,t)),onFrame:l&&(e=>l(g,t,e)),delay:i,reset:u&&"enter"===t});m.update(y),v.current.paused||m.start()}),Object(E.useEffect)(()=>(v.current.mounted=m.current=!0,()=>{v.current.mounted=m.current=!1,Array.from(v.current.instances).map(e=>e[1].destroy()),v.current.instances.clear()}),[]),v.current.transitions.map(e=>{let t=e.item,n=e.slot,r=e.key;return{item:t,key:r,state:n,props:v.current.instances.get(r).getValues()}})}function wo(e,t){const n=e.current.deleted;for(let r of n){let n=r.key;const o=e=>e.key!==n;(Pr.und(t)||t===n)&&(e.current.instances.delete(n),e.current.transitions=e.current.transitions.filter(o),e.current.deleted=e.current.deleted.filter(o))}e.current.forceUpdate()}class Io extends Lr{constructor(e){void 0===e&&(e={}),super(),!e.transform||e.transform instanceof Mr||(e=Ur.transform(e)),this.payload=e}}const Eo={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Oo="[-+]?\\d*\\.?\\d+";function To(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Co=new RegExp("rgb"+To(Oo,Oo,Oo)),Ao=new RegExp("rgba"+To(Oo,Oo,Oo,Oo)),xo=new RegExp("hsl"+To(Oo,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),Po=new RegExp("hsla"+To(Oo,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",Oo)),Do=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ro=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,jo=/^#([0-9a-fA-F]{6})$/,_o=/^#([0-9a-fA-F]{8})$/;function ko(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mo(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ko(o,r,e+1/3),a=ko(o,r,e),s=ko(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function No(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Lo(e){return(parseFloat(e)%360+360)%360/360}function Uo(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Fo(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function $o(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=jo.exec(e))?parseInt(t[1]+"ff",16)>>>0:Eo.hasOwnProperty(e)?Eo[e]:(t=Co.exec(e))?(No(t[1])<<24|No(t[2])<<16|No(t[3])<<8|255)>>>0:(t=Ao.exec(e))?(No(t[1])<<24|No(t[2])<<16|No(t[3])<<8|Uo(t[4]))>>>0:(t=Do.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=_o.exec(e))?parseInt(t[1],16)>>>0:(t=Ro.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=xo.exec(e))?(255|Mo(Lo(t[1]),Fo(t[2]),Fo(t[3])))>>>0:(t=Po.exec(e))?(Mo(Lo(t[1]),Fo(t[2]),Fo(t[3]))|Uo(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const Vo=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Bo=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Go=new RegExp(`(${Object.keys(Eo).join("|")})`,"g");let Wo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const qo=["Webkit","Ms","Moz","O"];function zo(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Wo.hasOwnProperty(e)&&Wo[e]?(""+t).trim():t+"px"}Wo=Object.keys(Wo).reduce((e,t)=>(qo.forEach(n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t]),e),Wo);const Ho={};Qr(e=>new Io(e)),Jr("div"),qr(e=>{const t=e.output.map(e=>e.replace(Bo,$o)).map(e=>e.replace(Go,$o)),n=t[0].match(Vo).map(()=>[]);t.forEach(e=>{e.match(Vo).forEach((e,t)=>n[t].push(+e))});const r=t[0].match(Vo).map((t,r)=>oo(_({},e,{output:n[r]})));return e=>{let n=0;return t[0].replace(Vo,()=>r[n++](e)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`)}}),Vr(Eo),$r((e,t)=>{if(!e.nodeType||void 0===e.setAttribute)return!1;{const o=t.style,i=t.children,a=t.scrollTop,s=t.scrollLeft,u=k(t,["style","children","scrollTop","scrollLeft"]),c="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s),void 0!==i&&(e.textContent=i);for(let t in o)if(o.hasOwnProperty(t)){var n=0===t.indexOf("--"),r=zo(t,o[t],n);"float"===t&&(t="cssFloat"),n?e.style.setProperty(t,r):e.style[t]=r}for(let t in u){const n=c?t:Ho[t]||(Ho[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase()));void 0!==e.getAttribute(n)&&e.setAttribute(n,u[t])}}},e=>e);const Jo=(Yo=e=>Object(E.forwardRef)((t,n)=>{const r=Dr(),o=Object(E.useRef)(!0),i=Object(E.useRef)(null),a=Object(E.useRef)(null),s=Object(E.useCallback)(e=>{const t=i.current;i.current=new eo(e,()=>{let e=!1;a.current&&(e=Ur.fn(a.current,i.current.getAnimatedValue())),a.current&&!1!==e||r()}),t&&t.detach()},[]);Object(E.useEffect)(()=>()=>{o.current=!1,i.current&&i.current.detach()},[]),Object(E.useImperativeHandle)(n,()=>Kr(a,o,r)),s(t);const u=i.current.getValue(),c=(u.scrollTop,u.scrollLeft,k(u,["scrollTop","scrollLeft"])),l=(d=e,!Pr.fun(d)||d.prototype instanceof O.a.Component?e=>a.current=function(e,t){return t&&(Pr.fun(t)?t(e):Pr.obj(t)&&(t.current=e)),e}(e,n):void 0);var d;return O.a.createElement(e,_({},c,{ref:l}))}),void 0===(Xo=!1)&&(Xo=!0),e=>(Pr.arr(e)?e:Object.keys(e)).reduce((e,t)=>{const n=Xo?t[0].toLowerCase()+t.substring(1):t;return e[n]=Yo(n),e},Yo));var Yo,Xo;const Ko=Jo(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);var Qo=n(14),Zo=n(68),ei=n(151),ti=n(7),ni=n(34);var ri,oi,ii=Function.prototype,ai=Object.prototype,si=ii.toString,ui=ai.hasOwnProperty,ci=si.call(Object),li=ai.toString,di=(ri=Object.getPrototypeOf,oi=Object,function(e){return ri(oi(e))});var fi=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=li.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=di(e);if(null===t)return!0;var n=ui.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&si.call(n)==ci};function pi(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function hi(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var gi=/javascript\s*\:/gim;var mi={whiteList:hi(),getDefaultWhiteList:hi,onAttr:function(e,t,n){},onIgnoreAttr:function(e,t,n){},safeAttrValue:function(e,t){return gi.test(t)?"":t}},vi=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},yi=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var bi=function(e,t){";"!==(e=yi(e))[e.length-1]&&(e+=";");var n=e.length,r=!1,o=0,i=0,a="";function s(){if(!r){var n=vi(e.slice(o,i)),s=n.indexOf(":");if(-1!==s){var u=vi(n.slice(0,s)),c=vi(n.slice(s+1));if(u){var l=t(o,a.length,u,c,n);l&&(a+=l+"; ")}}}o=i+1}for(;i<n;i++){var u=e[i];if("/"===u&&"*"===e[i+1]){var c=e.indexOf("*/",i+2);if(-1===c)break;o=(i=c+1)+1,r=!1}else"("===u?r=!0:")"===u?r=!1:";"===u?r||s():"\n"===u&&s()}return vi(a)};function Si(e){return null==e}function wi(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||mi.whiteList,e.onAttr=e.onAttr||mi.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||mi.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||mi.safeAttrValue,this.options=e}wi.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,o=t.onIgnoreAttr,i=t.safeAttrValue;return bi(e,(function(e,t,a,s,u){var c=n[a],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(s):c instanceof RegExp&&(l=c.test(s)),!0!==l&&(l=!1),s=i(a,s)){var d,f={position:t,sourcePosition:e,source:u,isWhite:l};return l?Si(d=r(a,s,f))?a+":"+s:d:Si(d=o(a,s,f))?void 0:d}}))};var Ii=wi,Ei=pi((function(e,t){for(var n in(t=e.exports=function(e,t){return new Ii(t).process(e)}).FilterCSS=Ii,mi)t[n]=mi[n]})),Oi=function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Ti=function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},Ci=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Ai=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},xi=Ei.FilterCSS,Pi=Ei.getDefaultWhiteList;function Di(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var Ri=new xi;function ji(e){return e.replace(_i,"&lt;").replace(ki,"&gt;")}var _i=/</g,ki=/>/g,Mi=/"/g,Ni=/&quot;/g,Li=/&#([a-zA-Z0-9]*);?/gim,Ui=/&colon;?/gim,Fi=/&newline;?/gim,$i=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Vi=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Bi=/u\s*r\s*l\s*\(.*/gi;function Gi(e){return e.replace(Mi,"&quot;")}function Wi(e){return e.replace(Ni,'"')}function qi(e){return e.replace(Li,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function zi(e){return e.replace(Ui,":").replace(Fi," ")}function Hi(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ci(t)}function Ji(e){return e=Hi(e=zi(e=qi(e=Wi(e))))}function Yi(e){return e=ji(e=Gi(e))}var Xi=/<!--[\s\S]*?-->/g;var Ki={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:Di,onTag:function(e,t,n){},onIgnoreTag:function(e,t,n){},onTagAttr:function(e,t,n){},onIgnoreTagAttr:function(e,t,n){},safeAttrValue:function(e,t,n,r){if(n=Ji(n),"href"===t||"src"===t){if("#"===(n=Ci(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if($i.lastIndex=0,$i.test(n))return""}else if("style"===t){if(Vi.lastIndex=0,Vi.test(n))return"";if(Bi.lastIndex=0,Bi.test(n)&&($i.lastIndex=0,$i.test(n)))return"";!1!==r&&(n=(r=r||Ri).process(n))}return n=Yi(n)},escapeHtml:ji,escapeQuote:Gi,unescapeQuote:Wi,escapeHtmlEntities:qi,escapeDangerHtml5Entities:zi,clearNonPrintableCharacter:Hi,friendlyAttrValue:Ji,escapeAttrValue:Yi,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(i,a,s){if(function(t){return!!n||-1!==Oi(e,t)}(i)){if(s.isClosing){var u="[/removed]",c=s.position+u.length;return r.push([!1!==o?o:s.position,c]),o=!1,u}return o||(o=s.position),"[removed]"}return t(i,a,s)},remove:function(e){var t="",n=0;return Ti(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},stripCommentTag:function(e){return e.replace(Xi,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},cssFilter:Ri,getDefaultCSSWhiteList:Pi};function Qi(e){var t=Ai(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=Ci(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function Zi(e){return"</"===e.slice(0,2)}var ea=/[^a-zA-Z0-9_:\.\-]/gim;function ta(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function na(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function ra(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var oa={parseTag:function(e,t,n){var r="",o=0,i=!1,a=!1,s=0,u=e.length,c="",l="";e:for(s=0;s<u;s++){var d=e.charAt(s);if(!1===i){if("<"===d){i=s;continue}}else if(!1===a){if("<"===d){r+=n(e.slice(o,s)),i=s,o=s;continue}if(">"===d){r+=n(e.slice(o,i)),c=Qi(l=e.slice(i,s+1)),r+=t(i,r.length,c,l,Zi(l)),o=s+1,i=!1;continue}if('"'===d||"'"===d)for(var f=1,p=e.charAt(s-f);" "===p||"="===p;){if("="===p){a=d;continue e}p=e.charAt(s-++f)}}else if(d===a){a=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r},parseAttr:function(e,t){var n=0,r=[],o=!1,i=e.length;function a(e,n){if(!((e=(e=Ci(e)).replace(ea,"").toLowerCase()).length<1)){var o=t(e,n||"");o&&r.push(o)}}for(var s=0;s<i;s++){var u,c=e.charAt(s);if(!1!==o||"="!==c)if(!1===o||s!==n||'"'!==c&&"'"!==c||"="!==e.charAt(s-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(u=ta(e,s))){a(Ci(e.slice(n,s))),o=!1,n=s+1;continue}s=u-1;continue}if(-1===(u=na(e,s-1))){a(o,ra(Ci(e.slice(n,s)))),o=!1,n=s+1;continue}}else;else{if(-1===(u=e.indexOf(c,s+1)))break;a(o,Ci(e.slice(n+1,u))),o=!1,n=(s=u)+1}else o=e.slice(n,s),n=s+1}return n<e.length&&(!1===o?a(e.slice(n)):a(o,ra(Ci(e.slice(n))))),Ci(r.join(" "))}},ia=Ei.FilterCSS,aa=oa.parseTag,sa=oa.parseAttr;function ua(e){return null==e}function ca(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ki.onIgnoreTagStripAll),e.whiteList=e.whiteList||Ki.whiteList,e.onTag=e.onTag||Ki.onTag,e.onTagAttr=e.onTagAttr||Ki.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ki.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ki.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ki.safeAttrValue,e.escapeHtml=e.escapeHtml||Ki.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new ia(e.css))}ca.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,o=t.onIgnoreTag,i=t.onTagAttr,a=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Ki.stripBlankChar(e)),t.allowCommentTag||(e=Ki.stripCommentTag(e));var l=!1;if(t.stripIgnoreTagBody){l=Ki.StripTagBody(t.stripIgnoreTagBody,o);o=l.onIgnoreTag}var d=aa(e,(function(e,t,l,d,f){var p,h={sourcePosition:e,position:t,isClosing:f,isWhite:n.hasOwnProperty(l)};if(!ua(p=r(l,d,h)))return p;if(h.isWhite){if(h.isClosing)return"</"+l+">";var g=function(e){var t=Ai(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=Ci(e.slice(t+1,-1)))[e.length-1];return n&&(e=Ci(e.slice(0,-1))),{html:e,closing:n}}(d),m=n[l],v=sa(g.html,(function(e,t){var n,r=-1!==Oi(m,e);return ua(n=i(l,e,t,r))?r?(t=s(l,e,t,c))?e+'="'+t+'"':e:ua(n=a(l,e,t,r))?void 0:n:n}));d="<"+l;return v&&(d+=" "+v),g.closing&&(d+=" /"),d+=">"}return ua(p=o(l,d,h))?u(d):p}),u);return l&&(d=l.remove(d)),d};var la,da,fa,pa,ha,ga,ma,va,ya=ca,ba=pi((function(e,t){function n(e,t){return new ya(t).process(e)}for(var r in(t=e.exports=n).filterXSS=n,t.FilterXSS=ya,Ki)t[r]=Ki[r];for(var r in oa)t[r]=oa[r];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),Sa=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):ba.safeAttrValue(e,t,n,o)}},e&&!t?n=e:e&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[t]=e[t]}))):(n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=n,this._xssFilter=new ba.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?ba.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,r):ba.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var r=!1,o=void 0;if(Array.isArray(e))o=e.reduce((function(e,o){var i=n.validate(o,t);return i.isValid?e.concat([o]):(r=!0,e.concat([i.sanitized]))}),[]);else{if(!fi(e)){if(t.allowUndefined&&void 0===e)return;return null}o=Object.keys(e).reduce((function(o,i){var a=e[i],s=n.validate(a,t);return s.isValid?o[i]=a:(r=!0,o[i]=s.sanitized),o}),{})}return r?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(la||(la={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE"}(da||(da={})),function(e){e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(fa||(fa={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(pa||(pa={})),function(e){e.Design="DESIGN",e.Run="RUN"}(ha||(ha={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED"}(ga||(ga={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS",e.Block="BLOCK",e.Screen="SCREEN",e.PageTop="PAGE_TOP"}(ma||(ma={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(va||(va={}));const wa=["shortDate","shortDateLE","longMonthDayYear","dayShortMonthYear","longDate","shortDateShortTime","shortDateLEShortTime","shortDateShortTime24","shortDateLEShortTime24","shortDateLongTime","shortDateLELongTime","shortDateLongTime24","shortDateLELongTime24","longMonthYear","shortMonthYear","year"];var Ia,Ea;!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}(Ia||(Ia={})),function(e){e.Http="http:",e.Https="https:"}(Ea||(Ea={}));const Oa="_appWindow";var Ta,Ca;!function(e){e.Image="IMAGE",e.Config="CONFIG"}(Ta||(Ta={})),function(e){e.Primary="PRIMARY",e.Secondary="SECONDARY",e.Image="IMAGE",e.Donut="DONUT"}(Ca||(Ca={}));var Aa=n(2),xa=Array.isArray,Pa=n(10),Da=Pa.a.Symbol,Ra=Object.prototype,ja=Ra.hasOwnProperty,_a=Ra.toString,ka=Da?Da.toStringTag:void 0;var Ma=function(e){var t=ja.call(e,ka),n=e[ka];try{e[ka]=void 0;var r=!0}catch(e){}var o=_a.call(e);return r&&(t?e[ka]=n:delete e[ka]),o},Na=Object.prototype.toString;var La=function(e){return Na.call(e)},Ua=Da?Da.toStringTag:void 0;var Fa=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ua&&Ua in Object(e)?Ma(e):La(e)};var $a=function(e){return null!=e&&"object"==typeof e};var Va=function(e){return"symbol"==typeof e||$a(e)&&"[object Symbol]"==Fa(e)},Ba=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ga=/^\w*$/;var Wa=function(e,t){if(xa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Va(e))||(Ga.test(e)||!Ba.test(e)||null!=t&&e in Object(t))};var qa=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var za,Ha=function(e){if(!qa(e))return!1;var t=Fa(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ja=Pa.a["__core-js_shared__"],Ya=(za=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||""))?"Symbol(src)_1."+za:"";var Xa=function(e){return!!Ya&&Ya in e},Ka=Function.prototype.toString;var Qa=function(e){if(null!=e){try{return Ka.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Za=/^\[object .+?Constructor\]$/,es=Function.prototype,ts=Object.prototype,ns=es.toString,rs=ts.hasOwnProperty,os=RegExp("^"+ns.call(rs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var is=function(e){return!(!qa(e)||Xa(e))&&(Ha(e)?os:Za).test(Qa(e))};var as=function(e,t){return null==e?void 0:e[t]};var ss=function(e,t){var n=as(e,t);return is(n)?n:void 0},us=ss(Object,"create");var cs=function(){this.__data__=us?us(null):{},this.size=0};var ls=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ds=Object.prototype.hasOwnProperty;var fs=function(e){var t=this.__data__;if(us){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ds.call(t,e)?t[e]:void 0},ps=Object.prototype.hasOwnProperty;var hs=function(e){var t=this.__data__;return us?void 0!==t[e]:ps.call(t,e)};var gs=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=us&&void 0===t?"__lodash_hash_undefined__":t,this};function ms(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ms.prototype.clear=cs,ms.prototype.delete=ls,ms.prototype.get=fs,ms.prototype.has=hs,ms.prototype.set=gs;var vs=ms;var ys=function(){this.__data__=[],this.size=0};var bs=function(e,t){return e===t||e!=e&&t!=t};var Ss=function(e,t){for(var n=e.length;n--;)if(bs(e[n][0],t))return n;return-1},ws=Array.prototype.splice;var Is=function(e){var t=this.__data__,n=Ss(t,e);return!(n<0)&&(n==t.length-1?t.pop():ws.call(t,n,1),--this.size,!0)};var Es=function(e){var t=this.__data__,n=Ss(t,e);return n<0?void 0:t[n][1]};var Os=function(e){return Ss(this.__data__,e)>-1};var Ts=function(e,t){var n=this.__data__,r=Ss(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Cs(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cs.prototype.clear=ys,Cs.prototype.delete=Is,Cs.prototype.get=Es,Cs.prototype.has=Os,Cs.prototype.set=Ts;var As=Cs,xs=ss(Pa.a,"Map");var Ps=function(){this.size=0,this.__data__={hash:new vs,map:new(xs||As),string:new vs}};var Ds=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Rs=function(e,t){var n=e.__data__;return Ds(t)?n["string"==typeof t?"string":"hash"]:n.map};var js=function(e){var t=Rs(this,e).delete(e);return this.size-=t?1:0,t};var _s=function(e){return Rs(this,e).get(e)};var ks=function(e){return Rs(this,e).has(e)};var Ms=function(e,t){var n=Rs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ns(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ns.prototype.clear=Ps,Ns.prototype.delete=js,Ns.prototype.get=_s,Ns.prototype.has=ks,Ns.prototype.set=Ms;var Ls=Ns;function Us(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Us.Cache||Ls),n}Us.Cache=Ls;var Fs=Us;var $s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vs=/\\(\\)?/g,Bs=function(e){var t=Fs(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($s,(function(e,n,r,o){t.push(r?o.replace(Vs,"$1"):n||e)})),t}));var Gs=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Ws=Da?Da.prototype:void 0,qs=Ws?Ws.toString:void 0;var zs=function e(t){if("string"==typeof t)return t;if(xa(t))return Gs(t,e)+"";if(Va(t))return qs?qs.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var Hs=function(e){return null==e?"":zs(e)};var Js=function(e,t){return xa(e)?e:Wa(e,t)?[e]:Bs(Hs(e))};var Ys=function(e){if("string"==typeof e||Va(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Xs=function(e,t){for(var n=0,r=(t=Js(t,e)).length;null!=e&&n<r;)e=e[Ys(t[n++])];return n&&n==r?e:void 0};var Ks=function(e,t,n){var r=null==e?void 0:Xs(e,t);return void 0===r?n:r};var Qs=function(){this.__data__=new As,this.size=0};var Zs=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var eu=function(e){return this.__data__.get(e)};var tu=function(e){return this.__data__.has(e)};var nu=function(e,t){var n=this.__data__;if(n instanceof As){var r=n.__data__;if(!xs||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ls(r)}return n.set(e,t),this.size=n.size,this};function ru(e){var t=this.__data__=new As(e);this.size=t.size}ru.prototype.clear=Qs,ru.prototype.delete=Zs,ru.prototype.get=eu,ru.prototype.has=tu,ru.prototype.set=nu;var ou=ru;var iu=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var au=function(e){return this.__data__.has(e)};function su(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ls;++t<n;)this.add(e[t])}su.prototype.add=su.prototype.push=iu,su.prototype.has=au;var uu=su;var cu=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var lu=function(e,t){return e.has(t)};var du=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var d=-1,f=!0,p=2&n?new uu:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var h=e[d],g=t[d];if(r)var m=a?r(g,h,d,t,e,i):r(h,g,d,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!cu(t,(function(e,t){if(!lu(p,t)&&(h===e||o(h,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(h!==g&&!o(h,g,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f},fu=Pa.a.Uint8Array;var pu=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var hu=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},gu=Da?Da.prototype:void 0,mu=gu?gu.valueOf:void 0;var vu=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new fu(e),new fu(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return bs(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=pu;case"[object Set]":var u=1&r;if(s||(s=hu),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=du(s(e),s(t),r,o,i,a);return a.delete(e),l;case"[object Symbol]":if(mu)return mu.call(e)==mu.call(t)}return!1};var yu=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e};var bu=function(e,t,n){var r=t(e);return xa(e)?r:yu(r,n(e))};var Su=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var wu=function(){return[]},Iu=Object.prototype.propertyIsEnumerable,Eu=Object.getOwnPropertySymbols,Ou=Eu?function(e){return null==e?[]:(e=Object(e),Su(Eu(e),(function(t){return Iu.call(e,t)})))}:wu;var Tu=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Cu=function(e){return $a(e)&&"[object Arguments]"==Fa(e)},Au=Object.prototype,xu=Au.hasOwnProperty,Pu=Au.propertyIsEnumerable,Du=Cu(function(){return arguments}())?Cu:function(e){return $a(e)&&xu.call(e,"callee")&&!Pu.call(e,"callee")},Ru=n(41),ju=/^(?:0|[1-9]\d*)$/;var _u=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ju.test(e))&&e>-1&&e%1==0&&e<t};var ku=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Mu={};Mu["[object Float32Array]"]=Mu["[object Float64Array]"]=Mu["[object Int8Array]"]=Mu["[object Int16Array]"]=Mu["[object Int32Array]"]=Mu["[object Uint8Array]"]=Mu["[object Uint8ClampedArray]"]=Mu["[object Uint16Array]"]=Mu["[object Uint32Array]"]=!0,Mu["[object Arguments]"]=Mu["[object Array]"]=Mu["[object ArrayBuffer]"]=Mu["[object Boolean]"]=Mu["[object DataView]"]=Mu["[object Date]"]=Mu["[object Error]"]=Mu["[object Function]"]=Mu["[object Map]"]=Mu["[object Number]"]=Mu["[object Object]"]=Mu["[object RegExp]"]=Mu["[object Set]"]=Mu["[object String]"]=Mu["[object WeakMap]"]=!1;var Nu=function(e){return $a(e)&&ku(e.length)&&!!Mu[Fa(e)]};var Lu=function(e){return function(t){return e(t)}},Uu=n(69),Fu=Uu.a&&Uu.a.isTypedArray,$u=Fu?Lu(Fu):Nu,Vu=Object.prototype.hasOwnProperty;var Bu=function(e,t){var n=xa(e),r=!n&&Du(e),o=!n&&!r&&Object(Ru.a)(e),i=!n&&!r&&!o&&$u(e),a=n||r||o||i,s=a?Tu(e.length,String):[],u=s.length;for(var c in e)!t&&!Vu.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_u(c,u))||s.push(c);return s},Gu=Object.prototype;var Wu=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Gu)};var qu=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),zu=Object.prototype.hasOwnProperty;var Hu=function(e){if(!Wu(e))return qu(e);var t=[];for(var n in Object(e))zu.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Ju=function(e){return null!=e&&ku(e.length)&&!Ha(e)};var Yu=function(e){return Ju(e)?Bu(e):Hu(e)};var Xu=function(e){return bu(e,Yu,Ou)},Ku=Object.prototype.hasOwnProperty;var Qu=function(e,t,n,r,o,i){var a=1&n,s=Xu(e),u=s.length;if(u!=Xu(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:Ku.call(t,l)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<u;){var g=e[l=s[c]],m=t[l];if(r)var v=a?r(m,g,l,t,e,i):r(g,m,l,e,t,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},Zu=ss(Pa.a,"DataView"),ec=ss(Pa.a,"Promise"),tc=ss(Pa.a,"Set"),nc=ss(Pa.a,"WeakMap"),rc=Qa(Zu),oc=Qa(xs),ic=Qa(ec),ac=Qa(tc),sc=Qa(nc),uc=Fa;(Zu&&"[object DataView]"!=uc(new Zu(new ArrayBuffer(1)))||xs&&"[object Map]"!=uc(new xs)||ec&&"[object Promise]"!=uc(ec.resolve())||tc&&"[object Set]"!=uc(new tc)||nc&&"[object WeakMap]"!=uc(new nc))&&(uc=function(e){var t=Fa(e),n="[object Object]"==t?e.constructor:void 0,r=n?Qa(n):"";if(r)switch(r){case rc:return"[object DataView]";case oc:return"[object Map]";case ic:return"[object Promise]";case ac:return"[object Set]";case sc:return"[object WeakMap]"}return t});var cc=uc,lc=Object.prototype.hasOwnProperty;var dc=function(e,t,n,r,o,i){var a=xa(e),s=xa(t),u=a?"[object Array]":cc(e),c=s?"[object Array]":cc(t),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Object(Ru.a)(e)){if(!Object(Ru.a)(t))return!1;a=!0,l=!1}if(f&&!l)return i||(i=new ou),a||$u(e)?du(e,t,n,r,o,i):vu(e,t,u,n,r,o,i);if(!(1&n)){var p=l&&lc.call(e,"__wrapped__"),h=d&&lc.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,m=h?t.value():t;return i||(i=new ou),o(g,m,n,r,i)}}return!!f&&(i||(i=new ou),Qu(e,t,n,r,o,i))};var fc=function e(t,n,r,o,i){return t===n||(null==t||null==n||!$a(t)&&!$a(n)?t!=t&&n!=n:dc(t,n,r,o,e,i))};var pc=function(e,t){return fc(e,t)};const hc=[576,992],gc={DESKTOP:{width:1280,height:800},PAD:{width:768,height:1024},PHONE:{width:414,height:896}},mc=960,vc={};vc[la.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],vc[la.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],vc[la.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];const yc=vc,bc="themes/shared-theme/",Sc="selection",wc="no_selection",Ic="output",Ec="repeat_context",Oc="current_page",Tc=100,Cc="exb_user_locale";var Ac,xc;!function(e){e.Today="TODAY",e.Tomorrow="TOMORROW",e.Yesterday="YESTERDAY",e.ThisWeek="THIS_WEEK",e.ThisMonth="THIS_MONTH",e.ThisQuarter="THIS_QUARTER",e.ThisYear="THIS_YEAR"}(Ac||(Ac={})),function(e){e.Minute="MINUTE",e.Hour="HOUR",e.Day="DAY",e.Week="WEEK",e.Month="MONTH",e.Year="YEAR"}(xc||(xc={}));const Pc={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},Dc={common:" ",de:" , ",el:" , ",fi:" klo ",fr:"  ",he:" , ",hi:" , ",it:" , ",nb:" , ",pl:" , ",ro:" , ",ru:" , ",vi:" , "},Rc={date:"yyyy/MM/dd",time:"H:mm",dateTime:"yyyy/MM/dd H:mm"};function jc(e){const t=Pc[e];return t||(console.warn("Invalid data format "+e),null)}function _c(e,t,n){if(!t&&!n)return Rc.date;let r="";if(t){if(wa.includes(t)){const e=jc(t);t=e.datePattern,n=n||e.timePattern}r=t}if(n){const o=e.locale||"en";r=r+(t?Dc[o]||Dc.common:"")+n}return r}function kc(e,t,n){if(!e)return"";"number"==typeof e&&(e=new Date(e));const r=jc(t);return Mc(e,n,r.datePattern,r.timePattern)}function Mc(e,t,n,r){if(!e)return"";if("number"==typeof e&&(e=new Date(e)),!n&&!r)return t.formatDate(e);let o=Fc(e,n,t);if(r){const n=$c(e,r,t),i=t.locale||"en";o=o+(Dc[i]||Dc.common)+n}return o}const Nc=e=>{const t=jc(e);if(!t)return;const n=Lc(t.datePattern),r=Lc(t.timePattern);return Object.assign(Object.assign({},n),r)},Lc=e=>{const t={};if(e.includes("y")&&(t.year="numeric"),e.includes("MMMM")?t.month="long":e.includes("MMM")?t.month="short":e.includes("MM")?t.month="2-digit":e.includes("M")&&(t.month="numeric"),e.includes("d")&&(t.day="numeric"),e.includes("EEEE")&&(t.weekday="long"),0!==Object.keys(t).length)return t;console.warn("Invalid date pattern "+e)},Uc=(e,t)=>{const n={};if(e.toLowerCase().includes("h")&&(n.hour="numeric"),e.includes("mm")&&(n.minute="2-digit"),e.includes("ss")&&(n.second="2-digit"),t&&e.includes("a")&&(n.hour12=!0),0!==Object.keys(n).length)return n;console.warn("Not support time pattern "+e)};function Fc(e,t,n){if(!e)return null;const r=Lc(t);return n.formatDate(e,r)}function $c(e,t,n){if(!e)return null;const r=Uc(t,!1);return n.formatDate(e,r)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vc=function(e,t){return(Vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Bc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Vc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Gc=function(){return(Gc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;function Wc(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}Object.create;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var qc=function(e,t){return(qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function zc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}qc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Hc=function(){return(Hc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;function Jc(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}Object.create;var Yc=function(){return(Yc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;var Xc,Kc,Qc;Object.create;function Zc(e){return e.type===Kc.literal}function el(e){return e.type===Kc.argument}function tl(e){return e.type===Kc.number}function nl(e){return e.type===Kc.date}function rl(e){return e.type===Kc.time}function ol(e){return e.type===Kc.select}function il(e){return e.type===Kc.plural}function al(e){return e.type===Kc.pound}function sl(e){return e.type===Kc.tag}function ul(e){return!(!e||"object"!=typeof e||e.type!==Qc.number)}function cl(e){return!(!e||"object"!=typeof e||e.type!==Qc.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(Xc||(Xc={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Kc||(Kc={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Qc||(Qc={}));var ll=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,dl=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function fl(e){var t={};return e.replace(dl,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pl=function(){return(pl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;Object.create;var hl=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var gl,ml=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,vl=/^(@+)?(\+|#+)?$/g,yl=/(\*)(0+)|(#+)(0+)|(0+)/g,bl=/^(0+)$/;function Sl(e){var t={};return e.replace(vl,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function wl(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Il(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!bl.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function El(e){var t=wl(e);return t||{}}function Ol(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=pl(pl(pl({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return pl(pl({},e),El(t))}),{}));continue;case"engineering":t=pl(pl(pl({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return pl(pl({},e),El(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(yl,(function(e,n,r,o,i,a){if(n)t.minimumIntegerDigits=r.length;else{if(o&&i)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(bl.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if(ml.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(ml,(function(e,n,r,o,i,a){return"*"===r?t.minimumFractionDigits=n.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&a?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+a.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),o.options.length&&(t=pl(pl({},t),Sl(o.options[0])))}else if(vl.test(o.stem))t=pl(pl({},t),Sl(o.stem));else{var i=wl(o.stem);i&&(t=pl(pl({},t),i));var a=Il(o.stem);a&&(t=pl(pl({},t),a))}}return t}var Tl=new RegExp("^"+ll.source+"*"),Cl=new RegExp(ll.source+"*$");function Al(e,t){return{start:e,end:t}}var xl=!!String.prototype.startsWith,Pl=!!String.fromCodePoint,Dl=!!Object.fromEntries,Rl=!!String.prototype.codePointAt,jl=!!String.prototype.trimStart,_l=!!String.prototype.trimEnd,kl=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Ml=!0;try{Ml="a"===(null===(gl=Gl("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===gl?void 0:gl[0])}catch(e){Ml=!1}var Nl,Ll=xl?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},Ul=Pl?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",o=e.length,i=0;o>i;){if((n=e[i++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},Fl=Dl?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n],i=o[0],a=o[1];t[i]=a}return t},$l=Rl?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,o=e.charCodeAt(t);return o<55296||o>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?o:r-56320+(o-55296<<10)+65536}},Vl=jl?function(e){return e.trimStart()}:function(e){return e.replace(Tl,"")},Bl=_l?function(e){return e.trimEnd()}:function(e){return e.replace(Cl,"")};function Gl(e,t){return new RegExp(e,t)}if(Ml){var Wl=Gl("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Nl=function(e,t){var n;return Wl.lastIndex=t,null!==(n=Wl.exec(e)[1])&&void 0!==n?n:""}}else Nl=function(e,t){for(var n=[];;){var r=$l(e,t);if(void 0===r||Hl(r)||Jl(r))break;n.push(r),t+=r>=65536?2:1}return Ul.apply(void 0,n)};var ql=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var o=this.char();if(123===o){if((i=this.parseArgument(e,n)).err)return i;r.push(i.val)}else{if(125===o&&e>0)break;if(35!==o||"plural"!==t&&"selectordinal"!==t){if(60===o&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(Xc.UNMATCHED_CLOSING_TAG,Al(this.clonePosition(),this.clonePosition()))}if(60===o&&!this.ignoreTag&&zl(this.peek()||0)){if((i=this.parseTag(e,t)).err)return i;r.push(i.val)}else{var i;if((i=this.parseLiteral(e,t)).err)return i;r.push(i.val)}}else{var a=this.clonePosition();this.bump(),r.push({type:Kc.pound,location:Al(a,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Kc.literal,value:"<"+r+"/>",location:Al(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,t,!0);if(o.err)return o;var i=o.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!zl(this.char()))return this.error(Xc.INVALID_TAG,Al(a,this.clonePosition()));var s=this.clonePosition();return r!==this.parseTagName()?this.error(Xc.UNMATCHED_CLOSING_TAG,Al(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Kc.tag,value:r,children:i,location:Al(n,this.clonePosition())},err:null}:this.error(Xc.INVALID_TAG,Al(a,this.clonePosition())))}return this.error(Xc.UNCLOSED_TAG,Al(n,this.clonePosition()))}return this.error(Xc.INVALID_TAG,Al(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var o=this.tryParseQuote(t);if(o)r+=o;else{var i=this.tryParseUnquoted(e,t);if(i)r+=i;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var s=Al(n,this.clonePosition());return{val:{type:Kc.literal,value:r,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(zl(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return Ul.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),Ul(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Xc.EXPECT_ARGUMENT_CLOSING_BRACE,Al(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(Xc.EMPTY_ARGUMENT,Al(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(Xc.MALFORMED_ARGUMENT,Al(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Xc.EXPECT_ARGUMENT_CLOSING_BRACE,Al(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Kc.argument,value:r,location:Al(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Xc.EXPECT_ARGUMENT_CLOSING_BRACE,Al(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(Xc.MALFORMED_ARGUMENT,Al(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Nl(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:Al(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var o,i=this.clonePosition(),a=this.parseIdentifierIfPossible().value,s=this.clonePosition();switch(a){case"":return this.error(Xc.EXPECT_ARGUMENT_TYPE,Al(i,s));case"number":case"date":case"time":this.bumpSpace();var u=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((m=this.parseSimpleArgStyleIfPossible()).err)return m;if(0===(f=Bl(m.val)).length)return this.error(Xc.EXPECT_ARGUMENT_STYLE,Al(this.clonePosition(),this.clonePosition()));u={style:f,styleLocation:Al(c,this.clonePosition())}}if((v=this.tryParseArgumentClose(r)).err)return v;var l=Al(r,this.clonePosition());if(u&&Ll(null==u?void 0:u.style,"::",0)){var d=Vl(u.style.slice(2));if("number"===a)return(m=this.parseNumberSkeletonFromString(d,u.styleLocation)).err?m:{val:{type:Kc.number,value:n,location:l,style:m.val},err:null};if(0===d.length)return this.error(Xc.EXPECT_DATE_TIME_SKELETON,l);var f={type:Qc.dateTime,pattern:d,location:u.styleLocation,parsedOptions:this.shouldParseSkeletons?fl(d):{}};return{val:{type:"date"===a?Kc.date:Kc.time,value:n,location:l,style:f},err:null}}return{val:{type:"number"===a?Kc.number:"date"===a?Kc.date:Kc.time,value:n,location:l,style:null!==(o=null==u?void 0:u.style)&&void 0!==o?o:null},err:null};case"plural":case"selectordinal":case"select":var p=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Xc.EXPECT_SELECT_ARGUMENT_OPTIONS,Al(p,Yc({},p)));this.bumpSpace();var h=this.parseIdentifierIfPossible(),g=0;if("select"!==a&&"offset"===h.value){if(!this.bumpIf(":"))return this.error(Xc.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Al(this.clonePosition(),this.clonePosition()));var m;if(this.bumpSpace(),(m=this.tryParseDecimalInteger(Xc.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Xc.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return m;this.bumpSpace(),h=this.parseIdentifierIfPossible(),g=m.val}var v,y=this.tryParsePluralOrSelectOptions(e,a,t,h);if(y.err)return y;if((v=this.tryParseArgumentClose(r)).err)return v;var b=Al(r,this.clonePosition());return"select"===a?{val:{type:Kc.select,value:n,options:Fl(y.val),location:b},err:null}:{val:{type:Kc.plural,value:n,options:Fl(y.val),offset:g,pluralType:"plural"===a?"cardinal":"ordinal",location:b},err:null};default:return this.error(Xc.INVALID_ARGUMENT_TYPE,Al(i,s))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(Xc.EXPECT_ARGUMENT_CLOSING_BRACE,Al(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Xc.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Al(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(hl).filter((function(e){return e.length>0}));n<r.length;n++){var o=r[n].split("/");if(0===o.length)throw new Error("Invalid number skeleton");for(var i=o[0],a=o.slice(1),s=0,u=a;s<u.length;s++){if(0===u[s].length)throw new Error("Invalid number skeleton")}t.push({stem:i,options:a})}return t}(e)}catch(e){return this.error(Xc.INVALID_NUMBER_SKELETON,t)}return{val:{type:Qc.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?Ol(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var o,i=!1,a=[],s=new Set,u=r.value,c=r.location;;){if(0===u.length){var l=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(Xc.EXPECT_PLURAL_ARGUMENT_SELECTOR,Xc.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;c=Al(l,this.clonePosition()),u=this.message.slice(l.offset,this.offset())}if(s.has(u))return this.error("select"===t?Xc.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Xc.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===u&&(i=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?Xc.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Xc.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Al(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,n);if(p.err)return p;var h=this.tryParseArgumentClose(f);if(h.err)return h;a.push([u,{value:p.val,location:Al(f,this.clonePosition())}]),s.add(u),this.bumpSpace(),u=(o=this.parseIdentifierIfPossible()).value,c=o.location}return 0===a.length?this.error("select"===t?Xc.EXPECT_SELECT_ARGUMENT_SELECTOR:Xc.EXPECT_PLURAL_ARGUMENT_SELECTOR,Al(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!i?this.error(Xc.MISSING_OTHER_CLAUSE,Al(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var o=!1,i=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;o=!0,i=10*i+(a-48),this.bump()}var s=Al(r,this.clonePosition());return o?kl(i*=n)?{val:i,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=$l(this.message,e);if(void 0===t)throw Error("Offset "+e+" is at invalid UTF-16 code unit boundary");return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(Ll(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset "+e+" must be greater than or equal to the current offset "+this.offset());for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset "+e+" is at invalid UTF-16 code unit boundary");if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Hl(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function zl(e){return e>=97&&e<=122||e>=65&&e<=90}function Hl(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function Jl(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Yl(e,t){void 0===t&&(t={}),t=Yc({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new ql(e,t).parse();if(n.err){var r=SyntaxError(Xc[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return(null==t?void 0:t.captureLocation)||function e(t){t.forEach((function(t){if(delete t.location,ol(t)||il(t))for(var n in t.options)delete t.options[n].location,e(t.options[n].value);else tl(t)&&ul(t.style)||(nl(t)||rl(t))&&cl(t.style)?delete t.style.location:sl(t)&&e(t.children)}))}(n.val),n.val}function Xl(e,t){var n=t&&t.cache?t.cache:od,r=t&&t.serializer?t.serializer:td;return(t&&t.strategy?t.strategy:ed)(e,{cache:n,serializer:r})}function Kl(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),a=t.get(i);return void 0===a&&(a=e.call(this,r),t.set(i,a)),a}function Ql(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function Zl(e,t,n,r,o){return n.bind(t,e,r,o)}function ed(e,t){return Zl(e,this,1===e.length?Kl:Ql,t.cache.create(),t.serializer)}var td=function(){return JSON.stringify(arguments)};function nd(){this.cache=Object.create(null)}nd.prototype.has=function(e){return e in this.cache},nd.prototype.get=function(e){return this.cache[e]},nd.prototype.set=function(e,t){this.cache[e]=t};var rd,od={create:function(){return new nd}},id={variadic:function(e,t){return Zl(e,this,Ql,t.cache.create(),t.serializer)},monadic:function(e,t){return Zl(e,this,Kl,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(rd||(rd={}));var ad,sd=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.code=n,o.originalMessage=r,o}return zc(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),ud=function(e){function t(t,n,r,o){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',rd.INVALID_VALUE,o)||this}return zc(t,e),t}(sd),cd=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,rd.INVALID_VALUE,r)||this}return zc(t,e),t}(sd),ld=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',rd.MISSING_VALUE,n)||this}return zc(t,e),t}(sd);function dd(e){return"function"==typeof e}function fd(e,t,n,r,o,i,a){if(1===e.length&&Zc(e[0]))return[{type:ad.literal,value:e[0].value}];for(var s=[],u=0,c=e;u<c.length;u++){var l=c[u];if(Zc(l))s.push({type:ad.literal,value:l.value});else if(al(l))"number"==typeof i&&s.push({type:ad.literal,value:n.getNumberFormat(t).format(i)});else{var d=l.value;if(!o||!(d in o))throw new ld(d,a);var f=o[d];if(el(l))f&&"string"!=typeof f&&"number"!=typeof f||(f="string"==typeof f||"number"==typeof f?String(f):""),s.push({type:"string"==typeof f?ad.literal:ad.object,value:f});else if(nl(l)){var p="string"==typeof l.style?r.date[l.style]:cl(l.style)?l.style.parsedOptions:void 0;s.push({type:ad.literal,value:n.getDateTimeFormat(t,p).format(f)})}else if(rl(l)){p="string"==typeof l.style?r.time[l.style]:cl(l.style)?l.style.parsedOptions:void 0;s.push({type:ad.literal,value:n.getDateTimeFormat(t,p).format(f)})}else if(tl(l)){(p="string"==typeof l.style?r.number[l.style]:ul(l.style)?l.style.parsedOptions:void 0)&&p.scale&&(f*=p.scale||1),s.push({type:ad.literal,value:n.getNumberFormat(t,p).format(f)})}else{if(sl(l)){var h=l.children,g=l.value,m=o[g];if(!dd(m))throw new cd(g,"function",a);var v=m(fd(h,t,n,r,o,i).map((function(e){return e.value})));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map((function(e){return{type:"string"==typeof e?ad.literal:ad.object,value:e}})))}if(ol(l)){if(!(y=l.options[f]||l.options.other))throw new ud(l.value,f,Object.keys(l.options),a);s.push.apply(s,fd(y.value,t,n,r,o))}else if(il(l)){var y;if(!(y=l.options["="+f])){if(!Intl.PluralRules)throw new sd('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',rd.MISSING_INTL_API,a);var b=n.getPluralRules(t,{type:l.pluralType}).select(f-(l.offset||0));y=l.options[b]||l.options.other}if(!y)throw new ud(l.value,f,Object.keys(l.options),a);s.push.apply(s,fd(y.value,t,n,r,o,f-(l.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===ad.literal&&t.type===ad.literal?n.value+=t.value:e.push(t),e}),[])}(s)}function pd(e,t){return t?Object.keys(e).reduce((function(n,r){var o,i;return n[r]=(o=e[r],(i=t[r])?Hc(Hc(Hc({},o||{}),i||{}),Object.keys(o).reduce((function(e,t){return e[t]=Hc(Hc({},o[t]),i[t]||{}),e}),{})):o),n}),Hc({},e)):e}function hd(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(ad||(ad={}));var gd,md=function(){function e(t,n,r,o){var i,a=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=a.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===ad.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return fd(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==o?void 0:o.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=pd(e.formats,r),this.locales=n,this.formatters=o&&o.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Jc([void 0],t)))}),{cache:hd(i.number),strategy:id.variadic}),getDateTimeFormat:Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Jc([void 0],t)))}),{cache:hd(i.dateTime),strategy:id.variadic}),getPluralRules:Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Jc([void 0],t)))}),{cache:hd(i.pluralRules),strategy:id.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=Yl,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(gd||(gd={}));var vd=function(e){function t(n,r,o){var i=e.call(this,"[@formatjs/intl Error "+n+"] "+r+" \n"+(o?"\n"+o.message+"\n"+o.stack:""))||this;return i.code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return Bc(t,e),t}(Error),yd=function(e){function t(t,n){return e.call(this,gd.UNSUPPORTED_FORMATTER,t,n)||this}return Bc(t,e),t}(vd),bd=function(e){function t(t,n){return e.call(this,gd.INVALID_CONFIG,t,n)||this}return Bc(t,e),t}(vd),Sd=function(e){function t(t,n){return e.call(this,gd.MISSING_DATA,t,n)||this}return Bc(t,e),t}(vd),wd=function(e){function t(t,n,r,o){var i=e.call(this,gd.FORMAT_ERROR,t+" \nLocale: "+n+"\nMessageID: "+(null==r?void 0:r.id)+"\nDefault Message: "+(null==r?void 0:r.defaultMessage)+"\nDescription: "+(null==r?void 0:r.description)+" \n",o)||this;return i.descriptor=r,i}return Bc(t,e),t}(vd),Id=function(e){function t(t,n){var r=e.call(this,gd.MISSING_TRANSLATION,'Missing message: "'+t.id+'" for locale "'+n+'", using '+(t.defaultMessage?"default message":"id")+" as fallback.")||this;return r.descriptor=t,r}return Bc(t,e),t}(vd);function Ed(e,t,n){return void 0===n&&(n={}),t.reduce((function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t}),{})}var Od={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},onError:function(e){0}};function Td(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Cd(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function Ad(e,t,n,r){var o,i=e&&e[t];if(i&&(o=i[n]),o)return o;r(new yd("No "+t+" format named: "+n))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xd=function(e,t){return(xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var Pd=function(){return(Pd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Dd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function Rd(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}Object.create;function jd(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function _d(e){jd(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var kd=Pd(Pd({},Od),{textComponent:E.Fragment});function Md(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var i=0;i<o;i++){var a=n[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var Nd=E.createContext(null),Ld=Nd.Consumer,Ud=Nd.Provider,Fd=Nd;function $d(e,t){var n,r=t||{},o=r.intlPropName,i=void 0===o?"intl":o,a=r.forwardRef,s=void 0!==a&&a,u=r.enforceContext,c=void 0===u||u,l=function(t){return E.createElement(Ld,null,(function(n){var r;c&&_d(n);var o=((r={})[i]=n,r);return E.createElement(e,Pd({},t,o,{ref:s?t.forwardedRef:null}))}))};return l.displayName="injectIntl("+(((n=e).displayName||n.name||"Component")+")"),l.WrappedComponent=e,s?N()(E.forwardRef((function(e,t){return E.createElement(l,Pd({},e,{forwardedRef:t}))})),e):N()(l,e)}function Vd(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=Gc({timeZone:t},e[r]),n}),{})}function Bd(e,t){return Object.keys(Gc(Gc({},e),t)).reduce((function(n,r){return n[r]=Gc(Gc({},e[r]||{}),t[r]||{}),n}),{})}function Gd(e,t){if(!t)return e;var n=md.formats;return Gc(Gc(Gc({},n),e),{date:Bd(Vd(n.date,t),Vd(e.date||{},t)),time:Bd(Vd(n.time,t),Vd(e.time||{},t))})}function Wd(e,t,n,r,o){var i=e.locale,a=e.formats,s=e.messages,u=e.defaultLocale,c=e.defaultFormats,l=e.onError,d=e.timeZone,f=e.defaultRichTextElements;void 0===n&&(n={id:""});var p=n.id,h=n.defaultMessage;jd(!!p,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var g=String(p),m=s&&Object.prototype.hasOwnProperty.call(s,g)&&s[g];if(Array.isArray(m)&&1===m.length&&m[0].type===Kc.literal)return m[0].value;if(!r&&m&&"string"==typeof m&&!f)return m.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Gc(Gc({},f),r||{}),a=Gd(a,d),c=Gd(c,d),!m){if((!h||i&&i.toLowerCase()!==u.toLowerCase())&&l(new Id(n,i)),h)try{return t.getMessageFormat(h,u,c,o).format(r)}catch(e){return l(new wd('Error formatting default message for: "'+g+'", rendering default message verbatim',i,n,e)),"string"==typeof h?h:g}return g}try{return t.getMessageFormat(m,i,a,Gc({formatters:t},o||{})).format(r)}catch(e){l(new wd('Error formatting message: "'+g+'", using '+(h?"default message":"id")+" as fallback.",i,n,e))}if(h)try{return t.getMessageFormat(h,u,c,o).format(r)}catch(e){l(new wd('Error formatting the default message for: "'+g+'", rendering message verbatim',i,n,e))}return"string"==typeof m?m:"string"==typeof h?h:g}var qd=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay"];function zd(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var a=n.format,s=a&&Ad(o,"number",a,i)||{};return t(r,Ed(n,qd,s))}function Hd(e,t,n,r){void 0===r&&(r={});try{return zd(e,t,r).format(n)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting number.",t))}return String(n)}function Jd(e,t,n,r){void 0===r&&(r={});try{return zd(e,t,r).formatToParts(n)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting number.",t))}return[]}var Yd=["numeric","style"];function Xd(e,t,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new sd('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',rd.MISSING_INTL_API));try{return function(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var a=n.format,s=!!a&&Ad(o,"relative",a,i)||{};return t(r,Ed(n,Yd,s))}(e,t,o).format(n,r)}catch(t){e.onError(new wd("Error formatting relative time.",t))}return String(n)}var Kd=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function Qd(e,t,n,r){var o=e.locale,i=e.formats,a=e.onError,s=e.timeZone;void 0===r&&(r={});var u=r.format,c=Gc(Gc({},s&&{timeZone:s}),u&&Ad(i,t,u,a)),l=Ed(r,Kd,c);return"time"!==t||l.hour||l.minute||l.second||l.timeStyle||l.dateStyle||(l=Gc(Gc({},l),{hour:"numeric",minute:"numeric"})),n(o,l)}function Zd(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Qd(e,"date",t,a).format(s)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting date.",t))}return String(s)}function ef(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Qd(e,"time",t,a).format(s)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting time.",t))}return String(s)}function tf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=n[2],s=void 0===a?{}:a,u=e.timeZone,c=e.locale,l=e.onError,d=Ed(s,Kd,u?{timeZone:u}:{});try{return t(c,d).formatRange(o,i)}catch(e){l(new vd(gd.FORMAT_ERROR,"Error formatting date time range.",e))}return String(o)}function nf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Qd(e,"date",t,a).formatToParts(s)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting date.",t))}return[]}function rf(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Qd(e,"time",t,a).formatToParts(s)}catch(t){e.onError(new vd(gd.FORMAT_ERROR,"Error formatting time.",t))}return[]}var of=["localeMatcher","type"];function af(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.PluralRules||i(new sd('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',rd.MISSING_INTL_API));var a=Ed(r,of);try{return t(o,a).select(n)}catch(e){i(new wd("Error formatting plural.",e))}return"other"}var sf=["localeMatcher","type","style"],uf=Date.now();function cf(e,t,n,r){void 0===r&&(r={});var o=lf(e,t,n,r).reduce((function(e,t){var n=t.value;return"string"!=typeof n?e.push(n):"string"==typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e}),[]);return 1===o.length?o[0]:o}function lf(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.ListFormat||i(new sd('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',rd.MISSING_INTL_API));var a=Ed(r,sf);try{var s={},u=n.map((function(e,t){if("object"==typeof e){var n=function(e){return uf+"_"+e+"_"+uf}(t);return s[n]=e,n}return String(e)}));return t(o,a).formatToParts(u).map((function(e){return"literal"===e.type?e:Gc(Gc({},e),{value:s[e.value]||e.value})}))}catch(e){i(new vd(gd.FORMAT_ERROR,"Error formatting list.",e))}return n}var df=["localeMatcher","style","type","fallback"];function ff(e,t,n,r){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new sd('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',rd.MISSING_INTL_API));var a=Ed(r,df);try{return t(o,a).of(n)}catch(e){i(new vd(gd.FORMAT_ERROR,"Error formatting display name.",e))}}function pf(e){var t;e.defaultRichTextElements&&"string"==typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function hf(e,t){var n=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,o=Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Wc([void 0],t)))}),{cache:Cd(e.dateTime),strategy:id.variadic}),i=Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Wc([void 0],t)))}),{cache:Cd(e.number),strategy:id.variadic}),a=Xl((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Wc([void 0],t)))}),{cache:Cd(e.pluralRules),strategy:id.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:Xl((function(e,t,n,r){return new md(e,t,n,Gc({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:a}},r||{}))}),{cache:Cd(e.message),strategy:id.variadic}),getRelativeTimeFormat:Xl((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,Wc([void 0],e)))}),{cache:Cd(e.relativeTime),strategy:id.variadic}),getPluralRules:a,getListFormat:Xl((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,Wc([void 0],e)))}),{cache:Cd(e.list),strategy:id.variadic}),getDisplayNames:Xl((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,Wc([void 0],e)))}),{cache:Cd(e.displayNames),strategy:id.variadic})}}(t),r=Gc(Gc({},Od),e),o=r.locale,i=r.defaultLocale,a=r.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&a?a(new Sd('Missing locale data for locale: "'+o+'" in Intl.NumberFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&a&&a(new Sd('Missing locale data for locale: "'+o+'" in Intl.DateTimeFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):(a&&a(new bd('"locale" was not configured, using "'+i+'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details')),r.locale=r.defaultLocale||"en"),pf(r),Gc(Gc({},r),{formatters:n,formatNumber:Hd.bind(null,r,n.getNumberFormat),formatNumberToParts:Jd.bind(null,r,n.getNumberFormat),formatRelativeTime:Xd.bind(null,r,n.getRelativeTimeFormat),formatDate:Zd.bind(null,r,n.getDateTimeFormat),formatDateToParts:nf.bind(null,r,n.getDateTimeFormat),formatTime:ef.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:tf.bind(null,r,n.getDateTimeFormat),formatTimeToParts:rf.bind(null,r,n.getDateTimeFormat),formatPlural:af.bind(null,r,n.getPluralRules),formatMessage:Wd.bind(null,r,n),formatList:cf.bind(null,r,n.getListFormat),formatListToParts:lf.bind(null,r,n.getListFormat),formatDisplayName:ff.bind(null,r,n.getDisplayNames)})}function gf(e){return{locale:e.locale,timeZone:e.timeZone,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function mf(e){return e?Object.keys(e).reduce((function(t,n){var r,o=e[n];return t[n]=dd(o)?(r=o,function(e){return r(E.Children.toArray(e))}):o,t}),{}):e}var vf=function(e,t,n,r){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var a=mf(r),s=Wd.apply(void 0,Rd([e,t,n,a],o));return Array.isArray(s)?E.Children.toArray(s):s},yf=function(e,t){var n=e.defaultRichTextElements,r=Dd(e,["defaultRichTextElements"]),o=mf(n),i=hf(Pd(Pd(Pd({},kd),r),{defaultRichTextElements:o}),t);return Pd(Pd({},i),{formatMessage:vf.bind(null,{locale:i.locale,timeZone:i.timeZone,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o},i.formatters)})},bf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:yf(gf(t.props),t.cache),prevConfig:gf(t.props)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}xd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,o=gf(e);return Md(n,o)?null:{intl:yf(o,r),prevConfig:o}},t.prototype.render=function(){return _d(this.state.intl),E.createElement(Ud,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=kd,t}(E.PureComponent),Sf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function wf(e,t){const n=Ef(e=e.toLowerCase(),t);if(n){if(n!==(t&&t[0]))return n}}function If(e){if(!e)return;const t=["language","browserLanguage","systemLanguage","userLanguage"];let n,r;if(Array.isArray(e.languages)&&e.languages.length>0&&(r=e.languages[0],r&&r.length))return r;for(n=0;n<t.length;n++)if(r=e[t[n]],r&&r.length)return r}function Ef(e,t=[]){if(e)return Df(e,t)}function Of(e,t){return e.split("-")[0]===t.split("-")[0]}function Tf(e,t){return Sf(this,void 0,void 0,(function*(){return yield vp(`${e}/${t}`)}))}function Cf(e){let t=!1;const n=["ar","he"];for(let r=0;r<n.length;r++)Of(n[r],e)&&(t=!0);return t}const Af={};function xf(e="_jimu",t="runtime"){var n,r,o,i,a,s,u,c;const l=`${e}-${t}`;if(Af[l])return Af[l];const d={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},f=mg().getState();if(!f)return null;let p;if("_jimu"===e)p=yf({locale:f.appContext.locale,defaultLocale:f.appContext.locale,messages:f.appI18nMessages},d);else if("runtime"===t){const t=window.jimuConfig.isBuilder?null===(n=f.appStateInBuilder)||void 0===n?void 0:n.appConfig:f.appConfig,i=null===(o=null===(r=null==t?void 0:t.widgets)||void 0===r?void 0:r[e])||void 0===o?void 0:o.manifest.i18nMessages,a=Object.assign({},i,f.appI18nMessages);p=yf({locale:f.appContext.locale,defaultLocale:f.appContext.locale,messages:a},d)}else{let t;if(window.jimuConfig.isBuilder){const n=null===(u=null===(s=null===(a=null===(i=f.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===a?void 0:a.widgets)||void 0===s?void 0:s[e])||void 0===u?void 0:u.manifest.name;t=null===(c=f.builder.widgetSettingI18nMessages)||void 0===c?void 0:c[n]}else t={};const n=Object.assign({},t,f.appI18nMessages);p=yf({locale:f.appContext.locale,defaultLocale:f.appContext.locale,messages:n},d)}return Af[l]=p,p}function Pf(e){return Df(e,["ar","en","he","ja","ko","es-mx","th","zh","it-ch","de-ch"])?".":","}function Df(e,t=[]){let n;if(e=e.toLowerCase(),t.includes(e))n=e;else{const r=e.split("-")[0];if(t.includes(r))n=r;else{const r=t.find(t=>t.split("-")[0]===e);r&&(n=r)}}return n}var Rf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function jf(e,t){return Uf(e,t)}function _f(e,t){return Uf(e,t)}function kf(){return"undefined"!=typeof window&&Boolean("ontouchstart"in window||window.navigator&&window.navigator.maxTouchPoints>0||window.navigator&&window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch)}function Mf(e){return e.width<=hc[0]?la.Small:e.width<=hc[1]?la.Medium:la.Large}function Nf(e,t){let n=Ks(e,"forBuilderAttributes.viewPortSize."+t);return n||(n=Ks(yc[t],"[1]")),n||{width:0,height:0}}function Lf(e){return e===la.Small?hc[0]:e===la.Medium?hc[1]:1e5}function Uf(e,t){switch(e){case"opened":switch(t){case"opened":return null;case"closed":return"onOpen";case"active":return"onDeActive"}case"closed":switch(t){case"opened":return"onClose";case"closed":return null;case"active":return["onDeActive","onClose"]}case"active":switch(t){case"opened":return"onDeActive";case"closed":return["onOpen","onActive"];case"active":return null}}}function Ff(e,t){return Rf(this,void 0,void 0,(function*(){return yield new Promise(n=>{let r;r=t?document.getElementById(t):document.getElementsByTagName("head")[0];const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),o.onload=()=>{n(null)},r.appendChild(o)})}))}function $f(e,t){t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{e.prototype[n]=t.prototype[n]})})}function Vf(e,t){return e.length===t.length&&(e=e.sort((e,t)=>e>t?-1:1),t=t.sort((e,t)=>e>t?-1:1),pc(e,t))}const Bf=/([A-Z])/g,Gf=/^ms-/;function Wf(e){return e.replace(Bf,"-$1").toLowerCase().replace(Gf,"-ms-")}function qf(e){{let t="";const n=";";for(const r in e){if(!e.hasOwnProperty(r))continue;const o=e[r];null!=o&&(t?t+=n+Wf(r)+":"+o:t=Wf(r)+":"+o)}return t||""}}function zf(e,t=1e3,n=100){return Rf(this,void 0,void 0,(function*(){const r=(new Date).getDate();return new Promise((o,i)=>{!function o(i){const a=(new Date).getDate(),s=e();if(s)i(null,s);else{if(r+t>=a)return void i("Timeout",null);setTimeout(()=>{o(i)},n)}}((e,t)=>{e?i(e):o(t)})})}))}function Hf(){return window.jimuConfig.isBuilder?"exb-"+(mg().getState().appStateInBuilder.appId||mg().getState().appStateInBuilder.appPath):"exb-"+(mg().getState().appId||mg().getState().appPath)}const Jf=()=>(65536*(1+Math.random())|0).toString(16).substring(1),Yf=()=>Jf()+Jf()+"_"+Jf()+"_"+Jf()+"_"+Jf()+"_"+Jf()+Jf()+Jf(),Xf=e=>e.toString().includes(".")?e.toString().split(".")[1].length:0,Kf=(e,t=be([]))=>{const n=new RegExp(`^${e}\\_(\\d+)$`);let r=-1;return t.forEach(e=>{const t=e.match(n);t&&(r=Math.max(r,parseInt(t[1],10)))}),`${e}_${r+1}`};function Qf(e,t,n){const r=/\$\{\w*\}/g;for(const o in e)if("string"==typeof e[o]){const i=e[o].match(r);if(i&&i.length>0){let r=e[o];i.forEach(e=>{const o=e.substring(2,e.length-1);if("appResourceUrl"!==o){const i=t.formatMessage({id:o,defaultMessage:n&&n[o]});r=r.replace(e,i)}}),e[o]=r}}else"object"==typeof e[o]&&Qf(e[o],t,n);return e}function Zf(){return Rf(this,void 0,void 0,(function*(){return yield Promise.resolve(!1)}))}function ep(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"}const tp=e=>{if(null==e?void 0:e.format){if(e.type===da.Date)return Nc(e.format.dateFormat);if(e.type===da.Number){const t=e.format.places,n=e.format.digitSeparator,r={style:"decimal",notation:"standard"};return"number"==typeof t&&(r.minimumFractionDigits=t,r.maximumFractionDigits=t),"boolean"==typeof n&&(r.useGrouping=n),r}}};function np(e){const t={props:null,result:null};return function(n){if("object"!=typeof n)return console.error("Memorize object param only."),n;if(Object.keys(n).find(e=>{var r;return n[e]!==(null===(r=t.props)||void 0===r?void 0:r[e])})){var r=e.call(this,n);return t.props=n,t.result=r,r}return t.result}}function rp(){try{return Object.keys(localStorage)}catch(e){return console.error("Read Local storage keys error.",e),[]}}function op(e){try{return localStorage.getItem(e)}catch(e){return console.error("Read Local storage error.",e),null}}function ip(e,t){try{localStorage.setItem(e,t)}catch(e){console.error("Set Local storage error.",e)}}function ap(){try{return Object.keys(sessionStorage)}catch(e){return console.error("Read Session storage keys error.",e),[]}}function sp(e){try{return sessionStorage.getItem(e)}catch(e){return console.error("Read session storage error.",e),null}}function up(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("Set session storage error.",e)}}function cp(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove from Local storage error.",e)}}function lp(e){try{sessionStorage.removeItem(e)}catch(e){console.error("Remove from session storage error.",e)}}function dp(e){return[e<0?"-":"",xf().formatNumber(Math.abs(e))]}function fp(e){var t,n;const r=mg().getState().appContext.locale,o=null!==(n=null===(t=mg().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==n&&n,i=parseFloat(e),[a,s]=dp(i);return o?"he"===(null==r?void 0:r.toLowerCase())?`${a}${s}%`:`${a}%${s}`:"tr"===(null==r?void 0:r.toLowerCase())?`${a}%${s}`:`${a}${s}%`}function pp(e){var t,n;const r=parseFloat(e),o=null!==(n=null===(t=mg().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==n&&n,[i,a]=dp(r);return o?`${i}px${a}`:`${i}${a}px`}var hp,gp=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function mp(e){const t=window.SystemJS.get(bp(e));return t?t.__useDefault?t.default:t:null}function vp(e,t){return gp(this,void 0,void 0,(function*(){const n=(window._cachedModules||{})[e],r=!!t&&!!n&&t.every(e=>e in n);return Promise.resolve(r?n:window.SystemJS.import(e)).then(e=>e=e.__useDefault?e.default:e).catch(e=>{console.error("Load module error.",e),Zf().then(e=>{e&&mg().dispatch(ev(!0))})})}))}function yp(e){return gp(this,void 0,void 0,(function*(){return yield Promise.all(e.map(e=>gp(this,void 0,void 0,(function*(){return yield vp(e)}))))}))}function bp(e){return window.SystemJS.resolve(e)}function Sp(e){const t=bp(e);return/^file:/.test(t)?t:t.substring(`${window.location.protocol}//${window.location.host}`.length,t.length)}function wp(){return mp("jimu-for-builder")}function Ip(e){window.SystemJS.delete(bp(e))}!function(e){e.AppConfigProcessor="APP_CONFIG_PROCESSOR",e.WidgetClassWrapper="WIDGET_CLASS_WRAPPER",e.AppConfigService="APP_CONFIG_SERVICE",e.ReduxStore="REDUX_STORE",e.DependencyDefine="DEPENDENCY_DEFINE",e.DataSourceFactoryUri="DATA_SOURCE_FACTORY_URI",e.ContextTool="CONTEXT_TOOL",e.LayoutTransformer="LAYOUT_TRANSFORMER"}(hp||(hp={}));const Ep=[hp.ReduxStore,hp.DataSourceFactoryUri,hp.DependencyDefine,hp.ContextTool,hp.LayoutTransformer];class Op{}var Tp,Cp,Ap=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class xp{constructor(){this.extensions={},this.extensionClasses={}}static getInstance(){return xp.instance||(xp.instance=new xp,window._extensionManager=xp.instance),xp.instance}getExtensions(e){return this.extensions[e]||[]}getAllExtensions(){const e=[];return Object.keys(this.extensions).forEach(t=>{this.extensions[t].forEach(t=>{e.push(t)})}),e}registerExtension(e){if(this.getExtensionById(e.extension.id))console.log(`Extension ${e.extension.id} has been registered.`);else{if(this.extensions[e.epName]){if(!Ep.includes(e.epName))return;this.extensions[e.epName].push(e.extension),this.extensions[e.epName]=this.extensions[e.epName].sort((e,t)=>e.index-t.index)}else this.extensions[e.epName]=[e.extension];e.epName===hp.ReduxStore&&mg().dispatch(bm(e.extension.id))}}destryAllExtensions(){Object.keys(this.extensions).forEach(e=>{this.extensions[e].forEach(e=>{delete this.extensionClasses[e.name],e.destroy&&e.destroy()})}),this.extensions={}}destryWidgetExtensions(e){Object.keys(this.extensions).forEach(t=>{this.extensions[t].forEach(t=>{t.widgetId===e&&(delete this.extensionClasses[t.name],t.destroy&&t.destroy())}),this.extensions[t]=this.extensions[t].filter(t=>t.widgetId!==e)})}registerWidgetExtensions(e){return Ap(this,void 0,void 0,(function*(){const t=[];return e.manifest.extensions&&e.manifest.extensions.forEach(n=>{(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||n.point!==hp.ContextTool)&&t.push(this.registerWidgetExtension(e,n))}),Promise.all(t)}))}registerWidgetExtension(e,t){return Ap(this,void 0,void 0,(function*(){if(this.extensions[t.point]){if(!Ep.includes(t.point))return Promise.resolve();if(this.extensions[t.point].filter(n=>n.name===`${e.manifest.name}-${t.name}`&&n.widgetId===e.id).length>0)return Promise.resolve()}return this.loadWidgetExtensionClass(e,t).then(n=>{const r=new n;r.name=`${e.manifest.name}-${t.name}`,r.widgetId=e.id,r.id=`${r.widgetId}-${t.name}`,r.label=e.manifest.i18nMessages[`_ext_${t.name}_label`]||t.label,this.registerExtension({epName:t.point,extension:r})}).catch(t=>Ap(this,void 0,void 0,(function*(){return console.error("Register widget extension error.",e.label),yield Promise.resolve()})))}))}loadWidgetExtensionClass(e,t){return Ap(this,void 0,void 0,(function*(){const n=`${e.manifest.name}-${t.name}`;if(this.extensionClasses[n])return yield this.extensionClasses[n];const r=e.uri+"dist/"+t.uri;return this.extensionClasses[n]=vp(r,["default"]).then(e=>e.default),this.extensionClasses[n]}))}getExtensionById(e){const t=this.getAllExtensions();for(const n in t)if(t[n].id===e)return t[n]}}function Pp(e){let t="",n=e||"";return n=Mp(n),n&&(t=n+"/sharing/rest/portals/self"),t}function Dp(){const e=`${window.location.protocol}//${window.location.host}${function(){const e=window.location.href.split("?")[0];let t=e.indexOf("/home/");t<0&&(t=e.indexOf("/apps/"));let n=e.substring(e.indexOf(window.location.host)+window.location.host.length+1,t);"/"!==n&&(n="/"+n+"/");return n}()}`;return e.substr(0,e.length-1)}function Rp(e){return/\/$/.test(e)?e+"sharing/rest/":e+"/sharing/rest/"}function jp(e){const t=/\/$/.test(e)?"/sharing/rest/":"/sharing/rest";return e.substr(0,e.length-t.length)}function _p(e,t){const n=/^http(s?):\/\//gi,r=/^\/\//gi;return(e=Mp(e).toLowerCase().replace(n,"").replace(r,""))===(t=Mp(t).toLowerCase().replace(n,"").replace(r,""))}function kp(e){return zh(e).includes(".arcgis.com")}function Mp(e){const t=zh(e);return""===t?"":kp(t)?Wh(t,Ea.Https):Wh(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),Ea.Https)}function Np(e){let t="";const n=Mp(e);return n&&(t=n+"/sharing/rest/content/items"),t}function Lp(e,t){let n="";const r=Np(e);return r&&t&&(n=r+"/"+t),n}function Up(e){let t="";const n=Mp(e);return n&&(t=n+"/sharing/rest/community/users"),t}function Fp(e,t){let n="";const r=Up(e);return e&&t&&(n=r+"/"+t),n}function $p(e){let t="";return e&&(t=(e=Mp(e))+"/sharing/rest/content"),t}function Vp(e,t,n){let r="",o="";return e&&t&&(r=$p(e),o=n?r+"/users/"+t+"/"+n:r+"/users/"+t),o}function Bp(e,t,n){let r="",o="";return e&&t&&(r=Vp(e,t,n),o=r+"/items"),o}function Gp(e,t,n,r){let o="",i="";return e&&t&&(o=Bp(e,t,r),i=o+"/"+n+"/share"),i}function Wp(e){let t="";const n=Mp(e);return n&&(t=n+"/home/index.html"),t}function qp(e,t){let n="";const r=Mp(e);return r&&(n=r+"/home/webmap/viewer.html",n+=t?"?webmap="+t:"?useExisting=1"),n}function zp(e){const t=window.location.protocol,n=Gh(e);return Gh(e)?t!==n&&t===Ea.Https?Wh(e,Ea.Https):e:Wh(e,t)}function Hp(e){return e+"/sharing/proxy"}function Jp(e){if(!e)return e;if(kp(e)){const t=zh(e),n=Gh(e),r=t.split("."),o=r[0];r.splice(0,1);const i=r.join(".");let a;return"devext"===o||"mapsdevext.arcgis.com"===i?a="devext.arcgis.com":"qaext"===o||"mapsqa.arcgis.com"===i?a="qaext.arcgis.com":"www"!==o&&"maps.arcgis.com"!==i||(a="www.arcgis.com"),a=a&&`${n?n+"//":""}${a}`,a}return e}!function(e){e.Unkown="UNKNOWN",e.Widget="WIDGET",e.Section="SECTION",e.ScreenGroup="SCREEN_GROUP"}(Tp||(Tp={})),function(e){e.FixedLayout="FIXED",e.FlowLayout="FLOW",e.GridLayout="GRID",e.ColumnLayout="COLUMN",e.RowLayout="ROW"}(Cp||(Cp={}));var Yp,Xp,Kp,Qp,Zp,eh,th,nh,rh,oh,ih=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function ah(){if(window.jimuConfig.isOutOfExb)return"./resources";{let e=null;e=window.jimuConfig.isBuilder?mg().getState().appStateInBuilder:mg().getState();const t=e&&e.appId;return window.jimuConfig.isDevEdition?window.location.origin+"/apps/"+t+"/resources":Jp(mg().getState().portalUrl)+"/sharing/rest/content/items/"+t+"/resources"}}function sh(e,t){return ih(this,void 0,void 0,(function*(){const n=ah(),r=new RegExp("^"+n),o=new RegExp("^\\$\\{appResourceUrl\\}+(.)");return ch(e,{matchFunction:function(e){return o.test(e)||r.test(e)},matchHandle:function(e){var r=e.obj,o=e.key;let i=null;i=t?e.value+"?token="+t:e.value,i=i.replace("${appResourceUrl}",n),r=e.obj,o=e.key,"number"==typeof e.i?r[o][e.i]=i:r[o]=i}})}))}function uh(e){const t=ah(),n=new RegExp("^"+t),r=new RegExp("^(.)+?token=");return ch(e,{matchFunction:function(e){return r.test(e)||n.test(e)},matchHandle:function(e){const n=e.obj,r=e.key;let o=e.value.split("?")[0];o=o.replace(t,"${appResourceUrl}"),"number"==typeof e.i?n[r][e.i]=o:n[r]=o}}),e}function ch(e,t){return ih(this,void 0,void 0,(function*(){const n=[],r=[];let o;function i(e){const t=e.obj,n=e.key,r={obj:t,key:n};return"number"==typeof e.i?(r.i=e.i,r.value=t[n][e.i]):r.value=t[n],r}function a(e){for(const t in e)"object"==typeof e[t]?Array.isArray(e[t])?u(e,t):a(e[t]):"string"==typeof e[t]&&s(e,t)}function s(e,a,s){"number"==typeof s?t.matchFunction(e[a][s])&&(o=t.matchHandle(i({obj:e,key:a,i:s})),o&&"function"==typeof o.then?r.push(o):n.push(o),n.push(o)):t.matchFunction(e[a])&&(o=t.matchHandle(i({obj:e,key:a})),o&&"function"==typeof o.then?r.push(o):n.push(o),n.push(o))}function u(e,t){for(let n=0;n<e[t].length;n++)"string"==typeof e[t][n]?s(e,t,n):"object"==typeof e[t][n]&&a(e[t][n])}return a(e),r.length>0?Promise.all(r).then(()=>ih(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))).catch((function(e){return ih(this,void 0,void 0,(function*(){return yield Promise.reject(null)}))})):yield Promise.resolve(e)}))}function lh(e){const t={};return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?(t.isRemote=!0,t.folderUrl=e):(t.isRemote=!1,t.folderUrl=`${window.location.protocol}//${window.location.host}${Nh()}${e}`),t}function dh(e){const t=be(e).asMutable({deep:!0});void 0===e.properties&&(t.properties={});["hasVersionManager","supportInlineEditing","supportRepeat","hasBuilderSupportModule","hasEmbeddedLayout","lockChildren","flipIcon","coverLayoutBackground","canCrossLayoutBoundary","needActiveState","canConsumeDataAction"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!1)}));return["hasMainClass","hasConfig","hasSettingPage","hasConfigInSettingPage","passDataSourceToChildren","deactivateOtherWidgets","supportAutoSize"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!0)})),t}function fh(e,t){t.icon=t.icon?t.icon:t.context.folderUrl+"icon.svg",t.label=t.label?t.label:gh(e,"widget",t.manifest?t.manifest.i18nMessages._widgetLabel||t.manifest.label||t.manifest.name:"")}function ph(e){e.widgets&&Object.keys(e.widgets).forEach(t=>{const n=e.widgets[t];n.layouts&&Object.keys(n.layouts).forEach(t=>{Object.keys(n.layouts[t]).forEach(r=>{var o;const i=n.layouts[t][r];if(e.layouts[i]&&!e.layouts[i].label){const r=null===(o=n.manifest.layouts)||void 0===o?void 0:o.find(e=>e.name===t);e.layouts[i].label=n.manifest.i18nMessages[`_layout_${t}_label`]||(null==r?void 0:r.label)||(null==r?void 0:r.name)}})})})}function hh(e,t){let n=0;const r="y"===t.charAt(t.length-1)?t.slice(0,t.length-1)+"ies":t+"s";if(!e[r])return`${t}_${n+1}`;Object.keys(e[r]).forEach(e=>{const r=e.substring((t+"_").length,e.length);/^\d+$/.test(r)&&(n=Math.max(n,parseInt(r)))});return`${t}_${n+1}`}function gh(e,t,n){let r=0;const o=n.lastIndexOf(" "),i=n.substr(o+1);let a;if(/^\d+$/.test(i)?(r=Math.max(parseInt(i),r),a=n.substr(0,o)):a=n,!e[t+"s"])return`${n} ${r+1}`;Object.keys(e[t+"s"]).filter(n=>{const r=e[t+"s"][n].label;return r&&new RegExp("^"+a).test(r)}).forEach(n=>{const o=e[t+"s"][n].label,i=o.substring((a+" ").length,o.length);/^\d+$/.test(i)&&(r=Math.max(r,parseInt(i)))});return`${a} ${r+1}`}function mh(e){const t=[];return Object.keys(e.widgets).forEach(n=>{t.push(e.widgets[n])}),t}function vh(e,t,n){let r=[];return e.messageConfigs&&Object.entries(e.messageConfigs).forEach(([e,o])=>{r=r.concat(o.actions&&o.actions.filter(e=>e.widgetId===t&&e.actionName===n))}),r}function yh(e,t,n){return e.sections&&Object.keys(e.sections).some(r=>{const o=e.sections[r].views;return(null==o?void 0:o.includes(t))&&(null==o?void 0:o.includes(n))})}function bh(e){(null==e?void 0:e.layouts)&&Object.keys(e.layouts).forEach(t=>{const n=e.layouts[t];return n.content&&Object.keys(n.content).forEach(e=>{if(isNaN(parseInt(e)))return void console.error("Layout item MUST be integer string");n.content[e].id=e}),n.id=t,n})}function Sh(e,t){var n,r,o,i;const a=e.appConfig,s=t,u=Object.keys(a.widgets||{}).filter(e=>!s.widgets[e]);e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.without.apply(e.widgetsRuntimeInfo,u)).set("widgetsState",e.widgetsState.without.apply(e.widgetsState,u)).set("widgetsMutableStateVersion",e.widgetsMutableStateVersion.without.apply(e.widgetsMutableStateVersion,u));Object.keys(s.widgets||{}).filter(e=>!a.widgets[e]).forEach(t=>{const n=s.widgets[t];e.widgetsClassStatus[n.uri]&&(e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0))});Object.keys(a.views).filter(e=>!s.views[e]).forEach(t=>{var n,r,o,i,s,u;const c=Object.keys(a.sections||{}).find(e=>a.sections[e].views.includes(t));(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[c])&&((null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[c].currentViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"currentViewId"],null)),(null===(o=e.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[c].previousViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"previousViewId"],null)),(null===(s=null===(i=e.appRuntimeInfo.sectionNavInfos)||void 0===i?void 0:i[c].visibleViews)||void 0===s?void 0:s.find(e=>e===t))&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",c,"visibleViews"],null===(u=e.appRuntimeInfo.sectionNavInfos)||void 0===u?void 0:u[c].visibleViews.filter(e=>e!==t))))});if(Object.keys(a.sections||{}).filter(e=>!s.sections[e]).forEach(t=>{var n;(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[t])&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos"],e.appRuntimeInfo.sectionNavInfos.without(t)))}),e.appRuntimeInfo.currentPageId&&!s.pages[e.appRuntimeInfo.currentPageId]){const t=Object.keys(s.pages).find(e=>s.pages[e].isDefault);e=e.setIn(["appRuntimeInfo","currentPageId"],t)}if(e.appRuntimeInfo.currentDialogId&&!s.dialogs[e.appRuntimeInfo.currentDialogId]&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],null)),e.appRuntimeInfo.clipboard){const{layoutId:t,layoutItemId:o}=e.appRuntimeInfo.clipboard;(null===(r=null===(n=s.layouts[t])||void 0===n?void 0:n.content)||void 0===r?void 0:r[o])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("clipboard")))}if(e.appRuntimeInfo.selection){const{layoutId:t,layoutItemId:n}=e.appRuntimeInfo.selection;(null===(i=null===(o=s.layouts[t])||void 0===o?void 0:o.content)||void 0===i?void 0:i[n])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("selection")))}return e=e.set("appConfig",s)}function wh(e,t,n,r=!1,o=!1){const i=null==e?void 0:e[t],a=null==e?void 0:e[n];return!(!(null==i?void 0:i.parent)||!(null==a?void 0:a.parent))&&i.parent.some(e=>a.parent.some(t=>(r||!t.isPending)&&(o||e.sizeMode===t.sizeMode)&&t.type===e.type&&t.id===e.id))}function Ih(e,t,n){var r;return null!==(r=e[t])&&void 0!==r?r:e[n]}function Eh(e,t=null){var n,r,o,i;const a={};if(Object.keys(null!==(n=e.pages)&&void 0!==n?n:{}).forEach(n=>{const r=e.pages[n];if(r.layout)if(null!=t){const n=Ih(r.layout,t,e.mainSizeMode);Oh(e,t,a,n,"page",r.id)}else Object.keys(r.layout).forEach(t=>{Oh(e,t,a,r.layout[t],"page",r.id)})}),Object.keys(null!==(r=e.dialogs)&&void 0!==r?r:{}).forEach(n=>{const r=e.dialogs[n];if(null!=t){const n=Ih(r.layout,t,e.mainSizeMode);Oh(e,t,a,n,"dialog",r.id)}else Object.keys(r.layout).forEach(t=>{Oh(e,t,a,r.layout[t],"dialog",r.id)})}),null===(o=e.header)||void 0===o?void 0:o.layout)if(null!=t){const n=Ih(e.header.layout,t,e.mainSizeMode);Oh(e,t,a,n,"header","header")}else Object.keys(e.header.layout).forEach(t=>{Oh(e,t,a,e.header.layout[t],"header","header")});if(null===(i=e.footer)||void 0===i?void 0:i.layout)if(null!=t){const n=Ih(e.footer.layout,t,e.mainSizeMode);Oh(e,t,a,n,"footer","footer")}else Object.keys(e.footer.layout).forEach(t=>{Oh(e,t,a,e.footer.layout[t],"footer","footer")});return a}function Oh(e,t,n,r,o,i){const a=[r];for(;a.length>0;){const r=a.pop(),s=e.layouts[r];s&&s.content&&Object.keys(s.content).forEach(r=>{var u,c,l,d,f,p;const h=s.content[r];if(h.type===Tp.Widget&&null!=h.widgetId){const r=e.widgets[h.widgetId],s=(null===(c=null===(u=r.manifest)||void 0===u?void 0:u.dataActions)||void 0===c?void 0:c.length)>0,g=null!==(f=null===(d=null===(l=r.manifest)||void 0===l?void 0:l.properties)||void 0===d?void 0:d.canConsumeDataAction)&&void 0!==f&&f;if(s||g){const e=null!==(p=h.isPending)&&void 0!==p&&p;if(n[h.widgetId]){n[h.widgetId].parent.find(n=>n.type===o&&n.id===i&&n.isPending===e&&n.sizeMode===t)||n[h.widgetId].parent.push({type:o,id:i,isPending:e,sizeMode:t})}else n[h.widgetId]={parent:[{type:o,id:i,isPending:e,sizeMode:t}]}}r.layouts&&Object.keys(r.layouts).forEach(n=>{const o=Ih(r.layouts[n],t,e.mainSizeMode);a.push(o)})}else if(h.type===Tp.Section&&h.sectionId){e.sections[h.sectionId].views.forEach(n=>{const r=Ih(e.views[n].layout,t,e.mainSizeMode);a.push(r)})}else if(h.type===Tp.ScreenGroup&&h.screenGroupId){e.screenGroups[h.screenGroupId].screens.forEach(n=>{const r=e.screens[n],o=Ih(r.main.layout,t,e.mainSizeMode);if(a.push(o),r.panel){const n=Ih(r.panel.layout,t,e.mainSizeMode);a.push(n)}})}})}}function Th(e){var t;return(null===(t=function(e){var t,n;if(!e)return null;const r=(null===(t=null===window||void 0===window?void 0:window.jimuConfig)||void 0===t?void 0:t.isBuilder)?mg().getState().appStateInBuilder:mg().getState(),o=null===(n=null==r?void 0:r.appConfig)||void 0===n?void 0:n.widgets;return o&&Object.values(o).find(t=>{var n;return null===(n=null==t?void 0:t.outputDataSources)||void 0===n?void 0:n.some(t=>t===e.mainDataSourceId)})||null}(e))||void 0===t?void 0:t.id)||null}function Ch(e){let t=e||"/",n="",r="";const o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));const i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function Ah(e){return/(^http:)|(^https:)|(^\/\/)/.test(e)}function xh(e){const t={},n=e.data_id&&Ph(e.data_id,e=>e.split("+"))||[],r=e.data_index&&Ph(e.data_index,t=>{const n=t.split("+"),r=[];return n.forEach(t=>{const n=t.split("-");if(1===n.length)r.push(parseInt(n[0]));else if(2===n.length){const e=parseInt(n[0]),t=parseInt(n[1]);for(let n=e;n<=t;n++)r.push(n)}else console.error("Bad URL format:",e.data_index)}),r})||[],o=e.data_filter&&Ph(e.data_filter,e=>({where:e}))||[],i=e.data_version&&Ph(e.data_version,e=>e)||[];return n.concat(r,o,i).forEach(e=>{t[e.dsId]={}}),r.forEach(e=>{t[e.dsId].selectionType="index",t[e.dsId].selection=e.data}),n.forEach(e=>{t[e.dsId].selectionType="id",t[e.dsId].selection=e.data}),o.forEach(e=>{t[e.dsId].query=e.data}),i.forEach(e=>{t[e.dsId].gdbVersion=e.data}),t}function Ph(e,t){return e.split(",").map(e=>{const n=e.split(":");return{dsId:n[0],data:t(n[1])}})}function Dh(e,t){if(!e.views)return{};const n=e.views.split(","),r={};return Object.keys(t.sections||{}).forEach(e=>{var o;const i=null===(o=t.sections[e].views)||void 0===o?void 0:o.find(e=>n.includes(e));i&&(r[e]={currentViewId:i})}),r}function Rh(e){if(e||(e=window.location),window.jimuConfig.useStructuralUrl)return jh(e.pathname);{const t=ye.parse(e.search);return{appId:t.id,pageId:t.page}}}function jh(e=window.location.pathname){const t=e.substr(window.jimuConfig.rootPath.length),n={pageId:null,appId:null},r=t.split("/").filter(e=>e);return""===t?n:1===r.length?(t.includes(".")||"page"===r[0]||(n.appId=r[0]),n):2===r.length?/^page\/page\//.test(t)?(n.pageId="page",n):/^page/.test(t)?(n.pageId=r[1],n):(n.appId=r[0],n):r.length>=3?(n.appId=r[0],n.pageId=r[2],n):(console.log("URL pattern is not correct.",e),n)}function _h(e){if(window.jimuConfig.useStructuralUrl){const t=jh();let n;return n=t.appId?`${window.jimuConfig.rootPath}${t.appId}/page/${e}/`:`${window.jimuConfig.rootPath}page/${e}/`,{path:n,qo:null}}return{path:window.jimuConfig.rootPath,qo:{page:e}}}function kh(e,t,n){e===Oc&&(e=mg().getState().appRuntimeInfo.currentPageId);const r=_h(e);let o,i;return o=t&&r.qo?Object.assign({},t,r.qo):t||r.qo,i=o&&!pc(o,{})?`${r.path}?${ye.stringify(o)}`:r.path,n&&(i=`${i}#${n}`),i}function Mh(e){if(/\/$/.test(e))return e;if(!([".js",".css",".scss",".html"].filter(t=>new RegExp(t+"$").test(e)).length>0))return e;const t=e.split("/");return t.pop(),t.join("/")}function Nh(){let e;return e=window.jimuConfig.isOutOfExb||window.jimuConfig.rootPath===window.jimuConfig.mountPath?window.jimuConfig.rootPath:window.jimuConfig.rootPath+"../",window.jimuConfig.buildNumber?e+"cdn/"+window.jimuConfig.buildNumber+"/":e}function Lh(){return`${window.location.protocol}//${window.location.host}${Nh()}`}function Uh(e,t){const n=Ch(t);return"/"===n.pathname.charAt(0)?n:""===n.pathname?(n.pathname=e.pathname,n):"."===n.pathname.charAt(0)?(n.pathname=e.pathname+"/"+n.pathname.substr(2),n):(n.pathname=e.pathname+"/"+n.pathname,n)}function Fh(e){const t=e.pathname,n=e.search,r=e.hash;let o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function $h(e,t,n=window.location,r=!1){var o;if("string"==typeof e)return Ah(e)?e:/^www./.test(e)?"//"+e:Fh(Uh(n,e));if(!e.linkType)return Fh(e);{const i=e.linkType,a=e;let s,u,c=t;const l=mg().getState().appConfig;switch(i){case ma.Page:case ma.Block:case ma.Screen:t=r?t:null==t?void 0:t.without("dlg");const e=(i===ma.Block||i===ma.Screen)&&a.value;return u=i===ma.Page?a.value:Oc,kh(u,t,e);case ma.Dialog:(null===(o=l.dialogs[a.value])||void 0===o?void 0:o.mode)===nh.Fixed&&(c=c?c.set("dlg",a.value):{dlg:a.value}),s=Uh(n,"?"+ye.stringify(c));break;case ma.View:u=a.value.split(",")[0];const d=a.value.split(",").slice(1);if(null==c?void 0:c.views){let e=c.views.split(",");d.forEach(t=>{e=e.filter(e=>!yh(l,t,e)),e.push(t)}),c=c.set("views",e.join(","))}else c=c?c.set("views",d.join(",")):{views:d.join(",")};return kh(u,c);case ma.WebAddress:const f=a.value;if(Ah(f))return f;if(/^www./.test(f))return"//"+f;case ma.None:case ma.PageTop:return null;default:console.error("Unknown type:",i)}if(s)return Fh(s)}}function Vh(e){if(!e)return{linkType:ma.None};if(/^http/.test(e))return{linkType:ma.WebAddress,value:e};const t=Ch(e),n=Rh(t).pageId,r=ye.parse(t.search);return r.views?{linkType:ma.View,value:`${n},${r.views}`}:r.dlg?{linkType:ma.Dialog,value:r.dlg}:{linkType:ma.Page,value:n}}function Bh(e,t,n){if(!n)return e;const r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n}function Gh(e){let t;return 0===(e=e.toLowerCase()).indexOf("https://")?t="https:":0===e.indexOf("http://")&&(t="http:"),t}function Wh(e,t){return Gh(e)?e.replace(/^https?:\/\//,t+"//"):`${t}//${e}`}function qh(e){return e.replace(/^https?:\/\//,"")}function zh(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0].toLocaleLowerCase()}function Hh(e){return(e=(e||"").trim()).split("?")[0]}function Jh(e,t,n){const r=(e=(e||"").trim()).indexOf("#");let o="";return r>-1&&(o=e.substring(r),e=e.substring(0,r)),e.includes("?")?e+=`&${t}=${n}${o}`:e+=`?${t}=${n}${o}`,e}function Yh(e){return new URL(e).href}function Xh(e){const{appId:t,isTemplate:n,isArcGisOnlineTemplate:r,isPortalRequest:o,isDraft:i,defaultTemplateName:a}=e,s=mg().getState().portalUrl,u=n?"template":"experience",c=window.jimuConfig.isDevEdition&&o,l=kp(s),d=c&&l;let f,p="";return i&&(p=window.jimuConfig.useStructuralUrl?"?draft=true":"&draft=true"),f=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${u}/${t}/${p}`:`${window.jimuConfig.mountPath}${u}/?id=${t}${p}`,(r||d)&&(f=`${Kh()}/${u}/${t}/`),c&&!d&&(f=`${s}/apps/experiencebuilder/${u}?id=${t}`),a&&(f=`${window.jimuConfig.mountPath}template/?config=${Nh()}templates/${a}.json`),f}function Kh(){let e;const t=mg().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://experiencedev.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://experienceqa.arcgis.com":"https://experience.arcgis.com",e}function Qh(){let e;const t=mg().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://devext.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://qaext.arcgis.com":"https://www.arcgis.com",e}function Zh(e,t){var n,r,o,i;if(!e)return function(){const e={appConfig:null,portalUrl:null,portalSelf:null,widgetsRuntimeInfo:be({}),widgetsPreloadProps:be({}),widgetsClassStatus:be({}),dataSourcesPreloadData:{},appContext:be({}),appRuntimeInfo:be({}),isNetworkOffLine:null,browserSizeMode:null,appPath:window.location.pathname,appId:null,appInfo:be({}),appI18nMessages:be({}),queryObject:be({}),dataSourcesInfo:be({}),jimuMapViewsInfo:be({}),mapWidgetsInfo:be({}),widgetsState:be({}),widgetsMutableStateVersion:be({}),theme:be({}),token:null,user:null,overlays:be([]),userLocaleChanged:!1,hasPrivilege:!0,privilegeError:null,loadAppConfigError:null};return be(e)}();if(t.type.includes("@@"))return e;switch(t.type){case jg.InitStoreExtensionState:return function(e,t){const n=xp.getInstance().getExtensionById(t.extensionId),r=n.getStoreKey().split(".");if(e.getIn(r))return e;return e=e.setIn(r,n.getInitLocalState())}(e,t);case jg.AppConfigLoaded:return function(e,t){let n=e.set("appConfig",t.appConfig);if(!n.appRuntimeInfo.currentPageId){const e=Object.keys(t.appConfig.pages).find(e=>t.appConfig.pages[e].isDefault);n=n.setIn(["appRuntimeInfo","currentPageId"],e)}n.appConfig.dataSources&&Object.keys(n.appConfig.dataSources).forEach(e=>{n=n.setIn(["dataSourcesInfo",e,"instanceStatus"],Aa.b.NotCreated)});return n}(e,t);case jg.LoadAppConfigFailed:return e.set("loadAppConfigError",t.errorMessage);case jg.SetPortalInfo:return e=e.set("portalUrl",t.portalUrl),t.clientId&&(e=e.set("clientId",t.clientId)),e;case jg.SetPortalSelf:return e.set("portalSelf",t.portalSelf);case jg.AppConfigChanged:return eg(e,t);case jg.AppPathChanged:return function(e,t){var n;e=e.set("appPath",t.path);let r=jh(location.pathname).pageId;!r&&(null===(n=null==e?void 0:e.appConfig)||void 0===n?void 0:n.pages)&&(r=e.appConfig&&Object.keys(e.appConfig.pages).find(t=>e.appConfig.pages[t].isDefault));r&&(e=tg(e=e.setIn(["appRuntimeInfo","currentPageId"],r),r));return e}(e,t);case jg.AppInfoChanged:return e.set("appInfo",e.appInfo.merge(t.appInfo));case jg.AppContextInit:return e.set("appContext",t.appContext);case jg.AppIdChanged:return e.set("appId",t.appId);case jg.I18nMessagesLoaded:return function(e,t){0;return e.set("appI18nMessages",e.appI18nMessages.merge(t.messages))}(e,t);case jg.QueryObjectChanged:return function(e,t){var n,r,o;const i=function(e){var t,n,r,o,i,a,s;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId)&&((null===(r=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[e.appRuntimeInfo.currentDialogId])||void 0===r?void 0:r.isSplash)||(null===(i=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[e.appRuntimeInfo.currentDialogId])||void 0===i?void 0:i.mode)===nh.Anchored||(null===(s=null===(a=e.appConfig.pages)||void 0===a?void 0:a[e.appRuntimeInfo.currentPageId])||void 0===s?void 0:s.autoOpenDialogId)===e.appRuntimeInfo.currentDialogId)}(e=e.set("queryObject",be(t.query)));if(t.query.dlg){if(!i&&t.query.dlg!==(null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.currentDialogId)&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.query.dlg)).appConfig){const n=null===(r=e.appConfig.dialogs)||void 0===r?void 0:r[t.query.dlg],o=(e.appRuntimeInfo.dialogInfos||be({})).setIn([t.query.dlg,"canClose"],!(null==n?void 0:n.interactionType)||!(null==n?void 0:n.confirmBeforeClose)).setIn([t.query.dlg,"checked"],!1).setIn([t.query.dlg,"isClosed"],!1);e=e.setIn(["appRuntimeInfo","dialogInfos"],o)}}else i||(e=e.setIn(["appRuntimeInfo","currentDialogId"],null));if(t.query.views&&e.appConfig){const n=Dh(t.query,e.appConfig);Object.keys(n).forEach(t=>{var r,o,i;if((null===(i=null===(o=null===(r=e.appRuntimeInfo)||void 0===r?void 0:r.sectionNavInfos)||void 0===o?void 0:o[t])||void 0===i?void 0:i.currentViewId)!==n[t].currentViewId){const r=ag(e,t,n[t]);e=e.setIn(["appRuntimeInfo","sectionNavInfos",t],r)}})}if(!window.jimuConfig.useStructuralUrl){let n=t.query.page;!n&&(null===(o=null==e?void 0:e.appConfig)||void 0===o?void 0:o.pages)&&(n=e.appConfig&&Object.keys(e.appConfig.pages).find(t=>e.appConfig.pages[t].isDefault)),n&&n!==e.appRuntimeInfo.currentPageId&&(e=tg(e=e.setIn(["appRuntimeInfo","currentPageId"],n),n))}return e}(e,t);case jg.SetAppInBuilder:return e.set("appContext",e.appContext.merge({isInBuilder:!0}));case jg.WidgetClassLoaded:return function(e,t){const n=e.appConfig.widgets||{},r=Object.keys(n).filter(e=>n[e].uri===t);return e=e.setIn(["widgetsClassStatus",t],!0),r.forEach(t=>{e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0)}),e}(e,t.widgetUri);case jg.WidgetConfigLoaded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config);case jg.WidgetConfigUpgraded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config).setIn(["appConfig","widgets",t.widgetId,"version"],e.appConfig.widgets[t.widgetId].manifest.version);case jg.OpenWidget:return rg(e,t.widgetId);case jg.OpenWidgets:return function(e,t){return t.forEach(t=>{e=rg(e,t)}),e}(e,t.widgetIds);case jg.CloseWidget:return og(e,t.widgetId);case jg.CloseWidgets:return function(e,t){return t.forEach(t=>{e=og(e,t)}),e}(e,t.widgetIds);case jg.ActivateWidget:return function(e,t){var n,r;if(!(null===(r=null===(n=e.appConfig.widgets[t])||void 0===n?void 0:n.manifest)||void 0===r?void 0:r.properties.needActiveState))return e;const o=Object.keys(e.widgetsRuntimeInfo).filter(t=>e.widgetsRuntimeInfo[t].state===ga.Active);e.appConfig.widgets[t].manifest.properties.deactivateOtherWidgets&&o.forEach(t=>{e=e.setIn(["widgetsRuntimeInfo",t,"state"],ga.Opened)});return e.setIn(["widgetsRuntimeInfo",t,"state"],ga.Active)}(e,t.widgetId);case jg.SetWidgetIsInlineEditingState:return t.isInlineEditing?(Object.keys(e.widgetsRuntimeInfo).forEach(t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))}),e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!0)):e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!1);case jg.SetWidgetPreloadProps:return e.setIn(["widgetsPreloadProps",t.widgetId],t.props);case jg.SetDataSourcePreloadData:return e.setIn(["dataSourcesPreloadData",t.dataSourceId],t.data);case jg.LayoutClassLoaded:return e.setIn(["isLayoutClassLoaded",t.layoutName],!0);case jg.DataSourceInstanceStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"instanceStatus"],t.status);case jg.DataSourceStatusChanged:return ng(e,t.dataSourceId,"status",t.status,t.dataSourceManager);case jg.DataSourceCountStatusChanged:return ng(e,t.dataSourceId,"countStatus",t.countStatus,t.dataSourceManager);case jg.DataSourceSaveStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"saveStatus"],t.saveStatus);case jg.DataSourceVersionAdded:const a=e.dataSourcesInfo[t.dataSourceId]&&e.dataSourcesInfo[t.dataSourceId].version?e.dataSourcesInfo[t.dataSourceId].version:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"version"],a+1);case jg.DataSourceSourceVersionAdded:const s=null!==(o=null===(r=null===(n=e.dataSourcesInfo)||void 0===n?void 0:n[t.dataSourceId])||void 0===r?void 0:r.sourceVersion)&&void 0!==o?o:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"sourceVersion"],s+1);case jg.ChangeDataSourceGDBVersion:return e.setIn(["dataSourcesInfo",t.dataSourceId,"gdbVersion"],t.gdbVersion);case jg.ClearDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.without(t.dataSourceId));case jg.UpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.set(t.dataSourceId,t.dataSourceInfo));case jg.JimuMapViewAdded:case jg.JimuMapViewUpdated:return e.setIn(["jimuMapViewsInfo",t.jimuMapViewId],t.jimuMapViewInfo);case jg.JimuMapViewRemoved:let u=null;return u=e.jimuMapViewsInfo.without(t.jimuMapViewId),e.setIn(["jimuMapViewsInfo"],u);case jg.RequestAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],t.autoControlWidgetId);case jg.ReleaseAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],null);case jg.MapWidgetInfoAdded:case jg.MapWidgetInfoUpdated:return e.setIn(["mapWidgetsInfo",t.mapWidgetId],t.mapWidgetInfo);case jg.MapWidgetInfoRemoved:let c=null;return c=e.mapWidgetsInfo.without(t.mapWidgetId),e.setIn(["mapWidgetsInfo"],c);case jg.DataSourceSelectedIndexesChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],t.selectedIndexes).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],null);case jg.DataSourceSelectedIdsChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],t.selectedIds).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],null);case jg.SetDataNeedRefresh:return e.setIn(["dataSourcesInfo",t.dataSourceId,"needRefresh"],t.refresh);case jg.UpdateWidgetQuery:return e.setIn(["dataSourcesInfo",t.dataSourceId,"widgetQueries",t.widgetId],t.query);case jg.WidgetStatePropChange:return function(e,t){const n=t.propKey.split(".");return e.setIn(["widgetsState",t.widgetId].concat(n),t.value)}(e,t);case jg.WidgetMutableStatePropChange:return function(e,t){var n,r;let o=null!==(r=null===(n=e.widgetsMutableStateVersion[t.widgetId])||void 0===n?void 0:n[t.propKey])&&void 0!==r?r:0;return e.setIn(["widgetsMutableStateVersion",t.widgetId,t.propKey],++o)}(e,t);case jg.SessionStart:return e.set("token",t.token);case jg.UserSignIn:return e.set("user",be(t.user));case jg.UserSignOut:return e.merge({token:null,user:null});case jg.BrowserSizeModeChanged:return e.set("browserSizeMode",t.browserSizeMode);case jg.NetworkStatusChanged:return e.set("isNetworkOffLine",t.isOffLine);case jg.CurrentPageChanged:return tg(e=e.setIn(["appRuntimeInfo","currentPageId"],t.pageId),t.pageId);case jg.CurrentDialogChanged:return(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.dialogId)).setIn(["appRuntimeInfo","currentDialogId"],t.dialogId);case jg.SelectionChanged:return ig(e,t.selection);case jg.AppModeChanged:return e.setIn(["appRuntimeInfo","appMode"],t.mode).setIn(["appRuntimeInfo","animationPreview"],null);case jg.AppRuntimeInfoInit:return e.set("appRuntimeInfo",t.info);case jg.UpdateStoreState:return t.state;case jg.ThemeVariablesChanged:return e.set("theme",be(t.theme));case jg.ActivePagePartChanged:return e.setIn(["appRuntimeInfo","activePagePart"],t.part);case jg.OpenOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e:e.set("overlays",e.overlays.concat([t.id]));case jg.CloseOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e.set("overlays",e.overlays.filter(e=>e!==t.id)):e;case jg.ActiveOverlay:let l=null==e?void 0:e.overlays;if(!(null==l?void 0:l.includes(t.id)))return e;return(null==l?void 0:l.indexOf(t.id))===(null==l?void 0:l.length)-1?e:(l=l.filter(e=>e!==t.id),l=l.concat([t.id]),e.set("overlays",l));case jg.SetIsBusy:return e.setIn(["appRuntimeInfo","isBusy"],t.isBusy).setIn(["appRuntimeInfo","loadingType"],t.loadingType);case jg.ZoomScaleChanged:return e.setIn(["appRuntimeInfo","zoomScale"],t.zoomScale);case jg.LayoutChanged:return ig(eg(e,{appConfig:t.appConfig,type:jg.AppConfigChanged}),t.selection);case jg.ClipboardChanged:return e.setIn(["appRuntimeInfo","clipboard"],t.item);case jg.SectionNavInfoChanged:{const n=ag(e,t.sectionId,t.navInfo);let r=e;if(!(null===(i=e.queryObject)||void 0===i?void 0:i.views)||!e.queryObject.views.includes(n.currentViewId)){let o=e.queryObject.views?e.queryObject.views.split(","):[];o=o.filter(n=>!e.appConfig.sections[t.sectionId].views.includes(n)),o.push(n.currentViewId),r=e.setIn(["queryObject","views"],o.join(","))}return r.setIn(["appRuntimeInfo","sectionNavInfos",t.sectionId],n)}case jg.ScreenGroupNavInfoChanged:return e.setIn(["appRuntimeInfo","screenGroupNavInfos",t.screenGroupId],{activeIndex:t.activeIndex,scrollIntoView:t.scrollIntoView});case jg.DialogInfosChanged:return e.setIn(["appRuntimeInfo","dialogInfos"],t.dialogInfos);case jg.SetupAnimationPreview:return e.setIn(["appRuntimeInfo","animationPreview"],t.data);case jg.ClearAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview"));case jg.SetHasNewVersion:return e.set("hasNewVersion",t.hasNew);case jg.UserLocaleChanged:return e.set("userLocaleChanged",t.isChanged);case jg.HasPrivilegeChanged:return e.set("hasPrivilege",!1).set("privilegeError",t.error);case jg.ScreenPanelVisibleChange:return e.setIn(["appRuntimeInfo","screenPanelStates",t.screenId],t.visible);default:return function(e,t){const n=xp.getInstance().getExtensions(hp.ReduxStore);for(let r=0;r<n.length;r++){const o=n[r];if(o.getActions().includes(t.type)){const n=o.getStoreKey().split("."),r=e.getIn(n);return e.setIn(n,o.getReducer()(r,t,e))}}return e}(e,t)}}function eg(e,t){return Sh(e,t.appConfig)}function tg(e,t){let n;return n=e.appConfig&&e.appConfig.pages?e.appConfig.pages[t]:{},e.setIn(["appRuntimeInfo","activeLayout"],n.layout||null).setIn(["appRuntimeInfo","selection"],null)}function ng(e,t,n,r,o){var i;let a=e.setIn(["dataSourcesInfo",t,n],r);const s=null==o?void 0:o.getDataSource(t);return(null===(i=null==s?void 0:s.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget)&&(r!==Aa.b.Unloaded&&r!==Aa.b.NotReady||s.getAllDerivedDataSources().forEach(e=>{a=a.setIn(["dataSourcesInfo",e.id,n],r)})),a}function rg(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],ga.Opened)}function og(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],ga.Closed)}function ig(e,t){var n,r;if(Object.keys(e.widgetsRuntimeInfo).forEach(t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))}),t){const{layoutId:o,layoutItemId:i}=t;if(!(null===(r=null===(n=e.appConfig.layouts[o])||void 0===n?void 0:n.content)||void 0===r?void 0:r[i]))return e=e.setIn(["appRuntimeInfo","selection"],null)}return e=e.setIn(["appRuntimeInfo","selection"],t)}function ag(e,t,n){var r,o,i,a,s,u;let c,l;if((null===(r=n.visibleViews)||void 0===r?void 0:r.length)>0?(l=n.visibleViews,c=n.visibleViews.length):(l=null!==(i=null===(o=e.appConfig.sections[t])||void 0===o?void 0:o.views)&&void 0!==i?i:[],c=null!==(a=null==l?void 0:l.length)&&void 0!==a?a:0),n.useProgress&&(!n.currentViewId||!n.previousViewId)){const{currentIndex:e,previousIndex:t}=function(e,t){let n,r;const o=sg(e,0,1)*(t-1),i=Math.floor(o);r=i,r=function(e){return Math.abs(e-Math.round(e))<1e-7}(o)?Math.round(o)-1:i;return n=r+1,n=sg(n,0,t-1),r=sg(r,0,t-1),{previousIndex:r,progress:o,currentIndex:n}}(n.progress,c);n.currentViewId=l[e],n.previousViewId=l[t]}if(null==n.progress){const e=l.indexOf(n.currentViewId);n.progress=l.length>1?e/(l.length-1):1}if(null==n.previousViewId){const r=null===(u=null===(s=e.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===u?void 0:u[t];if(null==r?void 0:r.currentViewId)n.previousViewId=r.currentViewId;else{const e=l.indexOf(n.currentViewId);n.previousViewId=e>0?l[e-1]:l[c-1]}}return n}function sg(e,t,n){return Math.max(t,Math.min(e,n))}function ug(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}!function(e){e.Page="pages",e.View="views",e.ScreenPanel="screens_panel",e.ScreenMain="screens_main",e.Dialog="dialogs",e.Header="header",e.Footer="footer"}(Yp||(Yp={})),function(e){e.Page="pages",e.Dialog="dialogs",e.Header="header",e.Footer="footer"}(Xp||(Xp={})),function(e){e.Page="pages",e.View="view",e.Widget="widget",e.Screen="screen",e.Dialog="dialog",e.Header="header",e.Footer="footer"}(Kp||(Kp={})),function(e){e.Fade="FADE",e.Cover="COVER",e.Push="PUSH"}(Qp||(Qp={})),function(e){e.Top="TOP",e.Upper="UPPER",e.Lower="LOWER",e.Bottom="BOTTOM"}(Zp||(Zp={})),function(e){e.Normal="NORMAL",e.Folder="FOLDER",e.Link="LINK"}(eh||(eh={})),function(e){e.FitWindow="FIT_WINDOW",e.AutoScroll="AUTO_SCROLL"}(th||(th={})),function(e){e.Fixed="FIXED",e.Anchored="ANCHORED"}(nh||(nh={})),function(e){e.Center="CENTER",e.Left="LEFT",e.Right="RIGHT",e.Top="TOP",e.Bottom="BOTTOM"}(rh||(rh={})),function(e){e.NoButton="NO_BUTTON",e.ButtonInline="BUTTON_INLINE",e.ButtonBlock="BUTTON_BLOCK"}(oh||(oh={}));var cg="function"==typeof Symbol&&Symbol.observable||"@@observable",lg=function(){return Math.random().toString(36).substring(7).split("").join(".")},dg={INIT:"@@redux/INIT"+lg(),REPLACE:"@@redux/REPLACE"+lg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lg()}};function fg(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function pg(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ug(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(ug(1));return n(pg)(e,t)}if("function"!=typeof e)throw new Error(ug(2));var o=e,i=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error(ug(3));return i}function d(e){if("function"!=typeof e)throw new Error(ug(4));if(u)throw new Error(ug(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(ug(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function f(e){if(!fg(e))throw new Error(ug(7));if(void 0===e.type)throw new Error(ug(8));if(u)throw new Error(ug(9));try{u=!0,i=o(i,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error(ug(10));o=e,f({type:dg.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(ug(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[cg]=function(){return this},e}return f({type:dg.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[cg]=h,r}let hg;function gg(e){return hg||(hg=pg(Zh,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),window._appStore=hg,hg)}function mg(){return hg}function vg(e,t){let n;function r(){let r=hg.getState();t?(r=r.getIn(t),r!==n&&(e(n,r),n=r)):r!==n&&(e(n,r),n=r)}const o=hg.subscribe(r);return r(),o}var yg=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)};var bg=function(e){return e};var Sg=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},wg=Math.max;var Ig=function(e,t,n){return t=wg(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=wg(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Sg(e,this,s)}};var Eg=function(e){return function(){return e}},Og=function(){try{var e=ss(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Tg=Og?function(e,t){return Og(e,"toString",{configurable:!0,enumerable:!1,value:Eg(t),writable:!0})}:bg,Cg=Date.now;var Ag=function(e){var t=0,n=0;return function(){var r=Cg(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Tg);var xg=function(e,t){return Ag(Ig(e,t,bg),e+"")},Pg=xg((function(e,t){return yg(e,1,t)})),Dg=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Rg{constructor(){if(this.dataSources={},this.dataSourcesCreatePromise={},this.dataSourceFactories={},window.jimuConfig.isBuilder)return void console.error("DataSourceManager should not be created in builder");vg(this.onStoreChange.bind(this),["appConfig","dataSources"])}static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._dataSourceManager:(Rg.instance||(Rg.instance=new Rg,window._dataSourceManager=Rg.instance),Rg.instance)}getDataSource(e){return this.dataSources[e]}getDataViewDataSource(e,t){return this.dataSources[this.getDataViewDataSourceId(e,t)]}getDataSources(){return this.dataSources}getDataSourcesAsArray(){return Object.keys(this.dataSources).map(e=>this.dataSources[e])}setDataSource(e,t){this.dataSources[e]=t}destroyAllDataSources(){Object.keys(this.dataSources).forEach(e=>this.destroyDataSource(e)),this.dataSourcesCreatePromise={}}destroyDataSource(e){this.dataSources[e]?(mg().dispatch(sm(e)),this.dataSources[e].getDataViews().forEach(e=>this.destroyDataSource(e.id)),this.dataSources[e].getLocalDataSources().forEach(e=>this.destroyDataSource(e.id)),this.getDataSourcesAsArray().forEach(t=>{t.getOriginDataSources().find(t=>t===this.dataSources[e])&&this.destroyDataSource(t.id)}),this.dataSources[e].destroy(),delete this.dataSources[e],delete this.dataSourcesCreatePromise[e]):this.dataSourcesCreatePromise[e]&&(mg().dispatch(sm(e)),delete this.dataSourcesCreatePromise[e])}getConfiguredDataSources(){return Object.keys(this.dataSources).filter(e=>!this.dataSources[e].getDataSourceJson().isOutputFromWidget).map(e=>this.getDataSource(e))}getWidgetGeneratedDataSources(){const e={},t=this.getAppConfig();return Object.keys(t.widgets).filter(e=>t.widgets[e].outputDataSources).map(n=>{e[n]=t.widgets[n].outputDataSources.asMutable().map(e=>this.getDataSource(e))}),e}createAllDataSources(){return Dg(this,void 0,void 0,(function*(){const e=this.getAppConfig()&&this.getAppConfig().dataSources,t=[];return e&&Object.keys(e).forEach(e=>{this.dataSources[e]||t.push(this.createDataSource(e).then(e=>Dg(this,void 0,void 0,(function*(){return yield this.createDataViews(e).then(()=>e)}))).catch(t=>{console.error("Create data source failed",e,t),Promise.resolve(null)}))}),Promise.all(t)}))}createDataViews(e){return Dg(this,void 0,void 0,(function*(){return yield Promise.all(e.getDataSourceJson().dataViews&&Object.keys(e.getDataSourceJson().dataViews).map(t=>Dg(this,void 0,void 0,(function*(){return yield this.createDataSource(e.id,t)})))||[])}))}createDataSource(e,t,n){var r;return Dg(this,void 0,void 0,(function*(){let o,i;if("string"==typeof e){const t=this.getAppConfig().dataSources[e];if(!t)throw Error("Can not create data source."+e);i=e,o={dataSourceJson:t,dataSourceManager:this,id:i}}else if(e.dataSourceJson||e.belongToDataSource)o=e,i=o.dataSourceJson?o.dataSourceJson.id:o.belongToDataSource.getMainDataSource().id,o.dataViewId&&(t=o.dataViewId,delete o.dataViewId),o.localId&&(n=o.localId,delete o.localId),o.dataSourceManager=this,o.id=i;else{const t=e;i=t.id,o={dataSourceJson:t,dataSourceManager:this,id:i}}const a=e=>Dg(this,void 0,void 0,(function*(){return this.dataSourcesCreatePromise[e]?yield this.dataSourcesCreatePromise[e]:yield this.createDataSource(e)})),s=(e,t)=>Dg(this,void 0,void 0,(function*(){const n=this.getDataViewDataSourceId(e,t);return this.getDataSource(n)?yield Promise.resolve(this.getDataSource(n)):(this.dataSourcesCreatePromise[e]=a(i),yield this.dataSourcesCreatePromise[e].then(e=>this.createDataView(e,t)))}));if(t&&n){const e=this.getDataViewDataSourceId(i,t);this.getLocalDataSourceId(e,n);return s(i,t).then(e=>this.createLocalDataSource(e,n))}return t?s(i,t):n?(this.dataSourcesCreatePromise[i]=a(i),this.dataSourcesCreatePromise[i].then(e=>this.createLocalDataSource(e,n))):this.dataSourcesCreatePromise[i]?this.dataSourcesCreatePromise[i]:((null===(r=mg().getState().dataSourcesInfo[i])||void 0===r?void 0:r.instanceStatus)!==Aa.b.NotCreated&&mg().dispatch(nm(i,Aa.b.NotCreated)),this.dataSourcesCreatePromise[i]=this.createOriginDataSources(o.dataSourceJson).then(()=>Dg(this,void 0,void 0,(function*(){return yield this.createDataSourceObj(o)}))).then(e=>Dg(this,void 0,void 0,(function*(){const t=mg().getState().dataSourcesPreloadData[i];return t&&e.setJsonData(t.asMutable()),yield e.ready().then(()=>Dg(this,void 0,void 0,(function*(){return yield e.fetchSchema()}))).then(t=>{var n,r;this.initSchema(e,t),this.afterCreate(e);let o=[];if(!e.isDataSourceSet){const t=this.createDataViewObj(e,Sc);o=o.concat(t.ready());if(!!(null===(r=null===(n=e.getDataSourceJson())||void 0===n?void 0:n.dataViews)||void 0===r?void 0:r[wc])){const t=this.createDataViewObj(e,wc);o=o.concat(t.ready())}}return e.getDataSourceJson().isOutputFromWidget&&this.createDataViewObj(e,Ic),Promise.allSettled(o).then(()=>e)})}))).catch(t=>Dg(this,void 0,void 0,(function*(){return console.error("Create datasource error.",e,t),mg().dispatch(nm(i,Aa.b.CreateError)),yield Promise.reject(new Aa.a(i,t))}))),yield this.dataSourcesCreatePromise[o.dataSourceJson.id])}))}createDataView(e,t){const n=this.getDataViewDataSourceId(e.id,t);return this.getDataSource(n)?this.getDataSource(n):this.createDataViewObj(e,t)}createLocalDataSource(e,t){const n=this.getLocalDataSourceId(e.id,t);return this.getDataSource(n)?this.getDataSource(n):this.createLocalDataSourceObj(e,t)}afterCreate(e){this.dataSources[e.id]=e,mg().dispatch(nm(e.id,Aa.b.Created));const t=e.getMainDataSource().id;if(e.id!==t&&e.dataViewId!==Sc&&e.dataViewId!==wc){const t=e.getMainDataSource().getSelectedRecordIds();t&&t.length>0&&e.setSelectedRecordIdsToInfo(t,e.getMainDataSource())}}getDataViewDataSourceId(e,t){return`${e}-${t}`}getLocalDataSourceId(e,t){return`${e}-${t}`}createDataSourceByUseDataSource(e,t){return Dg(this,void 0,void 0,(function*(){const n=this.getAppConfig().dataSources;return n[e.mainDataSourceId]?e.dataViewId?e.dataViewId===Sc||e.dataViewId===Ic||n[e.mainDataSourceId].dataViews[e.dataViewId]?yield this.createDataSource(e.mainDataSourceId,e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new Aa.a(e.dataSourceId,"Can not find data source."))):yield this.createDataSource(e.mainDataSourceId,null,t):n[e.rootDataSourceId]?yield this.createDataSource(e.rootDataSourceId).then(n=>{const r=this.getDataSource(e.mainDataSourceId);return r?e.dataViewId?e.dataViewId===Sc||r.getDataSourceJson().dataViews[e.dataViewId]?this.createDataSource(r.getDataSourceJson(),e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new Aa.a(e.dataSourceId,"Can not find data source."))):t?this.createDataSource(r.getDataSourceJson(),null,t):r:(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new Aa.a(e.dataSourceId,"Can not find data source.")))}):(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new Aa.a(e.dataSourceId,"Can not find data source.")))}))}createOriginDataSources(e){return Dg(this,void 0,void 0,(function*(){return e.isOutputFromWidget&&e.originDataSources&&e.originDataSources.length>0?yield Promise.all(e.originDataSources.asMutable().map(e=>Dg(this,void 0,void 0,(function*(){return yield this.createDataSourceByUseDataSource(e)})))).then(()=>Dg(this,void 0,void 0,(function*(){return yield Promise.resolve()}))):yield Promise.resolve()}))}initSchema(e,t){e.setFetchedSchema(t);const n=e.getDataSourceJson().schema;if(e.getDataSourceJson().isOutputFromWidget)if(e.getDataSourceJson().schema)e.setSchema(e.getDataSourceJson().schema);else if(e.getDataSourceJson().originDataSources&&e.getDataSourceJson().originDataSources.length>0)if(1===e.getDataSourceJson().originDataSources.length){const t=this.getDataSource(e.getDataSourceJson().originDataSources[0].dataSourceId);e.setSchema(t&&t.getSchema())}else console.error("Datasource created from more than one data source must save the schema in app config.");else console.error("Datasource without origin data source must save the schema in app config.");else{const r=this.mergeSchema(e,n,t);e.setSchema(r)}}mergeSchema(e,t,n){if(e.isDataSourceSet){if(!t)return n;let r=t;return Object.keys(n.childSchemas).forEach(o=>{if(e.getReversedConfigSchema().childSchemas[o])e.getReversedConfigSchema().childSchemas[o].forEach(t=>{r=r.setIn(["childSchemas",t.jimuChildId],e.getChildDataSource(t.jimuChildId).getSchema())});else{if(t.childSchemas[o])return void console.warn("Layer existed, please re-map the data source.",e.id,o);r=r.setIn(["childSchemas",o],n.childSchemas[o])}}),Object.keys(t.childSchemas).forEach(e=>{const r=t.childSchemas[e].childId;n.childSchemas[r]||console.error("Used data is not found.",r)}),r}return this.mergeOneSchema(e,t,n)}mergeOneSchema(e,t,n){if(!t)return n;let r=t;return(null==n?void 0:n.fields)&&Object.keys(n.fields).forEach(o=>{if(e.getReversedConfigSchema().fields[o])e.getReversedConfigSchema().fields[o].forEach(e=>{r.fields[e.jimuName].alias||(r=r.setIn(["fields",e.jimuName,"alias"],n.fields[o].alias))});else{if(t.fields[o])return void console.warn("Field name existed, please re-map the data source.",e.id,o);const i=n.fields[o];r=r.setIn(["fields",o],i)}}),(null==t?void 0:t.fields)&&Object.keys(t.fields).forEach(e=>{var r;const o=t.fields[e].name;(null===(r=null==n?void 0:n.fields)||void 0===r?void 0:r[o])||console.error("Used field is not found.",o)}),r}getDataSourceFactory(e){return Dg(this,void 0,void 0,(function*(){let t=this.getDataSourceFactorySync(e);if(t)return yield Promise.resolve(t);const n=this.getDataSourceFactoryUri(e);return yield vp(n,["default"]).then(r=>{try{t=new r.default,this.dataSourceFactories[n]=t}catch(t){throw console.error("Load data source factory error.",e,t),t}return t})}))}getDataSourceFactoryUri(e){const t=xp.getInstance().getExtensions(hp.DataSourceFactoryUri).filter(t=>t.getFactoryUri(e))[0];if(!t)throw console.error("Unknown data source type:"+e),Error("Unknown data source type:"+e);return t.getFactoryUri(e)}getDataSourceFactorySync(e){const t=this.getDataSourceFactoryUri(e),n=this.dataSourceFactories[t];if(n)return n}createDataSourceObj(e){return Dg(this,void 0,void 0,(function*(){return yield this.getDataSourceFactory(e.dataSourceJson.type).then(t=>Dg(this,void 0,void 0,(function*(){let n;try{n=t.createDataSource(e)}catch(t){return console.error("Create data source error.",e.dataSourceJson,t),yield Promise.reject(t)}return yield Promise.resolve(n)})))}))}createDataViewObj(e,t){const n=this.getDataSourceFactoryUri(e.type),r=this.dataSourceFactories[n];if(!r)throw Error("Data source is not created");let o=null;try{o=r.createDataSource({id:this.getDataViewDataSourceId(e.id,t),dataViewId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(n){console.error("Create data view error.",e.id,t,n),mg().dispatch(nm(this.getDataViewDataSourceId(e.id,t),Aa.b.CreateError))}return o}createLocalDataSourceObj(e,t){const n=this.getDataSourceFactoryUri(e.type),r=this.dataSourceFactories[n];if(!r)throw Error("Data source is not created");let o=null;try{o=r.createDataSource({id:this.getLocalDataSourceId(e.id,t),dataViewId:e.isDataView?e.dataViewId:null,localId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(n){console.error("Create local data source error.",e.id,t,n),mg().dispatch(nm(this.getLocalDataSourceId(e.id,t),Aa.b.CreateError))}return o}getAppConfig(){return mg().getState().appConfig}onStoreChange(e,t){e&&t&&Object.keys(e).forEach(n=>{if(t[n]){if(t[n]&&e[n]){const e=t[n],r=this.getDataSource(n);r&&(r.type!==e.type?Pg(()=>{this.destroyDataSource(n),this.createDataSource(n).then(e=>{this.createDataViews(e)})}):this.updateDataSourceByDataSourceJson(r,e))}}else Pg(()=>{this.destroyDataSource(n)})}),window.jimuConfig.isInBuilder&&e&&t&&Object.keys(t).forEach(t=>{var n;const r=mg().getState();e[t]||(null===(n=r.dataSourcesInfo[t])||void 0===n?void 0:n.instanceStatus)||this.createDataSource(t).then(e=>{this.createDataViews(e)})})}updateDataSourceByDataSourceJson(e,t){var n,r;if(e.getDataSourceJson()!==t){if(e.getDataSourceJson().query!==(null==t?void 0:t.query)&&Pg(()=>{e.clearRecords(),e.clearSelection()}),e.getDataSourceJson().dataViews!==(null==t?void 0:t.dataViews)){const n=e.getDataSourceJson().dataViews,r=null==t?void 0:t.dataViews;n&&r&&Object.keys(n).forEach(o=>{if(r[o]){if(r[o]&&n[o]){const n=this.getDataViewDataSourceId(e.id,o),r=this.getDataSource(n);r&&(pc(r.getDataSourceJson().dataViews[o],t.dataViews[o])||Pg(()=>{r.clearRecords(),r.clearSelection()}))}}else Pg(()=>{this.destroyDataSource(this.getDataViewDataSourceId(e.id,o))})})}let o;if(e.getDataSourceJson().childDataSourceJsons!==(null==t?void 0:t.childDataSourceJsons)&&e.getChildDataSources().forEach(e=>{var n;this.updateDataSourceByDataSourceJson(e,null===(n=null==t?void 0:t.childDataSourceJsons)||void 0===n?void 0:n[e.jimuChildId])}),(null===(n=e.getDataSourceJson().originDataSources)||void 0===n?void 0:n.length)===(null===(r=null==t?void 0:t.originDataSources)||void 0===r?void 0:r.length)){o=!e.getDataSourceJson().originDataSources||e.getDataSourceJson().originDataSources.every(e=>(null==t?void 0:t.originDataSources)&&(null==t?void 0:t.originDataSources.some(t=>t.dataSourceId===e.dataSourceId)))}else o=!1;const i=e.getDataSourceJson().schema!==(null==t?void 0:t.schema)||!o||e.getDataSourceJson().itemId!==(null==t?void 0:t.itemId)||e.getDataSourceJson().portalUrl!==(null==t?void 0:t.portalUrl)||e.getDataSourceJson().url!==(null==t?void 0:t.url);e.setDataSourceJson(t),i&&(e.getDataSourceJson().isDataInDataSourceInstance?(e.clearSourceRecordsNotAddVersion(),this.initSchema(e,null)):(e.clearRecordsNotAddVersion(),e.fetchSchema().then(t=>{this.initSchema(e,t),e.addVersion()}))),Pg(()=>{e.addVersion()})}}}var jg,_g=Rg;function kg(e){return{type:jg.AppConfigLoaded,appConfig:e}}function Mg(e){return{type:jg.LoadAppConfigFailed,errorMessage:e}}function Ng(e){return{type:jg.AppConfigChanged,appConfig:e}}function Lg(e){return{type:jg.AppPathChanged,path:e}}function Ug(e){return{type:jg.AppInfoChanged,appInfo:e}}function Fg(e){return{type:jg.AppIdChanged,appId:e}}function $g(e){return{type:jg.WidgetClassLoaded,widgetUri:e}}function Vg(e,t){return{type:jg.WidgetConfigUpgraded,widgetId:e,config:t}}function Bg(e,t){return{type:jg.WidgetConfigLoaded,widgetId:e,config:t}}function Gg(e){return{type:jg.OpenWidget,widgetId:e}}function Wg(e){return{type:jg.OpenWidgets,widgetIds:e}}function qg(e){return{type:jg.CloseWidget,widgetId:e}}function zg(e){return{type:jg.CloseWidgets,widgetIds:e}}function Hg(e){return{type:jg.ActivateWidget,widgetId:e}}function Jg(e){return{type:jg.AppContextInit,appContext:e}}function Yg(e,t){return{type:jg.I18nMessagesLoaded,key:e,messages:t}}function Xg(e){return{type:jg.QueryObjectChanged,query:e}}function Kg(){return{type:jg.SetAppInBuilder}}function Qg(e){return{type:jg.AppModeChanged,mode:e}}function Zg(e){return{type:jg.LayoutClassLoaded,layoutName:e}}function em(e,t){var n;const r=null===(n=_g.getInstance())||void 0===n?void 0:n.getDataSource(e);return r&&t===Aa.b.NotReady&&(r.clearSourceRecordsNotAddVersion(),r.getAllDerivedDataSources().forEach(e=>{e.clearSourceRecordsNotAddVersion()})),r&&t===Aa.b.Unloaded&&(r.clearRecordsNotAddVersion(),r.getAllDerivedDataSources().forEach(e=>{e.clearRecordsNotAddVersion()})),{type:jg.DataSourceStatusChanged,dataSourceId:e,status:t,dataSourceManager:_g.getInstance()}}function tm(e,t){return{type:jg.DataSourceCountStatusChanged,dataSourceId:e,countStatus:t,dataSourceManager:_g.getInstance()}}function nm(e,t){return{type:jg.DataSourceInstanceStatusChanged,dataSourceId:e,status:t}}function rm(e,t){return{type:jg.DataSourceSaveStatusChanged,dataSourceId:e,saveStatus:t}}function om(e){return{type:jg.DataSourceVersionAdded,dataSourceId:e}}function im(e){return{type:jg.DataSourceSourceVersionAdded,dataSourceId:e}}function am(e,t){return{type:jg.ChangeDataSourceGDBVersion,dataSourceId:e,gdbVersion:t}}function sm(e){return{type:jg.ClearDataSourceInfo,dataSourceId:e}}function um(e,t){return{type:jg.UpdateDataSourceInfo,dataSourceId:e,dataSourceInfo:t}}function cm(e,t){return{type:jg.SetDataNeedRefresh,dataSourceId:e,refresh:t}}function lm(e,t,n){return{type:jg.UpdateWidgetQuery,dataSourceId:e,widgetId:t,query:n}}function dm(e,t){return{type:jg.JimuMapViewAdded,jimuMapViewId:e,jimuMapViewInfo:t}}function fm(e,t){return{type:jg.JimuMapViewUpdated,jimuMapViewId:e,jimuMapViewInfo:t}}function pm(e){return{type:jg.JimuMapViewRemoved,jimuMapViewId:e}}function hm(e,t){return{type:jg.RequestAutoControlMapWidget,mapWidgetId:e,autoControlWidgetId:t}}function gm(e){return{type:jg.ReleaseAutoControlMapWidget,mapWidgetId:e}}function mm(e,t){return{type:jg.MapWidgetInfoAdded,mapWidgetId:e,mapWidgetInfo:t}}function vm(e,t){return{type:jg.MapWidgetInfoUpdated,mapWidgetId:e,mapWidgetInfo:t}}function ym(e){return{type:jg.MapWidgetInfoRemoved,mapWidgetId:e}}function bm(e){return{type:jg.InitStoreExtensionState,extensionId:e}}function Sm(e,t,n){return{type:jg.WidgetStatePropChange,widgetId:e,propKey:t,value:n}}function wm(e,t){return{type:jg.WidgetMutableStatePropChange,widgetId:e,propKey:t}}function Im(e,t){return{type:jg.SetPortalInfo,portalUrl:e,clientId:t}}function Em(e,t){return{type:jg.DataSourceSelectedIndexesChanged,dataSourceId:e,selectedIndexes:t}}function Om(e,t){return{type:jg.DataSourceSelectedIdsChanged,dataSourceId:e,selectedIds:t}}function Tm(e){return{type:jg.SessionStart,token:e}}function Cm(e){return{type:jg.UserSignIn,user:e}}function Am(){return{type:jg.UserSignOut}}function xm(e){const t=window.document&&window.document.documentElement;return t&&(t.classList.remove("size-mode-"+la.Large),t.classList.remove("size-mode-"+la.Medium),t.classList.remove("size-mode-"+la.Small),t.classList.add("size-mode-"+e)),{type:jg.BrowserSizeModeChanged,browserSizeMode:e}}function Pm(e,t){return{type:jg.SetWidgetIsInlineEditingState,widgetId:e,isInlineEditing:t}}function Dm(e,t){return{type:jg.SetWidgetPreloadProps,widgetId:e,props:t}}function Rm(e,t){return{type:jg.SetDataSourcePreloadData,dataSourceId:e,data:t}}function jm(e){return{type:jg.NetworkStatusChanged,isOffLine:e}}function _m(e){return{type:jg.CurrentPageChanged,pageId:e}}function km(e){return{type:jg.CurrentDialogChanged,dialogId:e}}function Mm(e){return{type:jg.DialogInfosChanged,dialogInfos:e}}function Nm(e){return{type:jg.SelectionChanged,selection:e}}function Lm(e){return{type:jg.ClipboardChanged,item:e}}function Um(e){return{type:jg.UpdateStoreState,state:e}}function Fm(e){return{type:jg.AppRuntimeInfoInit,info:e}}function $m(e){return{type:jg.ThemeVariablesChanged,theme:e}}function Vm(e){return{type:jg.SetPortalSelf,portalSelf:e}}function Bm(e){return{part:e,type:jg.ActivePagePartChanged}}function Gm(e){return{type:jg.OpenOverlay,id:e}}function Wm(e){return{type:jg.CloseOverlay,id:e}}function qm(e){return{type:jg.ActiveOverlay,id:e}}function zm(e){return{type:jg.ZoomScaleChanged,zoomScale:e}}function Hm(e,t){return{type:jg.SetIsBusy,isBusy:e,loadingType:t}}function Jm(e,t){return{type:jg.LayoutChanged,appConfig:e,selection:t}}function Ym(e,t){return{type:jg.SectionNavInfoChanged,sectionId:e,navInfo:t}}function Xm(e,t,n=!0){return{type:jg.ScreenGroupNavInfoChanged,screenGroupId:e,activeIndex:t,scrollIntoView:n}}function Km(e,t){return{type:jg.ScreenPanelVisibleChange,screenId:e,visible:t}}function Qm(e){return{type:jg.SetupAnimationPreview,data:e}}function Zm(){return{type:jg.ClearAnimationPreview}}function ev(e){return{type:jg.SetHasNewVersion,hasNew:e}}function tv(e){return{type:jg.UserLocaleChanged,isChanged:e}}function nv(e){return{type:jg.HasPrivilegeChanged,error:e}}!function(e){e.InitStoreExtensionState="INIT_STORE_EXTENSION_STATE",e.AppConfigLoaded="APPCONFIG_LOADED",e.AppConfigChanged="APPCONFIG_CHANGED",e.LoadAppConfigFailed="LOAD_APPCONFIG_FAILED",e.ThemeVariablesChanged="THEME_VARIABLES_CHANGED",e.SetPortalInfo="SET_PORTAL_INFO",e.SetPortalSelf="SET_PORTAL_SELF",e.WidgetClassLoaded="WIDGET_CLASS_LOADED",e.WidgetConfigLoaded="WIDGET_CONFIG_LOADED",e.WidgetConfigUpgraded="WIDGET_CONFIG_UPGRADED",e.OpenWidget="OPEN_WIDGET",e.OpenWidgets="OPEN_WIDGETS",e.CloseWidget="CLOSE_WIDGET",e.CloseWidgets="CLOSE_WIDGETS",e.SetWidgetIsInlineEditingState="SET_WIDGET_IS_INLINE_EDITING_STATE",e.SetWidgetPreloadProps="SET_WIDGET_PRELOAD_PROPS",e.ActivateWidget="ACTIVATE_WIDGET",e.SetAppInBuilder="SET_APP_IN_BUILDER",e.LayoutClassLoaded="LAYOUT_CLASS_LOADED",e.AppContextInit="APP_CONTEXT_INIT",e.I18nMessagesLoaded="I18N_MESSAGES_LOADED",e.QueryObjectChanged="QUERY_OBJECT_CHANGED",e.AppModeChanged="APP_MODE_CHANGED",e.SelectionChanged="SELECTION_CHANGED",e.AppRuntimeInfoInit="APP_RUNTIME_INFO_INIT",e.CurrentPageChanged="CURRENT_PAGE_CHANGED",e.CurrentDialogChanged="CURRENT_DIALOG_CHANGED",e.DialogInfosChanged="DIALOG_INFOS_CHANGED",e.ClipboardChanged="CLIPBOARD_CHANGED",e.AppPathChanged="APP_PATH_CHANGED",e.AppIdChanged="APP_ID_CHANGED",e.AppInfoChanged="APP_INFO_CHANGED",e.NetworkStatusChanged="NETWORK_STATUS_CHANGED",e.DataSourceStatusChanged="DATA_SOURCE_STATUS_CHANGED",e.DataSourceCountStatusChanged="DATA_SOURCE_COUNT_STATUS_CHANGED",e.DataSourceInstanceStatusChanged="DATA_SOURCE_INSTANCE_STATUS_CHANGED",e.DataSourceSaveStatusChanged="DATA_SOURCE_SAVE_STATUS_CHANGED",e.DataSourceVersionAdded="DATA_SOURCE_VERSION_ADDED",e.DataSourceSourceVersionAdded="DATA_SOURCE_SOURCE_VERSION_ADDED",e.DataSourceSelectedIndexesChanged="DATA_SOURCE_SELECTED_INDEXES_CHANGED",e.DataSourceSelectedIdsChanged="DATA_SOURCE_SELECTED_IDS_CHANGED",e.SetDataSourcePreloadData="SET_DATA_SOURCE_PRELOAD_DATA",e.SetDataNeedRefresh="SET_DATA_NEED_REFRESH",e.UpdateWidgetQuery="UPDATE_WIDGET_QUERY",e.ChangeDataSourceGDBVersion="CHANGE_DATA_SOURCE_GDB_VERSION",e.ClearDataSourceInfo="CLEARE_DATA_SOURCE_INFO",e.UpdateDataSourceInfo="UPDATE_DATA_SOURCE_INFO",e.JimuMapViewAdded="JIMU_MAPVIEW_ADDED",e.JimuMapViewRemoved="JIMU_MAPVIEW_REMOVED",e.JimuMapViewUpdated="JIMU_MAPVIEW_UPDATED",e.MapWidgetInfoAdded="MAP_WIDGET_INFO_ADDED",e.MapWidgetInfoRemoved="MAP_WIDGET_INFO_REMOVED",e.MapWidgetInfoUpdated="MAP_WIDGET_INFO_UPDATED",e.RequestAutoControlMapWidget="REQUEST_AUTO_CONTROL_MAP_WIDGET",e.ReleaseAutoControlMapWidget="RELEASE_AUTO_CONTROL_MAP_WIDGET",e.WidgetStatePropChange="WIDGET_STATE_PROP_CHANGE",e.WidgetMutableStatePropChange="WIDGET_MUTABLE_STATE_PROP_CHANGE",e.SessionStart="SESSION_START",e.UserSignIn="USER_SIGN_IN",e.UserSignOut="USER_SIGN_OUT",e.BrowserSizeModeChanged="BROWSER_SIZE_MODE_CHANGED",e.UpdateStoreState="UPDATE_STORE_STATE",e.ActivePagePartChanged="ACTIVE_PAGE_PART_CHANGED",e.OpenOverlay="OPEN_OVERLAY",e.CloseOverlay="CLOSE_OVERLAY",e.ActiveOverlay="ACTIVE_OVERLAY",e.SetIsBusy="SET_IS_BUSY",e.ZoomScaleChanged="ZOOM_SCALE_CHANGED",e.LayoutChanged="LAYOUT_CHANGED",e.SectionNavInfoChanged="SECTION_NAV_INFO_CHANGED",e.SetupAnimationPreview="SETUP_ANIMATION_PREVIEW",e.ClearAnimationPreview="CLEAR_ANIMATION_PREVIEW",e.SetHasNewVersion="SET_HAS_NEW_VERSION",e.ScreenGroupNavInfoChanged="SCREEN_GROUP_NAV_INFO_CHANGE",e.UserLocaleChanged="USER_LOCALE_CHANGED",e.HasPrivilegeChanged="HAS_PRIVILEGE_CHANGED",e.ScreenPanelVisibleChange="SCREEN_PANEL_VISIBLE_CHANGE"}(jg||(jg={}));var rv,ov=n(5),iv=n(81),av=n(147),sv=n(149),uv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e.ArcGISJSSync="ARCGIS_JS",e.OtherWindowSync="OTHER_WINDOW",e.AddOrUpdate="ADD_OR_UPDATE",e.Remove="REMOVE"}(rv||(rv={}));class cv{constructor(){this.isMainSession=e=>{var t,n;if(!e)return!1;if(!this.isSessionExpired(e))return!1;const r=this.getSessionKeyFromUrl(e.portal);return!(!(null===(t=this.mainPortalInfo)||void 0===t?void 0:t.portalUrl)||r!==this.getSessionKeyFromUrl(null===(n=this.mainPortalInfo)||void 0===n?void 0:n.portalUrl))},this.processInvalidSignInSession=()=>{this.removeAuthInfo(),this.clearSessions()},this.gotoSignInPage=()=>{let e;if(window.jimuConfig.isDevEdition)e=`${location.protocol}//${location.host}/page/set-portalurl`;else{if(window.jimuConfig.isInPortal)return void this.signIn(`${window.location.pathname}${window.location.search}`,!1);e=`${location.protocol}//${location.host}/page/landing`}0!==window.location.href.indexOf(e)&&(window.location.href=e)},this.handleAuthError=(e,t=!0)=>uv(this,void 0,void 0,(function*(){const n=e.options;if(e instanceof ov.a&&n&&(!n.authentication||498===e.code||"AUTHENTICATION_ERROR_CODE"===e.code)){const n=this.getSessionKeyFromUrl(e.url);return this.sessions&&this.sessions[n]&&delete this.sessions[n],yield this.signIn(window.location&&window.location.href,t,e.url)}throw e})),this.onSessionRequestMessage=this.onSessionRequestMessage.bind(this)}getMainSession(){var e;if(!this.sessions||!this.mainPortalInfo)return null;const t=this.sessions[this.getSessionKeyFromUrl(null===(e=this.mainPortalInfo)||void 0===e?void 0:e.portalUrl)];return this.isSessionExpired(t)?t:null}getSessions(){if(!this.sessions)return[];const e={};return Object.keys(this.sessions).forEach(t=>{const n=this.sessions[t];this.isSessionExpired(n)&&(e[t]=n)}),this.sessions=e,Object.keys(this.sessions).map(e=>this.sessions[e])}clearSessions(){delete this.sessions}onSessionChanged(e){if(this.onSessionChangedCallbacks){const t=this.getSessions();this.onSessionChangedCallbacks.forEach(n=>{n(t,e)})}}static getInstance(){return cv.instance||(cv.instance=new cv,window._sessionManager=cv.instance,this.instance.isSigning=!1,this.instance.signInQueue=[],this.instance.onSessionChangedCallbacks=[]),cv.instance}initSession(e=this.mainPortalInfo){return uv(this,void 0,void 0,(function*(){this.mainPortalInfo=e;const t=window.location.pathname;if(/^\/page\/set-portalurl/.test(t)||/^\/page\/landing/.test(t))return yield Promise.resolve();const n=mg().getState().queryObject["arcgis-auth-origin"];return n&&this.canReadSessionFromParent(window.location.origin)?yield this.readSessionFromParent(n).then(e=>{if(e){const t=this.getSessionKeyFromUrl(e.portal);this.setSession(t,e)}}):(window.addEventListener("message",this.onSessionRequestMessage,!1),window.jimuConfig.isDevEdition||window.jimuConfig.isOutOfExb?(this.initSessionFromStorage(),yield Promise.resolve()):yield this.initSessionFromCookieOrStorage(e))}))}initSessionFromStorage(){const e=this.getSessionFromStorage();if(e){const t=this.getSessionKeyFromUrl(e.portal);this.setSession(t,e)}else(window.jimuConfig.isSite||window.jimuConfig.isBuilder)&&this.gotoSignInPage()}initSessionFromCookieOrStorage(e){return uv(this,void 0,void 0,(function*(){let t=Rp(e.portalUrl);Gh(t)||(t=Wh(t,Ea.Https));const n=yield this.isValidTokenFromStorage(e.portalUrl),r=yield Object(iv.b)(null==e?void 0:e.clientId,t,t).then(e=>e).catch(()=>null),o=this.getSessionFromStorage();if(o){const t=this.getSessionKeyFromUrl(o.portal);n&&r?o.username===r.username?this.setSession(t,o):this.setSesssionByPlatformSelfResponse(r,e):!n&&r?this.setSesssionByPlatformSelfResponse(r,e):n&&!r&&(!kp(window.location.host)||this.readCookie("esri_locale"))?this.setSession(t,o):this.failedToInitSession()}else r?this.setSesssionByPlatformSelfResponse(r,e):this.failedToInitSession()}))}failedToInitSession(){if(this.processInvalidSignInSession(),window.jimuConfig.isSite||window.jimuConfig.isBuilder)throw this.gotoSignInPage(),new Error("Should signIn")}setSesssionByPlatformSelfResponse(e,t){let n=Rp(t.portalUrl);Gh(n)||(n=Wh(n,Ea.Https));const r={expires:(new Date).getTime()+1e3*e.expires_in,server:n,ssl:!0,token:e.token,userId:e.username};let o=av.a.fromCredential(r),i=o.toJSON();i.clientId=t.clientId,o=new av.a(i);const a=this.getSessionKeyFromUrl(o.portal);this.setSession(a,o)}isValidTokenFromStorage(e){return uv(this,void 0,void 0,(function*(){const t=this.getSessionFromStorage();if(null==t?void 0:t.token){const n=e+"/sharing/rest";return yield Object(ov.d)(n,{authentication:t,httpMethod:"GET"}).then(e=>!!(null==e?void 0:e.currentVersion)).catch(e=>(console.warn(null==e?void 0:e.message),!1))}return Promise.resolve(!1)}))}getUserInfo(){return uv(this,void 0,void 0,(function*(){return mg().getState().user?yield Promise.resolve(mg().getState().user.asMutable({deep:!0})):this.getMainSession()?yield this.getMainSession().getUser().then(e=>(this.afterGetUserInfo(e),e)):Promise.resolve(null)}))}afterGetUserInfo(e){mg().dispatch(Cm(e));const t=e.culture||"en-us";op(Cc)?op(Cc)!==t&&(ip(Cc,t),mg().dispatch(tv(!0))):ip(Cc,t)}setMainPortal(e){this.mainPortalInfo=e}getMainPortal(){return this.mainPortalInfo}getTrustedServers(){var e;const t=mg().getState(),n=null===(e=null==t?void 0:t.portalSelf)||void 0===e?void 0:e.authorizedCrossOriginDomains;return!this.trustedServers&&n&&(this.trustedServers=n.map(e=>Wh(zh(e),Ea.Https))),this.trustedServers||[]}isTrustedServer(e){return this.getTrustedServers().some(t=>e.includes(t))}removeSession(e){if(!e)return!1;const t=this.getSessionKeyFromUrl(e.portal);return!!this.removeSessionByKey(t)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(rv.Remove),!0)}removeSessionByKey(e){return!!e&&(this.sessions&&this.sessions[e]&&delete this.sessions[e],!0)}addOrReplaceSession(e){return!!e&&(!!this.doAddOrReplaceSession(e)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(rv.AddOrUpdate),!0))}doAddOrReplaceSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!t&&(this.setSession(t,e),!0)}setSession(e,t){var n;this.isSessionExpired(t)&&(this.sessions||(this.sessions={}),this.sessions[e]=t,e===this.getSessionKeyFromUrl(null===(n=this.mainPortalInfo)||void 0===n?void 0:n.portalUrl)&&(mg().dispatch(Tm(t.token)),mg().getState().user||this.getUserInfo(),this.writeAuthInfo(t)))}getSessionByUrl(e){if(!this.sessions)return;let t=this.getSessionKeyFromUrl(e),n=this.sessions[t];return n||(t=this.getPortalKeyFromUrl(e),n=this.sessions[t]),n}getSessionKeyFromSession(e){return(null==e?void 0:e.server)?e.server:this.getSessionKeyFromUrl(e.portal)}getSessionKeyFromUrl(e){return this.getServerKeyFromUrl(e)||this.getPortalKeyFromUrl(e)}getServerKeyFromUrl(e){const t=/\/rest\/admin\/services(\/|$)/i;let n=e.toLowerCase().indexOf("/rest/services");return-1===n&&t.test(e)&&(n=e.search(t)),qh(n>-1?e.substring(0,n):"")}getPortalKeyFromUrl(e){var t,n;let r="";if(kp(e))r=this.getStandardAGOLSessionKey(e)||"";else{const{customBaseUrl:o,urlKey:i}=this.getPortalUrlInfo(e);if(r=`${i}.${o}`,null===(t=this.mainPortalInfo)||void 0===t?void 0:t.portalUrl){const e=this.getPortalUrlInfo(null===(n=this.mainPortalInfo)||void 0===n?void 0:n.portalUrl);i===e.urlKey&&0===o.indexOf(e.customBaseUrl)&&(r=`${e.urlKey}.${e.customBaseUrl}`)}}return r}getPortalUrlInfo(e){if(!e)return null;let t=e.toLowerCase(),n="",r=t.indexOf("https://");0===r?n="https://":(r=t.indexOf("http://"),0===r&&(n="http://")),r=n.length;let o,i,a=t.indexOf("/sharing/rest",r);a=a<0?t.length:a,t=t.substring(r,a);const s=t.split(".");return o=s[0],s.splice(0,1),i=s.join("."),{urlKey:o,customBaseUrl:i,schema:n}}getSessionFromAuthInfo(e){var t;if(!this.checkAuthInfo(e))return null;const n=this.getPortalFromAuthInfo(e);return new av.a({clientId:null===(t=this.mainPortalInfo)||void 0===t?void 0:t.clientId,token:e.token,tokenExpires:new Date(e.expires),portal:n,username:e.email})}getSessionFromStorage(){var e;const t=null===(e=this.readAuthInfo("exb_auth"))||void 0===e?void 0:e.authInfo,n=this.getSessionFromAuthInfo(t);return n&&this.isMainSession(n)?n:n?(this.processInvalidSignInSession(),null):void 0}readCookie(e){try{return sv.get(e)}catch(e){console.error("Read cookieerror.",e)}}getPortalFromAuthInfo(e){var t;if(window.jimuConfig.isInPortal)return(null===(t=this.mainPortalInfo)||void 0===t?void 0:t.portalUrl)+"/sharing/rest/";const n=e.urlKey?e.urlKey+".":"";let r=e.schema;r=r||"https://";let o=`${r}${n}${e.customBaseUrl}/sharing/rest/`;return"maps.arcgis.com"===e.customBaseUrl?o=r+"www.arcgis.com/sharing/rest/":"mapsdevext.arcgis.com"===e.customBaseUrl?o=r+"devext.arcgis.com/sharing/rest/":"mapsqa.arcgis.com"===e.customBaseUrl&&(o=r+"qaext.arcgis.com/sharing/rest/"),o}isSessionExpired(e){return!!e&&!(new Date(e.tokenExpires)<new Date)}getAuthInfoFromSession(e){const{urlKey:t,customBaseUrl:n,schema:r}=this.getPortalUrlInfo(e.portal);return{portalApp:!1,email:e.username,token:e.token,expires:e.tokenExpires,urlKey:t,customBaseUrl:n,schema:r}}checkAuthInfo(e){return!!e&&!(new Date(e.expires)<new Date)}readAuthInfo(e){let t,n;try{n=JSON.parse(op(e))}catch(e){console.error("Parse localStorage auth error")}if(n)t={authInfo:n,from:"LocalStorage"};else{try{n=JSON.parse(sp(e))}catch(e){console.error("Parse sessionStorage auth error")}t={authInfo:n,from:"SessionStorage"}}return t}writeAuthInfo(e){const t=this.readAuthInfo("exb_auth");this.removeAuthInfo(),"SessionStorage"===t.from?up("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e))):ip("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e)))}removeAuthInfo(){cp("exb_auth"),lp("exb_auth")}getStandardAGOLSessionKey(e){if(!kp(e))return;let t,n;const r=zh(e).split(".");let o;return t=r[0],r.splice(0,1),n=r.join("."),"devext"===t||"mapsdevext.arcgis.com"===n?o="devext.arcgis.com":"qaext"===t||"mapsqa.arcgis.com"===n?o="qaext.arcgis.com":"www"===t||"maps.arcgis.com"===n?o="www.arcgis.com":(o="www.arcgis.com",t.indexOf("dev")>-1||n.indexOf("dev")>-1?o="devext.arcgis.com":(t.indexOf("qa")>-1||n.indexOf("qa")>-1)&&(o="qaext.arcgis.com")),o}getOrgUrl(e,t){let n;return"www.arcgis.com"===e?n=t+".maps.arcgis.com":"devext.arcgis.com"===e?n=t+".mapsdevext.arcgis.com":"qaext.arcgis.com"===e?n=t+".mapsqa.arcgis.com":(n=e,console.error("Bad params.",e,t)),Wh(n,Ea.Https)}getHostedService(e){return uv(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield Object(ov.d)(t+"/rest/info",{httpMethod:"GET"}).then(e=>uv(this,void 0,void 0,(function*(){if(!e.owningSystemUrl)return yield Promise.resolve(null);let t;return/https?:\/\/(www|services)\.arcgis\.com/.test(e.owningSystemUrl)?t="www.arcgis.com":/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsdevext\.arcgis\.com\/?$/.test(mg().getState().portalUrl)?t="devext.arcgis.com":/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsqa\.arcgis\.com\/?$/.test(mg().getState().portalUrl)&&(t="qaext.arcgis.com"),yield Promise.resolve(t)}))):yield Promise.resolve(null)}))}getHostedServiceArcgisKey(e){return uv(this,void 0,void 0,(function*(){const t=zh(e).split("."),n=t[0];let r;return t.splice(0,1),n.includes("servicesdev")?r="devext.arcgis.com":n.includes("servicesqa")?r="qaext.arcgis.com":n.includes("services")&&(r="www.arcgis.com"),r?yield Promise.resolve(r):yield this.getHostedService(e)}))}getSignInDomain(e,t){return uv(this,void 0,void 0,(function*(){if(!e)return null;if(kp(e)){let n=this.getStandardAGOLSessionKey(e);return n||(n=yield this.getHostedServiceArcgisKey(e),n=n||zh(e)),t?this.getOrgUrl(n,t):"https://"+n}{const{customBaseUrl:t,urlKey:n,schema:r}=this.getPortalUrlInfo(e);return`${r||"https://"}${n}.${t}`}}))}signIn(e,t,n){var r,o;return void 0===e&&(e="/"),void 0===t&&(t=!0),void 0===n&&(n=null===(r=this.mainPortalInfo)||void 0===r?void 0:r.portalUrl),uv(this,void 0,void 0,(function*(){"/"==e&&window.jimuConfig.isInPortal&&(e=window.location.pathname);const r=this.getSessionByUrl(n);if(r){if(this._executSignIn(),!t){const t=0===e.indexOf("/");window.location.href=`${location.protocol}//${location.host}${t?"":"/"}${e}`}return yield Promise.resolve(r)}const i=mg().getState(),a=i.queryObject;if(this.isSigning){const r=this.defer();return this.signInQueue.push({desUrl:n,fromUrl:e,popup:t,sessionDefer:r}),yield r.promise}const{clientId:s}=i,u=Rp(yield this.getSignInDomain(n,null==a?void 0:a.org)),c=Mh(Sp("jimu-core"));let l=`${window.location.origin}${c}/oauth-callback.html?clientId=${s}&portal=${u}&popup=${t}&isInPortal=${window.jimuConfig.isInPortal}&fromUrl=${e}`;l=new URL(l).toString();const d={portal:u,clientId:s,redirectUri:l,popup:t,params:{showSignupOption:!0,signupType:"esri"}};return this.isSigning=!0,yield null===(o=av.a.beginOAuth2(d))||void 0===o?void 0:o.then(e=>uv(this,void 0,void 0,(function*(){return this.addOrReplaceSession(e),this.isSigning=!1,this._executSignIn(),yield Promise.resolve(e)})))}))}addSessionChangeListener(e){if("function"!=typeof e)throw new Error("callback must be a function");this.onSessionChangedCallbacks.includes(e)||this.onSessionChangedCallbacks.push(e)}_executSignIn(){if(!this.isSigning&&this.signInQueue){const e=this.signInQueue.pop();e&&this.signIn(e.fromUrl,e.popup,e.desUrl).then(t=>{e.sessionDefer.resolve(t)})}}signOut(){var e,t;const n=this.getMainSession();let r=null==n?void 0:n.portal;r||(r=null===(e=this.mainPortalInfo)||void 0===e?void 0:e.portalUrl,r=r&&Rp(r));const o=(null==n?void 0:n.clientId)||(null===(t=this.mainPortalInfo)||void 0===t?void 0:t.clientId);this.clearSessions(),mg().dispatch(Am());const i=window&&window.location;let a;if(a=window.jimuConfig.isDevEdition?`${i.protocol}//${i.host}/page/set-portalurl`:window.jimuConfig.isInPortal?window.location.href:`${i.protocol}//${i.host}/page/landing`,this.removeAuthInfo(),this.arcgisJSIM&&this.arcgisJSIM.destroyCredentials(),r&&o){a=encodeURIComponent(a);const e=`${r}/oauth2/signout?client_id=${o}&redirect_uri=${a}`;i.href=e}else i.href="/"}switchAccount(){const e=this.getMainPortal(),t=`${null==e?void 0:e.portalUrl}/home/pages/Account/manage_accounts.html#client_id=${null==e?void 0:e.clientId}&redirect_uri=${window.location.href}#`;this.removeAuthInfo(),window.location.href=t}defer(){const e={promise:null,resolve:null,reject:null};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}generateToken(e,t){return uv(this,void 0,void 0,(function*(){const n=Wh(Rp(e)+"generateToken?f=json",Ea.Https),r=t||"";return yield fetch(`${n}&${r}`,{cache:"no-cache",credentials:"include"}).then(e=>uv(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>e,e=>null)}))}getPortalSelf(e){return uv(this,void 0,void 0,(function*(){const t=Wh(Rp(e)+"portals/self?f=json",Ea.Https);return yield fetch(t,{cache:"no-cache",credentials:"include"}).then(e=>uv(this,void 0,void 0,(function*(){return yield e.json()})))}))}getSessionFromWebTierPortal(e,t,n){let r,o;return o=n?Promise.resolve(n):this.getPortalSelf(e),o.then(n=>uv(this,void 0,void 0,(function*(){return r=n,yield this.generateToken(e,t)}))).then(t=>{if(t&&t.token){const n={token:t.token,expires:t.expires,userId:r.user?r.user.username:"",ssl:t.ssl,server:Rp(e)};return av.a.fromCredential(n)}return null}).catch(()=>null)}getSessionFromTrustedServer(e){return uv(this,void 0,void 0,(function*(){const t=(e||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),n=this.getSessionByUrl(t);if(n)return yield Promise.resolve(n);{const e=Wh(zh(window.location.href),Ea.Https);return yield fetch(t+"/rest/info?f=json",{cache:"no-cache",credentials:"include"}).then(e=>uv(this,void 0,void 0,(function*(){return yield e.json()}))).then(n=>{const r=n.owningSystemUrl;if(r){const n=`request=getToken&serverUrl=${t}&referer=${e}`;return this.getSessionFromWebTierPortal(r,n).then(e=>{const n=e,r=e.toJSON();r.portal=t;const o=new av.a(r);return this.addOrReplaceSession(n),this.addOrReplaceSession(o),e})}return null}).catch(e=>(console.warn("Failed to get session from trusted server."),null))}}))}addFromArcGisJSCredential(e){let t;return"server"===e.scope?(t=new av.a({server:e.server,token:e.token,tokenExpires:new Date(e.expires),ssl:e.ssl,username:e.userId}),t.server=qh(e.server||"")):t=av.a.fromCredential(e),!!this.doAddOrReplaceSession(t)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(rv.ArcGISJSSync),!0)}syncToOtherWindowSessionManager(){if(window.jimuConfig.isBuilder){mp("jimu-for-builder").builderAppSync.publishChangeSessionToApp()}else if(window.jimuConfig.isInBuilder){mp("jimu-for-builder").appBuilderSync.publishAppSessionChangeToBuilder()}}syncSessionsFromOtherWindow(e){this.clearSessions(),e.forEach(e=>{this.doAddOrReplaceSession(e)}),this.onSessionChanged(rv.OtherWindowSync)}readSessionFromParent(e){return uv(this,void 0,void 0,(function*(){return yield av.a.fromParent(e).then(e=>(console.log("fromparent session:",e),e)).catch(e=>(console.error("Get session from parent error. Please check this link for details: https://esri.github.io/arcgis-rest-js/guides/embedded-apps/",e),null))}))}canReadSessionFromParent(e){return e.endsWith(".arcgis.com")}onSessionRequestMessage(e){var t,n,r=e.origin===window.location.origin||this.canReadSessionFromParent(e.origin),o="arcgis:auth:requestCredential"===e.data.type;if(r&&o)try{let n;n=e.origin.endsWith("dev.arcgis.com")?"https://devext.arcgis.com":e.origin.endsWith("qa.arcgis.com")?"https://qaext.arcgis.com":e.origin.endsWith(".arcgis.com")?"https://www.arcgis.com":e.origin;const r=this.getSessionByUrl(n);if(!r)return void e.source.postMessage({type:"arcgis:auth:error",error:{name:"NoCredential",message:"Does not find credential."}},e.origin);var i=r.toCredential();i.server=i.server.replace("/sharing/rest",""),null===(t=e.source)||void 0===t||t.postMessage({type:"arcgis:auth:credential",credential:i},e.origin)}catch(t){null===(n=e.source)||void 0===n||n.postMessage({type:"arcgis:auth:error",error:{name:t.name,message:t.message}},e.origin),console.error("Response requestCredential error.",t)}}}var lv=cv,dv=n(83),fv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let pv={};function hv(e){return fv(this,void 0,void 0,(function*(){const t=lv.getInstance(),n=t.handleAuthError.bind(t);return pv[e]||(pv[e]=Object(ov.d)(Rp(e)+"portals/self",{authentication:t.getMainSession(),httpMethod:"GET"}).then(t=>{if(!t.isPortal){const n=`https://${t.urlKey}.${t.customBaseUrl}`;t.urlKey&&!_p(e,n)&&mg().dispatch(Im(n))}return mg().dispatch(Vm(t)),t}).catch(e=>{n(e,!1)})),pv[e]}))}function gv(){pv={}}const mv={};function vv(e=Rh().appId){return fv(this,void 0,void 0,(function*(){return mv[e]||(window.jimuConfig.isDevEdition?mv[e]=function(e){return fv(this,void 0,void 0,(function*(){return yield window.fetch(`/apps/${e}/info.json`).then(e=>fv(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>Object.assign(Object.assign({},e),{name:e.title}))}))}(e):mv[e]=function(e){return fv(this,void 0,void 0,(function*(){const t=lv.getInstance(),n=mg().getState().portalUrl;return yield Object(dv.a)(e,{portal:Rp(n),authentication:t.getSessionByUrl(n)}).then(e=>Object.assign(Object.assign({},e),{name:e.title})).catch(e=>fv(this,void 0,void 0,(function*(){return yield Promise.reject({})})))}))}(e)),mv[e]}))}function yv(e){delete mv[e]}var bv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Sv{constructor(){this.jimuThemeStyleModule={},this.jimuComponentStyles={},this.jimuThemeVariablesGenerators={},this.themeLoadPromises={},this.themeModules={},vg(this.onThemeChange.bind(this),["appConfig","theme"]),vg(this.onCustomThemeChange.bind(this),["appConfig","customTheme"]),vg(this.onPortalSelfChange.bind(this),["portalSelf"])}static getInstance(){return Sv.instance||(Sv.instance=new Sv,window._themeManager=Sv.instance),Sv.instance}static getInAppInstance(){var e;return(null===(e=null===window||void 0===window?void 0:window._appWindow)||void 0===e?void 0:e._themeManager)?window._appWindow._themeManager:this.getInstance()}registerJimuThemeStyleModule(e,t){this.jimuThemeStyleModule[e]||(this.jimuThemeStyleModule[e]=t,t.variablesGenerator&&(this.jimuThemeVariablesGenerators[e]=t.variablesGenerator),Object.entries(t.componentStyles).forEach(([e,t])=>{this.jimuComponentStyles[e]?console.error("Component name conflicts.",e):this.jimuComponentStyles[e]=t}))}loadTheme(e){return bv(this,void 0,void 0,(function*(){const t=mg().getState().appConfig;if(this.themeModules[e])return this.updateThemeVariablesInState(t),yield Promise.resolve(this.themeModules[e]);let n;if(this.themeLoadPromises[e]={},"themes/default/"===e)n={manifest:be({}),styleModule:null,variables:{themeVariables:be({}),mergedToJimuVariables:this.mergeThemeVarsToJimuVars(be({})),customVariables:be({})}};else{const r=t.theme===e&&t.themeManifest?t.themeManifest:yield this.loadThemeManifest(e),o=yield this.loadThemeVariables(e);n={manifest:r,styleModule:r.styleFiles&&r.styleFiles.js&&(yield vp(e+"/style.js")),variables:{themeVariables:o,mergedToJimuVariables:this.mergeThemeVarsToJimuVars(o),customVariables:be({})}}}return this.themeModules[e]=n,this.updateThemeVariablesInState(t),yield Promise.resolve(n)}))}updateThemeVariablesInState(e){e.customTheme&&!pc(e.customTheme,{})?this.updateThemeCustomVariables(e.theme,e.customTheme):mg().dispatch($m(this.getThemeVariables(e.theme)))}isThemeLoaded(e){return!!this.themeModules[e]}loadThemeVariables(e){return bv(this,void 0,void 0,(function*(){return this.themeLoadPromises[e]||(this.themeLoadPromises[e]={}),this.themeLoadPromises[e].variables?yield this.themeLoadPromises[e].variables:(this.themeLoadPromises[e].variables=window.fetch(`${Lh()}${e}/variables.json`).then(e=>bv(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>be(e)),this.themeLoadPromises[e].variables)}))}loadThemeManifest(e){return bv(this,void 0,void 0,(function*(){return this.themeLoadPromises[e]||(this.themeLoadPromises[e]={}),this.themeLoadPromises[e].manifest||(this.themeLoadPromises[e].manifest=fetch(`${Lh()}${e}/manifest.json`).then(e=>bv(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>bv(this,void 0,void 0,(function*(){const t=be(e);return yield Promise.resolve(t)})))),yield this.themeLoadPromises[e].manifest}))}refreshSharedTheme(){var e,t,n;const r=null===(t=null===(e=mg().getState())||void 0===e?void 0:e.appConfig)||void 0===t?void 0:t.theme,o=this.getThemeModule(r),i=null===(n=null==o?void 0:o.variables)||void 0===n?void 0:n.themeVariables;r&&i&&!i.sharedThemeVariables&&(o.variables.mergedToJimuVariables=this.mergeThemeVarsToJimuVars(o.variables.themeVariables),mg().dispatch($m(this.getThemeVariables(r))))}loadSharedTheme(e){e&&!pc(this.sharedThemeJson,e)&&(this.sharedThemeJson=e)}getSharedThemeJson(){return this.sharedThemeJson}updateThemeCustomVariables(e,t){this.themeModules[e]&&this.themeModules[e].variables&&(this.themeModules[e].variables.customVariables=t,mg().getState().appConfig.theme===e&&mg().dispatch($m(this.getThemeVariables(e))))}addThemeCustomVariables(e,t){if(!this.themeModules[e]||!this.themeModules[e].variables)return;const n=this.themeModules[e].variables.customVariables,r=Object.assign({},Object.assign({},function e(t,n){return[].concat(...Object.keys(t).map(r=>"object"==typeof t[r]?e(t[r],n?`${n}/${r}`:r):{[n?`${n}/${r}`:r]:t[r]}))}(t)));return Object.keys(r).some(e=>{var t;const o=null===(t=Object.keys(r[e]))||void 0===t?void 0:t[0];return n.getIn(o.split("/"))!==r[e][o]})?(this.themeModules[e].variables.customVariables=this.themeModules[e].variables.customVariables.merge(t,{deep:!0}),mg().getState().appConfig.theme===e&&mg().dispatch($m(this.getThemeVariables(e))),this.themeModules[e].variables.customVariables):null}removeThemeCustomVariables(e,t){this.themeModules[e]&&this.themeModules[e].variables&&(t.forEach(t=>{const n=t.split(".");if(n.length>1){const t=n.concat([]),r=t.pop(),o=this.themeModules[e].variables.customVariables.getIn(t);o&&(this.themeModules[e].variables.customVariables=this.themeModules[e].variables.customVariables.setIn(t,o.without(r)))}else this.themeModules[e].variables.customVariables=this.themeModules[e].variables.customVariables.without(n[0])}),mg().getState().appConfig.theme===e&&mg().dispatch($m(this.getThemeVariables(e))))}clearAllThemeCustomVariables(){for(const e in this.themeModules)this.themeModules[e].variables.customVariables=be({})}getGlobalStyles(e){return this.getComponentStyles("Global",Object.assign({theme:e}))}getComponentStyles(e,t){let n,r;const o=mg()&&mg().getState().appConfig&&mg().getState().appConfig.theme;return n=this.jimuComponentStyles[e],r=this.themeModules[o]&&this.themeModules[o].styleModule&&this.themeModules[o].styleModule[e],dn`
      ${n&&n(t)}
      ${r&&r(t)}
    `}getThemeVariables(e){const t=this.getRawThemeVariables(e);return this.parseVars(t)}getRawThemeVariables(e){if(!this.themeModules[e]||!this.themeModules[e].variables)return be({});const t=this.themeModules[e].variables.themeVariables,n=this.themeModules[e].variables.customVariables,r=this.mergeThemeVarsToJimuVars(t,n);return this.themeModules[e].variables.mergedToJimuVariables=r,r}getCustomVariables(e){return this.themeModules[e]&&this.themeModules[e].variables&&this.themeModules[e].variables.customVariables}getThemeManifest(e){return this.themeModules[e]&&this.themeModules[e].manifest}getThemeModule(e){return this.themeModules[e]}mergeThemeVarsToJimuVars(e,t){if(!Object.keys(this.jimuThemeVariablesGenerators).find(e=>"jimu-ui"===e))return void console.error("Does not find jimu-ui theme.");let n=this.jimuThemeVariablesGenerators["jimu-ui"].generate(e,t);return Object.keys(this.jimuThemeVariablesGenerators).forEach(r=>{"jimu-ui"!==r&&(n=n.merge(this.jimuThemeVariablesGenerators[r].generate(e,t),{deep:!0}))}),n}parseVars(e,t){if(!e)return be({});t||(t=e.merge({}));const n=/\$\{([^<]+)\}/;for(const r in e){const o=e[r],i=Object.prototype.toString.call(o);if("[object Object]"===i)e=e.setIn([r],this.parseVars(o,t));else if("[object String]"===i&&n.test(o)){const i=o.match(n)[1];e=e.setIn([r],Ks(t,i))}}return e}onThemeChange(e,t){Pg(()=>{e&&t&&e!==t&&this.loadTheme(t)})}onCustomThemeChange(e,t){Pg(()=>{pc(e,t)||this.updateThemeCustomVariables(mg().getState().appConfig.theme,t)})}onPortalSelfChange(e,t){Pg(()=>{var n,r,o,i,a;if(!pc(null===(n=null==e?void 0:e.portalProperties)||void 0===n?void 0:n.sharedTheme,null===(r=null==t?void 0:t.portalProperties)||void 0===r?void 0:r.sharedTheme)){if(window.jimuConfig.isBuilder){const e=null===(o=null===window||void 0===window?void 0:window._appWindow)||void 0===o?void 0:o._themeManager;e&&(e.loadSharedTheme(null===(i=null==t?void 0:t.portalProperties)||void 0===i?void 0:i.sharedTheme),e.refreshSharedTheme())}this.loadSharedTheme(null===(a=null==t?void 0:t.portalProperties)||void 0===a?void 0:a.sharedTheme),this.refreshSharedTheme()}})}}var wv,Iv,Ev,Ov,Tv,Cv;!function(e){e.Display1="display1",e.Display2="display2",e.Display3="display3",e.Display4="display4",e.Display5="display5",e.Display6="display6",e.Body1="body1",e.Body2="body2",e.Caption1="caption1",e.Caption2="caption2"}(wv||(wv={})),function(e){e.White="white",e.Black="black",e.Transparent="transparent"}(Iv||(Iv={})),function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(Ev||(Ev={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark"}(Ov||(Ov={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark",e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(Tv||(Tv={})),function(e){e.Color="color",e.Background="bg",e.Border="border",e.BorderRadius="borderRadius",e.Shadow="shadow"}(Cv||(Cv={}));const Av={navigation:["nav","pagination","slider","navButtonGroup"]};var xv=n(150),Pv=n.n(xv);function Dv(e,t,n){switch(e.type){case"@import":case"decl":case"comm":return e.return=e.return||e.value;case"rule":e.value=Array.isArray(e.props)?e.props.join(","):e.props,Array.isArray(e.children)&&e.children.forEach((function(e){"comm"===e.type&&(e.children=e.value)}))}var r=wt(Array.prototype.concat(e.children),Dv);return ze(r)?e.return=e.value+"{"+r+"}":""}function Rv(e,t,n,r){if("@keyframes"===e.type||"@supports"===e.type||"rule"===e.type&&(!e.parent||"@media"===e.parent.type||"rule"===e.parent.type)){var o=Pv.a.transform(Dv(e));e.children=o?mt(o)[0].children:[],e.return=""}}Object.defineProperty(Rv,"name",{value:"stylisRTLPlugin"});var jv=Rv;const _v=function(){var e;const t=qv(),n=(null===(e=null==t?void 0:t.appContext)||void 0===e?void 0:e.isRTL)?{stylisPlugins:[jv],key:"emotion-cache-rtl"}:{key:"emotion-cache-ltr"};return Pt(n)}(),kv=/^var\(--(.+?)\)$/;function Mv(e,t=""){var n,r;const o=""!==t?t:null!==(r=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==r?r:"";return un(e)(e=>Sv.getInstance().getComponentStyles(o,e))}function Nv(e=""){if(""===e)return null;const t=e.split("/");let n=null;return t.length>1?n=t.pop():1===t.length&&(n=t[0]),n}function Lv(e,t,n){var r;if(null==e||""===e||null==t||0===t||null==n)return null;let o;const i=null!==(r=Ks(n,e))&&void 0!==r?r:"";if(""===i)return null;const a=Ks(n,["palette",e]);if(null==a)return null;const s=Object.keys(a).find((function(e){if(pc(qn(a[e]),qn(i)))return e}));return null!==s&&""!==s&&(o=parseInt(s)+100*t),o}function Uv(e,t,n){if(null==e||""===e||null==t||0===t||null==n)return null;const r=Ks(n,["palette",e]),o=Lv(e,-t,n);return o<100?n.white:r[o]}function Fv(e,t,n){if(null==e||""===e||null==t||0===t||null==n)return null;const r=Ks(n,["palette",e]),o=Lv(e,t,n);return o>900?n.black:r[o]}function $v(e,t){var n;if("string"!=typeof e)return null;if(null==t){const e=null===(n=mg().getState().appConfig)||void 0===n?void 0:n.theme;t=window.jimuConfig.isInBuilder?Sv.getInAppInstance().getThemeVariables(e):Sv.getInstance().getThemeVariables(e)}return Ks(t,e)}function Vv(e,t,n){var r;if("string"!=typeof e)return e;if(/^var\(--(.+?)\)$/.test(e))return e;if(null==n){const e=null===(r=mg().getState().appConfig)||void 0===r?void 0:r.theme;n=window.jimuConfig.isInBuilder?Sv.getInAppInstance().getThemeVariables(e):Sv.getInstance().getThemeVariables(e)}const o=n.colors.palette;if(null==o)return e;let i=e;const a=[100,200,300,400,500,600,700,800,900];let s=!1;return Object.keys(Tv).some(n=>{n=n.toLowerCase();const r=o[n];return a.some(o=>r[o]===e&&(s=!0,i=t?`var(--${n}-${o})`:`colors.palette.${n}.${o}`,!0)),s}),i}function Bv(e,t=""){var n;let r;return""===t&&(t=null===(n=mg().getState().appConfig)||void 0===n?void 0:n.theme),r=window.jimuConfig.isInBuilder?Sv.getInAppInstance().getRawThemeVariables(t):Sv.getInstance().getRawThemeVariables(t),r.getIn(["components",e])}function Gv(e){return kv.test(e)}function Wv(e,t){var n;if("string"!=typeof e)return null;let r,o="colors";if(Gv(e)){r=e.match(kv)[1].split("-")}else r=e.split(".");return r.length>1&&parseInt(r[1])%100==0?o="colors.palette":"org"===(null==r?void 0:r[0])&&(o="colors.orgSharedColors",r=r.slice(1)),null!==(n=$v(`${o}.${r.join(".")}`,t))&&void 0!==n?n:e}function qv(){if(window.jimuConfig.isInBuilder)return window.parent._appState}function zv(e,t){var n,r;if(!window.jimuConfig.isInBuilder)return e;const o=function(){if(window.jimuConfig.isInBuilder)return window.parent._themeManager}(),i=qv(),a=""!==t?t:null!==(r=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==r?r:"",s=un(e)(e=>o.getComponentStyles(a,e));return function(e){return E.createElement(Kt,{theme:o.getThemeVariables(i.appConfig.theme)},E.createElement(Ht,{value:_v},E.createElement(s,Object.assign({},e))))}}function Hv(e,t){if(!window.jimuConfig.isInBuilder)return e;const n=qv(),r=Qt(e);return function(e){return E.createElement(Kt,{theme:n.theme},E.createElement(Ht,{value:_v},E.createElement(r,Object.assign({},e))))}}function Jv(){return window.jimuConfig.isInBuilder?qv().theme:null}function Yv(e){let t,n=Sv.getInstance().getSharedThemeJson();if(window.jimuConfig.isInBuilder&&(n=Sv.getInAppInstance().getSharedThemeJson()),null!=n){const{header:r,body:o,button:i,logo:a,fonts:s}=n;t=be({sharedThemeVariables:{header:Object.assign({},Qv(r)),body:Object.assign({},Qv(o)),button:Object.assign({},Qv(i)),logo:a,fonts:s}}),e&&(t=be({colors:Object.assign({},Zv(null==i?void 0:i.background)&&{primary:i.background}),header:t.sharedThemeVariables.header,body:t.sharedThemeVariables.body,components:Object.assign({},Zv(null==i?void 0:i.text)&&{button:{variants:{primary:{default:{color:i.text}}}}}),link:Zv(null==o?void 0:o.link)?{color:null==o?void 0:o.link,hover:{color:null==o?void 0:o.link}}:{}}))}return t}function Xv(e,t){var n,r,o,i,a,s,u;const c=Av[e];let l,d;return window.jimuConfig.isBuilder&&!t?(l=null===(i=null===(o=null===(r=null===(n=mg())||void 0===n?void 0:n.getState())||void 0===r?void 0:r.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===i?void 0:i.theme,d=Sv.getInAppInstance().getThemeVariables(l)):(l=null===(u=null===(s=null===(a=mg())||void 0===a?void 0:a.getState())||void 0===s?void 0:s.appConfig)||void 0===u?void 0:u.theme,d=Sv.getInstance().getThemeVariables(l)),c.map(e=>{var t;const n=d.getIn(["components",e]),r=null!==(t=null==n?void 0:n.variants)&&void 0!==t?t:be({default:n});if("navButtonGroup"===e){let t=be({});return["default","primary","tertiary"].forEach(e=>{var n;const o=null===(n=null==r?void 0:r[e])||void 0===n?void 0:n.item,i=d.getIn(["components","button","variants",e]).merge(null!=o?o:{},{deep:!0});t=t.set(e,Object.assign(Object.assign({},r[e]),{item:i}))}),{component:e,styles:t}}return{component:e,styles:r}})}function Kv(e){var t;const n=(null==e?void 0:e.theme)===bc,r=this.getMappedShareThemeVariables(n);let o={};return o=(null==e?void 0:e.theme)===bc||!pc(null===(t=null==e?void 0:e.customTheme)||void 0===t?void 0:t.sharedThemeVariables,null==r?void 0:r.sharedThemeVariables)?Object.assign(Object.assign({},null==e?void 0:e.customTheme),r):null==e?void 0:e.customTheme,o}function Qv(e){return null==e?{}:Object.assign(Object.assign(Object.assign({},Zv(e.background)&&{bg:e.background}),Zv(e.text)&&{color:e.text}),Zv(e.link)&&{link:e.link})}function Zv(e){return"string"==typeof e&&"no-color"!==e}const ey={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"};var ty=e=>"code"in e?!!ey[e.code]:16===e.which||17===e.which||18===e.which||91===e.which;const ny={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"},ry={esc:27,space:32,enter:13,tab:9,up:38,down:40,home:36,end:35,n:78,p:80};function oy(e){if("undefined"==typeof window)return;let t=e.key;navigator.userAgent.includes("Edge")&&(ty(e)||ny[e.keyCode]||(t="key"+t));const n=new KeyboardEvent(e.type,{key:t+"-manual",code:e.code,location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which});document.dispatchEvent(n)}var iy,ay,sy={loading:"Loading",apply:"Apply",ok:"OK",publish:"Publish",cancel:"Cancel",yes:"Yes",no:"No",open:"Open",close:"Close",widgetLoadError:"Fail to load",notPublishError:"This item is not published. Please open this item in Experience Builder, then click <b>&nbsp;Publish&nbsp;</b> to publish it.",versionUpdateMsg:"New updates are available. Click Reload to get the latest updates.",userLocaleChangeMsg:"The user locale has changed. Click Reload to refresh the page.",doUpdate:"Reload",search:"Search",delete:"Delete",about:"About",neverUnsupportedBrowserTitle:"Unsupported browser",neverUnsupportedBrowserOnlineContent:"You are using a browser that is not supported by [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>. Provide your feedback through <feedback-link>GeoNet, the Esri Community</feedback-link>.",neverUnsupportedBrowserEnterpriseContent:"You are using a browser that is not supported [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>.",message_StringSelectionChange:"String Selection Changes",message_ExtentChange:"Extent Changes",message_DataRecordsSelectionChange:"Record Selection Changes",message_DataRecordSetChange:"Records Created",message_SelectDataRecord:"Select Data Record",actions:"Actions",noActions:"No available actions",export:"Export",exportAll:"Export all",exportSelected:"Export selected",largeWarningTitle:"Are you sure you want to export all data records? ",largeWarningContent:"Exporting large dataset will take time.",tooLargeWarningTitle:"You can only export the first {max} records.",tooLargeWarningContent:"Dataset export is limited to the first {max} records.",dataAction_ExportJson:"Export to JSON",dataAction_ExportCSV:"Export to CSV",dataAction_ExportGeoJson:"Export to GeoJSON",messageAction_SelectDataRecord:"Select Data Records",messageAction_FilterDataRecord:"Filter Data Records",icon:"Icon",small:"Small",low:"Low",medium:"Medium",high:"High",large:"Large",experience:"Experience",template:"Template",widget:"Widget",section:"Section",view:"View",page:"Page",dialog:"Window",layout:"Layout",theme:"Theme",dataSource:"Datasource",block:"Block",screenGroup:"Screen group",screen:"Screen",dialogConfirmationDefaultText:"I agree to the above terms and conditions",dialogPreventDisplayAgainDefaultText:"Don't show this again",noEditPrivilegesError:"Your account does not have permission to create or modify data.",noEditContentPrivilegesError:"Your account does not have permission to create or modify content.",essentialAppsLicenseErrorForApp:"Your account is not licensed to use an app that is not public. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",essentialAppsLicenseErrorForBuilder:"Your account is not licensed for Experience Builder. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",roleError:"Experience Builder Developer Edition requires a level 2 ArcGIS account to work. Please login with an account that has level 2 privileges.",roleError2:"Experience Builder Developer Edition requires an ArcGIS organization account with a user type that includes privileges to create content.",invalidResourceExperience:"This is not a supported item.",invalidResourceItem:"Item does not exist or is inaccessible.",invalidResourcePermission:"You do not have permissions to access this resource.",dataSourceCreateError:"Data is inaccessible.",blockedByAdminErrorForApp:"Your organization has blocked access to this application. Please contact your administrator for details.",blockedByAdminErrorForBuilder:"Your organization has blocked access to Experience Builder. Please contact your administrator for details.",upgradedFrom:"Upgraded from previous config",versionIsHigh:"Oops.. It seems this experience is built with a higher version of ArcGIS Experience Builder. Please upgrade to the latest version to view.",badVersion:"Oops.. It seems the version of this experience is incorrect. Please check its configuration file."},uy=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e.AppList="AppList",e.Builder="Builder",e.Experience="Experience"}(iy||(iy={})),function(e){e.InvalidUserLevel="InvalidUserLevel",e.InvalidPrivilege="InvalidPrivilege",e.InvalidLicense="InvalidLicense",e.InvalidAppBlockedByOrg="InvalidAppBlockedByOrg",e.InvalidResourceExperience="InvalidResourceExperience",e.InvalidResourceItem="InvalidResourceItem",e.InvalidResourcePermission="InvalidResourcePermission",e.NullInfo=""}(ay||(ay={}));function cy(e){return uy(this,void 0,void 0,(function*(){return yield dy(e).then(e=>e.valid)}))}function ly(e){return uy(this,void 0,void 0,(function*(){return yield wy(e).then(e=>uy(this,void 0,void 0,(function*(){return yield gy(e)})))}))}function dy(e){return uy(this,void 0,void 0,(function*(){return yield wy(e).then(t=>uy(this,void 0,void 0,(function*(){const n=function(e){return uy(this,void 0,void 0,(function*(){const t=mg().getState().portalUrl,n=function(){const e=mg().getState();return e.appId||e.queryObject.id||e.queryObject.template}(),r={valid:!0,isExperience:!0,isValidItem:!0,hasPermissionToAccess:!0};return e===iy.AppList||window.jimuConfig.isDevEdition?yield Promise.resolve(r):n?/\.json$/.test(n)||/^https/.test(n)?yield Promise.resolve(r):yield yy(t,n).then(e=>!e||"Web Experience"!==e.type&&"Web Experience Template"!==e.type?(r.valid=!1,r.isExperience=!1,r):r).catch(e=>(e&&"CONT_0001"===e.code?(r.valid=!1,r.isValidItem=!1):(r.valid=!1,r.hasPermissionToAccess=!1),r)):yield Promise.resolve(r)}))}(e),r=function(e){return uy(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition||e!==iy.Builder&&e!==iy.AppList?Promise.resolve(!0):yield vy().then(e=>!(!e||!e.orgId)).catch(()=>!1)}))}(e),o=function(e){return uy(this,void 0,void 0,(function*(){return yield py().then(t=>uy(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition&&t&&(e===iy.Builder||e===iy.AppList)?yield function(){return uy(this,void 0,void 0,(function*(){return yield vy().then(e=>!(!e||"2"!==e.level)).catch(()=>!1)}))}():yield Promise.resolve(!0)})))}))}(e),i=function(e,t){return uy(this,void 0,void 0,(function*(){return yield gy(t).then(t=>{const n={valid:!1,capabilities:t,invalidInfo:ay.NullInfo,invalidMessage:""};if(window.jimuConfig.isDevEdition){if(e===iy.AppList)return n.valid=t.canCreateExperience,n;if(e===iy.Builder)return n.valid=t.canCreateExperience,n;if(e===iy.Experience)return n.valid=!0,n}else{if(e===iy.AppList)return n.valid=!0,n;if(e===iy.Builder)return n.valid=t.canCreateExperience,n;if(e===iy.Experience)return n.valid=!0,n}})}))}(e,t),a=function(e,t){return uy(this,void 0,void 0,(function*(){const n=mg().getState(),r=n.portalUrl;return window.jimuConfig.isDevEdition?yield Promise.resolve({valid:!0,viewOnly:!1}):e===iy.Builder||e===iy.AppList?yield Promise.resolve(t):n.appId?/^\/templates\/.*\.json$/.test(n.appId)?yield Promise.resolve({valid:!0,viewOnly:!1}):yield function(e,t){return uy(this,void 0,void 0,(function*(){return yield yy(e,t).then(e=>e&&"public"===e.access)}))}(r,n.appId).then(e=>e&&(t.valid||"OAUTH_0070"!==t.messageCode)?{valid:!0,viewOnly:!1}:t).catch(e=>({valid:!0,viewOnly:!1})):Promise.resolve({valid:!0,viewOnly:!1})}))}(e,t);return yield Promise.all([n,r,o,i,a])}))).then(t=>{const[n,r,o,i,a]=t,s={valid:n.valid&&r&&o&&i.valid&&a.valid&&(e!==iy.Builder||!a.viewOnly),capabilities:{canViewExperience:o&&i.capabilities.canViewExperience&&a.valid,canCreateExperience:o&&i.capabilities.canCreateExperience&&a.valid&&!a.viewOnly,canUpdateExperience:o&&i.capabilities.canUpdateExperience&&a.valid&&!a.viewOnly,canDeleteExperience:o&&i.capabilities.canDeleteExperience&&a.valid&&!a.viewOnly,canShareExperience:o&&i.capabilities.canShareExperience&&a.valid&&!a.viewOnly,canEditFeature:i.capabilities.canEditFeature},invalidInfo:ay.NullInfo,invalidMessage:""};return s.invalidInfo=function(e,t,n,r,o,i){let a=ay.NullInfo;a=r?i.valid?!o.valid||!n||e===iy.Builder&&i.viewOnly?ay.InvalidPrivilege:t.valid?ay.NullInfo:t.isExperience?t.isValidItem?ay.InvalidResourcePermission:ay.InvalidResourceItem:ay.InvalidResourceExperience:"OAUTH_0070"===i.messageCode?ay.InvalidAppBlockedByOrg:ay.InvalidLicense:ay.InvalidUserLevel;return a}(e,n,r,o,i,a),s.invalidMessage=function(e,t){const n=xf(),r=my();let o="";r?t===ay.InvalidLicense?e===iy.Builder||e===iy.AppList?o=n.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:sy.essentialAppsLicenseErrorForBuilder}):e===iy.Experience&&(o=n.formatMessage({id:"essentialAppsLicenseErrorForApp",defaultMessage:sy.essentialAppsLicenseErrorForApp})):t===ay.InvalidAppBlockedByOrg?e===iy.Builder||e===iy.AppList?o=n.formatMessage({id:"blockedByAdminErrorForBuilder",defaultMessage:sy.blockedByAdminErrorForBuilder}):e===iy.Experience&&(o=n.formatMessage({id:"blockedByAdminErrorForApp",defaultMessage:sy.blockedByAdminErrorForApp})):t===ay.InvalidPrivilege?o=window.jimuConfig.isDevEdition?n.formatMessage({id:"roleError2",defaultMessage:sy.roleError2}):n.formatMessage({id:"noEditContentPrivilegesError",defaultMessage:sy.noEditContentPrivilegesError}):t===ay.InvalidUserLevel?o=n.formatMessage({id:"roleError",defaultMessage:sy.roleError}):t===ay.InvalidResourceExperience?o=n.formatMessage({id:"invalidResourceExperience",defaultMessage:sy.invalidResourceExperience}):t===ay.InvalidResourceItem?o=n.formatMessage({id:"invalidResourceItem",defaultMessage:sy.invalidResourceItem}):t===ay.InvalidResourcePermission&&(o=n.formatMessage({id:"invalidResourcePermission",defaultMessage:sy.invalidResourcePermission})):o="";return o}(e,s.invalidInfo),s})}))}function fy(){return uy(this,void 0,void 0,(function*(){return yield function(){return uy(this,void 0,void 0,(function*(){const e=mg().getState(),t=e.portalSelf,n=e.portalUrl;return t?yield Promise.resolve(t):n?yield hv(n):yield Promise.resolve(null)}))}().then(e=>e&&e.isPortal?e.currentVersion:null).catch(e=>null)}))}function py(){return uy(this,void 0,void 0,(function*(){const e=yield fy();return!!e&&Number(e)<=6.1}))}function hy(){return uy(this,void 0,void 0,(function*(){const e=yield fy();return!!e&&Number(e)<=7.3}))}function gy(e){return uy(this,void 0,void 0,(function*(){const t={canViewExperience:!0,canCreateExperience:!1,canUpdateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canEditFeature:!1};return yield function(){return uy(this,void 0,void 0,(function*(){return yield vy().then(e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:user:createItem"))).catch(()=>!1)}))}().then(n=>uy(this,void 0,void 0,(function*(){const r=n&&e.valid&&!e.viewOnly;return t.canCreateExperience=r,t.canUpdateExperience=r,t.canDeleteExperience=r,t.canShareExperience=r,yield function(){return uy(this,void 0,void 0,(function*(){return yield vy().then(e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("features:user:edit"))).catch(()=>!0)}))}()}))).then(e=>(t.canEditFeature=e,t))}))}function my(){return lv.getInstance().getMainSession()}function vy(){return uy(this,void 0,void 0,(function*(){const e=my();return e?yield e.getUser().then(e=>e).catch(t=>uy(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${e.username}'.`),yield Promise.reject()}))):(console.log("The user has not signed in."),yield Promise.reject())}))}function yy(e,t){return uy(this,void 0,void 0,(function*(){const e=my(),n=mg().getState().appInfo;return n&&n.name?yield Promise.resolve(n):yield vv(t).then(e=>e).catch(t=>uy(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${null==e?void 0:e.username}'.`),yield Promise.reject(t)})))}))}function by(e){return uy(this,void 0,void 0,(function*(){return!window.jimuConfig.isDevEdition||(e===iy.Builder||e===iy.AppList)&&!(yield py())}))}let Sy=null;function wy(e){return uy(this,void 0,void 0,(function*(){const t=mg().getState().portalUrl,n=(yield hy())?"arcgisWebApps":"experienceBuilder";return Sy||(Sy=(yield by(e))?yield function(e,t,n){return uy(this,void 0,void 0,(function*(){const n={valid:!1,viewOnly:!1,messageCode:""},r=lv.getInstance().getSessionByUrl(e);if(r){const e=`${r.portal}/oauth2/validateAppAccess?client_id=${t}`;return yield Object(ov.d)(e,{authentication:r}).then(e=>(!1===e.valid?(n.messageCode=e.messageCode||"",console.log("not-authorized",`You are currently signed in as: '${r.username}'.`)):(n.valid=!0,n.viewOnly=!!e.viewOnlyUserTypeApp),n)).catch(e=>uy(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${r.username}'.`),yield Promise.resolve(n)})))}return yield Promise.resolve(n)}))}(t,n):yield Promise.resolve({valid:!0,viewOnly:!1})),Sy}))}var Iy=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Ey={},Oy={};function Ty(e){return Iy(this,void 0,void 0,(function*(){if(Oy[e])return yield Oy[e];let t=[];const n=xp.getInstance().getExtensions(hp.DependencyDefine).filter(t=>t.getDependencyKey()===e)[0];n?t=t.concat(n.getResources()):/^http/.test(e)?t.push({url:e}):console.error("Unknown dependency.",e);const r=[];return t.forEach(e=>{Ey[e.url]?r.push(Ey[e.url]):r.push(function e(t){return Iy(this,void 0,void 0,(function*(){return t.dependencies&&t.dependencies.length>0?yield Promise.all(t.dependencies.map(t=>Iy(this,void 0,void 0,(function*(){return yield e(t)})))).then(()=>Iy(this,void 0,void 0,(function*(){return delete t.dependencies,yield e(t)}))):(Ey[t.url]=vp(t.url),yield Ey[t.url])}))}(e))}),Oy[e]=Promise.all(r).then(e=>{})}))}function Cy(e){return Iy(this,void 0,void 0,(function*(){return yield e.reduce((e,t)=>Iy(this,void 0,void 0,(function*(){return yield e.then(()=>Iy(this,void 0,void 0,(function*(){return yield Ty(t)})))})),Ty(e[0]))}))}var Ay=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let xy,Py,Dy,Ry;function jy(e){return Ay(this,void 0,void 0,(function*(){return yield Ty("jimu-arcgis").then(()=>(xy||(xy=function(){return Ay(this,void 0,void 0,(function*(){return yield yp(["esri/identity/IdentityManager","esri/identity/OAuthInfo","esri/config"]).then(e=>{[Dy,Py,Ry]=e;const t=lv.getInstance(),{portalUrl:n}=mg().getState(),r=t.getMainPortal();(null==r?void 0:r.isWebTier)||ky(n),ky("https://devext.arcgis.com"),ky("https://qaext.arcgis.com"),ky("https://www.arcgis.com"),My(t.getSessions()),t.addSessionChangeListener(Ny),Dy.on("credential-create",({credential:e})=>{lv.getInstance().addFromArcGisJSCredential(e)})})}))}().then(()=>Ay(this,void 0,void 0,(function*(){return yield yp(["esri/config","esri/intl"])}))).then(([e,t])=>{var n,r,o;const i=mg().getState().portalUrl;t.setLocale(mg().getState().appContext.locale),e.request.proxyUrl=Hp(i),e.portalUrl=i;const a=null===(o=null===(r=null===(n=mg().getState().portalSelf)||void 0===n?void 0:n.helperServices)||void 0===r?void 0:r.geometry)||void 0===o?void 0:o.url;a&&(e.geometryServiceUrl=a)})),xy.then(()=>Ay(this,void 0,void 0,(function*(){return yield yp(e)})))))}))}function _y(e){return Ay(this,void 0,void 0,(function*(){return jy([e]).then(e=>e[0])}))}function ky(e){let t=Dy.findOAuthInfo(e);if(!t){const{clientId:n}=mg().getState(),r=Yh(`${window.location.origin}${Mh(Sp("jimu-arcgis"))}/oauth-callback.html`);t=new Py({appId:n,expiration:20159,portalUrl:e,authNamespace:"/",popup:!0,popupCallbackUrl:r}),Dy.registerOAuthInfos([t])}}function My(e){Dy.destroyCredentials(),function(){const e=lv.getInstance().getMainPortal(),t=lv.getInstance().getTrustedServers();(null==e?void 0:e.isWebTier)&&Ry.request.trustedServers.push(e.portalUrl);t.forEach(e=>{Ry.request.trustedServers.includes(e)||Ry.request.trustedServers.push(e)})}(),e&&e.forEach(e=>{var t;e.server?Object.entries(e.trustedServers).forEach(t=>{var n,r,o;const i=t[0],a=null===(n=t[1])||void 0===n?void 0:n.token,s=null===(o=null===(r=t[1])||void 0===r?void 0:r.expires)||void 0===o?void 0:o.getTime();Dy.registerToken({server:i+"/rest/services",token:a,expires:s,ssl:e.ssl,userId:e.username})}):Dy.registerToken({server:e.portal,token:e.token,expires:null===(t=e.tokenExpires)||void 0===t?void 0:t.getTime(),ssl:e.ssl,userId:e.username})})}function Ny(e,t){t!==rv.ArcGISJSSync&&My(e)}var Ly=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Uy(e,t,n=1){return Ly(this,void 0,void 0,(function*(){const r=(e,o=0)=>t(e).catch(t=>{if(o>=n)return Promise.reject(t);const i=t.options;return"ArcGISAuthError"!==t.name||!i||i.authentication&&498!==t.code&&"AUTHENTICATION_ERROR_CODE"!==t.code&&"GWM_0003"!==t.code?r(e,o+1):function(e){return Ly(this,void 0,void 0,(function*(){const t=lv.getInstance();return t.getServerKeyFromUrl(e)?$y.getInstance().fetchArcGISServerInfo(e).then(n=>(null==n?void 0:n.owningSystemUrl)?t.signIn(window.location&&window.location.href,!0,null==n?void 0:n.owningSystemUrl):jy(["esri/request"]).then(n=>{const[r]=n;return r(e,{authMode:"auto"}).then(n=>t.getSessionByUrl(e))})):t.signIn(window.location&&window.location.href,!0,e)}))}(t.url).then(e=>r(e,o+1))});return r(lv.getInstance().getSessionByUrl(e))}))}var Fy=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class $y{constructor(){this.servicesInfo={},this.servicesInfoPromise={},this.arcGISServersInfo={},this.arcGISServersInfoPromise={}}static getInstance(){if(window.jimuConfig&&window.jimuConfig.isBuilder){if(window._appWindow&&window._appWindow._serviceManager)return window._appWindow._serviceManager;console.error("No window._appWindow._serviceDefinitionManager.")}return $y.instance||($y.instance=new $y),$y.instance}getServiceInfo(e){return this.servicesInfo[e]}setServiceInfo(e,t){this.servicesInfo[e]=t}getServerInfo(e){return this.arcGISServersInfo[e]}getServerInfoByServiceUrl(e){return this.arcGISServersInfo[this.getArcGISServerUrlFromServiceUrl(e)]}fetchServiceInfo(e){return Fy(this,void 0,void 0,(function*(){return this.getServiceInfo(e)?yield Promise.resolve(this.getServiceInfo(e)):this.servicesInfoPromise[e]?yield this.servicesInfoPromise[e]:(this.servicesInfoPromise[e]=this.isHostedServiceInSamePortal(e).then(t=>Fy(this,void 0,void 0,(function*(){return yield Uy(e,n=>Fy(this,void 0,void 0,(function*(){return yield Object(ov.d)(e,{authentication:n,httpMethod:"GET"}).then(e=>({definition:e,isHostedInSamePortal:t}))})),1)}))).then(t=>(this.servicesInfo[e]=t,t)),this.servicesInfoPromise[e])}))}isHostedServiceInSamePortal(e){return Fy(this,void 0,void 0,(function*(){return yield this.fetchArcGISServerInfo(e).then(t=>(null==t?void 0:t.owningSystemUrl)?!(!/https?:\/\/(www|services)\.arcgis\.com/.test(t.owningSystemUrl)||!/maps\.arcgis\.com\/?$/.test(mg().getState().portalUrl))||(!(!/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsdevext\.arcgis\.com\/?$/.test(mg().getState().portalUrl))||(!(!/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsqa\.arcgis\.com\/?$/.test(mg().getState().portalUrl))||_p(mg().getState().portalUrl,t.owningSystemUrl))):!!lv.getInstance().getSessionByUrl(e))}))}fetchArcGISServerInfo(e){return Fy(this,void 0,void 0,(function*(){const t=this.getArcGISServerUrlFromServiceUrl(e);return t?(this.arcGISServersInfoPromise[t]||(this.arcGISServersInfoPromise[t]=Object(ov.d)(t,{httpMethod:"GET"}).then(e=>(this.arcGISServersInfo[t]=e,e)).catch(e=>Fy(this,void 0,void 0,(function*(){return console.warn("Failed to fetch ArcGIS server info."),yield Promise.resolve(null)})))),yield this.arcGISServersInfoPromise[t]):yield Promise.resolve(null)}))}getArcGISServerUrlFromServiceUrl(e){const t=e.split(/\/rest(\/admin)?\/services\/|\/appservices\//)[0];return t?t+"/rest/info":null}isHostedService(e){return Fy(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield Object(ov.d)(t+"/rest/info",{httpMethod:"GET"}).then(e=>!!e.owningSystemUrl):yield Promise.resolve(!1)}))}fetchChildLayerDefinitionsFromUrls(e){return Fy(this,void 0,void 0,(function*(){return yield Promise.allSettled(e.map(e=>Fy(this,void 0,void 0,(function*(){return yield this.fetchServiceInfo(e).then(e=>e.definition)})))).then(t=>{const n={};let r;return t.forEach((t,o)=>{const i="fulfilled"===t.status?t.value:null;i&&(r=e[o],n[r]=i)}),n}).then(e=>{const t=Object.keys(e).map(t=>e[t]),n=this._getAllChildLayerIdsOfGroupLayer(t),r={};return Object.keys(e).forEach(t=>{n.some(n=>{var r;return n===""+(null===(r=e[t])||void 0===r?void 0:r.id)})||(r[t]=e[t])}),r})}))}_getAllChildLayerIdsOfGroupLayer(e){if(!e||0===e.length)return[];const t=e.filter(e=>e.type===Aa.f.GroupLayer);return this._getChildLayerIdsFromGroupLayerDefinitions(t)}_getChildLayerIdsFromGroupLayerDefinitions(e){return 0===e.length?[]:Array.prototype.concat.apply([],e.map(e=>(null==e?void 0:e.subLayers.map(e=>""+e.id))||[]))}}window.jimuConfig&&!window.jimuConfig.isBuilder&&(window._serviceManager=$y.getInstance());var Vy=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const By={};function Gy(e,t,n){return function(e,t){return Vy(this,void 0,void 0,(function*(){try{const n=yield function(e){return Vy(this,void 0,void 0,(function*(){return e?yield Promise.allSettled(e.filter(e=>null==e?void 0:e.feature).map(e=>Vy(this,void 0,void 0,(function*(){return"esri.Graphic"===e.feature.declaredClass?yield Promise.resolve(e.feature):yield Yy(e.feature)})))).then(e=>e.filter(e=>"fulfilled"===e.status).map(e=>e.value)):yield Promise.resolve(null)}))}(t);if(!n)return null;const r=e.getIdField();if(!r)return null;const o=e.getSchema(),i=function(e,t){if(!e)return null;return Object.keys(e).map(n=>{const r={name:(o=e[n]).name,alias:o.alias,type:zy(o.type)};var o;return r.name===t&&(r.type="oid"),r})}(null==o?void 0:o.fields,r);if(!i)return null;const a=e.getGeometryType(),s={esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}[a];return s||0!==n.length?{fields:i,objectIdField:r,source:n,geometryType:s}:null}catch(e){return console.error("Failed to get constructor options of JS API client-side feature layer.",e),null}}))}(e,t).then(t=>t?jy(["esri/layers/FeatureLayer"]).then(r=>{var o,i,a;const s=new(0,r[0])(t),u=qy(e);return s.popupEnabled="boolean"!=typeof(null===(o=null==u?void 0:u.layer)||void 0===o?void 0:o.popupEnabled)||(null===(i=null==u?void 0:u.layer)||void 0===i?void 0:i.popupEnabled),s.popupTemplate=(null===(a=null==u?void 0:u.layer)||void 0===a?void 0:a.popupTemplate)||null,{layer:s,sourceVersion:n}}).then(t=>{var n,r;const o=qy(e);return(null===(n=t.layer)||void 0===n?void 0:n.popupEnabled)&&!(null===(r=t.layer)||void 0===r?void 0:r.popupTemplate)&&!(null==o?void 0:o.getDataSourceJson().isDataInDataSourceInstance)&&(null==o?void 0:o.getDataSourceJson().itemId)?(By[Wy(o)]||(By[Wy(o)]=o.createJSAPILayerByDataSource().then(e=>null==e?void 0:e.load())),By[Wy(o)].then(e=>(t.layer.popupTemplate=null==e?void 0:e.popupTemplate,t))):t}):Promise.reject("Feaure layer data source error: failed to create feature layer with source records."))}function Wy(e){var t,n;return`${null===(t=null==e?void 0:e.getDataSourceJson())||void 0===t?void 0:t.portalUrl}-${null===(n=null==e?void 0:e.getDataSourceJson())||void 0===n?void 0:n.itemId}`}function qy(e){var t;let n=e;if(e.dataViewId===Sc&&(n=qy(e.getMainDataSource())),e.getDataSourceJson().isOutputFromWidget&&1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];(null==t?void 0:t.type)!==Aa.c.FeatureLayer&&(null==t?void 0:t.type)!==Aa.c.SceneLayer||(n=qy(t))}return n}function zy(e){switch(e){case da.Number:return"double";case da.Date:return"date";default:return"string"}}function Hy(e){return"esri.Graphic"===e.declaredClass?e.toJSON():e}function Jy(e){return Vy(this,void 0,void 0,(function*(){return"esri.Graphic"===e.declaredClass?yield Promise.resolve(e):yield Yy(e)}))}function Yy(e){return Vy(this,void 0,void 0,(function*(){return yield jy(["esri/Graphic"]).then(t=>t[0].fromJSON(e))}))}function Xy(e){if(!e)return Promise.resolve(null);return function(e){if(!e)return Promise.resolve(null);if(e.layer)return e.layer.popupTemplate?Promise.resolve(e.layer.popupTemplate.toJSON()):Promise.resolve(null);const t=e.getRootDataSource()||e,n=t.getDataSourceJson().itemId;if(!n)return Promise.resolve(null);const r=t.getDataSourceJson().portalUrl;return Uy(r,t=>Vy(this,void 0,void 0,(function*(){return Object(dv.c)(n,{portal:Rp(r),authentication:t}).then(t=>{var n;const r=null===(n=null==t?void 0:t.layers)||void 0===n?void 0:n.find(t=>""+t.id===e.getDataSourceJson().layerId);return(null==r?void 0:r.popupInfo)?r.popupInfo:null})})))}(qy(e)).then(t=>{var n,r;if(!t)return null;if(null===(n=e.getDataSourceJson().schema)||void 0===n?void 0:n.fields){const n=Object.values(e.getDataSourceJson().schema.fields),o=null===(r=t.fieldInfos)||void 0===r?void 0:r.filter(e=>n.some(t=>(null==t?void 0:t.name)===(null==e?void 0:e.fieldName)));return Object.assign(Object.assign({},t),{fieldInfos:o})}return t})}function Ky(e,t){return Vy(this,void 0,void 0,(function*(){const n=(null==e?void 0:e.type)===Aa.c.FeatureLayer?e:null==e?void 0:e.getAssociatedDataSource();if(!n||!t)return null;const r=n.fixQueryParam(t),o=r.asMutable({deep:!0});return yield jy(["esri/geometry/support/jsonUtils"]).then(e=>{var t;const i=e[0];if("number"==typeof r.pageSize){const e=null!==(t=r.page)&&void 0!==t?t:1;o.start=(e-1)*r.pageSize,o.num=r.pageSize,null!==n.getMaxRecordCount()&&(1===e?o.num=Math.min(n.getMaxRecordCount(),r.pageSize):e*r.pageSize>n.getMaxRecordCount()&&(o.num=n.getMaxRecordCount()-(e-1)*r.pageSize)),delete o.page,delete o.pageSize}return o.geometry&&(o.geometry=i.fromJSON(o.geometry)),delete o.key,n.getGDBVersion()&&(o.gdbVersion=n.getGDBVersion()),o.outFields=o.outFields&&o.outFields.length>0?o.outFields:["*"],o})}))}var Qy,Zy,eb,tb,nb;!function(e){e.All="ALL",e.Simple="SIMPLE"}(Qy||(Qy={})),function(e){e.And="AND",e.Or="OR"}(Zy||(Zy={})),function(e){e.None="NONE",e.Previous="PREVIOUS",e.All="ALL"}(eb||(eb={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorDoesNotContain="STRING_OPERATOR_DOES_NOT_CONTAIN",e.StringOperatorStartsWith="STRING_OPERATOR_STARTS_WITH",e.StringOperatorDoesNotStartWith="STRING_OPERATOR_DOES_NOT_START_WITH",e.StringOperatorEndsWith="STRING_OPERATOR_ENDS_WITH",e.StringOperatorDoesNotEndWith="STRING_OPERATOR_DOES_NOT_END_WITH",e.StringOperatorIsAnyOf="STRING_OPERATOR_IS_ANY_OF",e.StringOperatorIsNoneOf="STRING_OPERATOR_IS_NONE_OF",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsAtLeast="NUMBER_OPERATOR_IS_AT_LEAST",e.NumberOperatorIsAtMost="NUMBER_OPERATOR_IS_AT_MOST",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN",e.NumberOperatorIsNotBetween="NUMBER_OPERATOR_IS_NOT_BETWEEN",e.NumberOperatorIsAnyOf="NUMBER_OPERATOR_IS_ANY_OF",e.NumberOperatorIsNoneOf="NUMBER_OPERATOR_IS_NONE_OF",e.NumberOperatorIsBlank="NUMBER_OPERATOR_IS_BLANK",e.NumberOperatorIsNotBlank="NUMBER_OPERATOR_IS_NOT_BLANK",e.DateOperatorIsOn="DATE_OPERATOR_IS_ON",e.DateOperatorIsNotOn="DATE_OPERATOR_IS_NOT_ON",e.DateOperatorIsIn="DATE_OPERATOR_IS_IN",e.DateOperatorIsNotIn="DATE_OPERATOR_IS_NOT_IN",e.DateOperatorIsBefore="DATE_OPERATOR_IS_BEFORE",e.DateOperatorIsAfter="DATE_OPERATOR_IS_AFTER",e.DateOperatorIsOnOrBefore="DATE_OPERATOR_IS_ON_OR_BEFORE",e.DateOperatorIsOnOrAfter="DATE_OPERATOR_IS_ON_OR_AFTER",e.DateOperatorIsInTheLast="DATE_OPERATOR_IS_IN_THE_LAST",e.DateOperatorIsNotInTheLast="DATE_OPERATOR_IS_NOT_IN_THE_LAST",e.DateOperatorIsBetween="DATE_OPERATOR_IS_BETWEEN",e.DateOperatorIsNotBetween="DATE_OPERATOR_IS_NOT_BETWEEN",e.DateOperatorIsBlank="DATE_OPERATOR_IS_BLANK",e.DateOperatorIsNotBlank="DATE_OPERATOR_IS_NOT_BLANK"}(tb||(tb={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.SingleSelectFromUnique="UNIQUE",e.MultipleSelectFromUnique="MULTIPLE",e.SingleSelectFromPredefined="UNIQUE_PREDEFINED",e.MultipleSelectFromPredefined="MULTIPLE_PREDEFINED"}(nb||(nb={}));const rb="-empty-";var ob,ib,ab,sb;function ub(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function cb(e){ub(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function lb(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function db(e,t){ub(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:lb(o),a=null==n.weekStartsOn?i:lb(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=cb(e),u=s.getDay(),c=(u<a?7:0)+u-a;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function fb(e,t){ub(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:lb(o),a=null==n.weekStartsOn?i:lb(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=cb(e),u=s.getDay(),c=6+(u<a?-7:0)-(u-a);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function pb(e){ub(1,arguments);var t=cb(e);return t.setDate(1),t.setHours(0,0,0,0),t}function hb(e){ub(1,arguments);var t=cb(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function gb(e){ub(1,arguments);var t=cb(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function mb(e){ub(1,arguments);var t=cb(e),n=t.getMonth(),r=n-n%3+3;return t.setMonth(r,0),t.setHours(23,59,59,999),t}function vb(e){ub(1,arguments);var t=cb(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function yb(e){ub(1,arguments);var t=cb(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}!function(e){e.Single="SINGLE",e.Set="SET"}(ob||(ob={})),function(e){e.Inline="INLINE",e.Block="BLOCK"}(ib||(ib={})),function(e){e.None="NONE",e.UseAskForValue="USE_ASK_FOR_VALUE",e.UseLabel="USE_LABEL"}(ab||(ab={})),function(e){e.Asc="ASC",e.Desc="DESC"}(sb||(sb={}));const bb={equals:{op:"= ?"},doesNotEqual:{op:"<> ?"},isAtLeast:{op:">= ?"},isAtMost:{op:"<= ?"},isLessThan:{op:"< ?"},isGreaterThan:{op:"> ?"},isBetween:{op:"BETWEEN ?",sep:" AND "},isNotBetween:{op:"NOT BETWEEN ?",sep:" AND "},contains:{op:"LIKE ?",mod:"%{0}%"},doesNotContain:{op:"NOT LIKE ?",mod:"%{0}%"},startsWith:{op:"LIKE ?",mod:"{0}%"},doesNotStartWith:{op:"NOT LIKE ?",mod:"{0}%"},endsWith:{op:"LIKE ?",mod:"%{0}"},doesNotEndWith:{op:"NOT LIKE ?",mod:"%{0}"},isAnyOf:{op:"IN ?",mod:"[{0}]",type:"IN"},isNoneOf:{op:"NOT IN ?",mod:"[{0}]",type:"IN"}};function Sb(e){let t="";switch(e){case tb.NumberOperatorIs:case tb.StringOperatorIs:case tb.DateOperatorIsOn:case tb.NumberOperatorIsBlank:case tb.StringOperatorIsBlank:case tb.DateOperatorIsBlank:t="equals";break;case tb.NumberOperatorIsNot:case tb.StringOperatorIsNot:case tb.DateOperatorIsNotOn:case tb.NumberOperatorIsNotBlank:case tb.StringOperatorIsNotBlank:case tb.DateOperatorIsNotBlank:t="doesNotEqual";break;case tb.NumberOperatorIsAtLeast:case tb.DateOperatorIsOnOrAfter:t="isAtLeast";break;case tb.NumberOperatorIsAtMost:case tb.DateOperatorIsOnOrBefore:t="isAtMost";break;case tb.NumberOperatorIsLessThan:case tb.DateOperatorIsBefore:t="isLessThan";break;case tb.DateOperatorIsAfter:case tb.NumberOperatorIsGreaterThan:t="isGreaterThan";break;case tb.NumberOperatorIsBetween:case tb.DateOperatorIsBetween:t="isBetween";break;case tb.NumberOperatorIsNotBetween:case tb.DateOperatorIsNotBetween:t="isNotBetween";break;case tb.NumberOperatorIsAnyOf:case tb.StringOperatorIsAnyOf:case tb.DateOperatorIsIn:t="isAnyOf";break;case tb.NumberOperatorIsNoneOf:case tb.StringOperatorIsNoneOf:case tb.DateOperatorIsNotIn:t="isNoneOf";break;case tb.StringOperatorContains:t="contains";break;case tb.StringOperatorDoesNotContain:t="doesNotContain";break;case tb.StringOperatorStartsWith:t="startsWith";break;case tb.StringOperatorEndsWith:t="endsWith";break;case tb.StringOperatorDoesNotStartWith:t="doesNotStartWith";break;case tb.StringOperatorDoesNotEndWith:t="doesNotEndWith"}return t}function wb(e,t,n,r=!1,o=!1){if(e.includes("BLANK"))return n.fieldAlias+(e.includes("NOT")?" IS NOT NULL":" IS NULL");let i=Sb(e);if(e.includes("DATE"))switch(e){case tb.DateOperatorIsOn:i=o?"is":r?"isAt":"isOn";break;case tb.DateOperatorIsNotOn:i=o?"isNot":r?"isNotAt":"isNotOn";break;case tb.DateOperatorIsIn:i="isIn";break;case tb.DateOperatorIsNotIn:i="isNotIn";break;case tb.DateOperatorIsBefore:i="isBefore";break;case tb.DateOperatorIsAfter:i="isAfter";break;case tb.DateOperatorIsOnOrBefore:i=r?"isAtOrBefore":"isOnOrBefore";break;case tb.DateOperatorIsOnOrAfter:i=r?"isAtOrAfter":"isOnOrAfter";break;case tb.DateOperatorIsInTheLast:i="isInTheLast";break;case tb.DateOperatorIsNotInTheLast:i="isNotInTheLast"}return t.formatMessage({id:i+"ForDisplaySQL"},n)}function Ib(e,t){var n=null,r=new Date,o=r.getTime();switch(e){case Ac.Today:n=r;break;case Ac.Yesterday:n=new Date(o-864e5);break;case Ac.Tomorrow:n=new Date(o+864e5);break;case Ac.ThisWeek:n=[db(r,{locale:t.locale}),fb(r,{locale:t.locale})];break;case Ac.ThisMonth:n=[pb(r),hb(r)];break;case Ac.ThisQuarter:n=[gb(r),mb(r)];break;case Ac.ThisYear:n=[vb(r),yb(r)]}return n}function Eb(e,t,n){n=n||xf();const r={sql:"",displaySQL:"(1=1)"};if(!e)return r;const o=t.getSchema().fields,i=rS(t.url),a=function e(t){if(!t.parts)return r;const a=t.logicalOperator?t.logicalOperator:Zy.And,s=[],u=[];t.parts.forEach((function(t){var r,a,c,l,d,f,p,h,g,m;if(t.type===ob.Set){const n=e(t);s.push("("+n.sql+")"),u.push("( "+n.displaySQL+" )")}else{const e=t;let v=!1;const y=bb[Sb(e.operator)];let b=nb.MultipleSelectFromPredefined===e.valueOptions.sourceType&&[tb.StringOperatorStartsWith,tb.StringOperatorDoesNotStartWith,tb.StringOperatorEndsWith,tb.StringOperatorDoesNotEndWith,tb.StringOperatorContains,tb.StringOperatorDoesNotContain].includes(e.operator),S="",w="",I=e.valueOptions.value?e.valueOptions.value.asMutable({deep:!0}):null;const E=o[e.jimuFieldName],O=E?E.type:null;if(!O)return;const T={fieldAlias:E.alias||E.name,value:"?",endValue:"?"};if(O===da.Date&&e.valueOptions.sourceType!==nb.Field){let t=!1,o=!1,v=e.valueOptions.inputEditor;if(null===I){if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";s.push("("+E.name+" IS "+t+"NULL)")}"SIMPLE_SELECT"===v?(null===(r=E.format)||void 0===r?void 0:r.dateFormat)&&E.format.dateFormat.includes("Time")&&(t=!0):t=v.includes("TIME")}else if("NUMBER_LIST_SELECTOR"===v&&null===I[0].value)T.endValue=n.formatMessage({id:I[0].label.toLowerCase()});else{const r=i?"":"timestamp ";let u,y=null===(a=I[0])||void 0===a?void 0:a.value;if("SIMPLE_SELECT"===v){let e=Lb.Date;v="DATE_PICKER",(null===(c=E.format)||void 0===c?void 0:c.dateFormat)&&E.format.dateFormat.includes("Time")&&(t=!0,v="DATE_TIME_PICKER",e=E.format.dateFormat.includes("ShortTime")?Lb.DateTimeShort:Lb.DateTimeLong),T.value=Nb(new Date(y),v,null===(l=E.format)||void 0===l?void 0:l.dateFormat,n),y=Ub(y,e),u=y}else if("NUMBER_LIST_SELECTOR"===v)y=null,T.value=I[0].value,T.endValue=n.formatMessage({id:I[0].label.toLowerCase()});else{const e=null===(d=I[1])||void 0===d?void 0:d.value;if(null===I[0])y=null;else if("string"==typeof y){o=!0,T.value=n.formatMessage({id:Cb(I[0].value)});const t=Ib(y,n);y=Ub(t[0]||t,Lb.Date),void 0!==t.length?u=Ub(t[1],Lb.Date):e||(u=y,v="DATE_PICKER")}else t=v.includes("TIME"),T.value=Mb(new Date(y),v,null===(f=E.format)||void 0===f?void 0:f.dateFormat,n),u=y;if(null===I[1])o=!1,u=null;else if(e){let t;if(o=!1,"string"==typeof e){t=n.formatMessage({id:Cb(I[1].value)});const r=Ib(e,n);u=Ub(r[0]||r,Lb.Date),v="DATE_PICKER"}else t=Mb(new Date(e),v,null===(p=E.format)||void 0===p?void 0:p.dateFormat,n),u=e;T.endValue=t}}const b=y?r+"'"+Rb(y)+"'":null,w=u?r+"'"+function(e,t,n){"number"==typeof e&&(e=new Date(e));let r;"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t||"DATE_RANGE_SELECTOR"===t?r=new Date(e.getTime()+864e5):"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(r=n&&n.includes("LongTime")?function(e){return new Date(e.getTime()+1e3)}(e):function(e){return new Date(e.getTime()+6e4)}(e));return Rb(r)}(u,v,null===(h=E.format)||void 0===h?void 0:h.dateFormat)+"'":null;switch(e.operator){case tb.DateOperatorIsOn:S=E.name+" BETWEEN "+b+" AND "+w+" AND ("+E.name+" <> "+w+")";break;case tb.DateOperatorIsNotOn:S=E.name+" < "+b+" OR "+E.name+" >= "+w;break;case tb.DateOperatorIsBefore:S=E.name+" < "+b;break;case tb.DateOperatorIsAfter:S=E.name+" >= "+w;break;case tb.DateOperatorIsOnOrBefore:S=E.name+" < "+w;break;case tb.DateOperatorIsOnOrAfter:S=E.name+" >= "+b;break;case tb.DateOperatorIsInTheLast:S=E.name+" BETWEEN CURRENT_TIMESTAMP - "+Tb(I[0].value,null===(g=I[0])||void 0===g?void 0:g.label)+" AND CURRENT_TIMESTAMP";break;case tb.DateOperatorIsNotInTheLast:S=E.name+" NOT BETWEEN CURRENT_TIMESTAMP - "+Tb(I[0].value,null===(m=I[0])||void 0===m?void 0:m.label)+" AND CURRENT_TIMESTAMP";break;case tb.DateOperatorIsBetween:case tb.DateOperatorIsIn:S=b&&w?"("+E.name+" BETWEEN "+b+" AND "+w+") AND ("+E.name+" <> "+w+")":"";break;case tb.DateOperatorIsNotBetween:case tb.DateOperatorIsNotIn:S=b&&w?"("+E.name+" < "+b+") OR ("+E.name+" >= "+w+")":""}""!==S&&s.push("("+S+")")}return w=wb(e.operator,n,T,t,o),void u.push("("+w+")")}let C=[];const A=[],x=[nb.SingleSelectFromPredefined,nb.MultipleSelectFromPredefined].includes(e.valueOptions.sourceType);if(x&&I&&(I=I.filter(e=>e.selected),I=I.length>0?I:null),null===I)"IN"===y.type&&(T.value="(?)");else{let t=!1;for(let n=0;n<I.length;n++){null!==I[n]&&I[n].value!==rb||(t=!0,I[n]={value:null,label:"?",alias:"?"});let r=I[n].value,a=x?I[n].alias:I[n].label;if(e.valueOptions.sourceType===nb.Field){const e=o[r];a=e.alias?e.alias:e.name}else{if(O===da.String&&(r=null!==r?xb(r):null,v=!(i||e.caseSensitive)),a=xb(a),y.mod&&"IN"!==y.type&&(r=null!==r?Pb(y.mod,[r]):null),O===da.String&&null!==r){r=(i&&Db(r)?"N":"")+"'"+r+"'"}a=O===da.String&&null!==r?"'"+a+"'":a,v&&(r=null!==r?r.toUpperCase():null,a=a.toUpperCase())}null!==r&&C.push(r),A.push(a)}if(t&&(C=[]),b=b&&C.length>1,b||!y.sep&&y.mod&&"IN"===y.type){const e=function(e){const t=[];return new Array(e).fill(1).map((e,n)=>{t.push("{"+n+"}")}),"("+t.join(",")+")"}(C.length);S=b?"predefined":Pb(e,C),T.value=Pb(e,A)}else C.map((e,t)=>{t>0&&(S+=y.sep),S+=e}),T.value=A[0],T.endValue=A[1]||T.endValue}const P=E.name;if(""!==S){const t=v?"UPPER("+P+")":P;if(b){const n=e.operator.includes("_NOT_")?" AND ":" OR ",r=C.map(e=>"("+t+" "+Ab(y.op,e)+")").join(n);s.push(r)}else{const e=Ab(y.op,S);s.push("("+t+" "+e+")")}}else if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";s.push("("+P+" IS "+t+"NULL)"),w="Null"}w=wb(e.operator,n,T),u.push("("+w+")")}}));const c=n.formatMessage({id:a.toLowerCase()+"LowerCase"});return{sql:s.join(` ${a} `),displaySQL:u.join(` ${c} `)}}(e);return{sql:""===a.sql||"()"===a.sql?"":"("+a.sql+")",displaySQL:a.displaySQL}}function Ob(e){return null}function Tb(e,t){var n=e;return t===xc.Year?n=365*e:t===xc.Month?n=30*e:t===xc.Week?n=7*e:t===xc.Hour?n=e/24:t===xc.Minute&&(n=e/1440),n=Math.round(1e6*n)/1e6}function Cb(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function Ab(e,t){return e.replace("?",(function(){return t}))}function xb(e){return e.replace(/\'/g,"''")}function Pb(e,t){return e.replace(/{([0-9]+)}/g,(function(e,n){return t[parseInt(n)]}))}function Db(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function Rb(e){const t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function jb(e){const t=e.getTimezoneOffset();return(t<0?1:-1)*(t<0?Math.abs(t)/60:t/60)*60*60*1e3}function _b(e){return e.getTime()-jb(e)}function kb(e){return e.getTime()+jb(e)}function Mb(e,t,n,r){return Nb(new Date(kb(e)),t,n,r)}function Nb(e,t,n,r){let o="";if(r){let i=Rc.date,a=Rc.time;if(n){const e=jc(n);i=e.datePattern,a=t.includes("DATE_TIME_PICKER")?e.timePattern||a:""}else"DATE_PICKER"!==t&&"DOUBLE_DATE_PICKER"!==t||(a="");o=Mc(e,r,i,a)}else"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t?o=e.toLocaleDateString():"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(o=e.toLocaleDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2));return o}var Lb;function Ub(e,t){return"number"!=typeof e&&"string"!=typeof e||(e=new Date(e)),e.setMilliseconds(0),t===Lb.Date?(e.setHours(0),e.setMinutes(0),e.setSeconds(0)):t===Lb.DateTimeShort&&e.setSeconds(0),_b(e)}!function(e){e.Date="DATE",e.DateTimeShort="DATE_TIME_SHORT",e.DateTimeLong="DATE_TIME_LONG"}(Lb||(Lb={}));var Fb=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const $b=["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"];function Vb(e){return Fb(this,void 0,void 0,(function*(){return yield Uy(e.url,t=>Fb(this,void 0,void 0,(function*(){const n=(null==t?void 0:t.token)?{httpMethod:"GET",params:{token:null==t?void 0:t.token}}:{httpMethod:"GET"};return e.url?yield Object(ov.d)(`${e.url}/${e.featureId}/attachments`,n).then(e=>Fb(this,void 0,void 0,(function*(){return yield Promise.resolve(e.attachmentInfos)}))):yield Promise.reject(null)})),1)}))}function Bb(e,t){return Fb(this,void 0,void 0,(function*(){return yield Uy(t.url,n=>Fb(this,void 0,void 0,(function*(){if(t&&t.attachmentTypes&&t.attachmentTypes.length>0){const r=[];for(let o=0;o<e.length;o++)t.attachmentTypes.includes(e[o].contentType)&&(e[o].url=`${t.url}/${t.featureId}/attachments/${e[o].id}`+((null==n?void 0:n.token)?"?token="+(null==n?void 0:n.token):""),r.push(e[o]));return yield Promise.resolve(r)}for(let r=0;r<e.length;r++)e[r].url=`${t.url}/${t.featureId}/attachments/${e[r].id}`+((null==n?void 0:n.token)?"?token="+(null==n?void 0:n.token):"");return yield Promise.resolve(e)})),1)}))}function Gb(e,t){let n;return n=$b.includes(e.type)?da.Number:"esriFieldTypeDate"===e.type?da.Date:da.String,{jimuName:e.name,name:e.name,type:n,esriType:e.type,alias:(null==t?void 0:t.label)||e.alias,format:(null==t?void 0:t.format)||("esriFieldTypeOID"===e.type?{digitSeparator:!1,places:0}:null)}}function Wb(e){return $b.includes(e)}function qb(e,t){let n=null;return e&&e.length>0&&e.some(e=>e.name===t&&(n=e,!0)),n}function zb(e,t,n){const r=n[t];let o;const i=e.typeIdField;let a;n.hasOwnProperty(i)&&(o=n[i]);const s=qb(e.fields,t);a=null!=o?Qb(e,t,o,s):eS(e,s);const u=Kb(r,a);if(e.typeIdField===t){const r=[{value:n[t],label:u.displayValue}];u.displayValue=tS(e,r)[0].label}return u}function Hb(e,t,n){if(1===n.length){return[zb(e,t,n[0])]}const r=e.typeIdField;let o=null,i=null,a=[];const s=[];for(const u in n){const c=n[u],l=c[t];if(r===t)a=o||Yb(e);else{const n=qb(e.fields,t);if(c.hasOwnProperty(r)){if(!i){i={},o=Yb(e);for(const r in o){const a=o[r].value;i[a]=Qb(e,t,a,n)}}a=i[c[r]],a||(a=Xb(n))}else a=eS(e,n)}const d=Kb(l,a);s.push(d)}return s}function Jb(e,t,n){let r=null;if(!e)return r;const o=qb(e.fields,t);if(!o)return r;const i=n?n[e.typeIdField]:null,a=n&&null!=i;if(e.typeIdField&&e.typeIdField.toUpperCase()===t.toUpperCase()){if(r=Yb(e),a){const e=Kb(i,r);r=[{value:e.value,label:e.displayValue}]}}else r=a?Qb(e,t,i,o):eS(e,o);return r}function Yb(e){return tS(e,function(e){let t=null;return e.typeIdField&&e.types&&e.types.length>0&&(t=[],Object.keys(e.types).map(n=>{t.push({value:e.types[n].id,label:e.types[n].name})})),t}(e))}function Xb(e){let t=null;if(!e)return t;const n=e.domain;return n&&"codedValue"===n.type&&n.codedValues&&n.codedValues.length>0&&(t=[],n.codedValues.map(e=>{t.push({value:e.code,label:e.name})})),t}function Kb(e,t){let n={isCodedValueOrSubtype:!1,displayValue:e+""};t&&t.length>0&&t.some(t=>t.value===e&&(n={isCodedValueOrSubtype:!0,displayValue:t.label},!0));return Object.assign(n,{value:e})}function Qb(e,t,n,r){let o=null;return(r=r||qb(e.fields,t))?(e.typeIdField&&e.types&&e.types.length>0?(e.types.some(i=>{if(i.id===n){if(t===e.typeIdField)o=[{value:i.id,label:i.name}];else if(i.domains&&i.domains[t]){const e=i.domains[t];"inherited"===e.type?o=Xb(r):e.codedValues&&e.codedValues.length>0&&(o=[],e.codedValues.map(e=>{o.push({value:e.code,label:e.name})}))}else i.domains&&(o=Xb(r));return!0}}),o||(o=Xb(r))):o=Xb(r),o):o}function Zb(e,t,n){return e[t]?n===e[t]||(e[t]=e[t]+", "+n):e[t]=n,e}function eS(e,t){let n=null;if(!t)return n;const r=t.name;let o={},i=!0;e.typeIdField&&e.types&&e.types.length>0?(Object.keys(e.types).map(n=>{const a=e.types[n];if(a.domains&&a.domains[r]){const e=a.domains[r];if("inherited"===e.type){if(i){i=!1;const e=Xb(t);null==e||e.map(e=>{o=Zb(o,e.value,e.label)})}}else e.codedValues&&e.codedValues.length>0&&e.codedValues.map(e=>{o=Zb(o,e.code,e.name)})}}),n||(n=Xb(t))):n=Xb(t);const a=[];for(const e in o){const n=Wb(t.type)?parseFloat(e):e;a.push({value:n,label:o[e]})}return a.length>0&&(n=a),n}function tS(e,t){const n=function(e){let t=null,n=null;const r=nS(e);if(r)t={},n=r.uniqueValueInfos;else{const r=e;if(r.renderer){const e=nS(r.sourceJSON),o=r.renderer.toJson();"uniqueValue"===o.type&&e&&e.field1===o.field1?(t={},n=o.uniqueValueInfos):e&&(t={},n=e.uniqueValueInfos)}}if(n)for(let e=0;e<n.length;e++){const r=n[e];t[r.value]=r.label}return t}(e);if(n&&t)for(let e=0;e<t.length;e++){const r=t[e];n[r.value]&&(r.label=n[r.value])}return t}function nS(e){let t=null;return e.drawingInfo&&e.drawingInfo.renderer&&"uniqueValue"===e.drawingInfo.renderer.type&&(t=e.drawingInfo.renderer),t}function rS(e){if(!e)return!1;const t=e.includes(".arcgis.com/"),n=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return t&&n}function oS(e){return null==e?void 0:e.replace(/\s/g,"_")}function iS(e){var t,n;if(!e)return null;const r=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.title)&&void 0!==n?n:e.name;return void 0===r?null:oS(""+r)}function aS(e){var t;if(!e)return null;const n=null!==(t=e.name)&&void 0!==t?t:e.id;return void 0===n?null:oS(""+n)}function sS(e){const t=(null==e?void 0:e.layerType)||(null==e?void 0:e.type);return t===Aa.f.FeatureLayer?!!e.fields:!!t&&Object.keys(Aa.f).some(e=>Aa.f[e]===t)}function uS(e){return(null==e?void 0:e.type)&&Object.values(Aa.g).some(t=>t===e.type)}function cS(e,t,n){if(!e||t&&!n)return null;const r=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").split("/"),o=r.findIndex(e=>Object.values(Aa.h).some(t=>t===e));if(-1===o)return null;const i=r.slice(0,o+1).join("/");if(t){return!!i.split("/").find(e=>e===Aa.h.SceneService)?`${i}/layers/${n.id}`:`${i}/${n.id}`}return i}function lS(e,t,n,r){if(!e||!n||!sS(n))return null;let o;return o=n.type===Aa.f.GroupLayer?function(e,t,n){return e&&t?be({id:e,type:Aa.c.GroupLayer,url:cS(n,!0,t),layerId:""+t.id}):null}(e,n,t):n.layerType===Aa.f.SceneLayer3DObject||n.layerType===Aa.f.SceneLayerPoint?function(e,t,n){return e&&t?be({id:e,type:Aa.c.SceneLayer,url:cS(n,!0,t),layerId:""+t.id}):null}(e,n,t):function(e,t,n){return e&&t?be({id:e,type:Aa.c.FeatureLayer,url:cS(n,!0,t),layerId:""+t.id,geometryType:t.geometryType}):null}(e,n,t),r?o.merge(r.asMutable({deep:!0})):o}function dS(e,t,n,r){if(!e||!t||!n)return null;const o=fS(t);if(!o)return null;const i=be({id:e,type:o,url:cS(t,!1)});return r?i.merge(r.asMutable({deep:!0})):i}function fS(e){var t;if(!mS(e))return null;const n=e.split("?")[0].split("/"),r=Object.keys(Aa.h).find(e=>n.some(t=>Aa.h[e]===t));return null!==(t=Aa.c[r])&&void 0!==t?t:null}function pS(e,t,n){return Fb(this,void 0,void 0,(function*(){return yield $y.getInstance().fetchChildLayerDefinitionsFromUrls(e).then(e=>{const t={},n={};return Object.keys(e).forEach(r=>{e[r].layerType===Aa.f.SceneLayer3DObject||e[r].layerType===Aa.f.SceneLayerPoint?n[r]=e[r]:sS(e[r])&&(t[r]=e[r])}),{sceneLayerDefinitions:n,otherSupportedLayerDefinitions:t}}).then(({sceneLayerDefinitions:e,otherSupportedLayerDefinitions:r})=>Fb(this,void 0,void 0,(function*(){return yield Promise.allSettled(Object.keys(e).map(e=>Fb(this,void 0,void 0,(function*(){var r;return yield AS(e,null===(r=e.replace(/\/$/,"").match(/\d+$/))||void 0===r?void 0:r[0],t,n).then(t=>({associatedLayerUrl:t,sceneLayerUrl:e}))})))).then(t=>({associatedLayerUrls:t.filter(e=>"fulfilled"===e.status).map(e=>e.value),sceneLayerDefinitions:e,otherSupportedLayerDefinitions:r}))}))).then(({associatedLayerUrls:e,sceneLayerDefinitions:t,otherSupportedLayerDefinitions:n})=>{const r={};return e.forEach(e=>{e.associatedLayerUrl&&(r[e.sceneLayerUrl]=t[e.sceneLayerUrl])}),Object.assign(Object.assign({},n),r)})}))}function hS(e,t){return Fb(this,void 0,void 0,(function*(){if(!e||!t)return yield Promise.resolve({});if(gS(e)){const n=t;return n.type===Aa.f.GroupLayer?yield function(e,t){return Fb(this,void 0,void 0,(function*(){const n=t.subLayers||[],r=cS(e,!1);return pS(n.map(e=>`${r}/${e.id}`))}))}(e,n):yield Promise.resolve({})}return mS(e)?yield function(e,t){return Fb(this,void 0,void 0,(function*(){const n=(null==t?void 0:t.layers)||[],r=(null==t?void 0:t.tables)||[];return pS(n.concat(r).map(t=>""+cS(e,!0,t)))}))}(e,t):yield Promise.resolve({})}))}function gS(e){if(!yS(e))return!1;return!!e.split("/").find(e=>e===Aa.h.SceneService)?/\/layers\/\d+\/?$/.test(e):/\/\d+\/?$/.test(e)}function mS(e){return!(!yS(e)||gS(e))}function vS(e){if(!yS(e))return"";const t=e.split("/"),n=t.findIndex(e=>Object.values(Aa.h).some(t=>t===e))-1;return t[n]}function yS(e){if(!e||!/^(http(s)?:)?\/\//.test(e))return!1;const t=cS(e,!1),n=null==t?void 0:t.split("/");return!(!n||!Object.values(Aa.h).some(e=>n[n.length-1]===e))}function bS(e){return e.sort((e,t)=>{var n;return null===(n=null==e?void 0:e.getLabel())||void 0===n?void 0:n.localeCompare(null==t?void 0:t.getLabel())})}function SS(e,t){return`${e}-${t}`}function wS(e,t,n,r=Aa.d.InConfigView,o){const i={queryParams:{where:n||"(1=1)",returnGeometry:!1,outFields:[e],orderByFields:[e],returnDistinctValues:!0},queryOptions:{scope:r,widgetId:o||"advanced_select_query"}};return o&&(i.queryOptions.excludeQuery={dataSourceId:t,widgetId:o}),i}function IS(e,t,n,r=Aa.d.InConfigView,o){return Fb(this,void 0,void 0,(function*(){if(!e)return 0;const i=t,a=wS(e.name,i.belongToDataSource.id,n,r,o);return yield i.loadCount(a.queryParams,a.queryOptions).then(e=>e)}))}function ES(e,t,n,r,o,i=Aa.d.InConfigView,a){return Fb(this,void 0,void 0,(function*(){const s=[];let u=0;if(!e)return{list:s,reducedCount:u};const c=["undefined","nan","null",""],l=t,d=wS(e.name,t.belongToDataSource.id,o,i,a);return d.queryParams.page=1,d.queryParams.pageSize=n,yield l.load(d.queryParams,d.queryOptions).then(t=>{const n={},o={};return t.map(t=>{const i=t,a=i.feature.attributes[e.jimuName];if(!(a in n)&&(n[a]=!0,0===c.filter(e=>(a+"").trim().toLowerCase()===e).length)){const t=i.getFormattedFieldValue(e.jimuName,r);e.type===da.Date?(t in o||s.push({value:a,label:t}),o[t]=!0):s.push({value:a,label:t})}}),u=t.length-s.length,{list:s,reducedCount:u}})}))}function OS(e){var t;let n=null===(t=e)||void 0===t?void 0:t.url;return n?(n=null!==e.layerId&&void 0!==e.layerId?e.type===Aa.g.SceneLayer?e.url+"/layers/"+e.layerId:e.url+"/"+e.layerId:e.url,n=n.replace(/^http:/,"https:"),n):null}function TS(e,t){const n=_g.getInstance();let r;return r=t?e.dataViewId?n.getLocalDataSourceId(n.getDataViewDataSourceId(e.mainDataSourceId,e.dataViewId),t):n.getLocalDataSourceId(e.mainDataSourceId,t):e.dataSourceId,r}function CS(e,t,n,r){return Fb(this,void 0,void 0,(function*(){return yield AS(e,t,n,r).then(e=>Fb(this,void 0,void 0,(function*(){return e?yield $y.getInstance().fetchServiceInfo(e).then(e=>e.definition).then(t=>t?{def:t,url:e}:null):yield Promise.resolve(null)})))}))}function AS(e,t,n,r){return Fb(this,void 0,void 0,(function*(){return e||n?n?yield PS(n,r).then(n=>Fb(this,void 0,void 0,(function*(){if(!n)return yield DS(xS(e),e,t);const r=_S();let o=n.url;return r&&(o=RS(o)||o),yield DS(o,e,t)}))):yield DS(xS(e),e,t):yield Promise.resolve(null)}))}function xS(e){let t=cS(e,!1);const n=_S();n&&(t=jS(t));let r=t.replace("/"+Aa.h.SceneService,"/"+Aa.h.FeatureService);return n&&(r=RS(r)||r),r}function PS(e,t){return Fb(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve(null);const n={id:e,relationshipType:"Service2Service",direction:"reverse",authentication:lv.getInstance().getSessionByUrl(t)};return yield Object(dv.k)(n).then(e=>{var t;return(null===(t=null==e?void 0:e.relatedItems)||void 0===t?void 0:t.find(e=>e.type===Aa.e.FeatureService))||null})}))}function DS(e,t,n){return Fb(this,void 0,void 0,(function*(){const r=cS(t,!1),o=cS(e,!1);return yield Promise.all([$y.getInstance().fetchServiceInfo(r),$y.getInstance().fetchServiceInfo(o)]).then(e=>{var t,r;const i=null===(t=e[0].definition)||void 0===t?void 0:t.layers,a=null===(r=e[1].definition)||void 0===r?void 0:r.layers;if(!Array.isArray(a))return null;const s=parseInt(n);if(Array.isArray(i))for(let e=0;e<Math.min(i.length,a.length);e++){if(i[e].id===s)return`${o}/${a[e].id}`}else if(s<a.length)return`${o}/${a[s].id}`;return null}).catch(e=>(console.error("Can not find associated feature layer, ",t),null))}))}function RS(e){var t,n,r;const o=null===(n=null===(t=mg().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.appProxies;if(!e||!o)return null;const i=null===(r=Object.values(o).find(t=>t.sourceUrl===cS(e,!1)))||void 0===r?void 0:r.proxyUrl;if(i){let t=i;const n=e.split("/").filter(e=>e),r=parseInt(n[n.length-1]);return isNaN(r)||(t=`${t}/${r}`),t}return null}function jS(e){var t,n,r;const o=null===(n=null===(t=mg().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.appProxies;if(!e||!o)return e;const i=null===(r=Object.values(o).find(t=>t.proxyUrl===cS(e,!1)))||void 0===r?void 0:r.sourceUrl;if(i){let t=i;const n=e.split("/").filter(e=>e),r=parseInt(n[n.length-1]);return isNaN(r)||(t=`${t}/${r}`),t}return e}function _S(){var e,t;return!(null===(t=null===(e=mg().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.isInBuilder)}function kS(e){var t,n,r;return(null===(t=e)||void 0===t?void 0:t.layer)||(null===(n=e)||void 0===n?void 0:n.layerDefinition)||(null===(r=e)||void 0===r?void 0:r.serviceDefinition)}function MS(e,t,n){var r;return Fb(this,void 0,void 0,(function*(){let o=null==e?void 0:e.name;return t?o=t.title||o:n.itemId&&!(null===(r=_g.getInstance().getDataSource(n.id))||void 0===r?void 0:r.parentDataSource)&&(o=yield Uy(n.portalUrl,e=>Fb(this,void 0,void 0,(function*(){return yield Object(dv.a)(n.itemId,{portal:Rp(n.portalUrl),authentication:e}).then(e=>e.title||o).catch(e=>(console.warn("Can not get item info. ",e,n.itemId,n.portalUrl),o))})))),o}))}function NS(e){return"esri.layers.support.Sublayer"===(null==e?void 0:e.declaredClass)?e.layer:null}function LS(e,t){return 0===(null==t?void 0:t.indexOf(e))&&(null==t?void 0:t.split("-").length)-1===(null==e?void 0:e.split("-").length)}function US(e){return(null==e?void 0:e.split("-").reverse()[0])===Sc}function FS(e){return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportSymbol():!(e.getDataSourceJson().isDataInDataSourceInstance||!e.layer))}function $S(e){var t,n;return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportAttachment():null===(n=null===(t=e.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===n?void 0:n.supportsQueryAttachments)}function VS(e){var t,n,r,o;if(!e)return null;if(e.getDataSourceJson().isOutputFromWidget){if(1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];if((null==t?void 0:t.type)===Aa.c.FeatureLayer||(null==t?void 0:t.type)===Aa.c.SceneLayer){const i=null===(n=t)||void 0===n?void 0:n.getLayerDefinition();if(null===(r=e.getDataSourceJson().schema)||void 0===r?void 0:r.fields){const t=Object.values(e.getDataSourceJson().schema.fields),n=null===(o=i.fields)||void 0===o?void 0:o.filter(e=>t.some(t=>(null==t?void 0:t.name)===(null==e?void 0:e.name)));return Object.assign(Object.assign({},i),{fields:n})}return i}}}else{if(e.id===e.getMainDataSource().id)return e.layerDefinition;if(e.isDataView||e.isLocal)return e.getMainDataSource().getLayerDefinition()}return null}const BS=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route\w*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/sentinel\w*\.arcgis\.com/i,/oceans\w*\.arcgis\.com/i,/tiledbasemaps\w*\.arcgis\.com/i],GS=[/traffic\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i];function WS(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription")}(e):function(e){return e&&BS.some(t=>t.test(e))}(t)}function qS(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits")}(e):function(e){return e&&GS.some(t=>t.test(e))}(t)}function zS(e){return e&&(e.itemId||e.url)?e.itemId?Uy(e.portalUrl,t=>Fb(this,void 0,void 0,(function*(){return Object(dv.a)(e.itemId,{portal:Rp(e.portalUrl),authentication:t}).then(t=>WS(t,e.url)).catch(e=>(console.error("Faield to check whether data source is subscriber.",e),Promise.resolve(!1)))}))):Promise.resolve(WS(null,e.url)):Promise.resolve(!1)}function HS(e){return e&&(e.itemId||e.url)?e.itemId?Uy(e.portalUrl,t=>Fb(this,void 0,void 0,(function*(){return Object(dv.a)(e.itemId,{portal:Rp(e.portalUrl),authentication:t}).then(t=>WS(t,e.url)||qS(t,e.url)).catch(e=>(console.error("Faield to check whether data source is subscriber.",e),Promise.resolve(!1)))}))):Promise.resolve(WS(null,e.url)||qS(null,e.url)):Promise.resolve(!1)}function JS(e){return e&&(e.itemId||e.url)?e.itemId?Uy(e.portalUrl,t=>Fb(this,void 0,void 0,(function*(){return Object(dv.a)(e.itemId,{portal:Rp(e.portalUrl),authentication:t}).then(t=>qS(t,e.url)).catch(e=>(console.error("Faield to check whether data source is premium.",e),Promise.resolve(!1)))}))):Promise.resolve(qS(null,e.url)):Promise.resolve(!1)}function YS(e){var t;return Fb(this,void 0,void 0,(function*(){if(e.dataViewId===Sc&&0===e.getSourceRecords().length){const t=e.getMainDataSource().getDataView(wc);if(t)return YS(t)}let n=null;try{if((null==e?void 0:e.type)===Aa.c.FeatureLayer||(null==e?void 0:e.type)===Aa.c.SceneLayer){const t=e;if(t.getDataSourceJson().isDataInDataSourceInstance){if(t.getSourceRecords().length>0){const e=t.getSourceRecords();n=yield Gy(t,e).then(e=>null==e?void 0:e.layer)}}else if(t.itemId&&!t.url)n=yield XS(t);else if(t.itemId||t.url){const e=t.type===Aa.c.FeatureLayer?jy(["esri/layers/FeatureLayer"]):jy(["esri/layers/SceneLayer"]),r=t.layerId?+t.layerId:NaN;n=yield e.then(e=>Fb(this,void 0,void 0,(function*(){const n=e[0];return t.itemId?new n(Object.assign(Object.assign({},t.url?{url:t.url}:{}),{portalItem:{id:t.itemId,portal:{url:t.portalUrl}},layerId:isNaN(r)?void 0:r})):new n({url:t.url})})))}else if(t.layer){const e=jy(["esri/layers/FeatureLayer"]);n=yield e.then(e=>{var n;return new(0,e[0])({fields:[...t.layer.fields],objectIdField:t.layer.objectIdField,source:(null===(n=t.layer.source)||void 0===n?void 0:n.toArray())||[],geometryType:t.layer.geometryType,spatialReference:t.layer.spatialReference,popupTemplate:t.layer.popupTemplate,renderer:t.layer.renderer,title:t.layer.title})})}}}catch(e){console.error("Failed to create JS API layer by data source. ",e)}return n&&(null==e?void 0:e.url)&&(n.url=e.url),n&&(n.definitionExpression=null===(t=null==e?void 0:e.getCurrentQueryParams())||void 0===t?void 0:t.where,n.type===Aa.g.FeatureLayer&&(n.gdbVersion=null==e?void 0:e.getGDBVersion())),n}))}function XS(e){return(null==e?void 0:e.itemId)&&(null==e?void 0:e.portalUrl)?jy(["esri/layers/Layer","esri/portal/PortalItem"]).then(t=>Fb(this,void 0,void 0,(function*(){const n=t[0],r=t[1];return n.fromPortalItem({portalItem:new r({id:e.itemId,portal:{url:e.portalUrl}})}).then(t=>(null==t?void 0:t.type)===Aa.g.FeatureLayer?Promise.resolve(t):(null==t?void 0:t.type)===Aa.g.GroupLayer?t.loadAll().then(t=>Fb(this,void 0,void 0,(function*(){const n=t.layers.toArray().find(t=>""+t.layerId===e.layerId||oS(t.title||t.id)===e.jimuChildId);return(null==n?void 0:n.type)===Aa.g.FeatureLayer?Promise.resolve(n):Promise.reject("Feaure layer data source error: failed to create feature layer with specific layer id.")}))):void 0)}))):Promise.resolve(null)}var KS,QS=KS||(KS={});QS.Pop="POP",QS.Push="PUSH",QS.Replace="REPLACE";var ZS=function(e){return e};function ew(e){e.preventDefault(),e.returnValue=""}function tw(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function nw(){return Math.random().toString(36).substr(2,8)}function rw(e){var t=e.pathname,n=e.search;return(void 0===t?"/":t)+(void 0===n?"":n)+(void 0===(e=e.hash)?"":e)}function ow(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}const iw=[/\.arcgis\.com$/];var aw,sw;function uw(e){if(!window||!window.parent||window.parent===window)return;const t=window.parent;try{if(t.jimuConfig&&t.jimuConfig.isBuilder)return}catch(e){}t.postMessage(e,window.location.origin)}function cw(e,t){return function(n){if(r=n.origin,!(window&&window.location.origin===r||iw.some(e=>e.test(r))))return;var r;if(!n.data)return;if(!Object.keys(sw).map(e=>sw[e]).includes(n.data.type))return;const o=n.data;o.type===e&&t(o)}}function lw(e,t){if(!window||!window.addEventListener)return;const n=cw(e,t);return window.addEventListener("message",n,!1),n}!function(e){e.JimuPageChanged="JIMU_PAGE_CHANGED",e.JimuQueryChanged="JIMU_QUERY_CHANGED"}(aw||(aw={})),function(e){e.ChangePage="CHANGE_PAGE",e.ChangeQuery="CHANGE_QUERY"}(sw||(sw={}));const dw=document&&function(e){function t(){var e=a.location,t=s.state||{};return[t.idx,ZS({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"==typeof e?e:rw(e)}function r(e,t){return void 0===t&&(t=null),ZS(_({},d,{},"string"==typeof e?ow(e):e,{state:t,key:nw()}))}function o(e){c=e,e=t(),l=e[0],d=e[1],f.call({action:c,location:d})}function i(e){s.go(e)}void 0===e&&(e={});var a=void 0===(e=e.window)?document.defaultView:e,s=a.history,u=null;a.addEventListener("popstate",(function(){if(u)p.call(u),u=null;else{var e=KS.Pop,n=t(),r=n[0];if(n=n[1],p.length){if(null!=r){var a=l-r;a&&(u={action:e,location:n,retry:function(){i(-1*a)}},i(a))}}else o(e)}}));var c=KS.Pop,l=(e=t())[0],d=e[1],f=tw(),p=tw();return null==l&&(l=0,s.replaceState(_({},s.state,{idx:l}),"")),{get action(){return c},get location(){return d},createHref:n,push:function e(t,i){var u=KS.Push,c=r(t,i);if(!p.length||(p.call({action:u,location:c,retry:function(){e(t,i)}}),0)){var d=[{usr:c.state,key:c.key,idx:l+1},n(c)];c=d[0],d=d[1];try{s.pushState(c,"",d)}catch(e){a.location.assign(d)}o(u)}},replace:function e(t,i){var a=KS.Replace,u=r(t,i);p.length&&(p.call({action:a,location:u,retry:function(){e(t,i)}}),1)||(u=[{usr:u.state,key:u.key,idx:l},n(u)],s.replaceState(u[0],"",u[1]),o(a))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(e){return f.push(e)},block:function(e){var t=p.push(e);return 1===p.length&&a.addEventListener("beforeunload",ew),function(){t(),p.length||a.removeEventListener("beforeunload",ew)}}}}();lw(sw.ChangePage,e=>{vw(e.pageId)}),lw(sw.ChangeQuery,e=>{gw(e.queryObject)}),dw&&dw.listen(({action:e,location:t})=>{const n=mg().getState().queryObject.asMutable();if(t.pathname!==mg().getState().appPath){mg().dispatch(Lg(t.pathname));const e=jh(t.pathname).pageId;r=e,uw({type:aw.JimuPageChanged,pageId:r})}var r;const o=ye.parse(t.search);var i;pc(n,o)||(mg().dispatch(Xg(o)),i=o,uw({type:aw.JimuQueryChanged,queryObject:i}))});const fw=E.createContext(dw),pw=e=>E.createElement(fw.Provider,{value:dw},e.children);function hw(e){class t extends E.PureComponent{render(){return E.createElement(fw.Consumer,null,t=>E.createElement(e,Object.assign({},this.props,{history:t})))}}return t.displayName=`HistoryComponent(${e.displayName})`,t}function gw(e,t=!1,n=!1){if(pc(e,mg().getState().queryObject))return;let r=n?be(e):mg().getState().queryObject.merge(e);r=r.without.apply(r,Object.keys(r).filter(e=>null===r[e]));const o=Uh(dw.location,"?"+ye.stringify(r));t?dw.replace(o):dw.push(o)}function mw(e,t=!1){const n=Uh(dw.location,"?"+ye.stringify(e));t?dw.replace(n):dw.push(n)}function vw(e){jh().pageId!==e&&dw.push(kh(e,mg().getState().queryObject))}function yw(e,t){let n=mg().getState().queryObject.views?mg().getState().queryObject.views.split(","):[];const r=n.length,o=Object.keys(mg().getState().appConfig.views);n=n.filter(e=>o.includes(e));const i=n.length;if(n.includes(t)){if(r===i)return;return gw({views:n.join(",")})}return n=n.filter(t=>!mg().getState().appConfig.sections[e].views.includes(t)),n.push(t),gw({views:n.join(",")})}function bw(e){return gw({dlg:e})}function Sw(e,t){Iw(e,{indexes:null,ids:t})}function ww(e,t){Iw(e,{indexes:t,ids:null})}function Iw(e,{indexes:t,ids:n}){const r=function(e,{indexes:t,ids:n}){if(t)return 1===t.length?`${e}:${t[0]}`:`${e}:${t.join("+")}`;if(n)return 0===(n=n.filter(e=>!!e)).length?null:1===n.length?`${e}:${n[0]}`:`${e}:${n.join("+")}`}(e,{indexes:t,ids:n}),o=t?mg().getState().queryObject.data_index:mg().getState().queryObject.data_id;let i=[];o&&(i=o.split(","));const a=[];let s=!1;i.forEach(t=>{t.split(":")[0]===e?r&&(a.push(r),s=!0):a.push(t)}),!s&&r&&a.push(r),gw({data_index:t&&a.length>0?a.join(","):null,data_id:n&&a.length>0?a.join(","):null},!0)}var Ew,Ow,Tw;!function(e){e.String="STRING",e.Number="NUMBER",e.Field="FIELD",e.Function="FUNCTION",e.Operator="OPERATOR",e.Unknown="UNKNOWN"}(Ew||(Ew={})),function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN"}(Ow||(Ow={})),function(e){e.Count="count",e.Sum="sum",e.Min="min",e.Max="max",e.Avg="avg"}(Tw||(Tw={}));const Cw="esriFieldTypeOID";var Aw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var xw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Pw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Dw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Rw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var jw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var _w;function kw(e,t,n){return jw(this,void 0,void 0,(function*(){if(!e||0===e.length)return yield Promise.reject(_w.ParamNumber);const r=e.filter(e=>e.type!==Ew.Operator&&e.type!==Ew.Unknown);if(0===r.length)return Promise.reject(_w.ParamNumber);if(1===r.length&&tI(r)){const e=function(e){return!!(e&&e.length>0&&e.some(e=>e.type===Ew.Field&&function(e){if(!e)return!0;const t=e.dataSourceId,n=_g.getInstance().getDataSource(t);return(null==n?void 0:n.dataViewId)===Sc}(e)))}(r),o=function(e){return!!(e&&e.length>0&&e.some(e=>e.isFromRepeatedDataSourceContext))}(r);return e?function(e,t){var n;return jw(this,void 0,void 0,(function*(){if(!e||e.type!==Ew.Field)return yield Promise.reject(_w.ParamType);let r=_g.getInstance().getDataSource(e.dataSourceId);if((null==r?void 0:r.isDataView)&&r.dataViewId===Sc&&0===(null===(n=r.getRecords())||void 0===n?void 0:n.length)&&(r=r.getMainDataSource().getDataView(wc)||r),!r)return yield Promise.reject(_w.NeedDataSource);if(!US(null==e?void 0:e.dataSourceId)){const n=Object.assign(Object.assign({},e),{dataSourceId:r.id});return yield Mw([n],t)}const o=r&&r.getSchema(),i=e.jimuFieldName,a=o&&o.fields&&o.fields[i];if(!(a&&a.type===da.Number))return yield Promise.reject(_w.ParamType);const s=r.getRecords();if(!s||0===s.length)return yield Promise.reject(_w.NeedRecord);const u=s.map(e=>e.getData()[i]||0);return Promise.resolve($w(u,t,!1))}))}(r[0],t):o?function(e,t,n){return jw(this,void 0,void 0,(function*(){if(!e||e.type!==Ew.Field)return yield Promise.reject(_w.ParamType);if(t===Ow.Count)return yield Promise.resolve(1);{const t=Ww(e,n);if(!t)return yield Promise.reject(_w.NeedRecord);const r=Jw(e.jimuFieldName,t,!1);return"number"==typeof r?yield Promise.resolve(r):yield Promise.reject(_w.ParamType)}}))}(r[0],t,n):Mw(r,t)}return Promise.reject(_w.ParamNumber)}))}function Mw(e,t){return jw(this,void 0,void 0,(function*(){if(!e||0===e.length)return yield Promise.reject(_w.ParamNumber);const n=e.filter(e=>e.type!==Ew.Operator&&e.type!==Ew.Unknown);if(n.length>0&&Uw(n)){const e=function(e){if(!e)return{};const t={};return e.forEach(e=>{t[e.dataSourceId]?t[e.dataSourceId].push(e):t[e.dataSourceId]=[e]}),t}(n);return Promise.all(Object.keys(e).map(n=>jw(this,void 0,void 0,(function*(){return yield function(e,t){return jw(this,void 0,void 0,(function*(){if(!e||0===e.length)return yield Promise.resolve(0);const n=_g.getInstance().getDataSource(e[0].dataSourceId),r=function(e,t){let n="EXPRESSION_RESOLVER-"+t;return e&&e.forEach(e=>{n=`${n}-${e.jimuFieldName}`}),n}(e,t),o=_g.getInstance().createLocalDataSource(n,r);if(n&&n.load){const i=function(e,t){if(!e)return null;const n=[];return e.forEach((e,r)=>{const o=_g.getInstance().getDataSource(e.dataSourceId),i=o&&o.getSchema(),a=i&&i.fields&&i.fields[e.jimuFieldName],s=function(e,t,n){return`${t||""}_${Nw(n)?n:""}_${e}`}(t,a&&a.jimuName,r);n.push({onStatisticField:a&&a.name,outStatisticFieldName:s,statisticType:Lw(t)})}),{returnGeometry:!0,where:"1=1",outStatistics:n}}(e,t);return yield o.load(i,{widgetId:r}).then(e=>{var r,o,i,a,s;const u=e&&e[0]&&e[0].getData()||{},c=Object.keys(u).map((e,t)=>u[e]);if(t===Ow.Count){const e=n.isDataView?(null===(o=null===(r=n.getMainDataSource())||void 0===r?void 0:r.getDataSourceJson())||void 0===o?void 0:o.dataViews)&&(null===(i=n.getMainDataSource().getDataSourceJson().dataViews[n.dataViewId])||void 0===i?void 0:i.maximum):null===(s=null===(a=n.getDataSourceJson())||void 0===a?void 0:a.query)||void 0===s?void 0:s.maximum;"number"==typeof e&&(c[0]=Math.min(c[0],e))}return $w(c,t,!0)})}}))}(e[n],t)})))).then(e=>{const n=e.length>0?$w(e,t,!0):null;if(null!==n)return n;throw new Error(_w.ParamType)})}if(!(n.length>0&&Fw(n))){if(n.length>0&&n.every(e=>Fw([e])||Uw([e]))){const e=n.filter(e=>Fw([e]));return Mw(n.filter(e=>Uw([e])),t).then(n=>jw(this,void 0,void 0,(function*(){return yield Mw(e.concat({type:Ew.Number,exp:""+n}),t)})))}return yield Promise.reject(_w.ParamType)}switch(t){case Ow.Average:return Promise.resolve(Vw(n)/n.length);case Ow.Sum:return Promise.resolve(Vw(n));case Ow.Count:return Promise.resolve(n.length);case Ow.Max:return Promise.resolve(function(e){const t=e.map(e=>parseFloat(e.exp));return t.length>0&&t.every(e=>Nw(e))?Math.max.apply(null,t):0}(n));case Ow.Min:return Promise.resolve(function(e){const t=e.map(e=>parseFloat(e.exp));return t.length>0&&t.every(e=>Nw(e))?Math.min.apply(null,t):0}(n));default:return Promise.reject(_w.FuncType)}}))}function Nw(e){return!isNaN(parseFloat(e))&&isFinite(e)&&"[object Number]"===Object.prototype.toString.call(e)}function Lw(e){switch(e){case Ow.Average:return Tw.Avg;case Ow.Count:return Tw.Count;case Ow.Sum:return Tw.Sum;case Ow.Max:return Tw.Max;case Ow.Min:return Tw.Min;default:return null}}function Uw(e){return!!e&&e.every(e=>{if(e.type===Ew.Field&&e.jimuFieldName&&e.dataSourceId){const t=_g.getInstance().getDataSource(e.dataSourceId),n=t&&t.getSchema(),r=n&&n.fields&&n.fields[e.jimuFieldName];return r&&r.type===da.Number}return!1})}function Fw(e){return!!e&&e.every(e=>e.type===Ew.Number)}function $w(e,t,n){if(!e||0===e.length||e.some(e=>!Nw(e)))return 0;switch(t){case Ow.Average:return e.reduce((e,t)=>e+t,0)/e.length;case Ow.Sum:return e.reduce((e,t)=>e+t,0);case Ow.Count:return n?e[0]:e.length;case Ow.Max:return Math.max.apply(null,e);case Ow.Min:return Math.min.apply(null,e);default:return 0}}function Vw(e){const t=e.map(e=>parseFloat(e.exp));return t.length>0&&t.every(e=>Nw(e))?t.reduce((e,t)=>e+t,0):0}function Bw(e){let t=[];const n=[];return e&&e.forEach((r,o)=>{if(r&&!n.some(e=>e===o))if(r.type!==Ew.Function)t=t.concat(r);else if(n.push(o),e[o+1]&&e[o+1].type===Ew.Operator&&"("===e[o+1].exp){const i=e.slice(o+2);let a=0,s=0;for(let e=0;e<i.length;e++){if(0===s&&i[e].type===Ew.Operator&&")"===i[e].exp){a=e;break}s>0&&i[e].type===Ew.Operator&&")"===i[e].exp?s--:i[e].type===Ew.Operator&&"("===i[e].exp&&s++}const u=a+o+2;if(u>=o+2){const i=e.slice(o+2,u);for(let e=o+1;e<=u;e++)n.push(e);t=t.concat(Object.assign(Object.assign({},r),{parts:Bw(i)}))}else console.warn("Can not martch parentheses")}else t=t.concat(r)}),t}function Gw(e=[],t,n,r,o){return e.map((e,i)=>jw(this,void 0,void 0,(function*(){if(e.type===Ew.Field){const t=Ww(e,n);if(!t||!0===t.fake)return yield Promise.reject(_w.NeedRecord);const i=Jw(e.jimuFieldName,t,r,o);return yield Promise.resolve(Hw(i,r,o))}return e.type===Ew.Function?yield function(e,t,n){return jw(this,void 0,void 0,(function*(){if(eI(e&&e.parts)){const r=oI(e.parts);return yield Promise.all(Object.keys(r).sort((e,t)=>parseInt(e)-parseInt(t)).map(e=>jw(this,void 0,void 0,(function*(){return yield Xw(r[e],t,n)})))).then(e=>e.map(e=>{return Hw((t=e,!isNaN(parseFloat(t))&&isFinite(t)?parseFloat(e):e),!1);var t})).then(t=>jw(this,void 0,void 0,(function*(){return yield qw(Object.assign(Object.assign({},e),{parts:t}),n)})))}return yield qw(e,n)}))}(e,t,n).then(e=>Hw(e,r,o)):Promise.resolve(e)})))}function Ww(e,t){var n,r;let o;const i=US(null==e?void 0:e.dataSourceId);if(e.isFromRepeatedDataSourceContext)o=Array.isArray(t)?null===(n=t[0])||void 0===n?void 0:n.record:null===(r=t)||void 0===r?void 0:r.record;else if(i){const t=_g.getInstance().getDataSource(e.dataSourceId);if(o=null==t?void 0:t.getRecords()[0],!o){const e=null==t?void 0:t.getMainDataSource().getDataView(wc);o=null==e?void 0:e.getRecords()[0]}}else{const t=_g.getInstance().getDataSource(e.dataSourceId);o=null==t?void 0:t.getRecords()[0]}return o}function qw(e,t){return jw(this,void 0,void 0,(function*(){return e.exp===Ow.Average?yield function(e,t){return Aw(this,void 0,void 0,(function*(){return yield kw(e,Ow.Average,t)}))}(e.parts,t):e.exp===Ow.Count?yield function(e,t,n){return xw(this,void 0,void 0,(function*(){if(!e||0===e.length){let e=null;const r=_g.getInstance().getDataSource(t);if(r){const o=r&&r.getSchema(),i=o&&o.fields&&Object.keys(o.fields).find(e=>o.fields[e].esriType===Cw),a=o&&o.fields&&o.fields[i];if(a)e=[{type:Ew.Field,jimuFieldName:a.jimuName,dataSourceId:t,exp:`{${a.alias||a.name}}`}];else if(o&&o.fields&&Object.keys(o.fields).length>0){const n=Object.keys(o.fields)[0],r=o.fields[n];r&&(e=[{type:Ew.Field,jimuFieldName:r.jimuName,dataSourceId:t,exp:`{${r.alias||r.name}}`}])}return e?kw(e,Ow.Count,n):Promise.reject(_w.ParamNumber)}return Promise.reject(_w.ParamNumber)}}))}(e.parts,e.dataSourceId,t):e.exp===Ow.Sum?yield function(e,t){return Pw(this,void 0,void 0,(function*(){return yield kw(e,Ow.Sum,t)}))}(e.parts,t):e.exp===Ow.Max?yield function(e,t){return Dw(this,void 0,void 0,(function*(){return yield kw(e,Ow.Max,t)}))}(e.parts,t):e.exp===Ow.Min?yield function(e,t){return Rw(this,void 0,void 0,(function*(){return yield kw(e,Ow.Min,t)}))}(e.parts,t):(console.warn("Unknown function: ",e),yield Promise.resolve(""))}))}function zw(e,t){const n=[];return e.forEach(e=>{if(e.type===Ew.Number)n.push(t?e.exp:parseFloat(e.exp));else if(e.type===Ew.String)n.push(e.exp.replace(/^"/,"").replace(/"$/,""));else if(e.type===Ew.Operator){const t=n.pop(),r=function(e,t,n){switch(n){case"*":return Nw(e)&&Nw(t)?parseFloat(e)*parseFloat(t):"";case"/":return Nw(e)&&Nw(t)?parseFloat(e)/parseFloat(t):"";case"-":return Nw(e)&&Nw(t)?parseFloat(e)-parseFloat(t):"";default:return Nw(e)&&Nw(t)?parseFloat(e)+parseFloat(t):`${e}${t}`}}(n.pop(),t,e.exp);n.push(r)}}),n.pop()}function Hw(e,t,n){return Nw(e)?{exp:t&&n?n.formatNumber(e):e,type:Ew.Number}:{exp:`"${e.replace(/^"/,"").replace(/"$/,"")}"`,type:Ew.String}}function Jw(e,t,n,r){let o="";if(!(i=t)||!i.getData||"function"!=typeof i.getData)return o;var i;const a=n&&r?t.getFormattedData(r):t.getData();return a&&null!==a[e]&&void 0!==a[e]&&(o=a[e]),o}!function(e){e.ParamType="INVALID_PARAM_TYPE",e.ParamNumber="INVALID_NUMBER_OF_PARAMS",e.FuncType="INVALID_FUNCTION_TYPE",e.NeedRecord="NEED_RECORD",e.NeedDataSource="NEED_DATA_SOURCE"}(_w||(_w={}));var Yw=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Xw(e,t,n,r){return Yw(this,void 0,void 0,(function*(){const o=e&&e.parts&&e.parts.slice();if(!o)return yield Promise.resolve("");const i=Bw(o),a=i&&1===Object.keys(i).filter(e=>!/^\s*$/.test(i[e].exp)).length;return Promise.all(Gw(i,t,n,a,r)).then(e=>{var t;return""+(null!==(t=zw(function(e){const t=[],n=[];for(e.forEach((e,r)=>{if(e.type===Ew.Number||e.type===Ew.String)t.push(e);else if(e.type===Ew.Operator)if("("===e.exp)n.push(e);else if(")"===e.exp){let e=n.pop();for(;"("!=e.exp;)t.push(e),e=n.pop()}else if("+"===e.exp||"-"===e.exp){for(;n.length>0&&("+"===n[n.length-1].exp||"-"===n[n.length-1].exp||"*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}else if("*"===e.exp||"/"===e.exp){for(;n.length>0&&("*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}});n.length>0;)t.push(n.pop());return t}(e),a))&&void 0!==t?t:"")})}))}function Kw(e,t){if(!e||!e.length)return sI(t);const n={};return e.filter(e=>!!e).forEach(e=>{if(e.dataSourceId){let r,o;const i=_g.getInstance().getDataSource(e.dataSourceId),a=i&&i.getMainDataSource(),s=a&&a.id,u=t&&s&&t.asMutable({deep:!0}).find(e=>e.mainDataSourceId===s),c=US(null==e?void 0:e.dataSourceId);if(c&&u?r=u.dataSourceId:c||(r=e.dataSourceId),!r)return;if(!n[r]){if(c&&u)o=Object.assign({},u),delete o.fields;else if(!c){const e=i&&i.dataViewId,t=i&&i.getRootDataSource(),n=t&&t.id;o={dataSourceId:r,mainDataSourceId:s,fields:[]},e&&(o.dataViewId=e),n&&(o.rootDataSourceId=n)}r&&o&&(n[r]=o)}e.jimuFieldName&&n[r]&&(n[r].fields&&n[r].fields.every(t=>t!==e.jimuFieldName)?n[r].fields=n[r].fields.concat(e.jimuFieldName):n[r].fields||(n[r].fields=[e.jimuFieldName]))}}),be(Object.values(n))}function Qw(e=be([]),t=be([])){let n=be([]),r=be({});const o=be(e.concat(t)),i={};return o.forEach(e=>{i[e.dataSourceId]||(i[e.dataSourceId]=o.filter(t=>e.dataSourceId===t.dataSourceId))}),Object.keys(i).forEach(e=>{r=be({}),i[e].forEach(e=>{r=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){const n=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",n)}return e.merge(t.asMutable({deep:!0}))}(r,e)}),n=be(n.concat(r))}),n}function Zw(e){if(!e||!e.parts)return!0;const t=e.parts.filter(e=>!!e),n=t.some(e=>e.type===Ew.Unknown);if(n)return!1;const r=t.filter(e=>e.type===Ew.Operator&&"("===e.exp).length===t.filter(e=>e.type===Ew.Operator&&")"===e.exp).length;if(!r)return!1;const o=t.filter(e=>!(e.type===Ew.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp))||e.type===Ew.Function&&e.exp!==Ow.Count));let i=!0;for(let e=0;e<o.length;e++)if((e%2==0||e===o.length-1)&&o[e].type===Ew.Operator||e%2==1&&o[e].type!==Ew.Operator){i=!1;break}if(!i)return!1;let a=!0;for(let e=0;e<t.length;e++)if(t[e].type===Ew.Function&&!nI(t[e])||t[e].type===Ew.Field&&!rI(t[e].dataSourceId,t[e].jimuFieldName,t[e].exp.replace(/^\{/,"").replace(/\}$/,""))){a=!1;break}if(!a)return!1;const s=Bw(t),u=!s.some(e=>e.type===Ew.Operator&&","===e.exp);if(!u)return!1;const c=s.every(e=>{if(e.type===Ew.Function){if(e.exp===Ow.Count)return e.parts&&0===e.parts.length;if(Object.keys(Ow).some(t=>e.exp===Ow[t])){if(e.parts&&1===e.parts.length&&e.parts[0].type===Ew.Field){const t=_g.getInstance().getDataSource(e.parts[0].dataSourceId),n=t&&t.getSchema(),r=e.parts[0].jimuFieldName,o=n&&n.fields&&n.fields[r];return o&&o.type===da.Number}return!1}return!1}return!0});return!n&&r&&i&&a&&u&&c}function eI(e){return!!(e&&e.length>1&&e.some(e=>e.type===Ew.Operator&&/^[\+\-\*\/\(\)]$/.test(e.exp)))||!(!e||1!==e.length||e[0].type!==Ew.Function)}function tI(e){const t=oI(e);return!!(t&&Object.keys(t).length>0&&Object.keys(t).some(e=>t[e].parts&&1===t[e].parts.length&&t[e].parts[0].type===Ew.Field))}function nI(e){return!(!e||e.type!==Ew.Function)&&Object.keys(Ow).some(t=>Ow[t]===e.exp)}function rI(e,t,n){if(!e||!t)return!1;const r=_g.getInstance().getDataSource(e),o=r&&r.getSchema&&r.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||n!==(i[t].alias||i[t].name))}function oI(e){const t={};let n,r=!0;return e.filter(e=>!/^\s*$/.test(e.exp)).forEach((e,o)=>{e.type===Ew.Operator&&","===e.exp?r=!0:(r?(n=o,t[o]={name:"default",parts:[e]}):t[n].parts=t[n].parts.concat(e),r=!1)}),t}const iI=e=>{var t,n,r;if(e)return 1===(null===(t=e.parts)||void 0===t?void 0:t.length)&&(null===(r=null===(n=e.parts)||void 0===n?void 0:n[0])||void 0===r?void 0:r.type)===Ew.String},aI=e=>{var t,n,r;return iI(e)?null===(r=null===(n=null===(t=e.parts)||void 0===t?void 0:t[0])||void 0===n?void 0:n.exp)||void 0===r?void 0:r.replace(/(^\"|\"$)/g,""):""},sI=e=>null==e?void 0:e.map(e=>null==e?void 0:e.without("fields").asMutable({deep:!0})),uI=e=>null==e?void 0:e.some(e=>{var t;return!!(null===(t=e.fields)||void 0===t?void 0:t.length)});function cI(){var e=E.useContext(Fd);return _d(e),e}var lI,dI;!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(lI||(lI={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(dI||(dI={}));var fI=function(e){var t=cI(),n=e.value,r=e.children,o=Dd(e,["value","children"]);return r(t.formatNumberToParts(n,o))};fI.displayName="FormattedNumberParts";function pI(e){var t=function(t){var n=cI(),r=t.value,o=t.children,i=Dd(t,["value","children"]),a="string"==typeof r?new Date(r||0):r;return o("formatDate"===e?n.formatDateToParts(a,i):n.formatTimeToParts(a,i))};return t.displayName=dI[e],t}function hI(e){var t=function(t){var n=cI(),r=t.value,o=t.children,i=Dd(t,["value","children"]),a=n[e](r,i);if("function"==typeof o)return o(a);var s=n.textComponent||E.Fragment;return E.createElement(s,null,a)};return t.displayName=lI[e],t}fI.displayName="FormattedNumberParts";var gI=hI("formatDate"),mI=hI("formatTime"),vI=hI("formatNumber");hI("formatList"),hI("formatDisplayName"),pI("formatDate"),pI("formatTime");function yI(e){var t=cI(),n=t.formatMessage,r=t.textComponent,o=void 0===r?E.Fragment:r,i=e.id,a=e.description,s=e.defaultMessage,u=e.values,c=e.children,l=e.tagName,d=void 0===l?o:l,f=n({id:i,description:a,defaultMessage:s},u,{ignoreTag:e.ignoreTag});return Array.isArray(f)||(f=[f]),"function"==typeof c?c(f):d?E.createElement(d,null,E.Children.toArray(f)):E.createElement(E.Fragment,null,f)}yI.displayName="FormattedMessage";var bI=E.memo(yI,(function(e,t){var n=e.values,r=Dd(e,["values"]),o=t.values,i=Dd(t,["values"]);return Md(o,n)&&Md(r,i)}));bI.displayName="MemoizedFormattedMessage";var SI=bI,wI=function(e){var t=cI(),n=t.formatPlural,r=t.textComponent,o=e.value,i=e.other,a=e.children,s=e[n(o,e)]||i;return"function"==typeof a?a(s):r?E.createElement(r,null,s):s};wI.defaultProps={type:"cardinal"},wI.displayName="FormattedPlural";var II=wI;function EI(e){var t=Math.abs(e);return t<60?"second":t<3600?"minute":t<86400?"hour":"day"}function OI(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return 3600;default:return 86400}}var TI=["second","minute","hour"];function CI(e){return void 0===e&&(e="second"),TI.includes(e)}var AI=function(e){var t=cI(),n=t.formatRelativeTime,r=t.textComponent,o=e.children,i=n(e.value||0,e.unit,Dd(e,["children","value","unit"]));return"function"==typeof o?o(i):r?E.createElement(r,null,i):E.createElement(E.Fragment,null,i)},xI=function(e){var t=e.value,n=e.unit,r=e.updateIntervalInSeconds,o=Dd(e,["value","unit","updateIntervalInSeconds"]);jd(!r||!(!r||!CI(n)),"Cannot schedule update with unit longer than hour");var i,a=E.useState(),s=a[0],u=a[1],c=E.useState(0),l=c[0],d=c[1],f=E.useState(0),p=f[0],h=f[1];n===s&&t===l||(d(t||0),u(n),h(CI(n)?function(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return 3600*e}}(t,n):0)),E.useEffect((function(){function e(){clearTimeout(i)}if(e(),!r||!CI(n))return e;var t=p-r,o=EI(t);if("day"===o)return e;var a=OI(o),s=t-t%a,u=s>=p?s-a:s,c=Math.abs(u-p);return p!==u&&(i=setTimeout((function(){return h(u)}),1e3*c)),e}),[p,r,n]);var g=t||0,m=n;if(CI(n)&&"number"==typeof p&&r){var v=OI(m=EI(p));g=Math.round(p/v)}return E.createElement(AI,Pd({value:g,unit:m},o))};xI.displayName="FormattedRelativeTime",xI.defaultProps={value:0,unit:"second"};var PI=xI;const DI=E.createContext(null);function RI({data:e,children:t}){return E.createElement(DI.Consumer,null,n=>{let r=e;return n&&(r=Array.isArray(n)?n.concat(e):[n].concat(e)),E.createElement(DI.Provider,{value:r},t)})}DI.Consumer;function jI(e){function t(t){return E.createElement(DI.Consumer,null,n=>E.createElement(e,Object.assign({},t,{repeatedDataSource:n})))}return t.displayName="RepeatedDataSourceContextConsumerWrapper",t}class _I extends E.PureComponent{}var kI=_I;function MI(e,t){return e===t}function NI(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function LI(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}var UI=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),s=LI(r),u=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return u.apply(null,e)}));return c.resultFunc=a,c.dependencies=s,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MI,n=null,r=null;return function(){return NI(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var FI=function(e,t,n){"__proto__"==t&&Og?Og(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},$I=Object.prototype.hasOwnProperty;var VI=function(e,t,n){var r=e[t];$I.call(e,t)&&bs(r,n)&&(void 0!==n||t in e)||FI(e,t,n)};var BI=function(e,t,n,r){if(!qa(e))return e;for(var o=-1,i=(t=Js(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var u=Ys(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=qa(l)?l:_u(t[o+1])?[]:{})}VI(s,u,c),s=s[u]}return e};var GI=function(e,t,n){return null==e?e:BI(e,t,n)};class WI{constructor(){this.state={}}static getInstance(){return WI.instance||(WI.instance=new WI,window._mutableStoreManager=WI.instance),WI.instance}updateStateValue(e,t,n){var r;const o=null!==(r=null==t?void 0:t.split("."))&&void 0!==r?r:[],i=[e].concat(o);GI(this.state,i,n),mg().dispatch(wm(e,t))}getStateValue(e){return Ks(this.state,e)}getState(){return this.state}}var qI=n(9),zI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class HI{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return HI.instance||(HI.instance=new HI,window._messageManager=HI.instance),HI.instance}getActions(){return this.actions}getWidgetActions(e){return this.actions.filter(t=>t.widgetId===e)}getAction(e,t){return this.actions.find(n=>n.widgetId===e&&n.name===t)}destroyWidgetActions(e){this.actions=this.actions.filter(t=>(t.destroy(),t.widgetId!==e))}registerWidgetActions(e,t){return zI(this,void 0,void 0,(function*(){if(e.context.isRemote)return yield Promise.resolve();const n=[];return e.manifest.messageActions&&e.manifest.messageActions.forEach(r=>{let o;o=e.context.isRemote?e.context.folderUrl+"dist/"+r.uri+".js":e.uri+"dist/"+r.uri,n.push(this.registerAction({id:`${e.id}-${r.name}`,name:r.name,uri:o,widgetId:e.id,appConfig:t,label:e.manifest.i18nMessages[`_action_${r.name}_label`]||r.label}))}),Promise.all(n)}))}registerAction(e){return zI(this,void 0,void 0,(function*(){let t=this.actions.find(t=>t.id===e.id);if(t)return Promise.resolve(t);return yield(()=>zI(this,void 0,void 0,(function*(){return e.ActionClass?yield Promise.resolve(e.ActionClass):yield this.loadActionClass(e.uri)})))().then(n=>zI(this,void 0,void 0,(function*(){t=new n({id:e.id,name:e.name,widgetId:e.widgetId,label:e.label});let r=[];if(n.versionManager&&e.appConfig){r=vh(e.appConfig,e.widgetId,e.name).map(t=>zI(this,void 0,void 0,(function*(){return yield this.upgradeActionConfig(t,n.versionManager,e.appConfig.widgets[e.widgetId].manifest.version)})))}return yield Promise.all(r).then(()=>(this.actions.push(t),t))})))}))}upgradeActionConfig(e,t,n){return zI(this,void 0,void 0,(function*(){const r=e.version,o=e.widgetId,i=e.config;return r||(e.version="1.0.0-beta2"),n===r?i:t?qI.valid(r)&&qI.valid(n)?yield t.upgrade(i,r,n,e.actionId).then(t=>{e.config=t,e.version=n}):(console.error("Bad widget action config version number, "+o+","+r+","+n),i):i}))}loadActionClass(e){return zI(this,void 0,void 0,(function*(){return this.actionClassPromises[e]?yield this.actionClassPromises[e]:(this.actionClassPromises[e]=vp(e,["default"]).then(e=>e.default),this.actionClassPromises[e])}))}publishMessage(e){return zI(this,void 0,void 0,(function*(){const t=mg().getState().appConfig.messageConfigs,n=Object.keys(t);let r=null;for(let o=0;o<n.length;o++)if(t[n[o]].messageType===e.type&&t[n[o]].widgetId===e.widgetId){r=t[n[o]];break}if(r)for(let t=0;t<r.actions.length;t++){const n=r.actions[t],o=this.actions.filter(e=>e.widgetId===n.widgetId&&e.name===n.actionName)[0];if(!o){console.error("Not find action: "+n.actionName);break}if(!o.filterMessage(e))break;if(!(yield this.exeAction(o,e,n.config)))return}}))}exeAction(e,t,n){return zI(this,void 0,void 0,(function*(){const r=e.onExecute(t,n);return r&&r instanceof Promise?yield r.then(e=>e,(function(e){return zI(this,void 0,void 0,(function*(){return console.error(e),yield Promise.resolve(!1)}))})):yield Promise.resolve(r)}))}}var JI=HI,YI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function XI(e,t,n){var r,o,i,a,s,u;if(e===t)return!1;const c=null===(r=mg().getState().appConfig)||void 0===r?void 0:r.widgets[e];if(!c)return!1;const l=c.dataActions;if(null===(i=null===(o=null==l?void 0:l[n])||void 0===o?void 0:o.enabled)||void 0===i||i){const e=null===(s=null===(a=null==l?void 0:l[n])||void 0===a?void 0:a.actions)||void 0===s?void 0:s[t];return null===(u=null==e?void 0:e.enabled)||void 0===u||u}return!1}class KI{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return KI.instance||(KI.instance=new KI,window._dataActionManager=KI.instance),KI.instance}getActions(){return this.actions}getSupportedActions(e,t,n=[]){var r,o,i;return YI(this,void 0,void 0,(function*(){const a={},s=mg().getState(),u=s.appConfig,c=s.browserSizeMode,l=null==u?void 0:u.widgets[e],d=null===(o=null===(r=l.manifest)||void 0===r?void 0:r.properties)||void 0===o?void 0:o.excludeDataActions,f=Eh(u,c);for(let r=0;r<this.actions.length;r++){const o=this.actions[r],s=null===(i=mg().getState().appConfig)||void 0===i?void 0:i.widgets[o.widgetId];if(yield this.testActionSupportData(o,t,n)){if(o.widgetId&&(this.isActionExcluded(`${s.manifest.name}.${o.name}`,d)||!XI(e,o.widgetId,o.name)||!wh(f,e,o.widgetId)))continue;a[o.name]||(a[o.name]=[]),a[o.name].push(o)}}return a}))}isActionExcluded(e,t=[]){const n=e.split(".");if(2!==n.length)return!0;const r=n[0]+".*";return t.some(t=>t===e||t===r)}registerWidgetActions(e){var t;return YI(this,void 0,void 0,(function*(){const n=[];if(!e.uri||!e.manifest.dataActions||0===e.manifest.dataActions.length)return n;for(let r=0;r<e.manifest.dataActions.length;r++){const o=e.manifest.dataActions[r],i=e.uri+"dist/"+o.uri,a=`${e.id}-${o.name}`,s=yield this.registerAction({id:a,name:o.name,uri:i,widgetId:e.id,label:null!==(t=e.manifest.i18nMessages[`_action_${o.name}_label`])&&void 0!==t?t:o.label,icon:`${lh(e.uri).folderUrl}dist/${o.icon}`});s&&n.push(s)}return n}))}registerAction(e){return YI(this,void 0,void 0,(function*(){const t=this.actions.find(t=>t.id===e.id);if(t)return t;const n=()=>YI(this,void 0,void 0,(function*(){return e.ActionClass?e.ActionClass:yield this.loadActionClass(e.uri)}));try{const t=new(yield n())({id:e.id,name:e.name,label:e.label,icon:e.icon,widgetId:e.widgetId});return this.actions.push(t),t}catch(t){console.error(`Action class ${e.uri} load failed`)}return null}))}destroyWidgetActions(e){this.actions=this.actions.filter(t=>(t.destroy(),t.widgetId!==e))}getActionsByWidgetId(e){return this.actions.filter(t=>t.widgetId===e)}loadActionClass(e){return YI(this,void 0,void 0,(function*(){return this.actionClassPromises[e]?yield this.actionClassPromises[e]:(this.actionClassPromises[e]=vp(e,["default"]).then(e=>e.default),this.actionClassPromises[e])}))}testActionSupportData(e,t,n){return YI(this,void 0,void 0,(function*(){return yield e.isSupported(t,n)}))}}var QI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class ZI{constructor(){this.widgets={},vg(this.onStoreChange.bind(this),["appConfig","widgets"]),this.dsManager=_g.getInstance()}static getInstance(){return ZI.instance||(ZI.instance=new ZI,window._widgetManager=ZI.instance),ZI.instance}updateWidgetCache(e,t){this.widgets[e]||(this.widgets[e]={});for(const n in t)this.widgets[e][n]=t[n]}getWidgetListInfo(){return QI(this,void 0,void 0,(function*(){return this.widgetListInfo&&this.widgetListInfo.length>0?yield Promise.resolve(this.widgetListInfo):yield fetch(Sp("widgets/")+"widgets-info.json").then(e=>QI(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>(this.widgetListInfo=e.map(e=>{e.manifest=dh(e.manifest);const t=Df(mg().getState().appContext.locale,e.manifest.translatedLocales);return{itemType:Tp.Widget,name:e.name,label:e.i18nLabel[t]||e.manifest.label||e.name,uri:e.uri,manifest:e.manifest,icon:`${Sp("widgets/")}../${e.icon}`}}),this.widgetListInfo))}))}getWidgetClass(e){var t,n,r;const o=null===(n=null===(t=mg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];if(o)return null===(r=this.widgets[o.uri])||void 0===r?void 0:r.clazz}getWidgetClassByUri(e){var t;return null===(t=this.widgets[e])||void 0===t?void 0:t.clazz}destroyWidget(e){var t,n;const r=null===(n=null===(t=mg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];r&&delete this.widgets[r.uri]}destroyAllWidgets(){this.widgets={}}checkWidgetUriInConfig(e){const t=mg().getState().appConfig.widgets||{};return!!Object.keys(t).find(n=>t[n].uri===e)}loadWidgetClass(e){var t,n;return QI(this,void 0,void 0,(function*(){const r=null===(n=null===(t=mg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];return r?yield this.loadWidgetClassByUri(r.uri):yield Promise.resolve(null)}))}loadWidgetClassByUri(e){var t,n;return QI(this,void 0,void 0,(function*(){if(!this.checkWidgetUriInConfig(e))return yield Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.clazzPromise)return yield this.widgets[e].clazzPromise;if(!(null===(n=this.widgets[e])||void 0===n?void 0:n.manifest))return console.error(e,"Should load manifest firstly."),yield Promise.reject(null);const r=this.widgets[e].manifest;return r.properties.hasMainClass?(this.widgets[e].clazzPromise=this.loadRawClass(e).then(()=>QI(this,void 0,void 0,(function*(){return yield this.injectWidgetProps(e)}))).then(e=>e?this.appWidgetClassWrapperExtension(e,r):e).then(t=>t?(this.widgets[e].clazz=t,mg().dispatch($g(e)),t):t),this.widgets[e].clazzPromise):yield Promise.resolve(null)}))}loadRawClass(e){return QI(this,void 0,void 0,(function*(){return yield this.loadWidgetDependency(e).then(()=>QI(this,void 0,void 0,(function*(){return yield vp(e+"dist/runtime/widget",[])}))).then(t=>{const n=t.default?t.default:t;return this.widgets[e].rawClazz=n,n})}))}loadWidgetTranslation(e,t){return QI(this,void 0,void 0,(function*(){let n=mg().getState().appContext.locale;return n=wf(n,t.translatedLocales),n?yield Tf(e+"dist/runtime/translations",n).catch(e=>QI(this,void 0,void 0,(function*(){return console.error("Load widget translation error",e),yield Promise.resolve({})}))):yield Promise.resolve({})}))}openWidget(e){mg().dispatch(Gg(e))}closeWidget(e){mg().dispatch(qg(e))}appWidgetClassWrapperExtension(e,t){const n=xp.getInstance().getExtensions(hp.WidgetClassWrapper)[0];return n?n.wrap(e,t):e}handleNewWidgetJson(e){return QI(this,void 0,void 0,(function*(){return e.context=lh(e.uri),yield this.loadWidgetManifest(e.uri).then(t=>QI(this,void 0,void 0,(function*(){return e._originManifest=t,yield this.processWidgetManifest(e)}))).then(t=>QI(this,void 0,void 0,(function*(){e.manifest=t,e.version=t.version;return fh(mg().getState().appStateInBuilder?mg().getState().appStateInBuilder.appConfig:mg().getState().appConfig,e),yield this.loadWidgetDefaultConfig(e.uri)}))).then(t=>(e.config=t,e))}))}isAllowLoad(e){return QI(this,void 0,void 0,(function*(){return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?yield Promise.resolve(!1):yield Promise.resolve(!0)}))}loadWidgetManifest(e){return QI(this,void 0,void 0,(function*(){return this.widgets[e]||(this.widgets[e]={}),this.widgets[e].manifestPromise||(this.widgets[e].manifestPromise=this.isAllowLoad(e).then(t=>QI(this,void 0,void 0,(function*(){if(!t)return yield Promise.reject("Not allow."+e);const n=lh(e).folderUrl+"manifest.json";return yield window.fetch(n).then(e=>QI(this,void 0,void 0,(function*(){return 404===e.status?yield Zf().then(e=>QI(this,void 0,void 0,(function*(){return e&&mg().dispatch(ev(!0)),yield Promise.reject(new Error("404, widget not found."))}))):yield e.json()})))}))).then(t=>QI(this,void 0,void 0,(function*(){if(t.error&&t.error.code)return yield Promise.reject(t.error);const n=t;return!n.widgetType&&n.properties&&n.properties.type&&(n.widgetType=n.properties.type,delete n.properties.type),!n.layouts&&n.properties&&n.properties.layouts&&(n.layouts=n.properties.layouts,delete n.properties.layouts),!n.translatedLocales&&n.supportedLocales&&(n.translatedLocales=n.supportedLocales),this.widgets[e].rawManifest=n,yield Promise.resolve(n)})))),yield this.widgets[e].manifestPromise}))}processWidgetManifest(e){return QI(this,void 0,void 0,(function*(){const t=dh(e._originManifest);return e.manifest=t,yield this.loadWidgetTranslation(e.uri,t).then(n=>(t.i18nMessages=n,e.manifest=t,this.widgets[e.uri]?this.widgets[e.uri].manifest=t:this.widgets[e.uri]={rawManifest:e._originManifest,manifest:t,manifestPromise:Promise.resolve(t)},t))}))}registerManifestProps(e,t){return QI(this,void 0,void 0,(function*(){const n=e.manifest,r=[];return n.extensions&&n.extensions.length>0&&r.push(xp.getInstance().registerWidgetExtensions(e)),n.messageActions&&n.messageActions.length>0&&r.push(JI.getInstance().registerWidgetActions(e,t)),n.dataActions&&n.dataActions.length>0&&r.push(KI.getInstance().registerWidgetActions(e)),yield Promise.all(r).then(()=>{})}))}unRegisterManifestProps(e){xp.getInstance().destryWidgetExtensions(e),JI.getInstance().destroyWidgetActions(e),KI.getInstance().destroyWidgetActions(e)}loadWidgetDefaultConfig(e){var t;return QI(this,void 0,void 0,(function*(){if(!this.widgets[e].manifest.properties.hasConfig)return yield Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.defaultConfigPromise)return yield this.widgets[e].defaultConfigPromise;const n=lh(e).folderUrl;return this.widgets[e].defaultConfigPromise=window.fetch(n+"config.json").then(e=>QI(this,void 0,void 0,(function*(){return 404===e.status?yield Zf().then(e=>QI(this,void 0,void 0,(function*(){return e&&mg().dispatch(ev(!0)),yield Promise.reject(new Error("404, widget not found."))}))):yield e.json()}))).then(e=>e),this.widgets[e].defaultConfigPromise}))}loadWidgetDependency(e){return QI(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest;if(!t.dependency)return yield Promise.resolve();const n="string"==typeof t.dependency?[t.dependency]:t.dependency;return yield Cy(n)}))}injectWidgetProps(e){return QI(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest,n=t.name,r=this.widgets[e].rawClazz,o=jI(Qt($d(r)));if(!this.checkWidgetUriInConfig(e))return yield Promise.resolve(null);const i=UI(e=>e.appI18nMessages,e=>{const n=t.i18nMessages;return Object.assign({},n,e)}),a=(t,n)=>{var o;const a=n.widgetId;if(!t.appConfig.widgets[a])return{};const s=t.widgetsRuntimeInfo[a],u=Object.assign({portalUrl:t.portalUrl,portalSelf:t.portalSelf,user:t.user,token:t.token,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages,i18nMessages:i(t)},n);t.widgetsState[a]&&(u.stateProps=t.widgetsState[a]),t.widgetsMutableStateVersion[a]&&(u.mutableStatePropsVersion=t.widgetsMutableStateVersion[a],u.mutableStateProps=WI.getInstance().getStateValue([a])),(null===(o=this.widgets[e])||void 0===o?void 0:o.widgetBuilderSupportModules)&&(u.builderSupportModules=this.widgets[e].widgetBuilderSupportModules),t.widgetsPreloadProps&&t.widgetsPreloadProps[a]&&Object.assign(u,t.widgetsPreloadProps[a]);const c=Object.assign(u,t.appConfig.widgets[a],s);return Object.assign(c,r.mapExtraStateProps?r.mapExtraStateProps(t,c):{})};class s extends E.PureComponent{upgradeWidgetConfig(){return QI(this,void 0,void 0,(function*(){const e=this.props,t=r.versionManager,n=e.manifest.version,o=e.version,i=e.config;if(n===o)return yield Promise.resolve(i);if(!t)return mg().dispatch(Vg(e.id,i)),yield Promise.resolve(i);if(!qI.valid(o)||!qI.valid(n))return yield Promise.reject("Bad widget version number, "+e.manifest.name+","+o+","+n);if(!qI.lt(o,n))return yield Promise.reject("It seems this widget is configured with a higher version. Please upgrade to the latest version to view. "+e.manifest.name+","+o+","+n);try{return yield t.upgrade(i,o,n,e.id).then(t=>(mg().dispatch(Vg(e.id,t)),t))}catch(t){return console.log("Upgrade widget ["+e.manifest.name+"] old config error,"+t.stack),i}}))}componentDidMount(){this.upgradeWidgetConfig()}componentDidUpdate(){this.upgradeWidgetConfig()}render(){const{id:e,manifest:t,version:n,i18nMessages:i}=this.props;return e?r.versionManager&&t.version!==n?null:E.createElement(bf,{locale:this.props.locale,defaultLocale:this.props.locale,messages:i},E.createElement(o,Object.assign({},this.props))):null}}return s.displayName=`WidgetWrapper(${n})`,this.loadWidgetBuilderSupportModules(e,t).then(()=>QI(this,void 0,void 0,(function*(){return this.checkWidgetUriInConfig(e)?yield Promise.resolve(se(a)(s)):yield Promise.resolve(null)})))}))}loadWidgetBuilderSupportModules(e,t){var n;return QI(this,void 0,void 0,(function*(){const r=[];if(window.jimuConfig.isInBuilder){if(null===(n=this.widgets[e])||void 0===n?void 0:n.widgetBuilderSupportModulesPromise)return yield this.widgets[e].widgetBuilderSupportModulesPromise;if(t.properties.hasEmbeddedLayout?r.push(vp("jimu-layouts/layout-builder",["LayoutEntry"]).then(e=>e.LayoutEntry)):r.push(Promise.resolve(null)),t.properties.hasBuilderSupportModule){const t=e+"dist/runtime/builder-support";r.push(vp(t,["default"]).then(e=>e.default))}else r.push(Promise.resolve(null));return this.widgets[e].widgetBuilderSupportModulesPromise=Promise.all(r).then(t=>(this.widgets[e].widgetBuilderSupportModules={jimuForBuilderLib:wp(),LayoutEntry:t[0],widgetModules:t[1]},this.widgets[e].widgetBuilderSupportModules)),this.widgets[e].widgetBuilderSupportModulesPromise}return Promise.resolve({jimuForBuilderLib:null})}))}onStoreChange(e,t){e&&t&&Object.keys(e).forEach(e=>{t[e]||(this.destroyWidget(e),this.unRegisterManifestProps(e))}),e&&t&&Object.keys(t).forEach(n=>{e[n]||this.registerManifestProps(t[n])})}}var eE=ZI,tE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class nE{constructor(){this.initialize=e=>tE(this,void 0,void 0,(function*(){const t=!(!e||!e.enable);return t?yield Promise.all([this.initializeGtag(),this.createTracker(e)]).then(()=>{this.enable=t},function(e){throw this.enable=!1,new Error(e)}.bind(this)):(this.enable=t,yield Promise.resolve())})),this.initializeGtag=()=>tE(this,void 0,void 0,(function*(){return this.gtag?yield Promise.resolve():yield vp("gtm").then(()=>{const e=window;e.dataLayer=e.dataLayer||[],this.gtag=function(){e.dataLayer.push(arguments)},this.gtag("js",new Date)})})),this.compareGoogleAnalytics=(e=be({}))=>{if(!this.enable)return;const t=this.googleAnalytics||be({});e!==t&&(e.trackId!==t.trackId&&(t.trackId&&this.disableGaTrackForGtag(t.trackId,!0),e.trackId&&this.addGaTrackIdToGtag(e.trackId,e.anonymizeip)),e.dimensions!==t.dimensions&&this.updateGgTrackerDimensions(this.track,e.dimensions),e.metrics!==t.metrics&&this.updateGgTrackerMetrics(this.track,e.metrics),e.anonymizeip!==t.anonymizeip&&this.updateGgTrackerAnonymizeip(e.trackId,e.anonymizeip),this.googleAnalytics=e)},this.disableGaTrackForGtag=(e,t=!0)=>{e&&(window["ga-disable-"+e]=t)},this.addGaTrackIdToGtag=(e,t=!0)=>{this.gtag&&(this.disableGaTrackForGtag(e,!1),this.gtag("config",e,{anonymize_ip:t}))},this.updateGgTrackerDimensions=(e,t)=>{const n=this.getGgTracker(e);n&&(n.dimensions=t)},this.updateGgTrackerMetrics=(e,t)=>{const n=this.getGgTracker(e);n&&(n.metrics=t)},this.updateGgTrackerAnonymizeip=(e,t=!0)=>{this.gtag&&this.gtag("config",e,{anonymize_ip:t})},this.getGgTracker=e=>e&&e.trackers&&e.trackers.find(e=>"google"===e.name),this.mutablePortalUser=()=>{const e=mg().getState().portalSelf.asMutable();return e.user=e.user.asMutable(),e},this.isTrackAvailable=()=>(this.enable,!!this.enable),vg(this.onStoreChange.bind(this),["appConfig","analytics"])}static getInstance(){return nE.instance||(nE.instance=new nE),nE.instance}onStoreChange(e=be({}),t=be({})){t.enable!==e.enable?this.initialize(t).then(()=>this.compareGoogleAnalytics(t&&t.google)):this.compareGoogleAnalytics(t&&t.google)}createTracker(e){return tE(this,void 0,void 0,(function*(){if(this.track)return yield Promise.resolve(this.track);const t={google:e&&e.google,portal:this.mutablePortalUser()};return yield vp("jimu-core/telemetry").then(e=>(this.track=new e(t),this.track))}))}logPageView(e){if(this.isTrackAvailable())return this.track.logPageView(e)}logEvent(e){if(this.isTrackAvailable())return this.track.logEvent(e)}logError(e){if(this.isTrackAvailable())return this.track.logError(e)}}var rE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class oE{upgrade(e,t,n,r){return rE(this,void 0,void 0,(function*(){if(!qI.valid(t)||!qI.valid(n))return yield Promise.resolve();if(!this.checkVersion())return yield Promise.resolve();const o=this.getVersionIndex(t),i=this.getVersionIndex(n);if(o>i)return yield Promise.reject("New version should higher than old version.");if(o===i)return this.versions[i]?yield Promise.resolve(this.versions[i].upgrader(e,r)):yield Promise.resolve(e);const a=e;return this.versions.slice(o+1,i+1).filter(e=>null==e?void 0:e.upgrader).reduce((e,t)=>rE(this,void 0,void 0,(function*(){return yield e.then(e=>rE(this,void 0,void 0,(function*(){return yield Promise.resolve(t.upgrader(e,r))})))})),Promise.resolve(a))}))}getVersionIndex(e){const t=this.versions.findIndex(t=>qI.eq(e,t.version));if(t>-1)return t;for(let t=0;t<this.versions.length-1;t++)if(qI.gt(e,this.versions[t].version)&&qI.lt(e,this.versions[t+1].version))return t;return qI.lt(e,this.versions[0].version)?-1:qI.gt(e,this.versions[this.versions.length-1].version)?this.versions.length:void 0}checkVersion(){for(let e=0;e<this.versions.length-1;e++){if(!qI.valid(this.versions[e].version))return console.error("Invalid version.",this.versions[e].version),!1;if(qI.gt(this.versions[e].version,this.versions[e+1].version))return console.error("Version order error.",this.versions[e].version,this.versions[e+1]),!1}return!0}}class iE extends oE{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"First release.",upgrader:e=>{let t=e;var n;return delete t.widgetsManifest,(n=t).widgets&&Object.keys(n.widgets).forEach(e=>{var t;const r=n.widgets[e];"widgets/common/controller/"===r.uri&&(null===(t=r.layouts)||void 0===t?void 0:t.openwidget)&&(r.layouts._openwidget=r.layouts.openwidget,delete r.layouts.openwidget)}),t=n,t=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach(t=>{var n,r;Object.keys(null!==(r=null===(n=e.layouts[t])||void 0===n?void 0:n.content)&&void 0!==r?r:{}).forEach(n=>{var r,o,i,a;const s=e.layouts[t].content[n];if(null===(r=null==s?void 0:s.setting)||void 0===r?void 0:r.fitContainer){s.setting.heightMode="fit";const e=null!==(o=s.setting.autoProps)&&void 0!==o?o:{};e.height="STRETCH",s.setting.autoProps=e,delete s.setting.fitContainer}if(null===(i=null==s?void 0:s.setting)||void 0===i?void 0:i.autoHeight){const e=null!==(a=s.setting.autoProps)&&void 0!==a?a:{},t=s.bbox;null!=t.top&&null!=t.bottom?e.height="STRETCH":e.height="AUTO",s.setting.autoProps=e,delete s.setting.autoHeight}})}),e})(t),t}},{version:"1.1.0",description:"1.1.0",upgrader:e=>rE(this,void 0,void 0,(function*(){const t=e=>{var t;return Object.keys(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach(t=>{var n;const r=null===(n=e.messageConfigs[t])||void 0===n?void 0:n.actions,o=e.widgets||{};r&&r.forEach(e=>{var t,n,r,i,a,s;if("widgets/common/list/"===(null===(t=o[null==e?void 0:e.widgetId])||void 0===t?void 0:t.uri)){if(e.config=e.config||{},e.config.actionUseDataSource&&e.config.actionUseDataSource.dataSourceId){const t=null===(n=e.config.actionUseDataSource)||void 0===n?void 0:n.fields;e.config.actionUseDataSource=null===(r=o[e.widgetId])||void 0===r?void 0:r.useDataSources[0],e.config.actionUseDataSource.fields=t}if(e.config.messageUseDataSource&&e.config.messageUseDataSource.dataSourceId)if("widgets/common/list/"===(null===(i=o[null==e?void 0:e.messageWidgetId])||void 0===i?void 0:i.uri)){const t=null===(a=e.config.messageUseDataSource)||void 0===a?void 0:a.fields;e.config.messageUseDataSource=null===(s=o[e.messageWidgetId])||void 0===s?void 0:s.useDataSources[0],e.config.messageUseDataSource.fields=t}else e.config.messageUseDataSource.mainDataSourceId=e.config.messageUseDataSource.dataSourceId;e.actionId=e.actionId.replace(e.widgetId+"-filter","filter-data-record-action"),e.actionName=e.actionName.replace("filter","filter data record action"),e.version="1.1.0",delete e.widgetId}})}),e},n=(e,t,n,r)=>{var o;return Object.keys(null!==(o=e.widgets)&&void 0!==o?o:{}).forEach(o=>{const i=(e,t,n)=>{const o=(null==t?void 0:t.parts)&&(null==t?void 0:t.parts[e]);if(!o)return null;if(o.type===Ew.Field){const i=e>0?t.parts[e-1]:null,a=e>1?t.parts[e-2]:null,s=t.parts[e+1];if((null==a?void 0:a.type)===Ew.Function&&"("===(null==i?void 0:i.exp)&&")"===(null==s?void 0:s.exp))return o;if(n&&o.dataSourceId===n)o.isFromRepeatedDataSourceContext=!0;else if(o.dataSourceId&&!o.isFromRepeatedDataSourceContext){const e=0===o.dataSourceId.split("-").reverse()[0].indexOf(r)?o.dataSourceId.split("-").reverse().slice(1).reverse().join("-"):o.dataSourceId;o.dataSourceId=`${e}-${Sc}`}}return o},a=(e,t)=>{var r,o,a,s;if("widgets/common/image/"===e.uri||"widgets/common/button/"===e.uri){let n=[];n="widgets/common/image/"===e.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],n.forEach(n=>{var r,o,a;const s=n.split("."),u=1===s.length?(null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.functionConfig)&&e.config.functionConfig[s[0]]:(null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.functionConfig)&&e.config.functionConfig[s[0]]&&e.config.functionConfig[s[0]][s[1]];null===(a=null==u?void 0:u.parts)||void 0===a||a.forEach((e,n)=>{i(n,u,t)})})}else"widgets/common/embed/"===e.uri?null===(a=null===(o=null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.expression)||void 0===o?void 0:o.parts)||void 0===a||a.forEach((n,r)=>{i(r,e.config.expression,t)}):"widgets/common/text/"===e.uri&&(null===(s=e.config)||void 0===s?void 0:s.text)&&(e.config.text=n.editExpressionPart(e.config.text,(e,n)=>i(e,n,t)));return e};let s=e.widgets[o];if("widgets/common/list/"===s.uri){t.getChildrenContents(e,o,Tp.Widget,!0).forEach(t=>{const n=(null==s?void 0:s.useDataSources)&&s.useDataSources[0]&&s.useDataSources[0].dataSourceId;e.widgets[t]=a(e.widgets[t],n)})}else s=a(s)}),e};return Promise.all([vp("jimu-layouts/layout-runtime",["searchUtils"]),vp("jimu-ui",["richTextUtils"])]).then(r=>{const[o,i]=r;let a=e;var s,u;return s=a,Object.keys(null!==(u=s.dataSources)&&void 0!==u?u:{}).forEach(e=>{var t;const n=s.dataSources[e];"FEATURE_QUERY"===n.type?n.type=Aa.c.FeatureLayer:n.isOutputFromWidget&&(null===(t=null==n?void 0:n.originDataSources)||void 0===t||t.forEach(e=>{e.mainDataSourceId=e.dataSourceId}))}),a=s,a=((e,r,o)=>{var i;const a=xf().formatMessage({id:"upgradedFrom"});return Object.keys(null!==(i=e.widgets)&&void 0!==i?i:{}).forEach(t=>{var n;const o=e.widgets[t];(null!==(n=o.useDataSources)&&void 0!==n?n:[]).forEach((n,i)=>{var s,u,c,l,d,f;if(n.query||"widgets/arcgis/feature-info/"===o.uri&&(null===(s=o.config)||void 0===s?void 0:s.limitGraphics)||"widgets/common/list/"===o.uri){const s=`_from_10_${t}_${i}`,p=e.dataSources||{},h={id:s,label:a,where:null===(u=n.query)||void 0===u?void 0:u.where,orderBy:null===(l=null===(c=n.query)||void 0===c?void 0:c.orderBy)||void 0===l?void 0:l.filter(e=>!!(null==e?void 0:e.jimuFieldName)),maximum:"widgets/arcgis/feature-info/"===o.uri?null===(d=o.config)||void 0===d?void 0:d.maxGraphics:"widgets/common/list/"===o.uri&&(null===(f=o.config)||void 0===f?void 0:f.maxItems)},g=n.dataSourceId,m=n.rootDataSourceId,v=`${g}-${s}`;n.dataSourceId=v,n.mainDataSourceId=g,n.dataViewId=s;if(r.getChildrenContents(e,t,Tp.Widget,!0).forEach(t=>{var n;const r=e.widgets[t];if((null!==(n=r.useDataSources)&&void 0!==n?n:[]).forEach((e,t)=>{e.dataSourceId===g&&(e.dataSourceId=v,e.mainDataSourceId=g,e.dataViewId=s)}),"widgets/common/image/"===r.uri||"widgets/common/button/"===r.uri){let e=[];e="widgets/common/image/"===r.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],e.forEach(e=>{var t,n,o;const i=e.split("."),a=1===i.length?(null===(t=null==r?void 0:r.config)||void 0===t?void 0:t.functionConfig)&&r.config.functionConfig[i[0]]:(null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.functionConfig)&&r.config.functionConfig[i[0]]&&r.config.functionConfig[i[0]][i[1]];null===(o=null==a?void 0:a.parts)||void 0===o||o.forEach(e=>{e.dataSourceId===g&&(e.dataSourceId=v)})})}else"widgets/common/text/"===r.uri&&(r.config.text=r.config.text.replace(new RegExp(g,"g"),v))}),p[g])p[g].dataViews?p[g].dataViews[s]=h:p[g].dataViews={[s]:h};else if(p[m]){const e=g.substr(m.length+1);p[m].childDataSourceJsons?p[m].childDataSourceJsons[e]?p[m].childDataSourceJsons[e].dataViews?p[m].childDataSourceJsons[e].dataViews[s]=h:p[m].childDataSourceJsons[e].dataViews={[s]:h}:p[m].childDataSourceJsons[e]={id:g,dataViews:{[s]:h}}:p[m].childDataSourceJsons={[e]:{id:g,dataViews:{[s]:h}}}}else console.error("bad config ds.",n);Object.keys(p).forEach(e=>{p[e].originDataSources&&p[e].originDataSources.forEach(e=>{e.dataSourceId===g&&(e.dataSourceId=v,e.mainDataSourceId=g,e.dataViewId=s)})}),delete n.query}else n.mainDataSourceId||(n.mainDataSourceId=n.dataSourceId)})}),t(n(e,r,o,"_from_10_"))})(a,o.searchUtils,i.richTextUtils),a=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach(t=>{var n;const r=e.layouts[t],o=null==r?void 0:r.type;Object.keys(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:{}).forEach(e=>{var t,n,i,a,s,u;const c=r.content[e],l=null!==(n=null===(t=c.setting)||void 0===t?void 0:t.autoProps)&&void 0!==n?n:{};!0===l.width?(o===Cp.FixedLayout?l.left||l.right?l.width="AUTO":l.width="STRETCH":l.width="AUTO",c.setting.autoProps=l):!1===l.width&&(l.width="CUSTOM",c.setting.autoProps=l),!0===(null===(i=c.setting)||void 0===i?void 0:i.fitContainer)?l.height="STRETCH":!1===(null===(a=c.setting)||void 0===a?void 0:a.fitContainer)&&(null===(s=c.bbox)||void 0===s?void 0:s.height)?l.height="CUSTOM":!0===l.height?(o===Cp.FixedLayout?l.top||l.bottom?l.height="AUTO":l.height="STRETCH":l.height="AUTO",c.setting.autoProps=l):!1===l.height&&(l.height="CUSTOM",c.setting.autoProps=l),(null===(u=c.setting)||void 0===u?void 0:u.heightMode)&&null==l.height&&("auto"===c.setting.heightMode?(l.height="AUTO",c.setting.autoProps=l):"fit"===c.setting.heightMode?(l.height="STRETCH",c.setting.autoProps=l):"fixed"===c.setting.heightMode&&(l.height="CUSTOM",c.setting.autoProps=l))})}),e})(a),a})}))},{version:"1.2.0",description:"1.2.0",upgrader:e=>{let t=e;var n;return n=t,Object.keys(n.pages).forEach(e=>{n.pages[e].icon&&(n.pages[e].icon.properties.color=null)}),t=n,t=(e=>{if(!e.dialogs)return e;let t=0,n=0;Object.keys(e.dialogs).forEach(r=>{const o=e.dialogs[r];o.mode===nh.Fixed?o.index=t++:o.index=n++,o.dialogBackground?""===o.dialogBackground.color&&(o.dialogBackground.color="rgba(0,0,0,0)"):o.dialogBackground={color:"rgba(0,0,0,0)",fillType:"fit",image:{url:""}},o.mode===nh.Fixed&&o.confirmBeforeClose?(o.interactionType=oh.ButtonInline,o.interactionStyles=o.confirmationStyle,o.alwaysShowConfirmation=!1):(o.interactionType=null,o.interactionStyles=null),delete o.confirmationStyle});const r={};return Object.keys(e.dialogs).sort().map(t=>{r[t]=e.dialogs[t]}),e.dialogs=r,e})(t),t=(e=>(Object.keys(e.layouts).forEach(t=>{const n=e.layouts[t];(null==n?void 0:n.type)===Cp.FixedLayout&&Object.keys(n.content||{}).forEach(e=>{var t,r;const o=n.content[e];!0===(null===(t=o.setting)||void 0===t?void 0:t.hCenter)&&(o.bbox||(o.bbox={}),o.bbox.left="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.left=!1,o.setting.autoProps.right=!0):o.setting.autoProps={left:!1,right:!0}:o.setting={autoProps:{left:!1,right:!0}}),!0===(null===(r=o.setting)||void 0===r?void 0:r.vCenter)&&(o.bbox||(o.bbox={}),o.bbox.top="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.top=!1,o.setting.autoProps.bottom=!0):o.setting.autoProps={top:!1,bottom:!0}:o.setting={autoProps:{top:!1,bottom:!0}})})}),e))(t),t=(e=>(Object.keys(e.layouts).forEach(t=>{const n=e.layouts[t];(null==n?void 0:n.type)===Cp.FlowLayout&&Object.keys(n.content||{}).forEach(e=>{var t,r,o;const i=n.content[e];!0===(null===(t=i.setting)||void 0===t?void 0:t.isFloating)&&(+(null===(r=i.bbox)||void 0===r?void 0:r.width)>0&&(i.bbox.width=i.bbox.width+"px"),+(null===(o=i.bbox)||void 0===o?void 0:o.height)>0&&(i.bbox.height=i.bbox.height+"px"))})}),e))(t),t=(e=>(Object.keys(e.layouts).forEach(t=>{const n=e.layouts[t];Object.keys(n.content||{}).forEach(t=>{var r,o,i,a,s;const u=n.content[t];if(u.type===Tp.Widget){const t=e.widgets[u.widgetId];0===(null===(r=null==t?void 0:t.uri)||void 0===r?void 0:r.indexOf("widgets/common/card"))&&("AUTO"===(null===(i=null===(o=u.setting)||void 0===o?void 0:o.autoProps)||void 0===i?void 0:i.width)&&(u.setting.autoProps.width="CUSTOM",u.bbox||(u.bbox={}),u.bbox.width=t.config.widgetWidth+"px"),"AUTO"===(null===(s=null===(a=u.setting)||void 0===a?void 0:a.autoProps)||void 0===s?void 0:s.height)&&(u.setting.autoProps.height="CUSTOM",u.bbox||(u.bbox={}),u.bbox.height=t.config.widgetHeight+"px"))}})}),e))(t),t=(e=>(Object.keys(e.layouts).forEach(t=>{const n=e.layouts[t];Object.keys(n.content||{}).forEach(t=>{var r,o;const i=n.content[t];if(i.type===Tp.Widget){const t=e.widgets[i.widgetId];if(0===(null===(r=null==t?void 0:t.uri)||void 0===r?void 0:r.indexOf("widgets/layout/column"))){const n=null===(o=t.layouts)||void 0===o?void 0:o.DEFAULT;n&&Object.keys(n).forEach(r=>{var o,i,a,s,u,c,l,d;const f=n[r],p=e.layouts[f];p.setting||(p.setting={}),p.setting.space=(null===(i=null===(o=t.config)||void 0===o?void 0:o.space)||void 0===i?void 0:i.distance)||(null===(a=t.config)||void 0===a?void 0:a.space),p.setting.padding=null===(u=null===(s=t.config)||void 0===s?void 0:s.style)||void 0===u?void 0:u.padding,p.setting.justifyContent=null===(l=null===(c=t.config)||void 0===c?void 0:c.style)||void 0===l?void 0:l.justifyContent,p.setting.overflowY=null===(d=t.config)||void 0===d?void 0:d.style.overflowY})}}})}),e))(t),t}},{version:"1.3.0",description:"1.3.0",upgrader:e=>e},{version:"1.4.0",description:"1.4.0",upgrader:e=>{let t=e;var n;return(n=t).widgets&&Object.keys(n.widgets).forEach(e=>{const t=n.widgets[e];if("widgets/common/filter/"===t.uri&&t.useDataSources){const r={};t.useDataSources.forEach(e=>{if(e.dataSourceId in r){const t=r[e.dataSourceId].fields||[],n=e.fields||[];r[e.dataSourceId].fields=Array.from(new Set(t.concat(n))).sort()}else r[e.dataSourceId]=e}),n.widgets[e].useDataSources=Object.keys(r).map(e=>r[e])}}),t=n,t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach(t=>{const n=e.dialogs[t],r={width:n.width,height:n.height,aspectRatio:!!n.aspectRatio};delete n.width,delete n.height,delete n.aspectRatio,n.mode===nh.Fixed&&(r.position=n.position,delete n.position),n.sizeMode={},n.sizeMode[la.Large]=r}),e):e)(t),t=(e=>{var t;const n=["widgets/arcgis/feature-info/","widgets/arcgis/query/","widgets/common/chart/","widgets/common/list/","widgets/common/table/"];return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach(t=>{const r=e.widgets[t];n.includes(r.uri)&&(r.enableDataAction=!1)}),e})(t),t}},{version:"1.5.0",description:"1.5.0",upgrader:e=>{let t=e;var n,r;return n=t,Object.keys(null!==(r=n.widgets)&&void 0!==r?r:{}).forEach(e=>{var t,r;const o=n.widgets[e];if(0===(null===(t=null==o?void 0:o.uri)||void 0===t?void 0:t.indexOf("widgets/layout/row"))){const e=null===(r=o.layouts)||void 0===r?void 0:r.DEFAULT;e&&Object.keys(e).forEach(t=>{var r,i,a,s,u,c;const l=e[t],d=n.layouts[l];d&&(d.setting||(d.setting={}),d.setting.style||(d.setting.style={}),d.setting.space=null!==(a=null===(i=null===(r=o.config)||void 0===r?void 0:r.space)||void 0===i?void 0:i.distance)&&void 0!==a?a:null===(s=o.config)||void 0===s?void 0:s.space,d.setting.style.padding=null===(c=null===(u=o.config)||void 0===u?void 0:u.style)||void 0===c?void 0:c.padding,o.config={})})}}),t=n,t=(e=>{var t,n;const r=t=>{Object.keys(null!=t?t:{}).forEach(n=>{var r;const o=t[n],i=e.layouts[o];if(i){const e=null!==(r=i.setting)&&void 0!==r?r:{};e.lockDescendants=!0,i.setting=e}})};return r(null===(t=e.header)||void 0===t?void 0:t.layout),r(null===(n=e.footer)||void 0===n?void 0:n.layout),e})(t),t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach(t=>{var n,r;const o=e.widgets[t];if(0===(null===(n=null==o?void 0:o.uri)||void 0===n?void 0:n.indexOf("widgets/layout/column"))){const t=null===(r=o.layouts)||void 0===r?void 0:r.DEFAULT;t&&Object.keys(t).forEach(n=>{const r=t[n],o=e.layouts[r];o&&!o.type&&(o.type=Cp.ColumnLayout)})}}),e})(t),t}}]}}var aE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const sE=n(86);window.jimuConfig.exbVersion=sE.exbVersion;class uE{constructor(e){this.intl=e.intl,vg(this.onStoreChange.bind(this),["appInfo"])}static getInstance(e){return uE.instance||(uE.instance=new uE(e)),uE.instance}loadAppConfig(){return aE(this,void 0,void 0,(function*(){return yield this.loadAndProcessAppConfig().then(e=>aE(this,void 0,void 0,(function*(){this.updateAppInfoForDeployedApp(e.attributes);const t=be(e);return yield this.initTrackingManager(t)})))}))}initTrackingManager(e){return aE(this,void 0,void 0,(function*(){const t=e.analytics;return t?yield nE.getInstance().initialize(t).then(()=>e,t=>(console.error(t.message||t),e)):yield Promise.resolve(e)}))}loadAndProcessAppConfig(){return aE(this,void 0,void 0,(function*(){return mg().getState().appConfig?yield Promise.resolve(mg().getState().appConfig.asMutable({deep:!0})):yield this.loadRawAppConfig().then(e=>e.__not_publish?Promise.reject(new Error(this.intl.formatMessage({id:"notPublishError",defaultMessage:sy.notPublishError}))):this.upgradeAppConfig(e)).then(e=>aE(this,void 0,void 0,(function*(){return yield this.processRawConfig(e)}))).then(e=>this.initPortalAndWebTier(e)).then(e=>aE(this,void 0,void 0,(function*(){return this.initPortalInfo(e),window.jimuConfig.isInBuilder||hv(mg().getState().portalUrl),yield this.handlePortalResourceInConfig(e)})))}))}initPortalAndWebTier(e){var t;if(window.jimuConfig.isInBuilder)return Promise.resolve(e);const n=mg().getState();if(window.jimuConfig.isDevEdition||window.jimuConfig.isInPortal)return this.checkWebTierAndInitSession(n.portalUrl,n.clientId).then(t=>{const n=lv.getInstance().getMainPortal();return n?(n.isWebTier=t,lv.getInstance().setMainPortal(n)):console.error("Main portal should be initialized in init."),e});if(window.jimuConfig.isOutOfExb){if(!(null===(t=e.attributes)||void 0===t?void 0:t.portalUrl))return console.error("portalUrl is required."),Promise.reject(e);const n=zp(e.attributes.portalUrl);return this.checkWebTierAndInitSession(n,e.attributes.clientId).then(t=>{const r={portalUrl:n,isWebTier:t,clientId:e.attributes.clientId};return lv.getInstance().setMainPortal(r),mg().dispatch(Im(e.attributes.portalUrl,e.attributes.clientId)),e})}return Promise.resolve(e)}initPortalInfo(e){window.jimuConfig.isInBuilder||lv.getInstance().getMainSession()||e.attributes.portalUrl&&mg().dispatch(Im(e.attributes.portalUrl,e.attributes.clientId))}upgradeAppConfig(e){return qI.valid(e.exbVersion)&&qI.valid(sE.exbVersion)?qI.lt(e.exbVersion,sE.exbVersion)?(new iE).upgrade(e,e.exbVersion,sE.exbVersion,"app").then(e=>(e.exbVersion=sE.exbVersion,e)):e.exbVersion===sE.exbVersion?Promise.resolve(e):Promise.reject(new Error(this.intl.formatMessage({id:"versionIsHigh",defaultMessage:sy.versionIsHigh}))):Promise.reject(new Error(this.intl.formatMessage({id:"badVersion",defaultMessage:sy.badVersion})))}checkWebTierAndInitSession(e,t){return aE(this,void 0,void 0,(function*(){const n=lv.getInstance();return n.getSessionFromWebTierPortal(e).then(r=>{let o=!1;return r?(o=!0,n.initSession({portalUrl:e,clientId:t,isWebTier:o}),n.getMainSession()?o:(n.writeAuthInfo(r),n.initSession({portalUrl:e,clientId:t,isWebTier:o}).then(()=>o))):(o=!1,n.initSession({portalUrl:e,clientId:t,isWebTier:o}).then(()=>o))})}))}processRawConfig(e){return aE(this,void 0,void 0,(function*(){return this.processAppConfigAfterLoad(e),yield this.loadAllWidgetsManifest(e).then(e=>aE(this,void 0,void 0,(function*(){return yield this.applyAppConfigProcessorExtension(e)}))).then(e=>(this.addDefaultLabelAndIcon(e),e))}))}onStoreChange(e,t){(null==t?void 0:t.name)&&(document.title=t.name)}updateAppInfoForDeployedApp(e){const t={name:e.title,description:e.description};mg().dispatch(Ug(t))}loadRawAppConfig(){return aE(this,void 0,void 0,(function*(){const e=xp.getInstance().getExtensions(hp.AppConfigService)[0];return e?yield e.loadAppConfig():yield this.loadAppConfigWithDefault()}))}loadAppConfigWithDefault(){return aE(this,void 0,void 0,(function*(){const e=mg().getState();if(!e.appContext.isBuilder){const e=Rh().appId;if(e)return window.jimuConfig.isDevEdition?yield this.loadAppConfigFromLocalServer(e):yield this.loadAppConfigFromPortal(e)}let t=e.queryObject.config;t||(t="config.json");const n=t.split(":");if(2===n.length&&"item"===n[0])return yield this.loadAppConfigFromPortal(n[1]);if(Ah(t)&&!/^https:\/\/(.)+\.arcgis\.com/.test(t.trim())){const e="Only *.arcgis.com is allowed.";return console.error(e),yield Promise.reject({message:e})}return yield window.fetch(t).then(e=>aE(this,void 0,void 0,(function*(){return yield e.json()})))}))}loadAppConfigFromLocalServer(e){return aE(this,void 0,void 0,(function*(){const t=mg().getState().queryObject.draft;return"true"===t||"1"===t?yield window.fetch(`/apps/${e}/resources/config/config.json`).then(e=>aE(this,void 0,void 0,(function*(){return yield e.json()}))):yield window.fetch(`/apps/${e}/config.json`).then(e=>aE(this,void 0,void 0,(function*(){return yield e.json()})))}))}loadAppConfigFromPortal(e){return aE(this,void 0,void 0,(function*(){const t=lv.getInstance();var n=(new Date).getTime();const r=mg().getState().queryObject.draft;return"true"===r||"1"===r?yield Object(ov.d)(`${Rp(mg().getState().portalUrl)}/content/items/${e}/resources/config/config.json`,{authentication:t.getSessionByUrl(mg().getState().portalUrl),httpMethod:"GET",params:{timestamp:n}}).catch(t=>aE(this,void 0,void 0,(function*(){return yield this._handleAuthError(t,e)}))):yield Object(dv.c)(e,{portal:Rp(mg().getState().portalUrl),authentication:t.getSessionByUrl(mg().getState().portalUrl)}).catch(t=>aE(this,void 0,void 0,(function*(){return yield this._handleAuthError(t,e)})))}))}_handleAuthError(e,t){return aE(this,void 0,void 0,(function*(){const n=!!!(window===window.top||window.jimuConfig.isInBuilder);return lv.getInstance().handleAuthError(e,n).then(()=>n?(yv(t),gv(),dy(iy.Experience).then(e=>{e.valid||mg().dispatch(nv(e.invalidMessage))}).catch(e=>{console.error(e),mg().dispatch(nv(e.message))}),hv(mg().getState().portalUrl),vv(t).then(e=>(mg().dispatch(Ug(e)),e)),this.loadAppConfigFromPortal(t)):Promise.reject({}))}))}applyAppConfigProcessorExtension(e){return aE(this,void 0,void 0,(function*(){const t=xp.getInstance().getExtensions(hp.AppConfigProcessor)[0];return t?yield t.process(e):yield Promise.resolve(e)}))}loadAllWidgetsManifest(e){return aE(this,void 0,void 0,(function*(){const t=[],n=eE.getInstance();return mh(e).forEach((r,o)=>{const i=r,a=i.uri;if(a)return e.useCachedManifest&&e.widgetsManifest[a]?(i._originManifest=e.widgetsManifest[a],void t.push(n.processWidgetManifest(i).then(()=>aE(this,void 0,void 0,(function*(){return yield n.registerManifestProps(r)}))))):void t.push(n.loadWidgetManifest(i.uri).then(e=>aE(this,void 0,void 0,(function*(){return i._originManifest=e,yield n.processWidgetManifest(i).then(()=>aE(this,void 0,void 0,(function*(){return yield n.registerManifestProps(i)})))})),e=>aE(this,void 0,void 0,(function*(){return console.error(e),yield Promise.resolve()}))))}),yield Promise.all(t).then(t=>e)}))}processAppConfigAfterLoad(e){this.handleEmbedMode(e),this.addDefaultValues(e),this.fixAllIds(e),this.fixWidgetUri(e),this.fixThemeUri(e),this.addWidgetContext(e),this.addDefaultPageStructure(e)}handlePortalResourceInConfig(e){return aE(this,void 0,void 0,(function*(){if(window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder)return yield Promise.resolve(e);const t=lv.getInstance().getMainSession();if(t&&t.token){const n=t.token;return yield sh(e,n)}return yield sh(e,null)}))}handleEmbedMode(e){const t=mg().getState().queryObject.embedded;"true"!==t&&"1"!==t||Object.keys(e.pages).forEach(t=>{e.pages[t].header=!1,e.pages[t].footer=!1})}addDefaultPageStructure(e){e.pageStructure||(e.pageStructure=[],Object.keys(e.pages).forEach(t=>{e.pageStructure.push({[t]:[]})}))}fixAllIds(e){this.fixId(e.pages),this.fixId(e.widgets),this.fixId(e.sections),this.fixId(e.views),this.fixId(e.dialogs),this.fixId(e.messageConfigs),this.fixId(e.dataSources),bh(e)}fixId(e){e&&Object.keys(e).forEach(t=>{"string"!=typeof e[t]&&(e[t].id=t)})}fixWidgetUri(e){mh(e).forEach(e=>{/\/$/.test(e.uri)||(e.uri=e.uri+"/")})}fixThemeUri(e){/\/$/.test(e.theme)||(e.theme=e.theme+"/")}addWidgetContext(e){mh(e).forEach(e=>{const t=lh(e.uri);e.context=t})}addDefaultValues(e){return e.attributes||(e.attributes={}),e.widgets||(e.widgets={}),e.widgetsManifest||(e.widgetsManifest={}),e.views||(e.views={}),e.sections||(e.sections={}),e.dialogs||(e.dialogs={}),e.pages||(e.pages={}),e.layouts||(e.layouts={}),e.dataSources||(e.dataSources={}),e.messageConfigs||(e.messageConfigs={}),this.addDefaultPageVisible(e),e}addDefaultPageVisible(e){Object.keys(e.pages).forEach(t=>{void 0===e.pages[t].isVisible&&(e.pages[t].isVisible=!0)})}addDefaultLabelAndIcon(e){Object.keys(e.pages).forEach(t=>{e.pages[t].label||(e.pages[t].label=gh(e,"page",this.intl.formatMessage({id:"page",defaultMessage:sy.page})))}),Object.keys(e.dialogs||{}).forEach(t=>{e.dialogs[t].label||(e.dialogs[t].label=gh(e,"dialog",this.intl.formatMessage({id:"dialog",defaultMessage:sy.dialog})))}),e.layouts&&Object.keys(e.layouts).filter(t=>e.layouts[t].type===Cp.FlowLayout).forEach(t=>{const n=e.layouts[t];Object.keys(n.content||{}).filter(e=>n.content[e].type===Tp.Widget).map(e=>n.content[e].widgetId).forEach(t=>{const n=e.widgets[t];if(n&&!n.label&&"widgets/layout/row/"===n.uri){const t=this.intl.formatMessage({id:"block",defaultMessage:sy.block});n.label=gh(e,"widget",t)}})}),mh(e).forEach(t=>{fh(e,t)}),Object.keys(e.sections||{}).forEach(t=>{const n=e.sections[t];n.label||(n.label=gh(e,"section",this.intl.formatMessage({id:"section",defaultMessage:sy.section})))}),Object.keys(e.views||{}).forEach(t=>{const n=e.views[t];n.label||(n.label=gh(e,"view",this.intl.formatMessage({id:"view",defaultMessage:sy.view})))}),ph(e)}}var cE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class lE{constructor(e){e.id&&(this.id=e.id),e.name&&(this.name=e.name),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.index&&(this.index=e.index),e.widgetId&&(this.widgetId=e.widgetId)}destroy(){}confirm(e,t){return cE(this,void 0,void 0,(function*(){return{needed:!1}}))}}class dE extends lE{isSupported(e,t){return cE(this,void 0,void 0,(function*(){return!0}))}onExecute(e,t){return cE(this,void 0,void 0,(function*(){return yield Promise.resolve(!0)}))}}var fE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class pE extends lE{isSupported(e,t){return fE(this,void 0,void 0,(function*(){if(null==e||"function"!=typeof e.query)return!1;const t=e;return yield t.allowToExportData()}))}confirm(e,t){return fE(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance)return{needed:!1};const t=e;if("function"==typeof t.queryCount){const e=(yield t.queryCount({})).count;if(e>2e3){const t=xf();let n,r;return e>5e3?(n=t.formatMessage({id:"tooLargeWarningTitle"},{max:"5000"}),r=t.formatMessage({id:"tooLargeWarningContent"},{max:"5000"})):(n=t.formatMessage({id:"largeWarningTitle"}),r=t.formatMessage({id:"largeWarningContent"})),{needed:!0,content:{title:n,content:r,okLabel:t.formatMessage({id:"export"}),cancelLabel:t.formatMessage({id:"cancel"})}}}}return{needed:!1}}))}getRecords(e){return fE(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance)return e.getSourceRecords();const t=e;if("function"==typeof t.queryCount){const e=1e3,n=(yield t.queryCount({})).count;return yield this.query(t,e,Math.min(5e3,n))}return[]}))}query(e,t,n){return fE(this,void 0,void 0,(function*(){const r=t>0?t:n,o=Math.ceil(n/r);let i=[];for(let t=1;t<=o;t++){const a=t===o?n-(o-1)*r:r,s=yield e.query({page:t,pageSize:a});i=i.concat(s.records)}return i}))}}var hE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class gE extends pE{onExecute(e,t){return hE(this,void 0,void 0,(function*(){const t=(yield this.getRecords(e)).map(e=>e.toJson()),n=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return Object(Qo.saveAs)(n,"DataRecords.json"),Promise.resolve(!0)}))}}function mE(){var e;return","===Pf(null!==(e=mg().getState().appContext.locale)&&void 0!==e?e:"en")?";":","}function vE(e,t,n){return t.find((t,r)=>{var o;return(null!==(o=null==n?void 0:n[r])&&void 0!==o?o:t)===e})?vE("_"+e,t,n):e}function yE(e,t){let n,r;const o=e.getSchema();if(null!=(null==o?void 0:o.fields))n=Object.keys(o.fields),r=n.map(e=>o.fields[e].alias);else{const e=t[0];n=Object.keys(e.getData())}const i=function(e){return"esriGeometryPoint"===e.getGeometryType()}(e);let a=function(e,t,n){const r=mE();let o="",i=!1,a=!1;if(e.forEach((n,s)=>{var u;let c=null!==(u=null==t?void 0:t[s])&&void 0!==u?u:n;c.includes(r)&&(c=`"${c}"`),i=i||"x"===c,a=a||"y"===c,s!==e.length-1?o+=`${c}${r}`:o+=c}),n){const n=vE("x",e,t),r=vE("y",e,t);o+=`,${n},${r}`}return o+"\r\n"}(n,r,i);return t.forEach(e=>{a+=function(e,t,n){const r=xf(),o=mE();let i="";if(t.forEach((n,a)=>{var s;let u=null!==(s=e.getFormattedFieldValue(n,r))&&void 0!==s?s:"";u.includes(o)&&(u=`"${u}"`),a!==t.length-1?i+=`${u}${o}`:i+=u}),n){const t=e.getGeometry();t&&(i+=`,${t.x},${t.y}`)}return i+"\r\n"}(e,n,i)}),new Blob([a],{type:"text/plain;charset=utf-8"})}var bE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class SE extends pE{onExecute(e,t){return bE(this,void 0,void 0,(function*(){const t=yield this.getRecords(e),n=yE(e,t);return Object(Qo.saveAs)(n,"DataRecords.csv"),!0}))}}function wE(e){let t=0,n=0;const r=e.length;let o,i=e[n];for(;n<r-1;n++)o=e[n+1],t+=(o[0]-i[0])*(o[1]+i[1]),i=o;return t>=0}function IE(e,t,n,r){const o=(r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]),i=(t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]),a=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(0!==a){const e=o/a,t=i/a;if(e>=0&&e<=1&&t>=0&&t<=1)return!0}return!1}function EE(e,t){for(let n=0;n<e.length-1;n++)for(let r=0;r<t.length-1;r++)if(IE(e[n],e[n+1],t[r],t[r+1]))return!0;return!1}function OE(e,t){const n=EE(e,t),r=function(e,t){let n=!1;for(let r=-1,o=e.length,i=o-1;++r<o;i=r)(e[r][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[i][0]-e[r][0])*(t[1]-e[r][1])/(e[i][1]-e[r][1])+e[r][0]&&(n=!n);return n}(e,t[0]);return!(n||!r)}function TE(e){var t;let n={};const r=e;"number"==typeof(null==r?void 0:r.x)&&"number"==typeof(null==r?void 0:r.y)&&(n.type="Point",n.coordinates=[r.x,r.y],"number"==typeof r.z&&n.coordinates.push(r.z));const o=e;(null==o?void 0:o.points)&&(n.type="MultiPoint",n.coordinates=o.points.slice(0));const i=e;(null==i?void 0:i.paths)&&(1===i.paths.length?(n.type="LineString",n.coordinates=i.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=i.paths.slice(0)));const a=e;(null==a?void 0:a.rings)&&(n=function(e){const t=[],n=[];let r,o,i;for(let r=0;r<e.length;r++){const o=(function(e,t){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((a=e[r].slice(0))[0],a[a.length-1])||a.push(a[0]),a);if(!(o.length<4))if(wE(o)){const e=[o.slice().reverse()];t.push(e)}else n.push(o.slice().reverse())}var a;const s=[];for(;n.length;){i=n.pop();let e=!1;for(r=t.length-1;r>=0;r--)if(o=t[r][0],OE(o,i)){t[r].push(i),e=!0;break}e||s.push(i)}for(;s.length;){i=s.pop();let e=!1;for(r=t.length-1;r>=0;r--)if(o=t[r][0],EE(o,i)){t[r].push(i),e=!0;break}e||t.push([i.reverse()])}return 1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}(a.rings.slice(0)));const s=e;return"number"==typeof(null==s?void 0:s.xmin)&&"number"==typeof(null==s?void 0:s.ymin)&&"number"==typeof(null==s?void 0:s.xmax)&&"number"==typeof(null==s?void 0:s.ymax)&&(n.type="Polygon",n.coordinates=[[[s.xmax,s.ymax],[s.xmin,s.ymax],[s.xmin,s.ymin],[s.xmax,s.ymin],[s.xmax,s.ymax]]]),(null===(t=null==e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n}function CE(e,t){const n={},r=e.getGeometry(),o=e.getData();if((r||o)&&(n.type="Feature",n.geometry=r?TE(r):null,n.properties=o?function(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(o):null,o))try{n.id=function(e,t){const n=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"];for(let t=0;t<n.length;t++){const r=n[t];if(r in e&&("string"==typeof e[r]||"number"==typeof e[r]))return e[r]}throw Error("No valid id attribute found")}(o,t)}catch(e){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),n}function AE(e,t){const n={type:"FeatureCollection",features:[]};for(let r=0;r<e.length;r++)n.features.push(CE(e[r],t));return n}var xE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class PE extends pE{isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return xE(this,void 0,void 0,(function*(){return(yield n.isSupported.call(this,e,t))&&null!=e.getGeometryType()}))}onExecute(e,t){var n;return xE(this,void 0,void 0,(function*(){const t=AE(yield this.getRecords(e),null===(n=e.getSchema())||void 0===n?void 0:n.idField),r=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return Object(Qo.saveAs)(r,"DataRecords.geojson"),yield Promise.resolve(!0)}))}}var DE=e=>!(!e||!e.tagName)&&("BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"DIV"===e.tagName&&"true"===e.contentEditable||"SPAN"===e.tagName&&"true"===e.contentEditable);var RE=e=>DE(e.target||e.nativeEvent.target);var jE=e=>{let t="";const n=[];if(navigator.userAgent.includes("Edge")&&-1!==e.key.indexOf("-manual"))t=e.key.replace("-manual","");else if("code"in e)t=ny[e.code]?ny[e.code]:e.code;else{const n=e.which;t=String.fromCharCode(n).toLowerCase(),ny[n]&&(t=ny[n])}return e.metaKey&&n.push("command"),e.ctrlKey&&n.push("Ctrl"),e.shiftKey&&n.push("Shift"),e.altKey&&n.push("Alt"),n.push(t),n.join("+")};const _E=e=>{console.log(":keyboard event:",e)};var kE=function(e="keydown",t=null){if("undefined"==typeof window)return!1;const n={};let r=null,o=null;null===t&&(t=window.document);const i=!DE(t);function a(e){if(ty(e))return;if(i&&RE(e))return;o&&o(e);const t=jE(e),a=n[t.toLowerCase()]||[];if("function"==typeof r){const n=a.length>0;r(t,n,e)}a.length&&e.preventDefault();let s=!0;for(let t=a.length-1;t>=0&&(a[t]&&(s=a[t](e)),s);t--);return!!s&&void 0}function s(){t.addEventListener(e,a)}return s(),{subscribe:function(e,t){return(e=e.toLowerCase()).replace(/\s/,""),void 0===n[e]&&(n[e]=[]),n[e].push(t),{unsubscribe:()=>{const r=n[e].indexOf(t);n[e].splice(r,1)}}},setMonitor:function(e=null){r=!0===e?_E:e},startListening:s,stopListening:function(){t.removeEventListener(e,a)},setKeyboardTriggerFunction:function(e){o=e}}};class ME extends E.PureComponent{constructor(e){super(e),this.subs=[],this.keyboardListener=kE(e.eventName,this.props.element),this.props.onKeyboardTrigger&&this.keyboardListener.setKeyboardTriggerFunction(this.props.onKeyboardTrigger)}componentDidMount(){const{bindings:e,monitor:t}=this.props;Object.keys(e).forEach(t=>{const n=e[t],r=this.keyboardListener.subscribe(t,n);this.subs.push(r)}),t&&this.keyboardListener.setMonitor(t)}componentWillUnmount(){this.subs.forEach(e=>e.unsubscribe())}render(){return null}}ME.defaultProps={eventName:"keydown",bindings:{},monitor:null};var NE=ME;class LE extends E.PureComponent{constructor(){super(...arguments),this.onKeyboardTrigger=e=>{e.key.includes("-manual")||wp().appBuilderSync.letBuilderResponseToKeyboard(e)},this.isMac=()=>/macintosh|mac os x/i.test(navigator.userAgent)}render(){return this.isMac()?E.createElement(NE,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"command+keys":()=>!1}}):E.createElement(NE,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"ctrl+keys":()=>!1}})}}var UE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class FE extends E.PureComponent{constructor(e){super(e),this.getKeyboardComponent=()=>{if(window.jimuConfig.isBuilder){const e=mp("jimu-for-builder").BuilderKeyboardComponent;return E.createElement(e,null)}return window.jimuConfig.isInBuilder?E.createElement(LE,null):null};const t={},n=this.getPageId();t.pageStatus=be(n?{[n]:!0}:{}),window.isNode||window.initStoreState?t.preloadWidgetsLoaded=!0:t.preloadWidgetsLoaded=!1,this.state=t,this.onDismiss=this.onDismiss.bind(this),this.reload=this.reload.bind(this)}getLayoutEntryPath(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",e}getPageRenderClass(){return mp(this.getLayoutEntryPath())?mp(this.getLayoutEntryPath()).PageRenderer:(console.error("Please init jimu-layouts."),null)}getJimuUI(){return mp("jimu-ui")?mp("jimu-ui"):(console.error("Please init jimu-ui."),null)}componentDidMount(){const e=Nh()+"jimu-ui",t=this.props.isRTL?e+"/styles/base-rtl.css":e+"/styles/base.css";if(document){if(document.getElementById("jimu-base-style"))return;const e=document.createElement("link");e.setAttribute("id","jimu-base-style"),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),document.head.appendChild(e)}uE.getInstance({intl:this.props.intl}).loadAppConfig().then(e=>{this.props.dispatch(kg(e));const t=Dh(this.props.queryObject,e);return Object.keys(t).forEach(e=>{this.props.dispatch(Ym(e,t[e]))}),e}).then(e=>{Promise.all([this.loadPreloadWidgets(e),Sv.getInstance().loadTheme(e.theme)]).then(()=>{ep(),window.jimuConfig.isInBuilder&&_g.getInstance().createAllDataSources()}).catch(e=>{console.error("Initializing theme manager failed.",e),this.props.dispatch(Mg(e.message))})}).catch(e=>{console.error("Load app config error.",e),this.props.dispatch(Mg(e.message))})}componentWillUnmount(){const e=document.getElementById("jimu-base-style");e&&e.remove()}loadPreloadWidgets(e){var t;return UE(this,void 0,void 0,(function*(){const n=[],r=(null===(t=e.preloadWidgets)||void 0===t?void 0:t.asMutable())||[];return Object.keys(e.widgets).forEach(t=>{const o=e.widgets[t];n.includes(o.uri)&&!r.includes(o.uri)&&r.push(o.uri)}),0===r.length?(this.setState({preloadWidgetsLoaded:!0}),Promise.resolve()):Promise.all(r.map(e=>UE(this,void 0,void 0,(function*(){return yield eE.getInstance().loadWidgetClassByUri(e)})))).then(()=>{this.setState({preloadWidgetsLoaded:!0})})}))}componentDidUpdate(){const e=this.getPageId();let t=this.state.pageStatus;e&&!t[e]&&(Object.keys(t).forEach(e=>{t=t.set(e,!1)}),this.setState({pageStatus:t.set(e,!0)}))}getPageId(){if(!this.props.pages)return null;const e=Rh();if(e.pageId)return e.pageId;return Object.keys(this.props.pages).find(e=>this.props.pages[e].isDefault)}getDialogId(){return this.props.dialogJson&&(window.jimuConfig.isInBuilder||this.props.dialogJson.mode!==nh.Anchored)?window.jimuConfig.isInBuilder&&this.props.dialogJson.mode===nh.Anchored&&this.props.currentDialogId&&this.props.currentDialogId!==this.props.queryObject.dlg?null:this.props.dialogJson.id:null}render(){const{pageStatus:e}=this.state,t=this.getPageRenderClass(),n=this.getJimuUI();if(this.props.loadAppConfigError)return ep(),E.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:this.props.loadAppConfigError}});if(!this.props.hasPrivilege)return ep(),this.renderPrivilegeError();const r=Sv.getInstance();if(!this.props.appConfigLoaded||!t||!this.state.preloadWidgetsLoaded||pc(this.props.themeVariables,{}))return null;if(this.props.themeName&&!r.isThemeLoaded(this.props.themeName))return null;const o=this.getPageId();if(!o)return console.error("No page to render."),null;if(!this.props.pages[o])return console.error("Invalid page id.",o),null;if(this.props.pages[o].type===eh.Folder)return console.error("This is a folder."),null;if(this.props.pages[o].linkUrl)return window.location.assign(this.props.pages[o].linkUrl),null;const i=r.getGlobalStyles(this.props.themeVariables),a=n.Loading;return E.createElement(E.Fragment,null,E.createElement(ln,{styles:i}),this.renderReloadAlert(this.props.themeVariables),E.createElement(t,{pageStatus:e,dialogId:this.getDialogId()}),this.getThemeNode(),E.createElement("div",{id:"helper-nodes-container"}),this.getKeyboardComponent(),a&&this.props.isBusy&&E.createElement(a,{type:this.props.loadingType}))}renderPrivilegeError(){const{Button:e}=this.getJimuUI(),t=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black";return E.createElement("div",{style:{width:"100vw",height:"100vh",color:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},E.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.privilegeError}}),E.createElement(e,{size:"lg",style:{padding:"0.25rem 1rem",fontSize:"14px",userSelect:"none",lineHeight:1.5,borderRadius:"2px",color:"#fff",background:"#444",borderWidth:"1px",borderStyle:"solid",borderColor:"#444",marginTop:"20px",outline:"none",cursor:"pointer"},onClick:()=>{location.href="/"}},this.props.intl.formatMessage({id:"ok",defaultMessage:sy.ok})))}renderReloadAlert(e){if(window.jimuConfig.isInBuilder||window.jimuConfig.isSite&&"landing"===this.getPageId())return null;if(!this.props.hasNewVersion&&!this.props.userLocaleChanged)return null;const{Alert:t,Button:n}=this.getJimuUI(),r=this.props.hasNewVersion?E.createElement(SI,{id:"versionUpdateMsg",defaultMessage:sy.versionUpdateMsg}):E.createElement(SI,{id:"userLocaleChangeMsg",defaultMessage:sy.userLocaleChangeMsg});return E.createElement(t,{form:"basic",type:"info",open:this.props.hasNewVersion,onClose:this.onDismiss,className:"pl-3 pr-3",closable:!0,style:{position:"absolute",zIndex:999,width:"100%",paddingTop:""+jn(11),paddingBottom:""+jn(11),backgroundColor:""+e.colors.palette.primary[100],color:""+e.colors.black,fontSize:""+jn(16)}},r,E.createElement(n,{size:"sm",type:"primary",className:"ml-3",onClick:this.reload,style:{minWidth:""+jn(78),height:""+jn(26),marginTop:""+jn(-2)}},E.createElement(SI,{id:"doUpdate",defaultMessage:sy.doUpdate})))}onDismiss(){var e;this.props.dispatch(ev(!1)),this.props.dispatch(tv(!1)),window.jimuConfig.isBuilder&&(null===(e=window._appWindow)||void 0===e?void 0:e._appStore)&&(window._appWindow._appStore.dispatch({type:"SET_HAS_NEW_VERSION",hasNew:!1}),window._appWindow._appStore.dispatch({type:"USER_LOCALE_CHANGED",isChanged:!1}))}reload(){window.location.reload()}getThemeNode(){let e=null;const t=this.props.themeName;if(t){const n=Sv.getInstance().getThemeManifest(t);if(n&&n.styleFiles&&n.styleFiles.css){const n=this.props.isRTL?`${Nh()}${t}/style-rtl.css`:`${Nh()}${t}/style.css`;e=E.createElement("link",{type:"text/css",rel:"stylesheet",href:n})}}return e}}var $E=$d(se(e=>{var t;return e.appConfig?{appConfigLoaded:!0,customTheme:e.appConfig.customTheme,themeName:e.appConfig.theme?e.appConfig.theme:null,themeVariables:e.theme,pages:e.appConfig.pages,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,isBusy:e.appRuntimeInfo.isBusy,loadingType:e.appRuntimeInfo.loadingType,dialogJson:e.appConfig.dialogs?e.appConfig.dialogs[e.queryObject.dlg]:null,currentDialogId:e.appRuntimeInfo.currentDialogId,hasNewVersion:e.hasNewVersion||(null===(t=e.appStateInBuilder)||void 0===t?void 0:t.hasNewVersion),userLocaleChanged:e.userLocaleChanged,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,loadAppConfigError:null}:{appConfigLoaded:!1,themeVariables:e.theme,themeName:null,customTheme:null,pages:null,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,loadingType:null,isBusy:e.appRuntimeInfo.isBusy,dialogJson:null,currentDialogId:null,hasNewVersion:!1,userLocaleChanged:!1,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,loadAppConfigError:e.loadAppConfigError}})(FE));class VE extends E.Component{constructor(e){super(e),this.state={error:null}}componentDidCatch(e,t){this.setState({error:e})}render(){return this.state.error?E.createElement("h1",null,this.state.error.message):this.props.children}}const{useEffect:BE,useState:GE}=E,WE="jimu-interactive-node";function qE(e){const[t,n]=GE(!1);function r(e){e&&(t?e.classList.add("jimu-keyboard-nav"):e.classList.remove("jimu-keyboard-nav"))}return BE(()=>{!function(){if(r(document.body),window.jimuConfig.isBuilder){const e=document.querySelector(`iframe[name="${Oa}"]`);r((null==e?void 0:e.contentDocument.body)||(null==e?void 0:e.contentWindow.document.body))}else if(window.jimuConfig.isInBuilder){r(window.parent.document.body)}}()},[t]),BE(()=>{function e(){n(!1)}function t(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(n(!1),o())}function r(){document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("pointerdown",t),document.addEventListener("pointerup",t),document.addEventListener("touchmove",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t)}function o(){document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",t),document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",t),document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t)}function i(e){"Tab"===e.key&&n(!0)}function a(e){"hidden"===document.visibilityState&&(n(!0),r())}return document.addEventListener("keydown",i,!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("visibilitychange",a,!0),r(),()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("mousedown",e,!0),document.removeEventListener("pointerdown",e,!0),document.removeEventListener("touchstart",e,!0),document.removeEventListener("visibilitychange",a,!0),o()}},[]),E.createElement(E.Fragment,null,e.children)}const zE=se(e=>({locale:e.appContext.locale,defaultLocale:e.appContext.locale,messages:e.appI18nMessages}))(bf),HE=se(e=>({theme:e.theme}))(Kt);class JE extends E.PureComponent{constructor(e){super(e),this.myEmotionCache=mg().getState().appContext.isRTL?Pt({stylisPlugins:[jv],key:"app-root-emotion-cache-rtl"}):Pt({key:"app-root-emotion-cache-ltr"})}render(){return E.createElement(j,{store:mg()},E.createElement(VE,null,E.createElement(pw,null,E.createElement(zE,null,E.createElement(HE,null,E.createElement(Ht,{value:this.myEmotionCache},E.createElement(qE,null,E.createElement($E,null))))))))}}const YE=["widgetQueries","sourceVersion","gdbVersion","needRefresh"];class XE extends E.PureComponent{componentDidMount(){if(this.createDataSource(),this.props.dataSource&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo),!this.props.query&&this.props.dataSourceInfo&&this.props.onQueryRequired){const e=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,null,this.props.belongToDataSourceInfo,null,this.props.belongToBelongToDataSourceInfo,null);(e.queryRequiredInfo||e.prevQueryRequiredInfo)&&this.props.onQueryRequired(e.queryRequiredInfo,e.prevQueryRequiredInfo)}this.doQuery()}componentDidUpdate(e){if(this.createDataSource(),(!e.dataSource&&this.props.dataSource||e.dataSource&&this.props.dataSource&&e.dataSource.id!==this.props.dataSource.id)&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),e.dataSourceInfo!==this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo,e.dataSourceInfo),(e.dataSourceInfo!==this.props.dataSourceInfo||e.belongToDataSourceInfo!==this.props.belongToDataSourceInfo||e.belongToBelongToDataSourceInfo!==this.props.belongToBelongToDataSourceInfo)&&!this.props.query&&this.props.onQueryRequired){const t=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,e.dataSourceInfo,this.props.belongToDataSourceInfo,e.belongToDataSourceInfo,this.props.belongToBelongToDataSourceInfo,e.belongToBelongToDataSourceInfo);(t.queryRequiredInfo||t.prevQueryRequiredInfo)&&this.props.onQueryRequired(t.queryRequiredInfo,t.prevQueryRequiredInfo)}e.dataSourceSchema!==this.props.dataSourceSchema&&this.props.onDataSourceSchemaChange&&this.props.onDataSourceSchemaChange(this.props.dataSourceSchema,e.dataSourceSchema),this.doQuery(),this.handleAutoRefresh()}render(){const{useDataSource:e,dataSource:t,dataSourceInfo:n,children:r,query:o}=this.props;return e&&n?n.instanceStatus===Aa.b.CreateError?xf().formatMessage({id:"dataSourceCreateError"}):t&&r?"function"==typeof r?r(t,n,o):r:null:null}doQuery(){if(!this.props.dataSource)return;const{dataSource:e,query:t,queryCount:n,widgetId:r,localId:o,queryScope:i}=this.props,a=e;if(!a.load||!a.query)return;if(!t)return;const s={widgetId:r||o,refresh:this.props.refresh,scope:i};if(a.load(t,s),n){const e=Object.assign({},t);a.loadCount(e,s)}}handleAutoRefresh(){if(!this.props.dataSource)return;const e=this.props.dataSource;e.stopAutoRefresh&&e.startAutoRefresh&&(window.jimuConfig.isInBuilder&&this.props.appMode===ha.Design?e.stopAutoRefresh():e.startAutoRefresh())}createDataSource(){const{dataSourceManager:e,useDataSource:t,localId:n}=this.props;t&&e.createDataSourceByUseDataSource(t,n).then(e=>{}).catch(e=>{e.dataSourceId!==t.dataSourceId&&e.dataSourceId!==t.rootDataSourceId||this.props.onCreateDataSourceFailed&&this.props.onCreateDataSourceFailed(e)})}getChangedQueryRequiredInfo(e,t,n,r,o,i){const a=YE.filter(e=>"needRefresh"!==e),s=this.getChangedInfo(e,t,YE),u=this.getChangedInfo(n,r,a),c=this.getChangedInfo(o,i,a),l={queryRequiredInfo:null,prevQueryRequiredInfo:null},d=this.getDsAndBelongToDsIds();return this.setChangedInfoToResult(d.dsId,s.info,!1,l),this.setChangedInfoToResult(d.belongToDsId,u.info,!1,l),this.setChangedInfoToResult(d.belongToBelongToDsId,c.info,!1,l),this.setChangedInfoToResult(d.dsId,s.prevInfo,!0,l),this.setChangedInfoToResult(d.belongToDsId,u.prevInfo,!0,l),this.setChangedInfoToResult(d.belongToBelongToDsId,c.prevInfo,!0,l),l}setChangedInfoToResult(e,t,n,r){if(e&&t){const o=n?"prevQueryRequiredInfo":"queryRequiredInfo";r[o]||(r[o]={}),r[o][e]=t}}getChangedInfo(e,t,n){const r={};return null==n||n.forEach(n=>{(null==e?void 0:e[n])!==(null==t?void 0:t[n])&&(r.info=r.info?r.info.set(n,null==e?void 0:e[n]):be({[n]:null==e?void 0:e[n]}),r.prevInfo=r.prevInfo?r.prevInfo.set(n,null==t?void 0:t[n]):be({[n]:null==t?void 0:t[n]}))}),r}getDsAndBelongToDsIds(){var e,t,n,r,o,i;return{dsId:null===(e=this.props.dataSource)||void 0===e?void 0:e.id,belongToDsId:null===(n=null===(t=this.props.dataSource)||void 0===t?void 0:t.belongToDataSource)||void 0===n?void 0:n.id,belongToBelongToDsId:null===(i=null===(o=null===(r=this.props.dataSource)||void 0===r?void 0:r.belongToDataSource)||void 0===o?void 0:o.belongToDataSource)||void 0===i?void 0:i.id}}}var KE=se((e,t)=>{var n,r;const o=_g.getInstance(),i=window.jimuConfig.isBuilder?e.appStateInBuilder:e;if(!i||!t.useDataSource)return{dataSourceInfo:null,dataSourceJson:null,dataSourceSchema:null,rootDataSourceJson:null,dataSource:null,dataSourceManager:o,belongToDataSourceInfo:null,appMode:null};const a=t.useDataSource,s=TS(a,t.localId),u=o.getDataSource(a.rootDataSourceId);let c=o.getDataSource(s);return a.rootDataSourceId&&!u&&(c=null),{dataSourceInfo:i.dataSourcesInfo[s],dataSourceJson:i.appConfig.dataSources[a.mainDataSourceId],dataSourceSchema:(null==c?void 0:c.getSchema())||(null===(n=i.appConfig.dataSources[a.mainDataSourceId])||void 0===n?void 0:n.schema),rootDataSourceJson:i.appConfig.dataSources[a.rootDataSourceId],dataSource:c,dataSourceManager:o,belongToDataSourceInfo:(null==c?void 0:c.isDataView)||(null==c?void 0:c.isLocal)?i.dataSourcesInfo[c.belongToDataSource.id]:null,belongToBelongToDataSourceInfo:(null==c?void 0:c.isLocal)&&(null===(r=c.belongToDataSource)||void 0===r?void 0:r.isDataView)?i.dataSourcesInfo[c.belongToDataSource.belongToDataSource.id]:null,appMode:i.appRuntimeInfo.appMode}})(XE);class QE extends E.PureComponent{constructor(){super(...arguments),this.handleDataSourceCreated=()=>{const{onDataSourceCreated:e=(()=>{})}=this.props;e(this.getDataSources())},this.handleDataSourceInfoChange=()=>{const{onDataSourceInfoChange:e=(()=>{})}=this.props;e(this.getDataSourcesInfo())},this.getDataSources=()=>{const{useDataSources:e=[]}=this.props,t={},n=_g.getInstance();return e.forEach(e=>t[e.dataSourceId]=n.getDataSource(e.dataSourceId)),t},this.getDataSourcesInfo=()=>{const{useDataSources:e=[]}=this.props,t={};return e.forEach(e=>{t[e.dataSourceId]=this.props[e.dataSourceId]}),t},this.hasLoadedDataSources=()=>{const{useDataSources:e=[]}=this.props,t=this.getDataSources();return e.every(e=>!!t[e.dataSourceId])},this.MemoDataSourceComponents=E.memo(({useDataSources:e,queries:t,widgetId:n,localId:r})=>e?E.createElement(E.Fragment,null,e.asMutable().map((e,o)=>E.createElement(KE,{key:o,useDataSource:e,query:null==t?void 0:t[e.dataSourceId],widgetId:n,localId:r,onDataSourceCreated:this.handleDataSourceCreated,onDataSourceInfoChange:this.handleDataSourceInfoChange}))):null)}render(){const{useDataSources:e,queries:t,widgetId:n,localId:r,children:o}=this.props,i=this.MemoDataSourceComponents,a=E.createElement(i,{useDataSources:e,queries:t,widgetId:n,localId:r});return o?E.createElement(E.Fragment,null,a,"function"==typeof o?o(this.getDataSources(),this.getDataSourcesInfo()):o):a}}var ZE,eO=se((e,t)=>{const n={},r=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return t.useDataSources&&t.useDataSources.forEach(e=>{const o=TS(e,t.localId);_g.getInstance().getDataSource(o)&&(n[o]=r.dataSourcesInfo[o])}),n})(QE),tO=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e.Failed="RESOLVE_FAILED",e.NotMatched="DATA_SOURCES_IN_EXPRESSION_CANNOT_MATCH_DATA_SOURCES_IN_USE"}(ZE||(ZE={}));class nO extends E.PureComponent{constructor(e){super(e),this.dataSources=null,this.__unmount=!1,this.__resolveCount=1,this.getWhetherExpressionsAreSame=(e,t)=>pc(e,t),this.getWhetherDsInfosAreSame=(e,t,n)=>{if(!n)return!0;if(e||t){if(e&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;{const r=this.getUseSelectionDsIdsFromExpression(n).map(e=>{var t;return null===(t=_g.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource()});return!Object.keys(e).some(n=>{var o,i;const a=_g.getInstance().getDataSource(n);return!(a&&r.some(e=>(null==e?void 0:e.id)===a.getMainDataSource().id)?pc(e[n],t[n]):pc(null===(o=e[n])||void 0===o?void 0:o.without("selectedIds"),null===(i=t[n])||void 0===i?void 0:i.without("selectedIds")))})}}return!1}return!0},this.getUseSelectionDsIdsFromExpression=e=>{const t=this.getWhetherIsMultipleExpression(e);let n=[];if(!e)return n;if(t){const t=e;Object.keys(t).forEach(e=>{n=n.concat(this.getUseSelectionDsIdsFromSingleExpression(t[e]))})}else n=n.concat(this.getUseSelectionDsIdsFromSingleExpression(e));return Array.from(new Set(n))},this.getUseSelectionDsIdsFromSingleExpression=e=>{let t=[];return e&&e.parts?(e.parts.forEach(e=>{US(null==e?void 0:e.dataSourceId)&&(t=t.concat(e.dataSourceId))}),Array.from(new Set(t))):t},this.getWhetherUseDssAreSame=(e,t)=>!e&&!t||!(!e||!t)&&(e.length===t.length&&!e.some((n,r)=>{var o,i;return!pc(null===(o=e[r])||void 0===o?void 0:o.without("fields"),null===(i=t[r])||void 0===i?void 0:i.without("fields"))})),this.getWhetherIsMultipleExpression=e=>!!e&&!(2===Object.keys(e).length&&Object.keys(e).includes("name")&&Object.keys(e).includes("parts")&&Array.isArray(e.parts)),this.resolveExpressions=(e,t,n)=>tO(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve("");if(this.getWhetherIsMultipleExpression(e)){const t=e;Object.keys(t).forEach(e=>{this.resolveSingleExpression(t[e]).then(t=>{const r=this.resultsCache;this.__unmount||n!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},r),{[e]:{isSuccessful:!0,value:t}}),this.setState({results:this.resultsCache}))}).catch(t=>{const r=this.resultsCache;this.__unmount||n!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},r),{[e]:{isSuccessful:!1,value:t}}),this.setState({results:this.resultsCache}))})})}else this.resolveSingleExpression(e).then(e=>{this.__unmount||n!==this.__resolveCount||(this.resultsCache={isSuccessful:!0,value:e},this.setState({results:this.resultsCache}))}).catch(e=>{this.__unmount||n!==this.__resolveCount||(this.resultsCache={isSuccessful:!1,value:e},this.setState({results:this.resultsCache}))})})),this.resolveSingleExpression=e=>tO(this,void 0,void 0,(function*(){return this.getWhetherExpressionDssInUseDss(e)?yield Xw(e,this.props.useDataSources,this.props.repeatedDataSource,this.props.intl).catch(e=>tO(this,void 0,void 0,(function*(){return yield Promise.reject(ZE.Failed)}))):yield Promise.reject(ZE.NotMatched)})),this.onDataSourceCreated=e=>{if(this.dataSources=e,e){const t={};Object.keys(e).forEach(n=>{n&&e[n]&&(t[n]=e[n].getInfo())}),this.setState({infos:t})}},this.onDataSourceInfoChange=e=>{this.getWhetherDsInfosAreSame(e,this.state.infos,this.props.expression)||this.setState({infos:e})},this.getWhetherExpressionDssInUseDss=e=>!e||!e.parts||!e.parts.some(e=>e&&e.dataSourceId&&!this.getWhetherDsIdInUseDss(e.dataSourceId)),this.getWhetherDsIdInUseDss=e=>{if(!e)return!1;const t=this.props.useDataSources||[];if(e.split("-").reverse()[0]===Sc){const n=e.replace(/-dataView_\d{1,}/,"").replace("-"+Sc,"");return t.some(e=>e.mainDataSourceId===n)}return t.some(t=>t.dataSourceId===e)},this.getLocalDataSources=e=>{let t=be([]);return e&&0!==e.length?(e.forEach(e=>{const n=_g.getInstance().getDataSource(e.dataSourceId);n&&n.getAllDerivedDataSources().forEach(e=>{var r;if((null==e?void 0:e.isLocal)&&(null===(r=null==e?void 0:e.id)||void 0===r?void 0:r.includes(n.id+"-EXPRESSION_RESOLVER"))){const n=e.getRootDataSource(),r=e.getMainDataSource();t=t.concat({dataSourceId:e.id,rootDataSourceId:n&&n.id,mainDataSourceId:r&&r.id,dataViewId:e.dataViewId})}})}),t):t},this.getQueries=(e,t)=>{const n={};if(!e||!t)return n;const r=this.getWhetherIsMultipleExpression(t)?Object.values(t):[t];let o=[];r.forEach(e=>{(null==e?void 0:e.parts)&&(o=o.concat(e.parts.asMutable()))});return e.filter(e=>!!e).filter(e=>e.dataViewId===wc&&o.some(t=>t.dataSourceId===_g.getInstance().getDataViewDataSourceId(e.mainDataSourceId,Sc)&&t.type===Ew.Field&&!t.isFromRepeatedDataSourceContext)||e.dataViewId!==Sc&&o.some(t=>t.dataSourceId===e.dataSourceId&&t.type===Ew.Field&&!t.isFromRepeatedDataSourceContext)).forEach(e=>{n[e.dataSourceId]={}}),n},this.state={results:null,infos:null}}componentDidMount(){this.__unmount=!1,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)}componentWillUnmount(){this.__unmount=!0}componentDidUpdate(e,t){this.state.infos===t.infos&&this.getWhetherExpressionsAreSame(this.props.expression,e.expression)&&this.getWhetherUseDssAreSame(this.props.useDataSources,e.useDataSources)||(this.__resolveCount++,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)),t.results!==this.state.results&&null!==this.state.results&&this.props.onChange&&this.props.onChange(this.state.results)}getLocalLoadId(){return"EXPRESSION_RESOLVER-"+this.props.widgetId}render(){if(!this.props.expression||!this.props.useDataSources)return null;const e=this.getLocalDataSources(this.props.useDataSources),t=e.length>0?this.props.useDataSources.concat(e):this.props.useDataSources;return E.createElement(eO,{useDataSources:t,onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange,queries:this.getQueries(t,this.props.expression),widgetId:this.getLocalLoadId()},()=>"function"==typeof this.props.children?this.props.children(this.state.results):this.props.children)}}const rO=$d(jI(nO));var oO=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?FI(n,s,u):VI(n,s,u)}return n};var iO=function(e,t,n){if(!qa(n))return!1;var r=typeof t;return!!("number"==r?Ju(n)&&_u(t,n.length):"string"==r&&t in n)&&bs(n[t],e)};var aO=function(e){return xg((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&iO(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))},sO=Object.prototype.hasOwnProperty,uO=aO((function(e,t){if(Wu(t)||Ju(t))oO(t,Yu(t),e);else for(var n in t)sO.call(t,n)&&VI(e,n,t[n])})),cO=function(){return Pa.a.Date.now()},lO=/\s/;var dO=function(e){for(var t=e.length;t--&&lO.test(e.charAt(t)););return t},fO=/^\s+/;var pO=function(e){return e?e.slice(0,dO(e)+1).replace(fO,""):e},hO=/^[-+]0x[0-9a-f]+$/i,gO=/^0b[01]+$/i,mO=/^0o[0-7]+$/i,vO=parseInt;var yO=function(e){if("number"==typeof e)return e;if(Va(e))return NaN;if(qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=pO(e);var n=gO.test(e);return n||mO.test(e)?vO(e.slice(2),n?2:8):hO.test(e)?NaN:+e},bO=Math.max,SO=Math.min;var wO=function(e,t,n){var r,o,i,a,s,u,c=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function h(e){return c=e,s=setTimeout(m,t),l?p(e):a}function g(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=i}function m(){var e=cO();if(g(e))return v(e);s=setTimeout(m,function(e){var n=t-(e-u);return d?SO(n,i-(e-c)):n}(e))}function v(e){return s=void 0,f&&r?p(e):(r=o=void 0,a)}function y(){var e=cO(),n=g(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return h(u);if(d)return clearTimeout(s),s=setTimeout(m,t),p(u)}return void 0===s&&(s=setTimeout(m,t)),a}return t=yO(t)||0,qa(n)&&(l=!!n.leading,i=(d="maxWait"in n)?bO(yO(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?a:v(cO())},y};var IO=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return qa(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),wO(e,t,{leading:r,maxWait:t,trailing:o})};var EO=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n};var OO=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),TO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,CO=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var AO=function(e){return(e=Hs(e))&&e.replace(TO,OO).replace(CO,"")},xO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var PO=function(e){return e.match(xO)||[]},DO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var RO=function(e){return DO.test(e)},jO="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_O="["+jO+"]",kO="\\d+",MO="[\\u2700-\\u27bf]",NO="[a-z\\xdf-\\xf6\\xf8-\\xff]",LO="[^\\ud800-\\udfff"+jO+kO+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",UO="(?:\\ud83c[\\udde6-\\uddff]){2}",FO="[\\ud800-\\udbff][\\udc00-\\udfff]",$O="[A-Z\\xc0-\\xd6\\xd8-\\xde]",VO="(?:"+NO+"|"+LO+")",BO="(?:"+$O+"|"+LO+")",GO="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",WO="[\\ufe0e\\ufe0f]?"+GO+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",UO,FO].join("|")+")[\\ufe0e\\ufe0f]?"+GO+")*"),qO="(?:"+[MO,UO,FO].join("|")+")"+WO,zO=RegExp([$O+"?"+NO+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[_O,$O,"$"].join("|")+")",BO+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[_O,$O+VO,"$"].join("|")+")",$O+"?"+VO+"+(?:['](?:d|ll|m|re|s|t|ve))?",$O+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kO,qO].join("|"),"g");var HO=function(e){return e.match(zO)||[]};var JO=function(e,t,n){return e=Hs(e),void 0===(t=n?void 0:t)?RO(e)?HO(e):PO(e):e.match(t)||[]},YO=RegExp("[']","g");var XO,KO,QO=function(e){return function(t){return EO(JO(AO(t).replace(YO,"")),e,"")}}((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));!function(e){e.Loading="LOADING",e.Loaded="LOADED",e.Failed="FAILED"}(XO||(XO={})),function(e){e.UseDataSource="USE_DATA_SOURCE",e.OutputDataSource="OUTPUT_DATA_SOURCE"}(KO||(KO={}));const ZO="exb_user_settings";var eT,tT,nT;function rT(e,t){return{STRING_SELECTION_CHANGE:t.formatMessage({id:"message_StringSelectionChange",defaultMessage:sy.message_StringSelectionChange}),EXTENT_CHANGE:t.formatMessage({id:"message_ExtentChange",defaultMessage:sy.message_ExtentChange}),DATA_RECORDS_SELECTION_CHANGE:t.formatMessage({id:"message_DataRecordsSelectionChange",defaultMessage:sy.message_DataRecordsSelectionChange}),DATA_RECORD_SET_CHANGE:t.formatMessage({id:"message_DataRecordSetChange",defaultMessage:sy.message_DataRecordSetChange}),SELECT_DATA_RECORD:t.formatMessage({id:"message_SelectDataRecord",defaultMessage:sy.message_SelectDataRecord})}[e]}!function(e){e.Urlinfo="URLINFO"}(eT||(eT={})),function(e){e.StringSelectionChange="STRING_SELECTION_CHANGE",e.ExtentChange="EXTENT_CHANGE",e.DataRecordsSelectionChange="DATA_RECORDS_SELECTION_CHANGE",e.DataRecordSetChange="DATA_RECORD_SET_CHANGE",e.SelectDataRecord="SELECT_DATA_RECORD"}(tT||(tT={}));class oT{constructor(e,t){this.type=tT.StringSelectionChange,this.widgetId=e,this.str=t}}class iT{constructor(e,t){this.type=tT.DataRecordsSelectionChange,this.widgetId=e,this.records=t}}class aT{constructor(e,t){this.type=tT.ExtentChange,this.widgetId=e,this.extent=t,this.relatedWidgetIds=[]}setRelatedWidgetIds(e){this.relatedWidgetIds=e}getRelatedWidgetIds(){return this.relatedWidgetIds}addRelatedWidgetId(e){this.relatedWidgetIds.includes(e)||this.relatedWidgetIds.push(e)}}!function(e){e.Create="CREATE",e.Update="UPDATE",e.Remove="REMOVE"}(nT||(nT={}));class sT{constructor(e,t,n,r){this.type=tT.DataRecordSetChange,this.widgetId=e,this.dataRecordSetId=t,this.changeType=n,this.dataRecordSet=r}}class uT{constructor(e,t,n){this.type=tT.SelectDataRecord,this.widgetId=e,this.dataSourceId=t,this.recordId=n}}class cT{constructor(e){this.id=e.id,e.name&&(this.name=e.name),e.widgetId&&(this.widgetId=e.widgetId),this.label=e.label}destroy(){}onRemoveListen(e,t){}}class lT extends cT{filterMessageType(e,t){return!0}filterMessage(e){return!0}onExecute(e,t){return!0}}var dT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class fT extends lE{isSupported(e,t){var n;return dT(this,void 0,void 0,(function*(){if(null==e||"function"!=typeof e.query)return!1;const t=e;return(yield t.allowToExportData())&&(null===(n=e.getSelectedRecords)||void 0===n?void 0:n.call(e).length)>0}))}getRecords(e){var t;return dT(this,void 0,void 0,(function*(){return(null===(t=e.getSelectedRecords)||void 0===t?void 0:t.call(e).length)>0?e.getSelectedRecords():[]}))}}var pT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class hT extends fT{onExecute(e,t){return pT(this,void 0,void 0,(function*(){const t=yield this.getRecords(e),n=yE(e,t);return Object(Qo.saveAs)(n,"DataRecords.csv"),!0}))}}var gT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class mT extends fT{isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return gT(this,void 0,void 0,(function*(){return(yield n.isSupported.call(this,e,t))&&null!=e.getGeometryType()}))}onExecute(e,t){var n;return gT(this,void 0,void 0,(function*(){const t=AE(yield this.getRecords(e),null===(n=e.getSchema())||void 0===n?void 0:n.idField),r=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return Object(Qo.saveAs)(r,"DataRecords.geojson"),yield Promise.resolve(!0)}))}}var vT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class yT extends fT{onExecute(e,t){return vT(this,void 0,void 0,(function*(){const t=(yield this.getRecords(e)).map(e=>e.toJson()),n=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return Object(Qo.saveAs)(n,"DataRecords.json"),Promise.resolve(!0)}))}}function bT(e,t){return t===da.String?`'${e}'`:t===da.Number?Number.isNaN(Number(e))?null:""+e:t===da.Date?`'${e}'`:void 0}var ST=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class wT extends cT{constructor(){super(...arguments),this.name="filter data record action",this.actionQuerySQLRecord={},this.concatQuerySQLOfSameAction=(e,t)=>{var n;let r="";const o=e.widgetId,i=(null===(n=this.actionQuerySQLRecord)||void 0===n?void 0:n[t])||{};return Object.keys(i).forEach(e=>{var t;const n=null===(t=i[e])||void 0===t?void 0:t.SQL;e!=o&&n&&(r=r?`${r} AND ${n}`:""+n)}),r},this.getQuerySQLWidthOtherQuerySQL=(e,t,n)=>{const r=this.concatQuerySQLOfSameAction(e,t);return r&&(n=n?`${n} AND ${r}`:r),n}}filterMessageType(e,t){return e==tT.DataRecordsSelectionChange||e==tT.SelectDataRecord||e==tT.ExtentChange}filterMessage(e){return!0}getSettingComponentUri(e,t){return"filter-data-record-action"}onRemoveListen(e,t){if(this.lastMessage&&this.lastMessage.type===e&&this.lastMessage.widgetId===t){if(this.lastActionConfig&&this.lastActionConfig.actionUseDataSource&&this.lastActionConfig.actionUseDataSource.dataSourceId){const e=_g.getInstance().getDataSource(this.lastActionConfig.actionUseDataSource.dataSourceId);e&&this.lastMessage.type===tT.DataRecordsSelectionChange&&e.updateQueryParams(null,this.id),e&&this.lastMessage.type===tT.ExtentChange&&e.updateQueryParams(null,this.id),this.lastActionConfig=null}this.lastMessage=null}}onExecute(e,t){var n,r;return ST(this,void 0,void 0,(function*(){switch(this.lastMessage=e,this.lastActionConfig=t,e.type){case tT.DataRecordsSelectionChange:let o=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const r=_g.getInstance(),i=r.getDataSource(t.messageUseDataSource.mainDataSourceId),a=t.actionUseDataSource.dataSourceId;let s=r.getDataSource(a);if(s||(s=yield r.createDataSourceByUseDataSource(t.actionUseDataSource)),i&&s){let r=!1;if(t.enabledDataRelationShip){let u=null,c=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=i.getSchema(),t=i.getIdField();u=null===(n=null==e?void 0:e.fields)||void 0===n?void 0:n[t],c=u}else{const e=t.messageUseDataSource.fields[0],n=t.actionUseDataSource.fields[0];u=i.getSchema().fields[e],c=s.getSchema().fields[n]}let l="";if(u&&c){const t=u.name,n=u.type,o=c.type,i=e,a=[];for(let e=0;e<i.records.length;e++){const n=i.records[e].getData()[t];if(!a.includes(""+bT(n,o))){const n=bT(i.records[e].getData()[t],o);null!==n&&a.push(""+n)}}n!==da.Number&&o===da.Number&&i.records.length>0&&0==a.length&&(r=!0),l=c.name+" IN ",a.length>0?l+=`(${a.join(", ")})`:l=""}if(e.records.length>0){const e=t.sqlExprObj?Eb(t.sqlExprObj,s).sql:null;e&&(l=l?l+" AND "+e:e)}else l="";r&&(l="1 = 2"),sA.setValue(this.actionQuerySQLRecord,`${a}.${e.widgetId}.SQL`,l),l=this.getQuerySQLWidthOtherQuerySQL(e,a,l),o={outFields:["*"],where:l,returnGeometry:!0}}else{let n="";if(e.records.length>0){const e=t.sqlExprObj?Eb(t.sqlExprObj,s).sql:null;e&&(n=e)}else n="";sA.setValue(this.actionQuerySQLRecord,`${a}.${e.widgetId}.SQL`,n),n=this.getQuerySQLWidthOtherQuerySQL(e,a,n),o={outFields:["*"],where:n,returnGeometry:!0}}s.updateQueryParams(o,this.id)}}return Promise.resolve(!0);case tT.ExtentChange:if(t&&t.actionUseDataSource){const n=_g.getInstance(),o=t.actionUseDataSource.dataSourceId;let i=n.getDataSource(o);i||(i=yield n.createDataSourceByUseDataSource(t.actionUseDataSource));let a=null;if(i){const n=null===(r=e)||void 0===r?void 0:r.extent;let s="";const u=t.sqlExprObj?Eb(t.sqlExprObj,i).sql:null;u&&(s=u);const c=t.enableQueryWithCurrentExtent?n.toJSON():{};sA.setValue(this.actionQuerySQLRecord,`${o}.${e.widgetId}.SQL`,s),s=this.getQuerySQLWidthOtherQuerySQL(e,o,s),a={geometry:c,outFields:["*"],where:s,returnGeometry:!0},i.updateQueryParams(a,this.id)}}return Promise.resolve(!0)}}))}}var IT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class ET extends cT{constructor(){super(...arguments),this.name="select data record action"}filterMessageType(e,t){return e==tT.DataRecordsSelectionChange||e==tT.SelectDataRecord}filterMessage(e){return!0}getSettingComponentUri(e,t){return"select-data-record-action"}onExecute(e,t){return IT(this,void 0,void 0,(function*(){switch(e.type){case tT.DataRecordsSelectionChange:let n=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId)return;if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const r=_g.getInstance(),o=r.getDataSource(t.messageUseDataSource.mainDataSourceId);let i=!1,a=r.getDataSource(t.actionUseDataSource.mainDataSourceId);if(a||(yield r.createDataSourceByUseDataSource(t.actionUseDataSource),a=r.getDataSource(t.actionUseDataSource.mainDataSourceId)),0===e.records.length)return a&&a.selectRecordsByIds([]),yield Promise.resolve(!0);if(o&&a){if(t.enabledDataRelationShip){let r=null,s=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=o.getSchema(),t=e&&e.fields&&Object.keys(e.fields).find(t=>"esriFieldTypeOID"===e.fields[t].esriType);r=e&&e.fields&&e.fields[t],s=r}else{const e=t.messageUseDataSource.fields[0],n=t.actionUseDataSource.fields[0];r=o.getSchema().fields[e],s=a.getSchema().fields[n]}let u="";if(r&&s){const t=r.name,n=r.type,o=s.type,a=e,c=[];for(let e=0;e<a.records.length;e++){const n=a.records[e].getData()[t];if(!c.includes(""+bT(n,o))){const n=bT(a.records[e].getData()[t],o);null!==n&&c.push(""+n)}}n!==da.Number&&o===da.Number&&0==c.length&&(i=!0),u=s.name+" IN ",c.length>0?u+=`(${c.join(", ")})`:u=""}if(e.records.length>0){const e=t.sqlExprObj?Eb(t.sqlExprObj,a).sql:null;e&&(u=u?u+" AND "+e:e)}else u="";n={outFields:["*"],where:u,returnGeometry:!0}}else{let r="";if(e.records.length>0){const e=t.sqlExprObj?Eb(t.sqlExprObj,a).sql:null;e&&(r=e)}else r="";n={outFields:["*"],where:r,returnGeometry:!0}}if(i)return void a.clearSelection();a.query(n).then(e=>{const t=e&&e.records;if(t&&t.length>0){const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r.getId())}setTimeout(()=>{a.selectRecordsByIds(e,t)},200)}else a.clearSelection()})}}return Promise.resolve(!0)}}))}}class OT{constructor(){this.id="jimu-core-ds-factory"}getFactoryUri(e){if(Object.keys(Aa.c).map(e=>Aa.c[e]).includes(e))return"jimu-core/data-source"}}var TT=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const CT=["en","ar","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw"],AT=gg(be(window.initStoreState));function xT(){return TT(this,void 0,void 0,(function*(){const e=ye.parse(window.location.search);return AT.dispatch(Xg(e)),function(){const e=lv.getInstance();Object(ov.e)({fetch:function(t,n){const r=Object.assign({},n);let o;const i=e.getMainPortal();return i.isWebTier&&_p(t,i.portalUrl)?(r.credentials="include",o=Promise.resolve()):o=e.isTrustedServer(t)?e.getSessionFromTrustedServer(t).then(e=>{e&&e.token&&(t=Jh(t,"token",e.token))}):Promise.resolve(),o.then(()=>TT(this,void 0,void 0,(function*(){return yield fetch(t,r).then(e=>e)})))}})}(),AT.subscribe(()=>{window._appState=mg().getState()}),window.addEventListener&&(window.addEventListener("online",()=>AT.dispatch(jm(!1))),window.addEventListener("offline",()=>AT.dispatch(jm(!0))),window.addEventListener("resize",wO(_T,100)),_T()),window.runtimeInfo={widgets:{}},Promise.allSettled||(Promise.allSettled=function(e){return TT(this,void 0,void 0,(function*(){const t=e.map(e=>TT(this,void 0,void 0,(function*(){return yield e.then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e}))})));return Promise.all(t)}))}),WI.getInstance(),function(){return TT(this,void 0,void 0,(function*(){return window.jimuConfig.isInBuilder?yield vp("jimu-layouts/layout-builder").then(()=>TT(this,void 0,void 0,(function*(){return yield vp("jimu-for-builder",["appBuilderSync","loadI18nMessage"]).then(e=>TT(this,void 0,void 0,(function*(){const t=e.appBuilderSync;t.listenBuilderEvents(),t.publishAppIsLoadedToBuilder();const n=wO(t.publishAppStateChangeToBuilder,200);return vg((e,t)=>{e&&t&&n()}),Promise.resolve()})))}))):Promise.resolve()}))}().then(RT).then(()=>{!function(){TT(this,void 0,void 0,(function*(){const{appId:e}=Rh();return!window.jimuConfig.isInBuilder&&e?yield vv(e).then(e=>(mg().dispatch(Ug(e)),e)):Promise.resolve({})}))}()}).then(PT).then(t=>TT(this,void 0,void 0,(function*(){var n;const r=null===(n=function(e,t){return e.locale||t||If(window.navigator)}(e,t))||void 0===n?void 0:n.toLowerCase(),o=Ef(r,CT)||"en";return function(e){if(window.locale=e,"undefined"==typeof document)return;const t=document.getElementsByTagName("html")[0];t.setAttribute("lang",e),Cf(e)?(t.setAttribute("dir","rtl"),t.className+=" esriRtl jimu-rtl",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:"")):(t.setAttribute("dir","ltr"),t.className+=" esriLtr jimu-ltr",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:""))}(r),function(e,t){const n={isInPortal:window.jimuConfig.isInPortal,isInBuilder:window.jimuConfig.isInBuilder,isBuilder:window.jimuConfig.isBuilder,isSite:window.jimuConfig.isSite,locale:e,translatedLocale:t,isRTL:Cf(e),isTouchDevice:kf(),jimuConfig:window.jimuConfig};AT.dispatch(Jg(n))}(r,o),AT.dispatch(jm(!(window.navigator&&window.navigator.onLine))),function(e){const{appId:t,pageId:n}=Rh();t?AT.dispatch(Fg(t)):e.config&&AT.dispatch(Fg(e.config));AT.dispatch(Fm({appMode:ha.Run,currentPageId:n,currentDialogId:e.dlg,activePagePart:Ia.Body}))}(e),function(e){const t=xh(e);Object.keys(t).forEach(e=>{const n=t[e];"index"===n.selectionType?mg().dispatch(Em(e,n.selection)):"id"===n.selectionType&&mg().dispatch(Om(e,n.selection)),n.query&&mg().dispatch(lm(e,"_filterInUrl",n.query)),n.gdbVersion&&mg().dispatch(am(e,n.gdbVersion))})}(e),yield function(e){return TT(this,void 0,void 0,(function*(){return"en"===e?yield Promise.resolve(sy):(e=wf(e,CT))?yield Tf("jimu-core/lib/translations",e).then(e=>e):Promise.resolve(sy)}))}(o).then(e=>(e&&AT.dispatch(Yg("jimu-core",e)),function(e){KI.getInstance().registerAction({id:"export-json",name:"exportAll",label:DT({id:"dataAction_ExportJson",defaultMessage:sy.dataAction_ExportJson},e),ActionClass:gE}).catch(e=>console.error(e)),KI.getInstance().registerAction({id:"export-csv",name:"exportAll",label:DT({id:"dataAction_ExportCSV",defaultMessage:sy.dataAction_ExportCSV},e),ActionClass:SE}).catch(e=>console.error(e)),KI.getInstance().registerAction({id:"export-geojson",name:"exportAll",label:DT({id:"dataAction_ExportGeoJson",defaultMessage:sy.dataAction_ExportGeoJson},e),ActionClass:PE}).catch(e=>console.error(e)),KI.getInstance().registerAction({id:"export-selected-json",name:"exportSelected",label:DT({id:"dataAction_ExportJson",defaultMessage:sy.dataAction_ExportJson},e),ActionClass:yT}).catch(e=>console.error(e)),KI.getInstance().registerAction({id:"export-selected-csv",name:"exportSelected",label:DT({id:"dataAction_ExportCSV",defaultMessage:sy.dataAction_ExportCSV},e),ActionClass:hT}).catch(e=>console.error(e)),KI.getInstance().registerAction({id:"export-selected-geojson",name:"exportSelected",label:DT({id:"dataAction_ExportGeoJson",defaultMessage:sy.dataAction_ExportGeoJson},e),ActionClass:mT}).catch(e=>console.error(e))}(e),function(e){JI.getInstance().registerAction({id:"filter-data-record-action",label:DT({id:"messageAction_FilterDataRecord",defaultMessage:sy.messageAction_FilterDataRecord},e),ActionClass:wT}).catch(e=>console.error(e)),JI.getInstance().registerAction({id:"select-data-record-action",label:DT({id:"messageAction_SelectDataRecord",defaultMessage:sy.messageAction_SelectDataRecord},e),ActionClass:ET}).catch(e=>console.error(e))}(e),xp.getInstance().registerExtension({epName:hp.DataSourceFactoryUri,extension:new OT}),window.jimuConfig.isInBuilder?(mg().dispatch(Qg(ha.Design)),mp("jimu-for-builder").loadI18nMessage()):Promise.resolve()))})))}))}function PT(){return TT(this,void 0,void 0,(function*(){return AT.getState().user?(op(Cc)!==AT.getState().user.culture&&ip(Cc,AT.getState().user.culture),yield Promise.resolve(AT.getState().user.culture)):lv.getInstance().getMainSession()?op(Cc)?(lv.getInstance().getUserInfo(),yield Promise.resolve(op(Cc))):yield lv.getInstance().getUserInfo().then(e=>e.culture):null}))}function DT(e,t){return t&&t[e.id]?t[e.id]:e.defaultMessage}function RT(){return TT(this,void 0,void 0,(function*(){return yield function(){return TT(this,void 0,void 0,(function*(){let e;if(window.jimuConfig.isInPortal)return e=Dp(),yield Promise.resolve({portalUrl:e,clientId:"experienceBuilder"});if(window.jimuConfig.isOutOfExb)return yield Promise.resolve(null);const t=window.jimuConfig.hostEnv||"dev",n=`${Nh()}builder/setting.json?env=${window.jimuConfig.isDevEdition?"dev":"online"}`;return yield window.fetch(n).then(e=>TT(this,void 0,void 0,(function*(){return yield e.json()}))).then(e=>{const n=(window.jimuConfig.isDevEdition?e.devEnv:e.env)[t];return n&&(n.portalUrl=zp(n.portalUrl)),n},e=>TT(this,void 0,void 0,(function*(){return console.error("Get setting.json error.",e),yield Promise.resolve(null)})))}))}().then(e=>TT(this,void 0,void 0,(function*(){return e?window.jimuConfig.isInBuilder?yield Promise.resolve(null):(mg().dispatch(Im(e.portalUrl,e.clientId)),yield lv.getInstance().initSession(e)):(console.warn("No portal info."),yield Promise.resolve(null))})))}))}function jT(e){return TT(this,void 0,void 0,(function*(){return yield Promise.all(mh(e.appConfig).map(e=>TT(this,void 0,void 0,(function*(){return e.manifest.properties.hasMainClass?yield eE.getInstance().loadWidgetClass(e.id):yield Promise.resolve({})})))).then(()=>TT(this,void 0,void 0,(function*(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",yield vp(e)}))).then(()=>TT(this,void 0,void 0,(function*(){return yield vp("jimu-ui")}))).then(()=>TT(this,void 0,void 0,(function*(){return yield Sv.getInstance().loadTheme(e.appConfig.theme)})))}))}function _T(){if("undefined"==typeof document)return;const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=Mf({width:e,height:t});mg().getState().browserSizeMode!==n&&mg().dispatch(xm(n));const r=.01*t,o=.01*e;document.documentElement.style.setProperty("--vh",r+"px"),document.documentElement.style.setProperty("--vw",o+"px")}function kT(e){return e.error?E.createElement("div",null,"Error! ",E.createElement("button",{onClick:e.retry},"Retry")):e.pastDelay?E.createElement("div",null,"Loading..."):null}var MT,NT,LT,UT,FT,$T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function VT(e){e(Nm(null))}function BT(e){return`${Hf()}-${e}`}function GT(){return $T(this,void 0,void 0,(function*(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",yield vp(e,["LayoutEntry"])}))}!function(e){e.ScrollIntoView="SCROLL_IN",e.Manual="MANUAL"}(MT||(MT={})),function(e){e.None="NONE",e.Pulse="PULSE",e.RubberBand="RUBBER_BAND",e.FadeIn="FADE_IN",e.FadeOut="FADE_OUT",e.FlyIn="FLY_IN",e.ZoomIn="ZOOM_IN",e.WipeIn="WIPE_IN",e.SpinIn="SPIN_IN",e.FloatIn="FLOAT_IN"}(NT||(NT={})),function(e){e.Default="DEFAULT",e.Gentle="GENTLE",e.Wobbly="WOBBLY",e.Stiff="STIFF",e.Slow="SLOW",e.Molasses="MOLASSES"}(LT||(LT={})),function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Left="LEFT",e.Right="RIGHT"}(UT||(UT={})),function(e){e.AsOne="AS_ONE",e.OneByOne="ONE_BY_ONE"}(FT||(FT={}));const WT={offsetX:0,offsetY:0,rotateX:0,rotateY:0,rotateZ:0,clipLeft:0,clipRight:0,clipTop:0,clipBottom:0,scaleX:1,scaleY:1,opacity:1,zIndex:0};class qT{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},WT,e)}getConfigType(){var e,t;return(null!==(t=null===(e=this.option)||void 0===e?void 0:e.configType)&&void 0!==t?t:LT.Default).toLowerCase()}transform(e,t,n){return zT(e,t,n)}clippath(e){return HT(e)}propsOnXY(e,t){return null}hasMoveEffect(){return!1}}function zT(e,t,n){if(null!=(null==e?void 0:e.offsetX)){const{offsetX:r,offsetY:o,rotateX:i,rotateY:a,rotateZ:s,scaleX:u,scaleY:c}=e;return ao([r,o,i,a,s,u,c],(e,r,o,i,a,s,u)=>{const c=Math.max(o,i,a);if(0===e&&0===r&&0===o&&0===i&&0===a&&1===s&&1===u)return null;return`translate3d(calc(${t} + ${e}px), calc(${n} + ${r}px), 0)\n        rotate3d(${0!==c?o/c:0}, ${0!==c?i/c:0}, ${0!==c?a/c:0}, ${c}deg)\n        scale(${s}, ${u})`})}return null}function HT(e){if(null==e?void 0:e.clipTop){const{clipTop:t,clipBottom:n,clipLeft:r,clipRight:o}=e;return ao([t,n,r,o],(e,t,n,r)=>0!==e||0!==t||0!==n||0!==r?`inset(${e}% ${r}% ${t}% ${n}%)`:null)}return null}class JT extends qT{constructor(e){super(NT.FadeIn,e)}initProps(){return this.generateProps({opacity:0,immediate:!0})}animateProps(){return{from:this.generateProps({opacity:0}),to:this.generateProps({opacity:1}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,immediate:!0,reset:!1})}}class YT extends qT{constructor(e){super(NT.FadeOut,e)}initProps(){return this.generateProps({opacity:1,immediate:!0})}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:0}),immediate:!0,reset:!0,config:void 0}}endProps(){return this.generateProps({opacity:0,immediate:!0,reset:!1})}}class XT extends qT{constructor(e){var t;super(NT.FlyIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||UT.Top}from(){switch(this.direction){case UT.Bottom:return{offsetX:0,offsetY:window.innerHeight};case UT.Left:return{offsetX:-window.innerWidth,offsetY:0};case UT.Right:return{offsetX:window.innerWidth,offsetY:0};default:return{offsetX:0,offsetY:-window.innerHeight}}}initProps(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})}}class KT extends qT{constructor(e){super(NT.ZoomIn,e)}initProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:0,transformOrigin:"center",immediate:!0})}animateProps(){return{from:this.generateProps({scaleX:0,scaleY:0,opacity:0}),to:this.generateProps({scaleX:1,scaleY:1,opacity:1}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:1,immediate:!0,reset:!1})}}class QT extends qT{constructor(e){var t;super(NT.WipeIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||UT.Top}getClipProp(){switch(this.direction){case UT.Bottom:return"clipTop";case UT.Left:return"clipRight";case UT.Right:return"clipLeft";default:return"clipBottom"}}initProps(){return this.generateProps({[this.getClipProp()]:100,opacity:0,transformOrigin:"center",immediate:!0})}animateProps(){return{from:this.generateProps({[this.getClipProp()]:100,opacity:0}),to:this.generateProps({[this.getClipProp()]:0,opacity:1}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({[this.getClipProp()]:0,opacity:1,immediate:!0,reset:!1})}}class ZT extends qT{constructor(e){super(NT.SpinIn,e)}initProps(){return this.generateProps({rotateZ:0,opacity:0,immediate:!0})}animateProps(){return{from:this.generateProps({rotateZ:720,opacity:0}),to:this.generateProps({rotateZ:0,opacity:1}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({rotateZ:0,opacity:1,immediate:!0,reset:!1})}}class eC extends qT{constructor(e){var t;super(NT.FloatIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||UT.Top}from(){switch(this.direction){case UT.Bottom:return{offsetX:0,offsetY:100};case UT.Left:return{offsetX:-100,offsetY:0};case UT.Right:return{offsetX:100,offsetY:0};default:return{offsetX:0,offsetY:-100}}}initProps(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:so[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})}}function tC(e,t){switch(e){case NT.FadeIn:return new JT(t);case NT.FadeOut:return new YT(t);case NT.FlyIn:return new XT(t);case NT.ZoomIn:return new KT(t);case NT.WipeIn:return new QT(t);case NT.SpinIn:return new ZT(t);case NT.FloatIn:return new eC(t);default:return null}}function nC(e){if(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(t.top<n){const n=e.parentElement.getBoundingClientRect();return t.top<n.bottom}}return!1}function rC(){const e=[0];for(let t=1;t<=100;t++)e.push(t/100);return e}function oC(e,t,n){const r=E.useRef(),[o,i]=E.useState(),a=E.useRef(Number.NEGATIVE_INFINITY),s=E.useRef(0);return E.useEffect(()=>{const o=e=>{s.current=e.intersectionRatio,a.current=e.boundingClientRect.top};if(t&&e&&"function"==typeof IntersectionObserver){const t=new IntersectionObserver(e=>{(e=>{const t=e.boundingClientRect,n=e.intersectionRect;if(!e.target.classList.contains("playing-animation")){if(function(e,t){return e>t.boundingClientRect.top}(a.current,e)&&function(e,t){return e<t.intersectionRatio}(s.current,e)){if(e.intersectionRatio>=.95||n.height>300)return o(e),void i(!0);if(t.top+1<n.top)return o(e),void i(!0)}if(function(e,t){return e<t.boundingClientRect.top}(a.current,e)&&function(e,t){return e>t.intersectionRatio}(s.current,e)&&e.intersectionRatio<=.05)return o(e),void i(!1);o(e)}})(e[0])},{threshold:rC(),root:n||document.body});return t.observe(e),r.current=t,()=>{r.current.disconnect(),r.current=null}}r.current&&(r.current.disconnect(),r.current=null)},[e,t,n]),o}const iC=E.createContext({trigger:"",delay:0,setting:null,inheritedOneByOneSetting:null,playId:null,revert:!1,depth:0});function aC(e){var t;const{ref:n,enable:r,isParentPlaying:o,parentAnimationStyle:i}=e,[a,s]=E.useState(!1),u=E.useRef(),c=E.useRef(),l=E.useContext(iC),{inheritedOneByOneSetting:d,depth:f}=l||{},{type:p,option:h}=d||{},g=E.useMemo(()=>tC(p,h),[p,h]),m=E.useMemo(()=>new YT,[]),v=me(e=>{var t;return null===g||(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===ha.Design}),y=E.useMemo(()=>r&&!o&&p&&p!==NT.None&&n.current&&!v,[r,o,p,n,v]),b=oC(n.current,y,1===f?null:null===(t=n.current)||void 0===t?void 0:t.parentElement),[S,w,I]=go(()=>({})),O=()=>{g&&(I(),w(m.animateProps()),s(!0))};return E.useEffect(()=>{o&&s(!1)},[o]),E.useEffect(()=>{g&&(!c.current&&y?!function(e,t){const n=null==t?void 0:t.parentElement;if(!n)return!0;const r=t.getBoundingClientRect(),o=1===e?{top:0,height:window.innerHeight}:n.getBoundingClientRect();return r.top<o.top+o.height}(f,n.current)?O():u.current=!0:y&&u.current!==b&&(u.current=b,b?g&&(I(),w(g.animateProps()),s(!0)):null==b||b||O()),c.current=y)}),[o||!a?i:S,g]}var sC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const uC=/translateX\(([^)]*)\)/,cC=/translateY\(([^)]*)\)/,lC=/translate\(([^),]*),\s*([^),]*)\)/;const dC=E.forwardRef((e,t)=>{const{type:n,trigger:r="",revert:o,configType:i,direction:a,playId:s,children:u,style:c,onAnimationStart:l,onAnimationEnd:d,parentAnimationStyle:f,isParentEnableScroll:p=!1,isParentPlaying:h,isParentRevert:g,parentPlayId:m}=e,v=sC(e,["type","trigger","revert","configType","direction","playId","children","style","onAnimationStart","onAnimationEnd","parentAnimationStyle","isParentEnableScroll","isParentPlaying","isParentRevert","parentPlayId"]),y=E.useRef(),b=t||y,[S,w]=function(e){const{type:t,ref:n,trigger:r="",revert:o,configType:i,direction:a,playId:s,isParentPlaying:u,isParentRevert:c,parentPlayId:l,onAnimationStart:d,onAnimationEnd:f}=e,p=E.useRef(),h=E.useRef(),g=E.useRef(!1),m=E.useRef(!1),v=E.useRef(),y=E.useRef(),b=E.useRef(),S=E.useMemo(()=>r.includes(MT.ScrollIntoView),[r]),w=E.useMemo(()=>r.includes(MT.Manual),[r]),I=E.useMemo(()=>new YT,[]),O=E.useMemo(()=>tC(t,{configType:i,direction:a}),[t,i,a]),T=oC(n.current,S&&null!=O),[C,A,x]=go(()=>WT),P=(e=!1)=>{var t,r;O&&(g.current&&!e||(x(),"function"==typeof d&&d(),g.current=!0,null===(r=null===(t=n.current)||void 0===t?void 0:t.classList)||void 0===r||r.add("playing-animation"),h.current=Date.now(),A(Object.assign(Object.assign({},O.animateProps()),{onRest:()=>{var e,t;g.current=!1,null===(t=null===(e=n.current)||void 0===e?void 0:e.classList)||void 0===t||t.remove("playing-animation"),"function"==typeof f&&f()}}))))},D=(e=!1)=>{O&&(g.current&&!e&&Date.now()-h.current<50||(x(),g.current=!0,A(Object.assign(Object.assign({},I.animateProps()),{onRest:()=>{g.current=!1,"function"==typeof f&&w&&f()}}))))};return E.useEffect(()=>{O&&(!b.current&&S?nC(n.current)?y.current=!0:D():S&&y.current!==T&&(y.current=T,T?P():null==T||T||D()),b.current=S)}),E.useEffect(()=>{O&&s&&s!==p.current&&w&&(p.current=s,o?D(!0):P(!0))}),E.useEffect(()=>{u&&!g.current&&(m.current!==u||l&&v.current!==l)&&(c?D(!0):P(!0)),m.current=u,v.current=l}),[C,O]}({type:n,ref:t,trigger:r,revert:o,configType:i,direction:a,playId:s,isParentPlaying:h,isParentRevert:g,parentPlayId:m,onAnimationStart:l,onAnimationEnd:d}),[I,O]=aC({enable:null==w&&p,parentAnimationStyle:f,isParentPlaying:h,ref:t});let T,C,A,x="string"==typeof c?JSON.parse(c):c;if(w&&S?(T=S,C=w.transform,A=w.clippath):p&&O?(T=I,C=null==O?void 0:O.transform,A=null==O?void 0:O.clippath):f&&(T=f,C=zT,A=HT),T){let e;b.current&&(e=getComputedStyle(b.current).getPropertyValue("transform"));const[t,n]=function(e){let t="0px",n="0px";if(e){if(e.includes("matrix(")){const r=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");return t=parseInt(r[4],10)+"px",n=parseInt(r[5],10)+"px",[t,n]}const r=e.match(uC),o=e.match(cC),i=e.match(lC);i?(t=i[1],n=i[2]):(r&&(t=r[1]),o&&(n=o[1]))}return[t,n]}(e),{offsetX:r,offsetY:o,rotateX:i,rotateY:a,rotateZ:s,scaleX:u,scaleY:c,clipLeft:l,clipRight:d,clipTop:f,clipBottom:p}=T,h=sC(T,["offsetX","offsetY","rotateX","rotateY","rotateZ","scaleX","scaleY","clipLeft","clipRight","clipTop","clipBottom"]);x=Object.assign({},x,h),x.transform=C(T,t,n),x.clipPath=A(T)}return E.createElement(Ko.div,Object.assign({style:x,ref:b},v),u)});var fC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const pC=new YT;function hC(e){var t,n;const{children:r,style:o,enableScroll:i=!1}=e,a=fC(e,["children","style","enableScroll"]),s=E.useRef(),u=E.useRef(),c=E.useRef(),l=E.useRef(),d=E.useContext(iC),[f,p]=E.useState(),{trigger:h="",delay:g=0,setting:m,playId:v,revert:y,onAnimationStart:b,onAnimationEnd:S}=d||{},w=null==m?void 0:m.type,I=null===(t=null==m?void 0:m.option)||void 0===t?void 0:t.configType,O=null===(n=null==m?void 0:m.option)||void 0===n?void 0:n.direction,T=E.useMemo(()=>tC(w,{configType:I,direction:O}),[w,I,O]),C=E.Children.count(e.children),A=h.includes(MT.ScrollIntoView),x=h.includes(MT.Manual),P=oC(c.current,A&&null!=T),[D,R,j]=mo(E.Children.count(e.children),()=>WT),_=E.useCallback(()=>{if(!T)return;j(),p(!0);let e=0;"function"==typeof b&&b(),R(Object.assign(Object.assign({},T.animateProps()),{delay:g,onRest:()=>{e+=1,e===C&&("function"==typeof S&&S(),p(!1))}}))},[g,T,S,b,C,R,j]),k=E.useCallback(()=>{if(!T)return;j(),p(!0);let e=0;R(Object.assign(Object.assign({},pC.animateProps()),{onRest:()=>{e+=1,e===C&&(p(!1),"function"==typeof S&&S())}}))},[T,C,S,R,j]);E.useEffect(()=>{T&&(!l.current&&A?nC(c.current)||k():A&&u.current!==P&&(u.current=P,P?_():null==P||P||k()),l.current=A)}),E.useEffect(()=>{T&&v&&v!==s.current&&x&&(s.current=v,y?k():_())});const M="string"==typeof o?JSON.parse(o):Object.assign({},o);return E.createElement("div",Object.assign({style:M,ref:c},a),e.children&&E.Children.map(e.children,(e,t)=>e?E.cloneElement(e,{isPlaying:f,revert:y,playId:v,enableScroll:i,animationStyle:null!=T?D[t]:null}):null))}function gC(e,t){return t.toFixed("px"===e?0:1)+e}function mC(e){return"object"==typeof e?`${e.distance}${e.unit}`:e}function vC(e){let t="unset";if(e&&e.image){switch(e.fillType){case"fit":t="contain";break;case"fill":t="cover";break;case"stretch":t="100% 100%";break;default:t="auto"}return t}return t}function yC(e){var t;const{dialogBackground:n,border:r,borderRadius:o,boxShadow:i}=e;let a="unset",s="unset";if(o){const e=o.number[0],t=void 0!==o.number[1]?o.number[1]:e,n=void 0!==o.number[2]?o.number[2]:e,r=void 0!==o.number[3]?o.number[3]:e;a=`${e}${o.unit} ${t}${o.unit}`,s=`${n}${o.unit} ${r}${o.unit}`}return{backgroundColor:n&&n.color?n.color:"transparent",backgroundImage:(null===(t=null==n?void 0:n.image)||void 0===t?void 0:t.url)?`url(${n.image.url})`:"unset",backgroundRepeat:n&&n.image&&"tile"===n.fillType?"repeat":"no-repeat",backgroundSize:vC(n),borderStyle:r&&r.color&&r.width?`${mC(r.width)} ${r.type} ${r.color}`:"none",borderRadiusTopStyle:a,borderRadiusBottomStyle:s,borderRadiusStyle:o?`${a} ${s}`:"unset",boxShadowStyle:i&&i.color?`${mC(i.offsetX)} ${mC(i.offsetY)}\n      ${mC(i.blur)} ${mC(i.spread)} ${i.color}`:"none"}}function bC(e,t,n,r){var o,i,a,s,u;const{borderRadius:c,interactionType:l}=e,d=yC(e),f=e.overlayColor||(e.isOpenerDlg?"var(--dark-900)":"transparent"),p="app-dialog-wrap-"+e.id,h=l===oh.ButtonBlock?91:l===oh.ButtonInline?64:59,g=l?`calc(100% - ${h}px)`:"100%";let m="0";if(null===(o=e.boxShadow)||void 0===o?void 0:o.color){const t=(parseFloat(null===(i=e.boxShadow.blur)||void 0===i?void 0:i.split("px")[0])||0)+(parseFloat(null===(a=e.boxShadow.spread)||void 0===a?void 0:a.split("px")[0])||0),n=parseFloat(null===(s=e.boxShadow.offsetX)||void 0===s?void 0:s.split("px")[0])||0,r=parseFloat(null===(u=e.boxShadow.offsetY)||void 0===u?void 0:u.split("px")[0])||0;m=`${t-r>0?t-r:0}px ${t+n}px ${t+r}px ${t-n>0?t-n:0}px`}let v="100%",y="unset";if(r.position===rh.Center){v="%"===(r.height.includes("%")?"%":"px")?n*parseFloat(r.height.split("%")[0])/100+"px":r.height,y=`calc(50% - ${parseFloat(v.split("px")[0])/2+"px"})`}const b=c&&l?d.borderRadiusTopStyle+" 0 0":d.borderRadiusStyle,S=c?"0 0 "+d.borderRadiusBottomStyle:"unset";return dn`
    body {

      @keyframes aBlink {
        from { background-color: var(--danger-700); }
        50% { background-color: var(--danger-700); }
        51%{background-color: transparent;}
        to { background-color: transparent; }
      }

      .app-dialog-wrap{

        &.${p}{
          display: ${t?"inherit":"none"};
          .app-dialog{
            margin: 0!important;
            max-width: 100vw;
            max-height: 100vh;

            .app-dialog-content{
              padding: ${m}; /* decided by shadow*/
              overflow-y: auto;

              border: none;
              box-shadow: unset;
              background-color: transparent;
              border-radius:  ${d.borderRadiusStyle};

              &.overflow-visible{
                overflow: visible;
              }

              .app-dialog-animation-content{
                flex-shrink: 0;
                /* height: ${v} !important; */
                height: ${v};

                border: ${d.borderStyle};
                border-radius:  ${d.borderRadiusStyle};
                box-shadow: ${d.boxShadowStyle};
                background-color: ${d.backgroundColor};
                background-image: ${d.backgroundImage};
                background-position: center center;
                background-repeat: ${d.backgroundRepeat};
                background-size: ${d.backgroundSize};

                .dialog-content{
                  padding: 0;
                  height: ${g};
                  border-radius:  ${b};
                }

                .dialog-footer{
                  overflow-x: auto;
                  border-radius:  ${S};

                  .cbx-animation{
                    width: 16px;
                    height: 16px;
                    border: 2px solid var(--light-600);
                    animation: aBlink 500ms infinite;
                  }
                  .btn {
                    min-width: 6.25rem;
                  }
                }
              }

              .app-dialog-resize-container{
                touch-action: none;
                .app-dialog-resize-handlers{
                  &.resize-center{
                    top: ${y};
                    .dialog-resize-bottom{
                      top: calc(${v} - ${"12px"});
                    }
                    .dialog-resize-left, .dialog-resize-right{
                      height: ${v};
                    }
                  }
                }
              }

            }
          }
          .app-dialog-backdrop{
            background-color: ${f};
          }
        }
      }
    }
  `}function SC(e){let t;const n=e.width.includes("%")?"100%":e.width;switch(e.position){case rh.Left:t=dn`
        &.app-dialog{
          margin: 0px;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${n};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case rh.Right:t=dn`
        &.app-dialog{
          margin: 0px;
          float: right;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${n};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case rh.Top:t=dn`
        &.app-dialog{
          margin: 0px;
          height: 100%;
        }
        .app-dialog-content{
          width: 100vw;
          height: ${e.height};

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
            .app-dialog-resize-handlers{
              .dialog-resize-bottom{
                bottom: calc(100vh - ${e.height});
              }
            }
          }
        }
      `;break;case rh.Bottom:t=dn`
        &.app-dialog{
          position: absolute;
          bottom: 0px;
          margin: 0px;
          height: ${e.height};
        }
        .app-dialog-content{
          width: 100vw;
          height: 100%;

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
          }
        }
      `;break;case rh.Center:t=dn`
        &.app-dialog::before{
          height: 100vh;
        }
        .app-dialog-content{
          width: ${e.width};
          max-height: 100vh;
          margin: 0 auto;

          .app-dialog-resize-container{
            .app-dialog-resize-handlers{
              position: fixed;
              width: ${e.width}; /* Do not add height since it could be a mask */

              .resize-handler{
                position: absolute;
                &.dialog-resize-bottom{
                  width: ${n};
                }
                &.dialog-resize-top{
                  width: ${n};
                  top: 0;
                }
                &.dialog-resize-left{
                  left: 0;
                }
                &.dialog-resize-right{
                  left: calc(100% - ${"12px"});
                }
              }
            }
          }
        }
      `}return t}function wC(e,t){var n,r,o,i,a,s,u,c;const l=yC(e),d="transparent"===l.backgroundColor?"var(--light)":l.backgroundColor;let f=0,p=0,h="0 auto";if(null===(n=e.boxShadow)||void 0===n?void 0:n.color){const t=(parseFloat(null===(r=e.boxShadow.blur)||void 0===r?void 0:r.split("px")[0])||0)+(parseFloat(null===(o=e.boxShadow.spread)||void 0===o?void 0:o.split("px")[0])||0),n=parseFloat(null===(i=e.boxShadow.offsetX)||void 0===i?void 0:i.split("px")[0])||0,s=parseFloat(null===(a=e.boxShadow.offsetX)||void 0===a?void 0:a.split("px")[0])||0;h=`${t-s>0?t-s:0}px ${t+n}px ${t+s}px ${t-n>0?t-n:0}px`,f=f+t+n,p=p+t+s}const g=`calc(${t.width} - ${f}px)`,m=`calc(${t.height} - ${p}px)`;let v=null,y=null;e.border&&e.border.width&&e.border.color&&(v=e.border.color,y=e.border.width);return dn`
    &.app-dialog{
      /* margin: 0.5rem !important; */
      margin: 0 !important;
      border-radius:  ${l.borderRadiusStyle};
      background-color: transparent;
      border: none;
      box-shadow: unset;

      &.dialog-animation-playing{
        .jimu-popper--arrow{
          visibility: hidden !important;
        }

        .popper-box{
          overflow: visible !important; /*for animation is playing*/

          .app-dialog-container{
            box-shadow: ${(null===(s=e.boxShadow)||void 0===s?void 0:s.color)?l.boxShadowStyle:"0 0 10px 1px var(--light-600)"};
          }
        }
      }
      &.dialog-animation-end{

        &[data-popper-placement^="top"] .jimu-popper--arrow{
          &::before{
            border-top-color: ${v};
          }
          &::after{
            border-top-color: ${d};
            bottom: ${y};
          }
        }

        &[data-popper-placement^="bottom"] .jimu-popper--arrow{
          &::before{
            border-bottom-color: ${v};
          }
          &::after{
            border-bottom-color: ${d};
            top: ${y};
          }
        }

        &[data-popper-placement^="left"] .jimu-popper--arrow{
          &::before{
            border-left-color: ${v};
          }
          &::after{
            border-left-color: ${d};
            right: ${y};
          }
        }

        &[data-popper-placement^="right"] .jimu-popper--arrow{
          &::before{
            border-right-color: ${v};
          }
          &::after{
            border-right-color: ${d};
            left: ${y};
          }
        }

        &[data-popper-placement^="left"],
        &[data-popper-placement^="right"],
        &[data-popper-placement^="top"],
        &[data-popper-placement^="bottom"]{
          .popper-box{
            box-shadow: ${(null===(u=e.boxShadow)||void 0===u?void 0:u.color)?"unset":"0 0 10px 1px var(--light-600)"};
          }
        }
      }

      .popper-box{
        max-width: calc(100vw - ${"12px"});
        max-height: calc(100vh - ${"12px"});
        width: ${t.width};
        height: ${t.height};
        border-radius:  ${l.borderRadiusStyle};
      }

      .app-dialog-animation-content{
        height: 100%;

        .app-dialog-container{
          overflow-y: auto;
          margin: ${h};
          max-width: calc(100vw - ${"12px"} - ${f+"px"});
          max-height: calc(100vh - ${"12px"} - ${p+"px"});
          width: ${g};
          height: 100%;

          border: ${e.border&&e.border.width&&e.border.color?l.borderStyle:"none"};
          box-shadow: ${(null===(c=e.boxShadow)||void 0===c?void 0:c.color)?l.boxShadowStyle:"unset"};
          border-radius:  ${l.borderRadiusStyle};

          .app-dialog-content{
            width: 100%;
            height: ${m};
            border-radius:  ${l.borderRadiusStyle};
            background-color: ${d} ;
            background-image: ${l.backgroundImage};
            background-position: center center;
            background-repeat: ${l.backgroundRepeat};
            background-size: ${l.backgroundSize};
          }
        }
      }

    }
  `}const{useEffect:IC,useState:EC,useRef:OC}=E;var TC=function({dialogJson:e,isOpen:t,jimuUI:n,jimuLayout:r,loadingCallBack:o,messages:i,cbxAnimation:a,isChecked:s,setCbxState:u,closeDialog:c}){var l,d,f,p,h,g;const m=me(e=>e.appRuntimeInfo.currentPageId),v=me(e=>e.appRuntimeInfo.appMode===ha.Design),y=OC(!1),b=OC(!1),[S,w]=EC(v?null:Symbol("init one by one")),[I,O]=EC(v?null:Symbol("init as one")),T=me(t=>{var n;return(null===(n=t.appRuntimeInfo.animationPreview)||void 0===n?void 0:n.dialogId)===e.id?t.appRuntimeInfo.animationPreview:null},H),C=OC(),A=fe();function x(){var t;(null===(t=e.effect)||void 0===t?void 0:t.type)!==NT.None&&(b.current=!1,O(Symbol("play dialog "+e.id)))}function P(){var t;(null===(t=e.oneByOneEffect)||void 0===t?void 0:t.type)!==NT.None&&(y.current=!1,w(Symbol("play dialog widgets "+e.id)))}IC(()=>(v||(x(),P()),()=>{}),[v,e.id,m]),IC(()=>{T&&(T.playMode!==FT.AsOne&&P(),T.playMode!==FT.OneByOne&&x())},[T]);const D=E.useCallback(()=>{b.current?b.current=!1:o(!1)},[]);let R=null,j=null,_=null;const k=b.current?null:(b.current=!0,I);(null===(l=e.effect)||void 0===l?void 0:l.type)!==NT.None&&k&&(R=null===(d=e.effect)||void 0===d?void 0:d.type,j=null===(p=null===(f=e.effect)||void 0===f?void 0:f.option)||void 0===p?void 0:p.configType,_=null===(g=null===(h=e.effect)||void 0===h?void 0:h.option)||void 0===g?void 0:g.direction);const{ModalBody:M,ModalFooter:N}=n,{LayoutEntry:L}=r;return cn(iC.Provider,{value:{trigger:MT.Manual,setting:!t||v&&!(null==T?void 0:T.id)?null:e.oneByOneEffect,inheritedOneByOneSetting:null,playId:y.current?null:(y.current=!0,S),depth:0}},cn(dC,{type:R,trigger:MT.Manual,configType:j,direction:_,playId:k,ref:C,style:{},onAnimationEnd:D,className:"app-dialog-animation-content"},e.mode===nh.Fixed&&cn(M,{className:"dialog-content"},cn(L,{layouts:e.layout,className:"w-100 h-100"})),e.mode===nh.Fixed&&e.interactionType&&cn(N,{onClick:()=>VT(A),className:we()("dialog-footer",{"d-block":e.interactionType===oh.ButtonBlock})},cn("div",{className:"d-flex flex-grow-1 overflow-hidden text-nowrap"},a?cn("div",{className:"cbx-animation"}):cn(n.Checkbox,{style:{cursor:"pointer"},onChange:e=>u(e.target.checked),checked:s,disabled:v}),cn("label",{className:"ml-2 text-break overflow-hidden",style:{fontSize:e.interactionStyles.textSize,textOverflow:"ellipsis",cursor:v?"inherit":"pointer"},onClick:()=>!v&&u(!s)},e.interactionStyles.text||i(e.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText"))),e.interactionType!==oh.NoButton&&cn("div",{className:"d-flex flex-row-reverse"},cn(n.Button,{icon:!0,type:"primary",disabled:v||e.interactionType&&e.confirmBeforeClose&&!s,onClick:e=>{c()},style:{fontSize:e.interactionStyles.buttonTextSize}},e.interactionStyles.buttonText||i("ok")))),e.mode===nh.Anchored&&cn("div",{className:"app-dialog-container"},cn("div",{className:"app-dialog-content"},cn(L,{layouts:e.layout,className:"w-100 h-100"})))))},CC=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},AC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const{useEffect:xC,useState:PC,useRef:DC}=E;const RC=()=>{const e=cI();return E.useCallback((t,n)=>e.formatMessage({id:t,defaultMessage:sy[t]},n),[e])};function jC(e,t,n,r,o,i,a,s){var u,c;let l=!1;if(s===t.id&&!t.isSplash&&!n.isOpenByPage&&!t.confirmBeforeClose)return l;if(t.isSplash||n.isOpenByPage){const s=t.isSplash?t.id:`${e}-${t.id}`;n.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose)?(l="true"===op(kC(s,r,o)),l&&_C(i,s,a),t.confirmBeforeClose||l||(l=null===(u=null==i?void 0:i[s])||void 0===u?void 0:u.isClosed)):l=null===(c=null==i?void 0:i[s])||void 0===c?void 0:c.isClosed}return l}function _C(e,t,n){var r;(null===(r=null==e?void 0:e[t])||void 0===r?void 0:r.isClosed)||n(Mm(e=(e||be({})).setIn([t,"isClosed"],!0)))}const kC=(e,t,n)=>`${BT(t)}-${e}-${n}`;function MC(){return CC(this,void 0,void 0,(function*(){return yield vp("jimu-ui",["Modal","ModalBody","ModalFooter","Checkbox","Button"])}))}var NC=function(e){var t,{dialogJson:n}=e,r=AC(e,["dialogJson"]);const[o,i]=PC(null),[a,s]=PC(null),[u,c]=PC(null),[l,d]=PC(null),f=me(e=>e.queryObject.draft)?"draft":"release",p=me(e=>e.appConfig.timestamp),h=me(e=>e.appRuntimeInfo.currentPageId),g=me(e=>e.appConfig.pages[h].autoOpenDialogId),m=me(e=>e.appRuntimeInfo.currentDialogId),v=me(e=>e.appRuntimeInfo.appMode===ha.Design),y=me(e=>{var t,n;return null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.lockLayout}),b=me(e=>e.browserSizeMode),S=me(e=>{var t,n,r;return null===(r=null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.viewPortSize)||void 0===r?void 0:r[b]})||yc[b][1],w=window.jimuConfig.isInBuilder?S.height:window.innerHeight,I=fe(),E=RC(),O=me(e=>e.queryObject.dlg),T=me(e=>e.appRuntimeInfo.dialogInfos),C=me(e=>{var t;return n.isSplash?n.id:e.appConfig.dialogs&&(null===(t=e.appConfig.dialogs[Object.keys(e.appConfig.dialogs).find(t=>e.appConfig.dialogs[t].isSplash)])||void 0===t?void 0:t.id)},H),[A,x]=PC(r.isOpenByPage&&m===C||n.id===O&&m!==O||m===n.id),P=r.isOpenByPage?h+"-"+n.id:n.id,[D,R]=PC(!(!T||!T[P])&&T[P].checked),[j,_]=PC(!0),k=n.sizeMode[b]||n.sizeMode[la.Large],M=k.position===rh.Center,N=DC(null),[L,U]=PC(null),[F,$]=PC(!0),[V,B]=PC(n.effect&&n.effect.type!==NT.None),[G,W]=PC(!1),q=e=>{var t;return null===(t=null==T?void 0:T[e])||void 0===t?void 0:t.isClosed},z=()=>v&&!y&&window.jimuConfig.isInBuilder;xC(()=>{if(z()&&u&&l){wO(()=>{if(L&&L.unset(),N.current){const e=n.sizeMode[b]?b:la.Large;U(function(e,t,n,r,o,i){let a,s,u,c;const l=n.sizeMode[r],d=l.position;let f;d===rh.Center?f={top:".dialog-resize-top",left:".dialog-resize-left",bottom:".dialog-resize-bottom",right:".dialog-resize-right"}:d===rh.Top?f={bottom:".dialog-resize-bottom"}:d===rh.Bottom?f={top:".dialog-resize-top"}:d===rh.Left?f={right:".dialog-resize-right"}:d===rh.Right&&(f={left:".dialog-resize-left"});const p=l.position!==rh.Top&&l.position!==rh.Bottom&&parseFloat(l.width.includes("%")?l.width.split("%")[0]:l.width.split("px")[0]),h=l.position!==rh.Left&&l.position!==rh.Right&&parseFloat(l.height.includes("%")?l.height.split("%")[0]:l.height.split("px")[0]);return e(t).resizable({edges:f}).on("resizestart",e=>{e.stopPropagation(),a=0,s=0;const n=t.getBoundingClientRect();u=n.width,c=n.height,t.style.minWidth="0px",t.style.minHeight="0px",i(!1)}).on("resizemove",e=>{e.stopPropagation();const r=e.deltaRect;a+=r.width,s+=r.height;const o=p&&u+a+"px",i=h&&c+s+"px";t.style.width=o,t.style.height=i,l.position===rh.Right?document.querySelector(`div[id="${n.id}"]`).style.width=o:l.position===rh.Bottom?document.querySelector(`div[id="${n.id}"]`).style.height=i:l.position===rh.Center&&(document.querySelector(`div[id="${n.id}"] > div.app-dialog-content`).style.width=o,document.querySelector(`div[id="${n.id}"]  div.app-dialog-animation-content`).style.height=i)}).on("resizeend",e=>{e.stopPropagation(),i(!0),t.style.width=null,t.style.minWidth=null,t.style.height=null,t.style.minHeight=null,l.position===rh.Right?document.querySelector(`div[id="${n.id}"]`).style.width=null:l.position===rh.Bottom?document.querySelector(`div[id="${n.id}"]`).style.height=null:l.position===rh.Center&&(document.querySelector(`div[id="${n.id}"] > div.app-dialog-content`).style.width=null,document.querySelector(`div[id="${n.id}"]  div.app-dialog-animation-content`).style.height=null);let d=null,f=null;if(p){d=gC(l.width.includes("px")?"px":"%",p*(u+a)/u)}if(h){f=gC(l.height.includes("px")?"px":"%",h*(c+s)/c)}const g=mg().getState().appConfig.dialogs[mg().getState().appRuntimeInfo.currentDialogId].setIn(["sizeMode",r,"width"],null!=d?d:l.width).setIn(["sizeMode",r,"height"],null!=f?f:l.height);o().editDialog(g).exec()})}(l,N.current,n,e,u,_))}},N.current?0:1e3)()}},[v,y,m,n.sizeMode[b],k.position,k.width,k.height,u,l]),xC(()=>{R(!1)},[m]),xC(()=>{B(n.effect&&n.effect.type!==NT.None)},[n.effect,m]),xC(()=>(Promise.all([MC(),GT()]).then(e=>{i(e[0]),s(e[1])}),window.jimuConfig.isInBuilder&&(u||vp("jimu-for-builder",["getAppConfigAction"]).then(e=>{c(()=>e.getAppConfigAction)}),l||vp("jimu-core/dnd").then(e=>{d(()=>e.interact)})),(n.isSplash&&!q(C)&&(window.jimuConfig.isInBuilder||"true"!==op(kC(C,f,p)))||r.isOpenByPage&&(C&&(q(C)||window.jimuConfig.isInBuilder||"true"===op(kC(C,f,p)))||!C))&&!jC(h,n,r,f,p,T,I)&&n.id!==O&&n.id!==m&&(I(km(n.id)),I(Bm(null))),()=>{v&&L&&L.unset();const e=mg().getState(),t=e.appRuntimeInfo.dialogInfos;if(t){const n=t[Y()];(null==n?void 0:n.canClose)&&J(e)}}),[]),xC(()=>{var e;if((null===(e=null==T?void 0:T[m])||void 0===e?void 0:e.alertVersion)>=1){W(!0);wO(()=>{W(!1)},800)()}},[null===(t=null==T?void 0:T[m])||void 0===t?void 0:t.alertVersion]),xC(()=>{if(op("exb-link-dialog"))return;let e=!1;(n.isSplash||r.isOpenByPage||m)&&(e=!jC(h,n,r,f,p,T,I,O)),e!==A&&x(e)});const J=e=>{var t,o;if(n.isSplash||r.isOpenByPage){!function(e,t,n,r,o,i,a){var s;const u=t.isSplash?t.id:`${e}-${t.id}`;n.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose&&(null===(s=null==i?void 0:i[u])||void 0===s?void 0:s.checked))&&ip(kC(u,r,o),"true");_C(i,u,a)}(h,n,r,f,p,(null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.dialogInfos)||T,I);const o=X(e);I(km(o)),x(!1),o||I(Bm(Ia.Body))}else _C((null===(o=null==e?void 0:e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos)||T,n.id,I),bw(null),I(Bm(Ia.Body))},Y=()=>r.isOpenByPage?h+"-"+n.id:n.id,X=e=>{var t,o,i,a,s,u,c;let l=O,d=m;if((n.isSplash||r.isOpenByPage)&&(l=null==e?void 0:e.queryObject.dlg,d=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId,window.jimuConfig.isInBuilder)){if(n.isSplash){if(g&&!(null===(a=null===(i=e?null===(o=e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos:T)||void 0===i?void 0:i[h+"-"+g])||void 0===a?void 0:a.isClosed))return g;if(n.isSplash&&l===n.id&&(null===(c=null===(u=null===(s=null==e?void 0:e.appRuntimeInfo)||void 0===s?void 0:s.dialogInfos)||void 0===u?void 0:u[n.id])||void 0===c?void 0:c.isClosed))return null}return l}let f=n.isSplash&&(g||l)||r.isOpenByPage&&d!==l&&l||null;return d===f&&(f=null),f};if(!o||!a)return null;const{Modal:K}=o;return cn(K,{isOpen:A,fade:!1,disableActivateOverlay:!0,toggle:()=>{var e,t;if(v)VT(I);else if(n.interactionType&&n.confirmBeforeClose&&!D){const n=(T||be({})).set(Y(),{canClose:!1,checked:!1,alertVersion:(null!==(t=null===(e=null==T?void 0:T[Y()])||void 0===e?void 0:e.alertVersion)&&void 0!==t?t:0)+1,isClosed:!1});I(Mm(n))}else A&&n.closeWhenClickOverlay?J():VT(I)},centered:M,css:SC(k),id:n.id,className:"app-dialog",wrapClassName:"app-dialog-wrap app-dialog-wrap-"+n.id,modalClassName:"app-dialog-modal",backdropClassName:"app-dialog-backdrop",contentClassName:we()("app-dialog-content",{"overflow-visible h-auto":!j||V}),onOpened:()=>{$(!1)}},cn(ln,{styles:bC(n,A,w,k)}),cn("div",{className:"app-dialog-resize-container",css:dn`
    .app-dialog-resize-handlers{
        max-width: 100vw;

      .resize-handler{
        width: 100%;
        height: 100%;
        position: fixed;
        z-index: 1;

        &.dialog-resize-bottom{
          height: ${"12px"};
          cursor: ns-resize;
        }
        &.dialog-resize-top{
          height: ${"12px"};
          cursor: ns-resize;
          top: 0;
        }
        &.dialog-resize-right{
          width: ${"12px"};
          right: ${"0px"};
          cursor: ew-resize;
          top: 0;
        }
        &.dialog-resize-left{
          width: ${"12px"};
          left: ${"0px"};
          cursor: ew-resize;
          top: 0;
        }

        &:hover {
          /* background: red; */
        }
      }
    }
  `,ref:e=>N.current=e},cn("div",{className:"w-100 h-100"},A&&!F&&cn(TC,{dialogJson:n,isOpen:A,jimuUI:o,jimuLayout:a,cbxAnimation:G,messages:E,isChecked:D,setCbxState:e=>{R(e);const t=!n.interactionType||!n.confirmBeforeClose||e,r=(T||be({})).set(Y(),{canClose:t,checked:e,isClosed:!1});I(Mm(r))},closeDialog:J,loadingCallBack:e=>B(e)})),z()&&cn("div",{className:we()("app-dialog-resize-handlers",{"resize-center":k.position===rh.Center})},function(e,t){const n=[];return e&&(t.position!==rh.Bottom&&t.position!==rh.Center||n.push(cn("span",{key:"1",className:"resize-handler dialog-resize-top"})),t.position!==rh.Top&&t.position!==rh.Center||n.push(cn("span",{key:"2",className:"resize-handler dialog-resize-bottom"})),t.position!==rh.Right&&t.position!==rh.Center||n.push(cn("span",{key:"3",className:"resize-handler dialog-resize-left"})),t.position!==rh.Left&&t.position!==rh.Center||n.push(cn("span",{key:"4",className:"resize-handler dialog-resize-right"}))),n}(v,k))))},LC=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const{useEffect:UC,useState:FC}=E;function $C(){return LC(this,void 0,void 0,(function*(){return yield vp("jimu-ui",["Popper"])}))}var VC=function({dialogJson:e,opener:t,toggle:n}){const[r,o]=FC(null),[i,a]=FC(null),[s,u]=FC(e.effect&&e.effect.type!==NT.None),c=me(e=>e.appRuntimeInfo.appMode===ha.Design),l=me(e=>e.appRuntimeInfo.currentDialogId),d=me(e=>e.browserSizeMode),f=e.sizeMode[d]||e.sizeMode[la.Large],p=null==r?void 0:r.getFallbackPlacementsModifier,h=E.useMemo(()=>{const e=null==p?void 0:p(["top","right","left"]);return[{name:"preventOverflow",options:{altAxis:!0}},Object.assign({},e)]},[p]);if(UC(()=>{Promise.all([$C(),GT()]).then(e=>{o(e[0]),a(e[1])})},[]),UC(()=>{c&&l===e.id&&n()},[c]),!r||!i)return null;const{Popper:g}=r;return cn(g,{open:!0,showArrow:!!t,toggle:n,reference:t,modifiers:h,css:wC(e,f),disableActivateOverlay:e.closeWhenClickOverlay,className:we()("app-dialog",{"dialog-animation-playing":s,"dialog-animation-end":!s})},cn(TC,{dialogJson:e,isOpen:!0,jimuUI:r,jimuLayout:i,loadingCallBack:e=>u(e)}))};const{useEffect:BC}=E;function GC(e){const t=me(e=>e.queryObject.draft)?"draft":"release",n=me(e=>e.appConfig.timestamp),r=me(e=>e.appRuntimeInfo.currentPageId),o=me(e=>e.appRuntimeInfo.appMode===ha.Design),i=me(e=>e.browserSizeMode),a=e.dialogJson.sizeMode[i]?i:la.Large,s=fe();if(BC(()=>{e.runtime&&function(e,t){const n=BT(e);rp().map(e=>{e.includes(n)&&!e.includes(t)&&cp(e)})}(t,n)},[e.runtime,t,n]),BC(()=>{s(Nm(null))},[o,e.dialogJson.id,r]),e.dialogJson.mode===nh.Fixed)return cn(NC,Object.assign({},e));if(window.jimuConfig.isInBuilder&&!e.opener){const t=e.dialogJson.set("mode",nh.Fixed).set("isOpenerDlg",!0).setIn(["sizeMode",a,"position"],rh.Center);return cn(NC,{dialogJson:t,opener:e.opener,isOpenByPage:e.isOpenByPage})}return cn(VC,Object.assign({},e))}var WC,qC;!function(e){e.Horizontal="H",e.Vertical="V"}(WC||(WC={})),function(e){e.Cube="CUBE",e.Cover="COVER",e.Fade="FADE",e.Push="PUSH",e.Box="BOX",e.None="None"}(qC||(qC={}));class zC{constructor(e=!1,t=WC.Horizontal){this.isRTL=e,this.direction=t}initRotate(){return this.direction===WC.Vertical?"rotateX(-90deg)":this.isRTL?"rotateY(90deg)":"rotateY(-90deg)"}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){const o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:""};const a={},s=this.direction===WC.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?90:-90;a.from=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:e*s,rotateY:this.direction===WC.Horizontal?-e*s:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},WT,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.reset=!0}else a.from=Object.assign({},WT,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:e>t&&!r?90:-90,rotateY:this.direction===WC.Horizontal?e>t&&!r?-90*s:90*s:0,opacity:1,transformOrigin:i}),a.reset=!0;return a}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none",transformOrigin:""};let i,a=r-n;t===n&&(a=1),i=this.direction===WC.Vertical||this.isRTL?e===t?90*(1-a):-90*a:e===t?-90*(1-a):90*a;const s=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:i,rotateY:this.direction===WC.Horizontal?i:0,opacity:1,transformOrigin:this.getOrigin(e,t,n)});if(e===t&&o){const r={};let o;return o=this.direction===WC.Vertical||this.isRTL?90:-90,r.from=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:o,rotateY:this.direction===WC.Horizontal?o:0,opacity:1,transformOrigin:this.getOrigin(e,t,n)}),r.to=s,r.reset=!0,r}return s.reset=!1,s}getOrigin(e,t,n){return e===t?this.direction===WC.Vertical?"bottom":this.isRTL?"left":"right":e===n?this.direction===WC.Vertical?"top":this.isRTL?"right":"left":void 0}getDiscreteOrigin(e,t,n,r){if(this.direction===WC.Vertical){if(e===t)return t>n||r?"bottom":"top";if(e===n)return t>n||r?"top":"bottom"}if(this.isRTL){if(e===t)return t>n||r?"left":"right";if(e===n)return t>n||r?"right":"left"}else{if(e===t)return t>n||r?"right":"left";if(e===n)return t>n||r?"left":"right"}return""}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{rotateX:i,rotateY:a}=e;return i&&a?ao([i,a],(e,t)=>`perspective(1000px) rotateX(${e}deg) rotateY(${t}deg)`):null}}class HC{constructor(e=!1,t=WC.Horizontal){this.isRTL=e,this.direction=t}initOffset(e,t,n,r){if(t!==n)return 0;let o=e-r;return n===r&&(o=1),this.direction===WC.Horizontal&&this.isRTL?100*(o-1):100*(1-o)}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){if(!(e===t||e===n))return{display:"none"};const o={},i=this.direction===WC.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?100*i:-100*i;o.from=Object.assign({},WT,{offsetX:this.direction===WC.Horizontal?e:0,offsetY:this.direction===WC.Horizontal?0:e,opacity:1,display:"block",zIndex:1}),o.to=Object.assign({},WT,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1}),o.reset=!0}else e===n&&(o.from=Object.assign({},WT,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.to=Object.assign({},WT,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.reset=!0);return o}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none"};const i=this.initOffset(r,e,t,n),a=Object.assign({},WT,{display:"block",offsetX:this.direction===WC.Horizontal?i:0,offsetY:this.direction===WC.Horizontal?0:i,opacity:1});if(e===t&&o){const e={};let t;return t=this.direction===WC.Horizontal&&this.isRTL?-100:100,e.from=Object.assign({},WT,{display:"block",offsetX:this.direction===WC.Horizontal?t:0,offsetY:this.direction===WC.Horizontal?0:t,opacity:1}),e.to=a,e.reset=!0,e}return a.reset=!1,a}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{offsetX:i,offsetY:a}=e;return i&&a?ao([i,a],(e,t)=>`translate3d(${e}%, ${t}%, 0)`):null}}class JC{getTransitionProps(e,t,n,r,o){return o>=0?this.getContinuousTransitionProps(e,t,n,o):this.getDiscreteTransitionProps(e,t,n)}getDiscreteTransitionProps(e,t,n){if(!(e===t||e===n))return{display:"none"};const r={};return e===t?(r.from=Object.assign({},WT,{opacity:0,zIndex:0,display:"block"}),r.to=Object.assign({},WT,{opacity:1,zIndex:1,display:"block"}),r.reset=!0):e===n&&(r.from=Object.assign({},WT,{opacity:1,zIndex:1,display:"block"}),r.to=Object.assign({},WT,{opacity:0,zIndex:0,display:"block"}),r.reset=!0),r}getContinuousTransitionProps(e,t,n,r=1){if(!(e===t||e===n))return{display:"none"};let o=r-n;return t===n&&(o=1),Object.assign({},WT,{display:"block",opacity:e===t?o:1-o,zIndex:e===t?1:0,reset:!1})}transform(e,t,n,r,o){return""}}class YC{constructor(e=!1,t=WC.Horizontal){this.isRTL=e,this.direction=t}initOffset(e,t,n,r){let o=e-r;return n===r&&(o=1),t===n?this.direction===WC.Horizontal&&this.isRTL?100*(o-1):100*(1-o):this.direction===WC.Horizontal&&this.isRTL?100*o:-100*o}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){if(!(e===t||e===n))return{display:"none"};const o={},i=this.direction===WC.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?100*i:-100*i;o.from=Object.assign({},WT,{offsetX:this.direction===WC.Horizontal?e:0,offsetY:this.direction===WC.Horizontal?0:e,opacity:1,display:"block"}),o.to=Object.assign({},WT,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.reset=!0}else if(e===n){const n=e>t&&!r?100*i:-100*i;o.from=Object.assign({},WT,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.to=Object.assign({},WT,{offsetX:this.direction===WC.Horizontal?n:0,offsetY:this.direction===WC.Horizontal?0:n,opacity:1,display:"block"}),o.reset=!0}return o}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none"};const i=this.initOffset(r,e,t,n),a=Object.assign({},WT,{display:"block",offsetX:this.direction===WC.Horizontal?i:0,offsetY:this.direction===WC.Horizontal?0:i,opacity:1});if(o&&e===t){let e;e=this.direction===WC.Horizontal&&this.isRTL?-100:100;const t={};return t.from=Object.assign({},WT,{display:"block",offsetX:this.direction===WC.Horizontal?e:0,offsetY:this.direction===WC.Horizontal?0:e,opacity:1}),t.to=a,t.reset=!0,t}return a.reset=!1,a}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{offsetX:i,offsetY:a}=e;return i&&a?ao([i,a],(e,t)=>`translate3d(${e}%, ${t}%, 0)`):null}}class XC{constructor(e=!1,t=WC.Horizontal){this.isRTL=e,this.direction=t}initState(e,t,n,r){let o=e-r;return n===r&&(o=1),t===n?[100*(1-o),60*(1-o)]:[-100*o,-60*o]}getContinuousOrigin(e,t,n){return this.direction===WC.Vertical?e===t?"top":"bottom":e===t?this.isRTL?"right":"left":this.isRTL?"left":"right"}getDiscreteOrigin(e,t,n,r){return this.direction===WC.Vertical?e===t?t>n||r?"top":"bottom":e<t||r?"bottom":"top":this.isRTL?e===t?t>n||r?"right":"left":e<t||r?"left":"right":e===t?t>n||r?"left":"right":e<t||r?"right":"left"}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){const o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:i};const a=this.isRTL?-1:1,s={};if(e===t){const e=t>n||r?100:-100,o=t>n||r?60:-60;s.from=Object.assign({},WT,{rotateX:this.direction===WC.Horizontal?0:-o,rotateY:this.direction===WC.Horizontal?o*a:0,offsetX:this.direction===WC.Horizontal?e*a:0,offsetY:this.direction===WC.Horizontal?0:e,opacity:0,display:"block",zIndex:1,transformOrigin:i}),s.to=Object.assign({},WT,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1,transformOrigin:i}),s.reset=!0}else{const e=t>n||r?-100:100,o=t>n||r?-60:60;s.from=Object.assign({},WT,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0,transformOrigin:i}),s.to=Object.assign({},WT,{rotateX:this.direction===WC.Horizontal?0:-o,rotateY:this.direction===WC.Horizontal?o*a:0,offsetX:this.direction===WC.Horizontal?e*a:0,offsetY:this.direction===WC.Horizontal?0:e,opacity:0,display:"block",zIndex:0,transformOrigin:i}),s.reset=!0}return s}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none",transformOrigin:""};const[i,a]=this.initState(r,e,t,n);let s=r-n;t===n&&(s=1);const u=this.isRTL?-1:1;if(e===t){const r={},c=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:-a,rotateY:this.direction===WC.Horizontal?a*u:0,offsetX:this.direction===WC.Horizontal?i*u:0,offsetY:this.direction===WC.Horizontal?0:i,opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)});return o?(r.from=Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:-60,rotateY:this.direction===WC.Horizontal?60*u:0,offsetX:this.direction===WC.Horizontal?100*u:0,offsetY:this.direction===WC.Horizontal?0:100,opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)}),r.to=c,r.reset=!0,r):(c.reset=!1,c)}return Object.assign({},WT,{display:"block",rotateX:this.direction===WC.Horizontal?0:-a,rotateY:this.direction===WC.Horizontal?a*u:0,offsetX:this.direction===WC.Horizontal?i*u:0,offsetY:this.direction===WC.Horizontal?0:i,opacity:1-s,transformOrigin:this.getContinuousOrigin(e,t,n),zIndex:0,reset:!1})}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{offsetX:i,offsetY:a,rotateX:s,rotateY:u}=e;return null==i||null==u?null:ao([i,a,s,u],(e,t,n,r)=>`perspective(1000px) translate3d(${e}%, ${t}%, 0) rotateX(${n}deg) rotateY(${r}deg)`)}}class KC{getTransitionProps(e,t,n,r,o=1){return Object.assign({},WT,{display:e===t?"block":"none",opacity:1,zIndex:e===t?1:0,reset:!0})}transform(e,t,n,r,o){return""}}function QC(){var e,t;return null!==(t=null===(e=mg().getState().appContext)||void 0===e?void 0:e.isRTL)&&void 0!==t&&t}function ZC(e){return Math.abs(e-Math.round(e))<1e-7}function eA(e,t){let n,r;const o=tA(e,0,1)*(t-1),i=Math.floor(o);return r=i,r=ZC(o)?Math.round(o)-1:i,n=r+1,n=tA(n,0,t-1),r=tA(r,0,t-1),{previousIndex:r,progress:o,currentIndex:n}}function tA(e,t,n){return Math.max(t,Math.min(e,n))}function nA(e,t=WC.Horizontal){switch(e){case qC.Cover:return new HC(QC(),t);case qC.Cube:return new XC(QC(),t);case qC.Fade:return new JC;case qC.Push:return new YC(QC(),t);case qC.Box:return new zC(QC(),t);default:return new KC}}var rA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function oA(e){const{useProgress:t=!1,useStep:n,progress:r,currentIndex:o,previousIndex:i,direction:a,transitionType:s,children:u,playId:c,withOneByOne:l,loop:d}=e,f=E.useRef(),p=E.useRef(),h=E.useRef(),g=E.useRef(),m=E.useRef(),[v,y]=E.useState(),b=E.Children.count(u),S=E.useContext(iC),{setting:w,playId:I,onAnimationEnd:O}=S||{},T=E.useMemo(()=>nA(s,a),[s,a]),C=me(e=>{var t;return s&&s!==qC.None?(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===ha.Design:null}),[A,x]=E.useMemo(()=>{let e=r,n=!1,a=!1;if(t){const t=eA(r,b);e=t.progress,Math.round(100*g.current)!==Math.round(100*e)&&(n=!0,g.current=t.progress);let o=!0;f.current===t.currentIndex-1?a=!0:ZC(r*(b-1))&&t.currentIndex===f.current-1&&(o=!1),o&&(f.current=t.currentIndex,p.current=t.previousIndex)}else f.current===o&&p.current===i||(n=!0,f.current=o,p.current=i);return m.current=n,[e,a]},[t,r,b,o,i]),P=c&&h.current!==c||m.current,[D,R,j]=ho(b,e=>Object.assign({},WT,{zIndex:e===f.current?1:0,display:e===f.current?"block":"none"})),_=(e,t,n,r=!1,o=!1,i)=>{j(),R(a=>{const s=a!==e?void 0:()=>{"function"==typeof i&&i(),k()};return Object.assign(Object.assign({},T.getTransitionProps(a,e,t,d,n,r)),{config:{duration:400},immediate:o,onRest:s})})},k=()=>{w&&w.type!==NT.None&&y(Symbol())};E.useEffect(()=>{if(c&&h.current!==c)return h.current=c,m.current=!1,void _(f.current,p.current,void 0);m.current&&(m.current=!1,_(f.current,p.current,A,x,!(!t||n)))});const M=function(e){const t=E.useRef();return E.useCallback(n=>{var r,o,i;return e&&(null===(r=t.current)||void 0===r?void 0:r.symbol)!==e&&(t.current={symbol:e,used:!1}),n&&(null===(o=t.current)||void 0===o?void 0:o.symbol)&&!(null===(i=t.current)||void 0===i?void 0:i.used)?(t.current.used=!0,t.current.symbol):null},[e])}(I),N=function(e){const{sectionPlayId:t,withOneByOne:n,willPlayTransition:r}=e,o=E.useRef();return E.useCallback(e=>{var i,a,s;if(!n)return null;if(t&&(null===(i=o.current)||void 0===i?void 0:i.symbol)!==t&&(o.current={symbol:t,used:!1}),(null===(a=o.current)||void 0===a?void 0:a.symbol)&&!(null===(s=o.current)||void 0===s?void 0:s.used)){if(r)return e?Symbol("prepare animation before transition"):null;if(e)return o.current.used=!0,o.current.symbol}return null},[t,n,r])}({sectionPlayId:c,withOneByOne:l,willPlayTransition:P}),L=function(e){const{activeViewIndex:t,willPlayTransition:n}=e,r=E.useRef();return E.useCallback((e,o)=>{var i,a;if(e)return null;if((null===(i=r.current)||void 0===i?void 0:i.index)!==t&&(r.current={index:t,used:!1}),!(null===(a=r.current)||void 0===a?void 0:a.used)){if(n)return o?Symbol("prepare animation before transition"):null;if(o)return r.current.used=!0,Symbol("play animation after transition")}return null},[t,n])}({activeViewIndex:f.current,willPlayTransition:P}),U=e=>{const t=e===f.current;return M(t)||N(t)||L(C,t)},F=()=>{"function"==typeof O&&O()};return E.createElement(E.Fragment,null,E.Children.map(u,(e,n)=>{const r=D[n],{offsetX:o,offsetY:i,rotateX:a,rotateY:s}=r,u=rA(r,["offsetX","offsetY","rotateX","rotateY"]);let c="";f.current!==p.current&&(c=T.transform(D[n],n,f.current,p.current,A));const l=n===f.current||n===p.current;return E.createElement(Ko.div,{className:"w-100 h-100 view-content",key:n,style:Object.assign({position:"absolute",transform:c},u)},E.createElement(iC.Provider,{value:{trigger:MT.Manual,setting:t?null:l?w:null,playId:l?U(n):null,revert:P&&n===f.current||!P&&n!==f.current,inheritedOneByOneSetting:null,depth:S.depth+1,onAnimationEnd:F}},e))}))}function iA(e){switch(e){case qC.Cover:case qC.Cube:case qC.Push:case qC.Box:return!0;default:return!1}}const aA=n(86).exbVersion,sA={assign:uO,defer:Pg,debounce:wO,setValue:GI,isDeepEqual:pc,throttle:IO,kebabCase:QO},uA={restAuth:Zo,restFeatureLayer:ei,restPortal:ni,restRequest:ti,Sanitizer:Sa},cA={rgba:tr,parseToRgb:qn,rem:jn,readableColor:function(e,t,n,r){void 0===t&&(t="#000"),void 0===n&&(n="#fff"),void 0===r&&(r=!0);var o=sr(e)>.179,i=o?t:n;return!r||ur(e,i)>=4.5?i:o?"#000":"#fff"},lighten:lr,darken:ar,ellipsis:function(e,t){void 0===t&&(t=1);var n={display:"inline-block",maxWidth:e||"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"};return t>1?_({},n,{WebkitBoxOrient:"vertical",WebkitLineClamp:t,display:"-webkit-box",whiteSpace:"normal"}):n},mix:fr,stripUnit:xn,math:function(e,t){var n=On(e),r=n.match(wn);if(r&&!r.every((function(e){return e===r[0]})))throw new Sn(41);return""+En(On(n.replace(wn,"")),t)+(r?On(r[0]):"")},borderRadius:function(e,t){var n,r,o=Tn(e);if(!t&&0!==t)throw new Sn(62);if("Top"===o||"Bottom"===o)return(n={})["border"+o+"RightRadius"]=t,n["border"+o+"LeftRadius"]=t,n;if("Left"===o||"Right"===o)return(r={})["borderTop"+o+"Radius"]=t,r["borderBottom"+o+"Radius"]=t,r;throw new Sn(63)},getValueAndUnit:Rn}}]))}}}));