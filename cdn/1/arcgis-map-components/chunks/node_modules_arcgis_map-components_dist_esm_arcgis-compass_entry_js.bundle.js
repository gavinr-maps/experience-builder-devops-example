/*! For license information please see node_modules_arcgis_map-components_dist_esm_arcgis-compass_entry_js.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["node_modules_arcgis_map-components_dist_esm_arcgis-compass_entry_js"],{2069:(e,t,i)=>{i.r(t),i.d(t,{arcgis_compass:()=>p});var n=i(4336),s=i(8960),o=i(2676),r=i(1759),c=i(3912);class a extends o.A{constructor(e,t){super(e,t),this._watchedViewModelProperties=new Set,this._watchedVisibleElementsProperties={},Object.defineProperty(this.exports,"viewModel",{value:o.a.makeGetterProxy(e,this._watchedViewModelProperties)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){this.component.manager.didLoadCalled&&(0,c.c)(this.component)}async hostLoad(){this.component.render=()=>(0,n.h)("div",null),this._watchedProperties.delete("viewModel"),await super.hostLoad(),this._watchMetaProperties(),this._reEmitWidgetEvents(),this.onLifecycle((()=>this.reactiveUtils.watch((()=>this._instance.viewModel),(e=>{this.component.viewModel=e}),{initial:!0})));const e=this._instance.viewModel;if("object"==typeof e){o.a.watchComponentUpdates(this,e,this._watchedViewModelProperties),o.a.watchAccessorUpdates(this,e,this._watchedViewModelProperties);const t=o.a.gatherParameters(this,this._watchedViewModelProperties);e.set(t)}else if(this._watchedViewModelProperties.size>0)throw new Error(`The widget does not have a viewModel to bind to. Tried to bind the following properties: ${Array.from(this._watchedViewModelProperties).join(", ")}`);const t=Object.entries(this._watchedVisibleElementsProperties);t.length>0&&this.onLifecycle((()=>t.map((([e,t])=>{let i,n=this._instance.visibleElements??{};for(const e of t.slice(0,-1)){if("object"!=typeof n[e]||null===n[e]){i=Boolean(n[e]);break}n=n[e]}void 0===i&&(i=Boolean(n[t.slice(-1)[0]]??!0)),e.startsWith("hide");const s=e.startsWith("hide")||e.startsWith("show")?e.startsWith("hide"):i,o=this.component;return"boolean"==typeof o[e]?this._updateWidgetVisibleElement(t,o[e],s):o[e]=!1,this.watch(e,(e=>this._updateWidgetVisibleElement(t,e,s)))}))))}_updateWidgetVisibleElement(e,t,i){let n=this._instance.visibleElements??{};for(const t of e.slice(0,-1))"object"==typeof n[t]&&null!==n[t]||(n[t]={}),n=n[t];const s=Boolean(i?!t:t);n[e.at(-1)]=s}hostLoaded(){const{el:e}=this.component,t=e.shadowRoot?.firstChild??e.firstChild??void 0;e.childElem=t??e.childElem,this.component.childElem=e.childElem,this._instance.container=this.component.childElem??this.component.el,e.childElem,"view"in this.component||Object.defineProperty(this.component,"view",{get:()=>this._instance.view??this._instance.viewModel?.view,set:e=>{"view"in this._instance||"object"!=typeof this._instance.viewModel?this._instance.view=e:this._instance.viewModel.view=e}}),(0,c.c)(this.component),this.component.arcgisReady.emit()}_watchMetaProperties(){this.watch("position",(e=>{null!=this.component.childElem&&"string"==typeof e&&this.component.view?.ui.move(this.component.childElem,e)})),this.watch("referenceElement",(e=>{(0,c.r)(this.component,e).catch(console.error)}))}_reEmitWidgetEvents(){if(!("on"in this._instance&&"function"==typeof this._instance.on))return;const e=this._instance;Object.entries(this.component).forEach((([t,i])=>{const n=i;if(!t.startsWith("widget")||"widget"===t||"object"!=typeof n||null===n||!("emit"in n)||"function"!=typeof n.emit)return;const s=n.emit,o=t.slice(6),c=(0,r.k)(o),a=`${c[0].toLowerCase()}${c.slice(1)}`;this.onLifecycle((()=>this.reactiveUtils.on((()=>e),a,s)))}))}hostDisconnected(){"object"==typeof this.component.childElem&&this.component.view?.ui.remove(this.component.childElem)}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,t)=>"string"==typeof t||Reflect.has(e,t),get:(e,t)=>{if("symbol"==typeof t||t in Promise.prototype)return Reflect.get(e,t);const i=[t],n=this._makeRecursiveProxy(i);return this.component.manager.trackPropKey((e=>{if(void 0===e)throw new Error("Unable to bind visibleElements property. Check for incorrect this.widget.visibleElements usage");this.component[e]=!1,this._watchedVisibleElementsProperties[e]=i}),n,!0)}})}_makeRecursiveProxy(e){const t=new Proxy({},{get:(i,n)=>{const s=Reflect.get(i,n);return"symbol"==typeof n||n in Promise.prototype?s:(e.push(n),t)}});return t}}const l=(0,o.p)(a),h=(d=s.k,e=>l(e,d));var d;const p=class{constructor(e){(0,n.r)(this,e),this.arcgisReady=(0,n.c)(this,"arcgisReady",7),this.arcgisPropertyChange=(0,n.c)(this,"arcgisPropertyChange",7),this.manager=(0,o.u)(this),this.reactiveUtils=(0,o.l)(s.i),this.widget=h(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=(0,o.b)()("orientation"),this.icon=this.widget.icon,this.label=this.widget.label,this.orientation=this.manager.getSet(this.viewModel.orientation,{set:(e,t)=>{return n=t??{},(i=e??{}).z===n.z&&i.y===n.y&&i.x===n.x?t:e;var i,n}}),this.position="bottom-left",this.referenceElement=void 0,this.state=this.viewModel.state}async reset(){this.widget.reset()}get el(){return(0,n.g)(this)}};p.style=""},3912:(e,t,i)=>{function n(e){const t=e.el.closest("arcgis-expand")??e.expandElem;if(t?.widget)return e.view=t.view,t.widget.content=e.childElem??e.el,t.expandIcon||(t.widget.expandIcon=e.widget?e.widget.icon:e?.icon),!0;if(t){const i=()=>{t.removeEventListener("arcgisExpandReady",i,!1),e.view=t.view,t.widget.content=e.childElem??e.el,t.expandIcon||(t.widget.expandIcon=e.widget?e.widget.icon:e?.icon)};return t.addEventListener("arcgisExpandReady",i,!1),!0}return!1}function s(e,t){Array.isArray(t)?e._watchHandles=[...e._watchHandles,...t]:e._watchHandles.push(t)}function o(e){let t=!1;if(n(e)){const t=e.el.closest("arcgis-map")??e.el.closest("arcgis-scene");if(t?.view)e.view=t.view;else if(t){const i=()=>{t.removeEventListener("arcgisViewReadyChange",i,!1),e.view=t.view};t.addEventListener("arcgisViewReadyChange",i,!1)}}else{let i=e.el.closest("arcgis-map")??e.el.closest("arcgis-scene");if(i||"string"!=typeof e.referenceElement||(i=document.querySelector(e.referenceElement),t=!0),i?.view){e.view=i.view;const n=e.childElem??e.el;t||e.view.ui.add(n,e.position)}else i&&function(e,t,i){const n=()=>{e.removeEventListener("arcgisViewReadyChange",n,!1),t.view=e.view,i||t.view.ui.add(t.childElem??t.el,t.position)};e.addEventListener("arcgisViewReadyChange",n,!1)}(i,e,t)}}function r(e){return null==e||""===e}function c(e){return null!=e&&e%1==0}function a(e,t){return void 0===t||e.position!==t.position||e.heading!==t.heading||e.tilt!==t.tilt}function l(e,t){return void 0===t||t.atmosphereEnabled!==e.atmosphereEnabled||t.lighting.date!==e.lighting.date||t.lighting.directShadowsEnabled!==e.lighting.directShadowsEnabled||t.lighting.cameraTrackingEnabled!==e.lighting.cameraTrackingEnabled||t.lighting.date!==e.lighting.date||t.lighting.displayUTCOffset!==e.lighting.displayUTCOffset}function h(e,t){return void 0===t||e.targetGeometry!==t.targetGeometry||e.rotation!==t.rotation||e.scale!==t.scale}async function d(e,t){void 0!==t&&("string"==typeof t?e.view=await async function(e){const t=document.querySelector(e);return await new Promise((e=>{if(void 0!==t?.view)e(t.view);else if(t){const i=()=>{t.removeEventListener("arcgisViewReadyChange",i,!1),e(t.view)};t.addEventListener("arcgisViewReadyChange",i,!1)}}))}(t):e.widget&&(e.view=t.view))}i.d(t,{a:()=>s,b:()=>h,c:()=>o,d:()=>n,e:()=>a,f:()=>l,g:()=>c,i:()=>r,r:()=>d})},1759:(e,t,i)=>{function n(...e){const t=[];for(let i=0;i<e.length;i++){const n=e[i];if("string"==typeof n)t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if("object"==typeof n)for(const e in n)n[e]&&t.push(e)}const i=t.join(" ");return t.length=0,i}i.d(t,{c:()=>n,k:()=>s});var s=e=>e.split("-").map((e=>(e[0]?.toLocaleUpperCase()??"")+e.slice(1))).join("");new Proxy({},{get:(e,t)=>{return i=t.toString(),(n=i.replaceAll(/([a-z])([A-Z])/gu,"$1 $2")).charAt(0).toUpperCase()+n.slice(1);var i,n}})}}]);