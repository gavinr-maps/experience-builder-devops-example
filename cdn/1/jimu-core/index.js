/*! For license information please see index.js.LICENSE.txt */
System.register(["jimu-core/react","jimu-core/react-dom","jimu-core"],(function(e,t){var r={},n={},o={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){r[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){o.moduleLoader=e.moduleLoader}],execute:function(){e((()=>{var e,t,i={4015:()=>{},3135:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(655),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=(0,i.a)(e)+"/community/groups/"+t+"/addUsers",a=Object.assign({},e,{admins:void 0,users:void 0}),s=(0,n.pr)(u("users",e.users,a),u("admins",e.admins,a)).map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(r,e)}));return Promise.all(s).then(l)}function u(e,t,r){return!t||t.length<1?[]:(0,a.y)(t,25).map((function(t){return function(e,t,r){var o,i;return Object.assign({},r,((o={})[e]=t,o.params=(0,n.pi)((0,n.pi)({},r.params),((i={})[e]=t,i)),o))}(e,t,r)}))}function l(e){var t=e.filter((function(e){return e.notAdded})).reduce((function(e,t){return e.concat(t.notAdded)}),[]),r=e.filter((function(e){return e.errors})).reduce((function(e,t){return e.concat(t.errors)}),[]),n={notAdded:t};return r.length>0&&(n.errors=r),n}},7255:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/createGroup";return e.params=(0,n.pi)((0,n.pi)({},e.params),e.group),(0,o.WY)(t,e)}},6765:(e,t,r)=>{"use strict";r.d(t,{ex:()=>s,qn:()=>u,Ye:()=>l,rm:()=>c,zv:()=>d});var n=r(655),o=r(743),i=r(4037),a=r(2431);function s(e,t){var r=(0,a.a)(t)+"/community/groups/"+e,i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function u(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/categorySchema",i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function l(e,t){var r=(0,a.a)(t)+"/content/groups/"+e,i=(0,n.pi)((0,n.pi)({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(i.params=(0,n.pi)({},t.paging)),(0,o.WY)(r,i)}function c(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/users",i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}function d(e,t){var r=(0,a.a)(t)+"/community/groups/"+e+"/userlist",n=(0,i.t)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return(0,o.WY)(r,n)}},4502:()=>{},5323:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(655),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=(0,i.a)(e)+"/community/groups/"+t+"/invite",s=function(e){return(0,a.y)(e.users,25).map((function(t){return function(e,t){var r=Object.assign({},t);return r.params=(0,n.pi)((0,n.pi)({},r.params),{users:e,role:r.role,expiration:r.expiration}),r}(t,e)}))}(e),l=s.map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(r,e)}));return Promise.all(l).then(u)}function u(e){var t=e.every((function(e){return e.success})),r=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),n={success:t};return r.length>0&&(n.errors=r),n}},7887:(e,t,r)=>{"use strict";r.d(t,{b:()=>i,L:()=>a});var n=r(743),o=r(2431);function i(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/join";return(0,n.WY)(t,e)}function a(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/leave";return(0,n.WY)(t,e)}},8064:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.id+"/createNotification",r=(0,n.pi)({params:(0,n.pi)({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return(0,o.WY)(t,r)}},6825:(e,t,r)=>{"use strict";r.d(t,{E:()=>i,R:()=>a});var n=r(743),o=r(2431);function i(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/protect";return(0,n.WY)(t,e)}function a(e){var t=(0,o.a)(e)+"/community/groups/"+e.id+"/unprotect";return(0,n.WY)(t,e)}},4269:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(655),o=r(743),i=r(2431),a=r(901);function s(e){var t=e.id,r=e.users,s=(0,i.a)(e)+"/community/groups/"+t+"/removeUsers",u=(0,a.y)(r,25).map((function(t){return r=t,i=(0,n.pi)((0,n.pi)({},e),{users:r,params:{users:r}}),(0,o.WY)(s,i).catch((function(e){return{errors:[e]}}));var r,i}));return Promise.all(u).then((function(e){var t=function(t){return e.filter((function(e){return e[t]})).reduce((function(e,r){return e.concat(r[t])}),[])},r=t("errors"),o={notRemoved:t("notRemoved")};return r.length?(0,n.pi)((0,n.pi)({},o),{errors:r}):o}))}},727:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.id+"/delete",r=(0,n.pi)({},e);return(0,o.WY)(t,r)}},8549:(e,t,r)=>{"use strict";r.d(t,{t:()=>o,N:()=>i});var n=r(8547);function o(e){return(0,n.f)(e,"group")}function i(e){return(0,n.f)(e,"groupContent")}},1250:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var n=r(2431),o=r(743);function i(e){var t=(0,n.a)(e)+"/community/groups/"+e.id+"/updateUsers",r={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?r.params.admins=e.users:r.params.users=e.users,(0,o.WY)(t,r)}},4372:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t=(0,i.a)(e)+"/community/groups/"+e.group.id+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.params),e.group),(0,o.WY)(t,e)}},5501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addItemData:()=>n.JV,addItemRelationship:()=>n.bV,addItemResource:()=>n.zJ,getUserContent:()=>o.l,createFolder:()=>i.L6,createItem:()=>i.fC,createItemInFolder:()=>i.Ae,exportItem:()=>a.V,getItem:()=>s.rV,getItemBaseUrl:()=>s.OF,getItemData:()=>s.m_,getItemGroups:()=>s.tX,getItemInfo:()=>s.Tn,getItemMetadata:()=>s.ff,getItemParts:()=>s.Cs,getItemResource:()=>s.AA,getItemResources:()=>s.C,getItemStatus:()=>s.sy,getRelatedItems:()=>s.oO,protectItem:()=>u.Q,unprotectItem:()=>u.l,reassignItem:()=>l.g,removeFolder:()=>c.Ih,removeItem:()=>c.cl,removeItemRelationship:()=>c.Fr,removeItemResource:()=>c.ug,searchItems:()=>d.K,moveItem:()=>p.uo,updateItem:()=>p.$G,updateItemInfo:()=>p.P2,updateItemResource:()=>p.zy,determineOwner:()=>f.N,serializeItem:()=>f.l,addItemPart:()=>h.cN,cancelItemUpload:()=>h.it,commitItemUpload:()=>h.wd,addGroupUsers:()=>g.i,removeGroupUsers:()=>m.B,inviteGroupUsers:()=>v.e,createGroup:()=>y.s,getGroup:()=>b.ex,getGroupCategorySchema:()=>b.qn,getGroupContent:()=>b.Ye,getGroupUsers:()=>b.rm,searchGroupUsers:()=>b.zv,createGroupNotification:()=>I.$,protectGroup:()=>E.E,unprotectGroup:()=>E.R,removeGroup:()=>O.B,searchGroupContent:()=>C.N,searchGroups:()=>C.t,updateGroup:()=>T.m,updateUserMemberships:()=>A.S,joinGroup:()=>x.b,leaveGroup:()=>x.L,createOrgNotification:()=>D.D,getUser:()=>P.P,getUserTags:()=>R.d,getUserUrl:()=>_.X,acceptInvitation:()=>k.Tg,declineInvitation:()=>k.Ak,getUserInvitation:()=>k.rm,getUserInvitations:()=>k.OR,getUserNotifications:()=>N.g,removeNotification:()=>N.F,searchUsers:()=>M.p,updateUser:()=>j.N,setItemAccess:()=>L.z,ensureMembership:()=>U.W,shareItemWithGroup:()=>U.J,unshareItemWithGroup:()=>F.l,isItemSharedWithGroup:()=>$.w,getSharingUrl:()=>B.Zl,getUserMembership:()=>B.Xj,isItemOwner:()=>B.$Z,isOrgAdmin:()=>B.RN,getUniqueServiceName:()=>W.h,isServiceNameAvailable:()=>G.N,getPortal:()=>V._,getSelf:()=>V.A,getPortalSettings:()=>q.H,getPortalUrl:()=>z.a,getSubscriptionInfo:()=>H.J,scrubControlChars:()=>Y._,SearchQueryBuilder:()=>X.q});var n=r(7845),o=r(4657),i=r(1512),a=r(5953),s=r(6598),u=r(5382),l=r(194),c=r(3634),d=r(5128),p=r(8739),f=r(9538),h=r(9100),g=r(3135),m=r(4269),v=r(5323),y=r(7255),b=r(6765),S=r(4502),w={};for(const e in S)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItem","createItemInFolder","exportItem","getItem","getItemBaseUrl","getItemData","getItemGroups","getItemInfo","getItemMetadata","getItemParts","getItemResource","getItemResources","getItemStatus","getRelatedItems","protectItem","unprotectItem","reassignItem","removeFolder","removeItem","removeItemRelationship","removeItemResource","searchItems","moveItem","updateItem","updateItemInfo","updateItemResource","determineOwner","serializeItem","addItemPart","cancelItemUpload","commitItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers"].indexOf(e)<0&&(w[e]=()=>S[e]);r.d(t,w);var I=r(8064),E=r(6825),O=r(727),C=r(8549),T=r(4372),A=r(1250),x=r(7887),D=r(5621),P=r(8818),R=r(8649),_=r(4203),k=r(7357),N=r(3264),M=r(8),j=r(1437),L=r(5582),U=r(3809),F=r(8521),$=r(2049),B=r(9207),W=r(3826),G=r(2827),V=r(1046),q=r(4570),z=r(2431),H=r(3379),Y=r(5126),J=r(5522);w={};for(const e in J)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItem","createItemInFolder","exportItem","getItem","getItemBaseUrl","getItemData","getItemGroups","getItemInfo","getItemMetadata","getItemParts","getItemResource","getItemResources","getItemStatus","getRelatedItems","protectItem","unprotectItem","reassignItem","removeFolder","removeItem","removeItemRelationship","removeItemResource","searchItems","moveItem","updateItem","updateItemInfo","updateItemResource","determineOwner","serializeItem","addItemPart","cancelItemUpload","commitItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers","createGroupNotification","protectGroup","unprotectGroup","removeGroup","searchGroupContent","searchGroups","updateGroup","updateUserMemberships","joinGroup","leaveGroup","createOrgNotification","getUser","getUserTags","getUserUrl","acceptInvitation","declineInvitation","getUserInvitation","getUserInvitations","getUserNotifications","removeNotification","searchUsers","updateUser","setItemAccess","ensureMembership","shareItemWithGroup","unshareItemWithGroup","isItemSharedWithGroup","getSharingUrl","getUserMembership","isItemOwner","isOrgAdmin","getUniqueServiceName","isServiceNameAvailable","getPortal","getSelf","getPortalSettings","getPortalUrl","getSubscriptionInfo","scrubControlChars"].indexOf(e)<0&&(w[e]=()=>J[e]);r.d(t,w);var X=r(6761)},7845:(e,t,r)=>{"use strict";r.d(t,{JV:()=>l,bV:()=>c,zJ:()=>d});var n=r(655),o=r(4037),i=r(743),a=r(2431),s=r(9538),u=r(8739);function l(e){var t=(0,n.pi)({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,(0,u.$G)(t)}function c(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/addRelationship",s=(0,o.t)(e,["originItemId","destinationItemId","relationshipType"],{params:(0,n.pi)({},e.params)});return(0,i.WY)(r,s)}))}function d(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=(0,n.pi)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),(0,i.WY)(r,e)}))}},4657:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var n=r(743),o=r(2431),i=r(9538),a=function(e){var t=e.folderId,r=e.start,a=void 0===r?1:r,s=e.num,u=void 0===s?10:s,l=e.authentication,c=t?"/"+t:"";return(0,i.N)(e).then((function(t){return(0,o.a)(e)+"/content/users/"+t+c})).then((function(e){return(0,n.WY)(e,{httpMethod:"GET",authentication:l,params:{start:a,num:u}})}))}},1512:(e,t,r)=>{"use strict";r.d(t,{L6:()=>u,Ae:()=>l,fC:()=>c});var n=r(655),o=r(743),i=r(4037),a=r(2431),s=r(9538);function u(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/createFolder";return e.params=(0,n.pi)({title:e.title},e.params),(0,o.WY)(r,e)}))}function l(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t,u=r+"/addItem";e.folderId&&(u=r+"/"+e.folderId+"/addItem"),e.params=(0,n.pi)((0,n.pi)({},e.params),(0,s.l)(e.item));var l=(0,i.t)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(u,l)}))}function c(e){return l((0,n.pi)({folderId:null},e))}},5953:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var n=r(743),o=r(9538),i=r(2431),a=function(e){var t=e.authentication,r=e.id,a=e.title,s=e.exportFormat,u=e.exportParameters;return(0,o.N)(e).then((function(t){return(0,i.a)(e)+"/content/users/"+t+"/export"})).then((function(e){return(0,n.WY)(e,{httpMethod:"POST",authentication:t,params:{itemId:r,title:a,exportFormat:s,exportParameters:u}})}))}},6598:(e,t,r)=>{"use strict";r.d(t,{rV:()=>l,OF:()=>c,m_:()=>d,oO:()=>p,C:()=>f,AA:()=>h,tX:()=>g,sy:()=>m,Cs:()=>v,Tn:()=>y,ff:()=>b});var n=r(655),o=r(743),i=r(4037),a=r(2431),s=r(5126),u=r(9538);function l(e,t){var r=c(e,t),i=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(r,i)}var c=function(e,t){return("string"==typeof t?t:(0,a.a)(t))+"/content/items/"+e};function d(e,t){var r=c(e,t)+"/data",i=(0,n.pi)({httpMethod:"GET",params:{}},t);return i.file&&(i.params.f=null),(0,o.WY)(r,i).catch((function(e){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function p(e){var t=c(e.id,e)+"/relatedItems",r=(0,n.pi)({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?r.params.relationshipType=e.relationshipType:r.params.relationshipTypes=e.relationshipType,delete r.direction,delete r.relationshipType,(0,o.WY)(t,r)}function f(e,t){var r=c(e,t)+"/resources",i=(0,n.pi)({},t);return i.params=(0,n.pi)({num:1e3},i.params),(0,o.WY)(r,i)}function h(e,t){var r=t.readAs||"blob";return S(e,"/resources/"+t.fileName,r,t)}function g(e,t){var r=c(e,t)+"/groups";return(0,o.WY)(r,t)}function m(e){return(0,u.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/status",s=(0,i.t)(e,["jobId","jobType"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(r,s)}))}function v(e){return(0,u.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/parts";return(0,o.WY)(r,e)}))}function y(e,t){var r=t||{},o=r.fileName,i=void 0===o?"iteminfo.xml":o,a=r.readAs;return S(e,"/info/"+i,void 0===a?"text":a,(0,n.pi)({httpMethod:"GET"},t))}function b(e,t){return y(e,(0,n.pi)((0,n.pi)({},t),{fileName:"metadata/metadata.xml"}))}function S(e,t,r,i){var a=""+c(e,i)+t,u=(0,n.pi)({params:{}},i),l=u.rawResponse;return u.rawResponse=!0,u.params.f=null,(0,o.WY)(a,u).then((function(e){return l?e:"json"!==r?e[r]():e.text().then((function(e){return JSON.parse((0,s._)(e))}))}))}},9538:(e,t,r)=>{"use strict";function n(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function o(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}r.d(t,{l:()=>n,N:()=>o})},5382:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a,l:()=>s});var n=r(743),o=r(2431),i=r(9538);function a(e){return(0,i.N)(e).then((function(t){var r=(0,o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/protect";return(0,n.WY)(r,e)}))}function s(e){return(0,i.N)(e).then((function(t){var r=(0,o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect";return(0,n.WY)(r,e)}))}},194:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n=r(743),o=r(2431),i=r(9207);function a(e){return(0,i.RN)(e).then((function(t){if(!t)throw Error("Item "+e.id+" can not be reassigned because current user is not an organization administrator.");var r=(0,o.a)(e)+"/content/users/"+e.currentOwner+"/items/"+e.id+"/reassign",i={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return(0,n.WY)(r,i)}))}},3634:(e,t,r)=>{"use strict";r.d(t,{cl:()=>u,Fr:()=>l,ug:()=>c,Ih:()=>d});var n=r(655),o=r(743),i=r(4037),a=r(2431),s=r(9538);function u(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/delete";return(0,o.WY)(r,e)}))}function l(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/deleteRelationship",s=(0,i.t)(e,["originItemId","destinationItemId","relationshipType"],{params:(0,n.pi)({},e.params)});return(0,o.WY)(r,s)}))}function c(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=(0,n.pi)((0,n.pi)({},e.params),{resource:e.resource}),void 0!==e.deleteAll&&(e.params.deleteAll=e.deleteAll),(0,o.WY)(r,e)}))}function d(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete";return(0,o.WY)(r,e)}))}},5128:(e,t,r)=>{"use strict";r.d(t,{K:()=>o});var n=r(8547);function o(e){return(0,n.f)(e,"item")}},8739:(e,t,r)=>{"use strict";r.d(t,{$G:()=>s,P2:()=>u,zy:()=>l,uo:()=>c});var n=r(655),o=r(743),i=r(2431),a=r(9538);function s(e){return(0,a.N)(e).then((function(t){var r=e.folderId?(0,i.a)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":(0,i.a)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.params),(0,a.l)(e.item)),(0,o.WY)(r,e)}))}function u(e){return(0,a.N)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateinfo";return e.params=(0,n.pi)({folderName:e.folderName,file:e.file},e.params),(0,o.WY)(r,e)}))}function l(e){return(0,a.N)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=(0,n.pi)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),(0,o.WY)(r,e)}))}function c(e){return(0,a.N)(e).then((function(t){var r=(0,i.a)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",a=e.folderId;return a||(a="/"),e.params=(0,n.pi)({folder:a},e.params),(0,o.WY)(r,e)}))}},9100:(e,t,r)=>{"use strict";r.d(t,{cN:()=>u,wd:()=>l,it:()=>c});var n=r(655),o=r(4037),i=r(743),a=r(2431),s=r(9538);function u(e){var t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):(0,s.N)(e).then((function(r){var s=(0,a.a)(e)+"/content/users/"+r+"/items/"+e.id+"/addPart?partNum="+t,u=(0,o.t)(e,["file"],{params:(0,n.pi)({},e.params)});return(0,i.WY)(s,u)}))}function l(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/commit",u=(0,o.t)(e,[],{params:(0,n.pi)((0,n.pi)({},e.params),(0,s.l)(e.item))});return(0,i.WY)(r,u)}))}function c(e){return(0,s.N)(e).then((function(t){var r=(0,a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/cancel";return(0,i.WY)(r,e)}))}},5621:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(655),o=r(743),i=r(2431),a=r(901);function s(e){var t=(0,i.a)(e)+"/portals/self/createNotification",r=function(e){return(0,a.y)(e.users,e.batchSize||25).map((function(t){return function(e,t){var r=Object.assign({},t);return r.params=(0,n.pi)((0,n.pi)({},r.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:r.notificationChannelType}),r}(t,e)}))}(e),s=r.map((function(e){return function(e,t){return(0,o.WY)(e,t).catch((function(e){return{errors:[e]}}))}(t,e)}));return Promise.all(s).then(u)}function u(e){var t=e.every((function(e){return e.success})),r=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),n={success:t};return r.length>0&&(n.errors=r),n}},3826:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var n=r(2827);function o(e,t,r,i){var a=e;return i&&(a=e+"_"+i),(0,n.N)(a,t,r).then((function(n){return n.available?a:o(e,t,r,i+=1)}))}},2827:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var n=r(743);function o(e,t,r){var o=r.portal+"/portals/self/isServiceNameAvailable";return(0,n.WY)(o,{params:{name:e,type:t},httpMethod:"GET",authentication:r})}},5582:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var n=r(655),o=r(743),i=r(9207);function a(e){var t=(0,i.Zl)(e);return(0,i.$Z)(e)?s(t,e):(0,i.RN)(e).then((function(r){if(r)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=(0,n.pi)({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),(0,o.WY)(e,t)}},9207:(e,t,r)=>{"use strict";r.d(t,{Zl:()=>i,$Z:()=>a,RN:()=>s,Xj:()=>u});var n=r(2431),o=r(6765);function i(e){var t=e.authentication.username,r=e.owner||t;return(0,n.a)(e)+"/content/users/"+encodeURIComponent(r)+"/items/"+e.id+"/share"}function a(e){var t=e.authentication.username;return(e.owner||t)===t}function s(e){return e.authentication.getUser(e).then((function(e){return e&&"org_admin"===e.role&&!e.roleId}))}function u(e){return(0,o.ex)(e.groupId,e).then((function(e){return e.userMembership.memberType})).catch((function(){return"none"}))}},2049:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var n=r(5128);function o(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"};return(0,n.K)(t).then((function(t){if(t.total>0)return t.results.some((function(t){return t.id===e.id}))}))}},3809:(e,t,r)=>{"use strict";r.d(t,{J:()=>d,W:()=>f});var n=r(743),o=r(2431),i=r(9207),a=r(8818),s=r(3135),u=r(4269),l=r(1250),c=r(2049);function d(e){return(0,c.w)(e).then((function(t){if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};var r=e.authentication.username,n=e.owner,o=e.confirmItemControl,s=n||r;if(s!==r){var u=!1,l=!1;return Promise.all([(0,a.P)({username:r,authentication:e.authentication}),(0,a.P)({username:s,authentication:e.authentication}),(0,i.Xj)(e)]).then((function(t){var r=t[0],n=t[1],i=t[2],a=!!o;return u="org_admin"===r.role&&!r.roleId,l=r.orgId!==n.orgId,function(e,t,r,n,o,i){var a=[];if(i.groupId!==e.favGroupId)if(t){if(!n)throw Error("This item can not be shared to shared editing group "+i.groupId+" by "+e.username+" as they not the item owner or org admin.");a.push(f(e,e,!1,"Error adding "+e.username+" as member to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i),f(e,o,!0,"none"===r?"Error adding user "+o.username+" to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.":"Error promoting user "+o.username+" to admin in edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i))}else if(n)a.push(f(e,e,!1,"Error adding "+e.username+" as member to view group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i));else if("none"===r)throw new Error("This item can not be shared by "+e.username+" as they are not a member of the specified group "+i.groupId+".");return a}(r,a,i,u,n,e)})).then((function(t){var r=t[0],n=(void 0===r?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:r).revert;return Promise.all(t.map((function(e){return e.promise}))).then((function(){return p(e,u,l)})).then((function(e){return n(e)}))}))}return p(e)})).then((function(t){if(t.notSharedWith.length)throw Error("Item "+e.id+" could not be shared to group "+e.groupId+".");return t}))}function p(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=e.authentication.username,a=e.owner||i,s=(0,o.a)(e)+"/content/items/"+e.id+"/share";return(a===i||t&&!r)&&(s=(0,o.a)(e)+"/content/users/"+a+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},(0,n.WY)(s,e)}function f(e,t,r,n,o){var i,a,c,d=t.groups||[],p=d.find((function(e){return e.id===o.groupId}));if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+o.groupId+" nor can item "+o.id+" be shared to the group.");if(!p&&d.length>511)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+o.groupId+". Consequently item "+o.id+" can not be shared to the group.");if(p)r&&"member"===p.userMembership.memberType?(a=(0,l.S)({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then((function(e){var t=e.results.reduce((function(e,t){return t.success||e.push(t.username),e}),[]);return Promise.resolve({notAdded:t})})).catch((function(){return{notAdded:[t.username]}})),c=function(e){return(0,l.S)({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then((function(){return e})).catch((function(){return e}))}):(a=Promise.resolve({notAdded:[]}),c=function(e){return Promise.resolve(e)});else{var f=r?"admins":"users";a=(0,s.i)((i={id:o.groupId},i[f]=[t.username],i.authentication=o.authentication,i)).then((function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((function(){return{notAdded:[t.username]}})),c=function(e){return(0,u.B)({id:o.groupId,users:[t.username],authentication:o.authentication}).then((function(){return e}))}}return{promise:a.then((function(e){if(e.notAdded.length)throw new Error(n);return e})),revert:c}}},8521:(e,t,r)=>{"use strict";r.d(t,{l:()=>u});var n=r(743),o=r(2431),i=r(9207),a=r(2049),s=r(8818);function u(e){return(0,a.w)(e).then((function(t){if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});var r=e.authentication.username,a=e.owner;return Promise.all([(0,i.Xj)(e),(0,s.P)({username:r,authentication:e.authentication})]).then((function(t){var i=t[0],s=t[1],u=(a||r)===r,l="org_admin"===s.role&&!s.roleId;if(!u&&!l&&["admin","owner"].indexOf(i)<0)throw Error("This item can not be unshared from group "+e.groupId+" by "+r+" as they not the item owner, an org admin, group admin or group owner.");return function(e){var t=e.authentication.username,r=e.owner||t,i=(0,o.a)(e)+"/content/items/"+e.id+"/unshare";return r===t&&(i=(0,o.a)(e)+"/content/users/"+r+"/items/"+e.id+"/unshare"),e.params={groups:e.groupId},(0,n.WY)(i,e)}(e)})).then((function(t){if(t.notUnsharedFrom.length)throw Error("Item "+e.id+" could not be unshared to group "+e.groupId);return t}))}))}},8649:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(743),o=r(2431);function i(e){var t=e.username||e.authentication.username,r=(0,o.a)(e)+"/community/users/"+encodeURIComponent(t)+"/tags";return(0,n.WY)(r,e)}},4203:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var n=r(2431);function o(e){return(0,n.a)(e)+"/community/users/"+encodeURIComponent(e.username)}},8818:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t,r={httpMethod:"GET"};if("string"==typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var a=e.username||e.authentication.username;t=(0,i.a)(e)+"/community/users/"+encodeURIComponent(a),r=(0,n.pi)((0,n.pi)({},e),r)}return(0,o.WY)(t,r)}},7357:(e,t,r)=>{"use strict";r.d(t,{OR:()=>a,rm:()=>s,Tg:()=>u,Ak:()=>l});var n=r(655),o=r(743),i=r(2431);function a(e){var t={httpMethod:"GET"},r=encodeURIComponent(e.authentication.username),a=(0,i.a)(e)+"/community/users/"+r+"/invitations";return t=(0,n.pi)((0,n.pi)({},e),t),(0,o.WY)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId,a={httpMethod:"GET"};return a=(0,n.pi)((0,n.pi)({},e),a),(0,o.WY)(r,a)}function u(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",a=(0,n.pi)({},e);return(0,o.WY)(r,a)}function l(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",a=(0,n.pi)({},e);return(0,o.WY)(r,a)}},3264:(e,t,r)=>{"use strict";r.d(t,{g:()=>a,F:()=>s});var n=r(655),o=r(743),i=r(2431);function a(e){var t={httpMethod:"GET"},r=encodeURIComponent(e.authentication.username),a=(0,i.a)(e)+"/community/users/"+r+"/notifications";return t=(0,n.pi)((0,n.pi)({},e),t),(0,o.WY)(a,t)}function s(e){var t=encodeURIComponent(e.authentication.username),r=(0,i.a)(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete";return(0,o.WY)(r,e)}},8:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(8547);function o(e){return(0,n.f)(e,"user")}},1437:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e){var t=e.user.username||e.authentication.username,r=(0,i.a)(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=(0,n.pi)((0,n.pi)({},e.user),e.params),delete e.user,(0,o.WY)(r,e)}},6761:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var n=r(5297),o=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):((0,n.Z)(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?((0,n.Z)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?((0,n.Z)('`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01").  Your query was not modified.'),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?((0,n.Z)('`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01"). Your query was not modified.'),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?((0,n.Z)("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?((0,n.Z)("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.needsQuotes=function(e){return/\s|:/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.needsQuotes(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(t){return e.formatTerm(t)})).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for((0,n.Z)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&(0,n.Z)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}()},901:(e,t,r)=>{"use strict";function n(e,t){if(0===e.length)return[];for(var r=[],n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}r.d(t,{y:()=>n})},8547:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var n=r(4037),o=r(743),i=r(6761),a=r(2431);function s(e,t){var r,u;switch(r="string"==typeof e||e instanceof i.q?{httpMethod:"GET",params:{q:e}}:(0,n.t)(e,["q","num","start","sortField","sortOrder","searchUserAccess","searchUserName"],{httpMethod:"GET"}),t){case"item":u="/search";break;case"group":u="/community/groups";break;case"groupContent":if("string"==typeof e||e instanceof i.q||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));u="/content/groups/"+e.groupId+"/search";break;default:u="/portals/self/users/search"}var l=(0,a.a)(r)+u;return(0,o.WY)(l,r).then((function(r){return r.nextStart&&-1!==r.nextStart&&(r.nextPage=function(){var n;return"string"==typeof e||e instanceof i.q?n={q:e,start:r.nextStart}:(n=e).start=r.nextStart,s(n,t)}),r}))}},4570:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r+"/settings",s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},2431:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var n=r(4734);function o(e){return void 0===e&&(e={}),e.portal?(0,n.b)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},1046:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,_:()=>s});var n=r(655),o=r(743),i=r(2431);function a(e){return s(null,e)}function s(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r,s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},3379:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n=r(655),o=r(743),i=r(2431);function a(e,t){var r=e||"self",a=(0,i.a)(t)+"/portals/"+r+"/subscriptionInfo",s=(0,n.pi)({httpMethod:"GET"},t);return(0,o.WY)(a,s)}},5126:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=/[\x00-\x1F\x7F-\x9F\xA0]/g;function o(e){return e.replace(n,"")}},5522:()=>{},7825:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArcGISAuthError:()=>n.ah,NODEJS_DEFAULT_REFERER_HEADER:()=>n.cv,checkForErrors:()=>n.Pl,request:()=>n.WY,setDefaultRequestOptions:()=>n.Tb,appendCustomParams:()=>o.t,ArcGISRequestError:()=>i.y,cleanUrl:()=>a.b,encodeFormData:()=>s.h,encodeParam:()=>u.i,encodeQueryString:()=>u.t,decodeParam:()=>l.Z,decodeQueryString:()=>l.N,ErrorTypes:()=>c.Z,processParams:()=>I.T,requiresFormData:()=>I.N,warn:()=>C.Z});var n=r(743),o=r(4037),i=r(7705),a=r(4734),s=r(5091),u=r(9836),l=r(2508),c=r(1086),d=r(6025),p={};for(const e in d)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>d[e]);r.d(t,p);var f=r(4990);p={};for(const e in f)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>f[e]);r.d(t,p);var h=r(8546);p={};for(const e in h)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>h[e]);r.d(t,p);var g=r(8372);p={};for(const e in g)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>g[e]);r.d(t,p);var m=r(1346);p={};for(const e in m)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>m[e]);r.d(t,p);var v=r(1795);p={};for(const e in v)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>v[e]);r.d(t,p);var y=r(8462);p={};for(const e in y)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>y[e]);r.d(t,p);var b=r(7274);p={};for(const e in b)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>b[e]);r.d(t,p);var S=r(5431);p={};for(const e in S)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>S[e]);r.d(t,p);var w=r(961);p={};for(const e in w)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(e)<0&&(p[e]=()=>w[e]);r.d(t,p);var I=r(8060),E=r(3739);p={};for(const e in E)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(p[e]=()=>E[e]);r.d(t,p);var O=r(125);p={};for(const e in O)["default","ArcGISAuthError","NODEJS_DEFAULT_REFERER_HEADER","checkForErrors","request","setDefaultRequestOptions","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","processParams","requiresFormData"].indexOf(e)<0&&(p[e]=()=>O[e]);r.d(t,p);var C=r(5297)},743:(e,t,r)=>{"use strict";r.d(t,{cv:()=>l,Tb:()=>d,ah:()=>p,Pl:()=>f,WY:()=>h});var n=r(655),o=r(5091),i=r(9836),a=r(8060),s=r(7705),u=r(5297),l="@esri/arcgis-rest-js",c={httpMethod:"POST",params:{f:"json"}};function d(e,t){e.authentication&&!t&&(0,u.Z)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),c=e}var p=function(e){function t(t,r,n,o,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===r&&(r="AUTHENTICATION_ERROR_CODE");var a=e.call(this,t,r,n,o,i)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===r?t:r+": "+t,a}return(0,n.ZT)(t,e),t.prototype.retry=function(e,t){var r=this;void 0===t&&(t=3);var o=0,i=function(a,s){e(r.url,r.options).then((function(e){var t=(0,n.pi)((0,n.pi)({},r.options),{authentication:e});return o+=1,h(r.url,t)})).then((function(e){a(e)})).catch((function(e){"ArcGISAuthError"===e.name&&o<t?i(a,s):"ArcGISAuthError"===e.name&&o>=t?s(r):s(e)}))};return new Promise((function(e,t){i(e,t)}))},t}(s.y);function f(e,t,r,n,o){if(e.code>=400){var i=e.message,a=e.code;throw new s.y(i,a,e,t,n)}if(e.error){var u=e.error,l=(i=u.message,a=u.code,u.messageCode),c=l||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===l||400===a&&"Unable to generate token."===i)throw o||new p(i,c,e,t,n);throw new s.y(i,c,e,t,n)}if("failed"===e.status||"failure"===e.status){i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,a=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new s.y(i,a,e,t,n)}return e}function h(e,t){void 0===t&&(t={params:{f:"json"}});var r=(0,n.pi)((0,n.pi)((0,n.pi)({httpMethod:"POST"},c),t),{params:(0,n.pi)((0,n.pi)({},c.params),t.params),headers:(0,n.pi)((0,n.pi)({},c.headers),t.headers)}),u=[],d=[];if(r.fetch||"undefined"==typeof fetch?(u.push("`fetch`"),d.push("`node-fetch`")):r.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(u.push("`Promise`"),d.push("`es6-promise`")),"undefined"==typeof FormData&&(u.push("`FormData`"),d.push("`isomorphic-form-data`")),!r.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+u.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var p=r.httpMethod,h=r.authentication,g=r.rawResponse,m=(0,n.pi)({f:"json"},r.params),v=null,y={method:p,credentials:r.credentials||"same-origin"};return r.headers&&r.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(y.credentials="include"),(h?h.getToken(e,{fetch:r.fetch}).catch((function(t){return t.url=e,t.options=r,v=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(m.token=t),h&&h.getDomainCredentials&&(y.credentials=h.getDomainCredentials(e));var s={};if("GET"===y.method){m.token&&r.hideToken&&"undefined"==typeof window&&(s["X-Esri-Authorization"]="Bearer "+m.token,delete m.token);var u=""===(0,i.t)(m)?e:e+"?"+(0,i.t)(m);r.maxUrlLength&&u.length>r.maxUrlLength||m.token&&r.hideToken?(y.method="POST",t.length&&r.hideToken&&(m.token=t,delete s["X-Esri-Authorization"])):e=u}var c=new RegExp("/items/.+/updateResources").test(e);return"POST"===y.method&&(y.body=(0,o.h)(m,c)),y.headers=(0,n.pi)((0,n.pi)({},s),r.headers),"undefined"!=typeof window||y.headers.referer||(y.headers.referer=l),(0,a.N)(m)||c||(y.headers["Content-Type"]="application/x-www-form-urlencoded"),r.fetch(e,y)})).then((function(t){if(!t.ok){var n=t.status,o=t.statusText;throw new s.y(o,"HTTP "+n,t,e,r)}if(g)return t;switch(m.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==m.f&&"geojson"!==m.f||g)return t;var n=f(t,e,0,r,v);if(v){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];r.authentication.federatedServers[o]={token:[],expires:new Date(Date.now()+864e5)},v=null}return n}))}},7705:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n=function(e,t,r,n,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=o};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},1086:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>n}),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(n||(n={}))},6025:()=>{},4990:()=>{},8546:()=>{},8372:()=>{},1346:()=>{},8462:()=>{},1795:()=>{},7274:()=>{},5431:()=>{},961:()=>{},3739:()=>{},4037:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(655);function o(e,t,r){var o=(0,n.pi)((0,n.pi)({params:{}},r),e);return o.params=t.reduce((function(t,r){return(e[r]||"boolean"==typeof e[r])&&(t[r]=e[r]),t}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{})}},4734:(e,t,r)=>{"use strict";function n(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}r.d(t,{b:()=>n})},2508:(e,t,r)=>{"use strict";function n(e){var t=e.split("="),r=t[0],n=t[1];return{key:decodeURIComponent(r),value:decodeURIComponent(n)}}function o(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var r=n(t),o=r.key,i=r.value;return e[o]=i,e}),{})}r.d(t,{Z:()=>n,N:()=>o})},5091:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(8060),o=r(9836);function i(e,t){var r=(0,n.N)(e)||t,i=(0,n.T)(e);if(r){var a=new FormData;return Object.keys(i).forEach((function(e){if("undefined"!=typeof Blob&&i[e]instanceof Blob){var t=i.fileName||i[e].name||e;a.append(e,i[e],t)}else a.append(e,i[e])})),a}return(0,o.t)(e)}},9836:(e,t,r)=>{"use strict";r.d(t,{i:()=>o,t:()=>i});var n=r(8060);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return o(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e){var t=(0,n.T)(e);return Object.keys(t).map((function(e){return o(e,t[e])})).join("&")}},8060:(e,t,r)=>{"use strict";function n(e){return Object.keys(e).some((function(t){var r=e[t];if(!r)return!1;switch(r&&r.toParam&&(r=r.toParam()),r.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){var t={};return Object.keys(e).forEach((function(r){var n,o,i=e[r];if(i&&i.toParam&&(i=i.toParam()),i||0===i||"boolean"==typeof i||"string"==typeof i){var a;switch(i.constructor.name){case"Array":var s=null===(o=null===(n=i[0])||void 0===n?void 0:n.constructor)||void 0===o?void 0:o.name;a="Array"===s?i:"Object"===s?JSON.stringify(i):i.join(",");break;case"Object":a=JSON.stringify(i);break;case"Date":a=i.valueOf();break;case"Function":a=null;break;case"Boolean":a=i+"";break;default:a=i}(a||0===a||"string"==typeof a||Array.isArray(a))&&(t[r]=a)}})),t}r.d(t,{N:()=>n,T:()=>o})},125:()=>{},5297:(e,t,r)=>{"use strict";function n(e){console&&console.warn&&console.warn.apply(console,[e])}r.d(t,{Z:()=>n})},4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},2667:(e,t,r)=>{var n=r(9950),o=r(5419);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||n.whiteList,e.onAttr=e.onAttr||n.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||n.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||n.safeAttrValue,this.options=e}r(7381),a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return o(e,(function(e,t,o,u,l){var c=r[o],d=!1;if(!0===c?d=c:"function"==typeof c?d=c(u):c instanceof RegExp&&(d=c.test(u)),!0!==d&&(d=!1),u=s(o,u)){var p,f={position:t,sourcePosition:e,source:l,isWhite:d};return d?i(p=n(o,u,f))?o+":"+u:p:i(p=a(o,u,f))?void 0:p}}))},e.exports=a},9950:(e,t)=>{function r(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var n=/javascript\s*\:/gim;t.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},t.getDefaultWhiteList=r,t.onAttr=function(e,t,r){},t.onIgnoreAttr=function(e,t,r){},t.safeAttrValue=function(e,t){return n.test(t)?"":t}},9970:(e,t,r)=>{var n=r(9950),o=r(2667);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,n)t[i]=n[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},5419:(e,t,r)=>{var n=r(7381);e.exports=function(e,t){";"!==(e=n.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,o=!1,i=0,a=0,s="";function u(){if(!o){var r=n.trim(e.slice(i,a)),u=r.indexOf(":");if(-1!==u){var l=n.trim(r.slice(0,u)),c=n.trim(r.slice(u+1));if(l){var d=t(i,s.length,l,c,r);d&&(s+=d+"; ")}}}i=a+1}for(;a<r;a++){var l=e[a];if("/"===l&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,o=!1}else"("===l?o=!0:")"===l?o=!1:";"===l?o||u():"\n"===l&&u()}return n.trim(s)}},7381:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},4020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=i(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="";for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},3162:function(e,t,r){var n;void 0===(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,r,a){var s=i.URL||i.webkitURL,u=document.createElement("a");r=r||e.name||"download",u.download=r,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?o(u):n(u.href)?t(e,r,a):o(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,i){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),r);else if(n(e))t(e,r,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){o(a)}))}}:function(e,r,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var s="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&u||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s}.apply(t,[]))||(e.exports=n)},2806:e=>{"use strict";e.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(o?-1!==t.indexOf(a):t(a,s,e))&&(r[a]=s)}return r}},8679:(e,t,r)=>{"use strict";var n=r(9864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return n.isMemo(e)?a:s[e.$$typeof]||o}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(h){var o=f(r);o&&o!==h&&e(t,o,n)}var a=c(r);d&&(a=a.concat(d(r)));for(var s=u(t),g=u(r),m=0;m<a.length;++m){var v=a[m];if(!(i[v]||n&&n[v]||g&&g[v]||s&&s[v])){var y=p(r,v);try{l(t,v,y)}catch(e){}}}}return t}},6128:e=>{"use strict";e.exports=function(e,t,r,n,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,a,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},1296:(e,t,r)=>{var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return c.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=i.test(e);return r||a.test(e)?s(e.slice(2),r?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,r){var n,o,i,a,s,u,l=0,c=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=n,i=o;return n=o=void 0,l=t,a=e.apply(i,r)}function b(e){return l=e,s=setTimeout(w,t),c?y(e):a}function S(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-l>=i}function w(){var e=h();if(S(e))return I(e);s=setTimeout(w,function(e){var r=t-(e-u);return d?f(r,i-(e-l)):r}(e))}function I(e){return s=void 0,v&&n?y(e):(n=o=void 0,a)}function E(){var e=h(),r=S(e);if(n=arguments,o=this,u=e,r){if(void 0===s)return b(u);if(d)return s=setTimeout(w,t),y(u)}return void 0===s&&(s=setTimeout(w,t)),a}return t=m(t)||0,g(r)&&(c=!!r.leading,i=(d="maxWait"in r)?p(m(r.maxWait)||0,t):i,v="trailing"in r?!!r.trailing:v),E.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=u=o=s=void 0},E.flush=function(){return void 0===s?a:I(h())},E}},3096:(e,t,r)=>{var n="Expected a function",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,g=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=a.test(e);return r||s.test(e)?u(e.slice(2),r?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(n);return m(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),function(e,t,r){var o,i,a,s,u,l,c=0,d=!1,p=!1,y=!0;if("function"!=typeof e)throw new TypeError(n);function b(t){var r=o,n=i;return o=i=void 0,c=t,s=e.apply(n,r)}function S(e){return c=e,u=setTimeout(I,t),d?b(e):s}function w(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-c>=a}function I(){var e=g();if(w(e))return E(e);u=setTimeout(I,function(e){var r=t-(e-l);return p?h(r,a-(e-c)):r}(e))}function E(e){return u=void 0,y&&o?b(e):(o=i=void 0,s)}function O(){var e=g(),r=w(e);if(o=arguments,i=this,l=e,r){if(void 0===u)return S(l);if(p)return u=setTimeout(I,t),b(l)}return void 0===u&&(u=setTimeout(I,t)),s}return t=v(t)||0,m(r)&&(d=!!r.leading,a=(p="maxWait"in r)?f(v(r.maxWait)||0,t):a,y="trailing"in r?!!r.trailing:y),O.cancel=function(){void 0!==u&&clearTimeout(u),c=0,o=l=i=u=void 0},O.flush=function(){return void 0===u?s:E(g())},O}(e,t,{leading:o,maxWait:t,trailing:i})}},9593:(e,t,r)=>{"use strict";const n=r(4411),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),l=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,g=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(m(e,t)){if(y(e,n),!e[s])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]},v=e=>{if(e[i]>e[o])for(let t=e[d].tail;e[i]>e[o]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[i]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class b{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const S=(e,t,r,n)=>{let o=r.value;m(e,o)&&(y(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[l]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,v(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,v(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[i]=0,this[d].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),v(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;S(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;S(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[l]&&this[d]&&this[d].length&&this[d].forEach((e=>this[l](e.key,e.value))),this[p]=new Map,this[d]=new n,this[i]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](t,e);if(this[p].has(e)){if(s>this[o])return y(this,this[p].get(e)),!1;const a=this[p].get(e).value;return this[l]&&(this[c]||this[l](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),v(this),!0}const f=new b(e,t,s,n,r);return f.length>this[o]?(this[l]&&this[l](e,t),!1):(this[i]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),v(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},2703:(e,t,r)=>{"use strict";var n=r(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},5697:(e,t,r)=>{e.exports=r(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7563:(e,t,r)=>{"use strict";const n=r(610),o=r(4020),i=r(500),a=r(2806),s=Symbol("encodeFragmentIdentifier");function u(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?o(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function p(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=p(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){u((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!o&&c(r,e).includes(e.arrayFormatSeparator);r=i?c(r,e):r;const a=o||i?r.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===r?r:c(r,e);n[t]=a};case"bracket-separator":return(t,r,n)=>{const o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o)return void(n[t]=r?c(r,e):r);const i=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>c(t,e)));void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){if(""===o)continue;let[e,a]=i(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:c(a,t),r(c(e,t),a,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=h(r[e],t);else n[e]=h(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=d(r):e[t]=r,e}),Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";u((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[",o,"]"].join("")]:[...r,[l(t,e),"[",l(o,e),"]=",l(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:(o=null===o?"":o,0===n.length?[[l(r,e),t,l(o,e)].join("")]:[[n,l(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,l(t,e)]:[...r,[l(t,e),"=",l(n,e)].join("")]}}(t),o={};for(const t of Object.keys(e))r(t)||(o[t]=e[t]);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map((r=>{const o=e[r];return void 0===o?"":null===o?l(r,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":o.reduce(n(r),[]).join("&"):l(r,t)+"="+l(o,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=i(e,"#");return Object.assign({url:r.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[s]:!0},r);const n=p(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),a=Object.assign(i,e.query);let u=t.stringify(a,r);u&&(u=`?${u}`);let c=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${r[s]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${n}${u}${c}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[s]:!1},n);const{url:o,query:i,fragmentIdentifier:u}=t.parseUrl(e,n);return t.stringifyUrl({url:o,query:a(i,r),fragmentIdentifier:u},n)},t.exclude=(e,r,n)=>{const o=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,o,n)}},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case d:case i:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case l:case p:case m:case g:case u:return e;default:return t}}case o:return t}}}function I(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=n,t.ForwardRef=p,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||w(e)===c},t.isConcurrentMode=I,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===s||e===a||e===f||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===S||e.$$typeof===v)},t.typeOf=w},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},759:(e,t,r)=>{var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var s="__immutable_invariants_hold";function u(e){return"object"!=typeof e||null===e||Boolean(Object.getOwnPropertyDescriptor(e,s))}function l(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var d=["setPrototypeOf"],p=(d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function f(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function h(e,t){return a(e,s,!0),e}function g(e,t){var r=e[t];a(e,t,(function(){return W(r.apply(e,arguments))}))}function m(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var o=E.call(this);return o[e]=W(t),b(o)}d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),f.prototype=new Error,f.prototype.constructor=Error;var v=W([]);function y(e,t,r){var n=e[0];if(1===e.length)return m.call(this,n,t,r);var o,i=e.slice(1),a=this[n];if("object"==typeof a&&null!==a)o=W.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?y.call(v,i,t):k.call(_,i,t)}if(n in this&&a===o)return this;var u=E.call(this);return u[n]=o,b(u)}function b(e){for(var t in p)p.hasOwnProperty(t)&&g(e,p[t]);o.use_static||(a(e,"flatMap",w),a(e,"asObject",O),a(e,"asMutable",E),a(e,"set",m),a(e,"setIn",y),a(e,"update",M),a(e,"updateIn",L),a(e,"getIn",U));for(var r=0,n=e.length;r<n;r++)e[r]=W(e[r]);return h(e)}function S(){return new Date(this.getTime())}function w(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return b(r)}function I(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return B(r)}function E(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(C(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function O(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),i=o[0],a=o[1];r[i]=a}return B(r)}function C(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,s)||e instanceof Date?e:W.asMutable(e,{deep:!0})}function T(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function A(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",u=t&&t.merger;function d(e,n,o){var s,d=W(n[o]),p=u&&u(e[o],d,t),f=e[o];void 0===r&&void 0===p&&e.hasOwnProperty(o)&&l(d,f)||l(f,s=void 0!==p?p:a&&c(f)&&c(d)?W.merge(f,d,t):d)&&e.hasOwnProperty(o)||(void 0===r&&(r=T(e,i(e))),r[o]=s)}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=T(e,i(e))),delete r[n])}if(o)for(var f=0,h=e.length;f<h;f++){var g=e[f];for(n in g)g.hasOwnProperty(n)&&d(void 0!==r?r:this,g,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&d(this,e,n);"replace"===s&&p(this,e)}return void 0===r?this:B(r)}function x(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return W.merge(this,e,{deep:r,mode:"replace"})}var D,P,R,_=W({});function k(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return N.call(this,n,t,r);var o,a=e.slice(1),s=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof s&&null!==s?W.setIn(s,a,t):k.call(_,a,t),this.hasOwnProperty(n)&&s===o)return this;var u=T(this,i(this));return u[n]=o,B(u)}function N(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var o=T(this,i(this));return o[e]=W(t),B(o)}function M(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return W.set(this,e,t.apply(n,[n].concat(r)))}function j(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function L(e,t){var r=Array.prototype.slice.call(arguments,2),n=j(this,e);return W.setIn(this,e,t.apply(n,[n].concat(r)))}function U(e,t){var r=j(this,e);return void 0===r?t:r}function F(e){var t,r=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=C(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function $(){return{}}function B(e){return o.use_static||(a(e,"merge",A),a(e,"replace",x),a(e,"without",I),a(e,"asMutable",F),a(e,"set",N),a(e,"setIn",k),a(e,"update",M),a(e,"updateIn",L),a(e,"getIn",U)),h(e)}function W(e,t,r){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(W);if(Array.isArray(e))return b(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||a(i,"asMutable",S),h(i);var i,s=t&&t.prototype,l=(s&&s!==Object.prototype?function(){return Object.create(s)}:$)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(l[c]=W(e[c],void 0,r));return B(l)}function G(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function V(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return W.from=W,W.isImmutable=u,W.ImmutableError=f,W.merge=G(A),W.replace=G(x),W.without=G(I),W.asMutable=(D=F,P=E,R=S,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?P.apply(t,e):t instanceof Date?R.apply(t,e):D.apply(t,e)}),W.set=V(N,m),W.setIn=V(k,y),W.update=G(M),W.updateIn=G(L),W.getIn=G(U),W.flatMap=G(w),W.asObject=G(O),o.use_static||(W.static=e({use_static:!0})),Object.freeze(W),W}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},2257:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||i&&a||s||l}}e.exports=o;const i=r(2893),{re:a,t:s}=r(5765),u=r(7539),l=r(4225),c=r(6376),d=r(6902)},6902:(e,t,r)=>{class n{constructor(e,t){if(t=i(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,r=o.get(t);if(r)return r;const n=this.options.loose,i=n?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];e=e.replace(i,A(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(l[c.COMPARATORTRIM],d),s("comparator trim",e,l[c.COMPARATORTRIM]),e=(e=(e=e.replace(l[c.TILDETRIM],p)).replace(l[c.CARETTRIM],f)).split(/\s+/).join(" ");const u=n?l[c.COMPARATORLOOSE]:l[c.COMPARATOR],g=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options))).filter(this.options.loose?e=>!!e.match(u):()=>!0).map((e=>new a(e,this.options))),m=(g.length,new Map);for(const e of g){if(h(e))return[e];m.set(e.value,e)}m.size>1&&m.has("")&&m.delete("");const y=[...m.values()];return o.set(t,y),y}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>m(r,t)&&e.set.some((e=>m(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=new(r(9593))({max:1e3}),i=r(2893),a=r(2257),s=r(4225),u=r(6376),{re:l,t:c,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(5765),h=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,m=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},v=(e,t)=>(s("comp",e,t),e=w(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=E(e,t),s("xrange",e),e=C(e,t),s("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const r=t.loose?l[c.TILDELOOSE]:l[c.TILDE];return e.replace(r,((t,r,n,o,i)=>{let a;return s("tilde",e,t,r,n,o,i),y(r)?a="":y(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:y(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,s("tilde return",a),a}))},w=(e,t)=>e.trim().split(/\s+/).map((e=>I(e,t))).join(" "),I=(e,t)=>{s("caret",e,t);const r=t.loose?l[c.CARETLOOSE]:l[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,a)=>{let u;return s("caret",e,t,r,o,i,a),y(r)?u="":y(o)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:y(i)?u="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),u="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(s("no pr"),u="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),s("caret return",u),u}))},E=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>O(e,t))).join(" ")),O=(e,t)=>{e=e.trim();const r=t.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return e.replace(r,((r,n,o,i,a,u)=>{s("xRange",e,r,n,o,i,a,u);const l=y(o),c=l||y(i),d=c||y(a),p=d;return"="===n&&p&&(n=""),u=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),"<"===n&&(u="-0"),r=`${n+o}.${i}.${a}${u}`):c?r=`>=${o}.0.0${u} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${i}.0${u} <${o}.${+i+1}.0-0`),s("xRange return",r),r}))},C=(e,t)=>(s("replaceStars",e,t),e.trim().replace(l[c.STAR],"")),T=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),A=e=>(t,r,n,o,i,a,s,u,l,c,d,p,f)=>`${r=y(n)?"":y(o)?`>=${n}.0.0${e?"-0":""}`:y(i)?`>=${n}.${o}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${u=y(l)?"":y(c)?`<${+l+1}.0.0-0`:y(d)?`<${l}.${+c+1}.0-0`:p?`<=${l}.${c}.${d}-${p}`:e?`<${l}.${c}.${+d+1}-0`:`<=${u}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,r)=>{const n=r(4225),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(3295),{re:a,t:s}=r(5765),u=r(2893),{compareIdentifiers:l}=r(6742);class c{constructor(e,t){if(t=u(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},3507:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(8718),o=r(1194),i=r(1312),a=r(5903),s=r(1544),u=r(2056);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return o(e,r,l);case">":return i(e,r,l);case">=":return a(e,r,l);case"<":return s(e,r,l);case"<=":return u(e,r,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,r)=>{const n=r(6376),o=r(3959),{re:i,t:a}=r(5765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=i[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),i[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[a.COERCERTL].lastIndex=-1}else r=e.match(i[a.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},8880:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>{const o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},7880:(e,t,r)=>{const n=r(6269);e.exports=(e,t)=>n(e,t,!0)},6269:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},2378:(e,t,r)=>{const n=r(3959),o=r(8718);e.exports=(e,t)=>{if(o(e,t))return null;{const r=n(e),o=n(t),i=r.prerelease.length||o.prerelease.length,a=i?"pre":"",s=i?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==o[e])return a+e;return s}}},8718:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0===n(e,t,r)},1312:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>0},5903:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>=0},253:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r,o)=>{"string"==typeof r&&(o=r,r=void 0);try{return new n(e,r).inc(t,o).version}catch(e){return null}}},1544:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<0},2056:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<=0},6378:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).major},7789:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).minor},1194:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0!==n(e,t,r)},3959:(e,t,r)=>{const{MAX_LENGTH:n}=r(3295),{re:o,t:i}=r(5765),a=r(6376),s=r(2893);e.exports=(e,t)=>{if(t=s(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[i.LOOSE]:o[i.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},2358:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).patch},7559:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9795:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(t,e,r)},3657:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},5712:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1100:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6397:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},1249:(e,t,r)=>{const n=r(5765);e.exports={re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r(3295).SEMVER_SPEC_VERSION,SemVer:r(6376),compareIdentifiers:r(6742).compareIdentifiers,rcompareIdentifiers:r(6742).rcompareIdentifiers,parse:r(3959),valid:r(6397),clean:r(3507),inc:r(253),diff:r(2378),major:r(6378),minor:r(7789),patch:r(2358),prerelease:r(7559),compare:r(6269),rcompare:r(9795),compareLoose:r(7880),compareBuild:r(8880),sort:r(1100),rsort:r(3657),gt:r(1312),lt:r(1544),eq:r(8718),neq:r(1194),gte:r(5903),lte:r(2056),cmp:r(7539),coerce:r(9038),Comparator:r(2257),Range:r(6902),satisfies:r(5712),toComparators:r(1042),maxSatisfying:r(5775),minSatisfying:r(1657),minVersion:r(5316),validRange:r(9042),outside:r(6826),gtr:r(7606),ltr:r(32),intersects:r(2937),simplifyRange:r(7908),subset:r(799)}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},5765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(3295),o=r(4225),i=(t=e.exports={}).re=[],a=t.src=[],s=t.t={};let u=0;const l=(e,t,r)=>{const n=u++;o(n,t),s[e]=n,a[n]=t,i[n]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),l("FULL",`^${a[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),l("LOOSE",`^${a[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),l("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},7606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},2937:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},32:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},5775:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},1657:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},5316:(e,t,r)=>{const n=r(6376),o=r(6902),i=r(1312);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let a=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||r&&!i(r,a)||(r=a)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(6376),o=r(2257),{ANY:i}=o,a=r(6902),s=r(5712),u=r(1312),l=r(1544),c=r(2056),d=r(5903);e.exports=(e,t,r,p)=>{let f,h,g,m,v;switch(e=new n(e,p),t=new a(t,p),r){case">":f=u,h=c,g=l,m=">",v=">=";break;case"<":f=l,h=d,g=u,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,s=s||e,f(e.semver,a.semver,p)?a=e:g(e.semver,s.semver,p)&&(s=e)})),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&h(e,s.semver))return!1;if(s.operator===v&&g(e,s.semver))return!1}return!0}},7908:(e,t,r)=>{const n=r(5712),o=r(6269);e.exports=(e,t,r)=>{const i=[];let a=null,s=null;const u=e.sort(((e,t)=>o(e,t,r)));for(const e of u)n(e,t,r)?(s=e,a||(a=e)):(s&&i.push([a,s]),s=null,a=null);a&&i.push([a,null]);const l=[];for(const[e,t]of i)e===t?l.push(e):t||e!==u[0]?t?e===u[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const c=l.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},799:(e,t,r)=>{const n=r(6902),o=r(2257),{ANY:i}=o,a=r(5712),s=r(6269),u=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?[new o(">=0.0.0-0")]:[new o(">=0.0.0")]}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=[new o(">=0.0.0")]}const n=new Set;let u,d,p,f,h,g,m;for(const t of e)">"===t.operator||">="===t.operator?u=l(u,t,r):"<"===t.operator||"<="===t.operator?d=c(d,t,r):n.add(t.semver);if(n.size>1)return null;if(u&&d){if(p=s(u.semver,d.semver,r),p>0)return null;if(0===p&&(">="!==u.operator||"<="!==d.operator))return null}for(const e of n){if(u&&!a(e,String(u),r))return null;if(d&&!a(e,String(d),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let v=!(!d||r.includePrerelease||!d.semver.prerelease.length)&&d.semver,y=!(!u||r.includePrerelease||!u.semver.prerelease.length)&&u.semver;v&&1===v.prerelease.length&&"<"===d.operator&&0===v.prerelease[0]&&(v=!1);for(const e of t){if(m=m||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,u)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=l(u,e,r),f===e&&f!==u)return!1}else if(">="===u.operator&&!a(u.semver,String(e),r))return!1;if(d)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(h=c(d,e,r),h===e&&h!==d)return!1}else if("<="===d.operator&&!a(d.semver,String(e),r))return!1;if(!e.operator&&(d||u)&&0!==p)return!1}return!(u&&g&&!d&&0!==p||d&&m&&!u&&0!==p||y||v)},l=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},c=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=u(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},1042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},610:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},6465:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.5 6a.5.5 0 000 1h15a.5.5 0 000-1H.5zm0 3a.5.5 0 000 1h15a.5.5 0 000-1H.5z" fill="#000"></path></svg>'},7768:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 0a.5.5 0 00-.5.5v15a.5.5 0 001 0V.5a.5.5 0 00-.5-.5zm-3 0a.5.5 0 00-.5.5v15a.5.5 0 001 0V.5a.5.5 0 00-.5-.5z" fill="#000"></path></svg>'},655:(e,t,r)=>{"use strict";r.d(t,{ZT:()=>o,pi:()=>i,_T:()=>a,pr:()=>s});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function s(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}},2302:(e,t,r)=>{var n=r(9970).FilterCSS,o=r(9970).getDefaultWhiteList,i=r(5938);var a=new n;function s(e){return e.replace(u,"&lt;").replace(l,"&gt;")}var u=/</g,l=/>/g,c=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,f=/&colon;?/gim,h=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,m=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function y(e){return e.replace(c,"&quot;")}function b(e){return e.replace(d,'"')}function S(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function w(e){return e.replace(f,":").replace(h," ")}function I(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return i.trim(t)}function E(e){return I(e=w(e=S(e=b(e))))}function O(e){return s(e=y(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},t.onTag=function(e,t,r){},t.onIgnoreTag=function(e,t,r){},t.onTagAttr=function(e,t,r){},t.onIgnoreTagAttr=function(e,t,r){},t.safeAttrValue=function(e,t,r,n){if(r=E(r),"href"===t||"src"===t){if("#"===(r=i.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(r))return""}else if("style"===t){if(m.lastIndex=0,m.test(r))return"";if(v.lastIndex=0,v.test(r)&&(g.lastIndex=0,g.test(r)))return"";!1!==n&&(r=(n=n||a).process(r))}return O(r)},t.escapeHtml=s,t.escapeQuote=y,t.unescapeQuote=b,t.escapeHtmlEntities=S,t.escapeDangerHtml5Entities=w,t.clearNonPrintableCharacter=I,t.friendlyAttrValue=E,t.escapeAttrValue=O,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(a,s,u){if(function(t){return!!r||-1!==i.indexOf(e,t)}(a)){if(u.isClosing){var l="[/removed]",c=u.position+l.length;return n.push([!1!==o?o:u.position,c]),o=!1,l}return o||(o=u.position),"[removed]"}return t(a,s,u)},remove:function(e){var t="",r=0;return i.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},t.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var o=e.indexOf("--\x3e",n);if(-1===o)break;r=o+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},t.cssFilter=a,t.getDefaultCSSWhiteList=o},8924:(e,t,r)=>{var n=r(2302),o=r(3268),i=r(2973);function a(e,t){return new i(t).process(e)}for(var s in(t=e.exports=a).filterXSS=a,t.FilterXSS=i,n)t[s]=n[s];for(var s in o)t[s]=o[s];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},3268:(e,t,r)=>{var n=r(5938);function o(e){var t=n.spaceIndex(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=n.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function u(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function l(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,r){"use strict";var n="",a=0,s=!1,u=!1,l=0,c=e.length,d="",p="";e:for(l=0;l<c;l++){var f=e.charAt(l);if(!1===s){if("<"===f){s=l;continue}}else if(!1===u){if("<"===f){n+=r(e.slice(a,l)),s=l,a=l;continue}if(">"===f){n+=r(e.slice(a,s)),d=o(p=e.slice(s,l+1)),n+=t(s,n.length,d,p,i(p)),a=l+1,s=!1;continue}if('"'===f||"'"===f)for(var h=1,g=e.charAt(l-h);""===g.trim()||"="===g;){if("="===g){u=f;continue e}g=e.charAt(l-++h)}}else if(f===u){u=!1;continue}}return a<e.length&&(n+=r(e.substr(a))),n},t.parseAttr=function(e,t){"use strict";var r=0,o=[],i=!1,c=e.length;function d(e,r){if(!((e=(e=n.trim(e)).replace(a,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&o.push(i)}}for(var p=0;p<c;p++){var f,h=e.charAt(p);if(!1!==i||"="!==h)if(!1===i||p!==r||'"'!==h&&"'"!==h||"="!==e.charAt(p-1)){if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(f=s(e,p))){d(n.trim(e.slice(r,p))),i=!1,r=p+1;continue}p=f-1;continue}if(-1===(f=u(e,p-1))){d(i,l(n.trim(e.slice(r,p)))),i=!1,r=p+1;continue}}}else{if(-1===(f=e.indexOf(h,p+1)))break;d(i,n.trim(e.slice(r+1,f))),i=!1,r=(p=f)+1}else i=e.slice(r,p),r=p+1}return r<e.length&&(!1===i?d(e.slice(r)):d(i,l(n.trim(e.slice(r))))),n.trim(o.join(" "))}},5938:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},2973:(e,t,r)=>{var n=r(9970).FilterCSS,o=r(2302),i=r(3268),a=i.parseTag,s=i.parseAttr,u=r(5938);function l(e){return null==e}function c(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList=e.whiteList||o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new n(e.css))}c.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,c=t.onTagAttr,d=t.onIgnoreTagAttr,p=t.safeAttrValue,f=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=o.StripTagBody(t.stripIgnoreTagBody,i),i=g.onIgnoreTag);var m=a(e,(function(e,t,o,a,g){var m,v={sourcePosition:e,position:t,isClosing:g,isWhite:r.hasOwnProperty(o)};if(!l(m=n(o,a,v)))return m;if(v.isWhite){if(v.isClosing)return"</"+o+">";var y=function(e){var t=u.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=u.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=u.trim(e.slice(0,-1))),{html:e,closing:r}}(a),b=r[o],S=s(y.html,(function(e,t){var r,n=-1!==u.indexOf(b,e);return l(r=c(o,e,t,n))?n?(t=p(o,e,t,h))?e+'="'+t+'"':e:l(r=d(o,e,t,n))?void 0:r:r}));return a="<"+o,S&&(a+=" "+S),y.closing&&(a+=" /"),a+">"}return l(m=i(o,a,v))?f(a):m}),f);return g&&(m=g.remove(m)),m},e.exports=c},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var a=[];for(n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=o(this,i,r[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9602)(n)}catch(e){}},8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=r},800:e=>{"use strict";e.exports=n},1981:e=>{"use strict";e.exports=JSON.parse('{"exbVersion":"1.7.0","exbBuildNum":"844","exbBuildCommit":"ba989ffe86b7e13b3df9680a3599762bb423b410","exbExtensionsBuildCommit":"e551c4ee8b576f55e6fe909fecf7855ca3b13584","exbBuildDate":"20220106.165935.CST","productVersion":"ArcGIS Experience Builder"}')}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return i[e].call(r.exports,r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,s.d(o,i),o},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{"use strict";s.r(u),s.d(u,{APP_FRAME_NAME_IN_BUILDER:()=>Hi,AbstractDataAction:()=>Vw,AbstractMessageAction:()=>CT,AjaxState:()=>Ui,Animation:()=>EA,AnimationContext:()=>yA,AnimationDirection:()=>QT,AnimationEffectType:()=>KT,AnimationPlayMode:()=>ZT,AnimationTriggerType:()=>JT,AnimationType:()=>XT,AppDialog:()=>QA,AppKeyboardComponent:()=>gI,AppMode:()=>Fi,AppRoot:()=>rO,AppVersionManager:()=>Fw,BaseVersionManager:()=>Uw,BaseWidget:()=>vw,BrowserSizeMode:()=>Mi,CONSTANTS:()=>o,CacheProvider:()=>rT,ClauseCascade:()=>ey,ClauseDisplayType:()=>ay,ClauseLabelDisplay:()=>iy,ClauseLogic:()=>Zv,ClauseOperator:()=>ty,ClauseSourceType:()=>ry,ClauseType:()=>oy,ConfigManager:()=>Ww,ContainerType:()=>Qp,DataActionManager:()=>kw,DataRecordSetChangeMessage:()=>ET,DataRecordsSelectionChangeMessage:()=>ST,DataSourceComponent:()=>aO,DataSourceError:()=>na,DataSourceFilterChangeMessage:()=>IT,DataSourceManager:()=>vg,DataSourceStatus:()=>Xi,DataSourceTypes:()=>Ki,DialogInteractionType:()=>uf,DialogMode:()=>af,DialogPosition:()=>sf,DummnyDataAction:()=>qw,DummyMessageAction:()=>TT,EMPTY_OPTION_VALUE:()=>ny,ESRIOBJECTIDTYPE:()=>mS,ESRI_DATE_FORMAT_ARRAY:()=>Vi,ErrorBoundary:()=>HE,EsriFieldType:()=>Li,ExportCSV:()=>Qw,ExportGeoJSON:()=>aI,ExportJson:()=>Yw,ExpressionFunctions:()=>fS,ExpressionPartType:()=>pS,ExpressionResolverComponent:()=>pO,ExpressionResolverErrorCode:()=>lO,ExtensionManager:()=>cf,ExtentChangeMessage:()=>wT,FocusVisibility:()=>eO,FormattedDate:()=>KS,FormattedMessage:()=>rw,FormattedNumber:()=>ZS,FormattedPlural:()=>ow,FormattedRelativeTime:()=>pw,FormattedTime:()=>QS,Global:()=>nT,GuideManager:()=>lI,INTERACTIVE_CLASS:()=>XE,ImageDisplayQualityMode:()=>hT,ImageDisplayQualityValue:()=>gT,Immutable:()=>Ce,IntlProvider:()=>Wd,JimuCoreDataSourceFactoryUriExtension:()=>jT,JimuFieldType:()=>ji,JimuMapViewStatus:()=>oT,Keyboard:()=>hI,LayoutItemType:()=>Xp,LayoutParentType:()=>ef,LayoutType:()=>Kp,LinkType:()=>Bi,LoadingHandler:()=>YT,LoadingType:()=>Ji,MessageCarryData:()=>iT,MessageManager:()=>Pw,MessageType:()=>mT,MultipleDataSourceComponent:()=>uO,MutableStoreManager:()=>Tw,OneByOneAnimation:()=>CA,OrderRule:()=>sy,PageMode:()=>of,PagePart:()=>qi,PageType:()=>nf,QueryScope:()=>ra,React:()=>C,ReactDOM:()=>T,ReactRedux:()=>e,ReactResizeDetector:()=>qt,RecordSetChangeType:()=>vT,RepeatedDataSourceProvider:()=>hw,ResizeObserver:()=>bx,ResourceType:()=>Yi,RootContainerType:()=>Zp,ScreenTransitionType:()=>tf,ScreenTriggerType:()=>rf,SelectDataRecordMessage:()=>OT,ServiceManager:()=>Fv,SessionChangedReasonType:()=>Hm,SessionManager:()=>Xm,SqlExpressionMode:()=>Qv,StatisticType:()=>hS,StringSelectionChangeMessage:()=>bT,SupportedItemTypes:()=>ea,SupportedLayerServiceTypes:()=>Qi,SupportedLayerTypes:()=>ta,SupportedServiceTypes:()=>Zi,ThemeBoxStyleKeys:()=>dT,ThemeCommonColorKeys:()=>sT,ThemeContext:()=>KC,ThemeFontVariantKeys:()=>aT,ThemeProvider:()=>QC,ThemeThemeAlertColorKeys:()=>uT,ThemeThemeColorKeys:()=>cT,ThemeThemeMainColorKeys:()=>lT,TrackingManager:()=>HT,TransitionContainer:()=>fx,TransitionDirection:()=>ZA,TransitionType:()=>ex,USER_SETTING_FILE_KEY:()=>pT,UrlInfoPartType:()=>fT,UrlProtocol:()=>zi,WidgetManager:()=>jw,WidgetState:()=>$i,WidgetType:()=>Wi,_ExpressionResolverComponent:()=>dO,appActions:()=>m,appConfigUtils:()=>f,cancelablePromise:()=>O,clamp:()=>cx,classNames:()=>Ae(),createAppStore:()=>eg,createIntl:()=>$d,createIntlCache:()=>Jc,css:()=>GE,dataSourceUtils:()=>w,dateUtils:()=>i,defaultMessages:()=>lv,esri:()=>vx,expressionUtils:()=>E,extensionSpec:()=>d,getAppStore:()=>tg,getIndexFromProgress:()=>lx,getMessageTypeLabel:()=>yT,getTransition:()=>dx,groupExpressionPartsByFunction:()=>AS,i18n:()=>a,init:()=>$T,injectIntl:()=>cd,invariant:()=>jt,isDirectionalTransition:()=>hx,isIntegerProgress:()=>ux,isKeyboardMode:()=>ZE,jimuHistory:()=>I,jsx:()=>BE,keyMap:()=>sv,keyboardUtils:()=>y,loadArcGISJSAPIModule:()=>Mv,loadArcGISJSAPIModules:()=>Nv,loadDependencies:()=>Rv,loadDependency:()=>Pv,lodash:()=>mx,moduleLoader:()=>c,observeStore:()=>rg,polished:()=>yx,portalUrlUtils:()=>p,portalUtils:()=>v,preloadModulesForSSR:()=>VT,privilegeUtils:()=>b,queryString:()=>Oe,requestUtils:()=>S,resolveExpression:()=>_S,saveAs:()=>Bn.saveAs,sharedThemeUtils:()=>g,spring:()=>t,styled:()=>tT,translatedLocales:()=>UT,urlUtils:()=>h,useIntersection:()=>vA,useIntl:()=>qS,useTheme:()=>ZC,utils:()=>l,uuidv1:()=>Ue,version:()=>gx,withRepeatedDataSource:()=>gw,withTheme:()=>eT,xss:()=>Fe});var e={};s.r(e),s.d(e,{Provider:()=>k,ReactReduxContext:()=>A,batch:()=>T.unstable_batchedUpdates,connect:()=>pe,connectAdvanced:()=>Y,createDispatchHook:()=>me,createSelectorHook:()=>be,createStoreHook:()=>he,shallowEqual:()=>X,useDispatch:()=>ve,useSelector:()=>we,useStore:()=>ge});var t={};s.r(t),s.d(t,{Globals:()=>Lr,a:()=>$n,animated:()=>$n,apply:()=>Ln,config:()=>qr,interpolate:()=>Vr,update:()=>Br,useChain:()=>zr,useSpring:()=>Zr,useSprings:()=>Qr,useTrail:()=>en,useTransition:()=>un});var r={};s.r(r),s.d(r,{ApiKey:()=>zn,ApplicationSession:()=>qn,UserSession:()=>to,exchangeToken:()=>ro,fetchToken:()=>Vn,generateToken:()=>Xn,platformSelf:()=>no,validateAppAccess:()=>eo});var n={};s.r(n),s.d(n,{addAttachment:()=>mo,addFeatures:()=>so,applyEdits:()=>co,decodeValues:()=>Io,deleteAttachments:()=>yo,deleteFeatures:()=>lo,getAllLayersAndTables:()=>ho,getAttachments:()=>go,getFeature:()=>io,getLayer:()=>So,getService:()=>wo,parseServiceUrl:()=>fo,queryFeatures:()=>ao,queryRelated:()=>bo,updateAttachment:()=>vo,updateFeatures:()=>uo});var o={};s.r(o),s.d(o,{BREAK_POINTS:()=>Tu,CURRENT_PAGE:()=>ju,DATA_VIEW_ID_FOR_NO_SELECTION:()=>ku,DEFAULT_PAGE_WIDTH:()=>xu,DEFAULT_QUERY_PAGE_SIZE:()=>Lu,DEFAULT_VIEWPORT_SIZE:()=>Au,OUTPUT_DATA_VIEW_ID:()=>Nu,REPEAT_CONTEXT_DATA_VIEW_ID:()=>Mu,SCREEN_RESOLUTIONS:()=>Pu,SELECTION_DATA_VIEW_ID:()=>_u,SHARED_THEME:()=>Ru,USER_LOCALE_KEY:()=>Uu});var i={};s.r(i),s.d(i,{DATE_TIME_CONNECTOR:()=>Zu,DATE_TIME_DEFAULT_FORMAT:()=>el,ESRI_DATE_FORMAT_MAP:()=>Qu,TimeUnit:()=>Ku,VirtualDateType:()=>Xu,formatDate:()=>ul,formatDateField:()=>nl,formatDateLocally:()=>ol,formatTime:()=>ll,getDateOptions:()=>al,getDateTimeFormat:()=>rl,getEsriDateFormat:()=>tl,getIntlOptions:()=>il,getRealDateByVirtualDate:()=>cl,getTimeOption:()=>sl});var a={};s.r(a),s.d(a,{findLocale:()=>Qd,getBrowserLanguage:()=>Vd,getDecimalSeparator:()=>Kd,getIntl:()=>Xd,getLocaleToLoad:()=>Gd,getTranslatedLocale:()=>qd,isRTLLocale:()=>Yd,isSameLanguage:()=>zd,loadLocaleMessages:()=>Hd});var l={};s.r(l),s.d(l,{applyMixins:()=>up,calculateDigits:()=>yp,checkUpdate:()=>wp,findViewportSize:()=>op,formatNumber:()=>kp,formatPercentageNumber:()=>Np,formatPixelNumber:()=>Mp,getBrowserSizeMode:()=>np,getIntlOption:()=>Ep,getJimuThemeModule:()=>jp,getLocalStorageAppKey:()=>gp,getOverlayUniqueId:()=>bp,getPanelCallbackNamesFromPanelState:()=>tp,getSizeModeWidth:()=>ip,getUID:()=>mp,getUUID:()=>vp,getValue:()=>ss,getWidgetCallbackNamesFromWidgetState:()=>ep,hyphenateStyleName:()=>pp,isArrayContainSameItems:()=>lp,isDeepEqual:()=>Cu,isTouchDevice:()=>rp,loadstyle:()=>sp,memoize:()=>Op,readLocalStorage:()=>Tp,readLocalStorageKeys:()=>Cp,readSessionStorage:()=>Dp,readSessionStorageKeys:()=>xp,removeFromLocalStorage:()=>Rp,removeFromSessionStorage:()=>_p,replaceI18nPlaceholdersInObject:()=>Sp,replaceStringInObject:()=>Lp,setLocalStorage:()=>Ap,setSessionStorage:()=>Pp,showApp:()=>Ip,styleObjectToString:()=>fp,tryGet:()=>hp});var c={};s.r(c),s.d(c,{deleteModule:()=>zp,getJimuForBuilderModules:()=>qp,getModuleSync:()=>$p,loadModule:()=>Bp,loadModules:()=>Wp,resolveModuleFullPath:()=>Vp,resolveModuleFullUrl:()=>Gp});var d={};s.r(d),s.d(d,{DummyExtension:()=>Jp,EP_BUILDER_ONLY_EXTENSIONS:()=>Yp,EP_SUPPORT_MULTIPLE_EXTENSIONS:()=>Hp,ExtensionPoints:()=>Up});var p={};s.r(p),s.d(p,{fixPortalUrlProtocol:()=>xf,getBaseItemUrl:()=>yf,getBaseUserUrl:()=>Sf,getContentUrl:()=>If,getHomeIndexUrl:()=>Tf,getHomeMapViewerUrl:()=>Af,getHostUrlByOrgUrl:()=>Pf,getItemUrl:()=>bf,getPortalProxyUrl:()=>Df,getPortalRestUrl:()=>ff,getPortalSelfInfoUrl:()=>df,getPortalUrlFromLocation:()=>pf,getPortalUrlFromRestUrl:()=>hf,getStandardPortalUrl:()=>vf,getUserContentUrl:()=>Ef,getUserItemsUrl:()=>Of,getUserUrl:()=>wf,isAGOLDomain:()=>mf,isSamePortalUrl:()=>gf,shareItemUrl:()=>Cf});var f={};s.r(f),s.d(f,{addLayoutLabel:()=>Lf,addWebmapOrWebsceneToAppConfig:()=>Qf,addWidgetDefaultLabelAndIcon:()=>jf,addWidgetManifestProperties:()=>Mf,appendPortalInfoToResource:()=>_f,buildDataActionRelatedWidgetMap:()=>Hf,cleanPortalInfoFromResource:()=>kf,fixLayoutIds:()=>Gf,getAllWidgets:()=>$f,getClientIdFromConnectionsOfAppConfig:()=>Kf,getLayoutIdInSizeMode:()=>zf,getRealAppResourceUrl:()=>Rf,getUniqueId:()=>Uf,getUniqueLabel:()=>Ff,getWidgetContext:()=>Nf,getWidgetIdByOutputDataSource:()=>Jf,getWidgetMessageActionJsons:()=>Bf,isTwoViewsInSaveSection:()=>Wf,isWidgetFromSameSource:()=>qf,updateStateWhenAppConfigChange:()=>Vf,validateConnectionsOfAppConfig:()=>Xf});var h={};s.r(h),s.d(h,{appendQueryParam:()=>Ah,createHref:()=>yh,createLocation:()=>vh,fixSpaceAndCommaInLabel:()=>dh,fixSpaceInLabel:()=>ch,getAbsoluteRootUrl:()=>mh,getAppIdPageIdFromUrl:()=>oh,getAppUrl:()=>Dh,getArcgisOnlineUrl:()=>Rh,getDataSourceInfosFromQueryObject:()=>th,getDialogIdFromIdOrLabel:()=>uh,getExperienceBuilderOnlineUrl:()=>Ph,getFixedRootPath:()=>gh,getFolder:()=>hh,getHrefFromLinkTo:()=>bh,getLinkResultFromHref:()=>Sh,getPageIdFromIdOrLabel:()=>ah,getPageLink:()=>ph,getPageLinkUrl:()=>fh,getProtocol:()=>Ih,getSectionNavInfoFromQueryObject:()=>nh,getUrlHost:()=>Ch,getViewIdFromIdOrLabel:()=>sh,isAbsoluteUrl:()=>eh,normalize:()=>xh,parseAppPath:()=>ih,parsePath:()=>Zf,removeProtocol:()=>Oh,removeSearchFromUrl:()=>Th,setProtocol:()=>Eh,updateQueryStringParameter:()=>wh});var g={};s.r(g),s.d(g,{createCustomSharedThemeVariables:()=>jh,createSharedThemeVariables:()=>Mh,isSharedTheme:()=>Nh});var m={};s.r(m),s.d(m,{ActionKeys:()=>yg,MapWidgetInfoAdded:()=>tm,MapWidgetInfoRemoved:()=>nm,MapWidgetInfoUpdated:()=>rm,activateWidget:()=>_g,activeOverlay:()=>Pm,activePagePartChanged:()=>Am,addToRegisterClientIdList:()=>Wm,appConfigChanged:()=>wg,appConfigLoaded:()=>bg,appIdChanged:()=>Og,appInfoChanged:()=>Eg,appModeChanged:()=>Lg,appPathChanged:()=>Ig,appRuntimeInfoInit:()=>Om,browserSizeModeChanged:()=>fm,changeDataSourceGDBVersion:()=>qg,clearAnimationPreview:()=>Um,clearDataSourceInfo:()=>zg,clipboardChanged:()=>Im,closeOverlay:()=>Dm,closeWidget:()=>Pg,closeWidgets:()=>Rg,currentDialogChanged:()=>bm,currentPageChanged:()=>ym,dataSourceCountStatusChanged:()=>$g,dataSourceInstanceStatusChanged:()=>Bg,dataSourceSaveStatusChanged:()=>Wg,dataSourceSelectedIdsChanged:()=>lm,dataSourceSelectedIndexesChanged:()=>um,dataSourceSourceVersionAdded:()=>Vg,dataSourceStatusChanged:()=>Fg,dataSourceVersionAdded:()=>Gg,dialogInfosChanged:()=>Sm,hasPrivilegeChanged:()=>Bm,i18nMessagesLoaded:()=>Ng,initAppContext:()=>kg,initStoreExtensionState:()=>om,jimuMapViewAdded:()=>Xg,jimuMapViewRemoved:()=>Qg,jimuMapViewUpdated:()=>Kg,layoutChanged:()=>km,layoutClassLoaded:()=>Ug,loadAppConfigFailed:()=>Sg,networkStatusChanged:()=>vm,openOverlay:()=>xm,openWidget:()=>xg,openWidgets:()=>Dg,queryObjectChanged:()=>Mg,releaseAutoControlMapWidget:()=>em,removeFromRegisterClientIdList:()=>Gm,requestAutoControlMapWidget:()=>Zg,screenGroupNavInfoChanged:()=>Mm,screenPanelVisibleChanged:()=>jm,sectionNavInfoChanged:()=>Nm,selectionChanged:()=>wm,sessionStart:()=>cm,setAppInBuilder:()=>jg,setDataNeedRefresh:()=>Yg,setDataSourcePreloadData:()=>mm,setHasNewVersion:()=>Fm,setIsBusy:()=>_m,setPortalInfo:()=>sm,setPortalSelf:()=>Tm,setWidgetIsInlineEditingState:()=>hm,setWidgetPreloadProps:()=>gm,setupAnimationPreview:()=>Lm,themeVariablesChanged:()=>Cm,updateDataSourceInfo:()=>Hg,updateStoreState:()=>Em,updateWidgetQuery:()=>Jg,userLocaleChanged:()=>$m,userSignIn:()=>dm,userSignOut:()=>pm,widgetClassLoaded:()=>Cg,widgetConfigLoaded:()=>Ag,widgetConfigUpgraded:()=>Tg,widgetMutableStatePropChange:()=>am,widgetStatePropChange:()=>im,zoomScaleChange:()=>Rm});var v={};s.r(v),s.d(v,{clearPortalSelf:()=>tv,getAppInfo:()=>nv,initPortalSelf:()=>ev,removeAppInfo:()=>ov});var y={};s.r(y),s.d(y,{triggerEvent:()=>uv});var b={};s.r(b),s.d(b,{CheckTarget:()=>cv,InvalidInfo:()=>dv,checkAccess:()=>hv,checkExbAccess:()=>mv,getAccessCapabilities:()=>gv,getPortalVersion:()=>vv,isPortal1061OrBefore:()=>yv,isPortal1080OrBefore:()=>bv,shouldCheckAppAccess:()=>Ov});var S={};s.r(S),s.d(S,{requestWrapper:()=>Lv});var w={};s.r(w),s.d(w,{DateTimeType:()=>Ay,_getFixedLayerIdByLayerDefinition:()=>eb,changeJimuFeatureLayerQueryToJSAPILayerQuery:()=>Kv,changeToJSAPIGraphic:()=>Yv,changeToRestAPIFeature:()=>Hv,containsNonLatinCharacter:()=>by,convertFieldToJimuField:()=>jy,createFeatureLayerByRecords:()=>Wv,createJSAPIFeatureLayerByDataSourceFromFeatureCollectionItem:()=>Vb,createJSAPILayerByDataSource:()=>Gb,createSQLClause:()=>Dy,createSQLExpression:()=>Py,fetchAssociatedFeatureLayerDefinition:()=>Sb,fetchAssociatedFeatureLayerUrl:()=>wb,fetchAssociatedFeatureServicePortalItem:()=>Eb,fetchSupportedLayerDefinitions:()=>ub,fetchSupportedLayerDefinitionsFromUrls:()=>sb,filterAttachments:()=>My,findAssociatedFeatureLayerUrl:()=>Ob,fixLayerId:()=>Ky,getArcGISSQL:()=>py,getAssumedAssociatedLayerUrl:()=>Ib,getChildDataSourceId:()=>hb,getCodedValueListForCodedValueOrSubtypeField:()=>By,getDataSourceProxyUrl:()=>Cb,getDataSourceSourceUrl:()=>Tb,getDisplayValueForCodedValueOrSubtype:()=>Fy,getDisplayValueForCodedValueOrSubtypeBatch:()=>$y,getDsTypeFromWholeServiceUrl:()=>ab,getFieldInfoByFieldName:()=>Uy,getFixedLayerIdByLayer:()=>Qy,getFixedLayerIdByLayerDefinition:()=>Zy,getFullServiceUrl:()=>nb,getJSAPILayerBySublayer:()=>Pb,getLayerDefinition:()=>Mb,getLocalTimes:()=>Oy,getOriginDataLabel:()=>Db,getPopupInfo:()=>Xv,getRealDataSourceId:()=>bb,getRealDateByVirtualDate:()=>dy,getServiceLabelFromUrl:()=>db,getSingleDsJsonFromLayerDefinition:()=>ob,getSingleDsJsonFromWholeServiceDefinition:()=>ib,getSortedArrayByLabel:()=>fb,getUTCDateValue:()=>xy,getUTCTimes:()=>Ey,getUrlByLayer:()=>yb,getWhetherUseProxy:()=>Ab,isDataSourcePremium:()=>Wb,isDataSourceSubscriber:()=>$b,isDataSourceSubscriberOrPremium:()=>Bb,isDerivedFrom:()=>Rb,isHostedService:()=>Xy,isJSAPILayerTypeSupported:()=>rb,isLayerDataSource:()=>xb,isLayerDefinitionTypeSupported:()=>tb,isNumericalField:()=>Ly,isOriginDataPremium:()=>Fb,isOriginDataSubscriber:()=>Ub,isSelectionView:()=>_b,isSupportedService:()=>pb,isSupportedSingleLayerService:()=>lb,isSupportedWholeService:()=>cb,parserSQL:()=>fy,queryAllAttachments:()=>Ny,queryFeatureCountByField:()=>mb,queryValueLabelsByFieldAndPageSize:()=>vb,supportAttachment:()=>Nb,supportSymbol:()=>kb});var I={};s.r(I),s.d(I,{HistoryProvider:()=>rS,browserHistory:()=>eS,changeDialog:()=>uS,changePage:()=>aS,changeQueryObject:()=>oS,changeQueryObjectByDataRecordIds:()=>lS,changeQueryObjectByDataSourceGDBVersion:()=>cS,changeView:()=>sS,replaceQueryObject:()=>iS,withHistory:()=>nS});var E={};s.r(E),s.d(E,{getChildExpression:()=>$S,getSingleStringExpressionText:()=>WS,getUseDataSourceFromExpParts:()=>kS,getUseDataSourcesWithoutFields:()=>GS,getWhetherExpressionValid:()=>MS,getWhetherFieldInDs:()=>FS,getWhetherFunctionIncludeChildExpression:()=>jS,getWhetherFunctionIncludeFieldParam:()=>LS,isSingleStringExpression:()=>BS,mergeUseDataSources:()=>NS,whetherHasFieldsInUseDataSources:()=>VS});var O={};s.r(O),s.d(O,{CancelablePromise:()=>LC,cancelable:()=>FC,default:()=>UC,isCancelablePromise:()=>$C});var C=s(1315),T=s(800),A=(s(5697),C.default.createContext(null)),x=function(e){e()},D=function(){return x},P={notify:function(){},get:function(){return[]}};function R(e,t){var r,n=P;function o(){a.onStateChange&&a.onStateChange()}function i(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){var e=D(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,o=r={callback:e,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){n&&null!==t&&(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var a={addNestedSub:function(e){return i(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(r)},trySubscribe:i,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=P)},getListeners:function(){return n}};return a}var _="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?C.useLayoutEffect:C.useEffect;const k=function(e){var t=e.store,r=e.context,n=e.children,o=(0,C.useMemo)((function(){var e=R(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),i=(0,C.useMemo)((function(){return t.getState()}),[t]);_((function(){var e=o.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,i]);var a=r||A;return C.default.createElement(a.Provider,{value:o},n)};function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function M(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var j=s(8679),L=s.n(j),U=s(9864),F=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],$=["reactReduxForwardedRef"],B=[],W=[null,null];function G(e,t){var r=e[1];return[t.payload,r+1]}function V(e,t,r){_((function(){return e.apply(void 0,t)}),r)}function q(e,t,r,n,o,i,a){e.current=n,t.current=o,r.current=!1,i.current&&(i.current=null,a())}function z(e,t,r,n,o,i,a,s,u,l){if(e){var c=!1,d=null,p=function(){if(!c){var e,r,p=t.getState();try{e=n(p,o.current)}catch(e){r=e,d=e}r||(d=null),e===i.current?a.current||u():(i.current=e,s.current=e,a.current=!0,l({type:"STORE_UPDATED",payload:{error:r}}))}};return r.onStateChange=p,r.trySubscribe(),p(),function(){if(c=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d}}}var H=function(){return[null,0]};function Y(e,t){void 0===t&&(t={});var r=t,n=r.getDisplayName,o=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,i=r.methodName,a=void 0===i?"connectAdvanced":i,s=r.renderCountProp,u=void 0===s?void 0:s,l=r.shouldHandleStateChanges,c=void 0===l||l,d=r.storeKey,p=void 0===d?"store":d,f=(r.withRef,r.forwardRef),h=void 0!==f&&f,g=r.context,m=void 0===g?A:g,v=M(r,F),y=m;return function(t){var r=t.displayName||t.name||"Component",n=o(r),i=N({},v,{getDisplayName:o,methodName:a,renderCountProp:u,shouldHandleStateChanges:c,storeKey:p,displayName:n,wrappedComponentName:r,WrappedComponent:t}),s=v.pure,l=s?C.useMemo:function(e){return e()};function d(r){var n=(0,C.useMemo)((function(){var e=r.reactReduxForwardedRef,t=M(r,$);return[r.context,e,t]}),[r]),o=n[0],a=n[1],s=n[2],u=(0,C.useMemo)((function(){return o&&o.Consumer&&(0,U.isContextConsumer)(C.default.createElement(o.Consumer,null))?o:y}),[o,y]),d=(0,C.useContext)(u),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var f=p?r.store:d.store,h=(0,C.useMemo)((function(){return function(t){return e(t.dispatch,i)}(f)}),[f]),g=(0,C.useMemo)((function(){if(!c)return W;var e=R(f,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[f,p,d]),m=g[0],v=g[1],b=(0,C.useMemo)((function(){return p?d:N({},d,{subscription:m})}),[p,d,m]),S=(0,C.useReducer)(G,B,H),w=S[0][0],I=S[1];if(w&&w.error)throw w.error;var E=(0,C.useRef)(),O=(0,C.useRef)(s),T=(0,C.useRef)(),A=(0,C.useRef)(!1),x=l((function(){return T.current&&s===O.current?T.current:h(f.getState(),s)}),[f,w,s]);V(q,[O,E,A,s,x,T,v]),V(z,[c,f,m,h,O,E,A,T,v,I],[f,m,h]);var D=(0,C.useMemo)((function(){return C.default.createElement(t,N({},x,{ref:a}))}),[a,t,x]);return(0,C.useMemo)((function(){return c?C.default.createElement(u.Provider,{value:b},D):D}),[u,D,b])}var f=s?C.default.memo(d):d;if(f.WrappedComponent=t,f.displayName=d.displayName=n,h){var g=C.default.forwardRef((function(e,t){return C.default.createElement(f,N({},e,{reactReduxForwardedRef:t}))}));return g.displayName=n,g.WrappedComponent=t,L()(g,t)}return L()(f,t)}}function J(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function X(e,t){if(J(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!J(e[r[o]],t[r[o]]))return!1;return!0}function K(e){return function(t,r){var n=e(t,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function Q(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Z(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=Q(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=Q(o),o=n(t,r)),o},n}}const ee=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:K((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?K((function(t){return function(e,t){var r={},n=function(n){var o=e[n];"function"==typeof o&&(r[n]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)n(o);return r}(e,t)})):void 0}],te=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:K((function(){return{}}))}];function re(e,t,r){return N({},r,e,t)}const ne=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,o=r.pure,i=r.areMergedPropsEqual,a=!1;return function(t,r,s){var u=e(t,r,s);return a?o&&i(u,n)||(n=u):(a=!0,n=u),n}}}(e):void 0},function(e){return e?void 0:function(){return re}}];var oe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ie(e,t,r,n){return function(o,i){return r(e(o,i),t(n,i),i)}}function ae(e,t,r,n,o){var i,a,s,u,l,c=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;return function(o,h){return f?function(o,f){var h,g,m=!d(f,a),v=!c(o,i);return i=o,a=f,m&&v?(s=e(i,a),t.dependsOnOwnProps&&(u=t(n,a)),l=r(s,u,a)):m?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(n,a)),l=r(s,u,a)):v?(h=e(i,a),g=!p(h,s),s=h,g&&(l=r(s,u,a)),l):l}(o,h):(s=e(i=o,a=h),u=t(n,a),l=r(s,u,a),f=!0,l)}}function se(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,o=t.initMergeProps,i=M(t,oe),a=r(e,i),s=n(e,i),u=o(e,i);return(i.pure?ae:ie)(a,s,u,e,i)}var ue=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function le(e,t,r){for(var n=t.length-1;n>=0;n--){var o=t[n](e);if(o)return o}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function ce(e,t){return e===t}function de(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?Y:r,o=t.mapStateToPropsFactories,i=void 0===o?te:o,a=t.mapDispatchToPropsFactories,s=void 0===a?ee:a,u=t.mergePropsFactories,l=void 0===u?ne:u,c=t.selectorFactory,d=void 0===c?se:c;return function(e,t,r,o){void 0===o&&(o={});var a=o,u=a.pure,c=void 0===u||u,p=a.areStatesEqual,f=void 0===p?ce:p,h=a.areOwnPropsEqual,g=void 0===h?X:h,m=a.areStatePropsEqual,v=void 0===m?X:m,y=a.areMergedPropsEqual,b=void 0===y?X:y,S=M(a,ue),w=le(e,i,"mapStateToProps"),I=le(t,s,"mapDispatchToProps"),E=le(r,l,"mergeProps");return n(d,N({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:I,initMergeProps:E,pure:c,areStatesEqual:f,areOwnPropsEqual:g,areStatePropsEqual:v,areMergedPropsEqual:b},S))}}const pe=de();function fe(){return(0,C.useContext)(A)}function he(e){void 0===e&&(e=A);var t=e===A?fe:function(){return(0,C.useContext)(e)};return function(){return t().store}}var ge=he();function me(e){void 0===e&&(e=A);var t=e===A?ge:he(e);return function(){return t().dispatch}}var ve=me(),ye=function(e,t){return e===t};function be(e){void 0===e&&(e=A);var t=e===A?fe:function(){return(0,C.useContext)(e)};return function(e,r){void 0===r&&(r=ye);var n=t(),o=function(e,t,r,n){var o,i=(0,C.useReducer)((function(e){return e+1}),0)[1],a=(0,C.useMemo)((function(){return R(r,n)}),[r,n]),s=(0,C.useRef)(),u=(0,C.useRef)(),l=(0,C.useRef)(),c=(0,C.useRef)(),d=r.getState();try{if(e!==u.current||d!==l.current||s.current){var p=e(d);o=void 0!==c.current&&t(p,c.current)?c.current:p}else o=c.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return _((function(){u.current=e,l.current=d,c.current=o,s.current=void 0})),_((function(){function e(){try{var e=r.getState();if(e===l.current)return;var n=u.current(e);if(t(n,c.current))return;c.current=n,l.current=e}catch(e){s.current=e}i()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[r,a]),o}(e,r,n.store,n.subscription);return(0,C.useDebugValue)(o),o}}var Se,we=be();Se=T.unstable_batchedUpdates,x=Se;var Ie,Ee=s(7563),Oe=s.t(Ee,2),Ce=s(759),Te=s(4184),Ae=s.n(Te),xe=new Uint8Array(16);function De(){if(!Ie&&!(Ie="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(xe)}const Pe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Re=function(e){return"string"==typeof e&&Pe.test(e)};for(var _e=[],ke=0;ke<256;++ke)_e.push((ke+256).toString(16).substr(1));var Ne,Me,je=0,Le=0;const Ue=function(e,t,r){var n=t&&r||0,o=t||new Array(16),i=(e=e||{}).node||Ne,a=void 0!==e.clockseq?e.clockseq:Me;if(null==i||null==a){var s=e.random||(e.rng||De)();null==i&&(i=Ne=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Me=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:Le+1,c=u-je+(l-Le)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||u>je)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");je=u,Le=l,Me=a;var d=(1e4*(268435455&(u+=122192928e5))+l)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=255&d;var p=u/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=255&p,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(var f=0;f<6;++f)o[n+f]=i[f];return t||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase();if(!Re(r))throw TypeError("Stringified UUID is invalid");return r}(o)};var Fe=s(8924);function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ge(e,t,r){return Ge=We()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&$e(o,r.prototype),o},Ge.apply(null,arguments)}function Ve(e){var t="function"==typeof Map?new Map:void 0;return Ve=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ge(e,arguments,Be(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$e(n,e)},Ve(e)}function qe(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var ze={symbols:{"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:qe,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:qe,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"}}},He=function(e){var t,r;function n(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,$e(t,r),n}(Ve(Error)),Ye=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function Je(e,t){var r,n=e.pop();return t.push(n.f.apply(n,(r=[]).concat.apply(r,t.splice(-n.argCount)))),n.precedence}function Xe(e){return e.split("").reverse().join("")}function Ke(e,t){return e.substr(-t.length)===t}var Qe=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function Ze(e){return"string"!=typeof e?e:e.match(Qe)?parseFloat(e):e}var et=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;var tt=function(e){return function(t,r){void 0===r&&(r="16px");var n=t,o=r;if("string"==typeof t){if(!Ke(t,"px"))throw new He(69,e,t);n=Ze(t)}if("string"==typeof r){if(!Ke(r,"px"))throw new He(70,e,r);o=Ze(r)}if("string"==typeof n)throw new He(71,t,e);if("string"==typeof o)throw new He(72,r,e);return""+n/o+e}}("rem");function rt(e){return Math.round(255*e)}function nt(e,t,r){return rt(e)+","+rt(t)+","+rt(r)}function ot(e,t,r,n){if(void 0===n&&(n=nt),0===t)return n(r,r,r);var o=(e%360+360)%360/60,i=(1-Math.abs(2*r-1))*t,a=i*(1-Math.abs(o%2-1)),s=0,u=0,l=0;o>=0&&o<1?(s=i,u=a):o>=1&&o<2?(s=a,u=i):o>=2&&o<3?(u=i,l=a):o>=3&&o<4?(u=a,l=i):o>=4&&o<5?(s=a,l=i):o>=5&&o<6&&(s=i,l=a);var c=r-i/2;return n(s+c,u+c,l+c)}var it={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},at=/^#[a-fA-F0-9]{6}$/,st=/^#[a-fA-F0-9]{8}$/,ut=/^#[a-fA-F0-9]{3}$/,lt=/^#[a-fA-F0-9]{4}$/,ct=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,dt=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,pt=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ft=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function ht(e){if("string"!=typeof e)throw new He(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return it[t]?"#"+it[t]:e}(e);if(t.match(at))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(st)){var r=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:r}}if(t.match(ut))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(lt)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var o=ct.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=dt.exec(t.substring(0,50));if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var a=pt.exec(t);if(a){var s="rgb("+ot(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",u=ct.exec(s);if(!u)throw new He(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var l=ft.exec(t.substring(0,50));if(l){var c="rgb("+ot(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",d=ct.exec(c);if(!d)throw new He(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+l[4])}}throw new He(5)}function gt(e){return function(e){var t,r=e.red/255,n=e.green/255,o=e.blue/255,i=Math.max(r,n,o),a=Math.min(r,n,o),s=(i+a)/2;if(i===a)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=i-a,l=s>.5?u/(2-i-a):u/(i+a);switch(i){case r:t=(n-o)/u+(n<o?6:0);break;case n:t=(o-r)/u+2;break;default:t=(r-n)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:l,lightness:s,alpha:e.alpha}:{hue:t,saturation:l,lightness:s}}(ht(e))}var mt=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function vt(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function yt(e){return vt(Math.round(255*e))}function bt(e,t,r){return mt("#"+yt(e)+yt(t)+yt(r))}function St(e,t,r){return ot(e,t,r,bt)}function wt(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return mt("#"+vt(e)+vt(t)+vt(r));if("object"==typeof e&&void 0===t&&void 0===r)return mt("#"+vt(e.red)+vt(e.green)+vt(e.blue));throw new He(6)}function It(e,t,r,n){if("string"==typeof e&&"number"==typeof t){var o=ht(e);return"rgba("+o.red+","+o.green+","+o.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?wt(e,t,r):"rgba("+e+","+t+","+r+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?wt(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new He(7)}function Et(e){if("object"!=typeof e)throw new He(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return It(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return wt(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return function(e,t,r,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return n>=1?St(e,t,r):"rgba("+ot(e,t,r)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?St(e.hue,e.saturation,e.lightness):"rgba("+ot(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new He(2)}(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return function(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return St(e,t,r);if("object"==typeof e&&void 0===t&&void 0===r)return St(e.hue,e.saturation,e.lightness);throw new He(1)}(e);throw new He(8)}function Ot(e,t,r){return function(){var n=r.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):Ot(e,t,n)}}function Ct(e){return Ot(e,e.length,[])}function Tt(e,t,r){return Math.max(e,Math.min(t,r))}function At(e,t){if("transparent"===t)return t;var r=gt(t);return Et(N({},r,{lightness:Tt(0,1,r.lightness-parseFloat(e))}))}var xt=Ct(At);function Dt(e){if("transparent"===e)return 0;var t=ht(e),r=Object.keys(t).map((function(e){var r=t[e]/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)})),n=r[0],o=r[1],i=r[2];return parseFloat((.2126*n+.7152*o+.0722*i).toFixed(3))}function Pt(e,t){if("transparent"===t)return t;var r=gt(t);return Et(N({},r,{lightness:Tt(0,1,r.lightness+parseFloat(e))}))}var Rt=Ct(Pt);function _t(e,t,r){if("transparent"===t)return r;if("transparent"===r)return t;if(0===e)return r;var n=ht(t),o=N({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),i=ht(r),a=N({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),s=o.alpha-a.alpha,u=2*parseFloat(e)-1,l=((u*s==-1?u:u+s)/(1+u*s)+1)/2,c=1-l;return It({red:Math.floor(o.red*l+a.red*c),green:Math.floor(o.green*l+a.green*c),blue:Math.floor(o.blue*l+a.blue*c),alpha:o.alpha*(parseFloat(e)/1)+a.alpha*(1-parseFloat(e)/1)})}var kt=Ct(_t),Nt="#000",Mt="#fff",jt=s(6128),Lt=s(1296),Ut=s.n(Lt),Ft=s(3096),$t=s.n(Ft),Bt=function(e,t){return Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Bt(e,t)};var Wt=function(e){return"function"==typeof e},Gt=function(){return"undefined"==typeof window},Vt=function(e){return e instanceof Element||e instanceof HTMLDocument},qt=function(e){function t(t){var r=e.call(this,t)||this;r.cancelHandler=function(){r.resizeHandler&&r.resizeHandler.cancel&&(r.resizeHandler.cancel(),r.resizeHandler=null)},r.attachObserver=function(){var e=r.props,t=e.targetRef,n=e.observerOptions;if(!Gt()){t&&t.current&&(r.targetRef.current=t.current);var o=r.getElement();o&&(r.observableElement&&r.observableElement===o||(r.observableElement=o,r.resizeObserver.observe(o,n)))}},r.getElement=function(){var e=r.props,t=e.querySelector,n=e.targetDomEl;if(Gt())return null;if(t)return document.querySelector(t);if(n&&Vt(n))return n;if(r.targetRef&&Vt(r.targetRef.current))return r.targetRef.current;var o=(0,T.findDOMNode)(r);if(!o)return null;switch(r.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},r.createResizeHandler=function(e){var t=r.props,n=t.handleWidth,o=void 0===n||n,i=t.handleHeight,a=void 0===i||i,s=t.onResize;if(o||a){var u=function(e,t,r,n){return function(o){var i=o.width,a=o.height;t((function(t){return t.width===i&&t.height===a||t.width===i&&!n||t.height===a&&!r?t:(e&&Wt(e)&&e(i,a),{width:i,height:a})}))}}(s,r.setState.bind(r),o,a);e.forEach((function(e){var t=e&&e.contentRect||{},n=t.width,o=t.height;!r.skipOnMount&&!Gt()&&u({width:n,height:o}),r.skipOnMount=!1}))}},r.getRenderType=function(){var e=r.props,t=e.render,n=e.children;return Wt(t)?"renderProp":Wt(n)?"childFunction":(0,C.isValidElement)(n)?"child":Array.isArray(n)?"childArray":"parent"};var n=t.skipOnMount,o=t.refreshMode,i=t.refreshRate,a=void 0===i?1e3:i,s=t.refreshOptions;return r.state={width:void 0,height:void 0},r.skipOnMount=n,r.targetRef=(0,C.createRef)(),r.observableElement=null,Gt()||(r.resizeHandler=function(e,t,r,n){switch(t){case"debounce":return Ut()(e,r,n);case"throttle":return $t()(e,r,n);default:return e}}(r.createResizeHandler,o,a,s),r.resizeObserver=new window.ResizeObserver(r.resizeHandler)),r}return function(e,t){function r(){this.constructor=e}Bt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){Gt()||(this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,r=t.render,n=t.children,o=t.nodeType,i=void 0===o?"div":o,a=this.state,s={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return r&&r(s);case"childFunction":return(e=n)(s);case"child":if((e=n).type&&"string"==typeof e.type){var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(s,["targetRef"]);return(0,C.cloneElement)(e,u)}return(0,C.cloneElement)(e,s);case"childArray":return(e=n).map((function(e){return!!e&&(0,C.cloneElement)(e,s)}));default:return C.createElement(i,null)}},t}(C.PureComponent);Gt()?C.useEffect:C.useLayoutEffect;var zt=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,n){return e[0]===t&&(r=n,!0)})),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var o=n[r];e.call(t,o[1],o[0])}},t}()}(),Ht="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Yt=void 0!==s.g&&s.g.Math===Math?s.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Jt="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Yt):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},Xt=["top","right","bottom","left","width","height","size","weight"],Kt="undefined"!=typeof MutationObserver,Qt=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&s()}function a(){Jt(i)}function s(){var e=Date.now();if(r){if(e-o<2)return;n=!0}else r=!0,n=!1,setTimeout(a,20);o=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Ht&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Kt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Ht&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;Xt.some((function(e){return!!~r.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Zt=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},er=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Yt},tr=ar(0,0,0,0);function rr(e){return parseFloat(e)||0}function nr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){return t+rr(e["border-"+r+"-width"])}),0)}var or="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof er(e).SVGGraphicsElement}:function(e){return e instanceof er(e).SVGElement&&"function"==typeof e.getBBox};function ir(e){return Ht?or(e)?function(e){var t=e.getBBox();return ar(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return tr;var n=er(e).getComputedStyle(e),o=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var o=n[r],i=e["padding-"+o];t[o]=rr(i)}return t}(n),i=o.left+o.right,a=o.top+o.bottom,s=rr(n.width),u=rr(n.height);if("border-box"===n.boxSizing&&(Math.round(s+i)!==t&&(s-=nr(n,"left","right")+i),Math.round(u+a)!==r&&(u-=nr(n,"top","bottom")+a)),!function(e){return e===er(e).document.documentElement}(e)){var l=Math.round(s+i)-t,c=Math.round(u+a)-r;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return ar(o.left,o.top,s,u)}(e):tr}function ar(e,t,r,n){return{x:e,y:t,width:r,height:n}}var sr=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ar(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=ir(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),ur=function(e,t){var r=function(e){var t=e.x,r=e.y,n=e.width,o=e.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return Zt(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}(t);Zt(this,{target:e,contentRect:r})},lr=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new zt,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof er(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new sr(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof er(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new ur(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),cr="undefined"!=typeof WeakMap?new WeakMap:new zt,dr=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Qt.getInstance(),n=new lr(t,r,this);cr.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){dr.prototype[e]=function(){var t;return(t=cr.get(this))[e].apply(t,arguments)}}));const pr=void 0!==Yt.ResizeObserver?Yt.ResizeObserver:dr,fr={arr:Array.isArray,obj:e=>"[object Object]"===Object.prototype.toString.call(e),fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,nul:e=>null===e,set:e=>e instanceof Set,map:e=>e instanceof Map,equ(e,t){if(typeof e!=typeof t)return!1;if(fr.str(e)||fr.num(e))return e===t;if(fr.obj(e)&&fr.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;let r;for(r in e)if(!(r in t))return!1;for(r in t)if(e[r]!==t[r])return!1;return!fr.und(r)||e===t}};function hr(){const e=(0,C.useState)(!1)[1];return(0,C.useCallback)((()=>e((e=>!e))),[])}function gr(e,t){return fr.und(e)||fr.nul(e)?t:e}function mr(e){return fr.und(e)?[]:fr.arr(e)?e:[e]}function vr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return fr.fun(e)?e(...r):e}function yr(e){const t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,M(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(fr.und(t))return N({to:t},e);const r=Object.keys(e).reduce(((r,n)=>fr.und(t[n])?N({},r,{[n]:e[n]}):r),{});return N({to:t},r)}class br{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){0===this.children.length&&this.attach(),this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}class Sr extends br{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach((e=>e instanceof br&&e.addChild(this))),this.detach=()=>this.payload.forEach((e=>e instanceof br&&e.removeChild(this)))}}class wr extends br{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach((e=>e instanceof br&&e.addChild(this))),this.detach=()=>Object.values(this.payload).forEach((e=>e instanceof br&&e.removeChild(this)))}getValue(e){void 0===e&&(e=!1);const t={};for(const r in this.payload){const n=this.payload[r];(!e||n instanceof br)&&(t[r]=n instanceof br?n[e?"getAnimatedValue":"getValue"]():n)}return t}getAnimatedValue(){return this.getValue(!0)}}let Ir,Er;function Or(e,t){Ir={fn:e,transform:t}}function Cr(e){Er=e}let Tr,Ar=e=>"undefined"!=typeof window?window.requestAnimationFrame(e):-1,xr=e=>{"undefined"!=typeof window&&window.cancelAnimationFrame(e)};function Dr(e){Tr=e}let Pr,Rr=()=>Date.now();function _r(e){Pr=e}let kr,Nr,Mr=e=>e.current;function jr(e){kr=e}var Lr=Object.freeze({get applyAnimatedValues(){return Ir},injectApplyAnimatedValues:Or,get colorNames(){return Er},injectColorNames:Cr,get requestFrame(){return Ar},get cancelFrame(){return xr},injectFrame:function(e,t){Ar=e,xr=t},get interpolation(){return Tr},injectStringInterpolator:Dr,get now(){return Rr},injectNow:function(e){Rr=e},get defaultElement(){return Pr},injectDefaultElement:_r,get animatedApi(){return Mr},injectAnimatedApi:function(e){Mr=e},get createAnimatedStyle(){return kr},injectCreateAnimatedStyle:jr,get manualFrameloop(){return Nr},injectManualFrameloop:function(e){Nr=e}});class Ur extends wr{constructor(e,t){super(),this.update=void 0,this.payload=e.style?N({},e,{style:kr(e.style)}):e,this.update=t,this.attach()}}let Fr=!1;const $r=new Set,Br=()=>{if(!Fr)return!1;let e=Rr();for(let t of $r){let r=!1;for(let n=0;n<t.configs.length;n++){let o,i,a=t.configs[n];for(let t=0;t<a.animatedValues.length;t++){let n=a.animatedValues[t];if(n.done)continue;let s=a.fromValues[t],u=a.toValues[t],l=n.lastPosition,c=u instanceof br,d=Array.isArray(a.initialVelocity)?a.initialVelocity[t]:a.initialVelocity;if(c&&(u=u.getValue()),a.immediate)n.setValue(u),n.done=!0;else if("string"!=typeof s&&"string"!=typeof u){if(void 0!==a.duration)l=s+a.easing((e-n.startTime)/a.duration)*(u-s),o=e>=n.startTime+a.duration;else if(a.decay)l=s+d/(1-.998)*(1-Math.exp(-(1-.998)*(e-n.startTime))),o=Math.abs(n.lastPosition-l)<.1,o&&(u=l);else{i=void 0!==n.lastTime?n.lastTime:e,d=void 0!==n.lastVelocity?n.lastVelocity:a.initialVelocity,e>i+64&&(i=e);let t=Math.floor(e-i);for(let e=0;e<t;++e)d+=(-a.tension*(l-u)+-a.friction*d)/a.mass*1/1e3,l+=1*d/1e3;let r=!(!a.clamp||0===a.tension)&&(s<u?l>u:l<u),c=Math.abs(d)<=a.precision,p=0===a.tension||Math.abs(u-l)<=a.precision;o=r||c&&p,n.lastVelocity=d,n.lastTime=e}c&&!a.toValues[t].done&&(o=!1),o?(n.value!==u&&(l=u),n.done=!0):r=!0,n.setValue(l),n.lastPosition=l}else n.setValue(u),n.done=!0}t.props.onFrame&&(t.values[a.name]=a.interpolation.getValue())}t.props.onFrame&&t.props.onFrame(t.values),r||($r.delete(t),t.stop(!0))}return $r.size?Nr?Nr():Ar(Br):Fr=!1,Fr};function Wr(e,t,r){if("function"==typeof e)return e;if(Array.isArray(e))return Wr({range:e,output:t,extrapolate:r});if(Tr&&"string"==typeof e.output[0])return Tr(e);const n=e,o=n.output,i=n.range||[0,1],a=n.extrapolateLeft||n.extrapolate||"extend",s=n.extrapolateRight||n.extrapolate||"extend",u=n.easing||(e=>e);return e=>{const t=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,i);return function(e,t,r,n,o,i,a,s,u){let l=u?u(e):e;if(l<t){if("identity"===a)return l;"clamp"===a&&(l=t)}if(l>r){if("identity"===s)return l;"clamp"===s&&(l=r)}return n===o?n:t===r?e<=t?n:o:(t===-1/0?l=-l:r===1/0?l-=t:l=(l-t)/(r-t),l=i(l),n===-1/0?l=-l:o===1/0?l+=n:l=l*(o-n)+n,l)}(e,i[t],i[t+1],o[t],o[t+1],u,a,s,n.map)}}class Gr extends Sr{constructor(e,t,r,n){super(),this.calc=void 0,this.payload=e instanceof Sr&&!(e instanceof Gr)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Wr(t,r,n)}getValue(){return this.calc(...this.payload.map((e=>e.getValue())))}updateConfig(e,t,r){this.calc=Wr(e,t,r)}interpolate(e,t,r){return new Gr(this,e,t,r)}}const Vr=(e,t,r)=>e&&new Gr(e,t,r),qr={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}};function zr(e,t,r){void 0===r&&(r=1e3);const n=(0,C.useRef)();(0,C.useEffect)((()=>{fr.equ(e,n.current)?e.forEach((e=>{let t=e.current;return t&&t.start()})):t?e.forEach(((e,n)=>{let o=e.current;if(o){const e=o.controllers;if(e.length){const o=r*t[n];e.forEach((e=>{e.queue=e.queue.map((e=>N({},e,{delay:e.delay+o}))),e.start()}))}}})):e.reduce(((e,t,r)=>{let n=t.current;return e.then((()=>n.start()))}),Promise.resolve()),n.current=e}))}function Hr(e,t){"update"in e?t.add(e):e.getChildren().forEach((e=>Hr(e,t)))}class Yr extends br{constructor(e){var t;super(),t=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(e,r){void 0===r&&(r=!0),t.value=e,r&&t.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){0===this.animatedStyles.size&&Hr(this,this.animatedStyles),this.animatedStyles.forEach((e=>e.update()))}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,t,r){return new Gr(this,e,t,r)}}class Jr extends Sr{constructor(e){super(),this.payload=e.map((e=>new Yr(e)))}setValue(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach(((e,r)=>this.payload[r].setValue(e,t))):this.payload.forEach((r=>r.setValue(e,t)))}getValue(){return this.payload.map((e=>e.getValue()))}interpolate(e,t){return new Gr(this,e,t)}}let Xr=0;class Kr{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Xr++}update(e){if(!e)return this;const t=yr(e),r=t.delay,n=void 0===r?0:r,o=t.to,i=M(t,["delay","to"]);if(fr.arr(o)||fr.fun(o))this.queue.push(N({},i,{delay:n,to:o}));else if(o){let e={};Object.entries(o).forEach((t=>{let r=t[0];const o=N({to:{[r]:t[1]},delay:vr(n,r)},i),a=e[o.delay]&&e[o.delay].to;e[o.delay]=N({},e[o.delay],o,{to:N({},a,o.to)})})),this.queue=Object.values(e)}return this.queue=this.queue.sort(((e,t)=>e.delay-t.delay)),this.diff(i),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach((e=>{let t=e.from,r=void 0===t?{}:t,n=e.to,o=void 0===n?{}:n;fr.obj(r)&&(this.merged=N({},r,this.merged)),fr.obj(o)&&(this.merged=N({},this.merged,o))}));const t=this.local=++this.guid,r=this.localQueue=this.queue;this.queue=[],r.forEach(((n,o)=>{let i=n.delay,a=M(n,["delay"]);const s=n=>{o===r.length-1&&t===this.guid&&n&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let u=fr.arr(a.to)||fr.fun(a.to);i?setTimeout((()=>{t===this.guid&&(u?this.runAsync(a,s):this.diff(a).start(s))}),i):u?this.runAsync(a,s):this.diff(a).start(s)}))}else fr.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),this,$r.has(this)||$r.add(this),Fr||(Fr=!0,Ar(Nr||Br));return this}stop(e){return this.listeners.forEach((t=>t(e))),this.listeners=[],this}pause(e){return this.stop(!0),e&&(this,$r.has(this)&&$r.delete(this)),this}runAsync(e,t){var r=this;e.delay;let n=M(e,["delay"]);const o=this.local;let i=Promise.resolve(void 0);if(fr.arr(n.to))for(let e=0;e<n.to.length;e++){const t=e,r=N({},n,yr(n.to[t]));fr.arr(r.config)&&(r.config=r.config[t]),i=i.then((()=>{if(o===this.guid)return new Promise((e=>this.diff(r).start(e)))}))}else if(fr.fun(n.to)){let e,t=0;i=i.then((()=>n.to((r=>{const i=N({},n,yr(r));if(fr.arr(i.config)&&(i.config=i.config[t]),t++,o===this.guid)return e=new Promise((e=>this.diff(i).start(e)))}),(function(e){return void 0===e&&(e=!0),r.stop(e)})).then((()=>e))))}i.then(t)}diff(e){this.props=N({},this.props,e);let t=this.props,r=t.from,n=void 0===r?{}:r,o=t.to,i=void 0===o?{}:o,a=t.config,s=void 0===a?{}:a,u=t.reverse,l=t.attach,c=t.reset,d=t.immediate;if(u){var p=[i,n];n=p[0],i=p[1]}this.merged=N({},n,this.merged,i),this.hasChanged=!1;let f=l&&l(this);if(this.animations=Object.entries(this.merged).reduce(((e,t)=>{let r=t[0],o=t[1],i=e[r]||{};const a=fr.num(o),u=fr.str(o)&&!o.startsWith("#")&&!/\d/.test(o)&&!Er[o],l=fr.arr(o),p=!a&&!l&&!u;let h=fr.und(n[r])?o:n[r],g=a||l||u?o:1,m=vr(s,r);f&&(g=f.animations[r].parent);let v,y=i.parent,b=i.interpolation,S=mr(f?g.getPayload():g),w=o;p&&(w=Tr({range:[0,1],output:[o,o]})(1));let I=b&&b.getValue();const E=!fr.und(y)&&i.animatedValues.some((e=>!e.done)),O=!fr.equ(w,I),C=!fr.equ(w,i.previous),T=!fr.equ(m,i.config);if(c||C&&O||T){if(a||u)y=b=i.parent||new Yr(h);else if(l)y=b=i.parent||new Jr(h);else if(p){let e=i.interpolation&&i.interpolation.calc(i.parent.value);e=void 0===e||c?h:e,i.parent?(y=i.parent,y.setValue(0,!1)):y=new Yr(0);const t={output:[e,o]};i.interpolation?(b=i.interpolation,i.interpolation.updateConfig(t)):b=y.interpolate(t)}return S=mr(f?g.getPayload():g),v=mr(y.getPayload()),c&&!p&&y.setValue(h,!1),this.hasChanged=!0,v.forEach((e=>{e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=E?e.lastVelocity:void 0,e.lastTime=E?e.lastTime:void 0,e.startTime=Rr(),e.done=!1,e.animatedStyles.clear()})),vr(d,r)&&y.setValue(p?g:o,!1),N({},e,{[r]:N({},i,{name:r,parent:y,interpolation:b,animatedValues:v,toValues:S,previous:w,config:m,fromValues:mr(y.getValue()),immediate:vr(d,r),initialVelocity:gr(m.velocity,0),clamp:gr(m.clamp,!1),precision:gr(m.precision,.01),tension:gr(m.tension,170),friction:gr(m.friction,26),mass:gr(m.mass,1),duration:m.duration,easing:gr(m.easing,(e=>e)),decay:m.decay})})}return O?e:(p&&(y.setValue(1,!1),b.updateConfig({output:[w,w]})),y.done=!0,this.hasChanged=!0,N({},e,{[r]:N({},e[r],{previous:w})}))}),this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let e in this.animations)this.interpolations[e]=this.animations[e].interpolation,this.values[e]=this.animations[e].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}const Qr=(e,t)=>{const r=(0,C.useRef)(!1),n=(0,C.useRef)(),o=fr.fun(t),i=(0,C.useMemo)((()=>{let r;return n.current&&(n.current.map((e=>e.destroy())),n.current=void 0),[new Array(e).fill().map(((e,n)=>{const i=new Kr,a=o?vr(t,n,i):t[n];return 0===n&&(r=a.ref),i.update(a),r||i.start(),i})),r]}),[e]),a=i[0],s=i[1];n.current=a,(0,C.useImperativeHandle)(s,(()=>({start:()=>Promise.all(n.current.map((e=>new Promise((t=>e.start(t)))))),stop:e=>n.current.forEach((t=>t.stop(e))),get controllers(){return n.current}})));const u=(0,C.useMemo)((()=>e=>n.current.map(((t,r)=>{t.update(o?vr(e,r,t):e[r]),s||t.start()}))),[e]);(0,C.useEffect)((()=>{r.current?o||u(t):s||n.current.forEach((e=>e.start()))})),(0,C.useEffect)((()=>(r.current=!0,()=>n.current.forEach((e=>e.destroy())))),[]);const l=n.current.map((e=>e.getValues()));return o?[l,u,e=>n.current.forEach((t=>t.pause(e)))]:l},Zr=e=>{const t=fr.fun(e),r=Qr(1,t?e:[e]),n=r[0],o=r[1],i=r[2];return t?[n[0],o,i]:n},en=(e,t)=>{const r=(0,C.useRef)(!1),n=fr.fun(t),o=vr(t),i=(0,C.useRef)(),a=Qr(e,((e,t)=>(0===e&&(i.current=[]),i.current.push(t),N({},o,{config:vr(o.config,e),attach:e>0&&(()=>i.current[e-1])})))),s=a[0],u=a[1],l=a[2],c=(0,C.useMemo)((()=>e=>u(((t,r)=>{e.reverse;const n=e.reverse?t+1:t-1,a=i.current[n];return N({},e,{config:vr(e.config||o.config,t),attach:a&&(()=>a)})}))),[e,o.reverse]);return(0,C.useEffect)((()=>{r.current&&!n&&c(t)})),(0,C.useEffect)((()=>{r.current=!0}),[]),n?[s,c,l]:s};let tn=0;const rn="enter",nn="leave",on="update",an=(e,t)=>("function"==typeof t?e.map(t):mr(t)).map(String),sn=e=>{let t=e.items,r=e.keys,n=void 0===r?e=>e:r,o=M(e,["items","keys"]);return t=mr(void 0!==t?t:null),N({items:t,keys:an(t,n)},o)};function un(e,t,r){const n=N({items:e,keys:t||(e=>e)},r),o=sn(n),i=o.lazy,a=void 0!==i&&i,s=(o.unique,o.reset),u=void 0!==s&&s,l=(o.enter,o.leave,o.update,o.onDestroyed),c=(o.keys,o.items,o.onFrame),d=o.onRest,p=o.onStart,f=o.ref,h=M(o,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),g=hr(),m=(0,C.useRef)(!1),v=(0,C.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!n.ref,instances:!m.current&&new Map,forceUpdate:g});return(0,C.useImperativeHandle)(n.ref,(()=>({start:()=>Promise.all(Array.from(v.current.instances).map((e=>{let t=e[1];return new Promise((e=>t.start(e)))}))),stop:e=>Array.from(v.current.instances).forEach((t=>t[1].stop(e))),get controllers(){return Array.from(v.current.instances).map((e=>e[1]))}}))),v.current=function(e,t){let r=e.first,n=e.prevProps,o=M(e,["first","prevProps"]),i=sn(t),a=i.items,s=i.keys,u=i.initial,l=i.from,c=i.enter,d=i.leave,p=i.update,f=i.trail,h=void 0===f?0:f,g=i.unique,m=i.config,v=i.order,y=void 0===v?[rn,nn,on]:v,b=sn(n),S=b.keys,w=b.items,I=N({},o.current),E=[...o.deleted],O=Object.keys(I),C=new Set(O),T=new Set(s),A=s.filter((e=>!C.has(e))),x=o.transitions.filter((e=>!e.destroyed&&!T.has(e.originalKey))).map((e=>e.originalKey)),D=s.filter((e=>C.has(e))),P=-h;for(;y.length;)switch(y.shift()){case rn:A.forEach(((e,t)=>{g&&E.find((t=>t.originalKey===e))&&(E=E.filter((t=>t.originalKey!==e)));const n=s.indexOf(e),o=a[n],i=r&&void 0!==u?"initial":rn;I[e]={slot:i,originalKey:e,key:g?String(e):tn++,item:o,trail:P+=h,config:vr(m,o,i),from:vr(r&&void 0!==u?u||{}:l,o),to:vr(c,o)}}));break;case nn:x.forEach((e=>{const t=S.indexOf(e),r=w[t],n=nn;E.unshift(N({},I[e],{slot:n,destroyed:!0,left:S[Math.max(0,t-1)],right:S[Math.min(S.length,t+1)],trail:P+=h,config:vr(m,r,n),to:vr(d,r)})),delete I[e]}));break;case on:D.forEach((e=>{const t=s.indexOf(e),r=a[t],n=on;I[e]=N({},I[e],{item:r,slot:n,trail:P+=h,config:vr(m,r,n),to:vr(p,r)})}))}let R=s.map((e=>I[e]));return E.forEach((e=>{let t,r=e.left,n=(e.right,M(e,["left","right"]));-1!==(t=R.findIndex((e=>e.originalKey===r)))&&(t+=1),t=Math.max(0,t),R=[...R.slice(0,t),n,...R.slice(t)]})),N({},o,{changed:A.length||x.length||D.length,first:r&&0===A.length,transitions:R,current:I,deleted:E,prevProps:t})}(v.current,n),v.current.changed&&v.current.transitions.forEach((e=>{const t=e.slot,r=e.from,n=e.to,o=e.config,i=e.trail,s=e.key,g=e.item;v.current.instances.has(s)||v.current.instances.set(s,new Kr);const m=v.current.instances.get(s),y=N({},h,{to:n,from:r,config:o,ref:f,onRest:r=>{v.current.mounted&&(e.destroyed&&(f||a||ln(v,s),l&&l(g)),!Array.from(v.current.instances).some((e=>!e[1].idle))&&(f||a)&&v.current.deleted.length>0&&ln(v),d&&d(g,t,r))},onStart:p&&(()=>p(g,t)),onFrame:c&&(e=>c(g,t,e)),delay:i,reset:u&&t===rn});m.update(y),v.current.paused||m.start()})),(0,C.useEffect)((()=>(v.current.mounted=m.current=!0,()=>{v.current.mounted=m.current=!1,Array.from(v.current.instances).map((e=>e[1].destroy())),v.current.instances.clear()})),[]),v.current.transitions.map((e=>{let t=e.item,r=e.slot,n=e.key;return{item:t,key:n,state:r,props:v.current.instances.get(n).getValues()}}))}function ln(e,t){const r=e.current.deleted;for(let n of r){let r=n.key;const o=e=>e.key!==r;(fr.und(t)||t===r)&&(e.current.instances.delete(r),e.current.transitions=e.current.transitions.filter(o),e.current.deleted=e.current.deleted.filter(o))}e.current.forceUpdate()}class cn extends wr{constructor(e){void 0===e&&(e={}),super(),!e.transform||e.transform instanceof br||(e=Ir.transform(e)),this.payload=e}}const dn={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},pn="[-+]?\\d*\\.?\\d+",fn=pn+"%";function hn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const gn=new RegExp("rgb"+hn(pn,pn,pn)),mn=new RegExp("rgba"+hn(pn,pn,pn,pn)),vn=new RegExp("hsl"+hn(pn,fn,fn)),yn=new RegExp("hsla"+hn(pn,fn,fn,pn)),bn=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Sn=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wn=/^#([0-9a-fA-F]{6})$/,In=/^#([0-9a-fA-F]{8})$/;function En(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function On(e,t,r){const n=r<.5?r*(1+t):r+t-r*t,o=2*r-n,i=En(o,n,e+1/3),a=En(o,n,e),s=En(o,n,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function Cn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Tn(e){return(parseFloat(e)%360+360)%360/360}function An(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function xn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Dn(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=wn.exec(e))?parseInt(t[1]+"ff",16)>>>0:dn.hasOwnProperty(e)?dn[e]:(t=gn.exec(e))?(Cn(t[1])<<24|Cn(t[2])<<16|Cn(t[3])<<8|255)>>>0:(t=mn.exec(e))?(Cn(t[1])<<24|Cn(t[2])<<16|Cn(t[3])<<8|An(t[4]))>>>0:(t=bn.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=In.exec(e))?parseInt(t[1],16)>>>0:(t=Sn.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=vn.exec(e))?(255|On(Tn(t[1]),xn(t[2]),xn(t[3])))>>>0:(t=yn.exec(e))?(On(Tn(t[1]),xn(t[2]),xn(t[3]))|An(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const Pn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Rn=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,_n=new RegExp(`(${Object.keys(dn).join("|")})`,"g");let kn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Nn=["Webkit","Ms","Moz","O"];function Mn(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||kn.hasOwnProperty(e)&&kn[e]?(""+t).trim():t+"px"}kn=Object.keys(kn).reduce(((e,t)=>(Nn.forEach((r=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(r,t)]=e[t])),e)),kn);const jn={};jr((e=>new cn(e))),_r("div"),Dr((e=>{const t=e.output.map((e=>e.replace(Rn,Dn))).map((e=>e.replace(_n,Dn))),r=t[0].match(Pn).map((()=>[]));t.forEach((e=>{e.match(Pn).forEach(((e,t)=>r[t].push(+e)))}));const n=t[0].match(Pn).map(((t,n)=>Wr(N({},e,{output:r[n]}))));return e=>{let r=0;return t[0].replace(Pn,(()=>n[r++](e))).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,((e,t,r,n,o)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${o})`))}})),Cr(dn),Or(((e,t)=>{if(!e.nodeType||void 0===e.setAttribute)return!1;{const o=t.style,i=t.children,a=t.scrollTop,s=t.scrollLeft,u=M(t,["style","children","scrollTop","scrollLeft"]),l="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s),void 0!==i&&(e.textContent=i);for(let t in o)if(o.hasOwnProperty(t)){var r=0===t.indexOf("--"),n=Mn(t,o[t],r);"float"===t&&(t="cssFloat"),r?e.style.setProperty(t,n):e.style[t]=n}for(let t in u){const r=l?t:jn[t]||(jn[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())));void 0!==e.getAttribute(r)&&e.setAttribute(r,u[t])}}}),(e=>e));const Ln=(Un=e=>{const t=(0,C.forwardRef)(((t,r)=>{const n=hr(),o=(0,C.useRef)(!0),i=(0,C.useRef)(null),a=(0,C.useRef)(null),s=(0,C.useCallback)((e=>{const t=i.current;i.current=new Ur(e,(()=>{let e=!1;a.current&&(e=Ir.fn(a.current,i.current.getAnimatedValue())),a.current&&!1!==e||n()})),t&&t.detach()}),[]);(0,C.useEffect)((()=>()=>{o.current=!1,i.current&&i.current.detach()}),[]),(0,C.useImperativeHandle)(r,(()=>Mr(a,o,n))),s(t);const u=i.current.getValue(),l=(u.scrollTop,u.scrollLeft,M(u,["scrollTop","scrollLeft"])),c=(d=e,!fr.fun(d)||d.prototype instanceof C.default.Component?e=>a.current=function(e,t){return t&&(fr.fun(t)?t(e):fr.obj(t)&&(t.current=e)),e}(e,r):void 0);var d;return C.default.createElement(e,N({},l,{ref:c}))}));return t},void 0===(Fn=!1)&&(Fn=!0),e=>(fr.arr(e)?e:Object.keys(e)).reduce(((e,t)=>{const r=Fn?t[0].toLowerCase()+t.substring(1):t;return e[r]=Un(r),e}),Un));var Un,Fn;const $n=Ln(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);var Bn=s(3162),Wn=s(655),Gn=s(743);function Vn(e,t){var r=t;return r.rawResponse=!1,(0,Gn.WY)(e,r).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}var qn=function(){function e(e){this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}return e.prototype.getToken=function(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)},e.prototype.refreshToken=function(e){var t=this,r=(0,Wn.pi)({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return Vn(this.portal+"/oauth2/token/",r).then((function(e){return t._pendingTokenRequest=null,t.token=e.token,t.expires=e.expires,e.token}))},e.prototype.refreshSession=function(){var e=this;return this.refreshToken().then((function(){return e}))},e}(),zn=function(){function e(e){this.key=e.key}return e.prototype.getToken=function(e){return Promise.resolve(this.key)},e}(),Hn=s(4734),Yn=s(9836),Jn=s(2508);function Xn(e,t){var r=t;return"undefined"!=typeof window&&window.location&&window.location.host?r.params.referer=window.location.host:r.params.referer=Gn.cv,(0,Gn.WY)(e,r)}var Kn=/^https?:\/\/(\S+)\.arcgis\.com.+/;function Qn(e){return Kn.test(e)}function Zn(e){if(!Kn.test(e))return null;var t=e.match(Kn)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function eo(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/validateAppAccess",o={method:"POST",params:{f:"json",client_id:t,token:e}};return(0,Gn.WY)(n,o)}var to=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?(0,Hn.b)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||20160,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server){var t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,r){void 0===r&&(r=window),t.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var n,o=(0,Wn.pi)({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),i=o.portal,a=o.provider,s=o.clientId,u=o.expiration,l=o.redirectUri,c=o.popup,d=o.popupWindowFeatures,p=o.state,f=o.locale,h=o.params;if(n="arcgis"===a?i+"/oauth2/authorize?client_id="+s+"&response_type=token&expiration="+(t.duration||u)+"&redirect_uri="+encodeURIComponent(l)+"&state="+p+"&locale="+f:i+"/oauth2/social/authorize?client_id="+s+"&socialLoginProviderName="+a+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(t.duration||u)+"&redirect_uri="+encodeURIComponent(l)+"&state="+p+"&locale="+f,h&&(n=n+"&"+(0,Yn.t)(h)),c){var g,m=((g={promise:null,resolve:null,reject:null}).promise=new Promise((function(e,t){g.resolve=e,g.reject=t})),g);return r["__ESRI_REST_AUTH_HANDLER_"+s]=function(t,r){if(t){var n=JSON.parse(t);m.reject(new Gn.ah(n.errorMessage,n.error))}else if(r){var o=JSON.parse(r);m.resolve(new e({clientId:s,portal:i,ssl:o.ssl,token:o.token,tokenExpires:new Date(o.expires),username:o.username}))}},r.open(n,"oauth-window",d),m.promise}r.location.href=n},e.completeOAuth2=function(t,r){void 0===r&&(r=window);var n=(0,Wn.pi)({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),o=n.portal,i=n.clientId,a=n.popup;function s(t,n){try{var s=void 0,u="__ESRI_REST_AUTH_HANDLER_"+i;if(a&&(r.opener?r.opener.parent&&r.opener.parent[u]?s=r.opener.parent[u]:r.opener&&r.opener[u]&&(s=r.opener[u]):r!==r.parent&&r.parent&&r.parent[u]&&(s=r.parent[u]),s))return s(t?JSON.stringify(t):void 0,JSON.stringify(n)),void r.close()}catch(e){throw new Gn.ah('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new Gn.ah(t.errorMessage,t.error);return new e({clientId:i,portal:o,ssl:n.ssl,token:n.token,tokenExpires:n.expires,username:n.username})}var u=(0,Jn.N)(r.location.hash);if(!u.access_token){var l=void 0,c="Unknown error";return u.error&&(l=u.error,c=u.error_description),s({error:l,errorMessage:c})}var d=u.access_token,p=new Date(Date.now()+1e3*parseInt(u.expires_in,10)-6e4),f=u.username;return s(void 0,{token:d,expires:p,ssl:"true"===u.ssl,username:f})},e.fromParent=function(t,r){var n;return!r&&window&&(r=window),new Promise((function(o,i){n=function(t){if(t.source===r.parent&&t.data)try{return o(e.parentMessageHandler(t))}catch(e){return i(e)}},r.addEventListener("message",n,!1),r.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return r.removeEventListener("message",n,!1),e}))},e.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var r=(0,Wn.pi)({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),n=r.portal,o=r.clientId,i=r.expiration,a=r.redirectUri;t.writeHead(301,{Location:n+"/oauth2/authorize?client_id="+o+"&expiration="+(e.duration||i)+"&response_type=code&redirect_uri="+encodeURIComponent(a)}),t.end()},e.exchangeAuthorizationCode=function(t,r){var n=(0,Wn.pi)({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},t),o=n.portal,i=n.clientId,a=n.redirectUri,s=n.refreshTokenTTL;return Vn(o+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:i,redirect_uri:a,code:r}}).then((function(t){return new e({clientId:i,portal:o,ssl:t.ssl,redirectUri:a,refreshToken:t.refreshToken,refreshTokenTTL:s,refreshTokenExpires:new Date(Date.now()+60*(s-1)*1e3),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var r=JSON.parse(t);return new e({clientId:r.clientId,refreshToken:r.refreshToken,refreshTokenExpires:new Date(r.refreshTokenExpires),username:r.username,password:r.password,token:r.token,tokenExpires:new Date(r.tokenExpires),portal:r.portal,ssl:r.ssl,tokenDuration:r.tokenDuration,redirectUri:r.redirectUri,refreshTokenTTL:r.refreshTokenTTL})},e.fromCredential=function(t){var r=void 0===t.ssl||t.ssl,n=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:r,token:t.token,username:t.userId,tokenExpires:new Date(n)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var r=new Error(t.data.error.message);throw r.name=t.data.error.name,r}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var r=this.portal+"/community/self",n=(0,Wn.pi)((0,Wn.pi)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=(0,Gn.WY)(r,n).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getPortal=function(e){var t=this;if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);var r=this.portal+"/portals/self",n=(0,Wn.pi)((0,Wn.pi)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=(0,Gn.WY)(r,n).then((function(e){return t._portalInfo=e,t._pendingPortalRequest=null,e})),this._pendingPortalRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return n=e,o=Qn(r=this.portal),i=Qn(n),a=Zn(r),s=Zn(n),o&&i&&a===s||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var r,n,o,i,a,s},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return eo(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new Gn.ah("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=(0,Hn.b)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),r=(t[0],t[1]),n=t[2].split("/"),o=n[0],i=n.slice(1);return""+r+o.toLowerCase()+"/"+i.join("/")},e.prototype.getDomainCredentials=function(e){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some((function(t){return e.startsWith(t)}))?"include":"same-origin"},e.prototype.createPostMessageHandler=function(e){var t=this;return function(r){var n=e.indexOf(r.origin)>-1,o="arcgis:auth:requestCredential"===r.data.type;if(n&&o){var i=t.toCredential();i.server=i.server.replace("/sharing/rest",""),r.source.postMessage({type:"arcgis:auth:credential",credential:i},r.origin)}}},e.prototype.getTokenForServer=function(e,t){var r=this,n=this.getServerRootUrl(e),o=this.federatedServers[n];return o&&o.expires&&o.expires.getTime()>Date.now()?Promise.resolve(o.token):(this._pendingTokenRequests[n]||(this._pendingTokenRequests[n]=this.fetchAuthorizedDomains().then((function(){return(0,Gn.WY)(n+"/rest/info",{credentials:r.getDomainCredentials(e)}).then((function(o){if(o.owningSystemUrl){if(i=o.owningSystemUrl,a=r.portal,s=(0,Hn.b)(function(e){if(!Kn.test(e))return e;switch(Zn(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(a)).replace(/https?:\/\//,""),u=(0,Hn.b)(i).replace(/https?:\/\//,""),new RegExp(u,"i").test(s))return(0,Gn.WY)(o.owningSystemUrl+"/sharing/rest/info",t);throw new Gn.ah(e+" is not federated with "+r.portal+".","NOT_FEDERATED")}var i,a,s,u;if(o.authInfo&&void 0!==r.federatedServers[n])return Promise.resolve({authInfo:o.authInfo});throw new Gn.ah(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return r.token&&r.tokenExpires.getTime()>Date.now()?Xn(t,{params:{token:r.token,serverUrl:e,expiration:r.tokenDuration,client:"referer"}}):Xn(t,{params:{username:r.username,password:r.password,expiration:r.tokenDuration,client:"referer"}}).then((function(e){return r._token=e.token,r._tokenExpires=new Date(e.expires),e}))})).then((function(e){return r.federatedServers[n]={expires:new Date(e.expires),token:e.token},delete r._pendingTokenRequests[n],e.token}))}))),this._pendingTokenRequests[n])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,r=(0,Wn.pi)({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return Xn(this.portal+"/generateToken",r).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var r=(0,Wn.pi)({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Vn(this.portal+"/oauth2/token",r).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,r=(0,Wn.pi)({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Vn(this.portal+"/oauth2/token",r).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e.prototype.fetchAuthorizedDomains=function(){var e=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((function(t){return t.authorizedCrossOriginDomains&&t.authorizedCrossOriginDomains.length&&(e.trustedDomains=t.authorizedCrossOriginDomains.filter((function(e){return!e.startsWith("http://")})).map((function(e){return e.startsWith("https://")?e:"https://"+e}))),e}))},e}();function ro(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/exchangeToken",o={method:"POST",params:{f:"json",client_id:t,token:e}};return(0,Gn.WY)(n,o).then((function(e){return e.token}))}function no(e,t,r){void 0===r&&(r="https://www.arcgis.com/sharing/rest");var n=r+"/oauth2/platformSelf?f=json",o={method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}};return(0,Gn.WY)(n,o)}s(4015);var oo=s(4037);function io(e){var t=(0,Hn.b)(e.url)+"/"+e.id,r=(0,Wn.pi)({httpMethod:"GET"},e);return(0,Gn.WY)(t,r).then((function(e){return r.rawResponse?e:e.feature}))}function ao(e){var t=(0,oo.t)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:(0,Wn.pi)({where:"1=1",outFields:"*"},e.params)});return(0,Gn.WY)((0,Hn.b)(e.url)+"/query",t)}function so(e){var t=(0,Hn.b)(e.url)+"/addFeatures",r=(0,oo.t)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:(0,Wn.pi)({},e.params)});return(0,Gn.WY)(t,r)}function uo(e){var t=(0,Hn.b)(e.url)+"/updateFeatures",r=(0,oo.t)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:(0,Wn.pi)({},e.params)});return(0,Gn.WY)(t,r)}function lo(e){var t=(0,Hn.b)(e.url)+"/deleteFeatures",r=(0,oo.t)(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:(0,Wn.pi)({},e.params)});return(0,Gn.WY)(t,r)}function co(e){var t=(0,Hn.b)(e.url)+"/applyEdits",r=(0,oo.t)(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:(0,Wn.pi)({},e.params)});return(0,Gn.WY)(t,r)}var po=new RegExp(/.+(?:map|feature|image)server/i);function fo(e){var t=e.match(po);return t?t[0]:function(e){var t=e.split("?")[0];return(0,Hn.b)(t)}(e)}function ho(e){var t=e.url,r=(0,Wn._T)(e,["url"]),n=fo(t)+"/layers";return(0,Gn.WY)(n,r)}function go(e){var t=(0,Wn.pi)({httpMethod:"GET"},e);return(0,Gn.WY)((0,Hn.b)(t.url)+"/"+t.featureId+"/attachments",t)}function mo(e){var t=(0,Wn.pi)({params:{}},e);return t.params.attachment=e.attachment,(0,Gn.WY)((0,Hn.b)(t.url)+"/"+t.featureId+"/addAttachment",t)}function vo(e){var t=(0,Wn.pi)({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,(0,Gn.WY)((0,Hn.b)(t.url)+"/"+t.featureId+"/updateAttachment",t)}function yo(e){var t=(0,Wn.pi)({params:{}},e);return t.params.attachmentIds=e.attachmentIds,(0,Gn.WY)((0,Hn.b)(t.url)+"/"+t.featureId+"/deleteAttachments",t)}function bo(e){var t=(0,oo.t)(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:(0,Wn.pi)({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return(0,Gn.WY)((0,Hn.b)(e.url)+"/queryRelatedRecords",t)}function So(e){return(0,Gn.WY)((0,Hn.b)(e.url),e)}function wo(e){return(0,Gn.WY)((0,Hn.b)(e.url),e)}function Io(e){return(e.fields?Promise.resolve(e.fields):So({url:e.url}).then((function(e){return e.fields}))).then((function(t){var r=function(e){return e.reduce((function(e,t){var r=t.domain;return r&&"codedValue"===r.type&&(e[t.name]=r),e}),{})}(t);if(Object.keys(r).length<1)return e.queryResponse;var n=e.queryResponse.features.map((function(e){var t={};for(var n in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,n)){var o=e.attributes[n],i=r[n];t[n]=null!==o&&i?Eo(o,i):o}return(0,Wn.pi)((0,Wn.pi)({},e),{attributes:t})}));return(0,Wn.pi)((0,Wn.pi)({},e.queryResponse),{features:n})}))}function Eo(e,t){var r=t.codedValues.find((function(t){return e===t.code}));return r?r.name:e}var Oo,Co,To=s(7825),Ao=s(5501),xo=Function.prototype,Do=Object.prototype,Po=xo.toString,Ro=Do.hasOwnProperty,_o=Po.call(Object),ko=Do.toString,No=(Oo=Object.getPrototypeOf,Co=Object,function(e){return Oo(Co(e))}),Mo={exports:{}},jo={},Lo={exports:{}},Uo={};function Fo(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var $o=/javascript\s*\:/gim;Uo.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},Uo.getDefaultWhiteList=Fo,Uo.onAttr=function(e,t,r){},Uo.onIgnoreAttr=function(e,t,r){},Uo.safeAttrValue=function(e,t){return $o.test(t)?"":t};var Bo={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Wo=Bo,Go=Uo,Vo=function(e,t){";"!==(e=Wo.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,o=0,i=0,a="";function s(){if(!n){var r=Wo.trim(e.slice(o,i)),s=r.indexOf(":");if(-1!==s){var u=Wo.trim(r.slice(0,s)),l=Wo.trim(r.slice(s+1));if(u){var c=t(o,a.length,u,l,r);c&&(a+=c+"; ")}}}o=i+1}for(;i<r;i++){var u=e[i];if("/"===u&&"*"===e[i+1]){var l=e.indexOf("*/",i+2);if(-1===l)break;o=(i=l+1)+1,n=!1}else"("===u?n=!0:")"===u?n=!1:";"===u?n||s():"\n"===u&&s()}return Wo.trim(a)};function qo(e){return null==e}function zo(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.whiteList=e.whiteList||Go.whiteList,e.onAttr=e.onAttr||Go.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Go.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Go.safeAttrValue,this.options=e}zo.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,o=t.onIgnoreAttr,i=t.safeAttrValue;return Vo(e,(function(e,t,a,s,u){var l=r[a],c=!1;if(!0===l?c=l:"function"==typeof l?c=l(s):l instanceof RegExp&&(c=l.test(s)),!0!==c&&(c=!1),s=i(a,s)){var d,p={position:t,sourcePosition:e,source:u,isWhite:c};return c?qo(d=n(a,s,p))?a+":"+s:d:qo(d=o(a,s,p))?void 0:d}}))};var Ho=zo;!function(e,t){var r=Uo,n=Ho;for(var o in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,r)t[o]=r[o]}(Lo,Lo.exports);var Yo={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Jo=Lo.exports.FilterCSS,Xo=Lo.exports.getDefaultWhiteList,Ko=Yo;var Qo=new Jo;function Zo(e){return e.replace(ei,"&lt;").replace(ti,"&gt;")}var ei=/</g,ti=/>/g,ri=/"/g,ni=/&quot;/g,oi=/&#([a-zA-Z0-9]*);?/gim,ii=/&colon;?/gim,ai=/&newline;?/gim,si=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,ui=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,li=/u\s*r\s*l\s*\(.*/gi;function ci(e){return e.replace(ri,"&quot;")}function di(e){return e.replace(ni,'"')}function pi(e){return e.replace(oi,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function fi(e){return e.replace(ii,":").replace(ai," ")}function hi(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Ko.trim(t)}function gi(e){return hi(e=fi(e=pi(e=di(e))))}function mi(e){return Zo(e=ci(e))}var vi=/<!--[\s\S]*?-->/g;jo.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},jo.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},jo.onTag=function(e,t,r){},jo.onIgnoreTag=function(e,t,r){},jo.onTagAttr=function(e,t,r){},jo.onIgnoreTagAttr=function(e,t,r){},jo.safeAttrValue=function(e,t,r,n){if(r=gi(r),"href"===t||"src"===t){if("#"===(r=Ko.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(si.lastIndex=0,si.test(r))return""}else if("style"===t){if(ui.lastIndex=0,ui.test(r))return"";if(li.lastIndex=0,li.test(r)&&(si.lastIndex=0,si.test(r)))return"";!1!==n&&(r=(n=n||Qo).process(r))}return mi(r)},jo.escapeHtml=Zo,jo.escapeQuote=ci,jo.unescapeQuote=di,jo.escapeHtmlEntities=pi,jo.escapeDangerHtml5Entities=fi,jo.clearNonPrintableCharacter=hi,jo.friendlyAttrValue=gi,jo.escapeAttrValue=mi,jo.onIgnoreTagStripAll=function(){return""},jo.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(i,a,s){if(function(t){return!!r||-1!==Ko.indexOf(e,t)}(i)){if(s.isClosing){var u="[/removed]",l=s.position+u.length;return n.push([!1!==o?o:s.position,l]),o=!1,u}return o||(o=s.position),"[removed]"}return t(i,a,s)},remove:function(e){var t="",r=0;return Ko.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},jo.stripCommentTag=function(e){return e.replace(vi,"")},jo.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},jo.cssFilter=Qo,jo.getDefaultCSSWhiteList=Xo;var yi={},bi=Yo;function Si(e){var t=bi.spaceIndex(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=bi.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function wi(e){return"</"===e.slice(0,2)}var Ii=/[^a-zA-Z0-9_:\.\-]/gim;function Ei(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Oi(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Ci(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}yi.parseTag=function(e,t,r){var n="",o=0,i=!1,a=!1,s=0,u=e.length,l="",c="";e:for(s=0;s<u;s++){var d=e.charAt(s);if(!1===i){if("<"===d){i=s;continue}}else if(!1===a){if("<"===d){n+=r(e.slice(o,s)),i=s,o=s;continue}if(">"===d){n+=r(e.slice(o,i)),l=Si(c=e.slice(i,s+1)),n+=t(i,n.length,l,c,wi(c)),o=s+1,i=!1;continue}if('"'===d||"'"===d)for(var p=1,f=e.charAt(s-p);""===f.trim()||"="===f;){if("="===f){a=d;continue e}f=e.charAt(s-++p)}}else if(d===a){a=!1;continue}}return o<e.length&&(n+=r(e.substr(o))),n},yi.parseAttr=function(e,t){var r=0,n=[],o=!1,i=e.length;function a(e,r){if(!((e=(e=bi.trim(e)).replace(Ii,"").toLowerCase()).length<1)){var o=t(e,r||"");o&&n.push(o)}}for(var s=0;s<i;s++){var u,l=e.charAt(s);if(!1!==o||"="!==l)if(!1===o||s!==r||'"'!==l&&"'"!==l||"="!==e.charAt(s-1)){if(/\s|\n|\t/.test(l)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(u=Ei(e,s))){a(bi.trim(e.slice(r,s))),o=!1,r=s+1;continue}s=u-1;continue}if(-1===(u=Oi(e,s-1))){a(o,Ci(bi.trim(e.slice(r,s)))),o=!1,r=s+1;continue}}}else{if(-1===(u=e.indexOf(l,s+1)))break;a(o,bi.trim(e.slice(r+1,u))),o=!1,r=(s=u)+1}else o=e.slice(r,s),r=s+1}return r<e.length&&(!1===o?a(e.slice(r)):a(o,Ci(bi.trim(e.slice(r))))),bi.trim(n.join(" "))};var Ti=Lo.exports.FilterCSS,Ai=jo,xi=yi,Di=xi.parseTag,Pi=xi.parseAttr,Ri=Yo;function _i(e){return null==e}function ki(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ai.onIgnoreTagStripAll),e.whiteList=e.whiteList||Ai.whiteList,e.onTag=e.onTag||Ai.onTag,e.onTagAttr=e.onTagAttr||Ai.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ai.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ai.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ai.safeAttrValue,e.escapeHtml=e.escapeHtml||Ai.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ti(e.css))}ki.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,o=t.onIgnoreTag,i=t.onTagAttr,a=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,l=this.cssFilter;t.stripBlankChar&&(e=Ai.stripBlankChar(e)),t.allowCommentTag||(e=Ai.stripCommentTag(e));var c=!1;t.stripIgnoreTagBody&&(c=Ai.StripTagBody(t.stripIgnoreTagBody,o),o=c.onIgnoreTag);var d=Di(e,(function(e,t,c,d,p){var f,h={sourcePosition:e,position:t,isClosing:p,isWhite:r.hasOwnProperty(c)};if(!_i(f=n(c,d,h)))return f;if(h.isWhite){if(h.isClosing)return"</"+c+">";var g=function(e){var t=Ri.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=Ri.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=Ri.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[c],v=Pi(g.html,(function(e,t){var r,n=-1!==Ri.indexOf(m,e);return _i(r=i(c,e,t,n))?n?(t=s(c,e,t,l))?e+'="'+t+'"':e:_i(r=a(c,e,t,n))?void 0:r:r}));return d="<"+c,v&&(d+=" "+v),g.closing&&(d+=" /"),d+">"}return _i(f=o(c,d,h))?u(d):f}),u);return c&&(d=c.remove(d)),d};var Ni=ki;!function(e,t){var r=jo,n=yi,o=Ni;function i(e,t){return new o(t).process(e)}for(var a in(t=e.exports=i).filterXSS=i,t.FilterXSS=o,r)t[a]=r[a];for(var a in n)t[a]=n[a];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Mo,Mo.exports);var Mi,ji,Li,Ui,Fi,$i,Bi,Wi,Gi=function(){function e(e,t){var r,n=this;this.arcgisWhiteList={a:["href","target","style"],abbr:["title"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style","face"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?n.sanitizeUrl(r):Mo.exports.safeAttrValue(e,t,r,o)}},e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[t]=e[t]}))):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new Mo.exports.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?Mo.exports.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,r,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,n):Mo.exports.safeAttrValue(e,t,r,n)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]}))})),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var n=!1,o=void 0;if(Array.isArray(e))o=e.reduce((function(e,o){var i=r.validate(o,t);return i.isValid?e.concat([o]):(n=!0,e.concat([i.sanitized]))}),[]);else{if(!function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=ko.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=No(e);if(null===t)return!0;var r=Ro.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Po.call(r)==_o}(e)){if(t.allowUndefined&&void 0===e)return;return null}o=Object.keys(e).reduce((function(o,i){var a=e[i],s=r.validate(a,t);return s.isValid?o[i]=a:(n=!0,o[i]=s.sanitized),o}),{})}return n?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(Mi||(Mi={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE"}(ji||(ji={})),function(e){e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(Li||(Li={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(Ui||(Ui={})),function(e){e.Design="DESIGN",e.Run="RUN"}(Fi||(Fi={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED"}($i||($i={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS",e.Block="BLOCK",e.Screen="SCREEN",e.PageTop="PAGE_TOP"}(Bi||(Bi={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(Wi||(Wi={}));const Vi=["shortDate","shortDateLE","longMonthDayYear","dayShortMonthYear","longDate","shortDateShortTime","shortDateLEShortTime","shortDateShortTime24","shortDateLEShortTime24","shortDateLongTime","shortDateLELongTime","shortDateLongTime24","shortDateLELongTime24","longMonthYear","shortMonthYear","year"];var qi,zi;!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}(qi||(qi={})),function(e){e.Http="http:",e.Https="https:"}(zi||(zi={}));const Hi="_appWindow";var Yi,Ji,Xi,Ki,Qi,Zi,ea,ta,ra;!function(e){e.Image="IMAGE",e.Config="CONFIG"}(Yi||(Yi={})),function(e){e.Primary="PRIMARY",e.Secondary="SECONDARY",e.Donut="DONUT",e.Bar="BAR"}(Ji||(Ji={})),function(e){e.NotCreated="NOT_CREATED",e.Created="CREATED",e.CreateError="CREATE_ERROR",e.NotReady="NOT_READY",e.Unloaded="UNLOADED",e.Loading="LOADING",e.Loaded="LOADED",e.LoadError="LOAD_ERROR",e.Saving="SAVING",e.Saved="SAVED",e.SaveError="SAVE_ERROR",e.Closed="CLOSED",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.Closing="CLOSING"}(Xi||(Xi={})),function(e){e.SimpleLocal="SIMPLE_LOCAL",e.CSV="CSV",e.FeatureLayer="FEATURE_LAYER",e.SceneLayer="SCENE_LAYER",e.GroupLayer="GROUP_LAYER",e.FeatureService="FEATURE_SERVICE",e.MapService="MAP_SERVICE",e.SceneService="SCENE_SERVICE"}(Ki||(Ki={})),function(e){e.FeatureLayer="Feature Layer",e.Table="Table",e.GroupLayer="Group Layer",e.SceneLayerPoint="Point",e.SceneLayer3DObject="3DObject"}(Qi||(Qi={})),function(e){e.FeatureService="FeatureServer",e.MapService="MapServer",e.SceneService="SceneServer"}(Zi||(Zi={})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service",e.MapService="Map Service",e.SceneService="Scene Service",e.FeatureCollection="Feature Collection"}(ea||(ea={})),function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene"}(ta||(ta={}));class na extends Error{constructor(e,t){super(t),this.dataSourceId=e}}!function(e){e.InAllData="IN_ALL_DATA",e.InRemoteConfigView="IN_REMOTE_CONFIG_VIEW",e.InConfigView="IN_CONFIG_VIEW",e.InRuntimeView="IN_RUNTIME_VIEW"}(ra||(ra={}));const oa=Array.isArray,ia="object"==typeof global&&global&&global.Object===Object&&global;var aa="object"==typeof self&&self&&self.Object===Object&&self;const sa=ia||aa||Function("return this")(),ua=sa.Symbol;var la=Object.prototype,ca=la.hasOwnProperty,da=la.toString,pa=ua?ua.toStringTag:void 0;var fa=Object.prototype.toString;var ha=ua?ua.toStringTag:void 0;const ga=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ha&&ha in Object(e)?function(e){var t=ca.call(e,pa),r=e[pa];try{e[pa]=void 0;var n=!0}catch(e){}var o=da.call(e);return n&&(t?e[pa]=r:delete e[pa]),o}(e):function(e){return fa.call(e)}(e)},ma=function(e){return null!=e&&"object"==typeof e},va=function(e){return"symbol"==typeof e||ma(e)&&"[object Symbol]"==ga(e)};var ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ba=/^\w*$/;const Sa=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},wa=function(e){if(!Sa(e))return!1;var t=ga(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ia=sa["__core-js_shared__"];var Ea,Oa=(Ea=/[^.]+$/.exec(Ia&&Ia.keys&&Ia.keys.IE_PROTO||""))?"Symbol(src)_1."+Ea:"";var Ca=Function.prototype.toString;const Ta=function(e){if(null!=e){try{return Ca.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var Aa=/^\[object .+?Constructor\]$/,xa=Function.prototype,Da=Object.prototype,Pa=xa.toString,Ra=Da.hasOwnProperty,_a=RegExp("^"+Pa.call(Ra).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ka=function(e){return!(!Sa(e)||function(e){return!!Oa&&Oa in e}(e))&&(wa(e)?_a:Aa).test(Ta(e))},Na=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ka(r)?r:void 0},Ma=Na(Object,"create");var ja=Object.prototype.hasOwnProperty;var La=Object.prototype.hasOwnProperty;function Ua(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ua.prototype.clear=function(){this.__data__=Ma?Ma(null):{},this.size=0},Ua.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ua.prototype.get=function(e){var t=this.__data__;if(Ma){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ja.call(t,e)?t[e]:void 0},Ua.prototype.has=function(e){var t=this.__data__;return Ma?void 0!==t[e]:La.call(t,e)},Ua.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ma&&void 0===t?"__lodash_hash_undefined__":t,this};const Fa=Ua,$a=function(e,t){return e===t||e!=e&&t!=t},Ba=function(e,t){for(var r=e.length;r--;)if($a(e[r][0],t))return r;return-1};var Wa=Array.prototype.splice;function Ga(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ga.prototype.clear=function(){this.__data__=[],this.size=0},Ga.prototype.delete=function(e){var t=this.__data__,r=Ba(t,e);return!(r<0||(r==t.length-1?t.pop():Wa.call(t,r,1),--this.size,0))},Ga.prototype.get=function(e){var t=this.__data__,r=Ba(t,e);return r<0?void 0:t[r][1]},Ga.prototype.has=function(e){return Ba(this.__data__,e)>-1},Ga.prototype.set=function(e,t){var r=this.__data__,n=Ba(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const Va=Ga,qa=Na(sa,"Map"),za=function(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map};function Ha(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ha.prototype.clear=function(){this.size=0,this.__data__={hash:new Fa,map:new(qa||Va),string:new Fa}},Ha.prototype.delete=function(e){var t=za(this,e).delete(e);return this.size-=t?1:0,t},Ha.prototype.get=function(e){return za(this,e).get(e)},Ha.prototype.has=function(e){return za(this,e).has(e)},Ha.prototype.set=function(e,t){var r=za(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};const Ya=Ha;function Ja(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ja.Cache||Ya),r}Ja.Cache=Ya;const Xa=Ja;var Ka=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qa=/\\(\\)?/g,Za=function(e){var t=Xa(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ka,(function(e,r,n,o){t.push(n?o.replace(Qa,"$1"):r||e)})),t}));const es=Za;var ts=ua?ua.prototype:void 0,rs=ts?ts.toString:void 0;const ns=function e(t){if("string"==typeof t)return t;if(oa(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if(va(t))return rs?rs.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},os=function(e){return null==e?"":ns(e)},is=function(e,t){return oa(e)?e:function(e,t){if(oa(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!va(e))||ba.test(e)||!ya.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:es(os(e))},as=function(e){if("string"==typeof e||va(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},ss=function(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=is(t,e)).length;null!=e&&r<n;)e=e[as(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n};function us(e){var t=this.__data__=new Va(e);this.size=t.size}us.prototype.clear=function(){this.__data__=new Va,this.size=0},us.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},us.prototype.get=function(e){return this.__data__.get(e)},us.prototype.has=function(e){return this.__data__.has(e)},us.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Va){var n=r.__data__;if(!qa||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ya(n)}return r.set(e,t),this.size=r.size,this};const ls=us;function cs(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ya;++t<r;)this.add(e[t])}cs.prototype.add=cs.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},cs.prototype.has=function(e){return this.__data__.has(e)};const ds=cs,ps=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},fs=function(e,t,r,n,o,i){var a=1&r,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=i.get(e),c=i.get(t);if(l&&c)return l==t&&c==e;var d=-1,p=!0,f=2&r?new ds:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var h=e[d],g=t[d];if(n)var m=a?n(g,h,d,t,e,i):n(h,g,d,e,t,i);if(void 0!==m){if(m)continue;p=!1;break}if(f){if(!ps(t,(function(e,t){if(a=t,!f.has(a)&&(h===e||o(h,e,r,n,i)))return f.push(t);var a}))){p=!1;break}}else if(h!==g&&!o(h,g,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p},hs=sa.Uint8Array,gs=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},ms=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var vs=ua?ua.prototype:void 0,ys=vs?vs.valueOf:void 0;const bs=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Ss=function(e,t,r){var n=t(e);return oa(e)?n:bs(n,r(e))},ws=function(){return[]};var Is=Object.prototype.propertyIsEnumerable,Es=Object.getOwnPropertySymbols;const Os=Es?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(Es(e),(function(t){return Is.call(e,t)})))}:ws,Cs=function(e){return ma(e)&&"[object Arguments]"==ga(e)};var Ts=Object.prototype,As=Ts.hasOwnProperty,xs=Ts.propertyIsEnumerable,Ds=Cs(function(){return arguments}())?Cs:function(e){return ma(e)&&As.call(e,"callee")&&!xs.call(e,"callee")};const Ps=Ds;var Rs="object"==typeof exports&&exports&&!exports.nodeType&&exports,_s=Rs&&"object"==typeof module&&module&&!module.nodeType&&module,ks=_s&&_s.exports===Rs?sa.Buffer:void 0;const Ns=(ks?ks.isBuffer:void 0)||function(){return!1};var Ms=/^(?:0|[1-9]\d*)$/;const js=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Ms.test(e))&&e>-1&&e%1==0&&e<t},Ls=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Us={};Us["[object Float32Array]"]=Us["[object Float64Array]"]=Us["[object Int8Array]"]=Us["[object Int16Array]"]=Us["[object Int32Array]"]=Us["[object Uint8Array]"]=Us["[object Uint8ClampedArray]"]=Us["[object Uint16Array]"]=Us["[object Uint32Array]"]=!0,Us["[object Arguments]"]=Us["[object Array]"]=Us["[object ArrayBuffer]"]=Us["[object Boolean]"]=Us["[object DataView]"]=Us["[object Date]"]=Us["[object Error]"]=Us["[object Function]"]=Us["[object Map]"]=Us["[object Number]"]=Us["[object Object]"]=Us["[object RegExp]"]=Us["[object Set]"]=Us["[object String]"]=Us["[object WeakMap]"]=!1;const Fs=function(e){return function(t){return e(t)}};var $s="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bs=$s&&"object"==typeof module&&module&&!module.nodeType&&module,Ws=Bs&&Bs.exports===$s&&ia.process;const Gs=function(){try{return Bs&&Bs.require&&Bs.require("util").types||Ws&&Ws.binding&&Ws.binding("util")}catch(e){}}();var Vs=Gs&&Gs.isTypedArray;const qs=Vs?Fs(Vs):function(e){return ma(e)&&Ls(e.length)&&!!Us[ga(e)]};var zs=Object.prototype.hasOwnProperty;const Hs=function(e,t){var r=oa(e),n=!r&&Ps(e),o=!r&&!n&&Ns(e),i=!r&&!n&&!o&&qs(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var l in e)!t&&!zs.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||js(l,u))||s.push(l);return s};var Ys=Object.prototype;const Js=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ys)},Xs=function(e,t){return function(r){return e(t(r))}},Ks=Xs(Object.keys,Object);var Qs=Object.prototype.hasOwnProperty;const Zs=function(e){return null!=e&&Ls(e.length)&&!wa(e)},eu=function(e){return Zs(e)?Hs(e):function(e){if(!Js(e))return Ks(e);var t=[];for(var r in Object(e))Qs.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)},tu=function(e){return Ss(e,eu,Os)};var ru=Object.prototype.hasOwnProperty;const nu=Na(sa,"DataView"),ou=Na(sa,"Promise"),iu=Na(sa,"Set"),au=Na(sa,"WeakMap");var su="[object Map]",uu="[object Promise]",lu="[object Set]",cu="[object WeakMap]",du="[object DataView]",pu=Ta(nu),fu=Ta(qa),hu=Ta(ou),gu=Ta(iu),mu=Ta(au),vu=ga;(nu&&vu(new nu(new ArrayBuffer(1)))!=du||qa&&vu(new qa)!=su||ou&&vu(ou.resolve())!=uu||iu&&vu(new iu)!=lu||au&&vu(new au)!=cu)&&(vu=function(e){var t=ga(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ta(r):"";if(n)switch(n){case pu:return du;case fu:return su;case hu:return uu;case gu:return lu;case mu:return cu}return t});const yu=vu;var bu="[object Arguments]",Su="[object Array]",wu="[object Object]",Iu=Object.prototype.hasOwnProperty;const Eu=function(e,t,r,n,o,i){var a=oa(e),s=oa(t),u=a?Su:yu(e),l=s?Su:yu(t),c=(u=u==bu?wu:u)==wu,d=(l=l==bu?wu:l)==wu,p=u==l;if(p&&Ns(e)){if(!Ns(t))return!1;a=!0,c=!1}if(p&&!c)return i||(i=new ls),a||qs(e)?fs(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new hs(e),new hs(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=gs;case"[object Set]":var u=1&n;if(s||(s=ms),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var c=fs(s(e),s(t),n,o,i,a);return a.delete(e),c;case"[object Symbol]":if(ys)return ys.call(e)==ys.call(t)}return!1}(e,t,u,r,n,o,i);if(!(1&r)){var f=c&&Iu.call(e,"__wrapped__"),h=d&&Iu.call(t,"__wrapped__");if(f||h){var g=f?e.value():e,m=h?t.value():t;return i||(i=new ls),o(g,m,r,n,i)}}return!!p&&(i||(i=new ls),function(e,t,r,n,o,i){var a=1&r,s=tu(e),u=s.length;if(u!=tu(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:ru.call(t,c)))return!1}var d=i.get(e),p=i.get(t);if(d&&p)return d==t&&p==e;var f=!0;i.set(e,t),i.set(t,e);for(var h=a;++l<u;){var g=e[c=s[l]],m=t[c];if(n)var v=a?n(m,g,c,t,e,i):n(g,m,c,e,t,i);if(!(void 0===v?g===m||o(g,m,r,n,i):v)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,r,n,o,i))},Ou=function e(t,r,n,o,i){return t===r||(null==t||null==r||!ma(t)&&!ma(r)?t!=t&&r!=r:Eu(t,r,n,o,e,i))},Cu=function(e,t){return Ou(e,t)},Tu=[576,992],Au={DESKTOP:{width:1280,height:800},PAD:{width:768,height:1024},PHONE:{width:414,height:896}},xu=960,Du={};Du[Mi.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],Du[Mi.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],Du[Mi.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];const Pu=Du,Ru="themes/shared-theme/",_u="selection",ku="no_selection",Nu="output",Mu="repeat_context",ju="current_page",Lu=100,Uu="exb_user_locale";function Fu(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function $u(e){Fu(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Bu(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Wu(e,t){Fu(1,arguments);var r=t||{},n=r.locale,o=n&&n.options&&n.options.weekStartsOn,i=null==o?0:Bu(o),a=null==r.weekStartsOn?i:Bu(r.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=$u(e),u=s.getDay(),l=(u<a?7:0)+u-a;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Gu(e,t){Fu(1,arguments);var r=t||{},n=r.locale,o=n&&n.options&&n.options.weekStartsOn,i=null==o?0:Bu(o),a=null==r.weekStartsOn?i:Bu(r.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=$u(e),u=s.getDay(),l=6+(u<a?-7:0)-(u-a);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}function Vu(e){Fu(1,arguments);var t=$u(e);return t.setDate(1),t.setHours(0,0,0,0),t}function qu(e){Fu(1,arguments);var t=$u(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function zu(e){Fu(1,arguments);var t=$u(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function Hu(e){Fu(1,arguments);var t=$u(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}function Yu(e){Fu(1,arguments);var t=$u(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ju(e){Fu(1,arguments);var t=$u(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}var Xu,Ku;!function(e){e.Today="TODAY",e.Tomorrow="TOMORROW",e.Yesterday="YESTERDAY",e.ThisWeek="THIS_WEEK",e.ThisMonth="THIS_MONTH",e.ThisQuarter="THIS_QUARTER",e.ThisYear="THIS_YEAR"}(Xu||(Xu={})),function(e){e.Minute="MINUTE",e.Hour="HOUR",e.Day="DAY",e.Week="WEEK",e.Month="MONTH",e.Year="YEAR"}(Ku||(Ku={}));const Qu={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},Zu={common:" ",de:" , ",el:" , ",fi:" klo ",fr:"  ",he:" , ",hi:" , ",it:" , ",nb:" , ",pl:" , ",ro:" , ",ru:" , ",vi:" , "},el={date:"yyyy/MM/dd",time:"H:mm",dateTime:"yyyy/MM/dd H:mm"};function tl(e){return Qu[e]||(console.warn(`Invalid data format ${e}`),null)}function rl(e,t,r){if(!t&&!r)return el.date;let n="";if(t){if(Vi.includes(t)){const e=tl(t);t=e.datePattern,r=r||e.timePattern}n=t}if(r){const o=e.locale||"en";n=n+(t?Zu[o]||Zu.common:"")+r}return n}function nl(e,t,r){if(!e)return"";"number"==typeof e&&(e=new Date(e));const n=tl(t);return ol(e,r,n.datePattern,n.timePattern)}function ol(e,t,r,n){if(!e)return"";if("number"==typeof e&&(e=new Date(e)),!r&&!n)return t.formatDate(e);let o=ul(e,r,t);if(n){const r=ll(e,n,t),i=t.locale||"en";o=o+(Zu[i]||Zu.common)+r}return o}const il=e=>{const t=tl(e);if(!t)return;const r=al(t.datePattern),n=al(t.timePattern);return Object.assign(Object.assign({},r),n)},al=e=>{const t={};if(e.includes("y")&&(t.year="numeric"),e.includes("MMMM")?t.month="long":e.includes("MMM")?t.month="short":e.includes("MM")?t.month="2-digit":e.includes("M")&&(t.month="numeric"),e.includes("d")&&(t.day="numeric"),e.includes("EEEE")&&(t.weekday="long"),0!==Object.keys(t).length)return t;console.warn(`Invalid date pattern ${e}`)},sl=(e,t)=>{const r={};if(e.toLowerCase().includes("h")&&(r.hour="numeric"),e.includes("mm")&&(r.minute="2-digit"),e.includes("ss")&&(r.second="2-digit"),t&&e.includes("a")&&(r.hour12=!0),0!==Object.keys(r).length)return r;console.warn(`Not support time pattern ${e}`)};function ul(e,t,r){if(!e)return null;const n=al(t);return r.formatDate(e,n)}function ll(e,t,r){if(!e)return null;const n=sl(t,!1);return r.formatDate(e,n)}function cl(e,t){let r=null;const n=new Date,o=n.getTime(),i=864e5;switch(e){case Xu.Today:r=n;break;case Xu.Yesterday:r=new Date(o-i);break;case Xu.Tomorrow:r=new Date(o+i);break;case Xu.ThisWeek:r=[Wu(n,{locale:t.locale}),Gu(n,{locale:t.locale})];break;case Xu.ThisMonth:r=[Vu(n),qu(n)];break;case Xu.ThisQuarter:r=[zu(n),Hu(n)];break;case Xu.ThisYear:r=[Yu(n),Ju(n)]}return r}var dl=function(e,t){return dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},dl(e,t)};function pl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}dl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var fl=function(){return fl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fl.apply(this,arguments)};function hl(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create;var gl=function(e,t){return gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},gl(e,t)};function ml(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var vl=function(){return vl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vl.apply(this,arguments)};function yl(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create;var bl,Sl,wl,Il=function(){return Il=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Il.apply(this,arguments)};function El(e){return e.type===Sl.literal}function Ol(e){return e.type===Sl.argument}function Cl(e){return e.type===Sl.number}function Tl(e){return e.type===Sl.date}function Al(e){return e.type===Sl.time}function xl(e){return e.type===Sl.select}function Dl(e){return e.type===Sl.plural}function Pl(e){return e.type===Sl.pound}function Rl(e){return e.type===Sl.tag}function _l(e){return!(!e||"object"!=typeof e||e.type!==wl.number)}function kl(e){return!(!e||"object"!=typeof e||e.type!==wl.dateTime)}Object.create,Object.create,function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(bl||(bl={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Sl||(Sl={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(wl||(wl={}));var Nl=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Ml=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function jl(e){var t={};return e.replace(Ml,(function(e){var r=e.length;switch(e[0]){case"G":t.era=4===r?"long":5===r?"narrow":"short";break;case"y":t.year=2===r?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===r?"short":5===r?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var Ll=function(){return Ll=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ll.apply(this,arguments)};Object.create,Object.create;var Ul,Fl=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i,$l=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Bl=/^(@+)?(\+|#+)?[rs]?$/g,Wl=/(\*)(0+)|(#+)(0+)|(0+)/g,Gl=/^(0+)$/;function Vl(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(Bl,(function(e,r,n){return"string"!=typeof n?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===n?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"==typeof n?n.length:0)),""})),t}function ql(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function zl(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if("+!"===r?(t.signDisplay="always",e=e.slice(2)):"+?"===r&&(t.signDisplay="exceptZero",e=e.slice(2)),!Gl.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function Hl(e){return ql(e)||{}}function Yl(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Ll(Ll(Ll({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return Ll(Ll({},e),Hl(t))}),{}));continue;case"engineering":t=Ll(Ll(Ll({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return Ll(Ll({},e),Hl(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(Wl,(function(e,r,n,o,i,a){if(r)t.minimumIntegerDigits=n.length;else{if(o&&i)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(Gl.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if($l.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace($l,(function(e,r,n,o,i,a){return"*"===n?t.minimumFractionDigits=r.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&a?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+a.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""}));var i=o.options[0];"w"===i?t=Ll(Ll({},t),{trailingZeroDisplay:"stripIfInteger"}):i&&(t=Ll(Ll({},t),Vl(i)))}else if(Bl.test(o.stem))t=Ll(Ll({},t),Vl(o.stem));else{var a=ql(o.stem);a&&(t=Ll(Ll({},t),a));var s=zl(o.stem);s&&(t=Ll(Ll({},t),s))}}return t}var Jl=new RegExp("^"+Nl.source+"*"),Xl=new RegExp(Nl.source+"*$");function Kl(e,t){return{start:e,end:t}}var Ql=!!String.prototype.startsWith,Zl=!!String.fromCodePoint,ec=!!Object.fromEntries,tc=!!String.prototype.codePointAt,rc=!!String.prototype.trimStart,nc=!!String.prototype.trimEnd,oc=Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},ic=!0;try{ic="a"===(null===(Ul=fc("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===Ul?void 0:Ul[0])}catch(Ri){ic=!1}var ac,sc=Ql?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},uc=Zl?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n="",o=e.length,i=0;o>i;){if((r=e[i++])>1114111)throw RangeError(r+" is not a valid code point");n+=r<65536?String.fromCharCode(r):String.fromCharCode(55296+((r-=65536)>>10),r%1024+56320)}return n},lc=ec?Object.fromEntries:function(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r],i=o[0],a=o[1];t[i]=a}return t},cc=tc?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var n,o=e.charCodeAt(t);return o<55296||o>56319||t+1===r||(n=e.charCodeAt(t+1))<56320||n>57343?o:n-56320+(o-55296<<10)+65536}},dc=rc?function(e){return e.trimStart()}:function(e){return e.replace(Jl,"")},pc=nc?function(e){return e.trimEnd()}:function(e){return e.replace(Xl,"")};function fc(e,t){return new RegExp(e,t)}if(ic){var hc=fc("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ac=function(e,t){var r;return hc.lastIndex=t,null!==(r=hc.exec(e)[1])&&void 0!==r?r:""}}else ac=function(e,t){for(var r=[];;){var n=cc(e,t);if(void 0===n||vc(n)||yc(n))break;r.push(n),t+=n>=65536?2:1}return uc.apply(void 0,r)};var gc=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,r){for(var n=[];!this.isEOF();){var o=this.char();if(123===o){if((i=this.parseArgument(e,r)).err)return i;n.push(i.val)}else{if(125===o&&e>0)break;if(35!==o||"plural"!==t&&"selectordinal"!==t){if(60===o&&!this.ignoreTag&&47===this.peek()){if(r)break;return this.error(bl.UNMATCHED_CLOSING_TAG,Kl(this.clonePosition(),this.clonePosition()))}if(60===o&&!this.ignoreTag&&mc(this.peek()||0)){if((i=this.parseTag(e,t)).err)return i;n.push(i.val)}else{var i;if((i=this.parseLiteral(e,t)).err)return i;n.push(i.val)}}else{var a=this.clonePosition();this.bump(),n.push({type:Sl.pound,location:Kl(a,this.clonePosition())})}}}return{val:n,err:null}},e.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var n=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Sl.literal,value:"<"+n+"/>",location:Kl(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,t,!0);if(o.err)return o;var i=o.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!mc(this.char()))return this.error(bl.INVALID_TAG,Kl(a,this.clonePosition()));var s=this.clonePosition();return n!==this.parseTagName()?this.error(bl.UNMATCHED_CLOSING_TAG,Kl(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Sl.tag,value:n,children:i,location:Kl(r,this.clonePosition())},err:null}:this.error(bl.INVALID_TAG,Kl(a,this.clonePosition())))}return this.error(bl.UNCLOSED_TAG,Kl(r,this.clonePosition()))}return this.error(bl.INVALID_TAG,Kl(r,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),n="";;){var o=this.tryParseQuote(t);if(o)n+=o;else{var i=this.tryParseUnquoted(e,t);if(i)n+=i;else{var a=this.tryParseLeftAngleBracket();if(!a)break;n+=a}}}var s=Kl(r,this.clonePosition());return{val:{type:Sl.literal,value:n,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(mc(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(39===r){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(r);this.bump()}return uc.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return 60===r||123===r||35===r&&("plural"===t||"selectordinal"===t)||125===r&&e>0?null:(this.bump(),uc(r))},e.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(bl.EXPECT_ARGUMENT_CLOSING_BRACE,Kl(r,this.clonePosition()));if(125===this.char())return this.bump(),this.error(bl.EMPTY_ARGUMENT,Kl(r,this.clonePosition()));var n=this.parseIdentifierIfPossible().value;if(!n)return this.error(bl.MALFORMED_ARGUMENT,Kl(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(bl.EXPECT_ARGUMENT_CLOSING_BRACE,Kl(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Sl.argument,value:n,location:Kl(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(bl.EXPECT_ARGUMENT_CLOSING_BRACE,Kl(r,this.clonePosition())):this.parseArgumentOptions(e,t,n,r);default:return this.error(bl.MALFORMED_ARGUMENT,Kl(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=ac(this.message,t),n=t+r.length;return this.bumpTo(n),{value:r,location:Kl(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,r,n){var o,i=this.clonePosition(),a=this.parseIdentifierIfPossible().value,s=this.clonePosition();switch(a){case"":return this.error(bl.EXPECT_ARGUMENT_TYPE,Kl(i,s));case"number":case"date":case"time":this.bumpSpace();var u=null;if(this.bumpIf(",")){this.bumpSpace();var l=this.clonePosition();if((m=this.parseSimpleArgStyleIfPossible()).err)return m;if(0===(p=pc(m.val)).length)return this.error(bl.EXPECT_ARGUMENT_STYLE,Kl(this.clonePosition(),this.clonePosition()));u={style:p,styleLocation:Kl(l,this.clonePosition())}}if((v=this.tryParseArgumentClose(n)).err)return v;var c=Kl(n,this.clonePosition());if(u&&sc(null==u?void 0:u.style,"::",0)){var d=dc(u.style.slice(2));if("number"===a)return(m=this.parseNumberSkeletonFromString(d,u.styleLocation)).err?m:{val:{type:Sl.number,value:r,location:c,style:m.val},err:null};if(0===d.length)return this.error(bl.EXPECT_DATE_TIME_SKELETON,c);var p={type:wl.dateTime,pattern:d,location:u.styleLocation,parsedOptions:this.shouldParseSkeletons?jl(d):{}};return{val:{type:"date"===a?Sl.date:Sl.time,value:r,location:c,style:p},err:null}}return{val:{type:"number"===a?Sl.number:"date"===a?Sl.date:Sl.time,value:r,location:c,style:null!==(o=null==u?void 0:u.style)&&void 0!==o?o:null},err:null};case"plural":case"selectordinal":case"select":var f=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(bl.EXPECT_SELECT_ARGUMENT_OPTIONS,Kl(f,Il({},f)));this.bumpSpace();var h=this.parseIdentifierIfPossible(),g=0;if("select"!==a&&"offset"===h.value){if(!this.bumpIf(":"))return this.error(bl.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Kl(this.clonePosition(),this.clonePosition()));var m;if(this.bumpSpace(),(m=this.tryParseDecimalInteger(bl.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,bl.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return m;this.bumpSpace(),h=this.parseIdentifierIfPossible(),g=m.val}var v,y=this.tryParsePluralOrSelectOptions(e,a,t,h);if(y.err)return y;if((v=this.tryParseArgumentClose(n)).err)return v;var b=Kl(n,this.clonePosition());return"select"===a?{val:{type:Sl.select,value:r,options:lc(y.val),location:b},err:null}:{val:{type:Sl.plural,value:r,options:lc(y.val),offset:g,pluralType:"plural"===a?"cardinal":"ordinal",location:b},err:null};default:return this.error(bl.INVALID_ARGUMENT_TYPE,Kl(i,s))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(bl.EXPECT_ARGUMENT_CLOSING_BRACE,Kl(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();)switch(this.char()){case 39:this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(bl.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Kl(r,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],r=0,n=e.split(Fl).filter((function(e){return e.length>0}));r<n.length;r++){var o=n[r].split("/");if(0===o.length)throw new Error("Invalid number skeleton");for(var i=o[0],a=o.slice(1),s=0,u=a;s<u.length;s++)if(0===u[s].length)throw new Error("Invalid number skeleton");t.push({stem:i,options:a})}return t}(e)}catch(e){return this.error(bl.INVALID_NUMBER_SKELETON,t)}return{val:{type:wl.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?Yl(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,r,n){for(var o,i=!1,a=[],s=new Set,u=n.value,l=n.location;;){if(0===u.length){var c=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(bl.EXPECT_PLURAL_ARGUMENT_SELECTOR,bl.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;l=Kl(c,this.clonePosition()),u=this.message.slice(c.offset,this.offset())}if(s.has(u))return this.error("select"===t?bl.DUPLICATE_SELECT_ARGUMENT_SELECTOR:bl.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);"other"===u&&(i=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?bl.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:bl.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Kl(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,t,r);if(f.err)return f;var h=this.tryParseArgumentClose(p);if(h.err)return h;a.push([u,{value:f.val,location:Kl(p,this.clonePosition())}]),s.add(u),this.bumpSpace(),u=(o=this.parseIdentifierIfPossible()).value,l=o.location}return 0===a.length?this.error("select"===t?bl.EXPECT_SELECT_ARGUMENT_SELECTOR:bl.EXPECT_PLURAL_ARGUMENT_SELECTOR,Kl(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!i?this.error(bl.MISSING_OTHER_CLAUSE,Kl(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var r=1,n=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var o=!1,i=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;o=!0,i=10*i+(a-48),this.bump()}var s=Kl(n,this.clonePosition());return o?oc(i*=r)?{val:i,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=cc(this.message,e);if(void 0===t)throw Error("Offset "+e+" is at invalid UTF-16 code unit boundary");return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(sc(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset "+e+" must be greater than or equal to the current offset "+this.offset());for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset "+e+" is at invalid UTF-16 code unit boundary");if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&vc(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return null!=r?r:null},e}();function mc(e){return e>=97&&e<=122||e>=65&&e<=90}function vc(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function yc(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function bc(e){e.forEach((function(e){if(delete e.location,xl(e)||Dl(e))for(var t in e.options)delete e.options[t].location,bc(e.options[t].value);else Cl(e)&&_l(e.style)||(Tl(e)||Al(e))&&kl(e.style)?delete e.style.location:Rl(e)&&bc(e.children)}))}function Sc(e,t){void 0===t&&(t={}),t=Il({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var r=new gc(e,t).parse();if(r.err){var n=SyntaxError(bl[r.err.kind]);throw n.location=r.err.location,n.originalMessage=r.err.message,n}return(null==t?void 0:t.captureLocation)||bc(r.val),r.val}function wc(e,t){var r=t&&t.cache?t.cache:Dc,n=t&&t.serializer?t.serializer:Tc;return(t&&t.strategy?t.strategy:Cc)(e,{cache:r,serializer:n})}function Ic(e,t,r,n){var o,i=null==(o=n)||"number"==typeof o||"boolean"==typeof o?n:r(n),a=t.get(i);return void 0===a&&(a=e.call(this,n),t.set(i,a)),a}function Ec(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Oc(e,t,r,n,o){return r.bind(t,e,n,o)}function Cc(e,t){return Oc(e,this,1===e.length?Ic:Ec,t.cache.create(),t.serializer)}var Tc=function(){return JSON.stringify(arguments)};function Ac(){this.cache=Object.create(null)}Ac.prototype.get=function(e){return this.cache[e]},Ac.prototype.set=function(e,t){this.cache[e]=t};var xc,Dc={create:function(){return new Ac}},Pc={variadic:function(e,t){return Oc(e,this,Ec,t.cache.create(),t.serializer)},monadic:function(e,t){return Oc(e,this,Ic,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(xc||(xc={}));var Rc,_c=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.code=r,o.originalMessage=n,o}return ml(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),kc=function(e){function t(t,r,n,o){return e.call(this,'Invalid values for "'+t+'": "'+r+'". Options are "'+Object.keys(n).join('", "')+'"',xc.INVALID_VALUE,o)||this}return ml(t,e),t}(_c),Nc=function(e){function t(t,r,n){return e.call(this,'Value for "'+t+'" must be of type '+r,xc.INVALID_VALUE,n)||this}return ml(t,e),t}(_c),Mc=function(e){function t(t,r){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+r+'"',xc.MISSING_VALUE,r)||this}return ml(t,e),t}(_c);function jc(e){return"function"==typeof e}function Lc(e,t,r,n,o,i,a){if(1===e.length&&El(e[0]))return[{type:Rc.literal,value:e[0].value}];for(var s=[],u=0,l=e;u<l.length;u++){var c=l[u];if(El(c))s.push({type:Rc.literal,value:c.value});else if(Pl(c))"number"==typeof i&&s.push({type:Rc.literal,value:r.getNumberFormat(t).format(i)});else{var d=c.value;if(!o||!(d in o))throw new Mc(d,a);var p=o[d];if(Ol(c))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),s.push({type:"string"==typeof p?Rc.literal:Rc.object,value:p});else if(Tl(c)){var f="string"==typeof c.style?n.date[c.style]:kl(c.style)?c.style.parsedOptions:void 0;s.push({type:Rc.literal,value:r.getDateTimeFormat(t,f).format(p)})}else if(Al(c))f="string"==typeof c.style?n.time[c.style]:kl(c.style)?c.style.parsedOptions:void 0,s.push({type:Rc.literal,value:r.getDateTimeFormat(t,f).format(p)});else if(Cl(c))(f="string"==typeof c.style?n.number[c.style]:_l(c.style)?c.style.parsedOptions:void 0)&&f.scale&&(p*=f.scale||1),s.push({type:Rc.literal,value:r.getNumberFormat(t,f).format(p)});else{if(Rl(c)){var h=c.children,g=c.value,m=o[g];if(!jc(m))throw new Nc(g,"function",a);var v=m(Lc(h,t,r,n,o,i).map((function(e){return e.value})));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map((function(e){return{type:"string"==typeof e?Rc.literal:Rc.object,value:e}})))}if(xl(c)){if(!(y=c.options[p]||c.options.other))throw new kc(c.value,p,Object.keys(c.options),a);s.push.apply(s,Lc(y.value,t,r,n,o))}else if(Dl(c)){var y;if(!(y=c.options["="+p])){if(!Intl.PluralRules)throw new _c('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',xc.MISSING_INTL_API,a);var b=r.getPluralRules(t,{type:c.pluralType}).select(p-(c.offset||0));y=c.options[b]||c.options.other}if(!y)throw new kc(c.value,p,Object.keys(c.options),a);s.push.apply(s,Lc(y.value,t,r,n,o,p-(c.offset||0)))}}}}return(S=s).length<2?S:S.reduce((function(e,t){var r=e[e.length-1];return r&&r.type===Rc.literal&&t.type===Rc.literal?r.value+=t.value:e.push(t),e}),[]);var S}function Uc(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Rc||(Rc={}));var Fc,$c=function(){function e(t,r,n,o){var i,a,s,u=this;if(void 0===r&&(r=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=u.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&t.type===Rc.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return Lc(u.ast,u.locales,u.formatters,u.formats,e,void 0,u.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(u.locales)[0]}},this.getAst=function(){return u.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==o?void 0:o.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=(a=e.formats,(s=n)?Object.keys(a).reduce((function(e,t){var r,n;return e[t]=(r=a[t],(n=s[t])?vl(vl(vl({},r||{}),n||{}),Object.keys(r).reduce((function(e,t){return e[t]=vl(vl({},r[t]),n[t]||{}),e}),{})):r),e}),vl({},a)):a),this.locales=r,this.formatters=o&&o.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,yl([void 0],t)))}),{cache:Uc(i.number),strategy:Pc.variadic}),getDateTimeFormat:wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,yl([void 0],t)))}),{cache:Uc(i.dateTime),strategy:Pc.variadic}),getPluralRules:wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,yl([void 0],t)))}),{cache:Uc(i.pluralRules),strategy:Pc.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=Sc,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Fc||(Fc={}));var Bc=function(e){function t(r,n,o){var i=e.call(this,"[@formatjs/intl Error "+r+"] "+n+" \n"+(o?"\n"+o.message+"\n"+o.stack:""))||this;return i.code=r,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return pl(t,e),t}(Error),Wc=function(e){function t(t,r){return e.call(this,Fc.UNSUPPORTED_FORMATTER,t,r)||this}return pl(t,e),t}(Bc),Gc=function(e){function t(t,r){return e.call(this,Fc.INVALID_CONFIG,t,r)||this}return pl(t,e),t}(Bc),Vc=function(e){function t(t,r){return e.call(this,Fc.MISSING_DATA,t,r)||this}return pl(t,e),t}(Bc),qc=function(e){function t(t,r,n,o){var i=e.call(this,Fc.FORMAT_ERROR,t+" \nLocale: "+r+"\nMessageID: "+(null==n?void 0:n.id)+"\nDefault Message: "+(null==n?void 0:n.defaultMessage)+"\nDescription: "+(null==n?void 0:n.description)+" \n",o)||this;return i.descriptor=n,i}return pl(t,e),t}(Bc),zc=function(e){function t(t,r){var n=e.call(this,Fc.MISSING_TRANSLATION,'Missing message: "'+t.id+'" for locale "'+r+'", using '+(t.defaultMessage?"default message":"id")+" as fallback.")||this;return n.descriptor=t,n}return pl(t,e),t}(Bc);function Hc(e,t,r){return void 0===r&&(r={}),t.reduce((function(t,n){return n in e?t[n]=e[n]:n in r&&(t[n]=r[n]),t}),{})}var Yc={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},onError:function(e){}};function Jc(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Xc(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function Kc(e,t,r,n){var o,i=e&&e[t];if(i&&(o=i[r]),o)return o;n(new Wc("No "+t+" format named: "+r))}var Qc=function(e,t){return Qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Qc(e,t)},Zc=function(){return Zc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zc.apply(this,arguments)};function ed(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function td(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function rd(e,t,r){if(void 0===r&&(r=Error),!e)throw new r(t)}function nd(e){rd(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}Object.create,Object.create;var od=Zc(Zc({},Yc),{textComponent:C.Fragment});function id(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=r[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var ad=C.createContext(null),sd=ad.Consumer,ud=ad.Provider,ld=ad;function cd(e,t){var r,n=t||{},o=n.intlPropName,i=void 0===o?"intl":o,a=n.forwardRef,s=void 0!==a&&a,u=n.enforceContext,l=void 0===u||u,c=function(t){return C.createElement(sd,null,(function(r){var n;l&&nd(r);var o=((n={})[i]=r,n);return C.createElement(e,Zc({},t,o,{ref:s?t.forwardedRef:null}))}))};return c.displayName="injectIntl("+(((r=e).displayName||r.name||"Component")+")"),c.WrappedComponent=e,s?L()(C.forwardRef((function(e,t){return C.createElement(c,Zc({},e,{forwardedRef:t}))})),e):L()(c,e)}function dd(e,t){return Object.keys(e).reduce((function(r,n){return r[n]=fl({timeZone:t},e[n]),r}),{})}function pd(e,t){return Object.keys(fl(fl({},e),t)).reduce((function(r,n){return r[n]=fl(fl({},e[n]||{}),t[n]||{}),r}),{})}function fd(e,t){if(!t)return e;var r=$c.formats;return fl(fl(fl({},r),e),{date:pd(dd(r.date,t),dd(e.date||{},t)),time:pd(dd(r.time,t),dd(e.time||{},t))})}function hd(e,t,r,n,o){var i=e.locale,a=e.formats,s=e.messages,u=e.defaultLocale,l=e.defaultFormats,c=e.onError,d=e.timeZone,p=e.defaultRichTextElements;void 0===r&&(r={id:""});var f=r.id,h=r.defaultMessage;rd(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var g=String(f),m=s&&Object.prototype.hasOwnProperty.call(s,g)&&s[g];if(Array.isArray(m)&&1===m.length&&m[0].type===Sl.literal)return m[0].value;if(!n&&m&&"string"==typeof m&&!p)return m.replace(/'\{(.*?)\}'/gi,"{$1}");if(n=fl(fl({},p),n||{}),a=fd(a,d),l=fd(l,d),!m){if((!h||i&&i.toLowerCase()!==u.toLowerCase())&&c(new zc(r,i)),h)try{return t.getMessageFormat(h,u,l,o).format(n)}catch(e){return c(new qc('Error formatting default message for: "'+g+'", rendering default message verbatim',i,r,e)),"string"==typeof h?h:g}return g}try{return t.getMessageFormat(m,i,a,fl({formatters:t},o||{})).format(n)}catch(e){c(new qc('Error formatting message: "'+g+'", using '+(h?"default message":"id")+" as fallback.",i,r,e))}if(h)try{return t.getMessageFormat(h,u,l,o).format(n)}catch(e){c(new qc('Error formatting the default message for: "'+g+'", rendering message verbatim',i,r,e))}return"string"==typeof m?m:"string"==typeof h?h:g}var gd=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function md(e,t,r){var n=e.locale,o=e.formats,i=e.onError;void 0===r&&(r={});var a=r.format,s=a&&Kc(o,"number",a,i)||{};return t(n,Hc(r,gd,s))}function vd(e,t,r,n){void 0===n&&(n={});try{return md(e,t,n).format(r)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting number.",t))}return String(r)}function yd(e,t,r,n){void 0===n&&(n={});try{return md(e,t,n).formatToParts(r)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting number.",t))}return[]}var bd=["numeric","style"];function Sd(e,t,r,n,o){void 0===o&&(o={}),n||(n="second"),Intl.RelativeTimeFormat||e.onError(new _c('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',xc.MISSING_INTL_API));try{return function(e,t,r){var n=e.locale,o=e.formats,i=e.onError;void 0===r&&(r={});var a=r.format,s=!!a&&Kc(o,"relative",a,i)||{};return t(n,Hc(r,bd,s))}(e,t,o).format(r,n)}catch(t){e.onError(new qc("Error formatting relative time.",t))}return String(r)}var wd=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function Id(e,t,r,n){var o=e.locale,i=e.formats,a=e.onError,s=e.timeZone;void 0===n&&(n={});var u=n.format,l=fl(fl({},s&&{timeZone:s}),u&&Kc(i,t,u,a)),c=Hc(n,wd,l);return"time"!==t||c.hour||c.minute||c.second||c.timeStyle||c.dateStyle||(c=fl(fl({},c),{hour:"numeric",minute:"numeric"})),r(o,c)}function Ed(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Id(e,"date",t,a).format(s)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting date.",t))}return String(s)}function Od(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Id(e,"time",t,a).format(s)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting time.",t))}return String(s)}function Cd(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=r[2],s=void 0===a?{}:a,u=e.timeZone,l=e.locale,c=e.onError,d=Hc(s,wd,u?{timeZone:u}:{});try{return t(l,d).formatRange(o,i)}catch(e){c(new Bc(Fc.FORMAT_ERROR,"Error formatting date time range.",e))}return String(o)}function Td(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Id(e,"date",t,a).formatToParts(s)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting date.",t))}return[]}function Ad(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=void 0===i?{}:i,s="string"==typeof o?new Date(o||0):o;try{return Id(e,"time",t,a).formatToParts(s)}catch(t){e.onError(new Bc(Fc.FORMAT_ERROR,"Error formatting time.",t))}return[]}var xd=["localeMatcher","type"];function Dd(e,t,r,n){var o=e.locale,i=e.onError;void 0===n&&(n={}),Intl.PluralRules||i(new _c('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',xc.MISSING_INTL_API));var a=Hc(n,xd);try{return t(o,a).select(r)}catch(e){i(new qc("Error formatting plural.",e))}return"other"}var Pd=["localeMatcher","type","style"],Rd=Date.now();function _d(e,t,r,n){void 0===n&&(n={});var o=kd(e,t,r,n).reduce((function(e,t){var r=t.value;return"string"!=typeof r?e.push(r):"string"==typeof e[e.length-1]?e[e.length-1]+=r:e.push(r),e}),[]);return 1===o.length?o[0]:o}function kd(e,t,r,n){var o=e.locale,i=e.onError;void 0===n&&(n={}),Intl.ListFormat||i(new _c('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',xc.MISSING_INTL_API));var a=Hc(n,Pd);try{var s={},u=r.map((function(e,t){if("object"==typeof e){var r=function(e){return Rd+"_"+e+"_"+Rd}(t);return s[r]=e,r}return String(e)}));return t(o,a).formatToParts(u).map((function(e){return"literal"===e.type?e:fl(fl({},e),{value:s[e.value]||e.value})}))}catch(e){i(new Bc(Fc.FORMAT_ERROR,"Error formatting list.",e))}return r}var Nd=["localeMatcher","style","type","fallback"];function Md(e,t,r,n){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new _c('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',xc.MISSING_INTL_API));var a=Hc(n,Nd);try{return t(o,a).of(r)}catch(e){i(new Bc(Fc.FORMAT_ERROR,"Error formatting display name.",e))}}function jd(e,t){var r=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,n=Intl.DisplayNames,o=wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,hl([void 0],t)))}),{cache:Xc(e.dateTime),strategy:Pc.variadic}),i=wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,hl([void 0],t)))}),{cache:Xc(e.number),strategy:Pc.variadic}),a=wc((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,hl([void 0],t)))}),{cache:Xc(e.pluralRules),strategy:Pc.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:wc((function(e,t,r,n){return new $c(e,t,r,fl({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:a}},n||{}))}),{cache:Xc(e.message),strategy:Pc.variadic}),getRelativeTimeFormat:wc((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,hl([void 0],e)))}),{cache:Xc(e.relativeTime),strategy:Pc.variadic}),getPluralRules:a,getListFormat:wc((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,hl([void 0],e)))}),{cache:Xc(e.list),strategy:Pc.variadic}),getDisplayNames:wc((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,hl([void 0],e)))}),{cache:Xc(e.displayNames),strategy:Pc.variadic})}}(t),n=fl(fl({},Yc),e),o=n.locale,i=n.defaultLocale,a=n.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&a?a(new Vc('Missing locale data for locale: "'+o+'" in Intl.NumberFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&a&&a(new Vc('Missing locale data for locale: "'+o+'" in Intl.DateTimeFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):(a&&a(new Gc('"locale" was not configured, using "'+i+'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details')),n.locale=n.defaultLocale||"en"),function(e){var t;e.defaultRichTextElements&&"string"==typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}(n),fl(fl({},n),{formatters:r,formatNumber:vd.bind(null,n,r.getNumberFormat),formatNumberToParts:yd.bind(null,n,r.getNumberFormat),formatRelativeTime:Sd.bind(null,n,r.getRelativeTimeFormat),formatDate:Ed.bind(null,n,r.getDateTimeFormat),formatDateToParts:Td.bind(null,n,r.getDateTimeFormat),formatTime:Od.bind(null,n,r.getDateTimeFormat),formatDateTimeRange:Cd.bind(null,n,r.getDateTimeFormat),formatTimeToParts:Ad.bind(null,n,r.getDateTimeFormat),formatPlural:Dd.bind(null,n,r.getPluralRules),formatMessage:hd.bind(null,n,r),formatList:_d.bind(null,n,r.getListFormat),formatListToParts:kd.bind(null,n,r.getListFormat),formatDisplayName:Md.bind(null,n,r.getDisplayNames)})}function Ld(e){return{locale:e.locale,timeZone:e.timeZone,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function Ud(e){return e?Object.keys(e).reduce((function(t,r){var n,o=e[r];return t[r]=jc(o)?(n=o,function(e){return n(C.Children.toArray(e))}):o,t}),{}):e}var Fd=function(e,t,r,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var a=Ud(n),s=hd.apply(void 0,td([e,t,r,a],o));return Array.isArray(s)?C.Children.toArray(s):s},$d=function(e,t){var r=e.defaultRichTextElements,n=ed(e,["defaultRichTextElements"]),o=Ud(r),i=jd(Zc(Zc(Zc({},od),n),{defaultRichTextElements:o}),t);return Zc(Zc({},i),{formatMessage:Fd.bind(null,{locale:i.locale,timeZone:i.timeZone,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o},i.formatters)})},Bd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:$d(Ld(t.props),t.cache),prevConfig:Ld(t.props)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Qc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.getDerivedStateFromProps=function(e,t){var r=t.prevConfig,n=t.cache,o=Ld(e);return id(r,o)?null:{intl:$d(o,n),prevConfig:o}},t.prototype.render=function(){return nd(this.state.intl),C.createElement(ud,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=od,t}(C.PureComponent);const Wd=Bd;function Gd(e,t){const r=qd(e=e.toLowerCase(),t);if(r&&r!==(t&&t[0]))return r}function Vd(e){if(!e)return;const t=["language","browserLanguage","systemLanguage","userLanguage"];let r,n;if(Array.isArray(e.languages)&&e.languages.length>0&&(n=e.languages[0],n&&n.length))return n;for(r=0;r<t.length;r++)if(n=e[t[r]],n&&n.length)return n}function qd(e,t=[]){if(e)return Qd(e,t)}function zd(e,t){return e.split("-")[0]===t.split("-")[0]}function Hd(e,t){return r=this,n=void 0,i=function*(){return yield Bp(`${e}/${t}`)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}function Yd(e){let t=!1;const r=["ar","he"];for(let n=0;n<r.length;n++)zd(r[n],e)&&(t=!0);return t}const Jd={};function Xd(e="_jimu",t="runtime"){var r,n,o,i,a,s,u,l;const c=`${e}-${t}`;if(Jd[c])return Jd[c];const d={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},p=tg().getState();if(!p)return null;let f;if("_jimu"===e)f=$d({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:p.appI18nMessages},d);else if("runtime"===t){const t=window.jimuConfig.isBuilder?null===(r=p.appStateInBuilder)||void 0===r?void 0:r.appConfig:p.appConfig,i=null===(o=null===(n=null==t?void 0:t.widgets)||void 0===n?void 0:n[e])||void 0===o?void 0:o.manifest.i18nMessages,a=Object.assign({},i,p.appI18nMessages);f=$d({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:a},d)}else{let t;if(window.jimuConfig.isBuilder){const r=null===(u=null===(s=null===(a=null===(i=p.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===a?void 0:a.widgets)||void 0===s?void 0:s[e])||void 0===u?void 0:u.manifest.name;t=null===(l=p.builder.widgetSettingI18nMessages)||void 0===l?void 0:l[r]}else t={};const r=Object.assign({},t,p.appI18nMessages);f=$d({locale:p.appContext.locale,defaultLocale:p.appContext.locale,messages:r},d)}return Jd[c]=f,f}function Kd(e){return Qd(e,["ar","en","he","ja","ko","es-mx","th","zh","it-ch","de-ch"])?".":","}function Qd(e,t=[]){let r;if(e=e.toLowerCase(),t.includes(e))r=e;else{const n=e.split("-")[0];if(t.includes(n))r=n;else{const n=t.find((t=>t.split("-")[0]===e));n&&(r=n)}}return r}var Zd=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function ep(e,t){return ap(e,t)}function tp(e,t){return ap(e,t)}function rp(){var e;return"undefined"!=typeof window&&Boolean("ontouchstart"in window||(null===(e=window.navigator)||void 0===e?void 0:e.maxTouchPoints)>0||window.DocumentTouch&&document instanceof window.DocumentTouch)}function np(e){return e.width<=Tu[0]?Mi.Small:e.width<=Tu[1]?Mi.Medium:Mi.Large}function op(e,t){let r=ss(e,`forBuilderAttributes.viewPortSize.${t}`);return r||(r=ss(Pu[t],"[1]")),r||{width:0,height:0}}function ip(e){return e===Mi.Small?Tu[0]:e===Mi.Medium?Tu[1]:1e5}function ap(e,t){switch(e){case"opened":switch(t){case"opened":return null;case"closed":return"onOpen";case"active":return"onDeActive"}case"closed":switch(t){case"opened":return"onClose";case"closed":return null;case"active":return["onDeActive","onClose"]}case"active":switch(t){case"opened":return"onDeActive";case"closed":return["onOpen","onActive"];case"active":return null}}}function sp(e,t){return Zd(this,void 0,void 0,(function*(){return yield new Promise((r=>{let n;n=t?document.getElementById(t):document.getElementsByTagName("head")[0];const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),o.onload=()=>{r(null)},n.appendChild(o)}))}))}function up(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{e.prototype[r]=t.prototype[r]}))}))}function lp(e,t){return e.length===t.length&&(e=e.sort(((e,t)=>e>t?-1:1)),t=t.sort(((e,t)=>e>t?-1:1)),Cu(e,t))}const cp=/([A-Z])/g,dp=/^ms-/;function pp(e){return e.replace(cp,"-$1").toLowerCase().replace(dp,"-ms-")}function fp(e){let t="";for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r];null!=n&&(t?t+=";"+pp(r)+":"+n:t=pp(r)+":"+n)}return t||""}function hp(e,t=1e3,r=100){return Zd(this,void 0,void 0,(function*(){const n=(new Date).getDate();function o(i){const a=(new Date).getDate(),s=e();if(s)i(null,s);else{if(n+t>=a)return void i("Timeout",null);setTimeout((()=>{o(i)}),r)}}return new Promise(((e,t)=>{o(((r,n)=>{r?t(r):e(n)}))}))}))}function gp(){return window.jimuConfig.isBuilder?`exb-${tg().getState().appStateInBuilder.appId||tg().getState().appStateInBuilder.appPath}`:`exb-${tg().getState().appId||tg().getState().appPath}`}const mp=()=>(65536*(1+Math.random())|0).toString(16).substring(1),vp=()=>mp()+mp()+"_"+mp()+"_"+mp()+"_"+mp()+"_"+mp()+mp()+mp(),yp=e=>e.toString().includes(".")?e.toString().split(".")[1].length:0,bp=(e,t=Ce([]))=>{const r=new RegExp(`^${e}\\_(\\d+)$`);let n=-1;return t.forEach((e=>{const t=e.match(r);t&&(n=Math.max(n,parseInt(t[1],10)))})),`${e}_${n+1}`};function Sp(e,t,r){const n=/\$\{\w*\}/g;for(const o in e)if("string"==typeof e[o]){const i=e[o].match(n);if(i&&i.length>0){let n=e[o];i.forEach((e=>{const o=e.substring(2,e.length-1);if("appResourceUrl"!==o){const i=t.formatMessage({id:o,defaultMessage:r&&r[o]});n=n.replace(e,i)}})),e[o]=n}}else"object"==typeof e[o]&&Sp(e[o],t,r);return e}function wp(){return Zd(this,void 0,void 0,(function*(){return yield Promise.resolve(!1)}))}function Ip(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"}const Ep=e=>{if(null==e?void 0:e.format){if(e.type===ji.Date)return il(e.format.dateFormat);if(e.type===ji.Number){const t=e.format.places,r=e.format.digitSeparator,n={style:"decimal",notation:"standard"};return"number"==typeof t&&(n.minimumFractionDigits=t,n.maximumFractionDigits=t),"boolean"==typeof r&&(n.useGrouping=r),n}}};function Op(e){const t={props:null,result:null};return function(r){if("object"!=typeof r)return console.error("Memorize object param only."),r;if(Object.keys(r).find((e=>{var n;return r[e]!==(null===(n=t.props)||void 0===n?void 0:n[e])}))){const n=e.call(this,r);return t.props=r,t.result=n,n}return t.result}}function Cp(){try{return Object.keys(localStorage)}catch(e){return console.error("Read Local storage keys error.",e),[]}}function Tp(e){try{return localStorage.getItem(e)}catch(e){return console.error("Read Local storage error.",e),null}}function Ap(e,t){try{localStorage.setItem(e,t)}catch(e){console.error("Set Local storage error.",e)}}function xp(){try{return Object.keys(sessionStorage)}catch(e){return console.error("Read Session storage keys error.",e),[]}}function Dp(e){try{return sessionStorage.getItem(e)}catch(e){return console.error("Read session storage error.",e),null}}function Pp(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("Set session storage error.",e)}}function Rp(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove from Local storage error.",e)}}function _p(e){try{sessionStorage.removeItem(e)}catch(e){console.error("Remove from session storage error.",e)}}function kp(e){return[e<0?"-":"",Xd().formatNumber(Math.abs(e))]}function Np(e){var t,r;const n=tg().getState().appContext.locale,o=null!==(r=null===(t=tg().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==r&&r,i=parseFloat(e),[a,s]=kp(i),u=window.jimuUA.browser.name.toLowerCase();return o&&"firefox"!==u&&"safari"!==u?"he"===(null==n?void 0:n.toLowerCase())?`${a}${s}%`:`${a}%${s}`:"tr"===(null==n?void 0:n.toLowerCase())?`${a}%${s}`:`${a}${s}%`}function Mp(e){var t,r;const n=parseFloat(e),o=null!==(r=null===(t=tg().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==r&&r,[i,a]=kp(n);return o?`${i}px${a}`:`${i}${a}px`}const jp=()=>$p("jimu-theme")?$p("jimu-theme"):(console.error("Please init jimu-theme."),null);function Lp(e,t){function r(e){for(const t in e)"object"==typeof e[t]?Array.isArray(e[t])?o(e,t):r(e[t]):"string"==typeof e[t]&&n(e,t)}function n(e,r,n){if("number"==typeof n){const o=e[r][n];if(t.matcher(o)){const i=t.handler(o);e[r][n]=i}}else{const n=e[r];if(t.matcher(n)){const o=t.handler(n);e[r]=o}}}function o(e,t){for(let o=0;o<e[t].length;o++)"string"==typeof e[t][o]?n(e,t,o):"object"==typeof e[t][o]&&r(e[t][o])}return r(e),e}var Up,Fp=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function $p(e){const t=window.SystemJS.get(Gp(e));return t?t.__useDefault?t.default:t:null}function Bp(e,t){return Fp(this,void 0,void 0,(function*(){const r=(window._cachedModules||{})[e],n=!!t&&!!r&&t.every((e=>e in r));return Promise.resolve(n?r:window.SystemJS.import(e)).then((e=>e.__useDefault?e.default:e)).catch((e=>{console.error("Load module error.",e),wp().then((e=>{e&&tg().dispatch(Fm(!0))}))}))}))}function Wp(e){return Fp(this,void 0,void 0,(function*(){return yield Promise.all(e.map((e=>Fp(this,void 0,void 0,(function*(){return yield Bp(e)})))))}))}function Gp(e){return window.SystemJS.resolve(e)}function Vp(e){const t=Gp(e);return/^file:/.test(t)?t:t.substring(`${window.location.protocol}//${window.location.host}`.length,t.length)}function qp(){return $p("jimu-for-builder")}function zp(e){window.SystemJS.delete(Gp(e))}!function(e){e.AppConfigProcessor="APP_CONFIG_PROCESSOR",e.WidgetClassWrapper="WIDGET_CLASS_WRAPPER",e.AppConfigService="APP_CONFIG_SERVICE",e.ReduxStore="REDUX_STORE",e.DependencyDefine="DEPENDENCY_DEFINE",e.DataSourceFactoryUri="DATA_SOURCE_FACTORY_URI",e.ContextTool="CONTEXT_TOOL",e.AppConfigOperations="APP_CONFIG_OPERATIONS",e.LayoutTransformer="LAYOUT_TRANSFORMER"}(Up||(Up={}));const Hp=[Up.ReduxStore,Up.DataSourceFactoryUri,Up.DependencyDefine,Up.ContextTool,Up.AppConfigOperations,Up.LayoutTransformer],Yp=[Up.ContextTool,Up.AppConfigOperations];class Jp{}var Xp,Kp,Qp,Zp,ef,tf,rf,nf,of,af,sf,uf,lf=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class cf{constructor(){this.extensions={},this.extensionClasses={}}static getInstance(){return cf.instance||(cf.instance=new cf,window._extensionManager=cf.instance),cf.instance}getExtensions(e){return this.extensions[e]||[]}getAllExtensions(){const e=[];return Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{e.push(t)}))})),e}registerExtension(e){if(this.getExtensionById(e.extension.id))console.log(`Extension ${e.extension.id} has been registered.`);else{if(this.extensions[e.epName]){if(!Hp.includes(e.epName))return;this.extensions[e.epName].push(e.extension),this.extensions[e.epName]=this.extensions[e.epName].sort(((e,t)=>e.index-t.index))}else this.extensions[e.epName]=[e.extension];e.epName===Up.ReduxStore&&tg().dispatch(om(e.extension.id))}}destryAllExtensions(){Object.keys(this.extensions).forEach((e=>{this.extensions[e].forEach((e=>{delete this.extensionClasses[e.name],e.destroy&&e.destroy()}))})),this.extensions={}}destryWidgetExtensions(e){Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{t.widgetId===e&&(delete this.extensionClasses[t.name],t.destroy&&t.destroy())})),this.extensions[t]=this.extensions[t].filter((t=>t.widgetId!==e))}))}registerWidgetExtensions(e){return lf(this,void 0,void 0,(function*(){const t=[];return e.manifest.extensions&&e.manifest.extensions.forEach((r=>{(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||!Yp.includes(r.point))&&t.push(this.registerWidgetExtension(e,r))})),Promise.all(t)}))}registerWidgetExtension(e,t){return lf(this,void 0,void 0,(function*(){if(this.extensions[t.point]){if(!Hp.includes(t.point))return Promise.resolve();if(this.extensions[t.point].filter((r=>r.name===`${e.manifest.name}-${t.name}`&&r.widgetId===e.id)).length>0)return Promise.resolve()}return this.loadWidgetExtensionClass(e,t).then((r=>{const n=new r;n.name=`${e.manifest.name}-${t.name}`,n.widgetId=e.id,n.id=`${n.widgetId}-${t.name}`,n.label=e.manifest.i18nMessages[`_ext_${t.name}_label`]||t.label,this.registerExtension({epName:t.point,extension:n})})).catch((t=>lf(this,void 0,void 0,(function*(){return console.error("Register widget extension error.",e.label),yield Promise.resolve()}))))}))}loadWidgetExtensionClass(e,t){return lf(this,void 0,void 0,(function*(){const r=`${e.manifest.name}-${t.name}`;if(this.extensionClasses[r])return yield this.extensionClasses[r];const n=e.uri+"dist/"+t.uri;return this.extensionClasses[r]=Bp(n,["default"]).then((e=>e.default)),this.extensionClasses[r]}))}getExtensionById(e){const t=this.getAllExtensions();for(const r of t)if(r.id===e)return r}}function df(e){let t="",r=e||"";return r=vf(r),r&&(t=r+"/sharing/rest/portals/self"),t}function pf(){const e=`${window.location.protocol}//${window.location.host}${function(){const e=window.location.href.split("?")[0];let t=e.indexOf("/home/");t<0&&(t=e.indexOf("/apps/"));let r=e.substring(e.indexOf(window.location.host)+window.location.host.length+1,t);return"/"!==r&&(r="/"+r+"/"),r}()}`;return e.substr(0,e.length-1)}function ff(e){return/\/$/.test(e)?`${e}sharing/rest/`:`${e}/sharing/rest/`}function hf(e){const t=/\/$/.test(e)?"/sharing/rest/":"/sharing/rest";return e.substr(0,e.length-t.length)}function gf(e,t){const r=/^http(s?):\/\//gi,n=/^\/\//gi;return(e=vf(e).toLowerCase().replace(r,"").replace(n,""))===vf(t).toLowerCase().replace(r,"").replace(n,"")}function mf(e){return Ch(e).includes(".arcgis.com")}function vf(e){const t=Ch(e);return""===t?"":mf(t)?Eh(t,zi.Https):Eh(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),zi.Https)}function yf(e){let t="";const r=vf(e);return r&&(t=r+"/sharing/rest/content/items"),t}function bf(e,t){let r="";const n=yf(e);return n&&t&&(r=n+"/"+t),r}function Sf(e){let t="";const r=vf(e);return r&&(t=r+"/sharing/rest/community/users"),t}function wf(e,t){let r="";const n=Sf(e);return e&&t&&(r=n+"/"+t),r}function If(e){let t="";return e&&(t=(e=vf(e))+"/sharing/rest/content"),t}function Ef(e,t,r){let n="",o="";return e&&t&&(n=If(e),o=r?n+"/users/"+t+"/"+r:n+"/users/"+t),o}function Of(e,t,r){let n="",o="";return e&&t&&(n=Ef(e,t,r),o=n+"/items"),o}function Cf(e,t,r,n){let o="",i="";return e&&t&&(o=Of(e,t,n),i=o+"/"+r+"/share"),i}function Tf(e){let t="";const r=vf(e);return r&&(t=r+"/home/index.html"),t}function Af(e,t){let r="";const n=vf(e);return n&&(r=n+"/home/webmap/viewer.html",r+=t?"?webmap="+t:"?useExisting=1"),r}function xf(e){const t=window.location.protocol,r=Ih(e);return Ih(e)?t!==r&&t===zi.Https?Eh(e,zi.Https):e:Eh(e,t)}function Df(e){return`${e}/sharing/proxy`}function Pf(e){if(!e)return e;if(mf(e)){const t=Ch(e),r=Ih(e),n=t.split("."),o=n[0];n.splice(0,1);const i=n.join(".");let a;return"devext"===o||"mapsdevext.arcgis.com"===i?a="devext.arcgis.com":"qaext"===o||"mapsqa.arcgis.com"===i?a="qaext.arcgis.com":"www"!==o&&"maps.arcgis.com"!==i||(a="www.arcgis.com"),a=a&&`${r?r+"//":""}${a}`,a}return e}function Rf(){if(window.jimuConfig.isOutOfExb)return"./resources";{let e=null;e=window.jimuConfig.isBuilder?tg().getState().appStateInBuilder:tg().getState();const t=e&&e.appId;return window.jimuConfig.isDevEdition?window.location.origin+"/apps/"+t+"/resources":Pf(tg().getState().portalUrl)+"/sharing/rest/content/items/"+t+"/resources"}}function _f(e,t){const r=Rf(),n=new RegExp("^"+r),o=new RegExp("^\\$\\{appResourceUrl\\}+(.)");return Lp(e,{matcher:function(e){return o.test(e)||n.test(e)},handler:function(e){let n=null;return n=t?e+"?token="+t:e,n=n.replace("${appResourceUrl}",r),n}})}function kf(e){const t=Rf(),r=new RegExp("^"+t);return Lp(e,{matcher:function(e){return r.test(e)},handler:function(e){let r=e.split("?")[0];return r=r.replace(t,"${appResourceUrl}"),r}}),e}function Nf(e){const t={};return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?(t.isRemote=!0,t.folderUrl=e):(t.isRemote=!1,t.folderUrl=`${window.location.protocol}//${window.location.host}${gh()}${e}`),t}function Mf(e){const t=Ce(e).asMutable({deep:!0});return void 0===e.properties&&(t.properties={}),["hasVersionManager","supportInlineEditing","supportRepeat","hasBuilderSupportModule","hasEmbeddedLayout","lockChildren","flipIcon","coverLayoutBackground","canCrossLayoutBoundary","needActiveState","canConsumeDataAction","watchViewportVisibility"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!1)})),["hasMainClass","hasConfig","hasSettingPage","hasConfigInSettingPage","passDataSourceToChildren","deactivateOtherWidgets","supportAutoSize"].forEach((function(e){void 0===t.properties[e]&&(t.properties[e]=!0)})),t}function jf(e,t){t.icon=t.icon?t.icon:t.context.folderUrl+"icon.svg",t.label=t.label?t.label:Ff(e,"widget",t.manifest?t.manifest.i18nMessages._widgetLabel||t.manifest.label||t.manifest.name:"")}function Lf(e){e.widgets&&Object.keys(e.widgets).forEach((t=>{const r=e.widgets[t];r.layouts&&Object.keys(r.layouts).forEach((t=>{Object.keys(r.layouts[t]).forEach((n=>{var o;const i=r.layouts[t][n];if(e.layouts[i]&&!e.layouts[i].label){const n=null===(o=r.manifest.layouts)||void 0===o?void 0:o.find((e=>e.name===t));e.layouts[i].label=r.manifest.i18nMessages[`_layout_${t}_label`]||(null==n?void 0:n.label)||(null==n?void 0:n.name)}}))}))}))}function Uf(e,t){let r=0;const n="y"===t.charAt(t.length-1)?`${t.slice(0,t.length-1)}ies`:`${t}s`;return e[n]?(Object.keys(e[n]).forEach((e=>{const n=e.substring(`${t}_`.length,e.length);/^\d+$/.test(n)&&(r=Math.max(r,parseInt(n)))})),`${t}_${r+1}`):`${t}_${r+1}`}function Ff(e,t,r){let n=0;const o=r.lastIndexOf(" "),i=r.substr(o+1);let a;return/^\d+$/.test(i)?(n=Math.max(parseInt(i),n),a=r.substr(0,o)):a=r,e[`${t}s`]?(Object.keys(e[`${t}s`]).filter((r=>{const n=e[`${t}s`][r].label;return n&&n.startsWith(a)})).forEach((r=>{const o=e[`${t}s`][r].label,i=o.substring(`${a} `.length,o.length);/^\d+$/.test(i)&&(n=Math.max(n,parseInt(i)))})),`${a} ${n+1}`):`${r} ${n+1}`}function $f(e){if(!(null==e?void 0:e.widgets))return[];const t=[];return Object.keys(e.widgets).forEach((r=>{t.push(e.widgets[r])})),t}function Bf(e,t,r){let n=[];return e.messageConfigs&&Object.entries(e.messageConfigs).forEach((([e,o])=>{n=n.concat(o.actions&&o.actions.filter((e=>e.widgetId===t&&e.actionName===r)))})),n}function Wf(e,t,r){return e.sections&&Object.keys(e.sections).some((n=>{const o=e.sections[n].views;return(null==o?void 0:o.includes(t))&&(null==o?void 0:o.includes(r))}))}function Gf(e){(null==e?void 0:e.layouts)&&Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];return r.content&&Object.keys(r.content).forEach((e=>{isNaN(parseInt(e))?console.error("Layout item MUST be integer string"):r.content[e].id=e})),r.id=t,r}))}function Vf(e,t){var r,n,o,i;const a=e.appConfig,s=t,u=Object.keys(a.widgets||{}).filter((e=>!s.widgets[e]));if(e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.without.apply(e.widgetsRuntimeInfo,u)).set("widgetsState",e.widgetsState.without.apply(e.widgetsState,u)).set("widgetsMutableStateVersion",e.widgetsMutableStateVersion.without.apply(e.widgetsMutableStateVersion,u)),Object.keys(s.widgets||{}).filter((e=>!a.widgets[e])).forEach((t=>{const r=s.widgets[t];e.widgetsClassStatus[r.uri]&&(e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0))})),Object.keys(a.views||{}).filter((e=>!s.views[e])).forEach((t=>{var r,n,o,i,s,u;const l=Object.keys(a.sections||{}).find((e=>a.sections[e].views.includes(t)));(null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[l])&&((null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[l].currentViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",l,"currentViewId"],null)),(null===(o=e.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[l].previousViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",l,"previousViewId"],null)),(null===(s=null===(i=e.appRuntimeInfo.sectionNavInfos)||void 0===i?void 0:i[l].visibleViews)||void 0===s?void 0:s.find((e=>e===t)))&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",l,"visibleViews"],null===(u=e.appRuntimeInfo.sectionNavInfos)||void 0===u?void 0:u[l].visibleViews.filter((e=>e!==t)))))})),Object.keys(a.sections||{}).filter((e=>!s.sections[e])).forEach((t=>{var r;(null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[t])&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos"],e.appRuntimeInfo.sectionNavInfos.without(t)))})),e.appRuntimeInfo.currentPageId&&!s.pages[e.appRuntimeInfo.currentPageId]){const t=Object.keys(s.pages).find((e=>s.pages[e].isDefault));e=e.setIn(["appRuntimeInfo","currentPageId"],t)}if(e.appRuntimeInfo.currentDialogId&&!s.dialogs[e.appRuntimeInfo.currentDialogId]&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],null)),e.appRuntimeInfo.clipboard){const{layoutId:t,layoutItemId:o}=e.appRuntimeInfo.clipboard;(null===(n=null===(r=s.layouts[t])||void 0===r?void 0:r.content)||void 0===n?void 0:n[o])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("clipboard")))}if(e.appRuntimeInfo.selection){const{layoutId:t,layoutItemId:r}=e.appRuntimeInfo.selection;(null===(i=null===(o=s.layouts[t])||void 0===o?void 0:o.content)||void 0===i?void 0:i[r])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("selection")))}return e=e.set("appConfig",s)}function qf(e,t,r,n=!1,o=!1){const i=null==e?void 0:e[t],a=null==e?void 0:e[r];return!(!(null==i?void 0:i.parent)||!(null==a?void 0:a.parent))&&i.parent.some((e=>a.parent.some((t=>(n||!t.isPending)&&(o||e.sizeMode===t.sizeMode)&&t.type===e.type&&t.id===e.id))))}function zf(e,t,r){var n;return null!==(n=e[t])&&void 0!==n?n:e[r]}function Hf(e,t=null){var r,n,o,i;const a={};if(Object.keys(null!==(r=e.pages)&&void 0!==r?r:{}).forEach((r=>{const n=e.pages[r];if(n.layout)if(null!=t){const r=zf(n.layout,t,e.mainSizeMode);Yf(e,t,a,r,"page",n.id)}else Object.keys(n.layout).forEach((t=>{Yf(e,t,a,n.layout[t],"page",n.id)}))})),Object.keys(null!==(n=e.dialogs)&&void 0!==n?n:{}).forEach((r=>{const n=e.dialogs[r];if(null!=t){const r=zf(n.layout,t,e.mainSizeMode);Yf(e,t,a,r,"dialog",n.id)}else Object.keys(n.layout).forEach((t=>{Yf(e,t,a,n.layout[t],"dialog",n.id)}))})),null===(o=e.header)||void 0===o?void 0:o.layout)if(null!=t){const r=zf(e.header.layout,t,e.mainSizeMode);Yf(e,t,a,r,"header","header")}else Object.keys(e.header.layout).forEach((t=>{Yf(e,t,a,e.header.layout[t],"header","header")}));if(null===(i=e.footer)||void 0===i?void 0:i.layout)if(null!=t){const r=zf(e.footer.layout,t,e.mainSizeMode);Yf(e,t,a,r,"footer","footer")}else Object.keys(e.footer.layout).forEach((t=>{Yf(e,t,a,e.footer.layout[t],"footer","footer")}));return a}function Yf(e,t,r,n,o,i){const a=[n];for(;a.length>0;){const n=a.pop(),s=e.layouts[n];s&&s.content&&Object.keys(s.content).forEach((n=>{var u,l,c,d,p,f;const h=s.content[n];if(h.type===Xp.Widget&&null!=h.widgetId){const n=e.widgets[h.widgetId],s=(null===(l=null===(u=n.manifest)||void 0===u?void 0:u.dataActions)||void 0===l?void 0:l.length)>0,g=null!==(p=null===(d=null===(c=n.manifest)||void 0===c?void 0:c.properties)||void 0===d?void 0:d.canConsumeDataAction)&&void 0!==p&&p;if(s||g){const e=null!==(f=h.isPending)&&void 0!==f&&f;r[h.widgetId]?r[h.widgetId].parent.find((r=>r.type===o&&r.id===i&&r.isPending===e&&r.sizeMode===t))||r[h.widgetId].parent.push({type:o,id:i,isPending:e,sizeMode:t}):r[h.widgetId]={parent:[{type:o,id:i,isPending:e,sizeMode:t}]}}n.layouts&&Object.keys(n.layouts).forEach((r=>{const o=zf(n.layouts[r],t,e.mainSizeMode);a.push(o)}))}else h.type===Xp.Section&&h.sectionId?e.sections[h.sectionId].views.forEach((r=>{const n=zf(e.views[r].layout,t,e.mainSizeMode);a.push(n)})):h.type===Xp.ScreenGroup&&h.screenGroupId&&e.screenGroups[h.screenGroupId].screens.forEach((r=>{const n=e.screens[r],o=zf(n.main.layout,t,e.mainSizeMode);if(a.push(o),n.panel){const r=zf(n.panel.layout,t,e.mainSizeMode);a.push(r)}}))}))}}function Jf(e){var t;return(null===(t=function(e){var t,r;if(!e)return null;const n=(null===(t=null===window||void 0===window?void 0:window.jimuConfig)||void 0===t?void 0:t.isBuilder)?tg().getState().appStateInBuilder:tg().getState(),o=null===(r=null==n?void 0:n.appConfig)||void 0===r?void 0:r.widgets;return o&&Object.values(o).find((t=>{var r;return null===(r=null==t?void 0:t.outputDataSources)||void 0===r?void 0:r.some((t=>t===e.mainDataSourceId))}))||null}(e))||void 0===t?void 0:t.id)||null}function Xf(){var e,t;const r=(null===(e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===e?void 0:e.isBuilder)?tg().getState().appStateInBuilder:tg().getState(),n=((null===(t=null==r?void 0:r.appConfig)||void 0===t?void 0:t.connections)||[]).map((e=>{const t=`${e.portalUrl}/sharing/rest/oauth2/token?client_id=${e.clientId}&client_secret=invalid_secret&grant_type=client_credentials`,r=Object.assign({},e);return fetch(t).then((e=>e.json())).then((e=>{var t;return"invalid_client_id"===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error)&&(r.clientId=null),r})).catch((e=>(r.clientId=null,r)))}));Promise.allSettled(n).then((e=>{let t=null==r?void 0:r.appConfig;const n=[];e.forEach((e=>{var t;(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.clientId)&&n.push(e.value)})),t=t.set("connections",n),tg().dispatch(wg(t))}))}function Kf(e){var t;const r=window.jimuConfig.isBuilder?tg().getState().appStateInBuilder:tg().getState(),n=((null===(t=null==r?void 0:r.appConfig)||void 0===t?void 0:t.connections)||[]).find((t=>"portal"===t.type&&gf(e,null==t?void 0:t.portalUrl)));return null==n?void 0:n.clientId}function Qf(e,t,r){const n="dataSource_add_from_url_entry";(t||r)&&(function(e,t,r,n){var o;const i=r||n,a=r?"WEB_MAP":"WEB_SCENE";Object.values(e.dataSources).find((e=>e.itemId===i))||(e.dataSources[t]={type:a,itemId:i,id:t,portalUrl:null===(o=e.attributes)||void 0===o?void 0:o.portalUrl})}(e,n,t,r),function(e,t){"blankfullscreen"===e.template&&(e.widgets.widget_1={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConifg:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_1",layouts:{MapFixedLayout:{LARGE:"layout_1"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FIXED",content:{0:{type:"WIDGET",bbox:{left:"50%",right:"58.6%",top:"50%",bottom:"38.9%",width:"31.3%",height:"50.0%"},widgetId:"widget_1",setting:{autoProps:{left:!1,right:!0,top:!1,bottom:!0},hCenter:!0,vCenter:!0,heightMode:"fixed",aspectRatio:1}}},order:["0"]},e.layouts.layout_1={type:"FIXED"}),"blankscrollable"===e.template&&(e.widgets.widget_1={uri:"widgets/layout/row/",version:window.jimuConfig.exbVersion,config:{space:10,style:{padding:{number:[10],unit:"px"}}},id:"widget_1",layouts:{DEFAULT:{LARGE:"layout_1"}}},e.widgets.widget_2={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConifg:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_2",layouts:{MapFixedLayout:{LARGE:"layout_2"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FLOW",content:{0:{type:"WIDGET",bbox:{left:"80px",right:"480px",top:"4px",bottom:"404px",width:"400px",height:420},widgetId:"widget_1",setting:{heightMode:"fixed"}}},order:["0"]},e.layouts.layout_1={type:"ROW",order:["0"],content:{0:{type:"WIDGET",bbox:{left:"0px",width:"4px",height:"400px"},widgetId:"widget_2",setting:{heightMode:"fit"}}}},e.layouts.layout_2={type:"FIXED"})}(e,n),function(e,t){const r=Object.values(e.widgets).find((e=>"widgets/arcgis/arcgis-map/"===e.uri));r&&(r.useDataSources=[{dataSourceId:t,mainDataSourceId:t}],r.config&&(r.config.initialMapState=null,r.config.isUseCustomMapState=!1))}(e,n))}function Zf(e){let t=e||"/",r="",n="";const o=t.indexOf("#");-1!==o&&(n=t.substr(o),t=t.substr(0,o));const i=t.indexOf("?");return-1!==i&&(r=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}function eh(e){return/(^http:)|(^https:)|(^\/\/)/.test(e)}function th(e){const t={},r=e.data_id&&rh(e.data_id,(e=>e.split("+")))||[],n=e.data_index&&rh(e.data_index,(t=>{const r=t.split("+"),n=[];return r.forEach((t=>{const r=t.split("-");if(1===r.length)n.push(parseInt(r[0]));else if(2===r.length){const e=parseInt(r[0]),t=parseInt(r[1]);for(let r=e;r<=t;r++)n.push(r)}else console.error("Bad URL format:",e.data_index)})),n}))||[],o=e.data_filter&&rh(e.data_filter,(e=>({where:e})))||[],i=e.data_version&&rh(e.data_version,(e=>e))||[];return r.concat(n,o,i).forEach((e=>{t[e.dsId]={}})),n.forEach((e=>{t[e.dsId].selectionType="index",t[e.dsId].selection=e.data})),r.forEach((e=>{t[e.dsId].selectionType="id",t[e.dsId].selection=e.data})),o.forEach((e=>{t[e.dsId].query=e.data})),i.forEach((e=>{t[e.dsId].gdbVersion=e.data})),t}function rh(e,t){return e.split(",").map((e=>{const r=e.split(":");return{dsId:r[0],data:t(r[1])}}))}function nh(e,t){if(!e.views)return{};const r=e.views.split(",").map((e=>sh(e,t))),n={};return Object.keys(t.sections||{}).forEach((e=>{var o;const i=null===(o=t.sections[e].views)||void 0===o?void 0:o.find((e=>r.includes(e)));i&&(n[e]={currentViewId:i})})),n}function oh(e){if(e||(e=window.location),window.jimuConfig.useStructuralUrl)return ih(e.pathname,tg().getState().appConfig);{const t=Ee.parse(e.search);return{appId:t.id,pageId:ah(t.page,tg().getState().appConfig)}}}function ih(e,t){const r=e.substr(window.jimuConfig.rootPath.length),n={pageId:null,appId:null},o=r.split("/").filter((e=>e)).map((e=>decodeURIComponent(e)));return""===r||(1===o.length?r.includes(".")||"page"===o[0]||(n.appId=o[0]):2===o.length?/^page\/page\//.test(r)?n.pageId="page":/^page/.test(r)?n.pageId=o[1]:n.appId=o[0]:o.length>=3?(n.appId=o[0],n.pageId=o[2]):console.log("URL pattern is not correct.",e),n.pageId&&(n.pageId=ah(n.pageId,t))),n}function ah(e,t){if(!t||!e)return e;const r=t.pages;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>ch(r[t].label)===e));if(n)return n;{const r=lh(e,"pages",t);return null!=r?r:e}}}function sh(e,t){if(!t||!e)return e;const r=t.views;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>dh(r[t].label)===e));if(n)return n;{const r=lh(e,"views",t);return null!=r?r:e}}}function uh(e,t){if(!t||!e)return e;const r=t.dialogs;if(!r||r[e])return e;{const n=Object.keys(r).find((t=>ch(r[t].label)===e));if(n)return n;{const r=lh(e,"dialogs",t);return null!=r?r:e}}}function lh(e,t,r){if(!r.historyLabels)return null;const n=r.historyLabels[t];return n?Object.keys(n).find((r=>!!n[r].find((r=>"views"===t?dh(r)===e:ch(r)===e)))):null}function ch(e){return null==e?void 0:e.replace(/\s/g,"-")}function dh(e){return null==e?void 0:e.replace(/\s/g,"-").replace(/,/g,"-")}function ph(e){var t,r,n;let o=window.jimuConfig.isInBuilder?e:ch(null!==(n=null===(r=null===(t=tg().getState().appConfig)||void 0===t?void 0:t.pages[e])||void 0===r?void 0:r.label)&&void 0!==n?n:e);if(window.jimuConfig.useStructuralUrl){o=encodeURIComponent(o);const e=ih(window.location.pathname,tg().getState().appConfig);let t;return t=e.appId?`${window.jimuConfig.rootPath}${e.appId}/page/${o}/`:`${window.jimuConfig.rootPath}page/${o}/`,{path:t,qo:null}}return{path:window.jimuConfig.rootPath,qo:{page:o}}}function fh(e,t,r){e===ju&&(e=tg().getState().appRuntimeInfo.currentPageId);const n=ph(e);let o,i;return o=t&&n.qo?Object.assign({},t,n.qo):t||n.qo,i=o&&!Cu(o,{})?`${n.path}?${Ee.stringify(o)}`:n.path,r&&(i=`${i}#${r}`),i}function hh(e){if(/\/$/.test(e))return e;if(!([".js",".css",".scss",".html"].filter((t=>new RegExp(`${t}$`).test(e))).length>0))return e;const t=e.split("/");return t.pop(),t.join("/")}function gh(){let e;return e=window.jimuConfig.isOutOfExb||window.jimuConfig.rootPath===window.jimuConfig.mountPath?window.jimuConfig.rootPath:window.jimuConfig.rootPath+"../",window.jimuConfig.buildNumber?e+"cdn/"+window.jimuConfig.buildNumber+"/":e}function mh(){return`${window.location.protocol}//${window.location.host}${gh()}`}function vh(e,t){const r=Zf(t);return"/"===r.pathname.charAt(0)?r:""===r.pathname?(r.pathname=e.pathname,r):"."===r.pathname.charAt(0)?(r.pathname=e.pathname+"/"+r.pathname.substr(2),r):(r.pathname=e.pathname+"/"+r.pathname,r)}function yh(e){const t=e.pathname,r=e.search,n=e.hash;let o=t||"/";return r&&"?"!==r&&(o+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:"#"+n),o}function bh(e,t,r=window.location,n=!1){var o;if("string"==typeof e)return eh(e)?e:/^www./.test(e)?`//${e}`:yh(vh(r,e));if(!e.linkType)return yh(e);{const i=e.linkType,a=e;let s,u,l=t;const c=tg().getState().appConfig;switch(i){case Bi.Page:case Bi.Block:case Bi.Screen:t=n?t:null==t?void 0:t.without("dlg");const e=(i===Bi.Block||i===Bi.Screen)&&a.value;return u=i===Bi.Page?a.value:ju,fh(u,t,e);case Bi.Dialog:if((null===(o=c.dialogs[a.value])||void 0===o?void 0:o.mode)===af.Fixed){const e=a.value,t=window.jimuConfig.isInBuilder?e:ch(c.dialogs[e].label);l=l?l.set("dlg",t):{dlg:t}}s=vh(r,"?"+Ee.stringify(l));break;case Bi.View:u=a.value.split(",")[0];const d=a.value.split(",").slice(1);if(null==l?void 0:l.views){let e=l.views.split(",").map((e=>sh(e,c)));d.forEach((t=>{e=e.filter((e=>!Wf(c,t,e))),e.push(t)}));const t=window.jimuConfig.isInBuilder?e:e.map((e=>{var t,r;return dh((null===(r=null===(t=c.views)||void 0===t?void 0:t[e])||void 0===r?void 0:r.label)||e)}));l=l.set("views",t.join(","))}else{const e=window.jimuConfig.isInBuilder?d:d.map((e=>{var t,r;return dh((null===(r=null===(t=c.views)||void 0===t?void 0:t[e])||void 0===r?void 0:r.label)||e)}));l=l?l.set("views",e.join(",")):{views:e.join(",")}}return fh(u,l);case Bi.WebAddress:const p=a.value;if(eh(p))return p;if(/^www./.test(p))return`//${p}`;case Bi.None:case Bi.PageTop:return null;default:console.error("Unknown type:",i)}if(s)return yh(s)}}function Sh(e){if(!e)return{linkType:Bi.None};if(/^http/.test(e))return{linkType:Bi.WebAddress,value:e};const t=Zf(e),r=oh(t).pageId,n=Ee.parse(t.search);return n.views?{linkType:Bi.View,value:`${r},${n.views}`}:n.dlg?{linkType:Bi.Dialog,value:n.dlg}:{linkType:Bi.Page,value:r}}function wh(e,t,r){if(!r&&""!==r)return e;const n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+r+"$2"):e+o+t+"="+r}function Ih(e){let t;return 0===(e=e.toLowerCase()).indexOf("https://")?t="https:":0===e.indexOf("http://")&&(t="http:"),t}function Eh(e,t){return Ih(e)?e.replace(/^https?:\/\//,`${t}//`):`${t}//${e}`}function Oh(e){return e.replace(/^https?:\/\//,"")}function Ch(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0].toLocaleLowerCase()}function Th(e){return(e=(e||"").trim()).split("?")[0]}function Ah(e,t,r){const n=(e=(e||"").trim()).indexOf("#");let o="";return n>-1&&(o=e.substring(n),e=e.substring(0,n)),e.includes("?")?e+=`&${t}=${r}${o}`:e+=`?${t}=${r}${o}`,e}function xh(e){return new URL(e).href}function Dh(e){const{appId:t,isTemplate:r,isArcGisOnlineTemplate:n,isPortalRequest:o,isDraft:i,defaultTemplateName:a}=e,s=tg().getState().portalUrl,u=r?"template":"experience",l=window.jimuConfig.isDevEdition&&o,c=mf(s),d=l&&c;let p,f="";return i&&(f=window.jimuConfig.useStructuralUrl?"?draft=true":"&draft=true"),p=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${u}/${t}/${f}`:`${window.jimuConfig.mountPath}${u}/?id=${t}${f}`,(n||d)&&(p=`${Ph()}/${u}/${t}/`),l&&!d&&(p=`${s}/apps/experiencebuilder/${u}?id=${t}`),a&&(p=`${window.jimuConfig.mountPath}template/?config=${gh()}templates/app/${a}/config.json`),p}function Ph(){let e;const t=tg().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://experiencedev.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://experienceqa.arcgis.com":"https://experience.arcgis.com",e}function Rh(){let e;const t=tg().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://devext.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://qaext.arcgis.com":"https://www.arcgis.com",e}function _h(e){return"string"==typeof e&&"no-color"!==e}function kh(e){if(null!=e)return Object.assign(Object.assign(Object.assign({},_h(e.background)&&{bg:e.background}),_h(e.text)&&{color:e.text}),_h(e.link)&&{link:e.link})}!function(e){e.Unkown="UNKNOWN",e.Widget="WIDGET",e.Section="SECTION",e.ScreenGroup="SCREEN_GROUP"}(Xp||(Xp={})),function(e){e.FixedLayout="FIXED",e.FlowLayout="FLOW",e.GridLayout="GRID",e.ColumnLayout="COLUMN",e.RowLayout="ROW"}(Kp||(Kp={})),function(e){e.Page="pages",e.View="views",e.ScreenPanel="screens_panel",e.ScreenMain="screens_main",e.Dialog="dialogs",e.Header="header",e.Footer="footer"}(Qp||(Qp={})),function(e){e.Page="pages",e.Dialog="dialogs",e.Header="header",e.Footer="footer"}(Zp||(Zp={})),function(e){e.Page="pages",e.View="view",e.Widget="widget",e.Screen="screen",e.Dialog="dialog",e.Header="header",e.Footer="footer"}(ef||(ef={})),function(e){e.Fade="FADE",e.Cover="COVER",e.Push="PUSH"}(tf||(tf={})),function(e){e.Top="TOP",e.Upper="UPPER",e.Lower="LOWER",e.Bottom="BOTTOM"}(rf||(rf={})),function(e){e.Normal="NORMAL",e.Folder="FOLDER",e.Link="LINK"}(nf||(nf={})),function(e){e.FitWindow="FIT_WINDOW",e.AutoScroll="AUTO_SCROLL"}(of||(of={})),function(e){e.Fixed="FIXED",e.Anchored="ANCHORED"}(af||(af={})),function(e){e.Center="CENTER",e.Left="LEFT",e.Right="RIGHT",e.Top="TOP",e.Bottom="BOTTOM"}(sf||(sf={})),function(e){e.NoButton="NO_BUTTON",e.ButtonInline="BUTTON_INLINE",e.ButtonBlock="BUTTON_BLOCK"}(uf||(uf={}));const Nh=e=>e===Ru,Mh=e=>{let t=null;if(!e)return t;const r=e.header,n=e.body,o=e.button,i=e.logo,a=e.fonts,s=kh(r),u=kh(n),l=kh(o);return t={},s&&(t.header=s),u&&(t.body=u),l&&(t.button=l),i&&(t.logo=i),a&&(t.fonts=a),t},jh=e=>{let t=Ce({});if(!e)return t;const r=e.header,n=e.body,o=e.button,i=_h(null==o?void 0:o.bg)&&{primary:o.bg},a=_h(null==o?void 0:o.color)&&{variants:{primary:{default:{color:o.color}}}},s=_h(null==n?void 0:n.link)&&{color:null==n?void 0:n.link,hover:{color:null==n?void 0:n.link}};return i&&(t=t.set("colors",i)),r&&(t=t.set("header",r)),n&&(t=t.set("body",n)),a&&(t=t.set("components",{button:a})),s&&(t=t.set("link",s)),t};function Lh(e,t){var r,n,o;if(!e)return function(){const e={appConfig:null,portalUrl:null,portalSelf:null,widgetsRuntimeInfo:Ce({}),widgetsPreloadProps:Ce({}),widgetsClassStatus:Ce({}),dataSourcesPreloadData:{},appContext:Ce({}),appRuntimeInfo:Ce({}),isNetworkOffLine:null,browserSizeMode:null,appPath:window.location.pathname,appId:null,appInfo:Ce({}),appI18nMessages:Ce({}),queryObject:Ce({}),dataSourcesInfo:Ce({}),jimuMapViewsInfo:Ce({}),mapWidgetsInfo:Ce({}),widgetsState:Ce({}),widgetsMutableStateVersion:Ce({}),token:null,user:null,overlays:Ce([]),userLocaleChanged:!1,hasPrivilege:!0,privilegeError:null,loadAppConfigError:null,portalsNeedToRegisterClinetId:Ce([])};return Ce(e)}();if(t.type.includes("@@"))return e;switch(t.type){case yg.InitStoreExtensionState:return function(e,t){const r=cf.getInstance().getExtensionById(t.extensionId),n=r.getStoreKey().split(".");return e.getIn(n)?e:e.setIn(n,r.getInitLocalState())}(e,t);case yg.AppConfigLoaded:return function(e,t){var r,n;const o=null===(n=null===(r=e.portalSelf)||void 0===r?void 0:r.portalProperties)||void 0===n?void 0:n.sharedTheme,i=Uh(Ce(t.appConfig),o,e.portalUrl)||t.appConfig;let a=e.set("appConfig",i);if(!a.appRuntimeInfo.currentPageId){const e=Object.keys(i.pages).find((e=>i.pages[e].isDefault));a=a.setIn(["appRuntimeInfo","currentPageId"],e)}return!a.appRuntimeInfo.currentDialogId&&a.queryObject.dlg&&(a=a.setIn(["appRuntimeInfo","currentDialogId"],uh(a.queryObject.dlg,i))),a.appConfig.dataSources&&Object.keys(a.appConfig.dataSources).forEach((e=>{a=a.setIn(["dataSourcesInfo",e,"instanceStatus"],Xi.NotCreated)})),a}(e,t);case yg.LoadAppConfigFailed:return e.set("loadAppConfigError",t.errorMessage);case yg.SetPortalInfo:return t.portalInfo.portalUrl&&(e=e.set("portalUrl",t.portalInfo.portalUrl)),t.portalInfo.clientId&&(e=e.set("clientId",t.portalInfo.clientId)),void 0!==t.portalInfo.isWebTier&&(e=e.set("isWebTier",t.portalInfo.isWebTier)),e;case yg.SetPortalSelf:return function(e,t){var r;const n=null===(r=null==t?void 0:t.portalProperties)||void 0===r?void 0:r.sharedTheme,o=Uh(e.appConfig,n,e.portalUrl);let i=e.set("portalSelf",t);return o&&(i=i.set("appConfig",o)),i}(e,t.portalSelf);case yg.AppConfigChanged:return Fh(e,t);case yg.AppPathChanged:return function(e,t){var r;e=e.set("appPath",t.path);let n=ih(location.pathname,e.appConfig).pageId;return!n&&(null===(r=null==e?void 0:e.appConfig)||void 0===r?void 0:r.pages)&&(n=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault))),n&&(e=$h(e=e.setIn(["appRuntimeInfo","currentPageId"],n),n)),e}(e,t);case yg.AppInfoChanged:return e.set("appInfo",e.appInfo.merge(t.appInfo));case yg.AppContextInit:return e.set("appContext",t.appContext);case yg.AppIdChanged:return e.set("appId",t.appId);case yg.I18nMessagesLoaded:return function(e,t){return e.set("appI18nMessages",e.appI18nMessages.merge(t.messages))}(e,t);case yg.QueryObjectChanged:return function(e,t){var r,n,o;const i=function(e){var t,r,n,o,i,a,s;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId)&&((null===(n=null===(r=e.appConfig.dialogs)||void 0===r?void 0:r[e.appRuntimeInfo.currentDialogId])||void 0===n?void 0:n.isSplash)||(null===(i=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[e.appRuntimeInfo.currentDialogId])||void 0===i?void 0:i.mode)===af.Anchored||(null===(s=null===(a=e.appConfig.pages)||void 0===a?void 0:a[e.appRuntimeInfo.currentPageId])||void 0===s?void 0:s.autoOpenDialogId)===e.appRuntimeInfo.currentDialogId)}(e=e.set("queryObject",Ce(t.query)));if(t.query.dlg){const o=uh(t.query.dlg,e.appConfig);if(!i&&o!==(null===(r=e.appRuntimeInfo)||void 0===r?void 0:r.currentDialogId)&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],o)).appConfig){const t=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[o],r=(e.appRuntimeInfo.dialogInfos||Ce({})).setIn([o,"canClose"],!(null==t?void 0:t.interactionType)||!(null==t?void 0:t.confirmBeforeClose)).setIn([o,"checked"],!1).setIn([o,"isClosed"],!1);e=e.setIn(["appRuntimeInfo","dialogInfos"],r)}}else i||(e=e.setIn(["appRuntimeInfo","currentDialogId"],null));if(t.query.views&&e.appConfig){const r=nh(t.query,e.appConfig);Object.keys(r).forEach((t=>{var n,o,i;if((null===(i=null===(o=null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.sectionNavInfos)||void 0===o?void 0:o[t])||void 0===i?void 0:i.currentViewId)!==r[t].currentViewId){const n=qh(e,t,r[t]);e=e.setIn(["appRuntimeInfo","sectionNavInfos",t],n)}}))}if(!window.jimuConfig.useStructuralUrl){let r=ah(t.query.page,e.appConfig);!r&&(null===(o=null==e?void 0:e.appConfig)||void 0===o?void 0:o.pages)&&(r=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault))),r&&r!==e.appRuntimeInfo.currentPageId&&(e=$h(e=e.setIn(["appRuntimeInfo","currentPageId"],r),r))}return e}(e,t);case yg.SetAppInBuilder:return e.set("appContext",e.appContext.merge({isInBuilder:!0}));case yg.WidgetClassLoaded:return function(e,t){const r=e.appConfig.widgets||{},n=Object.keys(r).filter((e=>r[e].uri===t));return e=e.setIn(["widgetsClassStatus",t],!0),n.forEach((t=>{e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0)})),e}(e,t.widgetUri);case yg.WidgetConfigLoaded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config);case yg.WidgetConfigUpgraded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config).setIn(["appConfig","widgets",t.widgetId,"version"],e.appConfig.widgets[t.widgetId].manifest.version);case yg.OpenWidget:return Wh(e,t.widgetId);case yg.OpenWidgets:return function(e,t){return t.forEach((t=>{e=Wh(e,t)})),e}(e,t.widgetIds);case yg.CloseWidget:return Gh(e,t.widgetId);case yg.CloseWidgets:return function(e,t){return t.forEach((t=>{e=Gh(e,t)})),e}(e,t.widgetIds);case yg.ActivateWidget:return function(e,t){var r,n;if(!(null===(n=null===(r=e.appConfig.widgets[t])||void 0===r?void 0:r.manifest)||void 0===n?void 0:n.properties.needActiveState))return e;const o=Object.keys(e.widgetsRuntimeInfo).filter((t=>e.widgetsRuntimeInfo[t].state===$i.Active));return e.appConfig.widgets[t].manifest.properties.deactivateOtherWidgets&&o.forEach((t=>{e=e.setIn(["widgetsRuntimeInfo",t,"state"],$i.Opened)})),e.setIn(["widgetsRuntimeInfo",t,"state"],$i.Active)}(e,t.widgetId);case yg.SetWidgetIsInlineEditingState:return t.isInlineEditing?(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!0)):e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!1);case yg.SetWidgetPreloadProps:return e.setIn(["widgetsPreloadProps",t.widgetId],t.props);case yg.SetDataSourcePreloadData:return e.setIn(["dataSourcesPreloadData",t.dataSourceId],t.data);case yg.LayoutClassLoaded:return e.setIn(["isLayoutClassLoaded",t.layoutName],!0);case yg.DataSourceInstanceStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"instanceStatus"],t.status);case yg.DataSourceStatusChanged:return Bh(e,t.dataSourceId,"status",t.status,t.dataSourceManager);case yg.DataSourceCountStatusChanged:return Bh(e,t.dataSourceId,"countStatus",t.countStatus,t.dataSourceManager);case yg.DataSourceSaveStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"saveStatus"],t.saveStatus);case yg.DataSourceVersionAdded:const i=e.dataSourcesInfo[t.dataSourceId]&&e.dataSourcesInfo[t.dataSourceId].version?e.dataSourcesInfo[t.dataSourceId].version:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"version"],i+1);case yg.DataSourceSourceVersionAdded:const a=null!==(o=null===(n=null===(r=e.dataSourcesInfo)||void 0===r?void 0:r[t.dataSourceId])||void 0===n?void 0:n.sourceVersion)&&void 0!==o?o:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"sourceVersion"],a+1);case yg.ChangeDataSourceGDBVersion:return e.setIn(["dataSourcesInfo",t.dataSourceId,"gdbVersion"],t.gdbVersion);case yg.ClearDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.without(t.dataSourceId));case yg.UpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.set(t.dataSourceId,t.dataSourceInfo));case yg.JimuMapViewAdded:case yg.JimuMapViewUpdated:return e.setIn(["jimuMapViewsInfo",t.jimuMapViewId],t.jimuMapViewInfo);case yg.JimuMapViewRemoved:let s=null;return s=e.jimuMapViewsInfo.without(t.jimuMapViewId),e.setIn(["jimuMapViewsInfo"],s);case yg.RequestAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],t.autoControlWidgetId);case yg.ReleaseAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],null);case yg.MapWidgetInfoAdded:case yg.MapWidgetInfoUpdated:return e.setIn(["mapWidgetsInfo",t.mapWidgetId],t.mapWidgetInfo);case yg.MapWidgetInfoRemoved:let u=null;return u=e.mapWidgetsInfo.without(t.mapWidgetId),e.setIn(["mapWidgetsInfo"],u);case yg.DataSourceSelectedIndexesChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],t.selectedIndexes).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],null);case yg.DataSourceSelectedIdsChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],t.selectedIds).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],null);case yg.SetDataNeedRefresh:return e.setIn(["dataSourcesInfo",t.dataSourceId,"needRefresh"],t.refresh);case yg.UpdateWidgetQuery:return e.setIn(["dataSourcesInfo",t.dataSourceId,"widgetQueries",t.widgetId],t.query);case yg.WidgetStatePropChange:return function(e,t){const r=t.propKey.split(".");return e.setIn(["widgetsState",t.widgetId].concat(r),t.value)}(e,t);case yg.WidgetMutableStatePropChange:return function(e,t){var r,n;let o=null!==(n=null===(r=e.widgetsMutableStateVersion[t.widgetId])||void 0===r?void 0:r[t.propKey])&&void 0!==n?n:0;return e.setIn(["widgetsMutableStateVersion",t.widgetId,t.propKey],++o)}(e,t);case yg.SessionStart:return e.set("token",t.token);case yg.UserSignIn:return e.set("user",Ce(t.user));case yg.UserSignOut:return e.merge({token:null,user:null});case yg.BrowserSizeModeChanged:return e.set("browserSizeMode",t.browserSizeMode);case yg.NetworkStatusChanged:return e.set("isNetworkOffLine",t.isOffLine);case yg.CurrentPageChanged:return $h(e=e.setIn(["appRuntimeInfo","currentPageId"],t.pageId),t.pageId);case yg.CurrentDialogChanged:return(e=e.setIn(["appRuntimeInfo","currentDialogId"],t.dialogId)).setIn(["appRuntimeInfo","currentDialogId"],t.dialogId);case yg.SelectionChanged:return Vh(e,t.selection);case yg.AppModeChanged:return e.setIn(["appRuntimeInfo","appMode"],t.mode).setIn(["appRuntimeInfo","animationPreview"],null);case yg.AppRuntimeInfoInit:return e.set("appRuntimeInfo",t.info);case yg.UpdateStoreState:return t.state;case yg.ThemeVariablesChanged:return e.set("theme",Ce(t.theme));case yg.ActivePagePartChanged:return e.setIn(["appRuntimeInfo","activePagePart"],t.part);case yg.OpenOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e:e.set("overlays",e.overlays.concat([t.id]));case yg.CloseOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e.set("overlays",e.overlays.filter((e=>e!==t.id))):e;case yg.ActiveOverlay:let l=null==e?void 0:e.overlays;return(null==l?void 0:l.includes(t.id))?(null==l?void 0:l.indexOf(t.id))===(null==l?void 0:l.length)-1?e:(l=l.filter((e=>e!==t.id)),l=l.concat([t.id]),e.set("overlays",l)):e;case yg.SetIsBusy:return e.setIn(["appRuntimeInfo","isBusy"],t.isBusy).setIn(["appRuntimeInfo","loadingType"],t.loadingType);case yg.ZoomScaleChanged:return e.setIn(["appRuntimeInfo","zoomScale"],t.zoomScale);case yg.LayoutChanged:return Vh(Fh(e,{appConfig:t.appConfig,type:yg.AppConfigChanged}),t.selection);case yg.ClipboardChanged:return e.setIn(["appRuntimeInfo","clipboard"],t.item);case yg.SectionNavInfoChanged:{const r=qh(e,t.sectionId,t.navInfo),n=function(e,t,r){var n,o;let i=(null===(n=e.queryObject.views)||void 0===n?void 0:n.split(",").map((t=>sh(t,e.appConfig))))||[];return i.includes(r.currentViewId)?e:(i=i.filter((r=>!e.appConfig.sections[t].views.includes(r))),i.push(null===(o=e.appConfig.views[r.currentViewId])||void 0===o?void 0:o.label),e.setIn(["queryObject","views"],i.join(",")))}(e,t.sectionId,r);return n.setIn(["appRuntimeInfo","sectionNavInfos",t.sectionId],r)}case yg.ScreenGroupNavInfoChanged:return e.setIn(["appRuntimeInfo","screenGroupNavInfos",t.screenGroupId],{activeIndex:t.activeIndex,scrollIntoView:t.scrollIntoView});case yg.DialogInfosChanged:return e.setIn(["appRuntimeInfo","dialogInfos"],t.dialogInfos);case yg.SetupAnimationPreview:return e.setIn(["appRuntimeInfo","animationPreview"],t.data);case yg.ClearAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview"));case yg.SetHasNewVersion:return e.set("hasNewVersion",t.hasNew);case yg.UserLocaleChanged:return e.set("userLocaleChanged",t.isChanged);case yg.HasPrivilegeChanged:return e.set("hasPrivilege",!1).set("privilegeError",t.error);case yg.AddToRegisterClientIdList:{let r=null==e?void 0:e.portalsNeedToRegisterClinetId;return(null==r?void 0:r.find((e=>e.portalUrl===t.portalUrl)))?e:(r=r.concat([{portalUrl:t.portalUrl,needToSignIn:t.needToSignIn,serviceUrl:t.serviceUrl}]),e.set("portalsNeedToRegisterClinetId",r))}case yg.RemoveFromRegisterClientIdList:{let r=null==e?void 0:e.portalsNeedToRegisterClinetId;return(null==r?void 0:r.find((e=>e.portalUrl===t.portalUrl)))?(r=r.filter((e=>e.portalUrl!==t.portalUrl)),e.set("portalsNeedToRegisterClinetId",r)):e}case yg.ScreenPanelVisibleChange:return e.setIn(["appRuntimeInfo","screenPanelStates",t.screenId],t.visible);default:return function(e,t){const r=cf.getInstance().getExtensions(Up.ReduxStore);for(let n=0;n<r.length;n++){const o=r[n];if(o.getActions().includes(t.type)){const r=o.getStoreKey().split("."),n=e.getIn(r);return e.setIn(r,o.getReducer()(n,t,e))}}return e}(e,t)}}function Uh(e,t,r){var n,o,i;if(!(e&&(null===(n=e.attributes)||void 0===n?void 0:n.portalUrl)&&t&&r))return;if(e.attributes.portalUrl!==r)return;const a=Mh(t);return Cu(a,null===(i=null===(o=e.sharedThemeVariables)||void 0===o?void 0:o.asMutable)||void 0===i?void 0:i.call(o,{deep:!0}))?void 0:e=e.set("sharedThemeVariables",a)}function Fh(e,t){return Vf(e,t.appConfig)}function $h(e,t){var r;let n;return n=e.appConfig&&e.appConfig.pages?e.appConfig.pages[t]:{},e.setIn(["appRuntimeInfo","activeLayout"],null!==(r=null==n?void 0:n.layout)&&void 0!==r?r:null).setIn(["appRuntimeInfo","selection"],null)}function Bh(e,t,r,n,o){var i;let a=e.setIn(["dataSourcesInfo",t,r],n);const s=null==o?void 0:o.getDataSource(t);return(null===(i=null==s?void 0:s.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget)&&(n!==Xi.Unloaded&&n!==Xi.NotReady||s.getAllDerivedDataSources().forEach((e=>{a=a.setIn(["dataSourcesInfo",e.id,r],n)}))),a}function Wh(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],$i.Opened)}function Gh(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],$i.Closed)}function Vh(e,t){var r,n;if(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),t){const{layoutId:o,layoutItemId:i}=t;if(!(null===(n=null===(r=e.appConfig.layouts[o])||void 0===r?void 0:r.content)||void 0===n?void 0:n[i]))return e=e.setIn(["appRuntimeInfo","selection"],null)}return e=e.setIn(["appRuntimeInfo","selection"],t)}function qh(e,t,r){var n,o,i,a,s,u;let l,c;if((null===(n=r.visibleViews)||void 0===n?void 0:n.length)>0?(c=r.visibleViews,l=r.visibleViews.length):(c=null!==(i=null===(o=e.appConfig.sections[t])||void 0===o?void 0:o.views)&&void 0!==i?i:[],l=null!==(a=null==c?void 0:c.length)&&void 0!==a?a:0),r.useProgress&&(!r.currentViewId||!r.previousViewId)){const{currentIndex:e,previousIndex:t}=function(e,t){let r,n;const o=zh(e,0,1)*(t-1),i=Math.floor(o);return n=i,n=function(e){return Math.abs(e-Math.round(e))<1e-7}(o)?Math.round(o)-1:i,r=n+1,r=zh(r,0,t-1),n=zh(n,0,t-1),{previousIndex:n,progress:o,currentIndex:r}}(r.progress,l);r.currentViewId=c[e],r.previousViewId=c[t]}if(null==r.progress){const e=c.indexOf(r.currentViewId);r.progress=c.length>1?e/(c.length-1):1}if(null==r.previousViewId){const n=null===(u=null===(s=e.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===u?void 0:u[t];if(null==n?void 0:n.currentViewId)r.previousViewId=n.currentViewId;else{const e=c.indexOf(r.currentViewId);r.previousViewId=e>0?c[e-1]:c[l-1]}}return r}function zh(e,t,r){return Math.max(t,Math.min(e,r))}function Hh(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Yh="function"==typeof Symbol&&Symbol.observable||"@@observable",Jh=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xh={INIT:"@@redux/INIT"+Jh(),REPLACE:"@@redux/REPLACE"+Jh(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jh()}};function Kh(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Qh(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Hh(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Hh(1));return r(Qh)(e,t)}if("function"!=typeof e)throw new Error(Hh(2));var o=e,i=t,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){if(u)throw new Error(Hh(3));return i}function d(e){if("function"!=typeof e)throw new Error(Hh(4));if(u)throw new Error(Hh(5));var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error(Hh(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),a=null}}}function p(e){if(!Kh(e))throw new Error(Hh(7));if(void 0===e.type)throw new Error(Hh(8));if(u)throw new Error(Hh(9));try{u=!0,i=o(i,e)}finally{u=!1}for(var t=a=s,r=0;r<t.length;r++)(0,t[r])();return e}function f(e){if("function"!=typeof e)throw new Error(Hh(10));o=e,p({type:Xh.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Hh(11));function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}})[Yh]=function(){return this},e}return p({type:Xh.INIT}),(n={dispatch:p,subscribe:d,getState:c,replaceReducer:f})[Yh]=h,n}let Zh;function eg(e){return Zh||(Zh=Qh(Lh,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),window._appStore=Zh,Zh)}function tg(){return Zh}function rg(e,t){let r;function n(){let n=Zh.getState();t?(n=n.getIn(t),n!==r&&(e(r,n),r=n)):n!==r&&(e(r,n),r=n)}const o=Zh.subscribe(n);return n(),o}const ng=function(e){return e},og=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var ig=Math.max;var ag=function(){try{var e=Na(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const sg=ag;var ug=sg?function(e,t){return sg(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:ng;const lg=ug;var cg=Date.now;const dg=function(e){var t=0,r=0;return function(){var n=cg(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(lg),pg=function(e,t){return dg(function(e,t,r){return t=ig(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=ig(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),og(e,this,s)}}(e,t,ng),e+"")};var fg=pg((function(e,t){return function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}(e,1,t)}));const hg=fg;var gg=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class mg{constructor(){this.dataSources={},this.dataSourcesCreatePromise={},this.dataSourceFactories={},window.jimuConfig.isBuilder?console.error("DataSourceManager should not be created in builder"):rg(this.onStoreChange.bind(this),["appConfig","dataSources"])}static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._dataSourceManager:(mg.instance||(mg.instance=new mg,window._dataSourceManager=mg.instance),mg.instance)}getDataSource(e){return this.dataSources[e]}getDataViewDataSource(e,t){return this.dataSources[this.getDataViewDataSourceId(e,t)]}getDataSources(){return this.dataSources}getDataSourcesAsArray(){return Object.keys(this.dataSources).map((e=>this.dataSources[e]))}setDataSource(e,t){this.dataSources[e]=t}destroyAllDataSources(){Object.keys(this.dataSources).forEach((e=>this.destroyDataSource(e))),this.dataSourcesCreatePromise={}}destroyDataSource(e){this.dataSources[e]?(tg().dispatch(zg(e)),this.dataSources[e].getDataViews().forEach((e=>this.destroyDataSource(e.id))),this.dataSources[e].getLocalDataSources().forEach((e=>this.destroyDataSource(e.id))),this.getDataSourcesAsArray().forEach((t=>{t.getOriginDataSources().find((t=>t===this.dataSources[e]))&&this.destroyDataSource(t.id)})),this.dataSources[e].destroy(),delete this.dataSources[e],delete this.dataSourcesCreatePromise[e]):this.dataSourcesCreatePromise[e]&&(tg().dispatch(zg(e)),delete this.dataSourcesCreatePromise[e])}getConfiguredDataSources(){return Object.keys(this.dataSources).filter((e=>!this.dataSources[e].getDataSourceJson().isOutputFromWidget)).map((e=>this.getDataSource(e)))}getWidgetGeneratedDataSources(){const e={},t=this.getAppConfig();return Object.keys(t.widgets).filter((e=>t.widgets[e].outputDataSources)).forEach((r=>{e[r]=t.widgets[r].outputDataSources.asMutable().map((e=>this.getDataSource(e)))})),e}createAllDataSources(){return gg(this,void 0,void 0,(function*(){const e=this.getAppConfig()&&this.getAppConfig().dataSources,t=[];return e&&Object.keys(e).forEach((e=>{this.dataSources[e]||t.push(this.createDataSource(e).then((e=>gg(this,void 0,void 0,(function*(){return yield this.createDataViews(e).then((()=>e))})))).catch((t=>{console.error("Create data source failed",e,t),Promise.resolve(null)})))})),Promise.all(t)}))}createDataViews(e){return gg(this,void 0,void 0,(function*(){return yield Promise.all(Object.keys(e.getDataSourceJson().dataViews||{}).map((t=>gg(this,void 0,void 0,(function*(){return yield this.createDataSource(e.id,t)}))))||[])}))}createDataSource(e,t,r){return gg(this,void 0,void 0,(function*(){let n,o;if("string"==typeof e){const t=this.getAppConfig().dataSources[e];if(!t)throw Error("Can not create data source."+e);o=e,n={dataSourceJson:t,dataSourceManager:this,id:o}}else if(e.dataSourceJson||e.belongToDataSource)n=e,o=n.dataSourceJson?n.dataSourceJson.id:n.belongToDataSource.getMainDataSource().id,n.dataViewId&&(t=n.dataViewId,delete n.dataViewId),n.localId&&(r=n.localId,delete n.localId),n.dataSourceManager=this,n.id=o;else{const t=e;o=t.id,n={dataSourceJson:t,dataSourceManager:this,id:o}}const i=e=>gg(this,void 0,void 0,(function*(){return this.dataSourcesCreatePromise[e]?yield this.dataSourcesCreatePromise[e]:yield this.createDataSource(e)})),a=(e,t)=>gg(this,void 0,void 0,(function*(){const r=this.getDataViewDataSourceId(e,t);return this.getDataSource(r)?yield Promise.resolve(this.getDataSource(r)):yield i(o).then((e=>this.createDataView(e,t)))}));return t&&r?a(o,t).then((e=>this.createLocalDataSource(e,r))):t?a(o,t):r?i(o).then((e=>this.createLocalDataSource(e,r))):this.createOriginDataSources(n.dataSourceJson).then((()=>{var t;return this.dataSourcesCreatePromise[o]?this.dataSourcesCreatePromise[o]:((null===(t=tg().getState().dataSourcesInfo[o])||void 0===t?void 0:t.instanceStatus)!==Xi.NotCreated&&tg().dispatch(Bg(o,Xi.NotCreated)),this.dataSourcesCreatePromise[o]=this.createDataSourceObj(n).then((e=>gg(this,void 0,void 0,(function*(){const t=tg().getState().dataSourcesPreloadData[o];return t&&e.setJsonData(t.asMutable()),yield e.ready().then((()=>gg(this,void 0,void 0,(function*(){return yield e.fetchSchema()})))).then((t=>gg(this,void 0,void 0,(function*(){var r,n;this.initSchema(e,t),this.afterCreate(e);let o=[];if(!e.isDataSourceSet){const t=this.createDataViewObj(e,_u);if(o=o.concat(t.ready()),null===(n=null===(r=e.getDataSourceJson())||void 0===r?void 0:r.dataViews)||void 0===n?void 0:n[ku]){const t=this.createDataViewObj(e,ku);o=o.concat(t.ready())}}return e.getDataSourceJson().isOutputFromWidget&&this.createDataViewObj(e,Nu),yield Promise.allSettled(o).then((()=>e))}))))})))).catch((t=>gg(this,void 0,void 0,(function*(){return console.error("Create datasource error.",e,t),tg().dispatch(Bg(o,Xi.CreateError)),yield Promise.reject(new na(o,t))})))),this.dataSourcesCreatePromise[n.dataSourceJson.id])})).catch((t=>gg(this,void 0,void 0,(function*(){return console.error("Create datasource error.",e,t),tg().dispatch(Bg(o,Xi.CreateError)),yield Promise.reject(new na(o,t))}))))}))}createDataView(e,t){const r=this.getDataViewDataSourceId(e.id,t);return this.getDataSource(r)?this.getDataSource(r):this.createDataViewObj(e,t)}createLocalDataSource(e,t){const r=this.getLocalDataSourceId(e.id,t);return this.getDataSource(r)?this.getDataSource(r):this.createLocalDataSourceObj(e,t)}afterCreate(e){this.dataSources[e.id]=e,tg().dispatch(Bg(e.id,Xi.Created));const t=e.getMainDataSource().id;if(e.id!==t&&e.dataViewId!==_u&&e.dataViewId!==ku){const t=e.getMainDataSource().getSelectedRecordIds();t&&t.length>0&&e.setSelectedRecordIdsToInfo(t,e.getMainDataSource())}}getDataViewDataSourceId(e,t){return`${e}-${t}`}getLocalDataSourceId(e,t){return`${e}-${t}`}createDataSourceByUseDataSource(e,t){return gg(this,void 0,void 0,(function*(){const r=this.getAppConfig().dataSources;return r[e.mainDataSourceId]?e.dataViewId?e.dataViewId===_u||e.dataViewId===Nu||r[e.mainDataSourceId].dataViews[e.dataViewId]?yield this.createDataSource(e.mainDataSourceId,e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),yield Promise.reject(new na(e.dataSourceId,"Can not find data source."))):yield this.createDataSource(e.mainDataSourceId,null,t):r[e.rootDataSourceId]?yield this.createDataSource(e.rootDataSourceId).then((r=>{const n=this.getDataSource(e.mainDataSourceId);return n?e.dataViewId?e.dataViewId===_u||n.getDataSourceJson().dataViews[e.dataViewId]?this.createDataSource(n.getDataSourceJson(),e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new na(e.dataSourceId,"Can not find data source."))):t?this.createDataSource(n.getDataSourceJson(),null,t):n:Promise.reject(new na(e.dataSourceId,"Can not find data source."))})):(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new na(e.dataSourceId,"Can not find data source.")))}))}createOriginDataSources(e){return gg(this,void 0,void 0,(function*(){return e.isOutputFromWidget&&e.originDataSources&&e.originDataSources.length>0?yield Promise.all(e.originDataSources.asMutable().map((e=>gg(this,void 0,void 0,(function*(){return yield this.createDataSourceByUseDataSource(e)}))))).then((()=>gg(this,void 0,void 0,(function*(){return yield Promise.resolve()})))):yield Promise.resolve()}))}initSchema(e,t){e.setFetchedSchema(t),tg().getState().appConfig.dataSources[e.id]&&(null==t?void 0:t.label)&&t.label!==e.getDataSourceJson().sourceLabel&&tg().dispatch(wg(tg().getState().appConfig.setIn(["dataSources",e.id,"sourceLabel"],t.label)));const r=e.getDataSourceJson().schema;if(e.getDataSourceJson().isOutputFromWidget)if(e.getDataSourceJson().schema)e.setSchema(e.getDataSourceJson().schema);else if(e.getDataSourceJson().originDataSources&&e.getDataSourceJson().originDataSources.length>0)if(1===e.getDataSourceJson().originDataSources.length){const t=this.getDataSource(e.getDataSourceJson().originDataSources[0].dataSourceId);e.setSchema(t&&t.getSchema())}else console.error("Datasource created from more than one data source must save the schema in app config.");else console.error("Datasource without origin data source must save the schema in app config.");else{const n=this.mergeSchema(e,r,t);e.setSchema(n)}}mergeSchema(e,t,r){if(e.isDataSourceSet){if(!t)return r;let n=t;return Object.keys(r.childSchemas).forEach((o=>{if(e.getReversedConfigSchema().childSchemas[o])e.getReversedConfigSchema().childSchemas[o].forEach((t=>{n=n.setIn(["childSchemas",t.jimuChildId],e.getChildDataSource(t.jimuChildId).getSchema())}));else{if(t.childSchemas[o])return void console.warn("Layer existed, please re-map the data source.",e.id,o);n=n.setIn(["childSchemas",o],r.childSchemas[o])}})),Object.keys(t.childSchemas).forEach((e=>{const n=t.childSchemas[e].childId;r.childSchemas[n]||console.error("Used data is not found.",n)})),n}return this.mergeOneSchema(e,t,r)}mergeOneSchema(e,t,r){if(!t)return r;let n=t;return(null==r?void 0:r.fields)&&Object.keys(r.fields).forEach((o=>{if(e.getReversedConfigSchema().fields[o])e.getReversedConfigSchema().fields[o].forEach((e=>{n.fields[e.jimuName].alias||(n=n.setIn(["fields",e.jimuName,"alias"],r.fields[o].alias))}));else{if(t.fields[o])return void console.warn("Field name existed, please re-map the data source.",e.id,o);const i=r.fields[o];n=n.setIn(["fields",o],i)}})),(null==t?void 0:t.fields)&&Object.keys(t.fields).forEach((e=>{var n;const o=t.fields[e].name;(null===(n=null==r?void 0:r.fields)||void 0===n?void 0:n[o])||console.error("Used field is not found.",o)})),n}getDataSourceFactory(e){return gg(this,void 0,void 0,(function*(){let t=this.getDataSourceFactorySync(e);if(t)return yield Promise.resolve(t);const r=this.getDataSourceFactoryUri(e);return yield Bp(r,["default"]).then((n=>{try{t=new n.default,this.dataSourceFactories[r]=t}catch(t){throw console.error("Load data source factory error.",e,t),t}return t}))}))}getDataSourceFactoryUri(e){const t=cf.getInstance().getExtensions(Up.DataSourceFactoryUri).filter((t=>t.getFactoryUri(e)))[0];if(!t)throw console.error("Unknown data source type:"+e),Error("Unknown data source type:"+e);return t.getFactoryUri(e)}getDataSourceFactorySync(e){const t=this.getDataSourceFactoryUri(e),r=this.dataSourceFactories[t];if(r)return r}createDataSourceObj(e){return gg(this,void 0,void 0,(function*(){return yield this.getDataSourceFactory(e.dataSourceJson.type).then((t=>gg(this,void 0,void 0,(function*(){let r;try{r=t.createDataSource(e)}catch(t){return console.error("Create data source error.",e.dataSourceJson,t),yield Promise.reject(t)}return yield Promise.resolve(r)}))))}))}createDataViewObj(e,t){const r=this.getDataSourceFactoryUri(e.type),n=this.dataSourceFactories[r];if(!n)throw Error("Data source is not created");let o=null;try{o=n.createDataSource({id:this.getDataViewDataSourceId(e.id,t),dataViewId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(r){console.error("Create data view error.",e.id,t,r),tg().dispatch(Bg(this.getDataViewDataSourceId(e.id,t),Xi.CreateError))}return o}createLocalDataSourceObj(e,t){const r=this.getDataSourceFactoryUri(e.type),n=this.dataSourceFactories[r];if(!n)throw Error("Data source is not created");let o=null;try{o=n.createDataSource({id:this.getLocalDataSourceId(e.id,t),dataViewId:e.isDataView?e.dataViewId:null,localId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(o)}catch(r){console.error("Create local data source error.",e.id,t,r),tg().dispatch(Bg(this.getLocalDataSourceId(e.id,t),Xi.CreateError))}return o}getAppConfig(){return tg().getState().appConfig}onStoreChange(e,t){e&&t&&Object.keys(e).forEach((r=>{if(t[r]){if(t[r]&&e[r]){const e=t[r],n=this.getDataSource(r);n&&(n.type!==e.type?hg((()=>{this.destroyDataSource(r),this.createDataSource(r).then((e=>{this.createDataViews(e)}))})):this.updateDataSourceByDataSourceJson(n,e))}}else hg((()=>{this.destroyDataSource(r)}))})),window.jimuConfig.isInBuilder&&e&&t&&Object.keys(t).forEach((t=>{var r;const n=tg().getState();e[t]||(null===(r=n.dataSourcesInfo[t])||void 0===r?void 0:r.instanceStatus)||this.createDataSource(t).then((e=>{this.createDataViews(e)}))}))}updateDataSourceByDataSourceJson(e,t){var r,n;if(e.getDataSourceJson()!==t){if(e.getDataSourceJson().query!==(null==t?void 0:t.query)&&hg((()=>{e.clearRecords(),e.clearSelection()})),e.getDataSourceJson().dataViews!==(null==t?void 0:t.dataViews)){const r=e.getDataSourceJson().dataViews,n=null==t?void 0:t.dataViews;r&&n&&Object.keys(r).forEach((o=>{if(n[o]){if(n[o]&&r[o]){const r=this.getDataViewDataSourceId(e.id,o),n=this.getDataSource(r);n&&(Cu(n.getDataSourceJson().dataViews[o],t.dataViews[o])||hg((()=>{n.clearRecords(),n.clearSelection()})))}}else hg((()=>{this.destroyDataSource(this.getDataViewDataSourceId(e.id,o))}))}))}let o;e.getDataSourceJson().childDataSourceJsons!==(null==t?void 0:t.childDataSourceJsons)&&e.getChildDataSources().forEach((e=>{var r;this.updateDataSourceByDataSourceJson(e,null===(r=null==t?void 0:t.childDataSourceJsons)||void 0===r?void 0:r[e.jimuChildId])})),o=(null===(r=e.getDataSourceJson().originDataSources)||void 0===r?void 0:r.length)===(null===(n=null==t?void 0:t.originDataSources)||void 0===n?void 0:n.length)&&(!e.getDataSourceJson().originDataSources||e.getDataSourceJson().originDataSources.every((e=>(null==t?void 0:t.originDataSources)&&(null==t?void 0:t.originDataSources.some((t=>t.dataSourceId===e.dataSourceId))))));const i=t&&(e.getDataSourceJson().schema!==t.schema||!o||e.getDataSourceJson().itemId!==t.itemId||e.getDataSourceJson().portalUrl!==t.portalUrl||e.getDataSourceJson().url!==t.url);e.setDataSourceJson(t),i&&(e.getDataSourceJson().isDataInDataSourceInstance?(e.clearSourceRecordsNotAddVersion(),this.initSchema(e,null)):(e.clearRecordsNotAddVersion(),e.fetchSchema().then((t=>{this.initSchema(e,t),e.addVersion()})))),hg((()=>{e.addVersion()}))}}}const vg=mg;var yg;function bg(e){return{type:yg.AppConfigLoaded,appConfig:e}}function Sg(e){return{type:yg.LoadAppConfigFailed,errorMessage:e}}function wg(e){return{type:yg.AppConfigChanged,appConfig:e}}function Ig(e){return{type:yg.AppPathChanged,path:e}}function Eg(e){return{type:yg.AppInfoChanged,appInfo:e}}function Og(e){return{type:yg.AppIdChanged,appId:e}}function Cg(e){return{type:yg.WidgetClassLoaded,widgetUri:e}}function Tg(e,t){return{type:yg.WidgetConfigUpgraded,widgetId:e,config:t}}function Ag(e,t){return{type:yg.WidgetConfigLoaded,widgetId:e,config:t}}function xg(e){return{type:yg.OpenWidget,widgetId:e}}function Dg(e){return{type:yg.OpenWidgets,widgetIds:e}}function Pg(e){return{type:yg.CloseWidget,widgetId:e}}function Rg(e){return{type:yg.CloseWidgets,widgetIds:e}}function _g(e){return{type:yg.ActivateWidget,widgetId:e}}function kg(e){return{type:yg.AppContextInit,appContext:e}}function Ng(e,t){return{type:yg.I18nMessagesLoaded,key:e,messages:t}}function Mg(e){return{type:yg.QueryObjectChanged,query:e}}function jg(){return{type:yg.SetAppInBuilder}}function Lg(e){return{type:yg.AppModeChanged,mode:e}}function Ug(e){return{type:yg.LayoutClassLoaded,layoutName:e}}function Fg(e,t){var r;const n=null===(r=vg.getInstance())||void 0===r?void 0:r.getDataSource(e);return n&&t===Xi.NotReady&&(n.clearSourceRecordsNotAddVersion(),n.getAllDerivedDataSources().forEach((e=>{e.clearSourceRecordsNotAddVersion()}))),n&&t===Xi.Unloaded&&(n.clearRecordsNotAddVersion(),n.getAllDerivedDataSources().forEach((e=>{e.clearRecordsNotAddVersion()}))),{type:yg.DataSourceStatusChanged,dataSourceId:e,status:t,dataSourceManager:vg.getInstance()}}function $g(e,t){return{type:yg.DataSourceCountStatusChanged,dataSourceId:e,countStatus:t,dataSourceManager:vg.getInstance()}}function Bg(e,t){return{type:yg.DataSourceInstanceStatusChanged,dataSourceId:e,status:t}}function Wg(e,t){return{type:yg.DataSourceSaveStatusChanged,dataSourceId:e,saveStatus:t}}function Gg(e){return{type:yg.DataSourceVersionAdded,dataSourceId:e}}function Vg(e){return{type:yg.DataSourceSourceVersionAdded,dataSourceId:e}}function qg(e,t){return{type:yg.ChangeDataSourceGDBVersion,dataSourceId:e,gdbVersion:t}}function zg(e){return{type:yg.ClearDataSourceInfo,dataSourceId:e}}function Hg(e,t){return{type:yg.UpdateDataSourceInfo,dataSourceId:e,dataSourceInfo:t}}function Yg(e,t){return{type:yg.SetDataNeedRefresh,dataSourceId:e,refresh:t}}function Jg(e,t,r){return{type:yg.UpdateWidgetQuery,dataSourceId:e,widgetId:t,query:r}}function Xg(e,t){return{type:yg.JimuMapViewAdded,jimuMapViewId:e,jimuMapViewInfo:t}}function Kg(e,t){return{type:yg.JimuMapViewUpdated,jimuMapViewId:e,jimuMapViewInfo:t}}function Qg(e){return{type:yg.JimuMapViewRemoved,jimuMapViewId:e}}function Zg(e,t){return{type:yg.RequestAutoControlMapWidget,mapWidgetId:e,autoControlWidgetId:t}}function em(e){return{type:yg.ReleaseAutoControlMapWidget,mapWidgetId:e}}function tm(e,t){return{type:yg.MapWidgetInfoAdded,mapWidgetId:e,mapWidgetInfo:t}}function rm(e,t){return{type:yg.MapWidgetInfoUpdated,mapWidgetId:e,mapWidgetInfo:t}}function nm(e){return{type:yg.MapWidgetInfoRemoved,mapWidgetId:e}}function om(e){return{type:yg.InitStoreExtensionState,extensionId:e}}function im(e,t,r){return{type:yg.WidgetStatePropChange,widgetId:e,propKey:t,value:r}}function am(e,t){return{type:yg.WidgetMutableStatePropChange,widgetId:e,propKey:t}}function sm(e){return{type:yg.SetPortalInfo,portalInfo:e}}function um(e,t){return{type:yg.DataSourceSelectedIndexesChanged,dataSourceId:e,selectedIndexes:t}}function lm(e,t){return{type:yg.DataSourceSelectedIdsChanged,dataSourceId:e,selectedIds:t}}function cm(e){return{type:yg.SessionStart,token:e}}function dm(e){return{type:yg.UserSignIn,user:e}}function pm(){return{type:yg.UserSignOut}}function fm(e){const t=window.document&&window.document.documentElement;return t&&(t.classList.remove(`size-mode-${Mi.Large}`),t.classList.remove(`size-mode-${Mi.Medium}`),t.classList.remove(`size-mode-${Mi.Small}`),t.classList.add(`size-mode-${e}`)),{type:yg.BrowserSizeModeChanged,browserSizeMode:e}}function hm(e,t){return{type:yg.SetWidgetIsInlineEditingState,widgetId:e,isInlineEditing:t}}function gm(e,t){return{type:yg.SetWidgetPreloadProps,widgetId:e,props:t}}function mm(e,t){return{type:yg.SetDataSourcePreloadData,dataSourceId:e,data:t}}function vm(e){return{type:yg.NetworkStatusChanged,isOffLine:e}}function ym(e){return{type:yg.CurrentPageChanged,pageId:e}}function bm(e){return{type:yg.CurrentDialogChanged,dialogId:e}}function Sm(e){return{type:yg.DialogInfosChanged,dialogInfos:e}}function wm(e){return{type:yg.SelectionChanged,selection:e}}function Im(e){return{type:yg.ClipboardChanged,item:e}}function Em(e){return{type:yg.UpdateStoreState,state:e}}function Om(e){return{type:yg.AppRuntimeInfoInit,info:e}}function Cm(e){return{type:yg.ThemeVariablesChanged,theme:e}}function Tm(e){return{type:yg.SetPortalSelf,portalSelf:e}}function Am(e){return{part:e,type:yg.ActivePagePartChanged}}function xm(e){return{type:yg.OpenOverlay,id:e}}function Dm(e){return{type:yg.CloseOverlay,id:e}}function Pm(e){return{type:yg.ActiveOverlay,id:e}}function Rm(e){return{type:yg.ZoomScaleChanged,zoomScale:e}}function _m(e,t){return{type:yg.SetIsBusy,isBusy:e,loadingType:t}}function km(e,t){return{type:yg.LayoutChanged,appConfig:e,selection:t}}function Nm(e,t){return{type:yg.SectionNavInfoChanged,sectionId:e,navInfo:t}}function Mm(e,t,r=!0){return{type:yg.ScreenGroupNavInfoChanged,screenGroupId:e,activeIndex:t,scrollIntoView:r}}function jm(e,t){return{type:yg.ScreenPanelVisibleChange,screenId:e,visible:t}}function Lm(e){return{type:yg.SetupAnimationPreview,data:e}}function Um(){return{type:yg.ClearAnimationPreview}}function Fm(e){return{type:yg.SetHasNewVersion,hasNew:e}}function $m(e){return{type:yg.UserLocaleChanged,isChanged:e}}function Bm(e){return{type:yg.HasPrivilegeChanged,error:e}}function Wm(e,t,r){return{type:yg.AddToRegisterClientIdList,portalUrl:e,needToSignIn:t,serviceUrl:r}}function Gm(e){return{type:yg.RemoveFromRegisterClientIdList,portalUrl:e}}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}!function(e){e.InitStoreExtensionState="INIT_STORE_EXTENSION_STATE",e.AppConfigLoaded="APPCONFIG_LOADED",e.AppConfigChanged="APPCONFIG_CHANGED",e.LoadAppConfigFailed="LOAD_APPCONFIG_FAILED",e.ThemeVariablesChanged="THEME_VARIABLES_CHANGED",e.SetPortalInfo="SET_PORTAL_INFO",e.SetPortalSelf="SET_PORTAL_SELF",e.WidgetClassLoaded="WIDGET_CLASS_LOADED",e.WidgetConfigLoaded="WIDGET_CONFIG_LOADED",e.WidgetConfigUpgraded="WIDGET_CONFIG_UPGRADED",e.OpenWidget="OPEN_WIDGET",e.OpenWidgets="OPEN_WIDGETS",e.CloseWidget="CLOSE_WIDGET",e.CloseWidgets="CLOSE_WIDGETS",e.SetWidgetIsInlineEditingState="SET_WIDGET_IS_INLINE_EDITING_STATE",e.SetWidgetPreloadProps="SET_WIDGET_PRELOAD_PROPS",e.ActivateWidget="ACTIVATE_WIDGET",e.SetAppInBuilder="SET_APP_IN_BUILDER",e.LayoutClassLoaded="LAYOUT_CLASS_LOADED",e.AppContextInit="APP_CONTEXT_INIT",e.I18nMessagesLoaded="I18N_MESSAGES_LOADED",e.QueryObjectChanged="QUERY_OBJECT_CHANGED",e.AppModeChanged="APP_MODE_CHANGED",e.SelectionChanged="SELECTION_CHANGED",e.AppRuntimeInfoInit="APP_RUNTIME_INFO_INIT",e.CurrentPageChanged="CURRENT_PAGE_CHANGED",e.CurrentDialogChanged="CURRENT_DIALOG_CHANGED",e.DialogInfosChanged="DIALOG_INFOS_CHANGED",e.ClipboardChanged="CLIPBOARD_CHANGED",e.AppPathChanged="APP_PATH_CHANGED",e.AppIdChanged="APP_ID_CHANGED",e.AppInfoChanged="APP_INFO_CHANGED",e.NetworkStatusChanged="NETWORK_STATUS_CHANGED",e.DataSourceStatusChanged="DATA_SOURCE_STATUS_CHANGED",e.DataSourceCountStatusChanged="DATA_SOURCE_COUNT_STATUS_CHANGED",e.DataSourceInstanceStatusChanged="DATA_SOURCE_INSTANCE_STATUS_CHANGED",e.DataSourceSaveStatusChanged="DATA_SOURCE_SAVE_STATUS_CHANGED",e.DataSourceVersionAdded="DATA_SOURCE_VERSION_ADDED",e.DataSourceSourceVersionAdded="DATA_SOURCE_SOURCE_VERSION_ADDED",e.DataSourceSelectedIndexesChanged="DATA_SOURCE_SELECTED_INDEXES_CHANGED",e.DataSourceSelectedIdsChanged="DATA_SOURCE_SELECTED_IDS_CHANGED",e.SetDataSourcePreloadData="SET_DATA_SOURCE_PRELOAD_DATA",e.SetDataNeedRefresh="SET_DATA_NEED_REFRESH",e.UpdateWidgetQuery="UPDATE_WIDGET_QUERY",e.ChangeDataSourceGDBVersion="CHANGE_DATA_SOURCE_GDB_VERSION",e.ClearDataSourceInfo="CLEARE_DATA_SOURCE_INFO",e.UpdateDataSourceInfo="UPDATE_DATA_SOURCE_INFO",e.JimuMapViewAdded="JIMU_MAPVIEW_ADDED",e.JimuMapViewRemoved="JIMU_MAPVIEW_REMOVED",e.JimuMapViewUpdated="JIMU_MAPVIEW_UPDATED",e.MapWidgetInfoAdded="MAP_WIDGET_INFO_ADDED",e.MapWidgetInfoRemoved="MAP_WIDGET_INFO_REMOVED",e.MapWidgetInfoUpdated="MAP_WIDGET_INFO_UPDATED",e.RequestAutoControlMapWidget="REQUEST_AUTO_CONTROL_MAP_WIDGET",e.ReleaseAutoControlMapWidget="RELEASE_AUTO_CONTROL_MAP_WIDGET",e.WidgetStatePropChange="WIDGET_STATE_PROP_CHANGE",e.WidgetMutableStatePropChange="WIDGET_MUTABLE_STATE_PROP_CHANGE",e.SessionStart="SESSION_START",e.UserSignIn="USER_SIGN_IN",e.UserSignOut="USER_SIGN_OUT",e.BrowserSizeModeChanged="BROWSER_SIZE_MODE_CHANGED",e.UpdateStoreState="UPDATE_STORE_STATE",e.ActivePagePartChanged="ACTIVE_PAGE_PART_CHANGED",e.OpenOverlay="OPEN_OVERLAY",e.CloseOverlay="CLOSE_OVERLAY",e.ActiveOverlay="ACTIVE_OVERLAY",e.SetIsBusy="SET_IS_BUSY",e.ZoomScaleChanged="ZOOM_SCALE_CHANGED",e.LayoutChanged="LAYOUT_CHANGED",e.SectionNavInfoChanged="SECTION_NAV_INFO_CHANGED",e.SetupAnimationPreview="SETUP_ANIMATION_PREVIEW",e.ClearAnimationPreview="CLEAR_ANIMATION_PREVIEW",e.SetHasNewVersion="SET_HAS_NEW_VERSION",e.ScreenGroupNavInfoChanged="SCREEN_GROUP_NAV_INFO_CHANGE",e.UserLocaleChanged="USER_LOCALE_CHANGED",e.HasPrivilegeChanged="HAS_PRIVILEGE_CHANGED",e.AddToRegisterClientIdList="ADD_TO_REGISTER_CLIENT_ID_LIST",e.RemoveFromRegisterClientIdList="REMOVE_FROM_REGISTER_CLIENT_ID_LIST",e.ScreenPanelVisibleChange="SCREEN_PANEL_VISIBLE_CHANGE"}(yg||(yg={}));var qm=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=Vm({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",Vm({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Vm({},this.attributes,t))},withConverter:function(t){return e(Vm({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const zm=qm;var Hm,Ym=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};!function(e){e.ArcGISJSSync="ARCGIS_JS",e.OtherWindowSync="OTHER_WINDOW",e.AddOrUpdate="ADD_OR_UPDATE",e.Remove="REMOVE"}(Hm||(Hm={}));class Jm{constructor(){this.isMainSession=e=>{var t,r;if(!e)return!1;if(!this.isSessionExpired(e))return!1;const n=this.getSessionKeyFromUrl(e.portal);return!(!(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl)||n!==this.getSessionKeyFromUrl(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl))},this.processInvalidSignInSession=()=>{this.removeAuthInfo(),this.clearSessions()},this.gotoSignInPage=()=>{let e;if(window.jimuConfig.isDevEdition)e=`${location.protocol}//${location.host}/page/set-portalurl`;else{if(window.jimuConfig.isInPortal)return void this.signIn(`${window.location.pathname}${window.location.search}`,!1);e=`${location.protocol}//${location.host}/page/landing`}0!==window.location.href.indexOf(e)&&(window.location.href=e)},this.handleAuthError=(e,t=!0)=>Ym(this,void 0,void 0,(function*(){const r=e.options;if(e instanceof Gn.ah&&r&&(!r.authentication||498===e.code||"AUTHENTICATION_ERROR_CODE"===e.code)){const r=this.getSessionKeyFromUrl(e.url);return this.sessions&&this.sessions[r]&&delete this.sessions[r],yield this.signIn(window.location&&window.location.href,t,e.url)}throw e})),this.onSessionRequestMessage=this.onSessionRequestMessage.bind(this),this.clientIdDialogResultPromises={},window.jimuConfig.isInBuilder&&rg(((e,t)=>{void 0===e?Xf():t.some((e=>{const t=this.getSessionKeyFromUrl(e.portalUrl);return!!this.clientIdDialogResultPromises[t]&&(this.onClientIdDialogFinished(e.portalUrl,e.clientId),!0)}))}),["appConfig","connections"])}getMainSession(){var e;if(!this.sessions||!this.getMainPortal())return null;const t=this.sessions[this.getSessionKeyFromUrl(null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl)];return this.isSessionExpired(t)?t:null}getSessions(){if(!this.sessions)return[];const e={};return Object.keys(this.sessions).forEach((t=>{const r=this.sessions[t];this.isSessionExpired(r)&&(e[t]=r)})),this.sessions=e,Object.keys(this.sessions).map((e=>this.sessions[e]))}clearSessions(){delete this.sessions}onSessionChanged(e){if(this.onSessionChangedCallbacks){const t=this.getSessions();this.onSessionChangedCallbacks.forEach((r=>{r(t,e)}))}}static getInstance(){return Jm.instance||(Jm.instance=new Jm,window._sessionManager=Jm.instance,this.instance.isSigning=!1,this.instance.signInQueue=[],this.instance.onSessionChangedCallbacks=[]),Jm.instance}initSession(){return Ym(this,void 0,void 0,(function*(){const e=window.location.pathname;if(/^\/page\/set-portalurl/.test(e)||/^\/page\/landing/.test(e))return yield Promise.resolve();const t=tg().getState().queryObject["arcgis-auth-origin"];return t&&this.canReadSessionFromParent(window.location.origin)?yield this.readSessionFromParent(t).then((e=>{if(e){const t=this.getSessionKeyFromUrl(e.portal);this.setSession(t,e)}})):(window.addEventListener("message",this.onSessionRequestMessage,!1),window.jimuConfig.isDevEdition||window.jimuConfig.isOutOfExb?(this.initSessionFromStorage(),yield Promise.resolve()):yield this.initSessionFromCookieOrStorage())}))}initSessionFromStorage(){const e=this.getSessionFromStorage();if(e){const t=this.getSessionKeyFromUrl(e.portal);this.setSession(t,e)}else(window.jimuConfig.isSite||window.jimuConfig.isBuilder)&&this.gotoSignInPage()}initSessionFromCookieOrStorage(){return Ym(this,void 0,void 0,(function*(){const e=this.getMainPortal();if(!e)return;let t=ff(e.portalUrl);Ih(t)||(t=Eh(t,zi.Https));const r=yield this.isValidTokenFromStorage(e.portalUrl),n=yield no(null==e?void 0:e.clientId,t,t).then((e=>e)).catch((()=>null)),o=this.getSessionFromStorage();if(o){const t=this.getSessionKeyFromUrl(o.portal);r&&n?o.username===n.username?this.setSession(t,o):this.setSesssionByPlatformSelfResponse(n,e):!r&&n?this.setSesssionByPlatformSelfResponse(n,e):!r||n||mf(window.location.host)&&!this.readCookie("esri_locale")?this.failedToInitSession():this.setSession(t,o)}else n?this.setSesssionByPlatformSelfResponse(n,e):this.failedToInitSession()}))}failedToInitSession(){if(this.processInvalidSignInSession(),window.jimuConfig.isSite||window.jimuConfig.isBuilder)throw this.gotoSignInPage(),new Error("Should signIn")}setSesssionByPlatformSelfResponse(e,t){let r=ff(t.portalUrl);Ih(r)||(r=Eh(r,zi.Https));const n={expires:(new Date).getTime()+1e3*e.expires_in,server:r,ssl:!0,token:e.token,userId:e.username};let o=to.fromCredential(n),i=o.toJSON();i.clientId=t.clientId,o=new to(i);const a=this.getSessionKeyFromUrl(o.portal);this.setSession(a,o)}isValidTokenFromStorage(e){return Ym(this,void 0,void 0,(function*(){const t=this.getSessionFromStorage();if(null==t?void 0:t.token){const r=`${e}/sharing/rest`;return yield(0,Gn.WY)(r,{authentication:t,httpMethod:"GET"}).then((e=>!!(null==e?void 0:e.currentVersion))).catch((e=>(console.warn(null==e?void 0:e.message),!1)))}return Promise.resolve(!1)}))}getUserInfo(){return Ym(this,void 0,void 0,(function*(){return tg().getState().user?yield Promise.resolve(tg().getState().user.asMutable({deep:!0})):this.getMainSession()?yield this.getMainSession().getUser().then((e=>(this.afterGetUserInfo(e),e))):Promise.resolve(null)}))}afterGetUserInfo(e){tg().dispatch(dm(e));const t=e.culture||"en-us";Tp(Uu)?Tp(Uu)!==t&&(Ap(Uu,t),tg().dispatch($m(!0))):Ap(Uu,t)}getMainPortal(){const e=tg().getState();return e.portalUrl?{portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier}:null}getTrustedServers(){var e;const t=tg().getState(),r=null===(e=null==t?void 0:t.portalSelf)||void 0===e?void 0:e.authorizedCrossOriginDomains;return!this.trustedServers&&r&&(this.trustedServers=r.map((e=>Eh(Ch(e),zi.Https)))),this.trustedServers||[]}isTrustedServer(e){return this.getTrustedServers().some((t=>e.includes(t)))}removeSession(e){if(!e)return!1;const t=this.getSessionKeyFromUrl(e.portal);return!!this.removeSessionByKey(t)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(Hm.Remove),!0)}removeSessionByKey(e){return!!e&&(this.sessions&&this.sessions[e]&&delete this.sessions[e],!0)}addOrReplaceSession(e){return!!e&&!!this.doAddOrReplaceSession(e)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(Hm.AddOrUpdate),!0)}doAddOrReplaceSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!t&&(this.setSession(t,e),!0)}setSession(e,t){var r;this.isSessionExpired(t)&&(this.sessions||(this.sessions={}),this.sessions[e]=t,e===this.getSessionKeyFromUrl(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl)&&(tg().dispatch(cm(t.token)),tg().getState().user||this.getUserInfo(),this.writeAuthInfo(t)))}getSessionByUrl(e){if(!this.sessions)return;let t=this.getSessionKeyFromUrl(e),r=this.sessions[t];if((null==r?void 0:r.server)&&(null==r?void 0:r.portal)){const e=this.getPortalKeyFromUrl(r.portal);r=this.sessions[e]}return r}getSessionKeyFromSession(e){return(null==e?void 0:e.server)?"server_"+Oh(e.server):this.getSessionKeyFromUrl(e.portal)}getSessionKeyFromUrl(e){return this.getServerKeyFromUrl(e)||this.getPortalKeyFromUrl(e)}getServerKeyFromUrl(e){const t=/\/rest\/admin\/services(\/|$)/i;let r=e.toLowerCase().indexOf("/rest/services");-1===r&&t.test(e)&&(r=e.search(t));let n=Oh(r>-1?e.substring(0,r):"");return n=n?`server_${n}`:n,n}getPortalKeyFromUrl(e){var t,r;let n="";if(mf(e))n=this.getStandardAGOLSessionKey(e)||"";else{const{customBaseUrl:o,urlKey:i}=this.getPortalUrlInfo(e);if(n=`${i}.${o}`,null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl){const e=this.getPortalUrlInfo(null===(r=this.getMainPortal())||void 0===r?void 0:r.portalUrl);i===e.urlKey&&0===o.indexOf(e.customBaseUrl)&&(n=`${e.urlKey}.${e.customBaseUrl}`)}}return n}getPortalUrlInfo(e){if(!e)return null;let t=e.toLowerCase(),r="",n=t.indexOf("https://");0===n?r="https://":(n=t.indexOf("http://"),0===n&&(r="http://")),n=r.length;let o,i,a=t.indexOf("/sharing/rest",n);a=a<0?t.length:a,t=t.substring(n,a);const s=t.split(".");return o=s[0],s.splice(0,1),i=s.join("."),{urlKey:o,customBaseUrl:i,schema:r}}getSessionFromAuthInfo(e){var t;if(!this.checkAuthInfo(e))return null;const r=this.getPortalFromAuthInfo(e);return new to({clientId:null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId,token:e.token,tokenExpires:new Date(e.expires),portal:r,username:e.email})}getSessionFromStorage(){var e;const t=null===(e=this.readAuthInfo("exb_auth"))||void 0===e?void 0:e.authInfo,r=this.getSessionFromAuthInfo(t);return r&&this.isMainSession(r)?r:r?(this.processInvalidSignInSession(),null):void 0}readCookie(e){try{return zm.get(e)}catch(e){console.error("Read cookieerror.",e)}}getPortalFromAuthInfo(e){var t;if(window.jimuConfig.isInPortal)return`${null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl}/sharing/rest/`;const r=e.urlKey?`${e.urlKey}.`:"";let n=e.schema;n=n||"https://";let o=`${n}${r}${e.customBaseUrl}/sharing/rest/`;return"maps.arcgis.com"===e.customBaseUrl?o=`${n}www.arcgis.com/sharing/rest/`:"mapsdevext.arcgis.com"===e.customBaseUrl?o=`${n}devext.arcgis.com/sharing/rest/`:"mapsqa.arcgis.com"===e.customBaseUrl&&(o=`${n}qaext.arcgis.com/sharing/rest/`),o}isSessionExpired(e){return!(!e||new Date(e.tokenExpires)<new Date)}getAuthInfoFromSession(e){const{urlKey:t,customBaseUrl:r,schema:n}=this.getPortalUrlInfo(e.portal);return{portalApp:!1,email:e.username,token:e.token,expires:e.tokenExpires,urlKey:t,customBaseUrl:r,schema:n}}checkAuthInfo(e){return!(!e||new Date(e.expires)<new Date)}readAuthInfo(e){let t,r;try{r=JSON.parse(Tp(e))}catch(e){console.error("Parse localStorage auth error")}if(r)t={authInfo:r,from:"LocalStorage"};else{try{r=JSON.parse(Dp(e))}catch(e){console.error("Parse sessionStorage auth error")}t={authInfo:r,from:"SessionStorage"}}return t}writeAuthInfo(e){const t=this.readAuthInfo("exb_auth");this.removeAuthInfo(),"LocalStorage"===t.from||window.jimuConfig.isDevEdition||window.jimuConfig.isOutOfExb?Ap("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e))):Pp("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e)))}removeAuthInfo(){Rp("exb_auth"),_p("exb_auth")}getStandardAGOLSessionKey(e){if(!mf(e))return;let t,r;const n=Ch(e).split(".");let o;return t=n[0],n.splice(0,1),r=n.join("."),"devext"===t||"mapsdevext.arcgis.com"===r?o="devext.arcgis.com":"qaext"===t||"mapsqa.arcgis.com"===r?o="qaext.arcgis.com":"www"===t||"maps.arcgis.com"===r?o="www.arcgis.com":(o="www.arcgis.com",t.indexOf("dev")>-1||r.indexOf("dev")>-1?o="devext.arcgis.com":(t.indexOf("qa")>-1||r.indexOf("qa")>-1)&&(o="qaext.arcgis.com")),o}getOrgUrl(e,t){let r;return"www.arcgis.com"===e?r=`${t}.maps.arcgis.com`:"devext.arcgis.com"===e?r=`${t}.mapsdevext.arcgis.com`:"qaext.arcgis.com"===e?r=`${t}.mapsqa.arcgis.com`:(r=e,console.error("Bad params.",e,t)),Eh(r,zi.Https)}getHostedService(e){return Ym(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield(0,Gn.WY)(t+"/rest/info",{httpMethod:"GET"}).then((e=>Ym(this,void 0,void 0,(function*(){if(!e.owningSystemUrl)return yield Promise.resolve(null);let t;return/https?:\/\/(www|services)\.arcgis\.com/.test(e.owningSystemUrl)?t="www.arcgis.com":/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsdevext\.arcgis\.com\/?$/.test(tg().getState().portalUrl)?t="devext.arcgis.com":/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsqa\.arcgis\.com\/?$/.test(tg().getState().portalUrl)&&(t="qaext.arcgis.com"),yield Promise.resolve(t)})))):yield Promise.resolve(null)}))}getHostedServiceArcgisKey(e){return Ym(this,void 0,void 0,(function*(){const t=Ch(e).split("."),r=t[0];let n;return t.splice(0,1),r.includes("servicesdev")?n="devext.arcgis.com":r.includes("servicesqa")?n="qaext.arcgis.com":r.includes("services")&&(n="www.arcgis.com"),n?yield Promise.resolve(n):yield this.getHostedService(e)}))}getSignInDomain(e,t){return Ym(this,void 0,void 0,(function*(){if(!e)return null;if(mf(e)){let r=this.getStandardAGOLSessionKey(e);return r||(r=yield this.getHostedServiceArcgisKey(e),r=r||Ch(e)),t?this.getOrgUrl(r,t):`https://${r}`}{const{customBaseUrl:t,urlKey:r,schema:n}=this.getPortalUrlInfo(e);return`${n||"https://"}${r}.${t}`}}))}signIn(e,t,r,n){var o,i,a;return void 0===e&&(e="/"),void 0===t&&(t=!0),void 0===r&&(r=null===(o=this.getMainPortal())||void 0===o?void 0:o.portalUrl),Ym(this,void 0,void 0,(function*(){n=n||(null===(i=tg().getState())||void 0===i?void 0:i.clientId),"/"===e&&window.jimuConfig.isInPortal&&(e=window.location.pathname);const o=this.getSessionByUrl(r);if(o){if(this._executSignIn(),!t){const t=0===e.indexOf("/");window.location.href=`${location.protocol}//${location.host}${t?"":"/"}${e}`}return yield Promise.resolve(o)}const s=tg().getState().queryObject;if(this.isSigning){const n=this.defer();return this.signInQueue.push({desUrl:r,fromUrl:e,popup:t,sessionDefer:n}),yield n.promise}const u=ff(yield this.getSignInDomain(r,null==s?void 0:s.org)),l=hh(Vp("jimu-core"));let c=`${window.location.origin}${l}/oauth-callback.html?clientId=${n}&portal=${u}&popup=${t}&isInPortal=${window.jimuConfig.isInPortal}&isDevEdition=${window.jimuConfig.isDevEdition}&isOutOfExb=${window.jimuConfig.isOutOfExb}&fromUrl=${e}`;c=new URL(c).toString();const d={portal:u,clientId:n,redirectUri:c,popup:t,params:{showSignupOption:!0,signupType:"esri"}};return this.isSigning=!0,yield null===(a=to.beginOAuth2(d))||void 0===a?void 0:a.then((e=>Ym(this,void 0,void 0,(function*(){return this.addOrReplaceSession(e),this.isSigning=!1,this._executSignIn(),yield Promise.resolve(e)}))))}))}getClientIdByUrl(e){let t;const r=tg().getState();t=gf(Pf(e),Pf(r.portalUrl))?r.clientId:Kf(e);const n=window.location.host;return(!t&&n.includes(".arcgis.com")||!t&&n.includes(".esri.com")&&e.includes(".arcgis.com"))&&(t="experienceBuilder"),t}onClientIdDialogFinished(e,t,r){const n=this.getSessionKeyFromUrl(e);this.clientIdDialogResultPromises[n]&&(r?this.clientIdDialogResultPromises[n].reject(null):this.clientIdDialogResultPromises[n].resolve(null))}useDialogToSetClientIdToConnectiosOfAppConfigAndSignIn(e,t,r){var n,o;let i;const a=this.getSessionKeyFromUrl(e),s={promise:null,resolve:null,reject:null};if(s.promise=new Promise(((e,t)=>{s.resolve=e,s.reject=t})),window.jimuConfig.isBuilder)this.clientIdDialogResultPromises[a]=s,tg().dispatch(Wm(e,t,r)),i=null===(n=this.clientIdDialogResultPromises[a])||void 0===n?void 0:n.promise;else if(window.jimuConfig.isInBuilder){const n=$p("jimu-for-builder").appBuilderSync;this.clientIdDialogResultPromises[a]=s,n.publishPortalUrlNeedToRegisterClientId(e,t,r),i=null===(o=this.clientIdDialogResultPromises[a])||void 0===o?void 0:o.promise}else i=Promise.resolve();return i}addSessionChangeListener(e){if("function"!=typeof e)throw new Error("callback must be a function");this.onSessionChangedCallbacks.includes(e)||this.onSessionChangedCallbacks.push(e)}_executSignIn(){if(!this.isSigning&&this.signInQueue){const e=this.signInQueue.pop();e&&this.signIn(e.fromUrl,e.popup,e.desUrl).then((t=>{e.sessionDefer.resolve(t)}))}}signOut(){var e,t;const r=this.getMainSession();let n=null==r?void 0:r.portal;n||(n=null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl,n=n&&ff(n));const o=(null==r?void 0:r.clientId)||(null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId);this.clearSessions(),tg().dispatch(pm());const i=window&&window.location;let a;if(a=window.jimuConfig.isDevEdition?`${i.protocol}//${i.host}/page/set-portalurl`:window.jimuConfig.isInPortal?window.location.href:`${i.protocol}//${i.host}/page/landing`,this.removeAuthInfo(),this.arcgisJSIM&&this.arcgisJSIM.destroyCredentials(),n&&o){a=encodeURIComponent(a);const e=`${n}/oauth2/signout?client_id=${o}&redirect_uri=${a}`;i.href=e}else i.href="/"}switchAccount(){const{portalUrl:e,clientId:t}=tg().getState(),r=`${e}/home/pages/Account/manage_accounts.html#client_id=${t}&redirect_uri=${window.location.href}#`;this.removeAuthInfo(),window.location.href=r}defer(){const e={promise:null,resolve:null,reject:null};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}generateToken(e,t="",r){return Ym(this,void 0,void 0,(function*(){const n=Eh(`${ff(e)}generateToken?f=json`,zi.Https),o=t||"",i={cache:"no-cache",credentials:r};return yield fetch(`${n}&${o}`,i).then((e=>Ym(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>e.error?null:e),(e=>null))}))}generateSeverSessionByPortalSession(e,t,r="same-origin"){return Ym(this,void 0,void 0,(function*(){const n=(t||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),o=Eh(Ch(window.location.href),zi.Https),i=`serverUrl=${n}&referer=${o}&token=${e.token}`;return this.generateToken(hf(e.portal),i,r).then((t=>{if(t){const r=new to({portal:e.portal,server:n,token:t.token,tokenExpires:new Date(t.expires),ssl:t.ssl,username:e.username});return this.addOrReplaceSession(r),r}return null}))}))}getPortalSelf(e){return Ym(this,void 0,void 0,(function*(){const t=Eh(`${ff(e)}portals/self?f=json`,zi.Https);return yield fetch(t,{cache:"no-cache",credentials:"include"}).then((e=>Ym(this,void 0,void 0,(function*(){return yield e.json()}))))}))}getSessionFromWebTierPortal(e,t,r){let n,o;return o=r?Promise.resolve(r):this.getPortalSelf(e),o.then((r=>Ym(this,void 0,void 0,(function*(){return n=r,yield this.generateToken(e,t,"include")})))).then((t=>{if(t&&t.token){const r={token:t.token,expires:t.expires,userId:n.user?n.user.username:"",ssl:t.ssl,server:ff(e)};return to.fromCredential(r)}return null})).catch((()=>null))}getSessionFromTrustedServer(e){return Ym(this,void 0,void 0,(function*(){const t=(e||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),r=this.getSessionByUrl(e);if(r)return yield Promise.resolve(r);{const r=Eh(Ch(window.location.href),zi.Https);return yield fetch(t+"/rest/info?f=json",{cache:"no-cache",credentials:"include"}).then((e=>Ym(this,void 0,void 0,(function*(){return yield e.json()})))).then((t=>{const n=t.owningSystemUrl;if(n){const t=`referer=${r}`;return this.getSessionFromWebTierPortal(n,t).then((t=>Ym(this,void 0,void 0,(function*(){if(t){this.addOrReplaceSession(t);const r=yield this.generateSeverSessionByPortalSession(t,e,"include");return r&&this.addOrReplaceSession(r),t}return null}))))}return null})).catch((e=>(console.warn("Failed to get session from trusted server."),null)))}}))}addFromArcGisJSCredential(e,t){let r;return"server"===e.scope?(r=new to({server:e.server,token:e.token,tokenExpires:new Date(e.expires),ssl:e.ssl,username:e.userId}),(null==t?void 0:t.owningSystemUrl)?r.portal=`${null==t?void 0:t.owningSystemUrl}/sharing/rest`:r.portal=void 0):r=to.fromCredential(e),!!this.doAddOrReplaceSession(r)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(Hm.ArcGISJSSync),!0)}syncToOtherWindowSessionManager(){window.jimuConfig.isBuilder?$p("jimu-for-builder").builderAppSync.publishChangeSessionToApp():window.jimuConfig.isInBuilder&&$p("jimu-for-builder").appBuilderSync.publishAppSessionChangeToBuilder()}syncSessionsFromOtherWindow(e){this.clearSessions(),e.forEach((e=>{this.doAddOrReplaceSession(e)})),this.onSessionChanged(Hm.OtherWindowSync)}readSessionFromParent(e){return Ym(this,void 0,void 0,(function*(){return yield to.fromParent(e).then((e=>(console.log("fromparent session:",e),e))).catch((e=>(console.error("Get session from parent error. Please check this link for details: https://esri.github.io/arcgis-rest-js/guides/embedded-apps/",e),null)))}))}canReadSessionFromParent(e){return e.endsWith(".arcgis.com")}onSessionRequestMessage(e){var t,r;let n=e.origin===window.location.origin||this.canReadSessionFromParent(e.origin),o="arcgis:auth:requestCredential"===e.data.type;if(n&&o)try{let r;r=e.origin.endsWith("dev.arcgis.com")?"https://devext.arcgis.com":e.origin.endsWith("qa.arcgis.com")?"https://qaext.arcgis.com":e.origin.endsWith(".arcgis.com")?"https://www.arcgis.com":e.origin;const n=this.getSessionByUrl(r);if(!n)return void e.source.postMessage({type:"arcgis:auth:error",error:{name:"NoCredential",message:"Does not find credential."}},e.origin);let o=n.toCredential();o.server=o.server.replace("/sharing/rest",""),null===(t=e.source)||void 0===t||t.postMessage({type:"arcgis:auth:credential",credential:o},e.origin)}catch(t){null===(r=e.source)||void 0===r||r.postMessage({type:"arcgis:auth:error",error:{name:t.name,message:t.message}},e.origin),console.error("Response requestCredential error.",t)}}}const Xm=Jm;var Km=s(6598),Qm=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};let Zm={};function ev(e){return Qm(this,void 0,void 0,(function*(){const t=Xm.getInstance(),r=t.handleAuthError.bind(t);return Zm[e]||(Zm[e]=(0,Gn.WY)(`${ff(e)}portals/self`,{authentication:t.getMainSession(),httpMethod:"GET"}).then((t=>{if(!t.isPortal){const r=`https://${t.urlKey}.${t.customBaseUrl}`;t.urlKey&&!gf(e,r)&&tg().dispatch(sm({portalUrl:r}))}return tg().dispatch(Tm(t)),t})).catch((e=>{r(e,!1)}))),Zm[e]}))}function tv(){Zm={}}const rv={};function nv(e=oh().appId){return Qm(this,void 0,void 0,(function*(){return rv[e]||(window.jimuConfig.isDevEdition?rv[e]=function(e){return Qm(this,void 0,void 0,(function*(){return yield window.fetch(`/apps/${e}/info.json`).then((e=>Qm(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Object.assign(Object.assign({},e),{name:e.title})))}))}(e):rv[e]=function(e){return Qm(this,void 0,void 0,(function*(){const t=Xm.getInstance(),r=tg().getState().portalUrl;return yield(0,Km.rV)(e,{portal:ff(r),authentication:t.getSessionByUrl(r)}).then((e=>Object.assign(Object.assign({},e),{name:e.title}))).catch((e=>Qm(this,void 0,void 0,(function*(){return yield Promise.reject({})}))))}))}(e)),rv[e]}))}function ov(e){delete rv[e]}const iv={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"},av=e=>"code"in e?!!iv[e.code]:["Shift","Control","Alt","Meta"].includes(e.key),sv={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function uv(e){if("undefined"==typeof window)return;let t=e.key;navigator.userAgent.includes("Edge")&&(av(e)||sv[e.keyCode]||(t="key"+t));const r=new KeyboardEvent(e.type,{key:t+"-manual",code:e.code,location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which});document.dispatchEvent(r)}const lv={loading:"Loading",apply:"Apply",ok:"OK",publish:"Publish",cancel:"Cancel",yes:"Yes",no:"No",open:"Open",close:"Close",widgetLoadError:"Fail to load",notPublishError:"This item is not published. Please open this item in Experience Builder, then click <b>&nbsp;Publish&nbsp;</b> to publish it.",versionUpdateMsg:"New updates are available. Click Reload to get the latest updates.",userLocaleChangeMsg:"The user locale has changed. Click Reload to refresh the page.",doUpdate:"Reload",search:"Search",delete:"Delete",about:"About",neverUnsupportedBrowserTitle:"Unsupported browser",neverUnsupportedBrowserOnlineContent:"You are using a browser that is not supported by [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>. Provide your feedback through <feedback-link>GeoNet, the Esri Community</feedback-link>.",neverUnsupportedBrowserEnterpriseContent:"You are using a browser that is not supported [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>.",message_StringSelectionChange:"String selection changes",message_ExtentChange:"Extent changes",message_DataSourceFilterChange:"Data filtering changes",message_DataRecordsSelectionChange:"Record selection changes",message_DataRecordSetChange:"Records created",message_SelectDataRecord:"Select data record",actions:"Actions",noActions:"No available actions",export:"Export",exportAll:"Export all",exportSelected:"Export selected",largeWarningTitle:"Are you sure you want to export all data records? ",largeWarningContent:"Exporting large dataset will take time.",tooLargeWarningTitle:"You can only export the first {max} records.",tooLargeWarningContent:"Dataset export is limited to the first {max} records.",dataAction_ExportJson:"Export to JSON",dataAction_ExportCSV:"Export to CSV",dataAction_ExportGeoJson:"Export to GeoJSON",messageAction_SelectDataRecord:"Select data records",messageAction_FilterDataRecord:"Filter data records",icon:"Icon",small:"Small",low:"Low",medium:"Medium",high:"High",large:"Large",experience:"Experience",template:"Template",widget:"Widget",section:"Section",view:"View",page:"Page",dialog:"Window",layout:"Layout",theme:"Theme",dataSource:"Datasource",block:"Block",screenGroup:"Screen group",screen:"Screen",dialogConfirmationDefaultText:"I agree to the above terms and conditions",dialogPreventDisplayAgainDefaultText:"Don't show this again",noEditPrivilegesError:"Your account does not have permission to create or modify data.",noEditContentPrivilegesError:"Your account does not have permission to create or modify content.",essentialAppsLicenseErrorForApp:"Your account is not licensed to use an app that is not public. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",essentialAppsLicenseErrorForBuilder:"Your account is not licensed for Experience Builder. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",roleError:"Experience Builder Developer Edition requires a level 2 ArcGIS account to work. Please login with an account that has level 2 privileges.",roleError2:"Experience Builder Developer Edition requires an ArcGIS organization account with a user type that includes privileges to create content.",invalidResourceExperience:"This is not a supported item.",invalidResourceItem:"Item does not exist or is inaccessible.",invalidResourcePermission:"You do not have permissions to access this resource.",dataSourceCreateError:"Data is inaccessible.",blockedByAdminErrorForApp:"Your organization has blocked access to this application. Please contact your administrator for details.",blockedByAdminErrorForBuilder:"Your organization has blocked access to Experience Builder. Please contact your administrator for details.",upgradedFrom:"Upgraded from previous config",versionIsHigh:"Oops.. It seems this experience is built with a higher version of ArcGIS Experience Builder. Please upgrade to the latest version to view.",badVersion:"Oops.. It seems the version of this experience is incorrect. Please check its configuration file.",setClientIdMessage1:"This service is hosted on an ArcGIS Enterprise that the Experience Builder not registered with. Please provide Client ID to {register} first.",registerText:"register",arcgisEnterpriseText:"ArcGIS Enterprise",setClientIdMessage2:"Provide the Client ID for Experience Builder registered in the ArcGIS Enterprise you specify above"};var cv,dv,pv=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};!function(e){e.AppList="AppList",e.Builder="Builder",e.Experience="Experience"}(cv||(cv={})),function(e){e.InvalidUserLevel="InvalidUserLevel",e.InvalidPrivilege="InvalidPrivilege",e.InvalidLicense="InvalidLicense",e.InvalidAppBlockedByOrg="InvalidAppBlockedByOrg",e.InvalidResourceExperience="InvalidResourceExperience",e.InvalidResourceItem="InvalidResourceItem",e.InvalidResourcePermission="InvalidResourcePermission",e.NullInfo=""}(dv||(dv={}));const fv="OAUTH_0070";function hv(e){return pv(this,void 0,void 0,(function*(){return yield mv(e).then((e=>e.valid))}))}function gv(e){return pv(this,void 0,void 0,(function*(){return yield Tv(e).then((e=>pv(this,void 0,void 0,(function*(){return yield Sv(e)}))))}))}function mv(e){return pv(this,void 0,void 0,(function*(){return yield Tv(e).then((t=>pv(this,void 0,void 0,(function*(){const r=function(e){return pv(this,void 0,void 0,(function*(){tg().getState().portalUrl;const t=function(){const e=tg().getState();return e.appId||e.queryObject.id||e.queryObject.template}(),r={valid:!0,isExperience:!0,isValidItem:!0,hasPermissionToAccess:!0};return e===cv.AppList||window.jimuConfig.isDevEdition?yield Promise.resolve(r):t?/\.json$/.test(t)||/^https/.test(t)?yield Promise.resolve(r):yield Ev(0,t).then((e=>!e||"Web Experience"!==e.type&&"Web Experience Template"!==e.type?(r.valid=!1,r.isExperience=!1,r):r)).catch((e=>(e&&"CONT_0001"===e.code?(r.valid=!1,r.isValidItem=!1):(r.valid=!1,r.hasPermissionToAccess=!1),r))):yield Promise.resolve(r)}))}(e),n=function(e){return pv(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition||e!==cv.Builder&&e!==cv.AppList?Promise.resolve(!0):yield Iv().then((e=>!(!e||!e.orgId))).catch((()=>!1))}))}(e),o=function(e){return pv(this,void 0,void 0,(function*(){return yield yv().then((t=>pv(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition&&t&&(e===cv.Builder||e===cv.AppList)?yield function(){return pv(this,void 0,void 0,(function*(){return yield Iv().then((e=>!(!e||"2"!==e.level))).catch((()=>!1))}))}():yield Promise.resolve(!0)}))))}))}(e),i=function(e,t){return pv(this,void 0,void 0,(function*(){return yield Sv(t).then((t=>{const r={valid:!1,capabilities:t,invalidInfo:dv.NullInfo,invalidMessage:""};if(window.jimuConfig.isDevEdition){if(e===cv.AppList)return r.valid=t.canCreateExperience,r;if(e===cv.Builder)return r.valid=t.canCreateExperience,r;if(e===cv.Experience)return r.valid=!0,r}else{if(e===cv.AppList)return r.valid=!0,r;if(e===cv.Builder)return r.valid=t.canCreateExperience,r;if(e===cv.Experience)return r.valid=!0,r}}))}))}(e,t),a=function(e,t){return pv(this,void 0,void 0,(function*(){const r=tg().getState();r.portalUrl;return window.jimuConfig.isDevEdition?yield Promise.resolve({valid:!0,viewOnly:!1}):e===cv.Builder||e===cv.AppList?yield Promise.resolve(t):r.appId?/^\/templates\/.*\.json$/.test(r.appId)?yield Promise.resolve({valid:!0,viewOnly:!1}):yield function(e,t){return pv(this,void 0,void 0,(function*(){return yield Ev(0,t).then((e=>e&&"public"===e.access))}))}(0,r.appId).then((e=>e&&(t.valid||t.messageCode!==fv)?{valid:!0,viewOnly:!1}:t)).catch((e=>({valid:!0,viewOnly:!1}))):Promise.resolve({valid:!0,viewOnly:!1})}))}(e,t);return yield Promise.all([r,n,o,i,a])})))).then((t=>{const[r,n,o,i,a]=t,s={valid:r.valid&&n&&o&&i.valid&&a.valid&&(e!==cv.Builder||!a.viewOnly),capabilities:{canViewExperience:o&&i.capabilities.canViewExperience&&a.valid,canCreateExperience:o&&i.capabilities.canCreateExperience&&a.valid&&!a.viewOnly,canUpdateExperience:o&&i.capabilities.canUpdateExperience&&a.valid&&!a.viewOnly,canDeleteExperience:o&&i.capabilities.canDeleteExperience&&a.valid&&!a.viewOnly,canShareExperience:o&&i.capabilities.canShareExperience&&a.valid&&!a.viewOnly,canEditFeature:i.capabilities.canEditFeature},invalidInfo:dv.NullInfo,invalidMessage:""};return s.invalidInfo=function(e,t,r,n,o,i){let a=dv.NullInfo;return a=n?i.valid?!o.valid||!r||e===cv.Builder&&i.viewOnly?dv.InvalidPrivilege:t.valid?dv.NullInfo:t.isExperience?t.isValidItem?dv.InvalidResourcePermission:dv.InvalidResourceItem:dv.InvalidResourceExperience:i.messageCode===fv?dv.InvalidAppBlockedByOrg:dv.InvalidLicense:dv.InvalidUserLevel,a}(e,r,n,o,i,a),s.invalidMessage=function(e,t){const r=Xd();let n="";return wv()?t===dv.InvalidLicense?e===cv.Builder||e===cv.AppList?n=r.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:lv.essentialAppsLicenseErrorForBuilder}):e===cv.Experience&&(n=r.formatMessage({id:"essentialAppsLicenseErrorForApp",defaultMessage:lv.essentialAppsLicenseErrorForApp})):t===dv.InvalidAppBlockedByOrg?e===cv.Builder||e===cv.AppList?n=r.formatMessage({id:"blockedByAdminErrorForBuilder",defaultMessage:lv.blockedByAdminErrorForBuilder}):e===cv.Experience&&(n=r.formatMessage({id:"blockedByAdminErrorForApp",defaultMessage:lv.blockedByAdminErrorForApp})):t===dv.InvalidPrivilege?n=window.jimuConfig.isDevEdition?r.formatMessage({id:"roleError2",defaultMessage:lv.roleError2}):r.formatMessage({id:"noEditContentPrivilegesError",defaultMessage:lv.noEditContentPrivilegesError}):t===dv.InvalidUserLevel?n=r.formatMessage({id:"roleError",defaultMessage:lv.roleError}):t===dv.InvalidResourceExperience?n=r.formatMessage({id:"invalidResourceExperience",defaultMessage:lv.invalidResourceExperience}):t===dv.InvalidResourceItem?n=r.formatMessage({id:"invalidResourceItem",defaultMessage:lv.invalidResourceItem}):t===dv.InvalidResourcePermission&&(n=r.formatMessage({id:"invalidResourcePermission",defaultMessage:lv.invalidResourcePermission})):n="",n}(e,s.invalidInfo),s}))}))}function vv(){return pv(this,void 0,void 0,(function*(){return yield function(){return pv(this,void 0,void 0,(function*(){const e=tg().getState(),t=e.portalSelf,r=e.portalUrl;return t?yield Promise.resolve(t):r?yield ev(r):yield Promise.resolve(null)}))}().then((e=>e&&e.isPortal?e.currentVersion:null)).catch((e=>null))}))}function yv(){return pv(this,void 0,void 0,(function*(){const e=yield vv();return!!e&&Number(e)<=6.1}))}function bv(){return pv(this,void 0,void 0,(function*(){const e=yield vv();return!!e&&Number(e)<=7.3}))}function Sv(e){return pv(this,void 0,void 0,(function*(){const t={canViewExperience:!0,canCreateExperience:!1,canUpdateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canEditFeature:!1};return yield function(){return pv(this,void 0,void 0,(function*(){return yield Iv().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:user:createItem")))).catch((()=>!1))}))}().then((r=>pv(this,void 0,void 0,(function*(){const n=r&&e.valid&&!e.viewOnly;return t.canCreateExperience=n,t.canUpdateExperience=n,t.canDeleteExperience=n,t.canShareExperience=n,yield function(){return pv(this,void 0,void 0,(function*(){return yield Iv().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("features:user:edit")))).catch((()=>!0))}))}()})))).then((e=>(t.canEditFeature=e,t)))}))}function wv(){return Xm.getInstance().getMainSession()}function Iv(){return pv(this,void 0,void 0,(function*(){const e=wv();return e?yield e.getUser().then((e=>e)).catch((t=>pv(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${e.username}'.`),yield Promise.reject()})))):(console.log("The user has not signed in."),yield Promise.reject())}))}function Ev(e,t){return pv(this,void 0,void 0,(function*(){const e=wv(),r=tg().getState().appInfo;return r&&r.name?yield Promise.resolve(r):yield nv(t).then((e=>e)).catch((t=>pv(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${null==e?void 0:e.username}'.`),yield Promise.reject(t)}))))}))}function Ov(e){return pv(this,void 0,void 0,(function*(){return!window.jimuConfig.isDevEdition||(e===cv.Builder||e===cv.AppList)&&!(yield yv())}))}let Cv=null;function Tv(e){return pv(this,void 0,void 0,(function*(){const t=tg().getState().portalUrl,r=(yield bv())?"arcgisWebApps":"experienceBuilder";return Cv||(Cv=(yield Ov(e))?yield function(e,t,r){return pv(this,void 0,void 0,(function*(){const r={valid:!1,viewOnly:!1,messageCode:""},n=Xm.getInstance().getSessionByUrl(e);if(n){const e=`${n.portal}/oauth2/validateAppAccess?client_id=${t}`;return yield(0,Gn.WY)(e,{authentication:n}).then((e=>(!1===e.valid?(r.messageCode=e.messageCode||"",console.log("not-authorized",`You are currently signed in as: '${n.username}'.`)):(r.valid=!0,r.viewOnly=!!e.viewOnlyUserTypeApp),r))).catch((e=>pv(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${n.username}'.`),yield Promise.resolve(r)}))))}return yield Promise.resolve(r)}))}(t,r):yield Promise.resolve({valid:!0,viewOnly:!1})),Cv}))}var Av=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const xv={},Dv={};function Pv(e){return Av(this,void 0,void 0,(function*(){if(Dv[e])return yield Dv[e];let t=[];const r=cf.getInstance().getExtensions(Up.DependencyDefine).filter((t=>t.getDependencyKey()===e))[0];if(r)t=t.concat(r.getResources());else{if(!/^http/.test(e))return console.error("Unknown dependency.",e),Promise.reject();t.push({url:e})}const n=[];return t.forEach((e=>{xv[e.url]?n.push(xv[e.url]):n.push(_v(e))})),Dv[e]=Promise.all(n).then((e=>{if(null==r?void 0:r.postInit)return r.postInit()}))}))}function Rv(e){return Av(this,void 0,void 0,(function*(){return yield e.reduce(((e,t)=>Av(this,void 0,void 0,(function*(){return yield e.then((()=>Av(this,void 0,void 0,(function*(){return yield Pv(t)}))))}))),Pv(e[0]))}))}function _v(e){return Av(this,void 0,void 0,(function*(){if(e.dependencies&&e.dependencies.length>0)return yield Promise.all(e.dependencies.map((e=>Av(this,void 0,void 0,(function*(){return yield _v(e)}))))).then((()=>Av(this,void 0,void 0,(function*(){return delete e.dependencies,yield _v(e)}))));const t=e.url;return xv[e.url]=Bp(t),yield xv[e.url]}))}var kv=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function Nv(e){return kv(this,void 0,void 0,(function*(){return yield Pv("jimu-arcgis"),yield Wp(e)}))}function Mv(e){return kv(this,void 0,void 0,(function*(){return yield Nv([e]).then((e=>e[0]))}))}var jv=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function Lv(e,t,r=1){return jv(this,void 0,void 0,(function*(){const n=(e,o=0)=>t(e).catch((t=>{if(o>=r)return Promise.reject(t);const i=t.options;return"ArcGISAuthError"!==t.name||!i||i.authentication&&498!==t.code&&"AUTHENTICATION_ERROR_CODE"!==t.code&&"GWM_0003"!==t.code?n(e,o+1):function(e){return jv(this,void 0,void 0,(function*(){const t=Jm.getInstance();return t.getServerKeyFromUrl(e)?yield Fv.getInstance().fetchArcGISServerInfo(e).then((r=>jv(this,void 0,void 0,(function*(){if(null==r?void 0:r.owningSystemUrl){const n=t.getClientIdByUrl(null==r?void 0:r.owningSystemUrl);return n?t.signIn(window.location&&window.location.href,!0,null==r?void 0:r.owningSystemUrl,n).then((r=>jv(this,void 0,void 0,(function*(){return yield t.generateSeverSessionByPortalSession(r,e),r})))):t.useDialogToSetClientIdToConnectiosOfAppConfigAndSignIn(r.owningSystemUrl,!0,e).then((()=>t.getSessionByUrl(e)))}return yield Nv(["esri/request"]).then((r=>{const[n]=r;return n(e,{authMode:"auto"}).then((r=>t.getSessionByUrl(e)))}))})))):t.signIn(window.location&&window.location.href,!0,e)}))}(t.url).then((e=>n(e,o+1)))}));return n(Jm.getInstance().getSessionByUrl(e))}))}var Uv=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Fv{constructor(){this.servicesInfo={},this.servicesInfoPromise={},this.arcGISServersInfo={},this.arcGISServersInfoPromise={}}static getInstance(){if(window.jimuConfig&&window.jimuConfig.isBuilder){if(window._appWindow&&window._appWindow._serviceManager)return window._appWindow._serviceManager;console.error("No window._appWindow._serviceDefinitionManager.")}return Fv.instance||(Fv.instance=new Fv),Fv.instance}getServiceInfo(e){return this.servicesInfo[e]}setServiceInfo(e,t){this.servicesInfo[e]=t}getServerInfo(e){return this.arcGISServersInfo[e]}getServerInfoByServiceUrl(e){return this.arcGISServersInfo[this.getArcGISServerUrlFromServiceUrl(e)]}fetchServiceInfo(e){return Uv(this,void 0,void 0,(function*(){return this.getServiceInfo(e)?yield Promise.resolve(this.getServiceInfo(e)):this.servicesInfoPromise[e]?yield this.servicesInfoPromise[e]:(this.servicesInfoPromise[e]=this.isHostedServiceInSamePortal(e).then((t=>Uv(this,void 0,void 0,(function*(){return yield Lv(e,(r=>Uv(this,void 0,void 0,(function*(){return yield(0,Gn.WY)(e,{authentication:r,httpMethod:"GET"}).then((e=>({definition:e,isHostedInSamePortal:t})))}))),1)})))).then((t=>(this.servicesInfo[e]=t,t))),this.servicesInfoPromise[e])}))}isHostedServiceInSamePortal(e){return Uv(this,void 0,void 0,(function*(){return yield this.fetchArcGISServerInfo(e).then((t=>(null==t?void 0:t.owningSystemUrl)?!(!/https?:\/\/(www|services)\.arcgis\.com/.test(t.owningSystemUrl)||!/maps\.arcgis\.com\/?$/.test(tg().getState().portalUrl))||!(!/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsdevext\.arcgis\.com\/?$/.test(tg().getState().portalUrl))||!(!/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsqa\.arcgis\.com\/?$/.test(tg().getState().portalUrl))||gf(tg().getState().portalUrl,t.owningSystemUrl):!!Xm.getInstance().getSessionByUrl(e)))}))}fetchArcGISServerInfo(e){return Uv(this,void 0,void 0,(function*(){const t=this.getArcGISServerUrlFromServiceUrl(e);return t?(this.arcGISServersInfoPromise[t]||(this.arcGISServersInfoPromise[t]=(0,Gn.WY)(t,{httpMethod:"GET"}).then((e=>(this.arcGISServersInfo[t]=e,e))).catch((e=>Uv(this,void 0,void 0,(function*(){return console.warn("Failed to fetch ArcGIS server info."),yield Promise.resolve(null)}))))),yield this.arcGISServersInfoPromise[t]):yield Promise.resolve(null)}))}getArcGISServerUrlFromServiceUrl(e){const t=e.split(/\/rest(\/admin)?\/services\/|\/appservices\//)[0];return t?t+"/rest/info":null}isHostedService(e){return Uv(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield(0,Gn.WY)(t+"/rest/info",{httpMethod:"GET"}).then((e=>!!e.owningSystemUrl)):yield Promise.resolve(!1)}))}fetchChildLayerDefinitionsFromUrls(e){return Uv(this,void 0,void 0,(function*(){return yield Promise.allSettled(e.map((e=>Uv(this,void 0,void 0,(function*(){return yield this.fetchServiceInfo(e).then((e=>e.definition))}))))).then((t=>{const r={};let n;return t.forEach(((t,o)=>{const i="fulfilled"===t.status?t.value:null;i&&(n=e[o],r[n]=i)})),r})).then((e=>{const t=Object.keys(e).map((t=>e[t])),r=this._getAllChildLayerIdsOfGroupLayer(t),n={};return Object.keys(e).forEach((t=>{r.some((r=>{var n;return r===`${null===(n=e[t])||void 0===n?void 0:n.id}`}))||(n[t]=e[t])})),n}))}))}_getAllChildLayerIdsOfGroupLayer(e){if(!e||0===e.length)return[];const t=e.filter((e=>e.type===Qi.GroupLayer));return this._getChildLayerIdsFromGroupLayerDefinitions(t)}_getChildLayerIdsFromGroupLayerDefinitions(e){return 0===e.length?[]:Array.prototype.concat.apply([],e.map((e=>(null==e?void 0:e.subLayers.map((e=>`${e.id}`)))||[])))}}window.jimuConfig&&!window.jimuConfig.isBuilder&&(window._serviceManager=Fv.getInstance());var $v=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const Bv={};function Wv(e,t,r){return function(e,t){var r,n;return $v(this,void 0,void 0,(function*(){try{const a=yield function(e){return $v(this,void 0,void 0,(function*(){return e?yield Promise.allSettled(e.filter((e=>null==e?void 0:e.feature)).map((e=>$v(this,void 0,void 0,(function*(){return"esri.Graphic"===e.feature.declaredClass?yield Promise.resolve(e.feature):yield Jv(e.feature)}))))).then((e=>e.filter((e=>"fulfilled"===e.status)).map((e=>e.value)))):yield Promise.resolve(null)}))}(t);if(!a)return null;const s=e.getIdField();if(!s)return null;const u=e.getSchema(),l=(o=null==u?void 0:u.fields,i=s,o?Object.keys(o).map((e=>{const t={name:(r=o[e]).name,alias:r.alias,type:zv(r.type)};var r;return t.name===i&&(t.type="oid"),t})):null);if(!l)return null;const c={esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}[e.getGeometryType()];return c||0!==a.length?{fields:l,objectIdField:s,source:a,geometryType:c,spatialReference:null===(r=e.getMainDataSource().layer)||void 0===r?void 0:r.spatialReference,fullExtent:null===(n=e.getMainDataSource().layer)||void 0===n?void 0:n.fullExtent}:null}catch(e){return console.error("Failed to get constructor options of JS API client-side feature layer.",e),null}var o,i}))}(e,t).then((t=>t?Nv(["esri/layers/FeatureLayer"]).then((n=>{var o,i,a;const s=new(0,n[0])(t),u=qv(e);return s.popupEnabled="boolean"!=typeof(null===(o=null==u?void 0:u.layer)||void 0===o?void 0:o.popupEnabled)||(null===(i=null==u?void 0:u.layer)||void 0===i?void 0:i.popupEnabled),Gv(e,s,null===(a=null==u?void 0:u.layer)||void 0===a?void 0:a.popupTemplate),{layer:s,sourceVersion:r}})).then((t=>{var r,n,o;if((null===(r=t.layer)||void 0===r?void 0:r.popupEnabled)&&!(null===(n=t.layer)||void 0===n?void 0:n.popupTemplate)){const r=qv(e);if(null==r?void 0:r.getDataSourceJson().isDataInDataSourceInstance)return t.layer.title=r.getLabel(),t;if(null==r?void 0:r.getDataSourceJson().itemId)return Bv[Vv(r)]||(Bv[Vv(r)]=r.createJSAPILayerByDataSource().then((e=>null==e?void 0:e.load()))),Bv[Vv(r)].then((r=>(Gv(e,t.layer,null==r?void 0:r.popupTemplate),t)));if(null==r?void 0:r.getDataSourceJson().url)return t.layer.title=null===(o=r.getLayerDefinition())||void 0===o?void 0:o.name,t}return t})):Promise.reject("Feaure layer data source error: failed to create feature layer with source records.")))}function Gv(e,t,r){var n,o;if(r)if(null===(n=e.getDataSourceJson().schema)||void 0===n?void 0:n.fields){const n=Object.values(e.getDataSourceJson().schema.fields),i=null===(o=r.fieldInfos)||void 0===o?void 0:o.filter((e=>n.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.fieldName))))),a=r.clone();a.fieldInfos=i,t.popupTemplate=a}else t.popupTemplate=r}function Vv(e){var t,r;return`${null===(t=null==e?void 0:e.getDataSourceJson())||void 0===t?void 0:t.portalUrl}-${null===(r=null==e?void 0:e.getDataSourceJson())||void 0===r?void 0:r.itemId}`}function qv(e){var t;let r=e;if(e.dataViewId===_u&&(r=qv(e.getMainDataSource())),e.getDataSourceJson().isOutputFromWidget&&1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];(null==t?void 0:t.type)!==Ki.FeatureLayer&&(null==t?void 0:t.type)!==Ki.SceneLayer||(r=qv(t))}return r}function zv(e){switch(e){case ji.Number:return"double";case ji.Date:return"date";default:return"string"}}function Hv(e){return"esri.Graphic"===e.declaredClass?e.toJSON():e}function Yv(e){return $v(this,void 0,void 0,(function*(){return"esri.Graphic"===e.declaredClass?yield Promise.resolve(e):yield Jv(e)}))}function Jv(e){return $v(this,void 0,void 0,(function*(){return yield Nv(["esri/Graphic"]).then((t=>t[0].fromJSON(e)))}))}function Xv(e){return $v(this,void 0,void 0,(function*(){return e?function(e){if(!e)return Promise.resolve(null);if(e.layer)return e.layer.popupTemplate?Promise.resolve(e.layer.popupTemplate.toJSON()):Promise.resolve(null);const t=e.getRootDataSource()||e,r=t.getDataSourceJson().itemId;if(!r)return Promise.resolve(null);const n=t.getDataSourceJson().portalUrl;return Lv(n,(t=>$v(this,void 0,void 0,(function*(){return yield(0,Km.m_)(r,{portal:ff(n),authentication:t}).then((t=>{var r;const n=null===(r=null==t?void 0:t.layers)||void 0===r?void 0:r.find((t=>`${t.id}`===e.getDataSourceJson().layerId));return(null==n?void 0:n.popupInfo)?n.popupInfo:null}))}))))}(qv(e)).then((t=>{var r,n;if(!t)return null;if(null===(r=e.getDataSourceJson().schema)||void 0===r?void 0:r.fields){const r=Object.values(e.getDataSourceJson().schema.fields),o=null===(n=t.fieldInfos)||void 0===n?void 0:n.filter((e=>r.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.fieldName)))));return Object.assign(Object.assign({},t),{fieldInfos:o})}return t})):yield Promise.resolve(null)}))}function Kv(e,t){return $v(this,void 0,void 0,(function*(){const r=(null==e?void 0:e.type)===Ki.FeatureLayer?e:null==e?void 0:e.getAssociatedDataSource();if(!r||!t)return null;const n=t.asMutable({deep:!0});return yield Nv(["esri/geometry/support/jsonUtils"]).then((e=>{var o;const i=e[0];if("number"==typeof t.pageSize){const e=null!==(o=t.page)&&void 0!==o?o:1;n.start=(e-1)*t.pageSize,n.num=t.pageSize,null!==r.getMaxRecordCount()&&(1===e?n.num=Math.min(r.getMaxRecordCount(),t.pageSize):e*t.pageSize>r.getMaxRecordCount()&&(n.num=r.getMaxRecordCount()-(e-1)*t.pageSize)),delete n.page,delete n.pageSize}return n.geometry&&(n.geometry=i.fromJSON(n.geometry)),delete n.key,r.getGDBVersion()&&(n.gdbVersion=r.getGDBVersion()),n.outFields=n.outFields&&n.outFields.length>0?n.outFields:["*"],n}))}))}var Qv,Zv,ey,ty,ry;!function(e){e.All="ALL",e.Simple="SIMPLE"}(Qv||(Qv={})),function(e){e.And="AND",e.Or="OR"}(Zv||(Zv={})),function(e){e.None="NONE",e.Previous="PREVIOUS",e.All="ALL"}(ey||(ey={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorDoesNotContain="STRING_OPERATOR_DOES_NOT_CONTAIN",e.StringOperatorStartsWith="STRING_OPERATOR_STARTS_WITH",e.StringOperatorDoesNotStartWith="STRING_OPERATOR_DOES_NOT_START_WITH",e.StringOperatorEndsWith="STRING_OPERATOR_ENDS_WITH",e.StringOperatorDoesNotEndWith="STRING_OPERATOR_DOES_NOT_END_WITH",e.StringOperatorIsAnyOf="STRING_OPERATOR_IS_ANY_OF",e.StringOperatorIsNoneOf="STRING_OPERATOR_IS_NONE_OF",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsAtLeast="NUMBER_OPERATOR_IS_AT_LEAST",e.NumberOperatorIsAtMost="NUMBER_OPERATOR_IS_AT_MOST",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN",e.NumberOperatorIsNotBetween="NUMBER_OPERATOR_IS_NOT_BETWEEN",e.NumberOperatorIsAnyOf="NUMBER_OPERATOR_IS_ANY_OF",e.NumberOperatorIsNoneOf="NUMBER_OPERATOR_IS_NONE_OF",e.NumberOperatorIsBlank="NUMBER_OPERATOR_IS_BLANK",e.NumberOperatorIsNotBlank="NUMBER_OPERATOR_IS_NOT_BLANK",e.DateOperatorIsOn="DATE_OPERATOR_IS_ON",e.DateOperatorIsNotOn="DATE_OPERATOR_IS_NOT_ON",e.DateOperatorIsIn="DATE_OPERATOR_IS_IN",e.DateOperatorIsNotIn="DATE_OPERATOR_IS_NOT_IN",e.DateOperatorIsBefore="DATE_OPERATOR_IS_BEFORE",e.DateOperatorIsAfter="DATE_OPERATOR_IS_AFTER",e.DateOperatorIsOnOrBefore="DATE_OPERATOR_IS_ON_OR_BEFORE",e.DateOperatorIsOnOrAfter="DATE_OPERATOR_IS_ON_OR_AFTER",e.DateOperatorIsInTheLast="DATE_OPERATOR_IS_IN_THE_LAST",e.DateOperatorIsNotInTheLast="DATE_OPERATOR_IS_NOT_IN_THE_LAST",e.DateOperatorIsBetween="DATE_OPERATOR_IS_BETWEEN",e.DateOperatorIsNotBetween="DATE_OPERATOR_IS_NOT_BETWEEN",e.DateOperatorIsBlank="DATE_OPERATOR_IS_BLANK",e.DateOperatorIsNotBlank="DATE_OPERATOR_IS_NOT_BLANK"}(ty||(ty={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.SingleSelectFromUnique="UNIQUE",e.MultipleSelectFromUnique="MULTIPLE",e.SingleSelectFromPredefined="UNIQUE_PREDEFINED",e.MultipleSelectFromPredefined="MULTIPLE_PREDEFINED"}(ry||(ry={}));const ny="-empty-";var oy,iy,ay,sy;!function(e){e.Single="SINGLE",e.Set="SET"}(oy||(oy={})),function(e){e.Inline="INLINE",e.Block="BLOCK"}(iy||(iy={})),function(e){e.None="NONE",e.UseAskForValue="USE_ASK_FOR_VALUE",e.UseLabel="USE_LABEL"}(ay||(ay={})),function(e){e.Asc="ASC",e.Desc="DESC"}(sy||(sy={}));const uy={equals:{op:"= ?"},doesNotEqual:{op:"<> ?"},isAtLeast:{op:">= ?"},isAtMost:{op:"<= ?"},isLessThan:{op:"< ?"},isGreaterThan:{op:"> ?"},isBetween:{op:"BETWEEN ?",sep:" AND "},isNotBetween:{op:"NOT BETWEEN ?",sep:" AND "},contains:{op:"LIKE ?",mod:"%{0}%"},doesNotContain:{op:"NOT LIKE ?",mod:"%{0}%"},startsWith:{op:"LIKE ?",mod:"{0}%"},doesNotStartWith:{op:"NOT LIKE ?",mod:"{0}%"},endsWith:{op:"LIKE ?",mod:"%{0}"},doesNotEndWith:{op:"NOT LIKE ?",mod:"%{0}"},isAnyOf:{op:"IN ?",mod:"[{0}]",type:"IN"},isNoneOf:{op:"NOT IN ?",mod:"[{0}]",type:"IN"}};function ly(e){let t="";switch(e){case ty.NumberOperatorIs:case ty.StringOperatorIs:case ty.DateOperatorIsOn:case ty.NumberOperatorIsBlank:case ty.StringOperatorIsBlank:case ty.DateOperatorIsBlank:t="equals";break;case ty.NumberOperatorIsNot:case ty.StringOperatorIsNot:case ty.DateOperatorIsNotOn:case ty.NumberOperatorIsNotBlank:case ty.StringOperatorIsNotBlank:case ty.DateOperatorIsNotBlank:t="doesNotEqual";break;case ty.NumberOperatorIsAtLeast:case ty.DateOperatorIsOnOrAfter:t="isAtLeast";break;case ty.NumberOperatorIsAtMost:case ty.DateOperatorIsOnOrBefore:t="isAtMost";break;case ty.NumberOperatorIsLessThan:case ty.DateOperatorIsBefore:t="isLessThan";break;case ty.DateOperatorIsAfter:case ty.NumberOperatorIsGreaterThan:t="isGreaterThan";break;case ty.NumberOperatorIsBetween:case ty.DateOperatorIsBetween:t="isBetween";break;case ty.NumberOperatorIsNotBetween:case ty.DateOperatorIsNotBetween:t="isNotBetween";break;case ty.NumberOperatorIsAnyOf:case ty.StringOperatorIsAnyOf:case ty.DateOperatorIsIn:t="isAnyOf";break;case ty.NumberOperatorIsNoneOf:case ty.StringOperatorIsNoneOf:case ty.DateOperatorIsNotIn:t="isNoneOf";break;case ty.StringOperatorContains:t="contains";break;case ty.StringOperatorDoesNotContain:t="doesNotContain";break;case ty.StringOperatorStartsWith:t="startsWith";break;case ty.StringOperatorEndsWith:t="endsWith";break;case ty.StringOperatorDoesNotStartWith:t="doesNotStartWith";break;case ty.StringOperatorDoesNotEndWith:t="doesNotEndWith"}return t}function cy(e,t,r,n=!1,o=!1){if(e.includes("BLANK"))return r.fieldAlias+(e.includes("NOT")?" IS NOT NULL":" IS NULL");let i=ly(e);if(e.includes("DATE"))switch(e){case ty.DateOperatorIsOn:i=o?"is":n?"isAt":"isOn";break;case ty.DateOperatorIsNotOn:i=o?"isNot":n?"isNotAt":"isNotOn";break;case ty.DateOperatorIsIn:i="isIn";break;case ty.DateOperatorIsNotIn:i="isNotIn";break;case ty.DateOperatorIsBefore:i="isBefore";break;case ty.DateOperatorIsAfter:i="isAfter";break;case ty.DateOperatorIsOnOrBefore:i=n?"isAtOrBefore":"isOnOrBefore";break;case ty.DateOperatorIsOnOrAfter:i=n?"isAtOrAfter":"isOnOrAfter";break;case ty.DateOperatorIsInTheLast:i="isInTheLast";break;case ty.DateOperatorIsNotInTheLast:i="isNotInTheLast"}return t.formatMessage({id:i+"ForDisplaySQL"},r)}function dy(e,t){let r=null;const n=new Date,o=n.getTime(),i=864e5;switch(e){case Xu.Today:r=n;break;case Xu.Yesterday:r=new Date(o-i);break;case Xu.Tomorrow:r=new Date(o+i);break;case Xu.ThisWeek:r=[Wu(n,{locale:t.locale}),Gu(n,{locale:t.locale})];break;case Xu.ThisMonth:r=[Vu(n),qu(n)];break;case Xu.ThisQuarter:r=[zu(n),Hu(n)];break;case Xu.ThisYear:r=[Yu(n),Ju(n)]}return r}function py(e,t,r){var n,o;r=r||Xd();const i={sql:"",displaySQL:"(1=1)"};if(!e||!t)return i;const a=t.getSchema().fields,s=Xy(t.url),u=((null==(l=null===(o=(n=t).getLayerDefinition)||void 0===o?void 0:o.call(n))?void 0:l.version)||(null==l?void 0:l.currentVersion))>=10.2&&(null==l?void 0:l.useStandardizedQueries);var l;const c=function e(t){if(!t.parts)return i;const n=t.logicalOperator?t.logicalOperator:Zv.And,o=[],l=[];t.parts.forEach((function(t){var n,i,c,d,p,f,h,g,m,v;if(t.type===oy.Set){const r=e(t);o.push("("+r.sql+")"),l.push("( "+r.displaySQL+" )")}else{const e=t;let y=!1;const b=uy[ly(e.operator)];let S=ry.MultipleSelectFromPredefined===e.valueOptions.sourceType&&[ty.StringOperatorStartsWith,ty.StringOperatorDoesNotStartWith,ty.StringOperatorEndsWith,ty.StringOperatorDoesNotEndWith,ty.StringOperatorContains,ty.StringOperatorDoesNotContain].includes(e.operator),w="",I="",E=e.valueOptions.value?e.valueOptions.value.asMutable({deep:!0}):null;const O=a[e.jimuFieldName],C=O?O.type:null;if(!C)return;const T={fieldAlias:O.alias||O.name,value:"?",endValue:"?"};if(C===ji.Date&&e.valueOptions.sourceType!==ry.Field){let t=!1,a=!1,s=e.valueOptions.inputEditor;if(null===E){if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";o.push("("+O.name+" IS "+t+"NULL)")}"SIMPLE_SELECT"===s?(null===(n=O.format)||void 0===n?void 0:n.dateFormat)&&O.format.dateFormat.includes("Time")&&(t=!0):t=s.includes("TIME")}else if("NUMBER_LIST_SELECTOR"===s&&null===E[0].value)T.endValue=r.formatMessage({id:E[0].label.toLowerCase()});else{const n=u?"timestamp ":"";let l,y=null===(i=E[0])||void 0===i?void 0:i.value;if("SIMPLE_SELECT"===s){let e=Ay.Date;s="DATE_PICKER",(null===(c=O.format)||void 0===c?void 0:c.dateFormat)&&O.format.dateFormat.includes("Time")&&(t=!0,s="DATE_TIME_PICKER",e=O.format.dateFormat.includes("ShortTime")?Ay.DateTimeShort:Ay.DateTimeLong),T.value=Ty(new Date(y),s,null===(d=O.format)||void 0===d?void 0:d.dateFormat,r),y=xy(y,e),l=y}else if("NUMBER_LIST_SELECTOR"===s)y=null,T.value=E[0].value,T.endValue=r.formatMessage({id:E[0].label.toLowerCase()});else{const e=null===(p=E[1])||void 0===p?void 0:p.value;if(null===E[0])y=null;else if("string"==typeof y){a=!0,T.value=r.formatMessage({id:gy(E[0].value)});const t=dy(y,r);y=xy(t[0]||t,Ay.Date),void 0!==t.length?l=xy(t[1],Ay.Date):e||(l=y,s="DATE_PICKER")}else t=s.includes("TIME"),T.value=Cy(new Date(y),s,null===(f=O.format)||void 0===f?void 0:f.dateFormat,r),l=y;if(null===E[1])a=!1,l=null;else if(e){let t;if(a=!1,"string"==typeof e){t=r.formatMessage({id:gy(E[1].value)});const n=dy(e,r);l=xy(n[0]||n,Ay.Date),s="DATE_PICKER"}else t=Cy(new Date(e),s,null===(h=O.format)||void 0===h?void 0:h.dateFormat,r),l=e;T.endValue=t}}const b=y?n+"'"+wy(y)+"'":null,S=l?n+"'"+function(e,t,r){let n;return"number"==typeof e&&(e=new Date(e)),"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t||"DATE_RANGE_SELECTOR"===t?n=new Date(e.getTime()+Sy):"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(n=r&&r.includes("LongTime")?new Date(e.getTime()+1e3):function(e){return new Date(e.getTime()+6e4)}(e)),wy(n)}(l,s,null===(g=O.format)||void 0===g?void 0:g.dateFormat)+"'":null;switch(e.operator){case ty.DateOperatorIsOn:w=O.name+" BETWEEN "+b+" AND "+S+" AND ("+O.name+" <> "+S+")";break;case ty.DateOperatorIsNotOn:w=O.name+" < "+b+" OR "+O.name+" >= "+S;break;case ty.DateOperatorIsBefore:w=O.name+" < "+b;break;case ty.DateOperatorIsAfter:w=O.name+" >= "+S;break;case ty.DateOperatorIsOnOrBefore:w=O.name+" < "+S;break;case ty.DateOperatorIsOnOrAfter:w=O.name+" >= "+b;break;case ty.DateOperatorIsInTheLast:w=O.name+" BETWEEN CURRENT_TIMESTAMP - "+hy(E[0].value,null===(m=E[0])||void 0===m?void 0:m.label)+" AND CURRENT_TIMESTAMP";break;case ty.DateOperatorIsNotInTheLast:w=O.name+" NOT BETWEEN CURRENT_TIMESTAMP - "+hy(E[0].value,null===(v=E[0])||void 0===v?void 0:v.label)+" AND CURRENT_TIMESTAMP";break;case ty.DateOperatorIsBetween:case ty.DateOperatorIsIn:w=b&&S?"("+O.name+" BETWEEN "+b+" AND "+S+") AND ("+O.name+" <> "+S+")":"";break;case ty.DateOperatorIsNotBetween:case ty.DateOperatorIsNotIn:w=b&&S?"("+O.name+" < "+b+") OR ("+O.name+" >= "+S+")":""}""!==w&&o.push("("+w+")")}return I=cy(e.operator,r,T,t,a),void l.push("("+I+")")}let A=[];const x=[],D=[ry.SingleSelectFromPredefined,ry.MultipleSelectFromPredefined].includes(e.valueOptions.sourceType);if(D&&E&&(E=E.filter((e=>e.selected)),E=E.length>0?E:null),null===E)"IN"===b.type&&(T.value="(?)");else{let t=!1;for(let r=0;r<E.length;r++){null!==E[r]&&E[r].value!==ny||(t=!0,E[r]={value:null,label:"?",alias:"?"});let n=E[r].value,o=D?E[r].alias:E[r].label;if(e.valueOptions.sourceType===ry.Field){const e=a[n];o=e.alias?e.alias:e.name}else C===ji.String&&(n=null!==n?vy(n):null,y=!(s||e.caseSensitive)),o=vy(o),b.mod&&"IN"!==b.type&&(n=null!==n?yy(b.mod,[n]):null),C===ji.String&&null!==n&&(n=(s&&by(n)?"N":"")+"'"+n+"'"),o=C===ji.String&&null!==n?"'"+o+"'":o,y&&(n=null!==n?n.toUpperCase():null,o=o.toUpperCase());null!==n&&A.push(n),x.push(o)}if(t&&(A=[]),S=S&&A.length>1,S||!b.sep&&b.mod&&"IN"===b.type){const e=function(e){const t=[];return new Array(e).fill(1).forEach(((e,r)=>{t.push("{"+r+"}")})),"("+t.join(",")+")"}(A.length);w=S?"predefined":yy(e,A),T.value=yy(e,x)}else A.forEach(((e,t)=>{t>0&&(w+=b.sep),w+=e})),T.value=x[0],T.endValue=x[1]||T.endValue}const P=O.name;if(""!==w){const t=y?"UPPER("+P+")":P;if(S){const r=e.operator.includes("_NOT_")?" AND ":" OR ",n=A.map((e=>"("+t+" "+my(b.op,e)+")")).join(r);o.push(n)}else{const e=my(b.op,w);o.push("("+t+" "+e+")")}}else if(e.operator.indexOf("BLANK")>0){const t=e.operator.indexOf("NOT")>0?"NOT ":"";o.push("("+P+" IS "+t+"NULL)"),I="Null"}I=cy(e.operator,r,T),l.push("("+I+")")}}));const c=r.formatMessage({id:n.toLowerCase()+"LowerCase"});return{sql:o.join(` ${n} `),displaySQL:l.join(` ${c} `)}}(e);return{sql:""===c.sql||"()"===c.sql?"":"("+c.sql+")",displaySQL:c.displaySQL}}function fy(e){return null}function hy(e,t){let r=e;return t===Ku.Year?r=365*e:t===Ku.Month?r=30*e:t===Ku.Week?r=7*e:t===Ku.Hour?r=e/24:t===Ku.Minute&&(r=e/1440),r=Math.round(1e6*r)/1e6,r}function gy(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function my(e,t){return e.replace("?",(function(){return t}))}function vy(e){return e.replace(/\'/g,"''")}function yy(e,t){return e.replace(/{([0-9]+)}/g,(function(e,r){return t[parseInt(r)]}))}function by(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}const Sy=864e5;function wy(e){const t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function Iy(e){const t=e.getTimezoneOffset();return(t<0?1:-1)*(t<0?Math.abs(t)/60:t/60)*60*60*1e3}function Ey(e){return e.getTime()-Iy(e)}function Oy(e){return e.getTime()+Iy(e)}function Cy(e,t,r,n){return Ty(new Date(Oy(e)),t,r,n)}function Ty(e,t,r,n){let o="";if(n){let i=el.date,a=el.time;if(r){const e=tl(r);i=e.datePattern,a=t.includes("DATE_TIME_PICKER")?e.timePattern||a:""}else"DATE_PICKER"!==t&&"DOUBLE_DATE_PICKER"!==t||(a="");o=ol(e,n,i,a)}else"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t?o=e.toLocaleDateString():"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(o=e.toLocaleDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2));return o}var Ay;function xy(e,t){return"number"!=typeof e&&"string"!=typeof e||(e=new Date(e)),e.setMilliseconds(0),t===Ay.Date?(e.setHours(0),e.setMinutes(0),e.setSeconds(0)):t===Ay.DateTimeShort&&e.setSeconds(0),Ey(e)}function Dy(e,t,r,n=!1){return{type:oy.Single,jimuFieldName:e,operator:t,valueOptions:{isValid:!0,sourceType:ry.UserInput,inputEditor:"TEXT_BOX",value:[{value:r,label:r+""}]},displayType:ay.None,caseSensitive:n}}function Py(e,t){return Ce({sql:"1=1",displaySQL:"",logicalOperator:e,parts:t})}!function(e){e.Date="DATE",e.DateTimeShort="DATE_TIME_SHORT",e.DateTimeLong="DATE_TIME_LONG"}(Ay||(Ay={}));var Ry=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const _y=["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"],ky=["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"];function Ny(e){return Ry(this,void 0,void 0,(function*(){return yield Lv(e.url,(t=>Ry(this,void 0,void 0,(function*(){const r=(null==t?void 0:t.token)?{httpMethod:"GET",params:{token:null==t?void 0:t.token}}:{httpMethod:"GET"};return e.url?yield(0,Gn.WY)(`${e.url}/${e.featureId}/attachments`,r).then((e=>Ry(this,void 0,void 0,(function*(){return yield Promise.resolve(e.attachmentInfos)})))):yield Promise.reject(null)}))),1)}))}function My(e,t){return Ry(this,void 0,void 0,(function*(){return yield Lv(t.url,(r=>Ry(this,void 0,void 0,(function*(){if(t&&t.attachmentTypes&&t.attachmentTypes.length>0){const n=[];for(let o=0;o<e.length;o++)t.attachmentTypes.includes(e[o].contentType)&&(e[o].url=`${t.url}/${t.featureId}/attachments/${e[o].id}`+((null==r?void 0:r.token)?`?token=${null==r?void 0:r.token}`:""),n.push(e[o]));return yield Promise.resolve(n)}for(let n=0;n<e.length;n++)e[n].url=`${t.url}/${t.featureId}/attachments/${e[n].id}`+((null==r?void 0:r.token)?`?token=${null==r?void 0:r.token}`:"");return yield Promise.resolve(e)}))),1)}))}function jy(e,t){let r;return _y.includes(e.type)?r=ji.Number:"esriFieldTypeDate"===e.type?r=ji.Date:ky.includes(e.type)&&(r=ji.String),r?{jimuName:e.name,name:e.name,type:r,esriType:e.type,alias:(null==t?void 0:t.label)||e.alias,format:(null==t?void 0:t.format)||("esriFieldTypeOID"===e.type?{digitSeparator:!1,places:0}:null)}:null}function Ly(e){return _y.includes(e)}function Uy(e,t){let r=null;return e&&e.length>0&&e.some((e=>e.name===t&&(r=e,!0))),r}function Fy(e,t,r){const n=r[t];let o;const i=e.typeIdField;let a;r.hasOwnProperty(i)&&(o=r[i]);const s=Uy(e.fields,t);a=null!=o?qy(e,t,o,s):Hy(e,s);const u=Vy(n,a);if(e.typeIdField===t){const n=[{value:r[t],label:u.displayValue}];u.displayValue=Yy(e,n)[0].label}return u}function $y(e,t,r){if(1===r.length)return[Fy(e,t,r[0])];const n=e.typeIdField;let o=null,i=null,a=[];const s=[];for(const u of r){const r=u,l=r[t];if(n===t)a=o||Wy(e);else{const s=Uy(e.fields,t);if(r.hasOwnProperty(n)){if(!i){i={},o=Wy(e);for(const r of o){const n=r.value;i[n]=qy(e,t,n,s)}}a=i[r[n]],a||(a=Gy(s))}else a=Hy(e,s)}const c=Vy(l,a);s.push(c)}return s}function By(e,t,r){let n=null;if(!e)return n;const o=Uy(e.fields,t);if(!o)return n;const i=r?r[e.typeIdField]:null,a=r&&null!=i;if(e.typeIdField&&e.typeIdField.toUpperCase()===t.toUpperCase()){if(n=Wy(e),a){const e=Vy(i,n);n=[{value:e.value,label:e.displayValue}]}}else n=a?qy(e,t,i,o):Hy(e,o);return n}function Wy(e){const t=function(e){let t=null;return e.typeIdField&&e.types&&e.types.length>0&&(t=[],Object.keys(e.types).forEach((r=>{t.push({value:e.types[r].id,label:e.types[r].name})}))),t}(e);return Yy(e,t)}function Gy(e){let t=null;if(!e)return t;const r=e.domain;return r&&"codedValue"===r.type&&r.codedValues&&r.codedValues.length>0&&(t=[],r.codedValues.forEach((e=>{t.push({value:e.code,label:e.name})}))),t}function Vy(e,t){let r={isCodedValueOrSubtype:!1,displayValue:e+""};return t&&t.length>0&&t.some((t=>t.value===e&&(r={isCodedValueOrSubtype:!0,displayValue:t.label},!0))),Object.assign(r,{value:e})}function qy(e,t,r,n){let o=null;return(n=n||Uy(e.fields,t))?(e.typeIdField&&e.types&&e.types.length>0?(e.types.some((i=>{if(i.id===r){if(t===e.typeIdField)o=[{value:i.id,label:i.name}];else if(i.domains&&i.domains[t]){const e=i.domains[t];"inherited"===e.type?o=Gy(n):e.codedValues&&e.codedValues.length>0&&(o=[],e.codedValues.forEach((e=>{o.push({value:e.code,label:e.name})})))}else i.domains&&(o=Gy(n));return!0}})),o||(o=Gy(n))):o=Gy(n),o):o}function zy(e,t,r){return e[t]?r===e[t]||(e[t]=e[t]+", "+r):e[t]=r,e}function Hy(e,t){let r=null;if(!t)return r;const n=t.name;let o={},i=!0;e.typeIdField&&e.types&&e.types.length>0?(Object.keys(e.types).forEach((r=>{const a=e.types[r];if(a.domains&&a.domains[n]){const e=a.domains[n];if("inherited"===e.type){if(i){i=!1;const e=Gy(t);null==e||e.forEach((e=>{o=zy(o,e.value,e.label)}))}}else e.codedValues&&e.codedValues.length>0&&e.codedValues.forEach((e=>{o=zy(o,e.code,e.name)}))}})),r||(r=Gy(t))):r=Gy(t);const a=[];for(const e in o){const r=Ly(t.type)?parseFloat(e):e;a.push({value:r,label:o[e]})}return a.length>0&&(r=a),r}function Yy(e,t){const r=function(e){let t=null,r=null;const n=Jy(e);if(n)t={},r=n.uniqueValueInfos;else{const n=e;if(n.renderer){const e=Jy(n.sourceJSON),o=n.renderer.toJson();"uniqueValue"===o.type&&e&&e.field1===o.field1?(t={},r=o.uniqueValueInfos):e&&(t={},r=e.uniqueValueInfos)}}if(r)for(let e=0;e<r.length;e++){const n=r[e];t[n.value]=n.label}return t}(e);if(r&&t)for(let e=0;e<t.length;e++){const n=t[e];r[n.value]&&(n.label=r[n.value])}return t}function Jy(e){let t=null;return e.drawingInfo&&e.drawingInfo.renderer&&"uniqueValue"===e.drawingInfo.renderer.type&&(t=e.drawingInfo.renderer),t}function Xy(e){if(!e)return!1;const t=e.includes(".arcgis.com/"),r=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return t&&r}function Ky(e){return null==e?void 0:e.replace(/\s/g,"_")}function Qy(e){var t,r;if(!e)return null;const n=null!==(r=null!==(t=e.id)&&void 0!==t?t:e.title)&&void 0!==r?r:e.name;return void 0===n?null:Ky(`${n}`)}function Zy(e){var t;if(!e)return null;const r=null!==(t=e.id)&&void 0!==t?t:e.name;return void 0===r?null:Ky(`${r}`)}function eb(e){var t;if(!e)return null;const r=null!==(t=e.name)&&void 0!==t?t:e.id;return void 0===r?null:Ky(`${r}`)}function tb(e){const t=(null==e?void 0:e.layerType)||(null==e?void 0:e.type);return t===Qi.FeatureLayer?!!e.fields:!!t&&Object.keys(Qi).some((e=>Qi[e]===t))}function rb(e){return(null==e?void 0:e.type)&&Object.values(ta).some((t=>t===e.type))}function nb(e,t,r){if(!e||t&&!r)return null;const n=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").split("/"),o=n.findIndex((e=>Object.values(Zi).some((t=>t===e))));if(-1===o)return null;const i=n.slice(0,o+1).join("/");return t?i.split("/").find((e=>e===Zi.SceneService))?`${i}/layers/${r.id}`:`${i}/${r.id}`:i}function ob(e,t,r,n){if(!e||!r||!tb(r))return null;let o;return o=r.type===Qi.GroupLayer?function(e,t,r){return e&&t?Ce({id:e,type:Ki.GroupLayer,url:nb(r,!0,t),layerId:`${t.id}`,sourceLabel:t.name}):null}(e,r,t):r.layerType===Qi.SceneLayer3DObject||r.layerType===Qi.SceneLayerPoint?function(e,t,r){return e&&t?Ce({id:e,type:Ki.SceneLayer,url:nb(r,!0,t),layerId:`${t.id}`,sourceLabel:t.name}):null}(e,r,t):function(e,t,r){return e&&t?Ce({id:e,type:Ki.FeatureLayer,url:nb(r,!0,t),layerId:`${t.id}`,geometryType:t.geometryType,sourceLabel:t.name}):null}(e,r,t),n?o.merge(n.without("id")):o}function ib(e,t,r,n){if(!e||!t||!r)return null;const o=ab(t);if(!o)return null;const i=Ce({id:e,type:o,url:nb(t,!1),sourceLabel:db(t)});return n?i.merge(n.asMutable({deep:!0})):i}function ab(e){var t;if(!cb(e))return null;const r=e.split("?")[0].split("/"),n=Object.keys(Zi).find((e=>r.some((t=>Zi[e]===t))));return null!==(t=Ki[n])&&void 0!==t?t:null}function sb(e,t,r){return Ry(this,void 0,void 0,(function*(){return yield Fv.getInstance().fetchChildLayerDefinitionsFromUrls(e).then((e=>{const t={},r={};return Object.keys(e).forEach((n=>{e[n].layerType===Qi.SceneLayer3DObject||e[n].layerType===Qi.SceneLayerPoint?r[n]=e[n]:tb(e[n])&&(t[n]=e[n])})),{sceneLayerDefinitions:r,otherSupportedLayerDefinitions:t}})).then((({sceneLayerDefinitions:e,otherSupportedLayerDefinitions:n})=>Ry(this,void 0,void 0,(function*(){return yield Promise.allSettled(Object.keys(e).map((e=>Ry(this,void 0,void 0,(function*(){var n;return yield wb(e,null===(n=e.replace(/\/$/,"").match(/\d+$/))||void 0===n?void 0:n[0],t,r).then((t=>({associatedLayerUrl:t,sceneLayerUrl:e})))}))))).then((t=>({associatedLayerUrls:t.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),sceneLayerDefinitions:e,otherSupportedLayerDefinitions:n})))})))).then((({associatedLayerUrls:e,sceneLayerDefinitions:t,otherSupportedLayerDefinitions:r})=>{const n={};return e.forEach((e=>{e.associatedLayerUrl&&(n[e.sceneLayerUrl]=t[e.sceneLayerUrl])})),Object.assign(Object.assign({},r),n)}))}))}function ub(e,t){return Ry(this,void 0,void 0,(function*(){if(!e||!t)return yield Promise.resolve({});if(lb(e)){const r=t;return r.type===Qi.GroupLayer?yield function(e,t){return Ry(this,void 0,void 0,(function*(){const r=t.subLayers||[],n=nb(e,!1);return sb(r.map((e=>`${n}/${e.id}`)))}))}(e,r):yield Promise.resolve({})}return cb(e)?yield function(e,t){return Ry(this,void 0,void 0,(function*(){const r=(null==t?void 0:t.layers)||[],n=(null==t?void 0:t.tables)||[];return sb(r.concat(n).map((t=>`${nb(e,!0,t)}`)))}))}(e,t):yield Promise.resolve({})}))}function lb(e){return!!pb(e)&&(e.split("/").find((e=>e===Zi.SceneService))?/\/layers\/\d+\/?$/.test(e):/\/\d+\/?$/.test(e))}function cb(e){return!(!pb(e)||lb(e))}function db(e){if(!pb(e))return"";const t=e.split("/"),r=t.findIndex((e=>Object.values(Zi).some((t=>t===e))))-1;return t[r]}function pb(e){if(!e||!/^(http(s)?:)?\/\//.test(e))return!1;const t=nb(e,!1),r=null==t?void 0:t.split("/");return!(!r||!Object.values(Zi).some((e=>r[r.length-1]===e)))}function fb(e){return e.sort(((e,t)=>{var r;return null===(r=null==e?void 0:e.getLabel())||void 0===r?void 0:r.localeCompare(null==t?void 0:t.getLabel())}))}function hb(e,t){return`${e}-${t}`}function gb(e,t,r,n=ra.InConfigView,o){const i={queryParams:{where:r||"(1=1)",returnGeometry:!1,outFields:[e],orderByFields:[e],returnDistinctValues:!0},queryOptions:{scope:n,widgetId:o||"advanced_select_query"}};return o&&(i.queryOptions.excludeQuery={dataSourceId:t,widgetId:o}),i}function mb(e,t,r,n=ra.InConfigView,o){return Ry(this,void 0,void 0,(function*(){if(!e)return 0;const i=t,a=gb(e.name,i.belongToDataSource.id,r,n,o);return yield i.loadCount(a.queryParams,a.queryOptions).then((e=>e))}))}function vb(e,t,r,n,o,i=ra.InConfigView,a){return Ry(this,void 0,void 0,(function*(){const s=[];let u=0;if(!e)return{list:s,reducedCount:u};const l=["undefined","nan","null",""],c=t,d=gb(e.name,t.belongToDataSource.id,o,i,a);return d.queryParams.page=1,d.queryParams.pageSize=r,yield c.load(d.queryParams,d.queryOptions).then((t=>{const r={},o={};return t.forEach((t=>{const i=t,a=i.feature.attributes[e.jimuName];if(!(a in r)&&(r[a]=!0,0===l.filter((e=>(a+"").trim().toLowerCase()===e)).length)){const t=i.getFormattedFieldValue(e.jimuName,n);e.type===ji.Date?(t in o||s.push({value:a,label:t}),o[t]=!0):s.push({value:a,label:t})}})),u=t.length-s.length,{list:s,reducedCount:u}}))}))}function yb(e){var t;let r=null===(t=e)||void 0===t?void 0:t.url;return r?(r=null!==e.layerId&&void 0!==e.layerId?e.type===ta.SceneLayer?e.url+"/layers/"+e.layerId:e.url+"/"+e.layerId:e.url,r=r.replace(/^http:/,"https:"),r):null}function bb(e,t){const r=vg.getInstance();let n;return n=t?e.dataViewId?r.getLocalDataSourceId(r.getDataViewDataSourceId(e.mainDataSourceId,e.dataViewId),t):r.getLocalDataSourceId(e.mainDataSourceId,t):e.dataSourceId,n}function Sb(e,t,r,n){return Ry(this,void 0,void 0,(function*(){return yield wb(e,t,r,n).then((e=>Ry(this,void 0,void 0,(function*(){return e?yield Fv.getInstance().fetchServiceInfo(e).then((e=>e.definition)).then((t=>t?{def:t,url:e}:null)):yield Promise.resolve(null)}))))}))}function wb(e,t,r,n){return Ry(this,void 0,void 0,(function*(){return e||r?r?yield Eb(r,n).then((r=>Ry(this,void 0,void 0,(function*(){if(!r)return yield Ob(Ib(e),e,t);const n=Ab();let o=r.url;return n&&(o=Cb(o)||o),yield Ob(o,e,t)})))):yield Ob(Ib(e),e,t):yield Promise.resolve(null)}))}function Ib(e){let t=nb(e,!1);const r=Ab();r&&(t=Tb(t));let n=t.replace(`/${Zi.SceneService}`,`/${Zi.FeatureService}`);return r&&(n=Cb(n)||n),n}function Eb(e,t){return Ry(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve(null);const r={id:e,relationshipType:"Service2Service",direction:"reverse",authentication:Xm.getInstance().getSessionByUrl(t)};return yield(0,Km.oO)(r).then((e=>{var t;return(null===(t=null==e?void 0:e.relatedItems)||void 0===t?void 0:t.find((e=>e.type===ea.FeatureService)))||null}))}))}function Ob(e,t,r){return Ry(this,void 0,void 0,(function*(){const n=nb(t,!1),o=nb(e,!1);return yield Promise.all([Fv.getInstance().fetchServiceInfo(n),Fv.getInstance().fetchServiceInfo(o)]).then((e=>{var t,n;const i=null===(t=e[0].definition)||void 0===t?void 0:t.layers,a=null===(n=e[1].definition)||void 0===n?void 0:n.layers;if(!Array.isArray(a))return null;const s=parseInt(r);if(Array.isArray(i)){for(let e=0;e<Math.min(i.length,a.length);e++)if(i[e].id===s)return`${o}/${a[e].id}`}else if(s<a.length)return`${o}/${a[s].id}`;return null})).catch((e=>(console.error("Can not find associated feature layer, ",t),null)))}))}function Cb(e){var t,r,n;const o=null===(r=null===(t=tg().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.appProxies;if(!e||!o)return null;const i=null===(n=Object.values(o).find((t=>t.sourceUrl===nb(e,!1))))||void 0===n?void 0:n.proxyUrl;if(i){let t=i;const r=e.split("/").filter((e=>e)),n=parseInt(r[r.length-1]);return isNaN(n)||(t=`${t}/${n}`),t}return null}function Tb(e){var t,r,n;const o=null===(r=null===(t=tg().getState())||void 0===t?void 0:t.appConfig)||void 0===r?void 0:r.appProxies;if(!e||!o)return e;const i=null===(n=Object.values(o).find((t=>t.proxyUrl===nb(e,!1))))||void 0===n?void 0:n.sourceUrl;if(i){let t=i;const r=e.split("/").filter((e=>e)),n=parseInt(r[r.length-1]);return isNaN(n)||(t=`${t}/${n}`),t}return e}function Ab(){var e,t;return!(null===(t=null===(e=tg().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.isInBuilder)}function xb(e){var t,r,n;return(null===(t=e)||void 0===t?void 0:t.layer)||(null===(r=e)||void 0===r?void 0:r.layerDefinition)||(null===(n=e)||void 0===n?void 0:n.serviceDefinition)}function Db(e,t,r){return Ry(this,void 0,void 0,(function*(){const n=null==r?void 0:r.getDataSourceJson();let o=null==e?void 0:e.name;return t?o=t.title||o:(null==n?void 0:n.itemId)&&!r.parentDataSource&&(o=yield Lv(n.portalUrl,(e=>Ry(this,void 0,void 0,(function*(){return yield(0,Km.rV)(n.itemId,{portal:ff(n.portalUrl),authentication:e}).then((e=>e.title||o)).catch((e=>(console.warn("Can not get item info. ",e,n.itemId,n.portalUrl),o)))}))))),o}))}function Pb(e){return"esri.layers.support.Sublayer"===(null==e?void 0:e.declaredClass)?e.layer:null}function Rb(e,t){return 0===(null==t?void 0:t.indexOf(e))&&(null==t?void 0:t.split("-").length)-1===(null==e?void 0:e.split("-").length)}function _b(e){return(null==e?void 0:e.split("-").reverse()[0])===_u}function kb(e){return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportSymbol():!(e.getDataSourceJson().isDataInDataSourceInstance||!e.layer))}function Nb(e){var t,r;return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportAttachment():null===(r=null===(t=e.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===r?void 0:r.supportsQueryAttachments)}function Mb(e){var t,r,n,o;if(!e)return null;if(e.getDataSourceJson().isOutputFromWidget){if(1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];if((null==t?void 0:t.type)===Ki.FeatureLayer||(null==t?void 0:t.type)===Ki.SceneLayer){const i=null===(r=t)||void 0===r?void 0:r.getLayerDefinition();if(i&&(null===(n=e.getDataSourceJson().schema)||void 0===n?void 0:n.fields)){const t=Object.values(e.getDataSourceJson().schema.fields),r=null===(o=i.fields)||void 0===o?void 0:o.filter((e=>t.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.name)))));return Object.assign(Object.assign({},i),{fields:r,geometryType:null,typeIdField:null})}return i}}}else{if(e.id===e.getMainDataSource().id)return e.layerDefinition;if(e.isDataView||e.isLocal)return e.getMainDataSource().getLayerDefinition()}return null}const jb=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route\w*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/sentinel\w*\.arcgis\.com/i,/oceans\w*\.arcgis\.com/i,/tiledbasemaps\w*\.arcgis\.com/i],Lb=[/traffic\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i];function Ub(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription")}(e):function(e){return e&&jb.some((t=>t.test(e)))}(t)}function Fb(e,t){return e?function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits")}(e):function(e){return e&&Lb.some((t=>t.test(e)))}(t)}function $b(e){return Ry(this,void 0,void 0,(function*(){return e&&(e.itemId||e.url)?e.itemId?yield Lv(e.portalUrl,(t=>Ry(this,void 0,void 0,(function*(){return yield(0,Km.rV)(e.itemId,{portal:ff(e.portalUrl),authentication:t}).then((t=>Ub(t,e.url))).catch((e=>Ry(this,void 0,void 0,(function*(){return console.error("Faield to check whether data source is subscriber.",e),yield Promise.resolve(!1)}))))})))):yield Promise.resolve(Ub(null,e.url)):yield Promise.resolve(!1)}))}function Bb(e){return Ry(this,void 0,void 0,(function*(){return e&&(e.itemId||e.url)?e.itemId?yield Lv(e.portalUrl,(t=>Ry(this,void 0,void 0,(function*(){return yield(0,Km.rV)(e.itemId,{portal:ff(e.portalUrl),authentication:t}).then((t=>Ub(t,e.url)||Fb(t,e.url))).catch((e=>Ry(this,void 0,void 0,(function*(){return console.error("Faield to check whether data source is subscriber.",e),yield Promise.resolve(!1)}))))})))):yield Promise.resolve(Ub(null,e.url)||Fb(null,e.url)):yield Promise.resolve(!1)}))}function Wb(e){return Ry(this,void 0,void 0,(function*(){return e&&(e.itemId||e.url)?e.itemId?yield Lv(e.portalUrl,(t=>Ry(this,void 0,void 0,(function*(){return yield(0,Km.rV)(e.itemId,{portal:ff(e.portalUrl),authentication:t}).then((t=>Fb(t,e.url))).catch((e=>Ry(this,void 0,void 0,(function*(){return console.error("Faield to check whether data source is premium.",e),yield Promise.resolve(!1)}))))})))):yield Promise.resolve(Fb(null,e.url)):yield Promise.resolve(!1)}))}function Gb(e){var t;return Ry(this,void 0,void 0,(function*(){if(e.dataViewId===_u&&0===e.getSourceRecords().length){const t=e.getMainDataSource().getDataView(ku);if(t)return yield Gb(t)}let r=null;try{if((null==e?void 0:e.type)===Ki.FeatureLayer||(null==e?void 0:e.type)===Ki.SceneLayer){const t=e;if(t.getDataSourceJson().isDataInDataSourceInstance){if(t.getSourceRecords().length>0){const e=t.getSourceRecords();r=yield Wv(t,e).then((e=>null==e?void 0:e.layer))}}else if(t.itemId&&!t.url)r=yield Vb(t);else if(t.itemId||t.url){const e=t.type===Ki.FeatureLayer?Nv(["esri/layers/FeatureLayer"]):Nv(["esri/layers/SceneLayer"]),n=t.layerId?+t.layerId:NaN;r=yield e.then((e=>Ry(this,void 0,void 0,(function*(){const r=e[0];return t.itemId?new r(Object.assign(Object.assign({},t.url?{url:t.url}:{}),{portalItem:{id:t.itemId,portal:{url:t.portalUrl}},layerId:isNaN(n)?void 0:n})):new r({url:t.url})}))))}else if(t.layer){const e=Nv(["esri/layers/FeatureLayer"]);r=yield e.then((e=>{var r;return new(0,e[0])({fields:[...t.layer.fields],objectIdField:t.layer.objectIdField,source:(null===(r=t.layer.source)||void 0===r?void 0:r.toArray())||[],geometryType:t.layer.geometryType,spatialReference:t.layer.spatialReference,popupTemplate:t.layer.popupTemplate,renderer:t.layer.renderer,title:t.layer.title})}))}}}catch(e){console.error("Failed to create JS API layer by data source. ",e)}return r&&(null==e?void 0:e.url)&&(r.url=e.url),r&&(r.definitionExpression=null===(t=null==e?void 0:e.getCurrentQueryParams())||void 0===t?void 0:t.where,r.type===ta.FeatureLayer&&(r.gdbVersion=null==e?void 0:e.getGDBVersion())),r}))}function Vb(e){return Ry(this,void 0,void 0,(function*(){return(null==e?void 0:e.itemId)&&(null==e?void 0:e.portalUrl)?yield Nv(["esri/layers/Layer","esri/portal/PortalItem"]).then((t=>Ry(this,void 0,void 0,(function*(){const r=t[0],n=t[1];return yield r.fromPortalItem({portalItem:new n({id:e.itemId,portal:{url:e.portalUrl}})}).then((t=>Ry(this,void 0,void 0,(function*(){return(null==t?void 0:t.type)===ta.FeatureLayer?yield Promise.resolve(t):(null==t?void 0:t.type)===ta.GroupLayer?yield t.loadAll().then((t=>Ry(this,void 0,void 0,(function*(){const r=t.layers.toArray().find((r=>`${r.layerId}`===e.layerId||Ky(t.title)===Ky(this.getMainDataSource().getLabel())));return(null==r?void 0:r.type)===ta.FeatureLayer?Promise.resolve(r):Promise.reject("Feaure layer data source error: failed to create feature layer with specific layer id.")})))):void 0}))))})))):yield Promise.resolve(null)}))}var qb,zb=qb||(qb={});zb.Pop="POP",zb.Push="PUSH",zb.Replace="REPLACE";function Hb(e){e.preventDefault(),e.returnValue=""}function Yb(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}const Jb=[/\.arcgis\.com$/];var Xb,Kb;function Qb(e){if(!window||!window.parent||window.parent===window)return;const t=window.parent;try{if(t.jimuConfig&&t.jimuConfig.isBuilder)return}catch(e){}t.postMessage(e,window.location.origin)}function Zb(e,t){if(!window||!window.addEventListener)return;const r=function(e,t){return function(r){if(!function(e){var t;return(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.origin)===e||Jb.some((t=>t.test(e)))}(r.origin))return;if(!r.data)return;if(!Object.keys(Kb).map((e=>Kb[e])).includes(r.data.type))return;const n=r.data;n.type===e&&t(n)}}(e,t);return window.addEventListener("message",r,!1),r}!function(e){e.JimuPageChanged="JIMU_PAGE_CHANGED",e.JimuQueryChanged="JIMU_QUERY_CHANGED"}(Xb||(Xb={})),function(e){e.ChangePage="CHANGE_PAGE",e.ChangeQuery="CHANGE_QUERY"}(Kb||(Kb={}));const eS=document&&function(e){function t(){var e=a.location,t=s.state||{};return[t.idx,{pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"}]}function r(e){return"string"==typeof e?e:function(e){var t=e.pathname,r=e.search;return(void 0===t?"/":t)+(void 0===r?"":r)+(void 0===(e=e.hash)?"":e)}(e)}function n(e,t){return void 0===t&&(t=null),N({},d,"string"==typeof e?function(e){var t={};if(e){var r=e.indexOf("#");0<=r&&(t.hash=e.substr(r),e=e.substr(0,r)),0<=(r=e.indexOf("?"))&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function o(e){l=e,e=t(),c=e[0],d=e[1],p.call({action:l,location:d})}function i(e){s.go(e)}void 0===e&&(e={});var a=void 0===(e=e.window)?document.defaultView:e,s=a.history,u=null;a.addEventListener("popstate",(function(){if(u)f.call(u),u=null;else{var e=qb.Pop,r=t(),n=r[0];if(r=r[1],f.length){if(null!=n){var a=c-n;a&&(u={action:e,location:r,retry:function(){i(-1*a)}},i(a))}}else o(e)}}));var l=qb.Pop,c=(e=t())[0],d=e[1],p=Yb(),f=Yb();return null==c&&(c=0,s.replaceState(N({},s.state,{idx:c}),"")),{get action(){return l},get location(){return d},createHref:r,push:function e(t,i){var u=qb.Push,l=n(t,i);if(!f.length||(f.call({action:u,location:l,retry:function(){e(t,i)}}),0)){var d=[{usr:l.state,key:l.key,idx:c+1},r(l)];l=d[0],d=d[1];try{s.pushState(l,"",d)}catch(e){a.location.assign(d)}o(u)}},replace:function e(t,i){var a=qb.Replace,u=n(t,i);f.length&&(f.call({action:a,location:u,retry:function(){e(t,i)}}),1)||(u=[{usr:u.state,key:u.key,idx:c},r(u)],s.replaceState(u[0],"",u[1]),o(a))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(e){return p.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&a.addEventListener("beforeunload",Hb),function(){t(),f.length||a.removeEventListener("beforeunload",Hb)}}}}();Zb(Kb.ChangePage,(e=>{aS(e.pageId)})),Zb(Kb.ChangeQuery,(e=>{oS(e.queryObject)})),eS&&eS.listen((({action:e,location:t})=>{const r=tg().getState().queryObject.asMutable();if(t.pathname!==tg().getState().appPath){tg().dispatch(Ig(t.pathname));n=ih(t.pathname,tg().getState().appConfig).pageId,Qb({type:Xb.JimuPageChanged,pageId:n})}var n;const o=Ee.parse(t.search);var i;Cu(r,o)||(tg().dispatch(Mg(o)),i=o,Qb({type:Xb.JimuQueryChanged,queryObject:i}))}));const tS=C.createContext(eS),rS=e=>C.createElement(tS.Provider,{value:eS},e.children);function nS(e){class t extends C.PureComponent{render(){return C.createElement(tS.Consumer,null,(t=>C.createElement(e,Object.assign({},this.props,{history:t}))))}}return t.displayName=`HistoryComponent(${e.displayName})`,t}function oS(e,t=!1,r=!1){if(Cu(e,tg().getState().queryObject))return;let n=r?Ce(e):tg().getState().queryObject.merge(e);n=n.without.apply(n,Object.keys(n).filter((e=>null===n[e])));const o=vh(eS.location,"?"+Ee.stringify(n));t?eS.replace(o):eS.push(o)}function iS(e,t=!1){const r=vh(eS.location,"?"+Ee.stringify(e));t?eS.replace(r):eS.push(r)}function aS(e){ih(window.location.pathname,tg().getState().appConfig).pageId!==e&&eS.push(fh(e,tg().getState().queryObject))}function sS(e,t){const r=tg().getState();let n=r.queryObject.views?r.queryObject.views.split(","):[];n=n.map((e=>sh(e,r.appConfig)));const o=n.length,i=Object.keys(r.appConfig.views);n=n.filter((e=>i.includes(e)));const a=n.length;if(n.includes(t)){if(o===a)return;return oS({views:n.map((e=>r.appConfig.views[e].label)).join(",")})}return n=n.filter((t=>!r.appConfig.sections[e].views.includes(t))),n.push(t),oS({views:n.map((e=>dh(r.appConfig.views[e].label))).join(",")})}function uS(e){return oS({dlg:e})}function lS(e,t){var r;const n=function(e,t){return 0===(t=t.filter((e=>!!e))).length?null:1===t.length?`${e}:${t[0]}`:`${e}:${t.join("+")}`}(e,t),o=dS(e,(null===(r=tg().getState().queryObject.data_id)||void 0===r?void 0:r.split(","))||[],n);oS({data_id:o.length>0?o.join(","):null},!0)}function cS(e,t){var r;const n=`${e}:${t}`,o=dS(e,(null===(r=tg().getState().queryObject.data_version)||void 0===r?void 0:r.split(","))||[],n);oS({data_version:o.length>0?o.join(","):null},!0)}function dS(e,t,r){const n=[];let o=!1;return t.forEach((t=>{t.split(":")[0]===e?r&&(n.push(r),o=!0):n.push(t)})),!o&&r&&n.push(r),n}var pS,fS,hS,gS;(gS=pS||(pS={})).String="STRING",gS.Number="NUMBER",gS.Field="FIELD",gS.Function="FUNCTION",gS.Operator="OPERATOR",gS.Unknown="UNKNOWN",function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN"}(fS||(fS={})),function(e){e.Count="count",e.Sum="sum",e.Min="min",e.Max="max",e.Avg="avg"}(hS||(hS={}));const mS="esriFieldTypeOID";var vS,yS=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function bS(e,t,r){return yS(this,void 0,void 0,(function*(){if(!e||0===e.length)return yield Promise.reject(vS.ParamNumber);const n=e.filter((e=>e.type!==pS.Operator&&e.type!==pS.Unknown));if(0===n.length)return Promise.reject(vS.ParamNumber);if(1===n.length&&LS(n)){const e=function(e){return!!(e&&e.length>0&&e.some((e=>e.type===pS.Field&&function(e){if(!e)return!0;const t=e.dataSourceId,r=vg.getInstance().getDataSource(t);return(null==r?void 0:r.dataViewId)===_u}(e))))}(n),o=function(e){return!!(e&&e.length>0&&e.some((e=>e.isFromRepeatedDataSourceContext)))}(n);return e?function(e,t){var r;return yS(this,void 0,void 0,(function*(){let n=vg.getInstance().getDataSource(e.dataSourceId);if((null==n?void 0:n.isDataView)&&n.dataViewId===_u&&0===(null===(r=n.getRecords())||void 0===r?void 0:r.length)&&(n=n.getMainDataSource().getDataView(ku)||n),!n)return Promise.reject(vS.NeedDataSource);if(!_b(null==e?void 0:e.dataSourceId))return SS([Object.assign(Object.assign({},e),{dataSourceId:n.id})],t);const o=n&&n.getSchema(),i=e.jimuFieldName,a=o&&o.fields&&o.fields[i];if(t===fS.Count&&!a||t!==fS.Count&&(null==a?void 0:a.type)!==ji.Number)return Promise.reject(vS.ParamType);const s=n.getRecords();if(!s||0===s.length)return Promise.reject(vS.NeedRecord);const u=s.map((e=>e.getData()[i]||0));return Promise.resolve(CS(u,t,!1))}))}(n[0],t):o?function(e,t,r){return yS(this,void 0,void 0,(function*(){if(!e||e.type!==pS.Field)return yield Promise.reject(vS.ParamType);if(t===fS.Count)return yield Promise.resolve(1);{const t=xS(e,r);if(!t)return yield Promise.reject(vS.NeedRecord);const n=RS(e.jimuFieldName,t,!1);return"number"==typeof n?yield Promise.resolve(n):yield Promise.reject(vS.ParamType)}}))}(n[0],t,r):SS(n,t)}return Promise.reject(vS.ParamNumber)}))}function SS(e,t){return yS(this,void 0,void 0,(function*(){if(!e||0===e.length)return yield Promise.reject(vS.ParamNumber);const r=e.filter((e=>e.type!==pS.Operator&&e.type!==pS.Unknown));if(r.length>0&&(t===fS.Count?function(e){return!!e&&e.every((e=>{if(e.type===pS.Field&&e.jimuFieldName&&e.dataSourceId){const t=vg.getInstance().getDataSource(e.dataSourceId),r=t&&t.getSchema();return!!(r&&r.fields&&r.fields[e.jimuFieldName])}return!1}))}(r):ES(r)))return Promise.all(r.map((e=>yS(this,void 0,void 0,(function*(){return yield function(e,t){return yS(this,void 0,void 0,(function*(){if(!e||!t)return Promise.resolve(null);const r=vg.getInstance().getDataSource(e.dataSourceId),n=function(e,t){return`EXPRESSION_RESOLVER-${t}-${e.jimuFieldName}`}(e,t),o=vg.getInstance().createLocalDataSource(r,n);if(r&&r.load){const i=function(e,t){if(!e)return null;const r=vg.getInstance().getDataSource(e.dataSourceId),n=r&&r.getSchema(),o=n&&n.fields&&n.fields[e.jimuFieldName];if(t===fS.Count&&(null==o?void 0:o.name)!==r.getIdField())return{returnGeometry:!1,returnDistinctValues:!0,returnCountOnly:!0,outFields:[`${null==o?void 0:o.name}`],where:"1=1",orderByFields:void 0,returnIdsOnly:!1};{const e=function(e,t){return`${t||"objectId"}_${e}`}(t,o&&o.jimuName);return{returnGeometry:!1,where:"1=1",outStatistics:[{onStatisticField:o&&o.name,outStatisticFieldName:e,statisticType:IS(t)}]}}}(e,t);return(i.returnCountOnly?o.loadCount(i,{widgetId:n}):o.load(i,{widgetId:n})).then((e=>{var n,o,i,a,s;let u;if("number"==typeof e)u=[e];else{const t=e,r=t&&t[0]&&t[0].getData()||{};u=Object.keys(r).map(((e,t)=>r[e]))}if(t===fS.Count){const e=r.isDataView?(null===(o=null===(n=r.getMainDataSource())||void 0===n?void 0:n.getDataSourceJson())||void 0===o?void 0:o.dataViews)&&(null===(i=r.getMainDataSource().getDataSourceJson().dataViews[r.dataViewId])||void 0===i?void 0:i.maximum):null===(s=null===(a=r.getDataSourceJson())||void 0===a?void 0:a.query)||void 0===s?void 0:s.maximum;"number"==typeof e&&(u[0]=Math.min(u[0],e))}return CS(u,t,!0)}))}return Promise.reject(vS.NeedDataSource)}))}(e,t)}))))).then((e=>{const r=e.length>0?CS(e,t,!0):null;if(null!==r)return r;throw new Error(vS.ParamType)}));if(!(r.length>0&&OS(r))){if(r.length>0&&r.every((e=>OS([e])||ES([e])))){const e=r.filter((e=>OS([e])));return SS(r.filter((e=>ES([e]))),t).then((r=>yS(this,void 0,void 0,(function*(){return yield SS(e.concat({type:pS.Number,exp:`${r}`}),t)}))))}return yield Promise.reject(vS.ParamType)}switch(t){case fS.Average:return Promise.resolve(TS(r)/r.length);case fS.Sum:return Promise.resolve(TS(r));case fS.Count:return Promise.resolve(r.length);case fS.Max:return Promise.resolve(function(e){const t=e.map((e=>parseFloat(e.exp)));return t.length>0&&t.every((e=>wS(e)))?Math.max.apply(null,t):0}(r));case fS.Min:return Promise.resolve(function(e){const t=e.map((e=>parseFloat(e.exp)));return t.length>0&&t.every((e=>wS(e)))?Math.min.apply(null,t):0}(r));default:return Promise.reject(vS.FuncType)}}))}function wS(e){return!isNaN(parseFloat(e))&&isFinite(e)&&"[object Number]"===Object.prototype.toString.call(e)}function IS(e){switch(e){case fS.Average:return hS.Avg;case fS.Count:return hS.Count;case fS.Sum:return hS.Sum;case fS.Max:return hS.Max;case fS.Min:return hS.Min;default:return null}}function ES(e){return!!e&&e.every((e=>{if(e.type===pS.Field&&e.jimuFieldName&&e.dataSourceId){const t=vg.getInstance().getDataSource(e.dataSourceId),r=t&&t.getSchema(),n=r&&r.fields&&r.fields[e.jimuFieldName];return n&&n.type===ji.Number}return!1}))}function OS(e){return!!e&&e.every((e=>e.type===pS.Number))}function CS(e,t,r){if(!e||0===e.length||t!==fS.Count&&e.some((e=>!wS(e))))return 0;switch(t){case fS.Average:return e.reduce(((e,t)=>e+t),0)/e.length;case fS.Sum:return e.reduce(((e,t)=>e+t),0);case fS.Count:return r?e[0]:Array.from(new Set(e)).length;case fS.Max:return Math.max.apply(null,e);case fS.Min:return Math.min.apply(null,e);default:return 0}}function TS(e){const t=e.map((e=>parseFloat(e.exp)));return t.length>0&&t.every((e=>wS(e)))?t.reduce(((e,t)=>e+t),0):0}function AS(e){let t=[];const r=[];return e&&e.forEach(((n,o)=>{if(n&&!r.some((e=>e===o)))if(n.type!==pS.Function)t=t.concat(n);else if(r.push(o),e[o+1]&&e[o+1].type===pS.Operator&&"("===e[o+1].exp){const i=e.slice(o+2);let a=0,s=0;for(let e=0;e<i.length;e++){if(0===s&&i[e].type===pS.Operator&&")"===i[e].exp){a=e;break}s>0&&i[e].type===pS.Operator&&")"===i[e].exp?s--:i[e].type===pS.Operator&&"("===i[e].exp&&s++}const u=a+o+2;if(u>=o+2){const i=e.slice(o+2,u);for(let e=o+1;e<=u;e++)r.push(e);t=t.concat(Object.assign(Object.assign({},n),{parts:AS(i)}))}else console.warn("Can not martch parentheses")}else t=t.concat(n)})),t}function xS(e,t){var r,n;let o;const i=_b(null==e?void 0:e.dataSourceId);if(e.isFromRepeatedDataSourceContext)o=Array.isArray(t)?null===(r=t[0])||void 0===r?void 0:r.record:null===(n=t)||void 0===n?void 0:n.record;else if(i){const t=vg.getInstance().getDataSource(e.dataSourceId);if(o=null==t?void 0:t.getRecords()[0],!o){const e=null==t?void 0:t.getMainDataSource().getDataView(ku);o=null==e?void 0:e.getRecords()[0]}}else{const t=vg.getInstance().getDataSource(e.dataSourceId);o=null==t?void 0:t.getRecords()[0]}return o}function DS(e,t){return yS(this,void 0,void 0,(function*(){return e.exp===fS.Average?yield function(e,t){return r=this,n=void 0,i=function*(){return yield bS(e,fS.Average,t)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}(e.parts,t):e.exp===fS.Count?yield function(e,t,r){return n=this,o=void 0,a=function*(){let n=null;const o=vg.getInstance().getDataSource(t);if(e&&0!==e.length)n=e;else if(o){const e=o&&o.getSchema(),r=e&&e.fields&&Object.keys(e.fields).find((t=>e.fields[t].esriType===mS)),i=e&&e.fields&&e.fields[r];if(i)n=[{type:pS.Field,jimuFieldName:i.jimuName,dataSourceId:t,exp:`{${i.alias||i.name}}`}];else if(e&&e.fields&&Object.keys(e.fields).length>0){const r=Object.keys(e.fields)[0],o=e.fields[r];o&&(n=[{type:pS.Field,jimuFieldName:o.jimuName,dataSourceId:t,exp:`{${o.alias||o.name}}`}])}}return n?bS(n,fS.Count,r):Promise.reject(vS.ParamNumber)},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,s)}u((a=a.apply(n,o||[])).next())}));var n,o,i,a}(e.parts,e.dataSourceId,t):e.exp===fS.Sum?yield function(e,t){return r=this,n=void 0,i=function*(){return yield bS(e,fS.Sum,t)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}(e.parts,t):e.exp===fS.Max?yield function(e,t){return r=this,n=void 0,i=function*(){return yield bS(e,fS.Max,t)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}(e.parts,t):e.exp===fS.Min?yield function(e,t){return r=this,n=void 0,i=function*(){return yield bS(e,fS.Min,t)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}(e.parts,t):(console.warn("Unknown function: ",e),yield Promise.resolve(""))}))}function PS(e,t,r){return wS(e)?{exp:t&&r?r.formatNumber(e):e,type:pS.Number}:{exp:`"${e.replace(/^"/,"").replace(/"$/,"")}"`,type:pS.String}}function RS(e,t,r,n){let o="";if(!function(e){return!(!e||!e.getData||"function"!=typeof e.getData)}(t))return o;const i=r&&n?t.getFormattedData(n):t.getData();return i&&null!==i[e]&&void 0!==i[e]&&(o=i[e]),o}!function(e){e.ParamType="INVALID_PARAM_TYPE",e.ParamNumber="INVALID_NUMBER_OF_PARAMS",e.FuncType="INVALID_FUNCTION_TYPE",e.NeedRecord="NEED_RECORD",e.NeedDataSource="NEED_DATA_SOURCE"}(vS||(vS={}));function _S(e,t,r,n){return o=this,i=void 0,s=function*(){const o=e&&e.parts&&e.parts.slice();if(!o)return yield Promise.resolve("");const i=AS(o),a=i&&1===Object.keys(i).filter((e=>!/^\s*$/.test(i[e].exp))).length;return Promise.all(function(e,t,r,n,o){const i=(e=e||[]).map(((e,i)=>yS(this,void 0,void 0,(function*(){if(e.type===pS.Field){const t=xS(e,r);if(!t||!0===t.fake)return yield Promise.reject(vS.NeedRecord);const i=RS(e.jimuFieldName,t,n,o);return yield Promise.resolve(PS(i,n,o))}return e.type===pS.Function?yield function(e,t,r){return yS(this,void 0,void 0,(function*(){if(jS(e&&e.parts)){const n=$S(e.parts);return yield Promise.all(Object.keys(n).sort(((e,t)=>parseInt(e)-parseInt(t))).map((e=>yS(this,void 0,void 0,(function*(){return yield _S(n[e],t,r)}))))).then((e=>e.map((e=>{return PS((t=e,!isNaN(parseFloat(t))&&isFinite(t)?parseFloat(e):e),!1);var t})))).then((t=>yS(this,void 0,void 0,(function*(){return yield DS(Object.assign(Object.assign({},e),{parts:t}),r)}))))}return yield DS(e,r)}))}(e,t,r).then((e=>PS(e,n,o))):Promise.resolve(e)}))));return i}(i,t,r,a,n)).then((e=>{var t;const r=function(e){const t=[],r=[];for(e.forEach(((e,n)=>{if(e.type===pS.Number||e.type===pS.String)t.push(e);else if(e.type===pS.Operator)if("("===e.exp)r.push(e);else if(")"===e.exp){let e=r.pop();for(;"("!==e.exp;)t.push(e),e=r.pop()}else if("+"===e.exp||"-"===e.exp){for(;r.length>0&&("+"===r[r.length-1].exp||"-"===r[r.length-1].exp||"*"===r[r.length-1].exp||"/"===r[r.length-1].exp);)t.push(r.pop());r.push(e)}else if("*"===e.exp||"/"===e.exp){for(;r.length>0&&("*"===r[r.length-1].exp||"/"===r[r.length-1].exp);)t.push(r.pop());r.push(e)}}));r.length>0;)t.push(r.pop());return t}(e);return`${null!==(t=function(e,t){const r=[];return e.forEach((e=>{if(e.type===pS.Number)r.push(t?e.exp:parseFloat(e.exp));else if(e.type===pS.String)r.push(e.exp.replace(/^"/,"").replace(/"$/,""));else if(e.type===pS.Operator){const t=r.pop(),n=function(e,t,r){switch(r){case"*":return wS(e)&&wS(t)?parseFloat(e)*parseFloat(t):"";case"/":return wS(e)&&wS(t)?parseFloat(e)/parseFloat(t):"";case"-":return wS(e)&&wS(t)?parseFloat(e)-parseFloat(t):"";default:return wS(e)&&wS(t)?parseFloat(e)+parseFloat(t):`${e}${t}`}}(r.pop(),t,e.exp);r.push(n)}})),r.pop()}(r,a))&&void 0!==t?t:""}`}))},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{u(s.next(e))}catch(e){t(e)}}function n(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(r,n)}u((s=s.apply(o,i||[])).next())}));var o,i,a,s}function kS(e,t){if(!e||!e.length)return GS(t);const r={};return e.filter((e=>!!e)).forEach((e=>{if(e.dataSourceId){let n,o;const i=vg.getInstance().getDataSource(e.dataSourceId),a=i&&i.getMainDataSource(),s=a&&a.id,u=t&&s&&t.asMutable({deep:!0}).find((e=>e.mainDataSourceId===s)),l=_b(null==e?void 0:e.dataSourceId);if(l&&u?n=u.dataSourceId:l||(n=e.dataSourceId),!n)return;if(!r[n]){if(l&&u)o=Object.assign({},u),delete o.fields;else if(!l){const e=i&&i.dataViewId,t=i&&i.getRootDataSource(),r=t&&t.id;o={dataSourceId:n,fields:[]},s&&(o.mainDataSourceId=s),e&&(o.dataViewId=e),r&&(o.rootDataSourceId=r)}n&&o&&(r[n]=o)}e.jimuFieldName&&r[n]&&(r[n].fields&&r[n].fields.every((t=>t!==e.jimuFieldName))?r[n].fields=r[n].fields.concat(e.jimuFieldName):r[n].fields||(r[n].fields=[e.jimuFieldName]))}})),Ce(Object.values(r))}function NS(e=Ce([]),t=Ce([])){let r=Ce([]),n=Ce({});const o=Ce(e.concat(t)),i={};return o.forEach((e=>{i[e.dataSourceId]||(i[e.dataSourceId]=o.filter((t=>e.dataSourceId===t.dataSourceId)))})),Object.keys(i).forEach((e=>{n=Ce({}),i[e].forEach((e=>{n=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){const r=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",r)}return e.merge(t.asMutable({deep:!0}))}(n,e)})),r=Ce(r.concat(n))})),r}function MS(e){if(!e||!e.parts)return!0;const t=e.parts.filter((e=>!!e)),r=t.some((e=>e.type===pS.Unknown));if(r)return!1;const n=t.filter((e=>e.type===pS.Operator&&"("===e.exp)).length===t.filter((e=>e.type===pS.Operator&&")"===e.exp)).length;if(!n)return!1;const o=t.filter((e=>!(e.type===pS.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp))||e.type===pS.Function)));let i=!0;for(let e=0;e<o.length;e++)if((e%2==0||e===o.length-1)&&o[e].type===pS.Operator||e%2==1&&o[e].type!==pS.Operator){i=!1;break}if(!i)return!1;let a=!0;for(let e=0;e<t.length;e++)if(t[e].type===pS.Function&&!US(t[e])||t[e].type===pS.Field&&!FS(t[e].dataSourceId,t[e].jimuFieldName,t[e].exp.replace(/^\{/,"").replace(/\}$/,""))){a=!1;break}if(!a)return!1;const s=AS(t),u=!s.some((e=>e.type===pS.Operator&&","===e.exp));if(!u)return!1;const l=s.every((e=>{if(e.type===pS.Function){if(e.exp===fS.Count){if(e.parts&&1===e.parts.length&&e.parts[0].type===pS.Field){const t=vg.getInstance().getDataSource(e.parts[0].dataSourceId),r=t&&t.getSchema(),n=e.parts[0].jimuFieldName;return!!(r&&r.fields&&r.fields[n])}return!(e.parts&&0!==e.parts.length||!e.dataSourceId)}if(Object.keys(fS).some((t=>e.exp===fS[t]))){if(e.parts&&1===e.parts.length&&e.parts[0].type===pS.Field){const t=vg.getInstance().getDataSource(e.parts[0].dataSourceId),r=t&&t.getSchema(),n=e.parts[0].jimuFieldName,o=r&&r.fields&&r.fields[n];return o&&o.type===ji.Number}return!1}return!1}return!0}));return!r&&n&&i&&a&&u&&l}function jS(e){return!!(e&&e.length>1&&e.some((e=>e.type===pS.Operator&&/^[\+\-\*\/\(\)]$/.test(e.exp))))||!(!e||1!==e.length||e[0].type!==pS.Function)}function LS(e){const t=$S(e);return!!(t&&Object.keys(t).length>0&&Object.keys(t).some((e=>t[e].parts&&1===t[e].parts.length&&t[e].parts[0].type===pS.Field)))}function US(e){return!(!e||e.type!==pS.Function)&&Object.keys(fS).some((t=>fS[t]===e.exp))}function FS(e,t,r){if(!e||!t)return!1;const n=vg.getInstance().getDataSource(e),o=n&&n.getSchema&&n.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||r!==(i[t].alias||i[t].name))}function $S(e){const t={};let r,n=!0;return e.filter((e=>!/^\s*$/.test(e.exp))).forEach(((e,o)=>{e.type===pS.Operator&&","===e.exp?n=!0:(n?(r=o,t[o]={name:"default",parts:[e]}):t[r].parts=t[r].parts.concat(e),n=!1)})),t}const BS=e=>{var t,r,n;if(e)return 1===(null===(t=e.parts)||void 0===t?void 0:t.length)&&(null===(n=null===(r=e.parts)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type)===pS.String},WS=e=>{var t,r,n;return BS(e)?null===(n=null===(r=null===(t=e.parts)||void 0===t?void 0:t[0])||void 0===r?void 0:r.exp)||void 0===n?void 0:n.replace(/(^\"|\"$)/g,""):""},GS=e=>null==e?void 0:e.map((e=>null==e?void 0:e.without("fields").asMutable({deep:!0}))),VS=e=>null==e?void 0:e.some((e=>{var t;return!!(null===(t=e.fields)||void 0===t?void 0:t.length)}));function qS(){var e=C.useContext(ld);return nd(e),e}var zS,HS;!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(zS||(zS={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(HS||(HS={}));var YS=function(e){var t=qS(),r=e.value,n=e.children,o=ed(e,["value","children"]);return n(t.formatNumberToParts(r,o))};function JS(e){var t=function(t){var r=qS(),n=t.value,o=t.children,i=ed(t,["value","children"]),a="string"==typeof n?new Date(n||0):n;return o("formatDate"===e?r.formatDateToParts(a,i):r.formatTimeToParts(a,i))};return t.displayName=HS[e],t}function XS(e){var t=function(t){var r=qS(),n=t.value,o=t.children,i=ed(t,["value","children"]),a=r[e](n,i);if("function"==typeof o)return o(a);var s=r.textComponent||C.Fragment;return C.createElement(s,null,a)};return t.displayName=zS[e],t}YS.displayName="FormattedNumberParts",YS.displayName="FormattedNumberParts";var KS=XS("formatDate"),QS=XS("formatTime"),ZS=XS("formatNumber");function ew(e){var t=qS(),r=t.formatMessage,n=t.textComponent,o=void 0===n?C.Fragment:n,i=e.id,a=e.description,s=e.defaultMessage,u=e.values,l=e.children,c=e.tagName,d=void 0===c?o:c,p=r({id:i,description:a,defaultMessage:s},u,{ignoreTag:e.ignoreTag});return"function"==typeof l?l(Array.isArray(p)?p:[p]):d?C.createElement(d,null,C.Children.toArray(p)):C.createElement(C.Fragment,null,p)}XS("formatList"),XS("formatDisplayName"),JS("formatDate"),JS("formatTime"),ew.displayName="FormattedMessage";var tw=C.memo(ew,(function(e,t){var r=e.values,n=ed(e,["values"]),o=t.values,i=ed(t,["values"]);return id(o,r)&&id(n,i)}));tw.displayName="MemoizedFormattedMessage";const rw=tw;var nw=function(e){var t=qS(),r=t.formatPlural,n=t.textComponent,o=e.value,i=e.other,a=e.children,s=e[r(o,e)]||i;return"function"==typeof a?a(s):n?C.createElement(n,null,s):s};nw.defaultProps={type:"cardinal"},nw.displayName="FormattedPlural";const ow=nw;var iw=3600;function aw(e){var t=Math.abs(e);return t<60?"second":t<iw?"minute":t<86400?"hour":"day"}function sw(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return iw;default:return 86400}}var uw=["second","minute","hour"];function lw(e){return void 0===e&&(e="second"),uw.indexOf(e)>-1}var cw=function(e){var t=qS(),r=t.formatRelativeTime,n=t.textComponent,o=e.children,i=r(e.value||0,e.unit,ed(e,["children","value","unit"]));return"function"==typeof o?o(i):n?C.createElement(n,null,i):C.createElement(C.Fragment,null,i)},dw=function(e){var t=e.value,r=e.unit,n=e.updateIntervalInSeconds,o=ed(e,["value","unit","updateIntervalInSeconds"]);rd(!n||!(!n||!lw(r)),"Cannot schedule update with unit longer than hour");var i,a=C.useState(),s=a[0],u=a[1],l=C.useState(0),c=l[0],d=l[1],p=C.useState(0),f=p[0],h=p[1];r===s&&t===c||(d(t||0),u(r),h(lw(r)?function(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return e*iw}}(t,r):0)),C.useEffect((function(){function e(){clearTimeout(i)}if(e(),!n||!lw(r))return e;var t=f-n,o=aw(t);if("day"===o)return e;var a=sw(o),s=t-t%a,u=s>=f?s-a:s,l=Math.abs(u-f);return f!==u&&(i=setTimeout((function(){return h(u)}),1e3*l)),e}),[f,n,r]);var g=t||0,m=r;if(lw(r)&&"number"==typeof f&&n){var v=sw(m=aw(f));g=Math.round(f/v)}return C.createElement(cw,Zc({value:g,unit:m},o))};dw.displayName="FormattedRelativeTime",dw.defaultProps={value:0,unit:"second"};const pw=dw,fw=C.createContext(null);function hw({data:e,children:t}){return C.createElement(fw.Consumer,null,(r=>{let n=e;return r&&(n=Array.isArray(r)?r.concat(e):[r].concat(e)),C.createElement(fw.Provider,{value:n},t)}))}function gw(e){function t(t){return C.createElement(fw.Consumer,null,(r=>C.createElement(e,Object.assign({},t,{repeatedDataSource:r}))))}return t.displayName="RepeatedDataSourceContextConsumerWrapper",t}fw.Consumer;class mw extends C.PureComponent{}const vw=mw;function yw(e,t){return e===t}function bw(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function Sw(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var ww=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,a=n.pop(),s=Sw(n),u=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),l=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=a,l.dependencies=s,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yw,r=null,n=null;return function(){return bw(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));const Iw=function(e,t,r){"__proto__"==t&&sg?sg(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var Ew=Object.prototype.hasOwnProperty;const Ow=function(e,t,r){var n=e[t];Ew.call(e,t)&&$a(n,r)&&(void 0!==r||t in e)||Iw(e,t,r)},Cw=function(e,t,r){return null==e?e:function(e,t,r,n){if(!Sa(e))return e;for(var o=-1,i=(t=is(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var u=as(t[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=Sa(c)?c:js(t[o+1])?[]:{})}Ow(s,u,l),s=s[u]}return e}(e,t,r)};class Tw{constructor(){this.state={}}static getInstance(){return Tw.instance||(Tw.instance=new Tw,window._mutableStoreManager=Tw.instance),Tw.instance}updateStateValue(e,t,r){var n;const o=null!==(n=null==t?void 0:t.split("."))&&void 0!==n?n:[],i=[e].concat(o);Cw(this.state,i,r),tg().dispatch(am(e,t))}getStateValue(e){return ss(this.state,e)}getState(){return this.state}}var Aw=s(1249),xw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Dw{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return Dw.instance||(Dw.instance=new Dw,window._messageManager=Dw.instance),Dw.instance}getActions(){return this.actions}getWidgetActions(e){return this.actions.filter((t=>t.widgetId===e))}getAction(e,t){return this.actions.find((r=>r.widgetId===e&&r.name===t))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.destroy(),t.widgetId!==e)))}registerWidgetActions(e,t){return xw(this,void 0,void 0,(function*(){if(e.context.isRemote)return yield Promise.resolve();const r=[];return e.manifest.messageActions&&e.manifest.messageActions.forEach((n=>{let o;o=e.context.isRemote?e.context.folderUrl+"dist/"+n.uri+".js":e.uri+"dist/"+n.uri,r.push(this.registerAction({id:`${e.id}-${n.name}`,name:n.name,uri:o,widgetId:e.id,appConfig:t,label:e.manifest.i18nMessages[`_action_${n.name}_label`]||n.label}))})),Promise.all(r)}))}registerAction(e){return xw(this,void 0,void 0,(function*(){let t=this.actions.find((t=>t.id===e.id));return t?Promise.resolve(t):yield(()=>xw(this,void 0,void 0,(function*(){return e.ActionClass?yield Promise.resolve(e.ActionClass):yield this.loadActionClass(e.uri)})))().then((r=>xw(this,void 0,void 0,(function*(){t=new r({id:e.id,name:e.name,widgetId:e.widgetId,label:e.label});let n=[];return r.versionManager&&e.appConfig&&(n=Bf(e.appConfig,e.widgetId,e.name).map((t=>xw(this,void 0,void 0,(function*(){return yield this.upgradeActionConfig(t,r.versionManager,e.appConfig.widgets[e.widgetId].manifest.version)}))))),yield Promise.all(n).then((()=>(this.actions.push(t),t)))}))))}))}upgradeActionConfig(e,t,r){return xw(this,void 0,void 0,(function*(){const n=e.version,o=e.widgetId,i=e.config;return n||(e.version="1.0.0-beta2"),r===n?i:t?Aw.valid(n)&&Aw.valid(r)?yield t.upgrade(i,n,r,e.actionId).then((t=>{e.config=t,e.version=r})):(console.error("Bad widget action config version number, "+o+","+n+","+r),i):i}))}loadActionClass(e){return xw(this,void 0,void 0,(function*(){return this.actionClassPromises[e]?yield this.actionClassPromises[e]:(this.actionClassPromises[e]=Bp(e,["default"]).then((e=>e.default)),this.actionClassPromises[e])}))}publishMessage(e){return xw(this,void 0,void 0,(function*(){const t=tg().getState().appConfig.messageConfigs,r=Object.keys(t);let n=null;for(let o=0;o<r.length;o++)if(t[r[o]].messageType===e.type&&t[r[o]].widgetId===e.widgetId){n=t[r[o]];break}if(n)for(let t=0;t<n.actions.length;t++){const r=n.actions[t],o=this.actions.filter((e=>e.widgetId===r.widgetId&&e.name===r.actionName))[0];if(!o){console.error(`Not find action: ${r.actionName}`);break}if(!o.filterMessage(e))break;if(!(yield this.exeAction(o,e,r.config)))return}}))}exeAction(e,t,r){return xw(this,void 0,void 0,(function*(){const n=e.onExecute(t,r);return n&&n instanceof Promise?yield n.then((e=>e),(function(e){return xw(this,void 0,void 0,(function*(){return console.error(e),yield Promise.resolve(!1)}))})):yield Promise.resolve(n)}))}}const Pw=Dw;var Rw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function _w(e,t,r){var n,o,i,a,s,u;if(e===t)return!1;const l=null===(n=tg().getState().appConfig)||void 0===n?void 0:n.widgets[e];if(!l)return!1;const c=l.dataActions;if(null===(i=null===(o=null==c?void 0:c[r])||void 0===o?void 0:o.enabled)||void 0===i||i){const e=null===(s=null===(a=null==c?void 0:c[r])||void 0===a?void 0:a.actions)||void 0===s?void 0:s[t];return null===(u=null==e?void 0:e.enabled)||void 0===u||u}return!1}class kw{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return kw.instance||(kw.instance=new kw,window._dataActionManager=kw.instance),kw.instance}getActions(){return this.actions}getSupportedActions(e,t,r=[]){var n,o;return Rw(this,void 0,void 0,(function*(){const i={},a=tg().getState(),s=a.appConfig,u=a.browserSizeMode,l=null==s?void 0:s.widgets[e],c=null===(n=l.manifest)||void 0===n?void 0:n.excludeDataActions,d=Hf(s,u);for(let n=0;n<this.actions.length;n++){const a=this.actions[n],s=null===(o=tg().getState().appConfig)||void 0===o?void 0:o.widgets[a.widgetId];if(yield this.testActionSupportData(a,t,r)){if(a.widgetId&&(this.isActionExcluded(`${s.manifest.name}.${a.name}`,c)||!_w(e,a.widgetId,a.name)||!qf(d,e,a.widgetId)))continue;i[a.name]||(i[a.name]=[]),i[a.name].push(a)}}return i}))}isActionExcluded(e,t=[]){const r=e.split(".");if(2!==r.length)return!0;const n=`${r[0]}.*`;return t.some((t=>t===e||t===n))}registerWidgetActions(e){var t;return Rw(this,void 0,void 0,(function*(){const r=[];if(!e.uri||!e.manifest.dataActions||0===e.manifest.dataActions.length)return r;for(let n=0;n<e.manifest.dataActions.length;n++){const o=e.manifest.dataActions[n],i=e.uri+"dist/"+o.uri,a=`${e.id}-${o.name}`,s=yield this.registerAction({id:a,name:o.name,uri:i,widgetId:e.id,label:null!==(t=e.manifest.i18nMessages[`_action_${o.name}_label`])&&void 0!==t?t:o.label,icon:`${Nf(e.uri).folderUrl}dist/${o.icon}`});s&&r.push(s)}return r}))}registerAction(e){return Rw(this,void 0,void 0,(function*(){const t=this.actions.find((t=>t.id===e.id));if(t)return t;const r=()=>Rw(this,void 0,void 0,(function*(){return e.ActionClass?e.ActionClass:yield this.loadActionClass(e.uri)}));try{const t=new(yield r())({id:e.id,name:e.name,label:e.label,icon:e.icon,widgetId:e.widgetId});return this.actions.push(t),t}catch(t){console.error(`Action class ${e.uri} load failed`)}return null}))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.destroy(),t.widgetId!==e)))}getActionsByWidgetId(e){return this.actions.filter((t=>t.widgetId===e))}loadActionClass(e){return Rw(this,void 0,void 0,(function*(){return this.actionClassPromises[e]?yield this.actionClassPromises[e]:(this.actionClassPromises[e]=Bp(e,["default"]).then((e=>e.default)),this.actionClassPromises[e])}))}testActionSupportData(e,t,r){return Rw(this,void 0,void 0,(function*(){return yield e.isSupported(t,r)}))}}var Nw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Mw{constructor(){this.widgets={},rg(this.onStoreChange.bind(this),["appConfig","widgets"]),this.dsManager=vg.getInstance()}static getInstance(){return Mw.instance||(Mw.instance=new Mw,window._widgetManager=Mw.instance),Mw.instance}updateWidgetCache(e,t){this.widgets[e]||(this.widgets[e]={});for(const r in t)this.widgets[e][r]=t[r]}getWidgetListInfo(){return Nw(this,void 0,void 0,(function*(){return this.widgetListInfo&&this.widgetListInfo.length>0?yield Promise.resolve(this.widgetListInfo):yield fetch(`${Vp("widgets/")}widgets-info.json`).then((e=>Nw(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>(this.widgetListInfo=e.map((e=>{e.manifest=Mf(e.manifest);const t=Qd(tg().getState().appContext.locale,e.manifest.translatedLocales);return{itemType:Xp.Widget,name:e.name,label:e.i18nLabel[t]||e.manifest.label||e.name,uri:e.uri,manifest:e.manifest,icon:`${Vp("widgets/")}../${e.icon}`}})),this.widgetListInfo)))}))}getWidgetClass(e){var t,r,n;const o=null===(r=null===(t=tg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];if(o)return null===(n=this.widgets[o.uri])||void 0===n?void 0:n.clazz}getWidgetClassByUri(e){var t;return null===(t=this.widgets[e])||void 0===t?void 0:t.clazz}destroyWidget(e){var t,r;const n=null===(r=null===(t=tg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];n&&delete this.widgets[n.uri]}destroyAllWidgets(){this.widgets={}}checkWidgetUriInConfig(e){const t=tg().getState().appConfig.widgets||{};return!!Object.keys(t).find((r=>t[r].uri===e))}loadWidgetClass(e){var t,r;return Nw(this,void 0,void 0,(function*(){const n=null===(r=null===(t=tg().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===r?void 0:r[e];return n?yield this.loadWidgetClassByUri(n.uri):yield Promise.resolve(null)}))}loadWidgetClassByUri(e){var t,r;return Nw(this,void 0,void 0,(function*(){if(!this.checkWidgetUriInConfig(e))return yield Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.clazzPromise)return yield this.widgets[e].clazzPromise;if(!(null===(r=this.widgets[e])||void 0===r?void 0:r.manifest))return console.error(e,"Should load manifest first."),yield Promise.reject(null);const n=this.widgets[e].manifest;return n.properties.hasMainClass?(this.widgets[e].clazzPromise=this.loadRawClass(e).then((()=>Nw(this,void 0,void 0,(function*(){return yield this.injectWidgetProps(e)})))).then((e=>e?this.appWidgetClassWrapperExtension(e,n):e)).then((t=>t?(this.widgets[e].clazz=t,tg().dispatch(Cg(e)),t):t)),this.widgets[e].clazzPromise):yield Promise.resolve(null)}))}loadRawClass(e){return Nw(this,void 0,void 0,(function*(){return yield this.loadWidgetDependency(e).then((()=>Nw(this,void 0,void 0,(function*(){return yield Bp(`${e}dist/runtime/widget`,[])})))).then((t=>{const r=t.default?t.default:t;return this.widgets[e].rawClazz=r,r}))}))}loadWidgetTranslation(e,t){return Nw(this,void 0,void 0,(function*(){let r=tg().getState().appContext.locale;return r=Gd(r,t.translatedLocales),r?yield Hd(`${e}dist/runtime/translations`,r).catch((e=>Nw(this,void 0,void 0,(function*(){return console.error("Load widget translation error",e),yield Promise.resolve({})})))):yield Promise.resolve({})}))}openWidget(e){tg().dispatch(xg(e))}closeWidget(e){tg().dispatch(Pg(e))}appWidgetClassWrapperExtension(e,t){const r=cf.getInstance().getExtensions(Up.WidgetClassWrapper)[0];return r?r.wrap(e,t):e}handleNewWidgetJson(e){return Nw(this,void 0,void 0,(function*(){return e.context=Nf(e.uri),yield this.loadWidgetManifest(e.uri).then((t=>Nw(this,void 0,void 0,(function*(){return e._originManifest=t,yield this.processWidgetManifest(e)})))).then((t=>Nw(this,void 0,void 0,(function*(){return e.manifest=t,e.version=t.version,jf(tg().getState().appStateInBuilder?tg().getState().appStateInBuilder.appConfig:tg().getState().appConfig,e),yield this.loadWidgetDefaultConfig(e.uri)})))).then((t=>(e.config=t,e)))}))}isAllowLoad(e){return Nw(this,void 0,void 0,(function*(){return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?yield Promise.resolve(!1):yield Promise.resolve(!0)}))}loadWidgetManifest(e){return Nw(this,void 0,void 0,(function*(){return this.widgets[e]||(this.widgets[e]={}),this.widgets[e].manifestPromise||(this.widgets[e].manifestPromise=this.isAllowLoad(e).then((t=>Nw(this,void 0,void 0,(function*(){if(!t)return yield Promise.reject(`Not allow.${e}`);const r=`${Nf(e).folderUrl}manifest.json`;return yield window.fetch(r).then((e=>Nw(this,void 0,void 0,(function*(){return 404===e.status?yield wp().then((e=>Nw(this,void 0,void 0,(function*(){return e&&tg().dispatch(Fm(!0)),yield Promise.reject(new Error("404, widget not found."))})))):yield e.json()}))))})))).then((t=>Nw(this,void 0,void 0,(function*(){if(t.error&&t.error.code)return yield Promise.reject(t.error);const r=t;return!r.widgetType&&r.properties&&r.properties.type&&(r.widgetType=r.properties.type,delete r.properties.type),!r.layouts&&r.properties&&r.properties.layouts&&(r.layouts=r.properties.layouts,delete r.properties.layouts),!r.translatedLocales&&r.supportedLocales&&(r.translatedLocales=r.supportedLocales),this.widgets[e].rawManifest=r,yield Promise.resolve(r)}))))),yield this.widgets[e].manifestPromise}))}processWidgetManifest(e){return Nw(this,void 0,void 0,(function*(){const t=Mf(e._originManifest);return e.manifest=t,yield this.loadWidgetTranslation(e.uri,t).then((r=>(t.i18nMessages=r,e.manifest=t,this.widgets[e.uri]?this.widgets[e.uri].manifest=t:this.widgets[e.uri]={rawManifest:e._originManifest,manifest:t,manifestPromise:Promise.resolve(t)},t)))}))}registerManifestProps(e,t){return Nw(this,void 0,void 0,(function*(){const r=e.manifest,n=[];return r.extensions&&r.extensions.length>0&&n.push(cf.getInstance().registerWidgetExtensions(e)),r.messageActions&&r.messageActions.length>0&&n.push(Pw.getInstance().registerWidgetActions(e,t)),r.dataActions&&r.dataActions.length>0&&n.push(kw.getInstance().registerWidgetActions(e)),yield Promise.all(n).then((()=>{}))}))}unRegisterManifestProps(e){cf.getInstance().destryWidgetExtensions(e),Pw.getInstance().destroyWidgetActions(e),kw.getInstance().destroyWidgetActions(e)}loadWidgetDefaultConfig(e){var t;return Nw(this,void 0,void 0,(function*(){if(!this.widgets[e].manifest.properties.hasConfig)return yield Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.defaultConfigPromise)return yield this.widgets[e].defaultConfigPromise;const r=Nf(e).folderUrl;return this.widgets[e].defaultConfigPromise=window.fetch(`${r}config.json`).then((e=>Nw(this,void 0,void 0,(function*(){return 404===e.status?yield wp().then((e=>Nw(this,void 0,void 0,(function*(){return e&&tg().dispatch(Fm(!0)),yield Promise.reject(new Error("404, widget not found."))})))):yield e.json()})))).then((e=>e)),this.widgets[e].defaultConfigPromise}))}loadWidgetDependency(e){return Nw(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest;if(!t.dependency)return yield Promise.resolve();const r="string"==typeof t.dependency?[t.dependency]:t.dependency;return yield Rv(r)}))}injectWidgetProps(e){return Nw(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest,r=t.name,n=jp().withTheme,o=this.widgets[e].rawClazz,i=gw(n(cd(o),window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder));if(!this.checkWidgetUriInConfig(e))return yield Promise.resolve(null);const a=ww((e=>e.appI18nMessages),(e=>{const r=t.i18nMessages;return Object.assign({},r,e)})),s=(t,r)=>{var n;const i=r.widgetId;if(!t.appConfig.widgets[i])return{};const s=t.widgetsRuntimeInfo[i],u=Object.assign({portalUrl:t.portalUrl,portalSelf:t.portalSelf,user:t.user,token:t.token,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages,i18nMessages:a(t)},r);t.widgetsState[i]&&(u.stateProps=t.widgetsState[i]),t.widgetsMutableStateVersion[i]&&(u.mutableStatePropsVersion=t.widgetsMutableStateVersion[i],u.mutableStateProps=Tw.getInstance().getStateValue([i])),(null===(n=this.widgets[e])||void 0===n?void 0:n.widgetBuilderSupportModules)&&(u.builderSupportModules=this.widgets[e].widgetBuilderSupportModules),t.widgetsPreloadProps&&t.widgetsPreloadProps[i]&&Object.assign(u,t.widgetsPreloadProps[i]);const l=Object.assign(u,t.appConfig.widgets[i],s);return Object.assign(l,o.mapExtraStateProps?o.mapExtraStateProps(t,l):{})};class u extends C.PureComponent{upgradeWidgetConfig(){return Nw(this,void 0,void 0,(function*(){const e=this.props,t=o.versionManager,r=e.manifest.version,n=e.version,i=e.config;if(r===n)return yield Promise.resolve(i);if(!t)return tg().dispatch(Tg(e.id,i)),yield Promise.resolve(i);if(!Aw.valid(n)||!Aw.valid(r))return yield Promise.reject("Bad widget version number, "+e.manifest.name+","+n+","+r);if(!Aw.lt(n,r))return yield Promise.reject("It seems this widget is configured with a higher version. Please upgrade to the latest version to view. "+e.manifest.name+","+n+","+r);try{return yield t.upgrade(i,n,r,e.id).then((t=>(tg().dispatch(Tg(e.id,t)),t)))}catch(t){return console.log("Upgrade widget ["+e.manifest.name+"] old config error,"+t.stack),i}}))}componentDidMount(){this.upgradeWidgetConfig()}componentDidUpdate(){this.upgradeWidgetConfig()}render(){const{id:e,manifest:t,version:r,i18nMessages:n}=this.props;return e?o.versionManager&&t.version!==r?null:C.createElement(Wd,{locale:this.props.locale,defaultLocale:this.props.locale,messages:n},C.createElement(i,Object.assign({},this.props))):null}}return u.displayName=`WidgetWrapper(${r})`,this.loadWidgetBuilderSupportModules(e,t).then((()=>Nw(this,void 0,void 0,(function*(){return this.checkWidgetUriInConfig(e)?yield Promise.resolve(pe(s)(u)):yield Promise.resolve(null)}))))}))}loadWidgetBuilderSupportModules(e,t){var r;return Nw(this,void 0,void 0,(function*(){const n=[];if(window.jimuConfig.isInBuilder){if(null===(r=this.widgets[e])||void 0===r?void 0:r.widgetBuilderSupportModulesPromise)return yield this.widgets[e].widgetBuilderSupportModulesPromise;if(t.properties.hasEmbeddedLayout?n.push(Bp("jimu-layouts/layout-builder",["LayoutEntry"]).then((e=>e.LayoutEntry))):n.push(Promise.resolve(null)),t.properties.hasBuilderSupportModule){const t=`${e}dist/runtime/builder-support`;n.push(Bp(t,["default"]).then((e=>e.default)))}else n.push(Promise.resolve(null));return this.widgets[e].widgetBuilderSupportModulesPromise=Promise.all(n).then((t=>(this.widgets[e].widgetBuilderSupportModules={jimuForBuilderLib:qp(),LayoutEntry:t[0],widgetModules:t[1]},this.widgets[e].widgetBuilderSupportModules))),this.widgets[e].widgetBuilderSupportModulesPromise}return Promise.resolve({jimuForBuilderLib:null})}))}onStoreChange(e,t){e&&t&&Object.keys(e).forEach((e=>{t[e]||(this.destroyWidget(e),this.unRegisterManifestProps(e))})),e&&t&&Object.keys(t).forEach((r=>{e[r]||this.registerManifestProps(t[r])}))}}const jw=Mw;var Lw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Uw{upgrade(e,t,r,n){return Lw(this,void 0,void 0,(function*(){if(!Aw.valid(t)||!Aw.valid(r))return yield Promise.resolve();if(!this.checkVersion())return yield Promise.resolve();const o=this.getVersionIndex(t),i=this.getVersionIndex(r);if(o>i)return yield Promise.reject("New version should higher than old version.");if(o===i)return this.versions[i]?yield Promise.resolve(this.versions[i].upgrader(e,n)):yield Promise.resolve(e);const a=e,s=this.versions.slice(o+1,i+1).filter((e=>null==e?void 0:e.upgrader));return s.reduce(((e,t)=>Lw(this,void 0,void 0,(function*(){return yield e.then((e=>Lw(this,void 0,void 0,(function*(){return yield Promise.resolve(t.upgrader(e,n))}))))}))),Promise.resolve(a))}))}getVersionIndex(e){const t=this.versions.findIndex((t=>Aw.eq(e,t.version)));if(t>-1)return t;for(let t=0;t<this.versions.length-1;t++)if(Aw.gt(e,this.versions[t].version)&&Aw.lt(e,this.versions[t+1].version))return t;return Aw.lt(e,this.versions[0].version)?-1:Aw.gt(e,this.versions[this.versions.length-1].version)?this.versions.length:void 0}checkVersion(){for(let e=0;e<this.versions.length-1;e++){if(!Aw.valid(this.versions[e].version))return console.error("Invalid version.",this.versions[e].version),!1;if(Aw.gt(this.versions[e].version,this.versions[e+1].version))return console.error("Version order error.",this.versions[e].version,this.versions[e+1]),!1}return!0}}class Fw extends Uw{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"First release.",upgrader:e=>{let t=e;return delete t.widgetsManifest,t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{var r;const n=e.widgets[t];"widgets/common/controller/"===n.uri&&(null===(r=n.layouts)||void 0===r?void 0:r.openwidget)&&(n.layouts._openwidget=n.layouts.openwidget,delete n.layouts.openwidget)})),e))(t),t=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r,n;Object.keys(null!==(n=null===(r=e.layouts[t])||void 0===r?void 0:r.content)&&void 0!==n?n:{}).forEach((r=>{var n,o,i,a;const s=e.layouts[t].content[r];if(null===(n=null==s?void 0:s.setting)||void 0===n?void 0:n.fitContainer){s.setting.heightMode="fit";const e=null!==(o=s.setting.autoProps)&&void 0!==o?o:{};e.height="STRETCH",s.setting.autoProps=e,delete s.setting.fitContainer}if(null===(i=null==s?void 0:s.setting)||void 0===i?void 0:i.autoHeight){const e=null!==(a=s.setting.autoProps)&&void 0!==a?a:{},t=s.bbox;null!=t.top&&null!=t.bottom?e.height="STRETCH":e.height="AUTO",s.setting.autoProps=e,delete s.setting.autoHeight}}))})),e})(t),t}},{version:"1.1.0",description:"1.1.0",upgrader:e=>Lw(this,void 0,void 0,(function*(){return Promise.all([Bp("jimu-layouts/layout-runtime",["searchUtils"]),Bp("jimu-ui",["richTextUtils"])]).then((t=>{const[r,n]=t;let o=e;return o=(e=>{var t;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.dataSources[t];"FEATURE_QUERY"===n.type?n.type=Ki.FeatureLayer:n.isOutputFromWidget&&(null===(r=null==n?void 0:n.originDataSources)||void 0===r||r.forEach((e=>{e.mainDataSourceId=e.dataSourceId})))})),e})(o),o=((e,t,r)=>{var n;const o=Xd().formatMessage({id:"upgradedFrom"});return Object.keys(null!==(n=e.widgets)&&void 0!==n?n:{}).forEach((r=>{var n;const i=e.widgets[r];(null!==(n=i.useDataSources)&&void 0!==n?n:[]).forEach(((n,a)=>{var s,u,l,c,d,p;if(n.query||"widgets/arcgis/feature-info/"===i.uri&&(null===(s=i.config)||void 0===s?void 0:s.limitGraphics)||"widgets/common/list/"===i.uri){const s=`_from_10_${r}_${a}`,f=e.dataSources||{},h={id:s,label:o,where:null===(u=n.query)||void 0===u?void 0:u.where,orderBy:null===(c=null===(l=n.query)||void 0===l?void 0:l.orderBy)||void 0===c?void 0:c.filter((e=>!!(null==e?void 0:e.jimuFieldName))),maximum:"widgets/arcgis/feature-info/"===i.uri?null===(d=i.config)||void 0===d?void 0:d.maxGraphics:"widgets/common/list/"===i.uri&&(null===(p=i.config)||void 0===p?void 0:p.maxItems)},g=n.dataSourceId,m=n.rootDataSourceId,v=`${g}-${s}`;if(n.dataSourceId=v,n.mainDataSourceId=g,n.dataViewId=s,t.getChildrenContents(e,r,Xp.Widget,!0).forEach((t=>{var r;const n=e.widgets[t];if((null!==(r=n.useDataSources)&&void 0!==r?r:[]).forEach(((e,t)=>{e.dataSourceId===g&&(e.dataSourceId=v,e.mainDataSourceId=g,e.dataViewId=s)})),"widgets/common/image/"===n.uri||"widgets/common/button/"===n.uri){let e=[];e="widgets/common/image/"===n.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],e.forEach((e=>{var t,r,o;const i=e.split("."),a=1===i.length?(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.functionConfig)&&n.config.functionConfig[i[0]]:(null===(r=null==n?void 0:n.config)||void 0===r?void 0:r.functionConfig)&&n.config.functionConfig[i[0]]&&n.config.functionConfig[i[0]][i[1]];null===(o=null==a?void 0:a.parts)||void 0===o||o.forEach((e=>{e.dataSourceId===g&&(e.dataSourceId=v)}))}))}else"widgets/common/text/"===n.uri&&(n.config.text=n.config.text.replace(new RegExp(g,"g"),v))})),f[g])f[g].dataViews?f[g].dataViews[s]=h:f[g].dataViews={[s]:h};else if(f[m]){const e=g.substr(m.length+1);f[m].childDataSourceJsons?f[m].childDataSourceJsons[e]?f[m].childDataSourceJsons[e].dataViews?f[m].childDataSourceJsons[e].dataViews[s]=h:f[m].childDataSourceJsons[e].dataViews={[s]:h}:f[m].childDataSourceJsons[e]={id:g,dataViews:{[s]:h}}:f[m].childDataSourceJsons={[e]:{id:g,dataViews:{[s]:h}}}}else console.error("bad config ds.",n);Object.keys(f).forEach((e=>{f[e].originDataSources&&f[e].originDataSources.forEach((e=>{e.dataSourceId===g&&(e.dataSourceId=v,e.mainDataSourceId=g,e.dataViewId=s)}))})),delete n.query}else n.mainDataSourceId||(n.mainDataSourceId=n.dataSourceId)}))})),(e=>{var t;return Object.keys(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;const n=null===(r=e.messageConfigs[t])||void 0===r?void 0:r.actions,o=e.widgets||{};n&&n.forEach((e=>{var t,r,n,i,a,s;if("widgets/common/list/"===(null===(t=o[null==e?void 0:e.widgetId])||void 0===t?void 0:t.uri)){if(e.config=e.config||{},e.config.actionUseDataSource&&e.config.actionUseDataSource.dataSourceId){const t=null===(r=e.config.actionUseDataSource)||void 0===r?void 0:r.fields;e.config.actionUseDataSource=null===(n=o[e.widgetId])||void 0===n?void 0:n.useDataSources[0],e.config.actionUseDataSource.fields=t}if(e.config.messageUseDataSource&&e.config.messageUseDataSource.dataSourceId)if("widgets/common/list/"===(null===(i=o[null==e?void 0:e.messageWidgetId])||void 0===i?void 0:i.uri)){const t=null===(a=e.config.messageUseDataSource)||void 0===a?void 0:a.fields;e.config.messageUseDataSource=null===(s=o[e.messageWidgetId])||void 0===s?void 0:s.useDataSources[0],e.config.messageUseDataSource.fields=t}else e.config.messageUseDataSource.mainDataSourceId=e.config.messageUseDataSource.dataSourceId;e.actionId=e.actionId.replace(`${e.widgetId}-filter`,"filter-data-record-action"),e.actionName=e.actionName.replace("filter","filter data record action"),e.version="1.1.0",delete e.widgetId}}))})),e})(((e,t,r,n)=>{var o;return Object.keys(null!==(o=e.widgets)&&void 0!==o?o:{}).forEach((o=>{const i=(e,t,r)=>{const o=(null==t?void 0:t.parts)&&(null==t?void 0:t.parts[e]);if(!o)return null;if(o.type===pS.Field){const i=e>0?t.parts[e-1]:null,a=e>1?t.parts[e-2]:null,s=t.parts[e+1];if((null==a?void 0:a.type)===pS.Function&&"("===(null==i?void 0:i.exp)&&")"===(null==s?void 0:s.exp))return o;if(r&&o.dataSourceId===r)o.isFromRepeatedDataSourceContext=!0;else if(o.dataSourceId&&!o.isFromRepeatedDataSourceContext){const e=0===o.dataSourceId.split("-").reverse()[0].indexOf(n)?o.dataSourceId.split("-").reverse().slice(1).reverse().join("-"):o.dataSourceId;o.dataSourceId=`${e}-${_u}`}}return o},a=(e,t)=>{var n,o,a,s;if("widgets/common/image/"===e.uri||"widgets/common/button/"===e.uri){let r=[];r="widgets/common/image/"===e.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],r.forEach((r=>{var n,o,a;const s=r.split("."),u=1===s.length?(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.functionConfig)&&e.config.functionConfig[s[0]]:(null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.functionConfig)&&e.config.functionConfig[s[0]]&&e.config.functionConfig[s[0]][s[1]];null===(a=null==u?void 0:u.parts)||void 0===a||a.forEach(((e,r)=>{i(r,u,t)}))}))}else"widgets/common/embed/"===e.uri?null===(a=null===(o=null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.expression)||void 0===o?void 0:o.parts)||void 0===a||a.forEach(((r,n)=>{i(n,e.config.expression,t)})):"widgets/common/text/"===e.uri&&(null===(s=e.config)||void 0===s?void 0:s.text)&&(e.config.text=r.editExpressionPart(e.config.text,((e,r)=>i(e,r,t))));return e};let s=e.widgets[o];"widgets/common/list/"===s.uri?t.getChildrenContents(e,o,Xp.Widget,!0).forEach((t=>{const r=(null==s?void 0:s.useDataSources)&&s.useDataSources[0]&&s.useDataSources[0].dataSourceId;e.widgets[t]=a(e.widgets[t],r)})):s=a(s)})),e})(e,t,r,"_from_10_"))})(o,r.searchUtils,n.richTextUtils),o=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.layouts[t],o=null==n?void 0:n.type;Object.keys(null!==(r=null==n?void 0:n.content)&&void 0!==r?r:{}).forEach((e=>{var t,r,i,a,s,u;const l=n.content[e],c=null!==(r=null===(t=l.setting)||void 0===t?void 0:t.autoProps)&&void 0!==r?r:{};!0===c.width?(o===Kp.FixedLayout?c.left||c.right?c.width="AUTO":c.width="STRETCH":c.width="AUTO",l.setting.autoProps=c):!1===c.width&&(c.width="CUSTOM",l.setting.autoProps=c),!0===(null===(i=l.setting)||void 0===i?void 0:i.fitContainer)?c.height="STRETCH":!1===(null===(a=l.setting)||void 0===a?void 0:a.fitContainer)&&(null===(s=l.bbox)||void 0===s?void 0:s.height)?c.height="CUSTOM":!0===c.height?(o===Kp.FixedLayout?c.top||c.bottom?c.height="AUTO":c.height="STRETCH":c.height="AUTO",l.setting.autoProps=c):!1===c.height&&(c.height="CUSTOM",l.setting.autoProps=c),(null===(u=l.setting)||void 0===u?void 0:u.heightMode)&&null==c.height&&("auto"===l.setting.heightMode?(c.height="AUTO",l.setting.autoProps=c):"fit"===l.setting.heightMode?(c.height="STRETCH",l.setting.autoProps=c):"fixed"===l.setting.heightMode&&(c.height="CUSTOM",l.setting.autoProps=c))}))})),e})(o),o}))}))},{version:"1.2.0",description:"1.2.0",upgrader:e=>{let t=e;return t=(e=>(Object.keys(e.pages).forEach((t=>{e.pages[t].icon&&(e.pages[t].icon.properties.color=null)})),e))(t),t=(e=>{if(!e.dialogs)return e;let t=0,r=0;Object.keys(e.dialogs).forEach((n=>{const o=e.dialogs[n];o.mode===af.Fixed?o.index=t++:o.index=r++,o.dialogBackground?""===o.dialogBackground.color&&(o.dialogBackground.color="rgba(0,0,0,0)"):o.dialogBackground={color:"rgba(0,0,0,0)",fillType:"fit",image:{url:""}},o.mode===af.Fixed&&o.confirmBeforeClose?(o.interactionType=uf.ButtonInline,o.interactionStyles=o.confirmationStyle,o.alwaysShowConfirmation=!1):(o.interactionType=null,o.interactionStyles=null),delete o.confirmationStyle}));const n={};return Object.keys(e.dialogs).sort().forEach((t=>{n[t]=e.dialogs[t]})),e.dialogs=n,e})(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];(null==r?void 0:r.type)===Kp.FixedLayout&&Object.keys(r.content||{}).forEach((e=>{var t,n;const o=r.content[e];!0===(null===(t=o.setting)||void 0===t?void 0:t.hCenter)&&(o.bbox||(o.bbox={}),o.bbox.left="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.left=!1,o.setting.autoProps.right=!0):o.setting.autoProps={left:!1,right:!0}:o.setting={autoProps:{left:!1,right:!0}}),!0===(null===(n=o.setting)||void 0===n?void 0:n.vCenter)&&(o.bbox||(o.bbox={}),o.bbox.top="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.top=!1,o.setting.autoProps.bottom=!0):o.setting.autoProps={top:!1,bottom:!0}:o.setting={autoProps:{top:!1,bottom:!0}})}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];(null==r?void 0:r.type)===Kp.FlowLayout&&Object.keys(r.content||{}).forEach((e=>{var t,n,o;const i=r.content[e];!0===(null===(t=i.setting)||void 0===t?void 0:t.isFloating)&&(+(null===(n=i.bbox)||void 0===n?void 0:n.width)>0&&(i.bbox.width=`${i.bbox.width}px`),+(null===(o=i.bbox)||void 0===o?void 0:o.height)>0&&(i.bbox.height=`${i.bbox.height}px`))}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).forEach((t=>{var n,o,i,a,s;const u=r.content[t];if(u.type===Xp.Widget){const t=e.widgets[u.widgetId];0===(null===(n=null==t?void 0:t.uri)||void 0===n?void 0:n.indexOf("widgets/common/card"))&&("AUTO"===(null===(i=null===(o=u.setting)||void 0===o?void 0:o.autoProps)||void 0===i?void 0:i.width)&&(u.setting.autoProps.width="CUSTOM",u.bbox||(u.bbox={}),u.bbox.width=`${t.config.widgetWidth}px`),"AUTO"===(null===(s=null===(a=u.setting)||void 0===a?void 0:a.autoProps)||void 0===s?void 0:s.height)&&(u.setting.autoProps.height="CUSTOM",u.bbox||(u.bbox={}),u.bbox.height=`${t.config.widgetHeight}px`))}}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).forEach((t=>{var n,o;const i=r.content[t];if(i.type===Xp.Widget){const t=e.widgets[i.widgetId];if(0===(null===(n=null==t?void 0:t.uri)||void 0===n?void 0:n.indexOf("widgets/layout/column"))){const r=null===(o=t.layouts)||void 0===o?void 0:o.DEFAULT;r&&Object.keys(r).forEach((n=>{var o,i,a,s,u,l,c,d;const p=r[n],f=e.layouts[p];f.setting||(f.setting={}),f.setting.space=(null===(i=null===(o=t.config)||void 0===o?void 0:o.space)||void 0===i?void 0:i.distance)||(null===(a=t.config)||void 0===a?void 0:a.space),f.setting.padding=null===(u=null===(s=t.config)||void 0===s?void 0:s.style)||void 0===u?void 0:u.padding,f.setting.justifyContent=null===(c=null===(l=t.config)||void 0===l?void 0:l.style)||void 0===c?void 0:c.justifyContent,f.setting.overflowY=null===(d=t.config)||void 0===d?void 0:d.style.overflowY}))}}}))})),e))(t),t}},{version:"1.3.0",description:"1.3.0",upgrader:e=>e},{version:"1.4.0",description:"1.4.0",upgrader:e=>{let t=e;return t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const r=e.widgets[t];if("widgets/common/filter/"===r.uri&&r.useDataSources){const n={};r.useDataSources.forEach((e=>{if(e.dataSourceId in n){const t=n[e.dataSourceId].fields||[],r=e.fields||[];n[e.dataSourceId].fields=Array.from(new Set(t.concat(r))).sort()}else n[e.dataSourceId]=e})),e.widgets[t].useDataSources=Object.keys(n).map((e=>n[e]))}})),e))(t),t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach((t=>{const r=e.dialogs[t],n={width:r.width,height:r.height,aspectRatio:!!r.aspectRatio};delete r.width,delete r.height,delete r.aspectRatio,r.mode===af.Fixed&&(n.position=r.position,delete r.position),r.sizeMode={},r.sizeMode[Mi.Large]=n})),e):e)(t),t=(e=>{var t;const r=["widgets/arcgis/feature-info/","widgets/arcgis/query/","widgets/common/chart/","widgets/common/list/","widgets/common/table/"];return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{const n=e.widgets[t];r.includes(n.uri)&&(n.enableDataAction=!1)})),e})(t),t}},{version:"1.5.0",description:"1.5.0",upgrader:e=>{let t=e;return t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var r,n;const o=e.widgets[t];if(0===(null===(r=null==o?void 0:o.uri)||void 0===r?void 0:r.indexOf("widgets/layout/row"))){const t=null===(n=o.layouts)||void 0===n?void 0:n.DEFAULT;t&&Object.keys(t).forEach((r=>{var n,i,a,s,u,l;const c=t[r],d=e.layouts[c];d&&(d.setting||(d.setting={}),d.setting.style||(d.setting.style={}),d.setting.space=null!==(a=null===(i=null===(n=o.config)||void 0===n?void 0:n.space)||void 0===i?void 0:i.distance)&&void 0!==a?a:null===(s=o.config)||void 0===s?void 0:s.space,d.setting.style.padding=null===(l=null===(u=o.config)||void 0===u?void 0:u.style)||void 0===l?void 0:l.padding,o.config={})}))}})),e})(t),t=(e=>{var t,r;const n=t=>{Object.keys(null!=t?t:{}).forEach((r=>{var n;const o=t[r],i=e.layouts[o];if(i){const e=null!==(n=i.setting)&&void 0!==n?n:{};e.lockDescendants=!0,i.setting=e}}))};return n(null===(t=e.header)||void 0===t?void 0:t.layout),n(null===(r=e.footer)||void 0===r?void 0:r.layout),e})(t),t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var r,n;const o=e.widgets[t];if(0===(null===(r=null==o?void 0:o.uri)||void 0===r?void 0:r.indexOf("widgets/layout/column"))){const t=null===(n=o.layouts)||void 0===n?void 0:n.DEFAULT;t&&Object.keys(t).forEach((r=>{const n=t[r],o=e.layouts[n];o&&!o.type&&(o.type=Kp.ColumnLayout)}))}})),e})(t),t}},{version:"1.6.0",description:"1.6.0",upgrader:e=>{const t=e.customTheme;if(!t)return e;const r=t.sharedThemeVariables;delete t.sharedThemeVariables;let n=e;return n.customTheme=t,n.sharedThemeVariables=r,n=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;"DATA_RECORDS_SELECTION_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(r=t.actions)&&void 0!==r?r:[]).forEach((r=>{var n,o,i,a,s;if(!("zoomToFeature"!==(null==r?void 0:r.actionName)&&"panTo"!==r.actionName||(null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.useDataSources)&&0!==(null===(i=null===(o=null==r?void 0:r.config)||void 0===o?void 0:o.useDataSources)||void 0===i?void 0:i.length))){const n=e.widgets[t.widgetId];if(r.config||(r.config={}),"widgets/arcgis/query/"===n.uri){const e=null!==(a=n.outputDataSources)&&void 0!==a?a:[];r.config.useDataSources=e.map((e=>({dataSourceId:e,mainDataSourceId:e,rootDataSourceId:null}))),r.config.useDataSource=r.config.useDataSources[0]}else{const e=null!==(s=n.useDataSources)&&void 0!==s?s:[];r.config.useDataSources=e.map((e=>({dataSourceId:e.dataSourceId,mainDataSourceId:e.mainDataSourceId,rootDataSourceId:e.rootDataSourceId})))}}}))})),e})(n),n}},{version:"1.7.0",description:"1.7.0",upgrader:e=>{const t=function(e,t){let r;return"page"===t?r=e.pages:"view"===t?r=e.views:"dialog"===t&&(r=e.dialogs),r?(Object.keys(r).forEach((e=>{Object.keys(r).some((t=>{if(t===e)return!0;r[t].label===r[e].label&&(r[e].label+=" ")}))})),r):null};let r=e;return r=(e=>{var t,r;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var r;const n=e.dataSources[t];n.isOutputFromWidget&&Object.values(null!==(r=e.widgets)&&void 0!==r?r:{}).find((e=>{var t;return"widgets/common/list/"===e.uri&&(null===(t=e.outputDataSources)||void 0===t?void 0:t.includes(n.id))}))&&delete e.dataSources[t]})),Object.keys(null!==(r=e.widgets)&&void 0!==r?r:{}).forEach((t=>{const r=e.widgets[t];"widgets/common/list/"===r.uri&&Array.isArray(r.outputDataSources)&&delete r.outputDataSources})),e})(r),r=(e=>(e.pages=t(e,"page"),e.dialogs&&(e.dialogs=t(e,"dialog")),e.views&&(e.views=t(e,"view")),e))(r),r=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var r;"DATA_SOURCE_FILTER_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(r=t.actions)&&void 0!==r?r:[]).forEach((r=>{var n;if("zoomToFeature"===(null==r?void 0:r.actionName)||"panTo"===r.actionName){const o=e.widgets[t.widgetId];r.config||(r.config={});const i=(null!==(n=o.useDataSources)&&void 0!==n?n:[]).filter((e=>{var t;return null===(t=r.config.useDataSources)||void 0===t?void 0:t.find((t=>t.mainDataSourceId===e.mainDataSourceId))}));r.config.useDataSources=i||[]}}))})),e})(r),r}}]}}var $w=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const Bw=s(1981);window.jimuConfig.exbVersion=Bw.exbVersion;class Ww{constructor(e){this.intl=e.intl}static getInstance(e){return Ww.instance||(Ww.instance=new Ww(e)),Ww.instance}loadAppConfig(){return $w(this,void 0,void 0,(function*(){return yield this.loadAndProcessAppConfig().then((e=>$w(this,void 0,void 0,(function*(){return this.updateAppInfoForDeployedApp(e.attributes),Ce(e)}))))}))}loadAndProcessAppConfig(){return $w(this,void 0,void 0,(function*(){return tg().getState().appConfig?yield Promise.resolve(tg().getState().appConfig.asMutable({deep:!0})):yield this.loadRawAppConfig().then((e=>$w(this,void 0,void 0,(function*(){return e.__not_publish?yield Promise.reject(new Error(this.intl.formatMessage({id:"notPublishError",defaultMessage:lv.notPublishError}))):(this.addWebmapOrWebsceneToAppConfig(e),yield this.upgradeAppConfig(e))})))).then((e=>$w(this,void 0,void 0,(function*(){return yield this.processRawConfig(e)})))).then((e=>$w(this,void 0,void 0,(function*(){return yield this.initPortalAndWebTier(e)})))).then((e=>$w(this,void 0,void 0,(function*(){return window.jimuConfig.isInBuilder||tg().getState().portalUrl&&ev(tg().getState().portalUrl),yield this.handlePortalResourceInConfig(e)}))))}))}initPortalAndWebTier(e){return $w(this,void 0,void 0,(function*(){const t=tg().getState();if(window.jimuConfig.isInBuilder||Xm.getInstance().getMainSession())return yield Promise.resolve(e);if(!t.portalUrl){if(!e.attributes.portalUrl)return console.error("portalUrl is required."),Promise.reject(e);tg().dispatch(sm({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId}))}if(window.jimuConfig.isDevEdition||window.jimuConfig.isInPortal)return yield this.handleWebTierAndUpdatePortalAndInitSession(t.portalUrl,t.clientId,t.isWebTier).then((()=>e));if(window.jimuConfig.isOutOfExb){const t=xf(e.attributes.portalUrl);return this.handleWebTierAndUpdatePortalAndInitSession(t,e.attributes.clientId,!!e.attributes.isWebTier).then((()=>e))}return Promise.resolve(e)}))}upgradeAppConfig(e){return $w(this,void 0,void 0,(function*(){return Aw.valid(e.exbVersion)&&Aw.valid(Bw.exbVersion)?Aw.lt(e.exbVersion,Bw.exbVersion)?yield(new Fw).upgrade(e,e.exbVersion,Bw.exbVersion,"app").then((e=>(e.exbVersion=Bw.exbVersion,e))):e.exbVersion===Bw.exbVersion?Promise.resolve(e):Promise.reject(new Error(this.intl.formatMessage({id:"versionIsHigh",defaultMessage:lv.versionIsHigh}))):yield Promise.reject(new Error(this.intl.formatMessage({id:"badVersion",defaultMessage:lv.badVersion})))}))}handleWebTierAndUpdatePortalAndInitSession(e,t,r){return $w(this,void 0,void 0,(function*(){if(r)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);if(null==r)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);{tg().dispatch(sm({isWebTier:!1}));const e=Xm.getInstance();return e.getMainSession()?Promise.resolve():e.initSession()}}))}checkWebTierAndUpdatePortalAndInitSession(e,t){return $w(this,void 0,void 0,(function*(){const t=Xm.getInstance();return t.getSessionFromWebTierPortal(e).then((e=>{let r=!1;return e?(r=!0,tg().dispatch(sm({isWebTier:r})),t.initSession(),t.getMainSession()?r:(t.writeAuthInfo(e),t.initSession().then((()=>r)))):(r=!1,tg().dispatch(sm({isWebTier:r})),t.initSession().then((()=>r)))}))}))}processRawConfig(e){return $w(this,void 0,void 0,(function*(){return this.processAppConfigAfterLoad(e),yield this.loadAllWidgetsManifest(e).then((e=>$w(this,void 0,void 0,(function*(){return yield this.applyAppConfigProcessorExtension(e)})))).then((e=>(this.addDefaultLabelAndIcon(e),e)))}))}updateAppInfoForDeployedApp(e){if(window.jimuConfig.isOutOfExb){const t={name:e.title,description:e.description};tg().dispatch(Eg(t))}}loadRawAppConfig(){return $w(this,void 0,void 0,(function*(){const e=cf.getInstance().getExtensions(Up.AppConfigService)[0];return e?yield e.loadAppConfig():yield this.loadAppConfigWithDefault()}))}loadAppConfigWithDefault(){return $w(this,void 0,void 0,(function*(){const e=tg().getState();if(!e.appContext.isBuilder){const e=oh().appId;if(e)return window.jimuConfig.isDevEdition?yield this.loadAppConfigFromLocalServer(e):yield this.loadAppConfigFromPortal(e)}let t=e.queryObject.config;t||(t="config.json");const r=t.split(":");if(2===r.length&&"item"===r[0])return yield this.loadAppConfigFromPortal(r[1]);if(eh(t)&&!/^https:\/\/(.)+\.arcgis\.com/.test(t.trim())){const e="Only *.arcgis.com is allowed.";return console.error(e),yield Promise.reject({message:e})}return yield window.fetch(t).then((e=>$w(this,void 0,void 0,(function*(){return yield e.json()}))))}))}addWebmapOrWebsceneToAppConfig(e){if(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder)return;"template"!==window.jimuConfig.appFolderName&&(e.template=null);const t=tg().getState().queryObject;Qf(e,null==t?void 0:t.webmap,null==t?void 0:t.webscene)}loadAppConfigFromLocalServer(e){return $w(this,void 0,void 0,(function*(){const t=tg().getState().queryObject.draft;return"true"===t||"1"===t?yield window.fetch(`/apps/${e}/resources/config/config.json`).then((e=>$w(this,void 0,void 0,(function*(){return yield e.json()})))):yield window.fetch(`/apps/${e}/config.json`).then((e=>$w(this,void 0,void 0,(function*(){return yield e.json()}))))}))}loadAppConfigFromPortal(e){return $w(this,void 0,void 0,(function*(){const t=Xm.getInstance(),r=(new Date).getTime(),n=tg().getState().queryObject.draft;return"true"===n||"1"===n?yield(0,Gn.WY)(`${ff(tg().getState().portalUrl)}/content/items/${e}/resources/config/config.json`,{authentication:t.getSessionByUrl(tg().getState().portalUrl),httpMethod:"GET",params:{timestamp:r}}).catch((t=>$w(this,void 0,void 0,(function*(){return yield this._handleAuthError(t,e)})))):yield(0,Km.m_)(e,{portal:ff(tg().getState().portalUrl),authentication:t.getSessionByUrl(tg().getState().portalUrl)}).catch((t=>$w(this,void 0,void 0,(function*(){return yield this._handleAuthError(t,e)}))))}))}_handleAuthError(e,t){return $w(this,void 0,void 0,(function*(){const r=!(window===window.top||window.jimuConfig.isInBuilder);return yield Xm.getInstance().handleAuthError(e,r).then((()=>$w(this,void 0,void 0,(function*(){return r?(ov(t),tv(),mv(cv.Experience).then((e=>{e.valid||tg().dispatch(Bm(e.invalidMessage))})).catch((e=>{console.error(e),tg().dispatch(Bm(e.message))})),ev(tg().getState().portalUrl),nv(t).then((e=>(tg().dispatch(Eg(e)),e))),this.loadAppConfigFromPortal(t)):Promise.reject({})}))))}))}applyAppConfigProcessorExtension(e){return $w(this,void 0,void 0,(function*(){const t=cf.getInstance().getExtensions(Up.AppConfigProcessor)[0];return t?yield t.process(e):yield Promise.resolve(e)}))}loadAllWidgetsManifest(e){return $w(this,void 0,void 0,(function*(){const t=[],r=jw.getInstance();return $f(e).forEach(((n,o)=>{const i=n,a=i.uri;if(a)return e.useCachedManifest&&e.widgetsManifest[a]?(i._originManifest=e.widgetsManifest[a],void t.push(r.processWidgetManifest(i).then((()=>$w(this,void 0,void 0,(function*(){return yield r.registerManifestProps(n)})))))):void t.push(r.loadWidgetManifest(i.uri).then((e=>$w(this,void 0,void 0,(function*(){return i._originManifest=e,yield r.processWidgetManifest(i).then((()=>$w(this,void 0,void 0,(function*(){return yield r.registerManifestProps(i)}))))}))),(e=>$w(this,void 0,void 0,(function*(){return console.error(e),yield Promise.resolve()})))))})),yield Promise.all(t).then((t=>e))}))}processAppConfigAfterLoad(e){this.handleEmbedMode(e),this.addDefaultValues(e),this.fixAllIds(e),this.fixWidgetUri(e),this.fixThemeUri(e),this.addWidgetContext(e),this.addDefaultPageStructure(e)}handlePortalResourceInConfig(e){return $w(this,void 0,void 0,(function*(){if(window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder)return yield Promise.resolve(e);const t=Xm.getInstance().getMainSession();if(t&&t.token){const r=t.token;return yield _f(e,r)}return yield _f(e,null)}))}handleEmbedMode(e){const t=tg().getState().queryObject.embedded;"true"!==t&&"1"!==t||Object.keys(e.pages).forEach((t=>{e.pages[t].header=!1,e.pages[t].footer=!1}))}addDefaultPageStructure(e){e.pageStructure||(e.pageStructure=[],Object.keys(e.pages).forEach((t=>{e.pageStructure.push({[t]:[]})})))}fixAllIds(e){this.fixId(e.pages),this.fixId(e.widgets),this.fixId(e.sections),this.fixId(e.views),this.fixId(e.dialogs),this.fixId(e.messageConfigs),this.fixId(e.dataSources),Gf(e)}fixId(e){e&&Object.keys(e).forEach((t=>{"string"!=typeof e[t]&&(e[t].id=t)}))}fixWidgetUri(e){$f(e).forEach((e=>{/\/$/.test(e.uri)||(e.uri=e.uri+"/")}))}fixThemeUri(e){/\/$/.test(e.theme)||(e.theme=e.theme+"/")}addWidgetContext(e){$f(e).forEach((e=>{const t=Nf(e.uri);e.context=t}))}addDefaultValues(e){return e.attributes||(e.attributes={}),e.widgets||(e.widgets={}),e.widgetsManifest||(e.widgetsManifest={}),e.views||(e.views={}),e.sections||(e.sections={}),e.dialogs||(e.dialogs={}),e.pages||(e.pages={}),e.layouts||(e.layouts={}),e.dataSources||(e.dataSources={}),e.messageConfigs||(e.messageConfigs={}),this.addDefaultPageVisible(e),e}addDefaultPageVisible(e){Object.keys(e.pages).forEach((t=>{void 0===e.pages[t].isVisible&&(e.pages[t].isVisible=!0)}))}addDefaultLabelAndIcon(e){this.addPageLabel(e),Object.keys(e.dialogs||{}).forEach((t=>{e.dialogs[t].label||(e.dialogs[t].label=Ff(e,"dialog",this.intl.formatMessage({id:"dialog",defaultMessage:lv.dialog})))})),e.layouts&&Object.keys(e.layouts).filter((t=>e.layouts[t].type===Kp.FlowLayout)).forEach((t=>{const r=e.layouts[t];Object.keys(r.content||{}).filter((e=>r.content[e].type===Xp.Widget)).map((e=>r.content[e].widgetId)).forEach((t=>{const r=e.widgets[t];if(r&&!r.label&&"widgets/layout/row/"===r.uri){const t=this.intl.formatMessage({id:"block",defaultMessage:lv.block});r.label=Ff(e,"widget",t)}}))})),$f(e).forEach((t=>{jf(e,t)})),Object.keys(e.sections||{}).forEach((t=>{const r=e.sections[t];r.label||(r.label=Ff(e,"section",this.intl.formatMessage({id:"section",defaultMessage:lv.section})))})),Object.keys(e.views||{}).forEach((t=>{const r=e.views[t];r.label||(r.label=Ff(e,"view",this.intl.formatMessage({id:"view",defaultMessage:lv.view})))})),Object.keys(e.screenGroups||{}).forEach((t=>{const r=e.screenGroups[t];r.label||(r.label=Ff(e,"screenGroup",this.intl.formatMessage({id:"screenGroup",defaultMessage:lv.screenGroup})))})),Object.keys(e.screens||{}).forEach((t=>{const r=e.screens[t];r.label||(r.label=Ff(e,"screen",this.intl.formatMessage({id:"screen",defaultMessage:lv.screen})))})),Lf(e)}addPageLabel(e){e.pageStructure&&e.pageStructure.forEach((t=>{const r=Object.keys(t)[0];e.pages[r]&&!e.pages[r].label&&(e.pages[r].label=Ff(e,"page",this.intl.formatMessage({id:"page",defaultMessage:lv.page}))),t[r].forEach((t=>{e.pages[t]&&!e.pages[t].label&&(e.pages[t].label=Ff(e,"page",this.intl.formatMessage({id:"page",defaultMessage:lv.page})))}))}))}}var Gw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Vw{constructor(e){e.id&&(this.id=e.id),e.name&&(this.name=e.name),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.index&&(this.index=e.index),e.widgetId&&(this.widgetId=e.widgetId)}destroy(){}confirm(e,t){return Gw(this,void 0,void 0,(function*(){return{needed:!1}}))}}class qw extends Vw{isSupported(e,t){return Gw(this,void 0,void 0,(function*(){return!0}))}onExecute(e,t){return Gw(this,void 0,void 0,(function*(){return yield Promise.resolve(!0)}))}}var zw=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class Hw extends Vw{isSupported(e,t){return zw(this,void 0,void 0,(function*(){if(null==e||"function"!=typeof e.query)return!1;const t=e;return yield t.allowToExportData()}))}confirm(e,t){return zw(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance)return{needed:!1};const t=e;if("function"==typeof t.queryCount){const e=(yield t.queryCount({})).count;if(e>2e3){const t=Xd();let r,n;return e>5e3?(r=t.formatMessage({id:"tooLargeWarningTitle"},{max:"5000"}),n=t.formatMessage({id:"tooLargeWarningContent"},{max:"5000"})):(r=t.formatMessage({id:"largeWarningTitle"}),n=t.formatMessage({id:"largeWarningContent"})),{needed:!0,content:{title:r,content:n,okLabel:t.formatMessage({id:"export"}),cancelLabel:t.formatMessage({id:"cancel"})}}}}return{needed:!1}}))}getRecords(e){return zw(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance)return e.getSourceRecords();const t=e;if("function"==typeof t.queryCount){const e=1e3,r=(yield t.queryCount({})).count;return yield this.query(t,e,Math.min(5e3,r))}return[]}))}query(e,t,r){return zw(this,void 0,void 0,(function*(){const n=t>0?t:r,o=Math.ceil(r/n);let i=[];for(let t=1;t<=o;t++){const r=yield e.query({page:t,pageSize:n});i=i.concat(r.records)}return i}))}}class Yw extends Hw{onExecute(e,t){return r=this,n=void 0,i=function*(){const t=(yield this.getRecords(e)).map((e=>e.toJson())),r=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return(0,Bn.saveAs)(r,"DataRecords.json"),Promise.resolve(!0)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}}function Jw(){var e;return","===Kd(null!==(e=tg().getState().appContext.locale)&&void 0!==e?e:"en")?";":","}function Xw(e,t,r){const n=t.find(((t,n)=>{var o;return(null!==(o=null==r?void 0:r[n])&&void 0!==o?o:t)===e}));return n?Xw(`_${e}`,t,r):e}function Kw(e,t){let r,n;const o=e.getSchema();if(null!=(null==o?void 0:o.fields))r=Object.keys(o.fields),n=r.map((e=>o.fields[e].alias));else{const e=t[0];r=Object.keys(e.getData())}const i=function(e){return"esriGeometryPoint"===e.getGeometryType()}(e);let a=function(e,t,r){const n=Jw();let o="",i=!1,a=!1;if(e.forEach(((r,s)=>{var u;let l=null!==(u=null==t?void 0:t[s])&&void 0!==u?u:r;l.includes(n)&&(l=`"${l}"`),i=i||"x"===l,a=a||"y"===l,s!==e.length-1?o+=`${l}${n}`:o+=l})),r){const r=Xw("x",e,t),n=Xw("y",e,t);o+=`,${r},${n}`}return`${o}\r\n`}(r,n,i);return t.forEach((e=>{a+=function(e,t,r){const n=Xd(),o=Jw();let i="";if(t.forEach(((r,a)=>{var s;let u=null!==(s=e.getFormattedFieldValue(r,n))&&void 0!==s?s:"";u.includes(o)&&(u=`"${u}"`),a!==t.length-1?i+=`${u}${o}`:i+=u})),r){const t=e.getGeometry();t&&(i+=`,${t.x},${t.y}`)}return`${i}\r\n`}(e,r,i)})),new Blob([a],{type:"text/plain;charset=utf-8"})}class Qw extends Hw{onExecute(e,t){return r=this,n=void 0,i=function*(){const t=yield this.getRecords(e),r=Kw(e,t);return(0,Bn.saveAs)(r,"DataRecords.csv"),!0},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}}function Zw(e){let t=0,r=0;const n=e.length;let o,i=e[r];for(;r<n-1;r++)o=e[r+1],t+=(o[0]-i[0])*(o[1]+i[1]),i=o;return t>=0}function eI(e,t,r,n){const o=(n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]),i=(t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]),a=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(0!==a){const e=o/a,t=i/a;if(e>=0&&e<=1&&t>=0&&t<=1)return!0}return!1}function tI(e,t){for(let r=0;r<e.length-1;r++)for(let n=0;n<t.length-1;n++)if(eI(e[r],e[r+1],t[n],t[n+1]))return!0;return!1}function rI(e,t){const r=tI(e,t),n=function(e,t){let r=!1;for(let n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[i][0]-e[n][0])*(t[1]-e[n][1])/(e[i][1]-e[n][1])+e[n][0]&&(r=!r);return r}(e,t[0]);return!(r||!n)}function nI(e,t){const r={},n=e.getGeometry(),o=e.getData();if((n||o)&&(r.type="Feature",r.geometry=n?function(e){var t;let r={};const n=e;"number"==typeof(null==n?void 0:n.x)&&"number"==typeof(null==n?void 0:n.y)&&(r.type="Point",r.coordinates=[n.x,n.y],"number"==typeof n.z&&r.coordinates.push(n.z));const o=e;(null==o?void 0:o.points)&&(r.type="MultiPoint",r.coordinates=o.points.slice(0));const i=e;(null==i?void 0:i.paths)&&(1===i.paths.length?(r.type="LineString",r.coordinates=i.paths[0].slice(0)):(r.type="MultiLineString",r.coordinates=i.paths.slice(0)));const a=e;(null==a?void 0:a.rings)&&(r=function(e){const t=[],r=[];let n,o,i;for(let n=0;n<e.length;n++){const o=(function(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}((a=e[n].slice(0))[0],a[a.length-1])||a.push(a[0]),a);if(!(o.length<4))if(Zw(o)){const e=[o.slice().reverse()];t.push(e)}else r.push(o.slice().reverse())}var a;const s=[];for(;r.length;){i=r.pop();let e=!1;for(n=t.length-1;n>=0;n--)if(o=t[n][0],rI(o,i)){t[n].push(i),e=!0;break}e||s.push(i)}for(;s.length;){i=s.pop();let e=!1;for(n=t.length-1;n>=0;n--)if(o=t[n][0],tI(o,i)){t[n].push(i),e=!0;break}e||t.push([i.reverse()])}return 1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}(a.rings.slice(0)));const s=e;return"number"==typeof(null==s?void 0:s.xmin)&&"number"==typeof(null==s?void 0:s.ymin)&&"number"==typeof(null==s?void 0:s.xmax)&&"number"==typeof(null==s?void 0:s.ymax)&&(r.type="Polygon",r.coordinates=[[[s.xmax,s.ymax],[s.xmin,s.ymax],[s.xmin,s.ymin],[s.xmax,s.ymin],[s.xmax,s.ymax]]]),(null===(t=null==e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),r}(n):null,r.properties=o?function(e){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(o):null,o))try{r.id=function(e,t){const r=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"];for(let t=0;t<r.length;t++){const n=r[t];if(n in e&&("string"==typeof e[n]||"number"==typeof e[n]))return e[n]}throw Error("No valid id attribute found")}(o,t)}catch(e){}return JSON.stringify(r.geometry)===JSON.stringify({})&&(r.geometry=null),r}function oI(e,t){const r={type:"FeatureCollection",features:[]};for(let n=0;n<e.length;n++)r.features.push(nI(e[n],t));return r}var iI=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class aI extends Hw{isSupported(e,t){const r=Object.create(null,{isSupported:{get:()=>super.isSupported}});return iI(this,void 0,void 0,(function*(){return(yield r.isSupported.call(this,e,t))&&null!=e.getGeometryType()}))}onExecute(e,t){var r;return iI(this,void 0,void 0,(function*(){const t=oI(yield this.getRecords(e),null===(r=e.getSchema())||void 0===r?void 0:r.idField),n=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return(0,Bn.saveAs)(n,"DataRecords.geojson"),yield Promise.resolve(!0)}))}}var sI=s(8891);const uI={"opening-tour":"OnboardingGuide"};class lI{constructor(){this.guideModules={}}static getInstance(){return lI.instance||(lI.instance=new lI,window._guideManager=lI.instance),lI.instance}registerGuideModule(e,t){this.guideModules[e]||(this.guideModules[e]=t)}getGuideModule(e){return t=this,r=void 0,o=function*(){if(this.guideModules[e])return yield Promise.resolve(this.guideModules[e]);const t=/(^|\/)widgets\//.test(e),r=t?`${e}/dist/guide/guide`:"jimu-ui/basic/guide";return yield sI.moduleLoader.loadModule(r).then((r=>{const n=t?null==r?void 0:r.default:null==r?void 0:r[uI[e]];return this.registerGuideModule(e,n),n}))},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,s)}u((o=o.apply(t,r||[])).next())}));var t,r,n,o}}const cI=e=>!(!e||!e.tagName)&&("BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"DIV"===e.tagName&&"true"===e.contentEditable||"SPAN"===e.tagName&&"true"===e.contentEditable),dI=e=>{console.log(":keyboard event:",e)},pI=function(e="keydown",t=null){if("undefined"==typeof window)return!1;const r={};let n=null,o=null;null===t&&(t=window.document);const i=!cI(t);function a(e){if(av(e))return;if(i&&(e=>cI(e.target||e.nativeEvent.target))(e))return;o&&o(e);const t=(e=>{let t="";const r=[];if(navigator.userAgent.includes("Edge")&&-1!==e.key.indexOf("-manual"))t=e.key.replace("-manual","");else if("code"in e)t=sv[e.code]?sv[e.code]:e.code;else{const r=e.which;t=String.fromCharCode(r).toLowerCase(),sv[r]&&(t=sv[r])}return e.metaKey&&r.push("command"),e.ctrlKey&&r.push("Ctrl"),e.shiftKey&&r.push("Shift"),e.altKey&&r.push("Alt"),r.push(t),r.join("+")})(e),a=r[t.toLowerCase()]||[];if("function"==typeof n){const r=a.length>0;n(t,r,e)}a.length&&e.preventDefault();let s=!0;for(let t=a.length-1;t>=0&&(a[t]&&(s=a[t](e)),s);t--);return!!s&&void 0}function s(){t.addEventListener(e,a)}return s(),{subscribe:function(e,t){return(e=e.toLowerCase()).replace(/\s/,""),void 0===r[e]&&(r[e]=[]),r[e].push(t),{unsubscribe:()=>{const n=r[e].indexOf(t);r[e].splice(n,1)}}},setMonitor:function(e=null){n=!0===e?dI:e},startListening:s,stopListening:function(){t.removeEventListener(e,a)},setKeyboardTriggerFunction:function(e){o=e}}};class fI extends C.PureComponent{constructor(e){super(e),this.subs=[],this.keyboardListener=pI(e.eventName,this.props.element),this.props.onKeyboardTrigger&&this.keyboardListener.setKeyboardTriggerFunction(this.props.onKeyboardTrigger)}componentDidMount(){const{bindings:e,monitor:t}=this.props;Object.keys(e).forEach((t=>{const r=e[t],n=this.keyboardListener.subscribe(t,r);this.subs.push(n)})),t&&this.keyboardListener.setMonitor(t)}componentWillUnmount(){this.subs.forEach((e=>e.unsubscribe()))}render(){return null}}fI.defaultProps={eventName:"keydown",bindings:{},monitor:null};const hI=fI;class gI extends C.PureComponent{constructor(){super(...arguments),this.onKeyboardTrigger=e=>{e.key.includes("-manual")||qp().appBuilderSync.letBuilderResponseToKeyboard(e)},this.isMac=()=>/macintosh|mac os x/i.test(navigator.userAgent)}render(){return this.isMac()?C.createElement(hI,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"command+keys":()=>!1}}):C.createElement(hI,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"ctrl+keys":()=>!1}})}}function mI(){const e=we((e=>{var t;return null===(t=e.appInfo)||void 0===t?void 0:t.name})),t=we((e=>{var t;const r=null===(t=e.appConfig)||void 0===t?void 0:t.pages[e.appRuntimeInfo.currentPageId];return r?r.isDefault?null:r.label:null}));return(0,C.useEffect)((()=>{if(e){const r=t?`${t} | ${e}`:e;document.title=r}})),null}var vI=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),yI=Math.abs,bI=String.fromCharCode;function SI(e){return e.trim()}function wI(e,t,r){return e.replace(t,r)}function II(e,t){return e.indexOf(t)}function EI(e,t){return 0|e.charCodeAt(t)}function OI(e,t,r){return e.slice(t,r)}function CI(e){return e.length}function TI(e){return e.length}function AI(e,t){return t.push(e),e}var xI=1,DI=1,PI=0,RI=0,_I=0,kI="";function NI(e,t,r,n,o,i,a){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:xI,column:DI,length:a,return:""}}function MI(e,t,r){return NI(e,t.root,t.parent,r,t.props,t.children,0)}function jI(){return _I=RI>0?EI(kI,--RI):0,DI--,10===_I&&(DI=1,xI--),_I}function LI(){return _I=RI<PI?EI(kI,RI++):0,DI++,10===_I&&(DI=1,xI++),_I}function UI(){return EI(kI,RI)}function FI(){return RI}function $I(e,t){return OI(kI,e,t)}function BI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WI(e){return xI=DI=1,PI=CI(kI=e),RI=0,[]}function GI(e){return kI="",e}function VI(e){return SI($I(RI-1,HI(91===e?e+2:40===e?e+1:e)))}function qI(e){for(;(_I=UI())&&_I<33;)LI();return BI(e)>2||BI(_I)>3?"":" "}function zI(e,t){for(;--t&&LI()&&!(_I<48||_I>102||_I>57&&_I<65||_I>70&&_I<97););return $I(e,FI()+(t<6&&32==UI()&&32==LI()))}function HI(e){for(;LI();)switch(_I){case e:return RI;case 34:case 39:return HI(34===e||39===e?e:_I);case 40:41===e&&HI(e);break;case 92:LI()}return RI}function YI(e,t){for(;LI()&&e+_I!==57&&(e+_I!==84||47!==UI()););return"/*"+$I(t,RI-1)+"*"+bI(47===e?e:LI())}function JI(e){for(;!BI(UI());)LI();return $I(e,RI)}var XI="-ms-",KI="-moz-",QI="-webkit-",ZI="comm",eE="rule",tE="decl";function rE(e,t){for(var r="",n=TI(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function nE(e,t,r,n){switch(e.type){case"@import":case tE:return e.return=e.return||e.value;case ZI:return"";case eE:e.value=e.props.join(",")}return CI(r=rE(e.children,n))?e.return=e.value+"{"+r+"}":""}function oE(e,t){switch(function(e,t){return(((t<<2^EI(e,0))<<2^EI(e,1))<<2^EI(e,2))<<2^EI(e,3)}(e,t)){case 5103:return QI+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return QI+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return QI+e+KI+e+XI+e+e;case 6828:case 4268:return QI+e+XI+e+e;case 6165:return QI+e+XI+"flex-"+e+e;case 5187:return QI+e+wI(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return QI+e+XI+"flex-item-"+wI(e,/flex-|-self/,"")+e;case 4675:return QI+e+XI+"flex-line-pack"+wI(e,/align-content|flex-|-self/,"")+e;case 5548:return QI+e+XI+wI(e,"shrink","negative")+e;case 5292:return QI+e+XI+wI(e,"basis","preferred-size")+e;case 6060:return QI+"box-"+wI(e,"-grow","")+QI+e+XI+wI(e,"grow","positive")+e;case 4554:return QI+wI(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return wI(wI(wI(e,/(zoom-|grab)/,QI+"$1"),/(image-set)/,QI+"$1"),e,"")+e;case 5495:case 3959:return wI(e,/(image-set\([^]*)/,QI+"$1$`$1");case 4968:return wI(wI(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+QI+e+e;case 4095:case 3583:case 4068:case 2532:return wI(e,/(.+)-inline(.+)/,QI+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(CI(e)-1-t>6)switch(EI(e,t+1)){case 109:if(45!==EI(e,t+4))break;case 102:return wI(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+KI+(108==EI(e,t+3)?"$3":"$2-$3"))+e;case 115:return~II(e,"stretch")?oE(wI(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==EI(e,t+1))break;case 6444:switch(EI(e,CI(e)-3-(~II(e,"!important")&&10))){case 107:return wI(e,":",":"+QI)+e;case 101:return wI(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+QI+(45===EI(e,14)?"inline-":"")+"box$3$1"+QI+"$2$3$1"+XI+"$2box$3")+e}break;case 5936:switch(EI(e,t+11)){case 114:return QI+e+XI+wI(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return QI+e+XI+wI(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return QI+e+XI+wI(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return QI+e+XI+e+e}return e}function iE(e){return GI(aE("",null,null,null,[""],e=WI(e),0,[0],e))}function aE(e,t,r,n,o,i,a,s,u){for(var l=0,c=0,d=a,p=0,f=0,h=0,g=1,m=1,v=1,y=0,b="",S=o,w=i,I=n,E=b;m;)switch(h=y,y=LI()){case 34:case 39:case 91:case 40:E+=VI(y);break;case 9:case 10:case 13:case 32:E+=qI(h);break;case 92:E+=zI(FI()-1,7);continue;case 47:switch(UI()){case 42:case 47:AI(uE(YI(LI(),FI()),t,r),u);break;default:E+="/"}break;case 123*g:s[l++]=CI(E)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:f>0&&CI(E)-d&&AI(f>32?lE(E+";",n,r,d-1):lE(wI(E," ","")+";",n,r,d-2),u);break;case 59:E+=";";default:if(AI(I=sE(E,t,r,l,c,o,s,b,S=[],w=[],d),i),123===y)if(0===c)aE(E,t,I,I,S,i,d,s,w);else switch(p){case 100:case 109:case 115:aE(e,I,I,n&&AI(sE(e,I,I,0,0,o,s,b,o,S=[],d),w),o,w,d,s,n?S:w);break;default:aE(E,I,I,I,[""],w,d,s,w)}}l=c=f=0,g=v=1,b=E="",d=a;break;case 58:d=1+CI(E),f=h;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==jI())continue;switch(E+=bI(y),y*g){case 38:v=c>0?1:(E+="\f",-1);break;case 44:s[l++]=(CI(E)-1)*v,v=1;break;case 64:45===UI()&&(E+=VI(LI())),p=UI(),c=CI(b=E+=JI(FI())),y++;break;case 45:45===h&&2==CI(E)&&(g=0)}}return i}function sE(e,t,r,n,o,i,a,s,u,l,c){for(var d=o-1,p=0===o?i:[""],f=TI(p),h=0,g=0,m=0;h<n;++h)for(var v=0,y=OI(e,d+1,d=yI(g=a[h])),b=e;v<f;++v)(b=SI(g>0?p[v]+" "+y:wI(y,/&\f/g,p[v])))&&(u[m++]=b);return NI(e,t,r,0===o?eE:s,u,l,c)}function uE(e,t,r){return NI(e,t,r,ZI,bI(_I),OI(e,2,-2),0)}function lE(e,t,r,n){return NI(e,t,r,tE,OI(e,0,n),OI(e,n+1,-1),n)}var cE=function(e,t,r){for(var n=0,o=0;n=o,o=UI(),38===n&&12===o&&(t[r]=1),!BI(o);)LI();return $I(e,RI)},dE=new WeakMap,pE=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||dE.get(r))&&!n){dE.set(e,!0);for(var o=[],i=function(e,t){return GI(function(e,t){var r=-1,n=44;do{switch(BI(n)){case 0:38===n&&12===UI()&&(t[r]=1),e[r]+=cE(RI-1,t,r);break;case 2:e[r]+=VI(n);break;case 4:if(44===n){e[++r]=58===UI()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=bI(n)}}while(n=LI());return e}(WI(e),t))}(t,o),a=r.props,s=0,u=0;s<i.length;s++)for(var l=0;l<a.length;l++,u++)e.props[u]=o[s]?i[s].replace(/&\f/g,a[l]):a[l]+" "+i[s]}}},fE=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},hE=[function(e,t,r,n){if(!e.return)switch(e.type){case tE:e.return=oE(e.value,e.length);break;case"@keyframes":return rE([MI(wI(e.value,"@","@"+QI),e,"")],n);case eE:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return rE([MI(wI(t,/:(read-\w+)/,":-moz-$1"),e,"")],n);case"::placeholder":return rE([MI(wI(t,/:(plac\w+)/,":-webkit-input-$1"),e,""),MI(wI(t,/:(plac\w+)/,":-moz-$1"),e,""),MI(wI(t,/:(plac\w+)/,XI+"input-$1"),e,"")],n)}return""}))}}];const gE=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,o,i=e.stylisPlugins||hE,a={},s=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;s.push(e)}));var u,l,c,d,p=[nE,(d=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],f=(l=[pE,fE].concat(i,p),c=TI(l),function(e,t,r,n){for(var o="",i=0;i<c;i++)o+=l[i](e,t,r,n)||"";return o});o=function(e,t,r,n){u=r,rE(iE(e?e+"{"+t.styles+"}":t.styles),f),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new vI({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend}),nonce:e.nonce,inserted:a,registered:{},insert:o};return h.sheet.hydrate(s),h},mE=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}};function vE(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}var yE=function(e,t,r){var n=e.key+"-"+t.name;if(!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}};const bE=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},SE={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wE=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}};var IE=/[A-Z]|^ms/g,EE=/_EMO_([^_]+?)_([^]*?)_EMO_/g,OE=function(e){return 45===e.charCodeAt(1)},CE=function(e){return null!=e&&"boolean"!=typeof e},TE=wE((function(e){return OE(e)?e:e.replace(IE,"-$&").toLowerCase()})),AE=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(EE,(function(e,t,r){return DE={name:t,styles:r,next:DE},t}))}return 1===SE[e]||OE(e)||"number"!=typeof t||0===t?t:t+"px"};function xE(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return DE={name:r.name,styles:r.styles,next:DE},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)DE={name:n.name,styles:n.styles,next:DE},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=xE(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?n+=i+"{"+t[a]+"}":CE(a)&&(n+=TE(i)+":"+AE(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=xE(e,t,a);switch(i){case"animation":case"animationName":n+=TE(i)+":"+s+";";break;default:n+=i+"{"+s+"}"}}else for(var u=0;u<a.length;u++)CE(a[u])&&(n+=TE(i)+":"+AE(i,a[u])+";")}return n}(e,t,r);case"function":if(void 0!==e){var o=DE,i=r(e);return DE=o,xE(e,t,i)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var DE,PE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,RE=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";DE=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=xE(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=xE(r,t,e[a]),n&&(o+=i[a]);PE.lastIndex=0;for(var s,u="";null!==(s=PE.exec(o));)u+="-"+s[1];return{name:bE(o)+u,styles:o,next:DE}},_E=Object.prototype.hasOwnProperty,kE=(0,C.createContext)("undefined"!=typeof HTMLElement?gE({key:"css"}):null),NE=kE.Provider,ME=function(e){return(0,C.forwardRef)((function(t,r){var n=(0,C.useContext)(kE);return e(t,n,r)}))},jE=(0,C.createContext)({}),LE=mE((function(e){return mE((function(t){return function(e,t){return"function"==typeof t?t(e):N({},e,t)}(e,t)}))})),UE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",FE=function(e,t){var r={};for(var n in t)_E.call(t,n)&&(r[n]=t[n]);return r[UE]=e,r},$E=ME((function(e,t,r){var n=e.css;"string"==typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var o=e[UE],i=[n],a="";"string"==typeof e.className?a=vE(t.registered,i,e.className):null!=e.className&&(a=e.className+" ");var s=RE(i,void 0,(0,C.useContext)(jE));yE(t,s,"string"==typeof o),a+=t.key+"-"+s.name;var u={};for(var l in e)_E.call(e,l)&&"css"!==l&&l!==UE&&(u[l]=e[l]);return u.ref=r,u.className=a,(0,C.createElement)(o,u)})),BE=function(e,t){var r=arguments;if(null==t||!_E.call(t,"css"))return C.createElement.apply(void 0,r);var n=r.length,o=new Array(n);o[0]=$E,o[1]=FE(e,t);for(var i=2;i<n;i++)o[i]=r[i];return C.createElement.apply(null,o)},WE=ME((function(e,t){var r=e.styles,n=RE([r],void 0,(0,C.useContext)(jE)),o=(0,C.useRef)();return(0,C.useLayoutEffect)((function(){var e=t.key+"-global",r=new vI({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(r.before=t.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),r.hydrate([a])),o.current=[r,i],function(){r.flush()}}),[t]),(0,C.useLayoutEffect)((function(){var e=o.current,r=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&yE(t,n.next,!0),r.tags.length){var i=r.tags[r.tags.length-1].nextElementSibling;r.before=i,r.flush()}t.insert("",n,r,!1)}}),[t,n.name]),null}));function GE(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return RE(t)}var VE=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class qE extends C.PureComponent{constructor(e){super(e),this.getKeyboardComponent=()=>{if(window.jimuConfig.isBuilder){const e=$p("jimu-for-builder").BuilderKeyboardComponent;return BE(e,null)}return window.jimuConfig.isInBuilder?BE(gI,null):null},this.setClientIdAndSignIn=(e,t,r)=>{var n;const o=this.clientIdInput.current.value,i=tg().getState().appStateInBuilder;let a=null==i?void 0:i.appConfig,s=(null==a?void 0:a.connections)||[];if(s=s.concat([{type:"portal",portalUrl:e,clientId:o}]),o&&a){const i=Xm.getInstance(),u=$p("jimu-for-builder").builderAppSync;if(t)return null==i?void 0:i.signIn(null===(n=window.location)||void 0===n?void 0:n.href,!0,e,o).then((t=>VE(this,void 0,void 0,(function*(){a=a.set("connections",s),u.publishAppConfigChangeToApp(a),tg().dispatch(Gm(e)),r&&(yield null==i?void 0:i.generateSeverSessionByPortalSession(t,r)),i.onClientIdDialogFinished(e,o)})))).catch((t=>{console.warn("sign in faild from set client id dialog."),tg().dispatch(Gm(e)),i.onClientIdDialogFinished(e,o,t)}));a=a.set("connections",s),u.publishAppConfigChangeToApp(a),tg().dispatch(Gm(e)),i.onClientIdDialogFinished(e,o)}},this.closeSetClientIdAlert=e=>{$p("jimu-for-builder").builderAppSync.publishSetClientIdAlertIsCancelled(e),tg().dispatch(Gm(e)),Xm.getInstance().onClientIdDialogFinished(e,null,new Error("setting clientId is cancelled."))};const t={},r=this.getPageId();t.pageStatus=Ce(r?{[r]:!0}:{}),window.isNode||window.initStoreState?t.preloadWidgetsLoaded=!0:t.preloadWidgetsLoaded=!1,this.state=t,this.onDismiss=this.onDismiss.bind(this),this.reload=this.reload.bind(this),this.setClientIdAndSignIn=this.setClientIdAndSignIn.bind(this),this.clientIdInput=C.createRef()}getLayoutEntryPath(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",e}getPageRenderClass(){return $p(this.getLayoutEntryPath())?$p(this.getLayoutEntryPath()).PageRenderer:(console.error("Please init jimu-layouts."),null)}getJimuUI(){return $p("jimu-ui")?$p("jimu-ui"):(console.error("Please init jimu-ui."),null)}componentDidMount(){this.addA11yKeyboardEvent(),Ww.getInstance({intl:this.props.intl}).loadAppConfig().then((e=>{this.props.dispatch(bg(e));const t=nh(this.props.queryObject,e);return Object.keys(t).forEach((e=>{this.props.dispatch(Nm(e,t[e]))})),this.props.dispatch(ym(this.getPageId())),e})).then((e=>{this.loadPreloadWidgets(e).then((()=>{Ip(),window.jimuConfig.isInBuilder&&vg.getInstance().createAllDataSources()})).catch((e=>{console.error("Initializing theme manager failed.",e),this.props.dispatch(Sg(e.message))}))})).catch((e=>{console.error("Load app config error.",e),this.props.dispatch(Sg(e.message))}))}componentWillUnmount(){const e=document.getElementById("jimu-base-style");e&&e.remove()}loadPreloadWidgets(e){var t;return VE(this,void 0,void 0,(function*(){const r=[],n=(null===(t=e.preloadWidgets)||void 0===t?void 0:t.asMutable())||[];return Object.keys(e.widgets).forEach((t=>{const o=e.widgets[t];r.includes(o.uri)&&!n.includes(o.uri)&&n.push(o.uri)})),0===n.length?(this.setState({preloadWidgetsLoaded:!0}),Promise.resolve()):Promise.all(n.map((e=>VE(this,void 0,void 0,(function*(){return yield jw.getInstance().loadWidgetClassByUri(e)}))))).then((()=>{this.setState({preloadWidgetsLoaded:!0})}))}))}componentDidUpdate(){const e=this.getPageId();let t=this.state.pageStatus;e&&!t[e]&&(Object.keys(t).forEach((e=>{t=t.set(e,!1)})),this.setState({pageStatus:t.set(e,!0)}))}addA11yKeyboardEvent(){if(window.jimuConfig.isInBuilder){const e=document.body;e.setAttribute("tabindex","0"),e.style.outlineOffset="-2px",e.addEventListener("keydown",(e=>{"BODY"!==e.target.tagName&&!e.target.classList.contains("app-dialog-modal")||"Tab"!==e.key||e.shiftKey||tg().getState().appRuntimeInfo.appMode!==Fi.Design||(e.preventDefault(),window.parent.document.querySelector("div.builder-dynamic-setting .jimu-btn").focus())}))}}getPageId(){if(!this.props.pages)return null;const e=oh();return e.pageId?e.pageId:Object.keys(this.props.pages).find((e=>this.props.pages[e].isDefault))}getDialogId(){return this.props.dialogJson&&(window.jimuConfig.isInBuilder||this.props.dialogJson.mode!==af.Anchored)?window.jimuConfig.isInBuilder&&this.props.dialogJson.mode===af.Anchored&&this.props.currentDialogId&&this.props.currentDialogId!==uh(this.props.queryObject.dlg,tg().getState().appConfig)?null:this.props.dialogJson.id:null}render(){const{pageStatus:e}=this.state,t=this.getPageRenderClass(),r=this.getJimuUI();if(this.props.loadAppConfigError)return Ip(),BE("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:this.props.loadAppConfigError}});if(!this.props.hasPrivilege)return Ip(),this.renderPrivilegeError();if(!this.props.appConfigLoaded||!t||!this.state.preloadWidgetsLoaded||Cu(this.props.themeVariables,{}))return null;const n=this.getPageId();if(!n)return console.error("No page to render."),null;if(!this.props.pages[n])return console.error("Invalid page id.",n),null;if(this.props.pages[n].type===nf.Folder)return console.error("This is a folder."),null;if(this.props.pages[n].linkUrl)return window.location.assign(this.props.pages[n].linkUrl),null;const o=r.Loading;return BE(C.Fragment,null,BE(mI,null),this.renderReloadAlert(this.props.themeVariables),this.renderSetClientIdAlert(this.props.themeVariables),BE(t,{pageStatus:e,dialogId:this.getDialogId()}),BE("div",{id:"helper-nodes-container"}),this.getKeyboardComponent(),o&&this.props.isBusy&&BE(o,{type:this.props.loadingType}))}renderPrivilegeError(){const{Button:e}=this.getJimuUI(),t=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black";return BE("div",{style:{width:"100vw",height:"100vh",color:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},BE("div",{dangerouslySetInnerHTML:{__html:this.props.privilegeError}}),BE(e,{size:"lg",style:{padding:"0.25rem 1rem",fontSize:"14px",userSelect:"none",lineHeight:1.5,borderRadius:"2px",color:"#fff",background:"#444",borderWidth:"1px",borderStyle:"solid",borderColor:"#444",marginTop:"20px",outline:"none",cursor:"pointer"},onClick:()=>{location.href="/"}},this.props.intl.formatMessage({id:"ok",defaultMessage:lv.ok})))}renderSetClientIdAlert(e){if(!window.jimuConfig.isBuilder)return null;const t=this.props.portalsNeedToRegisterClinetId&&this.props.portalsNeedToRegisterClinetId[0],r=null==t?void 0:t.portalUrl;if(!r)return null;const{AlertPopup:n,TextInput:o}=this.getJimuUI(),i=this.props.intl.formatMessage({id:"setClientIdMessage1",defaultMessage:lv.setClientIdMessage1},{register:this.props.intl.formatMessage({id:"registerText",defaultMessage:lv.registerText})});return BE(n,{isOpen:!0,title:"",onClickOk:()=>{this.setClientIdAndSignIn(r,null==t?void 0:t.needToSignIn,null==t?void 0:t.serviceUrl)},onClickClose:()=>{this.closeSetClientIdAlert(r)}},BE("div",{style:{color:`${e.colors.black}`,fontSize:`${tt(16)}`}},BE("p",null,i),BE("p",null,BE(rw,{id:"arcgisEnterpriseText",defaultMessage:lv.arcgisEnterpriseText})),BE("p",{style:{color:`${e.colors.palette.dark[300]}`}},r),BE("p",null,BE(rw,{id:"setClientIdMessage2",defaultMessage:lv.setClientIdMessage2})),BE(o,{css:GE`.input-wrapper {background-color: var(--light-300)}`,ref:this.clientIdInput})))}renderReloadAlert(e){if(window.jimuConfig.isInBuilder||window.jimuConfig.isSite&&"landing"===this.getPageId())return null;if(!this.props.hasNewVersion&&!this.props.userLocaleChanged)return null;const{Alert:t,Button:r}=this.getJimuUI(),n=this.props.hasNewVersion?BE(rw,{id:"versionUpdateMsg",defaultMessage:lv.versionUpdateMsg}):BE(rw,{id:"userLocaleChangeMsg",defaultMessage:lv.userLocaleChangeMsg});return BE(t,{form:"basic",type:"info",open:this.props.hasNewVersion,onClose:this.onDismiss,className:"pl-3 pr-3",closable:!0,style:{position:"absolute",zIndex:999,width:"100%",paddingTop:`${tt(11)}`,paddingBottom:`${tt(11)}`,backgroundColor:`${e.colors.palette.primary[100]}`,color:`${e.colors.black}`,fontSize:`${tt(16)}`}},n,BE(r,{size:"sm",type:"primary",className:"ml-3",onClick:this.reload,style:{minWidth:`${tt(78)}`,height:`${tt(26)}`,marginTop:`${tt(-2)}`}},BE(rw,{id:"doUpdate",defaultMessage:lv.doUpdate})))}onDismiss(){var e;this.props.dispatch(Fm(!1)),this.props.dispatch($m(!1)),window.jimuConfig.isBuilder&&(null===(e=window._appWindow)||void 0===e?void 0:e._appStore)&&(window._appWindow._appStore.dispatch({type:"SET_HAS_NEW_VERSION",hasNew:!1}),window._appWindow._appStore.dispatch({type:"USER_LOCALE_CHANGED",isChanged:!1}))}reload(){window.location.reload()}}const zE=cd(pe((e=>{var t;return e.appConfig?{appConfigLoaded:!0,customTheme:e.appConfig.customTheme,pages:e.appConfig.pages,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,isBusy:e.appRuntimeInfo.isBusy,loadingType:e.appRuntimeInfo.loadingType,dialogJson:e.appConfig.dialogs?e.appConfig.dialogs[uh(e.queryObject.dlg,e.appConfig)]:null,currentDialogId:e.appRuntimeInfo.currentDialogId,hasNewVersion:e.hasNewVersion||(null===(t=e.appStateInBuilder)||void 0===t?void 0:t.hasNewVersion),userLocaleChanged:e.userLocaleChanged,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClinetId:e.portalsNeedToRegisterClinetId,loadAppConfigError:null}:{appConfigLoaded:!1,customTheme:null,pages:null,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,loadingType:null,isBusy:e.appRuntimeInfo.isBusy,dialogJson:null,currentDialogId:null,hasNewVersion:!1,userLocaleChanged:!1,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClinetId:e.portalsNeedToRegisterClinetId,loadAppConfigError:e.loadAppConfigError}}))((e=>{var t,r;const n=null===(r=null===(t=jp())||void 0===t?void 0:t.useTheme)||void 0===r?void 0:r.call(t);return BE(qE,Object.assign({},e,{themeVariables:n}))})));class HE extends C.Component{constructor(e){super(e),this.state={error:null}}componentDidCatch(e,t){this.setState({error:e})}render(){return this.state.error?C.createElement("h1",null,this.state.error.message):this.props.children}}const{useEffect:YE}=C,JE="jimu-keyboard-nav",XE="jimu-interactive-node";function KE(e){if(QE(document.body,e),window.jimuConfig.isBuilder){const t=document.querySelector(`iframe[name="${Hi}"]`);QE((null==t?void 0:t.contentDocument.body)||(null==t?void 0:t.contentWindow.document.body),e)}else window.jimuConfig.isInBuilder&&QE(window.parent.document.body,e)}function QE(e,t){e&&(t?e.classList.add(JE):e.classList.remove(JE))}function ZE(){return document.body.classList.contains(JE)}function eO(e){return YE((()=>{function e(){ZE()&&KE(!1)}function t(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e(),r())}function r(){document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",t),document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",t),document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t)}function n(e){"Tab"===e.key&&(ZE()||KE(!0))}return document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("pointerdown",t),document.addEventListener("pointerup",t),document.addEventListener("touchmove",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t),()=>{document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",e,!0),document.removeEventListener("pointerdown",e,!0),document.removeEventListener("touchstart",e,!0),r()}}),[]),C.createElement(C.Fragment,null,e.children)}const tO=pe((e=>({locale:e.appContext.locale,defaultLocale:e.appContext.locale,messages:e.appI18nMessages})))(Wd);function rO(){const e=C.useMemo((()=>{var e;return null===(e=jp())||void 0===e?void 0:e.ThemeManager}),[]);return C.createElement(k,{store:tg()},C.createElement(HE,null,C.createElement(rS,null,C.createElement(tO,null,C.createElement(e,null,C.createElement(eO,null,C.createElement(zE,null)))))))}const nO=["widgetQueries","sourceVersion","gdbVersion","needRefresh"];class oO extends C.PureComponent{componentDidMount(){if(this.createDataSource(),this.props.dataSource&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo),!this.props.query&&this.props.dataSourceInfo&&this.props.onQueryRequired){const e=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,null,this.props.belongToDataSourceInfo,null,this.props.belongToBelongToDataSourceInfo,null);(e.queryRequiredInfo||e.prevQueryRequiredInfo)&&this.props.onQueryRequired(e.queryRequiredInfo,e.prevQueryRequiredInfo)}this.doQuery()}componentDidUpdate(e){var t;if(this.createDataSource(),(!e.dataSource&&this.props.dataSource||e.dataSource&&this.props.dataSource&&e.dataSource.id!==this.props.dataSource.id)&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),e.dataSourceInfo!==this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo,e.dataSourceInfo),(e.dataSourceInfo!==this.props.dataSourceInfo||e.belongToDataSourceInfo!==this.props.belongToDataSourceInfo||e.belongToBelongToDataSourceInfo!==this.props.belongToBelongToDataSourceInfo)&&!this.props.query&&this.props.onQueryRequired){const t=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,e.dataSourceInfo,this.props.belongToDataSourceInfo,e.belongToDataSourceInfo,this.props.belongToBelongToDataSourceInfo,e.belongToBelongToDataSourceInfo);(t.queryRequiredInfo||t.prevQueryRequiredInfo)&&this.props.onQueryRequired(t.queryRequiredInfo,t.prevQueryRequiredInfo)}e.dataSourceSchema!==this.props.dataSourceSchema&&this.props.onDataSourceSchemaChange&&this.props.onDataSourceSchemaChange(this.props.dataSourceSchema,e.dataSourceSchema),e.forceRefreshVersion!==this.props.forceRefreshVersion&&"number"==typeof this.props.forceRefreshVersion&&(null===(t=this.props.dataSource)||void 0===t||t.addSourceVersion()),this.doQuery(),this.handleAutoRefresh()}render(){const{useDataSource:e,dataSource:t,dataSourceInfo:r,children:n,query:o}=this.props;return e&&r?r.instanceStatus===Xi.CreateError?Xd().formatMessage({id:"dataSourceCreateError"}):t&&n?"function"==typeof n?n(t,r,o):n:null:null}doQuery(){if(!this.props.dataSource)return;const{dataSource:e,query:t,queryCount:r,widgetId:n,localId:o,queryScope:i}=this.props,a=e;if(!a.load||!a.query)return;if(!t)return;const s={widgetId:n||o,scope:i};if(a.load(t,s),r){const e=Object.assign({},t);a.loadCount(e,s)}}handleAutoRefresh(){if(!this.props.dataSource)return;const e=this.props.dataSource;e.stopAutoRefresh&&e.startAutoRefresh&&(window.jimuConfig.isInBuilder&&this.props.appMode===Fi.Design?e.stopAutoRefresh():e.startAutoRefresh())}createDataSource(){this.props.useDataSource&&this.props.dataSourceManager.createDataSourceByUseDataSource(this.props.useDataSource,this.props.localId).then((e=>{})).catch((e=>{this.props.dataSource||e.dataSourceId!==this.props.useDataSource.dataSourceId&&e.dataSourceId!==this.props.useDataSource.rootDataSourceId||this.props.onCreateDataSourceFailed&&this.props.onCreateDataSourceFailed(e)}))}getChangedQueryRequiredInfo(e,t,r,n,o,i){const a=nO.filter((e=>"needRefresh"!==e)),s=this.getChangedInfo(e,t,nO),u=this.getChangedInfo(r,n,a),l=this.getChangedInfo(o,i,a),c={queryRequiredInfo:null,prevQueryRequiredInfo:null},d=this.getDsAndBelongToDsIds();return this.setChangedInfoToResult(d.dsId,s.info,!1,c),this.setChangedInfoToResult(d.belongToDsId,u.info,!1,c),this.setChangedInfoToResult(d.belongToBelongToDsId,l.info,!1,c),this.setChangedInfoToResult(d.dsId,s.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToDsId,u.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToBelongToDsId,l.prevInfo,!0,c),c}setChangedInfoToResult(e,t,r,n){if(e&&t){const o=r?"prevQueryRequiredInfo":"queryRequiredInfo";n[o]||(n[o]={}),n[o][e]=t}}getChangedInfo(e,t,r){const n={};return null==r||r.forEach((r=>{(null==e?void 0:e[r])!==(null==t?void 0:t[r])&&(n.info=n.info?n.info.set(r,null==e?void 0:e[r]):Ce({[r]:null==e?void 0:e[r]}),n.prevInfo=n.prevInfo?n.prevInfo.set(r,null==t?void 0:t[r]):Ce({[r]:null==t?void 0:t[r]}))})),n}getDsAndBelongToDsIds(){var e,t,r,n,o,i;return{dsId:null===(e=this.props.dataSource)||void 0===e?void 0:e.id,belongToDsId:null===(r=null===(t=this.props.dataSource)||void 0===t?void 0:t.belongToDataSource)||void 0===r?void 0:r.id,belongToBelongToDsId:null===(i=null===(o=null===(n=this.props.dataSource)||void 0===n?void 0:n.belongToDataSource)||void 0===o?void 0:o.belongToDataSource)||void 0===i?void 0:i.id}}}const iO=pe(((e,t)=>{var r,n;const o=vg.getInstance(),i=window.jimuConfig.isBuilder?e.appStateInBuilder:e;if(!i||!t.useDataSource)return{dataSourceInfo:null,dataSourceJson:null,dataSourceSchema:null,rootDataSourceJson:null,dataSource:null,dataSourceManager:o,belongToDataSourceInfo:null,appMode:null};const a=t.useDataSource,s=bb(a,t.localId),u=o.getDataSource(a.rootDataSourceId);let l=o.getDataSource(s);return a.rootDataSourceId&&!u&&(l=null),{dataSourceInfo:i.dataSourcesInfo[s],dataSourceJson:i.appConfig.dataSources[a.mainDataSourceId],dataSourceSchema:(null==l?void 0:l.getSchema())||(null===(r=i.appConfig.dataSources[a.mainDataSourceId])||void 0===r?void 0:r.schema),rootDataSourceJson:i.appConfig.dataSources[a.rootDataSourceId],dataSource:l,dataSourceManager:o,belongToDataSourceInfo:(null==l?void 0:l.isDataView)||(null==l?void 0:l.isLocal)?i.dataSourcesInfo[l.belongToDataSource.id]:null,belongToBelongToDataSourceInfo:(null==l?void 0:l.isLocal)&&(null===(n=l.belongToDataSource)||void 0===n?void 0:n.isDataView)?i.dataSourcesInfo[l.belongToDataSource.belongToDataSource.id]:null,appMode:i.appRuntimeInfo.appMode}}))(oO),aO=iO;class sO extends C.PureComponent{constructor(){super(...arguments),this.handleDataSourceCreated=()=>{const{onDataSourceCreated:e=(()=>{})}=this.props;e(this.getDataSources())},this.handleDataSourceInfoChange=()=>{const{onDataSourceInfoChange:e=(()=>{})}=this.props;e(this.getDataSourcesInfo())},this.getDataSources=()=>{const{useDataSources:e=[]}=this.props,t={},r=vg.getInstance();return e.forEach((e=>{t[e.dataSourceId]=r.getDataSource(e.dataSourceId)})),t},this.getDataSourcesInfo=()=>{const{useDataSources:e=[]}=this.props,t={};return e.forEach((e=>{t[e.dataSourceId]=this.props[e.dataSourceId]})),t},this.hasLoadedDataSources=()=>{const{useDataSources:e=[]}=this.props,t=this.getDataSources();return e.every((e=>!!t[e.dataSourceId]))},this.MemoDataSourceComponents=C.memo((({useDataSources:e,queries:t,widgetId:r,localId:n})=>e?C.createElement(C.Fragment,null,e.asMutable().map(((e,o)=>C.createElement(aO,{key:o,useDataSource:e,query:null==t?void 0:t[e.dataSourceId],widgetId:r,localId:n,onDataSourceCreated:this.handleDataSourceCreated,onDataSourceInfoChange:this.handleDataSourceInfoChange})))):null))}render(){const{useDataSources:e,queries:t,widgetId:r,localId:n,children:o}=this.props,i=this.MemoDataSourceComponents,a=C.createElement(i,{useDataSources:e,queries:t,widgetId:r,localId:n});return o?C.createElement(C.Fragment,null,a,"function"==typeof o?o(this.getDataSources(),this.getDataSourcesInfo()):o):a}}const uO=pe(((e,t)=>{const r={},n=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return t.useDataSources&&t.useDataSources.forEach((e=>{const o=bb(e,t.localId);vg.getInstance().getDataSource(o)&&(r[o]=n.dataSourcesInfo[o])})),r}))(sO);var lO,cO=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};!function(e){e.Failed="RESOLVE_FAILED",e.NotMatched="DATA_SOURCES_IN_EXPRESSION_CANNOT_MATCH_DATA_SOURCES_IN_USE"}(lO||(lO={}));class dO extends C.PureComponent{constructor(e){super(e),this.dataSources=null,this.__unmount=!1,this.__resolveCount=1,this.getWhetherExpressionsAreSame=(e,t)=>Cu(e,t),this.getWhetherDsInfosAreSame=(e,t,r)=>{if(!r)return!0;if(e||t){if(e&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;{const n=this.getUseSelectionDsIdsFromExpression(r).map((e=>{var t;return null===(t=vg.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource()}));return!Object.keys(e).some((r=>{var o,i;const a=vg.getInstance().getDataSource(r);return!(a&&n.some((e=>(null==e?void 0:e.id)===a.getMainDataSource().id))?Cu(e[r],t[r]):Cu(null===(o=e[r])||void 0===o?void 0:o.without("selectedIds"),null===(i=t[r])||void 0===i?void 0:i.without("selectedIds")))}))}}return!1}return!0},this.getUseSelectionDsIdsFromExpression=e=>{const t=this.getWhetherIsMultipleExpression(e);let r=[];if(!e)return r;if(t){const t=e;Object.keys(t).forEach((e=>{r=r.concat(this.getUseSelectionDsIdsFromSingleExpression(t[e]))}))}else r=r.concat(this.getUseSelectionDsIdsFromSingleExpression(e));return Array.from(new Set(r))},this.getUseSelectionDsIdsFromSingleExpression=e=>{let t=[];return e&&e.parts?(e.parts.forEach((e=>{_b(null==e?void 0:e.dataSourceId)&&(t=t.concat(e.dataSourceId))})),Array.from(new Set(t))):t},this.getWhetherUseDssAreSame=(e,t)=>!e&&!t||!(!e||!t)&&e.length===t.length&&!e.some(((r,n)=>{var o,i;return!Cu(null===(o=e[n])||void 0===o?void 0:o.without("fields"),null===(i=t[n])||void 0===i?void 0:i.without("fields"))})),this.getWhetherIsMultipleExpression=e=>!(!e||2===Object.keys(e).length&&Object.keys(e).includes("name")&&Object.keys(e).includes("parts")&&Array.isArray(e.parts)),this.resolveExpressions=(e,t,r)=>cO(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve("");if(this.getWhetherIsMultipleExpression(e)){const t=e;Object.keys(t).forEach((e=>{this.resolveSingleExpression(t[e]).then((t=>{const n=this.resultsCache;this.__unmount||r!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!0,value:t}}),this.setState({results:this.resultsCache}))})).catch((t=>{const n=this.resultsCache;this.__unmount||r!==this.__resolveCount||(this.resultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!1,value:t}}),this.setState({results:this.resultsCache}))}))}))}else this.resolveSingleExpression(e).then((e=>{this.__unmount||r!==this.__resolveCount||(this.resultsCache={isSuccessful:!0,value:e},this.setState({results:this.resultsCache}))})).catch((e=>{this.__unmount||r!==this.__resolveCount||(this.resultsCache={isSuccessful:!1,value:e},this.setState({results:this.resultsCache}))}))})),this.resolveSingleExpression=e=>cO(this,void 0,void 0,(function*(){return this.getWhetherExpressionDssInUseDss(e)?yield _S(e,this.props.useDataSources,this.props.repeatedDataSource,this.props.intl).catch((e=>cO(this,void 0,void 0,(function*(){return yield Promise.reject(lO.Failed)})))):yield Promise.reject(lO.NotMatched)})),this.onDataSourceCreated=e=>{if(this.dataSources=e,e){const t={};Object.keys(e).forEach((r=>{r&&e[r]&&(t[r]=e[r].getInfo())})),this.setState({infos:t})}},this.onDataSourceInfoChange=e=>{this.getWhetherDsInfosAreSame(e,this.state.infos,this.props.expression)||this.setState({infos:e})},this.getWhetherExpressionDssInUseDss=e=>!e||!e.parts||!e.parts.some((e=>e&&e.dataSourceId&&!this.getWhetherDsIdInUseDss(e.dataSourceId))),this.getWhetherDsIdInUseDss=e=>{if(!e)return!1;const t=this.props.useDataSources||[];if(e.split("-").reverse()[0]===_u){const r=e.replace(/-dataView_\d{1,}/,"").replace(`-${_u}`,"");return t.some((e=>e.mainDataSourceId===r))}return t.some((t=>t.dataSourceId===e))},this.getLocalDataSources=e=>{let t=Ce([]);return e&&0!==e.length?(e.forEach((e=>{const r=vg.getInstance().getDataSource(e.dataSourceId);r&&r.getAllDerivedDataSources().forEach((e=>{var n;if((null==e?void 0:e.isLocal)&&(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.includes(`${r.id}-EXPRESSION_RESOLVER`))){const r=e.getRootDataSource(),n=e.getMainDataSource();t=t.concat({dataSourceId:e.id,rootDataSourceId:r&&r.id,mainDataSourceId:n&&n.id,dataViewId:e.dataViewId})}}))})),t):t},this.getQueries=(e,t)=>{const r={};if(!e||!t)return r;const n=this.getWhetherIsMultipleExpression(t)?Object.values(t):[t];let o=[];return n.forEach((e=>{(null==e?void 0:e.parts)&&(o=o.concat(e.parts.asMutable()))})),e.filter((e=>!!e)).filter((e=>e.dataViewId===ku&&o.some((t=>t.dataSourceId===vg.getInstance().getDataViewDataSourceId(e.mainDataSourceId,_u)&&t.type===pS.Field&&!t.isFromRepeatedDataSourceContext))||e.dataViewId!==_u&&o.some((t=>t.dataSourceId===e.dataSourceId&&t.type===pS.Field&&!t.isFromRepeatedDataSourceContext)))).forEach((e=>{r[e.dataSourceId]={}})),r},this.state={results:null,infos:null}}componentDidMount(){this.__unmount=!1,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)}componentWillUnmount(){this.__unmount=!0}componentDidUpdate(e,t){this.state.infos===t.infos&&this.getWhetherExpressionsAreSame(this.props.expression,e.expression)&&this.getWhetherUseDssAreSame(this.props.useDataSources,e.useDataSources)||(this.__resolveCount++,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.__resolveCount)),t.results!==this.state.results&&null!==this.state.results&&this.props.onChange&&this.props.onChange(this.state.results)}getLocalLoadId(){return`EXPRESSION_RESOLVER-${this.props.widgetId}`}render(){if(!this.props.expression||!this.props.useDataSources)return null;const e=this.getLocalDataSources(this.props.useDataSources),t=e.length>0?this.props.useDataSources.concat(e):this.props.useDataSources;return C.createElement(uO,{useDataSources:t,onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange,queries:this.getQueries(t,this.props.expression),widgetId:this.getLocalLoadId()},(()=>"function"==typeof this.props.children?this.props.children(this.state.results):this.props.children))}}const pO=cd(gw(dO)),fO=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?Iw(r,s,u):Ow(r,s,u)}return r};var hO=Object.prototype.hasOwnProperty;const gO=(mO=function(e,t){if(Js(t)||Zs(t))fO(t,eu(t),e);else for(var r in t)hO.call(t,r)&&Ow(e,r,t[r])},pg((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=mO.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!Sa(r))return!1;var n=typeof t;return!!("number"==n?Zs(r)&&js(t,r.length):"string"==n&&t in r)&&$a(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&mO(e,a,r,o)}return e})));var mO;const vO=function(){return sa.Date.now()};var yO=/\s/;var bO=/^\s+/;const SO=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&yO.test(e.charAt(t)););return t}(e)+1).replace(bO,""):e};var wO=/^[-+]0x[0-9a-f]+$/i,IO=/^0b[01]+$/i,EO=/^0o[0-7]+$/i,OO=parseInt;const CO=function(e){if("number"==typeof e)return e;if(va(e))return NaN;if(Sa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Sa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=SO(e);var r=IO.test(e);return r||EO.test(e)?OO(e.slice(2),r?2:8):wO.test(e)?NaN:+e};var TO=Math.max,AO=Math.min;const xO=function(e,t,r){var n,o,i,a,s,u,l=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,i=o;return n=o=void 0,l=t,a=e.apply(i,r)}function h(e){return l=e,s=setTimeout(m,t),c?f(e):a}function g(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-l>=i}function m(){var e=vO();if(g(e))return v(e);s=setTimeout(m,function(e){var r=t-(e-u);return d?AO(r,i-(e-l)):r}(e))}function v(e){return s=void 0,p&&n?f(e):(n=o=void 0,a)}function y(){var e=vO(),r=g(e);if(n=arguments,o=this,u=e,r){if(void 0===s)return h(u);if(d)return clearTimeout(s),s=setTimeout(m,t),f(u)}return void 0===s&&(s=setTimeout(m,t)),a}return t=CO(t)||0,Sa(r)&&(c=!!r.leading,i=(d="maxWait"in r)?TO(CO(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=u=o=s=void 0},y.flush=function(){return void 0===s?a:v(vO())},y},DO=(PO={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},function(e){return null==PO?void 0:PO[e]});var PO,RO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_O=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var kO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var NO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var MO="a-z\\xdf-\\xf6\\xf8-\\xff",jO="A-Z\\xc0-\\xd6\\xd8-\\xde",LO="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",UO="["+LO+"]",FO="\\d+",$O="["+MO+"]",BO="[^\\ud800-\\udfff"+LO+FO+"\\u2700-\\u27bf"+MO+jO+"]",WO="(?:\\ud83c[\\udde6-\\uddff]){2}",GO="[\\ud800-\\udbff][\\udc00-\\udfff]",VO="["+jO+"]",qO="(?:"+$O+"|"+BO+")",zO="(?:"+VO+"|"+BO+")",HO="(?:['](?:d|ll|m|re|s|t|ve))?",YO="(?:['](?:D|LL|M|RE|S|T|VE))?",JO="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",XO="[\\ufe0e\\ufe0f]?",KO=XO+JO+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",WO,GO].join("|")+")"+XO+JO+")*",QO="(?:"+["[\\u2700-\\u27bf]",WO,GO].join("|")+")"+KO,ZO=RegExp([VO+"?"+$O+"+"+HO+"(?="+[UO,VO,"$"].join("|")+")",zO+"+"+YO+"(?="+[UO,VO+qO,"$"].join("|")+")",VO+"?"+qO+"+"+HO,VO+"+"+YO,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",FO,QO].join("|"),"g");const eC=function(e,t,r){return e=os(e),void 0===(t=r?void 0:t)?function(e){return NO.test(e)}(e)?function(e){return e.match(ZO)||[]}(e):function(e){return e.match(kO)||[]}(e):e.match(t)||[]};var tC,rC=RegExp("[']","g");const nC=(tC=function(e,t,r){return e+(r?"-":"")+t.toLowerCase()},function(e){return function(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}(eC(function(e){return(e=os(e))&&e.replace(RO,DO).replace(_O,"")}(e).replace(rC,"")),tC,"")});var oC=Object.prototype.hasOwnProperty;const iC=function(e){if(!Sa(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Js(e),r=[];for(var n in e)("constructor"!=n||!t&&oC.call(e,n))&&r.push(n);return r},aC=function(e){return Zs(e)?Hs(e,!0):iC(e)};var sC="object"==typeof exports&&exports&&!exports.nodeType&&exports,uC=sC&&"object"==typeof module&&module&&!module.nodeType&&module,lC=uC&&uC.exports===sC?sa.Buffer:void 0,cC=lC?lC.allocUnsafe:void 0;const dC=Xs(Object.getPrototypeOf,Object),pC=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)bs(t,Os(e)),e=dC(e);return t}:ws,fC=function(e){return Ss(e,aC,pC)};var hC=Object.prototype.hasOwnProperty;const gC=function(e){var t=new e.constructor(e.byteLength);return new hs(t).set(new hs(e)),t};var mC=/\w*$/;var vC=ua?ua.prototype:void 0,yC=vC?vC.valueOf:void 0;const bC=function(e,t,r){var n,o,i,a=e.constructor;switch(t){case"[object ArrayBuffer]":return gC(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var r=t?gC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?gC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(i=new(o=e).constructor(o.source,mC.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return n=e,yC?Object(yC.call(n)):{}}};var SC=Object.create;const wC=function(){function e(){}return function(t){if(!Sa(t))return{};if(SC)return SC(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var IC=Gs&&Gs.isMap;const EC=IC?Fs(IC):function(e){return ma(e)&&"[object Map]"==yu(e)};var OC=Gs&&Gs.isSet;const CC=OC?Fs(OC):function(e){return ma(e)&&"[object Set]"==yu(e)};var TC="[object Arguments]",AC="[object Function]",xC={};xC[TC]=xC["[object Array]"]=xC["[object ArrayBuffer]"]=xC["[object DataView]"]=xC["[object Boolean]"]=xC["[object Date]"]=xC["[object Float32Array]"]=xC["[object Float64Array]"]=xC["[object Int8Array]"]=xC["[object Int16Array]"]=xC["[object Int32Array]"]=xC["[object Map]"]=xC["[object Number]"]=xC["[object Object]"]=xC["[object RegExp]"]=xC["[object Set]"]=xC["[object String]"]=xC["[object Symbol]"]=xC["[object Uint8Array]"]=xC["[object Uint8ClampedArray]"]=xC["[object Uint16Array]"]=xC["[object Uint32Array]"]=!0,xC["[object Error]"]=xC[AC]=xC["[object WeakMap]"]=!1;const DC=function e(t,r,n,o,i,a){var s,u=1&r,l=2&r,c=4&r;if(n&&(s=i?n(t,o,i,a):n(t)),void 0!==s)return s;if(!Sa(t))return t;var d=oa(t);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hC.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!u)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(t,s)}else{var p=yu(t),f=p==AC||"[object GeneratorFunction]"==p;if(Ns(t))return function(e,t){if(t)return e.slice();var r=e.length,n=cC?cC(r):new e.constructor(r);return e.copy(n),n}(t,u);if("[object Object]"==p||p==TC||f&&!i){if(s=l||f?{}:function(e){return"function"!=typeof e.constructor||Js(e)?{}:wC(dC(e))}(t),!u)return l?function(e,t){return fO(e,pC(e),t)}(t,function(e,t){return e&&fO(t,aC(t),e)}(s,t)):function(e,t){return fO(e,Os(e),t)}(t,function(e,t){return e&&fO(t,eu(t),e)}(s,t))}else{if(!xC[p])return i?t:{};s=bC(t,p,u)}}a||(a=new ls);var h=a.get(t);if(h)return h;a.set(t,s),CC(t)?t.forEach((function(o){s.add(e(o,r,n,o,t,a))})):EC(t)&&t.forEach((function(o,i){s.set(i,e(o,r,n,i,t,a))}));var g=d?void 0:(c?l?fC:tu:l?aC:eu)(t);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(g||t,(function(o,i){g&&(o=t[i=o]),Ow(s,i,e(o,r,n,i,t,a))})),s};function PC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RC(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,kC(e,t,"get"))}function _C(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,kC(e,t,"set"),r),r}function kC(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var NC=new WeakMap,MC=new WeakMap;class jC{constructor(e){var{executor:t=(()=>{}),internals:r=VC(),promise:n=new Promise(((e,n)=>t(e,n,(e=>{r.onCancelList.push(e)}))))}=e;NC.set(this,{writable:!0,value:void 0}),MC.set(this,{writable:!0,value:void 0}),this.cancel=this.cancel.bind(this),_C(this,NC,r),_C(this,MC,n||new Promise(((e,n)=>t(e,n,(e=>{r.onCancelList.push(e)})))))}then(e,t){return WC(RC(this,MC).then(BC(e,RC(this,NC)),BC(t,RC(this,NC))),RC(this,NC))}catch(e){return WC(RC(this,MC).catch(BC(e,RC(this,NC))),RC(this,NC))}finally(e,t){return t&&RC(this,NC).onCancelList.push(e),WC(RC(this,MC).finally(BC((()=>{if(e)return t&&(RC(this,NC).onCancelList=RC(this,NC).onCancelList.filter((t=>t!==e))),e()}),RC(this,NC))),RC(this,NC))}cancel(){RC(this,NC).isCanceled=!0;var e=RC(this,NC).onCancelList;for(var t of(RC(this,NC).onCancelList=[],e))if("function"==typeof t)try{t()}catch(e){console.error(e)}}isCanceled(){return!0===RC(this,NC).isCanceled}}class LC extends jC{constructor(e){super({executor:e})}}PC(LC,"all",(function(e){return GC(e,Promise.all(e))})),PC(LC,"allSettled",(function(e){return GC(e,Promise.allSettled(e))})),PC(LC,"race",(function(e){return GC(e,Promise.race(e))})),PC(LC,"resolve",(function(e){return FC(Promise.resolve(e))})),PC(LC,"reject",(function(e){return FC(Promise.reject(e))})),PC(LC,"isCancelable",$C);const UC=LC;function FC(e){return WC(e,VC())}function $C(e){return e instanceof LC||e instanceof jC}function BC(e,t){if(e)return r=>{if(!t.isCanceled){var n=e(r);return $C(n)&&t.onCancelList.push(n.cancel),n}return r}}function WC(e,t){return new jC({internals:t,promise:e})}function GC(e,t){var r=VC();return r.onCancelList.push((()=>{for(var t of e)$C(t)&&t.cancel()})),new jC({internals:r,promise:t})}function VC(){return{isCanceled:!1,onCancelList:[]}}var qC=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,zC=wE((function(e){return qC.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),HC=function(e){return"theme"!==e},YC=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?zC:HC},JC=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n};var XC=function e(t,r){var n,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==r&&(n=r.label,o=r.target);var s=JC(t,r,i),u=s||YC(a),l=!u("as");return function(){var c=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&d.push("label:"+n+";"),null==c[0]||void 0===c[0].raw)d.push.apply(d,c);else{d.push(c[0][0]);for(var p=c.length,f=1;f<p;f++)d.push(c[f],c[0][f])}var h=ME((function(e,t,r){var n=l&&e.as||a,i="",c=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=(0,C.useContext)(jE)}"string"==typeof e.className?i=vE(t.registered,c,e.className):null!=e.className&&(i=e.className+" ");var h=RE(d.concat(c),t.registered,p);yE(t,h,"string"==typeof n),i+=t.key+"-"+h.name,void 0!==o&&(i+=" "+o);var g=l&&void 0===s?YC(n):u,m={};for(var v in e)l&&"as"===v||g(v)&&(m[v]=e[v]);return m.className=i,m.ref=r,(0,C.createElement)(n,m)}));return h.displayName=void 0!==n?n:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",h.defaultProps=t.defaultProps,h.__emotion_real=h,h.__emotion_base=a,h.__emotion_styles=d,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+o}}),h.withComponent=function(t,n){return e(t,N({},r,n,{shouldForwardProp:JC(h,n,!0)})).apply(void 0,d)},h}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){XC[e]=XC(e)}));const KC=jE,QC=function(e){var t=(0,C.useContext)(jE);return e.theme!==t&&(t=LE(t)(e.theme)),(0,C.createElement)(jE.Provider,{value:t},e.children)},ZC=function(){return(0,C.useContext)(jE)},eT=function(e){var t,r,n=e.displayName||e.name||"Component",o=function(t,r){var n=(0,C.useContext)(jE);return(0,C.createElement)(e,N({theme:n,ref:r},t))},i=(0,C.forwardRef)(o);return i.displayName="WithTheme("+n+")",t=i,r=e,L()(t,r)},tT=XC,rT=NE,nT=WE;var oT,iT,aT,sT,uT,lT,cT,dT;!function(e){e.Loading="LOADING",e.Loaded="LOADED",e.Failed="FAILED"}(oT||(oT={})),function(e){e.UseDataSource="USE_DATA_SOURCE",e.OutputDataSource="OUTPUT_DATA_SOURCE",e.BothDataSource="BOTH_DATA_SOURCE"}(iT||(iT={})),function(e){e.Display1="display1",e.Display2="display2",e.Display3="display3",e.Display4="display4",e.Display5="display5",e.Display6="display6",e.Body1="body1",e.Body2="body2",e.Caption1="caption1",e.Caption2="caption2"}(aT||(aT={})),function(e){e.White="white",e.Black="black",e.Transparent="transparent"}(sT||(sT={})),function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(uT||(uT={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark"}(lT||(lT={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark",e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(cT||(cT={})),function(e){e.Color="color",e.Background="bg",e.Border="border",e.BorderRadius="borderRadius",e.Shadow="shadow"}(dT||(dT={}));const pT="exb_user_settings";var fT,hT,gT,mT,vT;function yT(e,t){return{STRING_SELECTION_CHANGE:t.formatMessage({id:"message_StringSelectionChange",defaultMessage:lv.message_StringSelectionChange}),EXTENT_CHANGE:t.formatMessage({id:"message_ExtentChange",defaultMessage:lv.message_ExtentChange}),DATA_RECORDS_SELECTION_CHANGE:t.formatMessage({id:"message_DataRecordsSelectionChange",defaultMessage:lv.message_DataRecordsSelectionChange}),DATA_SOURCE_FILTER_CHANGE:t.formatMessage({id:"message_DataSourceFilterChange",defaultMessage:lv.message_DataSourceFilterChange}),DATA_RECORD_SET_CHANGE:t.formatMessage({id:"message_DataRecordSetChange",defaultMessage:lv.message_DataRecordSetChange}),SELECT_DATA_RECORD:t.formatMessage({id:"message_SelectDataRecord",defaultMessage:lv.message_SelectDataRecord})}[e]}!function(e){e.Urlinfo="URLINFO"}(fT||(fT={})),function(e){e.Orginial="ORIGINAL",e.High="HIGH",e.Medium="MEDIUM",e.Low="LOW",e.Fuzzy="FUZZY"}(hT||(hT={})),function(e){e[e.Orginial=99.99]="Orginial",e[e.High=66.66]="High",e[e.Medium=33.33]="Medium",e[e.Low=0]="Low"}(gT||(gT={})),function(e){e.StringSelectionChange="STRING_SELECTION_CHANGE",e.ExtentChange="EXTENT_CHANGE",e.DataRecordsSelectionChange="DATA_RECORDS_SELECTION_CHANGE",e.DataSourceFilterChange="DATA_SOURCE_FILTER_CHANGE",e.DataRecordSetChange="DATA_RECORD_SET_CHANGE",e.SelectDataRecord="SELECT_DATA_RECORD"}(mT||(mT={}));class bT{constructor(e,t){this.type=mT.StringSelectionChange,this.widgetId=e,this.str=t}}class ST{constructor(e,t){this.type=mT.DataRecordsSelectionChange,this.widgetId=e,this.records=t}}class wT{constructor(e,t){this.type=mT.ExtentChange,this.widgetId=e,this.extent=t,this.relatedWidgetIds=[]}setRelatedWidgetIds(e){this.relatedWidgetIds=e}getRelatedWidgetIds(){return this.relatedWidgetIds}addRelatedWidgetId(e){this.relatedWidgetIds.includes(e)||this.relatedWidgetIds.push(e)}}class IT{constructor(e,t){this.type=mT.DataSourceFilterChange,this.widgetId=e,this.dataSourceId=t}}!function(e){e.Create="CREATE",e.Update="UPDATE",e.Remove="REMOVE"}(vT||(vT={}));class ET{constructor(e,t,r,n){this.type=mT.DataRecordSetChange,this.widgetId=e,this.dataRecordSetId=t,this.changeType=r,this.dataRecordSet=n}}class OT{constructor(e,t,r){this.type=mT.SelectDataRecord,this.widgetId=e,this.dataSourceId=t,this.recordId=r}}class CT{constructor(e){this.id=e.id,e.name&&(this.name=e.name),e.widgetId&&(this.widgetId=e.widgetId),this.label=e.label}destroy(){}onRemoveListen(e,t){}}class TT extends CT{filterMessageType(e,t){return!0}filterMessage(e){return!0}onExecute(e,t){return!0}}var AT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class xT extends Vw{isSupported(e,t){var r;return AT(this,void 0,void 0,(function*(){if(null==e||"function"!=typeof e.query)return!1;const t=e;return(yield t.allowToExportData())&&(null===(r=e.getSelectedRecords)||void 0===r?void 0:r.call(e).length)>0}))}getRecords(e){var t;return AT(this,void 0,void 0,(function*(){return(null===(t=e.getSelectedRecords)||void 0===t?void 0:t.call(e).length)>0?e.getSelectedRecords():[]}))}}class DT extends xT{onExecute(e,t){return r=this,n=void 0,i=function*(){const t=yield this.getRecords(e),r=Kw(e,t);return(0,Bn.saveAs)(r,"DataRecords.csv"),!0},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}}var PT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class RT extends xT{isSupported(e,t){const r=Object.create(null,{isSupported:{get:()=>super.isSupported}});return PT(this,void 0,void 0,(function*(){return(yield r.isSupported.call(this,e,t))&&null!=e.getGeometryType()}))}onExecute(e,t){var r;return PT(this,void 0,void 0,(function*(){const t=oI(yield this.getRecords(e),null===(r=e.getSchema())||void 0===r?void 0:r.idField),n=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return(0,Bn.saveAs)(n,"DataRecords.geojson"),yield Promise.resolve(!0)}))}}class _T extends xT{onExecute(e,t){return r=this,n=void 0,i=function*(){const t=(yield this.getRecords(e)).map((e=>e.toJson())),r=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});return(0,Bn.saveAs)(r,"DataRecords.json"),Promise.resolve(!0)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}}function kT(e,t){return t===ji.String?`'${e}'`:t===ji.Number?Number.isNaN(Number(e))?null:`${e}`:t===ji.Date?`'${e}'`:void 0}class NT extends CT{constructor(){super(...arguments),this.name="filter data record action",this.actionQuerySQLRecord={},this.concatQuerySQLOfSameAction=(e,t)=>{var r;let n="";const o=e.widgetId,i=(null===(r=this.actionQuerySQLRecord)||void 0===r?void 0:r[t])||{};return Object.keys(i).forEach((e=>{var t;const r=null===(t=i[e])||void 0===t?void 0:t.SQL;e!==o&&r&&(n=n?`${n} AND ${r}`:`${r}`)})),n},this.getQuerySQLWidthOtherQuerySQL=(e,t,r)=>{const n=this.concatQuerySQLOfSameAction(e,t);return n&&(r=r?`${r} AND ${n}`:n),r}}filterMessageType(e,t){return e===mT.DataRecordsSelectionChange||e===mT.SelectDataRecord||e===mT.ExtentChange}filterMessage(e){return!0}getSettingComponentUri(e,t){return"filter-data-record-action"}onRemoveListen(e,t){if(this.lastMessage&&this.lastMessage.type===e&&this.lastMessage.widgetId===t){if(this.lastActionConfig&&this.lastActionConfig.actionUseDataSource&&this.lastActionConfig.actionUseDataSource.dataSourceId){const e=vg.getInstance().getDataSource(this.lastActionConfig.actionUseDataSource.dataSourceId);e&&this.lastMessage.type===mT.DataRecordsSelectionChange&&e.updateQueryParams(null,this.id),e&&this.lastMessage.type===mT.ExtentChange&&e.updateQueryParams(null,this.id),this.lastActionConfig=null}this.lastMessage=null}}onExecute(e,t){var r,n,o,i,a,s;return o=this,i=void 0,s=function*(){switch(this.lastMessage=e,this.lastActionConfig=t,e.type){case mT.DataRecordsSelectionChange:let o=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const n=vg.getInstance(),i=n.getDataSource(t.messageUseDataSource.mainDataSourceId),a=t.actionUseDataSource.dataSourceId;let s=n.getDataSource(a);if(s||(s=yield n.createDataSourceByUseDataSource(t.actionUseDataSource)),i&&s){let n=!1;if(t.enabledDataRelationShip){let u=null,l=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=i.getSchema(),t=i.getIdField();u=null===(r=null==e?void 0:e.fields)||void 0===r?void 0:r[t],l=u}else{const e=t.messageUseDataSource.fields[0],r=t.actionUseDataSource.fields[0];u=i.getSchema().fields[e],l=s.getSchema().fields[r]}let c="";if(u&&l){const t=u.name,r=u.type,o=l.type,i=e,a=[];for(let e=0;e<i.records.length;e++){const r=i.records[e].getData()[t];if(!a.includes(`${kT(r,o)}`)){const r=kT(i.records[e].getData()[t],o);null!==r&&a.push(`${r}`)}}r!==ji.Number&&o===ji.Number&&i.records.length>0&&0===a.length&&(n=!0),c=`${l.name} IN `,a.length>0?c+=`(${a.join(", ")})`:c=""}if(e.records.length>0){const e=t.sqlExprObj?py(t.sqlExprObj,s).sql:null;e&&(c=c?c+" AND "+e:e)}else c="";n&&(c="1 = 2"),mx.setValue(this.actionQuerySQLRecord,`${a}.${e.widgetId}.SQL`,c),c=this.getQuerySQLWidthOtherQuerySQL(e,a,c),o={outFields:["*"],where:c,returnGeometry:!0}}else{let r="";if(e.records.length>0){const e=t.sqlExprObj?py(t.sqlExprObj,s).sql:null;e&&(r=e)}else r="";mx.setValue(this.actionQuerySQLRecord,`${a}.${e.widgetId}.SQL`,r),r=this.getQuerySQLWidthOtherQuerySQL(e,a,r),o={outFields:["*"],where:r,returnGeometry:!0}}s.updateQueryParams(o,this.id)}}return Promise.resolve(!0);case mT.ExtentChange:if(t&&t.actionUseDataSource){const r=vg.getInstance(),o=t.actionUseDataSource.dataSourceId;let i=r.getDataSource(o);i||(i=yield r.createDataSourceByUseDataSource(t.actionUseDataSource));let a=null;if(i){const r=null===(n=e)||void 0===n?void 0:n.extent;let s="";const u=t.sqlExprObj?py(t.sqlExprObj,i).sql:null;u&&(s=u);const l=t.enableQueryWithCurrentExtent?r.toJSON():{};mx.setValue(this.actionQuerySQLRecord,`${o}.${e.widgetId}.SQL`,s),s=this.getQuerySQLWidthOtherQuerySQL(e,o,s),a={geometry:l,outFields:["*"],where:s,returnGeometry:!0},i.updateQueryParams(a,this.id)}}return Promise.resolve(!0)}},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{u(s.next(e))}catch(e){t(e)}}function n(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(r,n)}u((s=s.apply(o,i||[])).next())}))}}class MT extends CT{constructor(){super(...arguments),this.name="select data record action"}filterMessageType(e,t){return e===mT.DataRecordsSelectionChange||e===mT.SelectDataRecord}filterMessage(e){return!0}getSettingComponentUri(e,t){return"select-data-record-action"}onExecute(e,t){return r=this,n=void 0,i=function*(){if(e.type===mT.DataRecordsSelectionChange){let r=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId)return;if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const n=vg.getInstance(),o=n.getDataSource(t.messageUseDataSource.mainDataSourceId);let i=!1,a=n.getDataSource(t.actionUseDataSource.mainDataSourceId);if(a||(yield n.createDataSourceByUseDataSource(t.actionUseDataSource),a=n.getDataSource(t.actionUseDataSource.mainDataSourceId)),0===e.records.length)return a&&a.selectRecordsByIds([]),yield Promise.resolve(!0);if(o&&a){if(t.enabledDataRelationShip){let n=null,s=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=o.getSchema(),t=e&&e.fields&&Object.keys(e.fields).find((t=>"esriFieldTypeOID"===e.fields[t].esriType));n=e&&e.fields&&e.fields[t],s=n}else{const e=t.messageUseDataSource.fields[0],r=t.actionUseDataSource.fields[0];n=o.getSchema().fields[e],s=a.getSchema().fields[r]}let u="";if(n&&s){const t=n.name,r=n.type,o=s.type,a=e,l=[];for(let e=0;e<a.records.length;e++){const r=a.records[e].getData()[t];if(!l.includes(`${kT(r,o)}`)){const r=kT(a.records[e].getData()[t],o);null!==r&&l.push(`${r}`)}}r!==ji.Number&&o===ji.Number&&0===l.length&&(i=!0),u=`${s.name} IN `,l.length>0?u+=`(${l.join(", ")})`:u=""}if(e.records.length>0){const e=t.sqlExprObj?py(t.sqlExprObj,a).sql:null;e&&(u=u?u+" AND "+e:e)}else u="";r={outFields:["*"],where:u,returnGeometry:!0}}else{let n="";if(e.records.length>0){const e=t.sqlExprObj?py(t.sqlExprObj,a).sql:null;e&&(n=e)}else n="";r={outFields:["*"],where:n,returnGeometry:!0}}if(i)return void a.clearSelection();a.query(r).then((e=>{const t=e&&e.records;if(t&&t.length>0){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e.push(n.getId())}setTimeout((()=>{a.selectRecordsByIds(e,t)}),200)}else a.clearSelection()}))}}return Promise.resolve(!0)}},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,s)}u((i=i.apply(r,n||[])).next())}));var r,n,o,i}}class jT{constructor(){this.id="jimu-core-ds-factory"}getFactoryUri(e){if(Object.keys(Ki).map((e=>Ki[e])).includes(e))return"jimu-core/data-source"}}var LT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const UT=["en","ar","bg","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw"],FT=eg(Ce(window.initStoreState));function $T(){return LT(this,void 0,void 0,(function*(){const e=Ee.parse(window.location.search);return FT.dispatch(Mg(e)),function(){const e=Xm.getInstance();(0,Gn.Tb)({fetch:function(t,r){const n=Object.assign({},r);let o;const{portalUrl:i,isWebTier:a}=tg().getState();return a&&gf(t,i)?(n.credentials="include",o=Promise.resolve()):o=e.isTrustedServer(t)?e.getSessionFromTrustedServer(t).then((e=>{e&&e.token&&(t=Ah(t,"token",e.token))})):Promise.resolve(),o.then((()=>LT(this,void 0,void 0,(function*(){return yield fetch(t,n).then((e=>e))}))))}})}(),FT.subscribe((()=>{window._appState=tg().getState()})),window.addEventListener&&(window.addEventListener("online",(()=>FT.dispatch(vm(!1)))),window.addEventListener("offline",(()=>FT.dispatch(vm(!0)))),window.addEventListener("resize",xO(qT,100)),qT()),window.runtimeInfo={widgets:{}},Promise.allSettled||(Promise.allSettled=function(e){return LT(this,void 0,void 0,(function*(){const t=e.map((e=>LT(this,void 0,void 0,(function*(){return yield e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e})))}))));return Promise.all(t)}))}),Tw.getInstance(),function(){return LT(this,void 0,void 0,(function*(){if(window.jimuConfig.isInBuilder){yield Bp("jimu-layouts/layout-builder");const e=yield Bp("jimu-for-builder",["appBuilderSync","loadI18nMessage"]);yield Bp("jimu-for-builder/templates");const t=e.appBuilderSync;t.listenBuilderEvents(),t.publishAppIsLoadedToBuilder();const r=xO(t.publishAppStateChangeToBuilder,200);return rg(((e,t)=>{e&&t&&r()})),Promise.resolve()}return Promise.resolve()}))}().then(GT).then((()=>{!function(){LT(this,void 0,void 0,(function*(){const{appId:e}=oh();return!window.jimuConfig.isInBuilder&&e?yield nv(e).then((e=>(tg().dispatch(Eg(e)),e))):Promise.resolve({})}))}()})).then(BT).then((t=>LT(this,void 0,void 0,(function*(){var r;const n=null===(r=function(e,t){return e.locale||t||Vd(window.navigator)}(e,t))||void 0===r?void 0:r.toLowerCase(),o=qd(n,UT)||"en";return function(e){if(window.locale=e,"undefined"==typeof document)return;const t=document.getElementsByTagName("html")[0];t.setAttribute("lang",e),Yd(e)?(t.setAttribute("dir","rtl"),t.className+=" esriRtl jimu-rtl",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:"")):(t.setAttribute("dir","ltr"),t.className+=" esriLtr jimu-ltr",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:""))}(n),function(e,t){const r={isInPortal:window.jimuConfig.isInPortal,isInBuilder:window.jimuConfig.isInBuilder,isBuilder:window.jimuConfig.isBuilder,isSite:window.jimuConfig.isSite,locale:e,translatedLocale:t,isRTL:Yd(e),isTouchDevice:rp(),jimuConfig:window.jimuConfig};FT.dispatch(kg(r))}(n,o),FT.dispatch(vm(!(window.navigator&&window.navigator.onLine))),function(e){const{appId:t}=oh();t?FT.dispatch(Og(t)):e.config&&FT.dispatch(Og(e.config)),FT.dispatch(Om({appMode:Fi.Run,activePagePart:qi.Body}))}(e),function(e){const t=th(e);Object.keys(t).forEach((e=>{const r=t[e];"index"===r.selectionType?tg().dispatch(um(e,r.selection)):"id"===r.selectionType&&tg().dispatch(lm(e,r.selection)),r.query&&tg().dispatch(Jg(e,"_filterInUrl",r.query)),r.gdbVersion&&tg().dispatch(qg(e,r.gdbVersion))}))}(e),yield function(e){return LT(this,void 0,void 0,(function*(){return"en"===e?yield Promise.resolve(lv):(e=Gd(e,UT))?yield Hd("jimu-core/lib/translations",e).then((e=>e)):Promise.resolve(lv)}))}(o).then((e=>LT(this,void 0,void 0,(function*(){return e&&FT.dispatch(Ng("jimu-core",e)),function(e){kw.getInstance().registerAction({id:"export-json",name:"exportAll",label:WT({id:"dataAction_ExportJson",defaultMessage:lv.dataAction_ExportJson},e),ActionClass:Yw}).catch((e=>console.error(e))),kw.getInstance().registerAction({id:"export-csv",name:"exportAll",label:WT({id:"dataAction_ExportCSV",defaultMessage:lv.dataAction_ExportCSV},e),ActionClass:Qw}).catch((e=>console.error(e))),kw.getInstance().registerAction({id:"export-geojson",name:"exportAll",label:WT({id:"dataAction_ExportGeoJson",defaultMessage:lv.dataAction_ExportGeoJson},e),ActionClass:aI}).catch((e=>console.error(e))),kw.getInstance().registerAction({id:"export-selected-json",name:"exportSelected",label:WT({id:"dataAction_ExportJson",defaultMessage:lv.dataAction_ExportJson},e),ActionClass:_T}).catch((e=>console.error(e))),kw.getInstance().registerAction({id:"export-selected-csv",name:"exportSelected",label:WT({id:"dataAction_ExportCSV",defaultMessage:lv.dataAction_ExportCSV},e),ActionClass:DT}).catch((e=>console.error(e))),kw.getInstance().registerAction({id:"export-selected-geojson",name:"exportSelected",label:WT({id:"dataAction_ExportGeoJson",defaultMessage:lv.dataAction_ExportGeoJson},e),ActionClass:RT}).catch((e=>console.error(e)))}(e),function(e){Pw.getInstance().registerAction({id:"filter-data-record-action",label:WT({id:"messageAction_FilterDataRecord",defaultMessage:lv.messageAction_FilterDataRecord},e),ActionClass:NT}).catch((e=>console.error(e))),Pw.getInstance().registerAction({id:"select-data-record-action",label:WT({id:"messageAction_SelectDataRecord",defaultMessage:lv.messageAction_SelectDataRecord},e),ActionClass:MT}).catch((e=>console.error(e)))}(e),cf.getInstance().registerExtension({epName:Up.DataSourceFactoryUri,extension:new jT}),window.jimuConfig.isInBuilder?(tg().dispatch(Lg(Fi.Design)),yield $p("jimu-for-builder").loadI18nMessage(),yield $p("jimu-for-builder/templates").init(),Promise.resolve()):Promise.resolve()}))))}))))}))}function BT(){return LT(this,void 0,void 0,(function*(){return FT.getState().user?(Tp(Uu)!==FT.getState().user.culture&&Ap(Uu,FT.getState().user.culture),yield Promise.resolve(FT.getState().user.culture)):Xm.getInstance().getMainSession()?Tp(Uu)?(Xm.getInstance().getUserInfo(),yield Promise.resolve(Tp(Uu))):yield Xm.getInstance().getUserInfo().then((e=>e.culture)):null}))}function WT(e,t){return t&&t[e.id]?t[e.id]:e.defaultMessage}function GT(){return LT(this,void 0,void 0,(function*(){return yield function(){return LT(this,void 0,void 0,(function*(){let e;if(window.jimuConfig.isInPortal)return e=pf(),yield Promise.resolve({portalUrl:e,clientId:"experienceBuilder"});if(window.jimuConfig.isOutOfExb)return yield Promise.resolve(null);const t=window.jimuConfig.hostEnv||"dev",r=`${gh()}builder/setting.json?env=${window.jimuConfig.isDevEdition?"dev":"online"}`;return yield window.fetch(r).then((e=>LT(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>{const r=(window.jimuConfig.isDevEdition?e.devEnv:e.env)[t];return r&&(r.portalUrl=xf(r.portalUrl)),r}),(e=>LT(this,void 0,void 0,(function*(){return console.error("Get setting.json error.",e),yield Promise.resolve(null)}))))}))}().then((e=>LT(this,void 0,void 0,(function*(){return e?window.jimuConfig.isInBuilder?yield Promise.resolve(null):(tg().dispatch(sm({portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier})),yield Xm.getInstance().initSession()):(console.warn("No portal info."),yield Promise.resolve(null))}))))}))}function VT(e){return LT(this,void 0,void 0,(function*(){return yield Promise.all($f(e.appConfig).map((e=>LT(this,void 0,void 0,(function*(){return e.manifest.properties.hasMainClass?yield jw.getInstance().loadWidgetClass(e.id):yield Promise.resolve({})}))))).then((()=>LT(this,void 0,void 0,(function*(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",yield Bp(e)})))).then((()=>LT(this,void 0,void 0,(function*(){return yield Bp("jimu-ui")})))).then((()=>LT(this,void 0,void 0,(function*(){return yield jp().loadTheme(e.appConfig.theme)}))))}))}function qT(){if("undefined"==typeof document)return;const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=np({width:e,height:t});tg().getState().browserSizeMode!==r&&tg().dispatch(fm(r));const n=.01*t,o=.01*e;document.documentElement.style.setProperty("--vh",`${n}px`),document.documentElement.style.setProperty("--vw",`${o}px`)}var zT=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class HT{constructor(){this.initialize=e=>zT(this,void 0,void 0,(function*(){const t=!(!e||!e.enable);return t?yield Promise.all([this.initializeGtag(),this.createTracker(e)]).then((()=>{this.enable=t}),function(e){throw this.enable=!1,new Error(e)}.bind(this)):(this.enable=t,yield Promise.resolve())})),this.initializeGtag=()=>zT(this,void 0,void 0,(function*(){return this.gtag?yield Promise.resolve():yield Bp("gtm").then((()=>{const e=window;e.dataLayer=e.dataLayer||[],this.gtag=function(){e.dataLayer.push(arguments)},this.gtag("js",new Date)}))})),this.compareGoogleAnalytics=(e=Ce({}))=>{if(!this.enable)return;const t=this.googleAnalytics||Ce({});e!==t&&(e.trackId!==t.trackId&&(t.trackId&&this.disableGaTrackForGtag(t.trackId,!0),e.trackId&&this.addGaTrackIdToGtag(e.trackId,e.anonymizeip)),e.dimensions!==t.dimensions&&this.updateGgTrackerDimensions(this.track,e.dimensions),e.metrics!==t.metrics&&this.updateGgTrackerMetrics(this.track,e.metrics),e.anonymizeip!==t.anonymizeip&&this.updateGgTrackerAnonymizeip(e.trackId,e.anonymizeip),this.googleAnalytics=e)},this.disableGaTrackForGtag=(e,t=!0)=>{e&&(window[`ga-disable-${e}`]=t)},this.addGaTrackIdToGtag=(e,t=!0)=>{this.gtag&&(this.disableGaTrackForGtag(e,!1),this.gtag("config",e,{anonymize_ip:t}))},this.updateGgTrackerDimensions=(e,t)=>{const r=this.getGgTracker(e);r&&(r.dimensions=t)},this.updateGgTrackerMetrics=(e,t)=>{const r=this.getGgTracker(e);r&&(r.metrics=t)},this.updateGgTrackerAnonymizeip=(e,t=!0)=>{this.gtag&&this.gtag("config",e,{anonymize_ip:t})},this.getGgTracker=e=>e&&e.trackers&&e.trackers.find((e=>"google"===e.name)),this.mutablePortalUser=()=>{const e=tg().getState().portalSelf.asMutable();return e.user=e.user.asMutable(),e},this.isTrackAvailable=()=>(this.enable,!!this.enable),rg(this.onStoreChange.bind(this),["appConfig","analytics"])}static getInstance(){return HT.instance||(HT.instance=new HT),HT.instance}onStoreChange(e=Ce({}),t=Ce({})){t.enable!==e.enable?this.initialize(t).then((()=>this.compareGoogleAnalytics(t&&t.google))):this.compareGoogleAnalytics(t&&t.google)}createTracker(e){return zT(this,void 0,void 0,(function*(){if(this.track)return yield Promise.resolve(this.track);const t={google:e&&e.google,portal:this.mutablePortalUser()};return yield Bp("jimu-core/telemetry").then((e=>(this.track=new e(t),this.track)))}))}logPageView(e){if(this.isTrackAvailable())return this.track.logPageView(e)}logEvent(e){if(this.isTrackAvailable())return this.track.logEvent(e)}logError(e){if(this.isTrackAvailable())return this.track.logError(e)}}function YT(e){return e.error?C.createElement("div",null,"Error! ",C.createElement("button",{onClick:e.retry},"Retry")):e.pastDelay?C.createElement("div",null,"Loading..."):null}var JT,XT,KT,QT,ZT;function eA(e){e(wm(null))}function tA(e){return`${gp()}-${e}`}function rA(){return e=this,t=void 0,n=function*(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",yield Bp(e,["LayoutEntry"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}));var e,t,r,n}!function(e){e.ScrollIntoView="SCROLL_IN",e.Manual="MANUAL"}(JT||(JT={})),function(e){e.None="NONE",e.Pulse="PULSE",e.RubberBand="RUBBER_BAND",e.FadeIn="FADE_IN",e.FadeOut="FADE_OUT",e.FlyIn="FLY_IN",e.ZoomIn="ZOOM_IN",e.WipeIn="WIPE_IN",e.SpinIn="SPIN_IN",e.FloatIn="FLOAT_IN"}(XT||(XT={})),function(e){e.Default="DEFAULT",e.Gentle="GENTLE",e.Wobbly="WOBBLY",e.Stiff="STIFF",e.Slow="SLOW",e.Molasses="MOLASSES"}(KT||(KT={})),function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Left="LEFT",e.Right="RIGHT"}(QT||(QT={})),function(e){e.AsOne="AS_ONE",e.OneByOne="ONE_BY_ONE"}(ZT||(ZT={}));const nA={offsetX:0,offsetY:0,rotateX:0,rotateY:0,rotateZ:0,clipLeft:0,clipRight:0,clipTop:0,clipBottom:0,scaleX:1,scaleY:1,opacity:1,zIndex:0};class oA{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},nA,e)}getConfigType(){var e,t;return(null!==(t=null===(e=this.option)||void 0===e?void 0:e.configType)&&void 0!==t?t:KT.Default).toLowerCase()}transform(e,t,r){return iA(e,t,r)}clippath(e){return aA(e)}propsOnXY(e,t){return null}hasMoveEffect(){return!1}}function iA(e,t,r){if(null!=(null==e?void 0:e.offsetX)){const{offsetX:n,offsetY:o,rotateX:i,rotateY:a,rotateZ:s,scaleX:u,scaleY:l}=e;return Vr([n,o,i,a,s,u,l],((e,n,o,i,a,s,u)=>{const l=Math.max(o,i,a);return 0===e&&0===n&&0===o&&0===i&&0===a&&1===s&&1===u?null:`translate3d(calc(${t} + ${e}px), calc(${r} + ${n}px), 0)\n        rotate3d(${0!==l?o/l:0}, ${0!==l?i/l:0}, ${0!==l?a/l:0}, ${l}deg)\n        scale(${s}, ${u})`}))}return null}function aA(e){if(null==e?void 0:e.clipTop){const{clipTop:t,clipBottom:r,clipLeft:n,clipRight:o}=e;return Vr([t,r,n,o],((e,t,r,n)=>0!==e||0!==t||0!==r||0!==n?`inset(${e}% ${n}% ${t}% ${r}%)`:null))}return null}class sA extends oA{constructor(e){super(XT.FadeIn,e)}initProps(){return this.generateProps({opacity:0,immediate:!0})}animateProps(){return{from:this.generateProps({opacity:0}),to:this.generateProps({opacity:1}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,immediate:!0,reset:!1})}}class uA extends oA{constructor(e){super(XT.FadeOut,e)}initProps(){return this.generateProps({opacity:1,immediate:!0})}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:0}),immediate:!0,reset:!0,config:void 0}}endProps(){return this.generateProps({opacity:0,immediate:!0,reset:!1})}}class lA extends oA{constructor(e){var t;super(XT.FlyIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||QT.Top}from(){switch(this.direction){case QT.Bottom:return{offsetX:0,offsetY:window.innerHeight};case QT.Left:return{offsetX:-window.innerWidth,offsetY:0};case QT.Right:return{offsetX:window.innerWidth,offsetY:0};default:return{offsetX:0,offsetY:-window.innerHeight}}}initProps(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})}}class cA extends oA{constructor(e){super(XT.ZoomIn,e)}initProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:0,transformOrigin:"center",immediate:!0})}animateProps(){return{from:this.generateProps({scaleX:0,scaleY:0,opacity:0}),to:this.generateProps({scaleX:1,scaleY:1,opacity:1}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:1,immediate:!0,reset:!1})}}class dA extends oA{constructor(e){var t;super(XT.WipeIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||QT.Top}getClipProp(){switch(this.direction){case QT.Bottom:return"clipTop";case QT.Left:return"clipRight";case QT.Right:return"clipLeft";default:return"clipBottom"}}initProps(){return this.generateProps({[this.getClipProp()]:100,opacity:0,transformOrigin:"center",immediate:!0})}animateProps(){return{from:this.generateProps({[this.getClipProp()]:100,opacity:0}),to:this.generateProps({[this.getClipProp()]:0,opacity:1}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({[this.getClipProp()]:0,opacity:1,immediate:!0,reset:!1})}}class pA extends oA{constructor(e){super(XT.SpinIn,e)}initProps(){return this.generateProps({rotateZ:0,opacity:0,immediate:!0})}animateProps(){return{from:this.generateProps({rotateZ:720,opacity:0}),to:this.generateProps({rotateZ:0,opacity:1}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({rotateZ:0,opacity:1,immediate:!0,reset:!1})}}class fA extends oA{constructor(e){var t;super(XT.FloatIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||QT.Top}from(){switch(this.direction){case QT.Bottom:return{offsetX:0,offsetY:100};case QT.Left:return{offsetX:-100,offsetY:0};case QT.Right:return{offsetX:100,offsetY:0};default:return{offsetX:0,offsetY:-100}}}initProps(){return this.generateProps({opacity:0,offsetX:0,offsetY:0,immediate:!0})}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,offsetX:0,offsetY:0}),immediate:!1,reset:!0,config:qr[this.getConfigType()]}}endProps(){return this.generateProps({opacity:1,offsetX:0,offsetY:0,immediate:!0,reset:!1})}}function hA(e,t){switch(e){case XT.FadeIn:return new sA(t);case XT.FadeOut:return new uA(t);case XT.FlyIn:return new lA(t);case XT.ZoomIn:return new cA(t);case XT.WipeIn:return new dA(t);case XT.SpinIn:return new pA(t);case XT.FloatIn:return new fA(t);default:return null}}function gA(e){if(e){const t=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight;if(t.top<r){const r=e.parentElement.getBoundingClientRect();return t.top<r.bottom}}return!1}function mA(){const e=[0];for(let t=1;t<=100;t++)e.push(t/100);return e}function vA(e,t,r){const n=C.useRef(),[o,i]=C.useState(),a=C.useRef(Number.NEGATIVE_INFINITY),s=C.useRef(0);return C.useEffect((()=>{const o=e=>{s.current=e.intersectionRatio,a.current=e.boundingClientRect.top};if(t&&e&&"function"==typeof IntersectionObserver){const t=new IntersectionObserver((e=>{(e=>{const t=e.boundingClientRect,r=e.intersectionRect;if(!e.target.classList.contains("playing-animation")){if(function(e,t){return e>t.boundingClientRect.top}(a.current,e)&&function(e,t){return e<t.intersectionRatio}(s.current,e)){if(e.intersectionRatio>=.95||r.height>300)return o(e),void i(!0);if(t.top+1<r.top)return o(e),void i(!0)}if(function(e,t){return e<t.boundingClientRect.top}(a.current,e)&&function(e,t){return e>t.intersectionRatio}(s.current,e)&&e.intersectionRatio<=.05)return o(e),void i(!1);o(e)}})(e[0])}),{threshold:mA(),root:r||document});return t.observe(e),n.current=t,()=>{n.current.disconnect(),n.current=null}}n.current&&(n.current.disconnect(),n.current=null)}),[e,t,r]),o}const yA=C.createContext({trigger:"",delay:0,setting:null,inheritedOneByOneSetting:null,playId:null,revert:!1,depth:0});var bA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const SA=/translateX\(([^)]*)\)/,wA=/translateY\(([^)]*)\)/,IA=/translate\(([^),]*),\s*([^),]*)\)/,EA=C.forwardRef(((e,t)=>{const{type:r,trigger:n="",revert:o,configType:i,direction:a,playId:s,children:u,style:l,onAnimationStart:c,onAnimationEnd:d,parentAnimationStyle:p,isParentEnableScroll:f=!1,isParentPlaying:h,isParentRevert:g,parentPlayId:m}=e,v=bA(e,["type","trigger","revert","configType","direction","playId","children","style","onAnimationStart","onAnimationEnd","parentAnimationStyle","isParentEnableScroll","isParentPlaying","isParentRevert","parentPlayId"]),y=C.useRef(),b=t||y,[S,w]=function(e){const{type:t,ref:r,trigger:n="",revert:o,configType:i,direction:a,playId:s,isParentPlaying:u,isParentRevert:l,parentPlayId:c,onAnimationStart:d,onAnimationEnd:p}=e,f=C.useRef(),h=C.useRef(),g=C.useRef(!1),m=C.useRef(!1),v=C.useRef(),y=C.useRef(),b=C.useRef(),S=C.useMemo((()=>n.includes(JT.ScrollIntoView)),[n]),w=C.useMemo((()=>n.includes(JT.Manual)),[n]),I=C.useMemo((()=>new uA),[]),E=C.useMemo((()=>hA(t,{configType:i,direction:a})),[t,i,a]),O=vA(r.current,S&&null!=E),[T,A,x]=Zr((()=>nA)),D=(e=!1)=>{var t,n;E&&(g.current&&!e||(x(),"function"==typeof d&&d(),g.current=!0,null===(n=null===(t=r.current)||void 0===t?void 0:t.classList)||void 0===n||n.add("playing-animation"),h.current=Date.now(),A(Object.assign(Object.assign({},E.animateProps()),{onRest:()=>{var e,t;g.current=!1,null===(t=null===(e=r.current)||void 0===e?void 0:e.classList)||void 0===t||t.remove("playing-animation"),"function"==typeof p&&p()}}))))},P=(e=!1)=>{E&&(g.current&&!e&&Date.now()-h.current<50||(x(),g.current=!0,A(Object.assign(Object.assign({},I.animateProps()),{onRest:()=>{g.current=!1,"function"==typeof p&&w&&p()}}))))};return C.useEffect((()=>{E&&(!b.current&&S?gA(r.current)?y.current=!0:P():S&&y.current!==O&&(y.current=O,O?D():null==O||O||P()),b.current=S)})),C.useEffect((()=>{E&&s&&s!==f.current&&w&&(f.current=s,o?P(!0):D(!0))})),C.useEffect((()=>{u&&!g.current&&(m.current!==u||c&&v.current!==c)&&(l?P(!0):D(!0)),m.current=u,v.current=c})),[T,E]}({type:r,ref:t,trigger:n,revert:o,configType:i,direction:a,playId:s,isParentPlaying:h,isParentRevert:g,parentPlayId:m,onAnimationStart:c,onAnimationEnd:d}),[I,E]=function(e){var t;const{ref:r,enable:n,isParentPlaying:o,parentAnimationStyle:i}=e,[a,s]=C.useState(!1),u=C.useRef(),l=C.useRef(),c=C.useContext(yA),{inheritedOneByOneSetting:d,depth:p}=c||{},{type:f,option:h}=d||{},g=C.useMemo((()=>hA(f,h)),[f,h]),m=C.useMemo((()=>new uA),[]),v=we((e=>{var t;return null===g||(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Fi.Design})),y=C.useMemo((()=>n&&!o&&f&&f!==XT.None&&r.current&&!v),[n,o,f,r,v]),b=vA(r.current,y,1===p?null:null===(t=r.current)||void 0===t?void 0:t.parentElement),[S,w,I]=Zr((()=>({}))),E=()=>{g&&(I(),w(m.animateProps()),s(!0))};return C.useEffect((()=>{o&&s(!1)}),[o]),C.useEffect((()=>{g&&(!l.current&&y?function(e,t){const r=null==t?void 0:t.parentElement;if(!r)return!0;const n=t.getBoundingClientRect(),o=1===e?{top:0,height:window.innerHeight}:r.getBoundingClientRect();return n.top<o.top+o.height}(p,r.current)?u.current=!0:E():y&&u.current!==b&&(u.current=b,b?g&&(I(),w(g.animateProps()),s(!0)):null==b||b||E()),l.current=y)})),[o||!a?i:S,g]}({enable:null==w&&f,parentAnimationStyle:p,isParentPlaying:h,ref:t});let O,T,A,x="string"==typeof l?JSON.parse(l):l;if(w&&S?(O=S,T=w.transform,A=w.clippath):f&&E?(O=I,T=null==E?void 0:E.transform,A=null==E?void 0:E.clippath):p&&(O=p,T=iA,A=aA),O){let e;b.current&&(e=getComputedStyle(b.current).getPropertyValue("transform"));const[t,r]=function(e){let t="0px",r="0px";if(e){if(e.includes("matrix(")){const n=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");return t=`${parseInt(n[4],10)}px`,r=`${parseInt(n[5],10)}px`,[t,r]}const n=e.match(SA),o=e.match(wA),i=e.match(IA);i?(t=i[1],r=i[2]):(n&&(t=n[1]),o&&(r=o[1]))}return[t,r]}(e),{offsetX:n,offsetY:o,rotateX:i,rotateY:a,rotateZ:s,scaleX:u,scaleY:l,clipLeft:c,clipRight:d,clipTop:p,clipBottom:f}=O,h=bA(O,["offsetX","offsetY","rotateX","rotateY","rotateZ","scaleX","scaleY","clipLeft","clipRight","clipTop","clipBottom"]);x=Object.assign({},x,h),x.transform=T(O,t,r),x.clipPath=A(O)}return C.createElement($n.div,Object.assign({style:x,ref:b},v),u)}));const OA=new uA;function CA(e){var t,r;const{children:n,style:o,enableScroll:i=!1}=e,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["children","style","enableScroll"]),s=C.useRef(),u=C.useRef(),l=C.useRef(),c=C.useRef(),d=C.useContext(yA),[p,f]=C.useState(),{trigger:h="",delay:g=0,setting:m,playId:v,revert:y,onAnimationStart:b,onAnimationEnd:S}=d||{},w=null==m?void 0:m.type,I=null===(t=null==m?void 0:m.option)||void 0===t?void 0:t.configType,E=null===(r=null==m?void 0:m.option)||void 0===r?void 0:r.direction,O=C.useMemo((()=>hA(w,{configType:I,direction:E})),[w,I,E]),T=C.Children.count(e.children),A=h.includes(JT.ScrollIntoView),x=h.includes(JT.Manual),D=vA(l.current,A&&null!=O),[P,R,_]=en(C.Children.count(e.children),(()=>nA)),k=C.useCallback((()=>{if(!O)return;_(),f(!0);let e=0;"function"==typeof b&&b(),R(Object.assign(Object.assign({},O.animateProps()),{delay:g,onRest:()=>{e+=1,e===T&&("function"==typeof S&&S(),f(!1))}}))}),[g,O,S,b,T,R,_]),N=C.useCallback((()=>{if(!O)return;_(),f(!0);let e=0;R(Object.assign(Object.assign({},OA.animateProps()),{onRest:()=>{e+=1,e===T&&(f(!1),"function"==typeof S&&S())}}))}),[O,T,S,R,_]);C.useEffect((()=>{O&&(!c.current&&A?gA(l.current)||N():A&&u.current!==D&&(u.current=D,D?k():null==D||D||N()),c.current=A)})),C.useEffect((()=>{O&&v&&v!==s.current&&x&&(s.current=v,y?N():k())}));const M="string"==typeof o?JSON.parse(o):Object.assign({},o);return C.createElement("div",Object.assign({style:M,ref:l},a),e.children&&C.Children.map(e.children,((e,t)=>e?C.cloneElement(e,{isPlaying:p,revert:y,playId:v,enableScroll:i,animationStyle:null!=O?P[t]:null}):null)))}const TA="16px";function AA(e,t){return t.toFixed("px"===e?0:1)+e}function xA(e){return"object"==typeof e?`${e.distance}${e.unit}`:e}function DA(e){let t="unset";if(e&&e.image){switch(e.fillType){case"fit":t="contain";break;case"fill":t="cover";break;case"stretch":t="100% 100%";break;default:t="auto"}return t}return t}function PA(e){var t;const{dialogBackground:r,border:n,borderRadius:o,boxShadow:i}=e;let a="unset",s="unset";if(o){const e=o.number[0],t=void 0!==o.number[1]?o.number[1]:e,r=void 0!==o.number[2]?o.number[2]:e,n=void 0!==o.number[3]?o.number[3]:e;a=`${e}${o.unit} ${t}${o.unit}`,s=`${r}${o.unit} ${n}${o.unit}`}return{backgroundColor:r&&r.color?r.color:"transparent",backgroundImage:(null===(t=null==r?void 0:r.image)||void 0===t?void 0:t.url)?`url(${r.image.url})`:"unset",backgroundRepeat:r&&r.image&&"tile"===r.fillType?"repeat":"no-repeat",backgroundSize:DA(r),borderStyle:n&&n.color&&n.width?`${xA(n.width)} ${n.type} ${n.color}`:"none",borderRadiusTopStyle:a,borderRadiusBottomStyle:s,borderRadiusStyle:o?`${a} ${s}`:"unset",boxShadowStyle:i&&i.color?`${xA(i.offsetX)} ${xA(i.offsetY)}\n      ${xA(i.blur)} ${xA(i.spread)} ${i.color}`:"none"}}function RA(e){var t,r,n;const o=parseFloat(null===(t=e.spread)||void 0===t?void 0:t.split("px")[0])||0,i=parseFloat(null===(r=e.offsetX)||void 0===r?void 0:r.split("px")[0])||0,a=parseFloat(null===(n=e.offsetY)||void 0===n?void 0:n.split("px")[0])||0,s=Math.max(o-a,0),u=Math.max(o+a,0),l=Math.max(o-i,0);return{spread:o,offsetX:i,offsetY:a,shadowPadding:`${s}px ${Math.max(o+i,0)}px ${u}px ${l}px`}}function _A(e,t,r,n){var o;const{borderRadius:i,interactionType:a}=e,s=PA(e),u=e.overlayColor||(e.isOpenerDlg?"var(--dark-900)":"transparent"),l=`app-dialog-wrap-${e.id}`,c=a===uf.ButtonBlock?95:a===uf.ButtonInline?64:59,d=a?`calc(100% - ${c}px)`:"100%";let p="0";(null===(o=e.boxShadow)||void 0===o?void 0:o.color)&&(p=RA(e.boxShadow).shadowPadding);let f="100%",h="unset";n.position===sf.Center&&(f="%"==(n.height.includes("%")?"%":"px")?r*parseFloat(n.height.split("%")[0])/100+"px":n.height,h=`calc(50% - ${parseFloat(f.split("px")[0])/2+"px"})`);const g=i&&a?`${s.borderRadiusTopStyle} 0 0`:s.borderRadiusStyle,m=i?`0 0 ${s.borderRadiusBottomStyle}`:"unset";return GE`
    body {

      @keyframes aBlink {
        from { background-color: var(--danger-700); }
        50% { background-color: var(--danger-700); }
        51%{background-color: transparent;}
        to { background-color: transparent; }
      }

      .app-dialog-wrap{

        &.${l}{
          display: ${t?"inherit":"none"};
          .app-dialog{
            margin: 0!important;
            max-width: 100vw;
            max-height: 100vh;

            .app-dialog-content{
              padding: ${p}; /* decided by shadow*/
              overflow-y: auto;

              border: none;
              box-shadow: unset;
              background-color: transparent;
              border-radius:  ${s.borderRadiusStyle};

              &.overflow-visible{
                overflow: visible;
              }

              .app-dialog-animation-content{
                flex-shrink: 0;
                /* height: ${f} !important; */
                height: ${f};

                border: ${s.borderStyle};
                border-radius:  ${s.borderRadiusStyle};
                box-shadow: ${s.boxShadowStyle};
                background-color: ${s.backgroundColor};
                background-image: ${s.backgroundImage};
                background-position: center center;
                background-repeat: ${s.backgroundRepeat};
                background-size: ${s.backgroundSize};

                .dialog-content{
                  padding: 0;
                  height: ${d};
                  border-radius:  ${g};
                }

                .dialog-footer{
                  overflow-x: auto;
                  border-radius:  ${m};

                  .cbx-animation{
                    margin-right: 0.5rem;
                    width: 16px;
                    height: 16px;
                    border: 2px solid var(--light-600);
                    animation: aBlink 500ms infinite;
                  }
                  .btn {
                    min-width: 6.25rem;
                  }
                }
              }

              .app-dialog-resize-container{
                touch-action: none;
                .app-dialog-resize-handlers{
                  &.resize-center{
                    top: ${h};
                    .dialog-resize-bottom{
                      top: calc(${f} - ${TA});
                    }
                    .dialog-resize-left, .dialog-resize-right{
                      height: ${f};
                    }
                  }
                }
              }

            }
          }
          .app-dialog-backdrop{
            background-color: ${u};
          }
        }
      }
    }
  `}function kA(e){let t;const r=e.width.includes("%")?"100%":e.width;switch(e.position){case sf.Left:t=GE`
        &.app-dialog{
          margin: 0px;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${r};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case sf.Right:t=GE`
        &.app-dialog{
          margin: 0px;
          float: right;
          width: ${e.width};
        }
        .app-dialog-content{
          height: 100vh;

          .app-dialog-resize-container{
            width: ${r};
            max-width: 100%;
            height: 100vh;
          }
        }
      `;break;case sf.Top:t=GE`
        &.app-dialog{
          margin: 0px;
          height: 100%;
        }
        .app-dialog-content{
          width: 100vw;
          height: ${e.height};

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
            .app-dialog-resize-handlers{
              .dialog-resize-bottom{
                bottom: calc(100vh - ${e.height});
              }
            }
          }
        }
      `;break;case sf.Bottom:t=GE`
        &.app-dialog{
          position: absolute;
          bottom: 0px;
          margin: 0px;
          height: ${e.height};
        }
        .app-dialog-content{
          width: 100vw;
          height: 100%;

          .app-dialog-resize-container{
            height: ${e.height.includes("%")?"100%":e.height};
          }
        }
      `;break;case sf.Center:t=GE`
        &.app-dialog::before{
          height: 100vh;
        }
        .app-dialog-content{
          width: ${e.width};
          max-height: 100vh;
          margin: 0 auto;

          .app-dialog-resize-container{
            .app-dialog-resize-handlers{
              position: fixed;
              width: ${e.width}; /* Do not add height since it could be a mask */

              .resize-handler{
                position: absolute;
                &.dialog-resize-bottom{
                  width: ${r};
                }
                &.dialog-resize-top{
                  width: ${r};
                  top: 0;
                }
                &.dialog-resize-left{
                  left: 0;
                }
                &.dialog-resize-right{
                  left: calc(100% - ${TA});
                }
              }
            }
          }
        }
      `}return t}function NA(e,t){var r;const n=PA(e),o="transparent"===n.backgroundColor?"var(--light)":n.backgroundColor,i=null===(r=e.boxShadow)||void 0===r?void 0:r.color,a=e.border&&e.border.width&&e.border.color,s="0 0 10px 1px var(--light-600)",u="12px";let l=0,c=0,d="0 auto";if(i){const t=RA(e.boxShadow),{spread:r,offsetX:n,offsetY:o}=t;l=0===r?Math.abs(n):r>0?2*r:Math.min(Math.abs(n)+r,0),c=0===r?Math.abs(o):r>0?2*r:Math.min(Math.abs(o)+r,0),d=t.shadowPadding}const p=`calc(${t.width} - ${l}px)`,f=`calc(${t.height} - ${c}px)`;let h=null,g=null;return e.border&&e.border.width&&e.border.color&&(h=e.border.color,g=e.border.width),GE`
    &.app-dialog{
      /* margin: 0.5rem !important; */
      margin: 0 !important;
      border-radius:  ${n.borderRadiusStyle};
      background-color: transparent;
      border: none;
      box-shadow: unset;

      &.dialog-animation-playing{
        .jimu-popper--arrow{
          visibility: hidden !important;
        }

        .popper-box{
          overflow: visible !important; /*for animation is playing*/

          .app-dialog-container{
            box-shadow: ${i?n.boxShadowStyle:s};
          }
        }
      }
      &.dialog-animation-end{

        &[data-popper-placement^="top"] .jimu-popper--arrow{
          &::before{
            border-top-color: ${h};
          }
          &::after{
            border-top-color: ${o};
            bottom: ${g};
          }
        }

        &[data-popper-placement^="bottom"] .jimu-popper--arrow{
          &::before{
            border-bottom-color: ${h};
          }
          &::after{
            border-bottom-color: ${o};
            top: ${g};
          }
        }

        &[data-popper-placement^="left"] .jimu-popper--arrow{
          &::before{
            border-left-color: ${h};
          }
          &::after{
            border-left-color: ${o};
            right: ${g};
          }
        }

        &[data-popper-placement^="right"] .jimu-popper--arrow{
          &::before{
            border-right-color: ${h};
          }
          &::after{
            border-right-color: ${o};
            left: ${g};
          }
        }

        &[data-popper-placement^="left"],
        &[data-popper-placement^="right"],
        &[data-popper-placement^="top"],
        &[data-popper-placement^="bottom"]{
          .popper-box{
            box-shadow: ${i?"unset":s};
          }
        }
      }

      .popper-box{
        max-width: calc(100vw - ${u});
        max-height: calc(100vh - ${u});
        width: ${t.width};
        height: ${t.height};
        border-radius:  ${n.borderRadiusStyle};
      }

      .app-dialog-animation-content{
        height: 100%;

        .app-dialog-container{
          overflow-y: auto;
          margin: ${d};
          max-width: calc(100vw - ${u} - ${l+"px"});
          max-height: calc(100vh - ${u} - ${c+"px"});
          width: ${p};

          border: ${a?n.borderStyle:"none"};
          box-shadow: ${i?n.boxShadowStyle:"unset"};
          outline: ${i&&!a?"1px solid var(--light-600)":"unset"};
          border-radius:  ${n.borderRadiusStyle};

          .app-dialog-content{
            width: 100%;
            height: ${f};
            border-radius:  ${n.borderRadiusStyle};
            background-color: ${o} ;
            background-image: ${n.backgroundImage};
            background-position: center center;
            background-repeat: ${n.backgroundRepeat};
            background-size: ${n.backgroundSize};
          }
        }
      }

    }
  `}const{useEffect:MA,useState:jA,useRef:LA}=C,UA=function({dialogJson:e,isOpen:t,jimuUI:r,jimuLayout:n,loadingCallBack:o,messages:i,cbxAnimation:a,isChecked:s,setCbxState:u,closeDialog:l}){var c,d,p,f,h,g;const m=we((e=>e.appRuntimeInfo.currentPageId)),v=we((e=>e.appRuntimeInfo.appMode===Fi.Design)),y=LA(!1),b=LA(!1),[S,w]=jA(v?null:Symbol("init one by one")),[I,E]=jA(v?null:Symbol("init as one")),O=we((t=>{var r;return(null===(r=t.appRuntimeInfo.animationPreview)||void 0===r?void 0:r.dialogId)===e.id?t.appRuntimeInfo.animationPreview:null}),X),T=LA(),A=ve();function x(){var t;(null===(t=e.effect)||void 0===t?void 0:t.type)!==XT.None&&(b.current=!1,E(Symbol(`play dialog ${e.id}`)))}function D(){var t;(null===(t=e.oneByOneEffect)||void 0===t?void 0:t.type)!==XT.None&&(y.current=!1,w(Symbol(`play dialog widgets ${e.id}`)))}MA((()=>(v||(x(),D()),()=>{})),[v,e.id,m]),MA((()=>{O&&(O.playMode!==ZT.AsOne&&D(),O.playMode!==ZT.OneByOne&&x())}),[O]);const P=C.useCallback((()=>{b.current?b.current=!1:o(!1)}),[o]);let R=null,_=null,k=null;const N=b.current?null:(b.current=!0,I);(null===(c=e.effect)||void 0===c?void 0:c.type)!==XT.None&&N&&(R=null===(d=e.effect)||void 0===d?void 0:d.type,_=null===(f=null===(p=e.effect)||void 0===p?void 0:p.option)||void 0===f?void 0:f.configType,k=null===(g=null===(h=e.effect)||void 0===h?void 0:h.option)||void 0===g?void 0:g.direction);const{ModalBody:M,ModalFooter:j}=r,{LayoutEntry:L}=n;return BE(yA.Provider,{value:{trigger:JT.Manual,setting:!t||v&&!(null==O?void 0:O.id)?null:e.oneByOneEffect,inheritedOneByOneSetting:null,playId:y.current?null:(y.current=!0,S),depth:0}},BE(EA,{type:R,trigger:JT.Manual,configType:_,direction:k,playId:N,ref:T,style:{},onAnimationEnd:P,className:"app-dialog-animation-content"},e.mode===af.Fixed&&BE(M,{className:"dialog-content"},BE(L,{layouts:e.layout,className:"w-100 h-100"})),e.mode===af.Fixed&&e.interactionType&&BE(j,{onClick:()=>eA(A),className:Ae()("dialog-footer",{"d-block":e.interactionType===uf.ButtonBlock})},BE("div",{className:"d-flex flex-grow-1 overflow-hidden text-nowrap"},BE(r.Label,{centric:!0,check:!0,className:"overflow-hidden mb-1",style:{fontSize:e.interactionStyles.textSize,textOverflow:"ellipsis",cursor:v?"inherit":"pointer"}},a?BE("div",{className:"cbx-animation"}):BE(r.Checkbox,{className:"mr-2",style:{cursor:"pointer"},onChange:e=>u(e.target.checked),checked:s,disabled:v}),BE("span",{className:"text-break overflow-hidden",style:{textOverflow:"ellipsis",width:"calc(100% - 16px)"}},e.interactionStyles.text||i(e.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")))),e.interactionType!==uf.NoButton&&BE("div",{className:"d-flex flex-row-reverse"},BE(r.Button,{icon:!0,type:"primary",disabled:v||e.interactionType&&e.confirmBeforeClose&&!s,onClick:e=>{l()},style:{fontSize:e.interactionStyles.buttonTextSize}},e.interactionStyles.buttonText||i("ok")))),e.mode===af.Anchored&&BE("div",{className:"app-dialog-container"},BE("div",{className:"app-dialog-content"},BE(L,{layouts:e.layout,className:"w-100 h-100"})))))};const{useEffect:FA,useState:$A,useRef:BA}=C;function WA(e,t,r,n,o,i,a,s){var u,l;let c=!1;if(s===t.id&&!t.isSplash&&!r.isOpenByPage&&!t.confirmBeforeClose)return c;if(t.isSplash||r.isOpenByPage){const s=t.isSplash?t.id:`${e}-${t.id}`;r.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose)?(c="true"===Tp(VA(s,n,o)),c&&GA(i,s,a),t.confirmBeforeClose||c||(c=null===(u=null==i?void 0:i[s])||void 0===u?void 0:u.isClosed)):c=null===(l=null==i?void 0:i[s])||void 0===l?void 0:l.isClosed}return c}function GA(e,t,r){var n;(null===(n=null==e?void 0:e[t])||void 0===n?void 0:n.isClosed)||r(Sm(e=(e||Ce({})).setIn([t,"isClosed"],!0)))}const VA=(e,t,r)=>`${tA(t)}-${e}-${r}`;function qA(){return e=this,t=void 0,n=function*(){return yield Bp("jimu-ui",["Modal","ModalBody","ModalFooter","Checkbox","Button"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}));var e,t,r,n}const zA=function(e){var t,{dialogJson:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["dialogJson"]);const[o,i]=$A(null),[a,u]=$A(null),[l,c]=$A(null),[d,p]=$A(null),f=we((e=>e.queryObject.draft))?"draft":"release",h=we((e=>e.appConfig.timestamp)),g=we((e=>e.appRuntimeInfo.currentPageId)),m=we((e=>e.appConfig.pages[g].autoOpenDialogId)),v=we((e=>e.appRuntimeInfo.currentDialogId)),y=we((e=>e.appRuntimeInfo.appMode===Fi.Design)),b=we((e=>{var t,r;return null===(r=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===r?void 0:r.lockLayout})),S=we((e=>e.browserSizeMode)),w=we((e=>{var t,r,n;return null===(n=null===(r=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===r?void 0:r.viewPortSize)||void 0===n?void 0:n[S]}))||Pu[S][1],[I,E]=$A(window.innerHeight),O=window.jimuConfig.isInBuilder?w.height:I,T=ve(),A=(()=>{const e=qS();return C.useCallback(((t,r)=>e.formatMessage({id:t,defaultMessage:lv[t]},r)),[e])})(),x=we((e=>uh(e.queryObject.dlg,e.appConfig))),D=we((e=>e.appRuntimeInfo.dialogInfos)),P=we((e=>{var t;return r.isSplash?r.id:e.appConfig.dialogs&&(null===(t=e.appConfig.dialogs[Object.keys(e.appConfig.dialogs).find((t=>e.appConfig.dialogs[t].isSplash))])||void 0===t?void 0:t.id)}),X),[R,_]=$A(n.isOpenByPage&&v===P||r.id===x&&v!==x||v===r.id),k=n.isOpenByPage?g+"-"+r.id:r.id,[N,M]=$A(!(!D||!D[k])&&D[k].checked),[j,L]=$A(!0),U=r.sizeMode[S]||r.sizeMode[Mi.Large],F=U.position===sf.Center,$=BA(null),[B,W]=$A(null),[G,V]=$A(!0),[q,z]=$A(r.effect&&r.effect.type!==XT.None),[H,Y]=$A(!1),J=e=>{var t;return null===(t=null==D?void 0:D[e])||void 0===t?void 0:t.isClosed},K=()=>y&&!b&&window.jimuConfig.isInBuilder,Q=()=>{E(window.innerHeight)};FA((()=>{if(K()&&l&&d){const e=xO((()=>{if(B&&B.unset(),$.current){const e=r.sizeMode[S]?S:Mi.Large;W(function(e,t,r,n,o,i){let a,s,u,l,c,d;const p=r.sizeMode[n],f=p.position;let h;f===sf.Center?h={top:".dialog-resize-top",left:".dialog-resize-left",bottom:".dialog-resize-bottom",right:".dialog-resize-right"}:f===sf.Top?h={bottom:".dialog-resize-bottom"}:f===sf.Bottom?h={top:".dialog-resize-top"}:f===sf.Left?h={right:".dialog-resize-right"}:f===sf.Right&&(h={left:".dialog-resize-left"});const g=p.position!==sf.Top&&p.position!==sf.Bottom&&parseFloat(p.width.includes("%")?p.width.split("%")[0]:p.width.split("px")[0]),m=p.position!==sf.Left&&p.position!==sf.Right&&parseFloat(p.height.includes("%")?p.height.split("%")[0]:p.height.split("px")[0]),v=document.querySelector(`div[id="${r.id}"]`),y=v.querySelector("div.app-dialog-resize-handlers"),b=y.querySelector("span.dialog-resize-left"),S=y.querySelector("span.dialog-resize-right"),w=y.querySelector("span.dialog-resize-top"),I=y.querySelector("span.dialog-resize-bottom");return e(t).resizable({edges:h}).on("resizestart",(e=>{e.stopPropagation(),a=0,s=0;const r=t.getBoundingClientRect();c=r.width,d=r.height,t.style.minWidth="0px",t.style.minHeight="0px",i(!1)})).on("resizemove",(e=>{e.stopPropagation();const r=e.deltaRect;a+=r.width,s+=r.height,u=a,l=s;let n=g&&`${c+a}px`,o=m&&`${d+s}px`;if(p.position===sf.Center&&p.aspectRatio)if(0===s){const e=(c+a)/c*d;l=e-d,o=e+"px"}else{const e=(d+s)/d*c;u=e-c,n=e+"px"}t.style.width=n,t.style.height=o,p.position===sf.Left||p.position===sf.Right?v.style.width=n:p.position===sf.Bottom?v.style.height=o:p.position===sf.Center&&(v.querySelector("div.app-dialog-content").style.width=n,v.querySelector("div.app-dialog-animation-content").style.width=n,v.querySelector("div.app-dialog-animation-content").style.height=o,y.style.width=n,y.style.top=`calc(50% - ${(d+l)/2}px)`),w&&(w.style.width=n),I&&(I.style.width=n,I.style.top=`calc(${d+l}px - 16px)`),b&&(b.style.height=o),S&&(S.style.height=o)})).on("resizeend",(e=>{e.stopPropagation(),i(!0),t.style.width=null,t.style.minWidth=null,t.style.height=null,t.style.minHeight=null,p.position===sf.Left||p.position===sf.Right?v.style.width=null:p.position===sf.Bottom?v.style.height=null:p.position===sf.Center&&(v.querySelector("div.app-dialog-content").style.width=null,v.querySelector("div.app-dialog-animation-content").style.width=null,v.querySelector("div.app-dialog-animation-content").style.height=null,y.style.width=null,y.style.top=null),w&&(w.style.width=null),I&&(I.style.width=null,I.style.top=null),b&&(b.style.height=null),S&&(S.style.height=null);let r=null,a=null;g&&(r=AA(p.width.includes("px")?"px":"%",g*(c+u)/c)),m&&(a=AA(p.height.includes("px")?"px":"%",m*(d+l)/d));const s=tg().getState().appConfig.dialogs[tg().getState().appRuntimeInfo.currentDialogId].setIn(["sizeMode",n,"width"],null!=r?r:p.width).setIn(["sizeMode",n,"height"],null!=a?a:p.height);o().editDialog(s).exec()}))}(d,$.current,r,e,l,L))}}),$.current?0:1e3);e()}}),[y,b,v,r.sizeMode[S],U.position,U.width,U.height,l,d]),FA((()=>{M(!1)}),[v]),FA((()=>{z(r.effect&&r.effect.type!==XT.None)}),[r.effect,v]),FA((()=>{var e;return Promise.all([qA(),rA()]).then((e=>{i(e[0]),u(e[1])})),window.jimuConfig.isInBuilder?(l||Bp("jimu-for-builder",["getAppConfigAction"]).then((e=>{c((()=>e.getAppConfigAction))})),d||Bp("jimu-core/dnd").then((e=>{p((()=>e.interact))}))):window.jimuConfig.isBuilder||(null===(e=U.height)||void 0===e?void 0:e.includes("%"))&&window.addEventListener("resize",Q),(r.isSplash&&!J(P)&&(window.jimuConfig.isInBuilder||"true"!==Tp(VA(P,f,h)))||n.isOpenByPage&&(P&&(J(P)||window.jimuConfig.isInBuilder||"true"===Tp(VA(P,f,h)))||!P))&&!WA(g,r,n,f,h,D,T)&&r.id!==x&&r.id!==v&&(T(bm(r.id)),T(Am(null))),()=>{var e;y&&B&&B.unset(),!window.jimuConfig.isBuilder&&(null===(e=U.height)||void 0===e?void 0:e.includes("%"))&&window.removeEventListener("resize",Q);const t=tg().getState(),r=t.appRuntimeInfo.dialogInfos;if(r){const e=r[te()];(null==e?void 0:e.canClose)&&ee(t)}}}),[]);const Z=null===(t=null==D?void 0:D[v])||void 0===t?void 0:t.alertVersion;FA((()=>{Z>=1&&(Y(!0),xO((()=>{Y(!1)}),800)())}),[Z]),FA((()=>{if(Tp("exb-link-dialog"))return;let e=!1;(r.isSplash||n.isOpenByPage||v)&&(e=!WA(g,r,n,f,h,D,T,x)),e!==R&&_(e)}));const ee=e=>{var t,o;if(r.isSplash||n.isOpenByPage){!function(e,t,r,n,o,i,a){var s;const u=t.isSplash?t.id:`${e}-${t.id}`;r.runtime&&t.interactionType&&(t.confirmBeforeClose&&!t.alwaysShowConfirmation||!t.confirmBeforeClose&&(null===(s=null==i?void 0:i[u])||void 0===s?void 0:s.checked))&&Ap(VA(u,n,o),"true"),GA(i,u,a)}(g,r,n,f,h,(null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.dialogInfos)||D,T);const o=re(e);T(bm(o)),_(!1),o||T(Am(qi.Body))}else GA((null===(o=null==e?void 0:e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos)||D,r.id,T),uS(null),T(Am(qi.Body))},te=()=>n.isOpenByPage?g+"-"+r.id:r.id,re=e=>{var t,o,i,a,s,u,l;let c=x,d=v;if((r.isSplash||n.isOpenByPage)&&(c=null==e?void 0:e.queryObject.dlg,d=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId,window.jimuConfig.isInBuilder)){if(r.isSplash){if(m&&!(null===(a=null===(i=e?null===(o=e.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos:D)||void 0===i?void 0:i[g+"-"+m])||void 0===a?void 0:a.isClosed))return m;if(r.isSplash&&c===r.id&&(null===(l=null===(u=null===(s=null==e?void 0:e.appRuntimeInfo)||void 0===s?void 0:s.dialogInfos)||void 0===u?void 0:u[r.id])||void 0===l?void 0:l.isClosed))return null}return c}let p=r.isSplash&&(m||c)||n.isOpenByPage&&d!==c&&c||null;return d===p&&(p=null),p};if(!o||!a)return null;const{Modal:ne}=o,oe=jp().Global;return BE(ne,{"aria-label":r.label,isOpen:R,fade:!1,disableActivateOverlay:!0,toggle:()=>{var e,t;if(y)eA(T);else if(r.interactionType&&r.confirmBeforeClose&&!N){const r=(D||Ce({})).set(te(),{canClose:!1,checked:!1,alertVersion:(null!==(t=null===(e=null==D?void 0:D[te()])||void 0===e?void 0:e.alertVersion)&&void 0!==t?t:0)+1,isClosed:!1});T(Sm(r))}else R&&r.closeWhenClickOverlay?ee():eA(T)},centered:F,css:kA(U),id:r.id,className:"app-dialog",wrapClassName:`app-dialog-wrap app-dialog-wrap-${r.id}`,modalClassName:"app-dialog-modal",backdropClassName:"app-dialog-backdrop",contentClassName:Ae()("app-dialog-content",{"overflow-visible h-auto":!j||q}),onOpened:()=>{V(!1)}},BE(oe,{styles:_A(r,R,O,U)}),BE("div",{className:"app-dialog-resize-container",css:GE`
    .app-dialog-resize-handlers{
        max-width: 100vw;

      .resize-handler{
        width: 100%;
        height: 100%;
        position: fixed;
        z-index: 1;

        .jimu-icon {
          position: absolute;
          color: var(--light-500);
        }

        &.dialog-resize-bottom{
          height: ${TA};
          cursor: ns-resize;
          .jimu-icon{
            left: min(50%, 50vw);
            margin-left: -0.75rem;
          }
        }
        &.dialog-resize-top{
          height: ${TA};
          cursor: ns-resize;
          top: 0;
          .jimu-icon {
            left: min(50%, 50vw);
            margin-left: -0.75rem;
          }
        }
        &.dialog-resize-right{
          width: ${TA};
          right: ${"0px"};
          cursor: ew-resize;
          top: 0;
          .jimu-icon{
            top: 50%;
            margin-top: -0.75rem;
          }
        }
        &.dialog-resize-left{
          width: ${TA};
          left: ${"0px"};
          cursor: ew-resize;
          top: 0;
          .jimu-icon{
            top: 50%;
            margin-top: -0.75rem;
          }
        }

        &:hover {
          /* background: red; */
        }
      }
    }
  `,ref:e=>$.current=e},BE("div",{className:"w-100 h-100"},R&&!G&&BE(UA,{dialogJson:r,isOpen:R,jimuUI:o,jimuLayout:a,cbxAnimation:H,messages:A,isChecked:N,setCbxState:e=>{M(e);const t=!r.interactionType||!r.confirmBeforeClose||e,n=(D||Ce({})).set(te(),{canClose:t,checked:e,isClosed:!1});T(Sm(n))},closeDialog:ee,loadingCallBack:e=>z(e)})),K()&&BE("div",{className:Ae()("app-dialog-resize-handlers",{"resize-center":U.position===sf.Center})},function(e,t,r){const n=[];return e&&(t.position!==sf.Bottom&&t.position!==sf.Center||n.push(BE("span",{key:"1",className:"resize-handler dialog-resize-top"},BE(r,{icon:s(6465)}))),t.position!==sf.Top&&t.position!==sf.Center||n.push(BE("span",{key:"2",className:"resize-handler dialog-resize-bottom"},BE(r,{icon:s(6465)}))),t.position!==sf.Right&&t.position!==sf.Center||n.push(BE("span",{key:"3",className:"resize-handler dialog-resize-left"},BE(r,{icon:s(7768)}))),t.position!==sf.Left&&t.position!==sf.Center||n.push(BE("span",{key:"4",className:"resize-handler dialog-resize-right"},BE(r,{icon:s(7768)})))),n}(y,U,o.Icon))))};const{useEffect:HA,useState:YA}=C;function JA(){return e=this,t=void 0,n=function*(){return yield Bp("jimu-ui",["Popper"])},new((r=void 0)||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}));var e,t,r,n}const XA=function({dialogJson:e,opener:t,toggle:r}){const[n,o]=YA(null),[i,a]=YA(null),[s,u]=YA(e.effect&&e.effect.type!==XT.None),l=we((e=>e.appRuntimeInfo.appMode===Fi.Design)),c=we((e=>e.appRuntimeInfo.currentDialogId)),d=we((e=>e.browserSizeMode)),p=e.sizeMode[d]||e.sizeMode[Mi.Large],f=null==n?void 0:n.getFallbackPlacementsModifier,h=C.useMemo((()=>{const e=null==f?void 0:f(["top","right","left"]);return[{name:"preventOverflow",options:{altAxis:!0,padding:6}},Object.assign({},e)]}),[f]);if(HA((()=>{Promise.all([JA(),rA()]).then((e=>{o(e[0]),a(e[1])}))}),[]),HA((()=>{l&&c===e.id&&r()}),[l]),!n||!i)return null;const{Popper:g}=n;return BE(g,{open:!0,showArrow:!!t,toggle:r,reference:t,modifiers:h,css:NA(e,p),disableActivateOverlay:e.closeWhenClickOverlay,className:Ae()("app-dialog",{"dialog-animation-playing":s,"dialog-animation-end":!s})},BE(UA,{dialogJson:e,isOpen:!0,jimuUI:n,jimuLayout:i,loadingCallBack:e=>u(e)}))},{useEffect:KA}=C;function QA(e){const t=we((e=>e.queryObject.draft))?"draft":"release",r=we((e=>e.appConfig.timestamp)),n=we((e=>e.appRuntimeInfo.currentPageId)),o=we((e=>e.appRuntimeInfo.appMode===Fi.Design)),i=we((e=>e.browserSizeMode)),a=e.dialogJson.sizeMode[i]?i:Mi.Large,s=ve();if(KA((()=>{e.runtime&&function(e,t){const r=tA(e);Cp().forEach((e=>{e.includes(r)&&!e.includes(t)&&Rp(e)}))}(t,r)}),[e.runtime,t,r]),KA((()=>{s(wm(null))}),[o,e.dialogJson.id,n]),e.dialogJson.mode===af.Fixed)return BE(zA,Object.assign({},e));if(window.jimuConfig.isInBuilder&&!e.opener){const t=e.dialogJson.set("mode",af.Fixed).set("isOpenerDlg",!0).setIn(["sizeMode",a,"position"],sf.Center);return BE(zA,{dialogJson:t,opener:e.opener,isOpenByPage:e.isOpenByPage})}return BE(XA,Object.assign({},e))}var ZA,ex;!function(e){e.Horizontal="H",e.Vertical="V"}(ZA||(ZA={})),function(e){e.Cube="CUBE",e.Cover="COVER",e.Fade="FADE",e.Push="PUSH",e.Box="BOX",e.None="None"}(ex||(ex={}));class tx{constructor(e=!1,t=ZA.Horizontal){this.isRTL=e,this.direction=t}initRotate(){return this.direction===ZA.Vertical?"rotateX(-90deg)":this.isRTL?"rotateY(90deg)":"rotateY(-90deg)"}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){const o=e===t||e===r,i=this.getDiscreteOrigin(e,t,r,n);if(!o)return{display:"none",transformOrigin:""};const a={},s=this.direction===ZA.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?90:-90;a.from=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:e*s,rotateY:this.direction===ZA.Horizontal?-e*s:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},nA,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.reset=!0}else a.from=Object.assign({},nA,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),a.to=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:e>t&&!n?90:-90,rotateY:this.direction===ZA.Horizontal?e>t&&!n?-90*s:90*s:0,opacity:1,transformOrigin:i}),a.reset=!0;return a}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none",transformOrigin:""};let i,a=n-r;t===r&&(a=1),i=this.direction===ZA.Vertical||this.isRTL?e===t?90*(1-a):-90*a:e===t?-90*(1-a):90*a;const s=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:i,rotateY:this.direction===ZA.Horizontal?i:0,opacity:1,transformOrigin:this.getOrigin(e,t,r)});if(e===t&&o){const n={};let o;return o=this.direction===ZA.Vertical||this.isRTL?90:-90,n.from=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:o,rotateY:this.direction===ZA.Horizontal?o:0,opacity:1,transformOrigin:this.getOrigin(e,t,r)}),n.to=s,n.reset=!0,n}return s.reset=!1,s}getOrigin(e,t,r){return e===t?this.direction===ZA.Vertical?"bottom":this.isRTL?"left":"right":e===r?this.direction===ZA.Vertical?"top":this.isRTL?"right":"left":void 0}getDiscreteOrigin(e,t,r,n){if(this.direction===ZA.Vertical){if(e===t)return t>r||n?"bottom":"top";if(e===r)return t>r||n?"top":"bottom"}if(this.isRTL){if(e===t)return t>r||n?"left":"right";if(e===r)return t>r||n?"right":"left"}else{if(e===t)return t>r||n?"right":"left";if(e===r)return t>r||n?"left":"right"}return""}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{rotateX:i,rotateY:a}=e;return i&&a?Vr([i,a],((e,t)=>`perspective(1000px) rotateX(${e}deg) rotateY(${t}deg)`)):null}}class rx{constructor(e=!1,t=ZA.Horizontal){this.isRTL=e,this.direction=t}initOffset(e,t,r,n){if(t!==r)return 0;let o=e-n;return r===n&&(o=1),this.direction===ZA.Horizontal&&this.isRTL?100*(o-1):100*(1-o)}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){if(e!==t&&e!==r)return{display:"none"};const o={},i=this.direction===ZA.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?100*i:-100*i;o.from=Object.assign({},nA,{offsetX:this.direction===ZA.Horizontal?e:0,offsetY:this.direction===ZA.Horizontal?0:e,opacity:1,display:"block",zIndex:1}),o.to=Object.assign({},nA,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1}),o.reset=!0}else e===r&&(o.from=Object.assign({},nA,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.to=Object.assign({},nA,{offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0}),o.reset=!0);return o}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none"};const i=this.initOffset(n,e,t,r),a=Object.assign({},nA,{display:"block",offsetX:this.direction===ZA.Horizontal?i:0,offsetY:this.direction===ZA.Horizontal?0:i,opacity:1});if(e===t&&o){const e={};let t;return t=this.direction===ZA.Horizontal&&this.isRTL?-100:100,e.from=Object.assign({},nA,{display:"block",offsetX:this.direction===ZA.Horizontal?t:0,offsetY:this.direction===ZA.Horizontal?0:t,opacity:1}),e.to=a,e.reset=!0,e}return a.reset=!1,a}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{offsetX:i,offsetY:a}=e;return i&&a?Vr([i,a],((e,t)=>`translate3d(${e}%, ${t}%, 0)`)):null}}class nx{getTransitionProps(e,t,r,n,o){return o>=0?this.getContinuousTransitionProps(e,t,r,o):this.getDiscreteTransitionProps(e,t,r)}getDiscreteTransitionProps(e,t,r){if(e!==t&&e!==r)return{display:"none"};const n={};return e===t?(n.from=Object.assign({},nA,{opacity:0,zIndex:0,display:"block"}),n.to=Object.assign({},nA,{opacity:1,zIndex:1,display:"block"}),n.reset=!0):e===r&&(n.from=Object.assign({},nA,{opacity:1,zIndex:1,display:"block"}),n.to=Object.assign({},nA,{opacity:0,zIndex:0,display:"block"}),n.reset=!0),n}getContinuousTransitionProps(e,t,r,n=1){if(e!==t&&e!==r)return{display:"none"};let o=n-r;return t===r&&(o=1),Object.assign({},nA,{display:"block",opacity:e===t?o:1-o,zIndex:e===t?1:0,reset:!1})}transform(e,t,r,n,o){return""}}class ox{constructor(e=!1,t=ZA.Horizontal){this.isRTL=e,this.direction=t}initOffset(e,t,r,n){let o=e-n;return r===n&&(o=1),t===r?this.direction===ZA.Horizontal&&this.isRTL?100*(o-1):100*(1-o):this.direction===ZA.Horizontal&&this.isRTL?100*o:-100*o}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){if(e!==t&&e!==r)return{display:"none"};const o={},i=this.direction===ZA.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>r||n?100*i:-100*i;o.from=Object.assign({},nA,{offsetX:this.direction===ZA.Horizontal?e:0,offsetY:this.direction===ZA.Horizontal?0:e,opacity:1,display:"block"}),o.to=Object.assign({},nA,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.reset=!0}else if(e===r){const r=e>t&&!n?100*i:-100*i;o.from=Object.assign({},nA,{offsetX:0,offsetY:0,opacity:1,display:"block"}),o.to=Object.assign({},nA,{offsetX:this.direction===ZA.Horizontal?r:0,offsetY:this.direction===ZA.Horizontal?0:r,opacity:1,display:"block"}),o.reset=!0}return o}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none"};const i=this.initOffset(n,e,t,r),a=Object.assign({},nA,{display:"block",offsetX:this.direction===ZA.Horizontal?i:0,offsetY:this.direction===ZA.Horizontal?0:i,opacity:1});if(o&&e===t){let e;e=this.direction===ZA.Horizontal&&this.isRTL?-100:100;const t={};return t.from=Object.assign({},nA,{display:"block",offsetX:this.direction===ZA.Horizontal?e:0,offsetY:this.direction===ZA.Horizontal?0:e,opacity:1}),t.to=a,t.reset=!0,t}return a.reset=!1,a}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{offsetX:i,offsetY:a}=e;return i&&a?Vr([i,a],((e,t)=>`translate3d(${e}%, ${t}%, 0)`)):null}}class ix{constructor(e=!1,t=ZA.Horizontal){this.isRTL=e,this.direction=t}initState(e,t,r,n){let o=e-n;return r===n&&(o=1),t===r?[100*(1-o),60*(1-o)]:[-100*o,-60*o]}getContinuousOrigin(e,t,r){return this.direction===ZA.Vertical?e===t?"top":"bottom":e===t?this.isRTL?"right":"left":this.isRTL?"left":"right"}getDiscreteOrigin(e,t,r,n){return this.direction===ZA.Vertical?e===t?t>r||n?"top":"bottom":e<t||n?"bottom":"top":this.isRTL?e===t?t>r||n?"right":"left":e<t||n?"left":"right":e===t?t>r||n?"left":"right":e<t||n?"right":"left"}getTransitionProps(e,t,r,n,o,i){return o>=0?this.getContinuousTransitionProps(e,t,r,o,i):this.getDiscreteTransitionProps(e,t,r,n)}getDiscreteTransitionProps(e,t,r,n){const o=e===t||e===r,i=this.getDiscreteOrigin(e,t,r,n);if(!o)return{display:"none",transformOrigin:i};const a=this.isRTL?-1:1,s={};if(e===t){const e=t>r||n?100:-100,o=t>r||n?60:-60;s.from=Object.assign({},nA,{rotateX:this.direction===ZA.Horizontal?0:-o,rotateY:this.direction===ZA.Horizontal?o*a:0,offsetX:this.direction===ZA.Horizontal?e*a:0,offsetY:this.direction===ZA.Horizontal?0:e,opacity:0,display:"block",zIndex:1,transformOrigin:i}),s.to=Object.assign({},nA,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:1,transformOrigin:i}),s.reset=!0}else{const e=t>r||n?-100:100,o=t>r||n?-60:60;s.from=Object.assign({},nA,{rotateX:0,rotateY:0,offsetX:0,offsetY:0,opacity:1,display:"block",zIndex:0,transformOrigin:i}),s.to=Object.assign({},nA,{rotateX:this.direction===ZA.Horizontal?0:-o,rotateY:this.direction===ZA.Horizontal?o*a:0,offsetX:this.direction===ZA.Horizontal?e*a:0,offsetY:this.direction===ZA.Horizontal?0:e,opacity:0,display:"block",zIndex:0,transformOrigin:i}),s.reset=!0}return s}getContinuousTransitionProps(e,t,r,n=1,o){if(e!==t&&e!==r)return{display:"none",transformOrigin:""};const[i,a]=this.initState(n,e,t,r);let s=n-r;t===r&&(s=1);const u=this.isRTL?-1:1;if(e===t){const n={},l=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:-a,rotateY:this.direction===ZA.Horizontal?a*u:0,offsetX:this.direction===ZA.Horizontal?i*u:0,offsetY:this.direction===ZA.Horizontal?0:i,opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,r)});return o?(n.from=Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:-60,rotateY:this.direction===ZA.Horizontal?60*u:0,offsetX:this.direction===ZA.Horizontal?100*u:0,offsetY:this.direction===ZA.Horizontal?0:100,opacity:s,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,r)}),n.to=l,n.reset=!0,n):(l.reset=!1,l)}return Object.assign({},nA,{display:"block",rotateX:this.direction===ZA.Horizontal?0:-a,rotateY:this.direction===ZA.Horizontal?a*u:0,offsetX:this.direction===ZA.Horizontal?i*u:0,offsetY:this.direction===ZA.Horizontal?0:i,opacity:1-s,transformOrigin:this.getContinuousOrigin(e,t,r),zIndex:0,reset:!1})}transform(e,t,r,n,o){if(t!==r&&t!==n)return null;const{offsetX:i,offsetY:a,rotateX:s,rotateY:u}=e;return null==i||null==u?null:Vr([i,a,s,u],((e,t,r,n)=>`perspective(1000px) translate3d(${e}%, ${t}%, 0) rotateX(${r}deg) rotateY(${n}deg)`))}}class ax{getTransitionProps(e,t,r,n,o=1){return Object.assign({},nA,{display:e===t?"block":"none",opacity:1,zIndex:e===t?1:0,reset:!0})}transform(e,t,r,n,o){return""}}function sx(){var e,t;return null!==(t=null===(e=tg().getState().appContext)||void 0===e?void 0:e.isRTL)&&void 0!==t&&t}function ux(e){return Math.abs(e-Math.round(e))<1e-7}function lx(e,t){let r,n;const o=cx(e,0,1)*(t-1),i=Math.floor(o);return n=i,n=ux(o)?Math.round(o)-1:i,r=n+1,r=cx(r,0,t-1),n=cx(n,0,t-1),{previousIndex:n,progress:o,currentIndex:r}}function cx(e,t,r){return Math.max(t,Math.min(e,r))}function dx(e,t=ZA.Horizontal){switch(e){case ex.Cover:return new rx(sx(),t);case ex.Cube:return new ix(sx(),t);case ex.Fade:return new nx;case ex.Push:return new ox(sx(),t);case ex.Box:return new tx(sx(),t);default:return new ax}}var px;function fx(e){const{useProgress:t=!1,useStep:r,progress:n,currentIndex:o,previousIndex:i,direction:a,transitionType:s,children:u,playId:l,withOneByOne:c,loop:d}=e,p=C.useRef(),f=C.useRef(),h=C.useRef(),g=C.useRef(),m=C.useRef(),[v,y]=C.useState(),b=C.Children.count(u),S=C.useContext(yA),{setting:w,playId:I,onAnimationEnd:E}=S||{},O=C.useMemo((()=>dx(s,a)),[s,a]),T=we((e=>{var t;return s&&s!==ex.None?(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Fi.Design:null})),[A,x]=C.useMemo((()=>{let e=n,r=!1,a=!1;if(t){const t=lx(n,b);e=t.progress,Math.round(100*g.current)!==Math.round(100*e)&&(r=!0,g.current=t.progress);let o=!0;p.current===t.currentIndex-1?a=!0:ux(n*(b-1))&&t.currentIndex===p.current-1&&(o=!1),o&&(p.current=t.currentIndex,f.current=t.previousIndex)}else p.current===o&&f.current===i||(r=!0,p.current=o,f.current=i);return m.current=r,[e,a]}),[t,n,b,o,i]),D=l&&h.current!==l||m.current,[P,R,_]=Qr(b,(e=>Object.assign({},nA,{zIndex:e===p.current?1:0,display:e===p.current?"block":"none"}))),k=(e,t,r,n=!1,o=!1,i)=>{_(),R((a=>{const s=a!==e?void 0:()=>{"function"==typeof i&&i(),N()};return Object.assign(Object.assign({},O.getTransitionProps(a,e,t,d,r,n)),{config:{duration:400},immediate:o,onRest:s})}))},N=()=>{w&&w.type!==XT.None&&y(Symbol())};C.useEffect((()=>{if(l&&h.current!==l)return h.current=l,m.current=!1,void k(p.current,f.current,void 0);m.current&&(m.current=!1,k(p.current,f.current,A,x,!(!t||r)))}));const M=function(e){const t=C.useRef(),r=C.useCallback((r=>{var n,o,i;return e&&(null===(n=t.current)||void 0===n?void 0:n.symbol)!==e&&(t.current={symbol:e,used:!1}),r&&(null===(o=t.current)||void 0===o?void 0:o.symbol)&&!(null===(i=t.current)||void 0===i?void 0:i.used)?(t.current.used=!0,t.current.symbol):null}),[e]);return r}(I),j=function(e){const{sectionPlayId:t,withOneByOne:r,willPlayTransition:n}=e,o=C.useRef(),i=C.useCallback((e=>{var i,a,s;if(!r)return null;if(t&&(null===(i=o.current)||void 0===i?void 0:i.symbol)!==t&&(o.current={symbol:t,used:!1}),(null===(a=o.current)||void 0===a?void 0:a.symbol)&&!(null===(s=o.current)||void 0===s?void 0:s.used)){if(n)return e?Symbol("prepare animation before transition"):null;if(e)return o.current.used=!0,o.current.symbol}return null}),[t,r,n]);return i}({sectionPlayId:l,withOneByOne:c,willPlayTransition:D}),L=function(e){const{activeViewIndex:t,willPlayTransition:r}=e,n=C.useRef(),o=C.useCallback(((e,o)=>{var i,a;if(e)return null;if((null===(i=n.current)||void 0===i?void 0:i.index)!==t&&(n.current={index:t,used:!1}),!(null===(a=n.current)||void 0===a?void 0:a.used)){if(r)return o?Symbol("prepare animation before transition"):null;if(o)return n.current.used=!0,Symbol("play animation after transition")}return null}),[t,r]);return o}({activeViewIndex:p.current,willPlayTransition:D}),U=e=>{const t=e===p.current;return M(t)||j(t)||L(T,t)},F=()=>{"function"==typeof E&&E()};return C.createElement(C.Fragment,null,C.Children.map(u,((e,r)=>{const n=P[r],{offsetX:o,offsetY:i,rotateX:a,rotateY:s}=n,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(n,["offsetX","offsetY","rotateX","rotateY"]);let l="";p.current!==f.current&&(l=O.transform(P[r],r,p.current,f.current,A));const c=r===p.current||r===f.current;return C.createElement($n.div,{className:"w-100 h-100 view-content",key:r,style:Object.assign({position:"absolute",transform:l},u)},C.createElement(yA.Provider,{value:{trigger:JT.Manual,setting:t?null:c?w:null,playId:c?U(r):null,revert:D&&r===p.current||!D&&r!==p.current,inheritedOneByOneSetting:null,depth:S.depth+1,onAnimationEnd:F}},e))})))}function hx(e){switch(e){case ex.Cover:case ex.Cube:case ex.Push:case ex.Box:return!0;default:return!1}}const gx=s(1981).exbVersion,mx={assign:gO,defer:hg,debounce:xO,setValue:Cw,getValue:ss,isDeepEqual:Cu,throttle:function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Sa(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),xO(e,t,{leading:n,maxWait:t,trailing:o})},kebabCase:nC,cloneDeep:function(e){return DC(e,5)},clone:function(e){return DC(e,4)}},vx={restAuth:r,restFeatureLayer:n,restPortal:Ao,restRequest:To,Sanitizer:Gi},yx={rgba:It,parseToRgb:ht,rem:tt,readableColor:function(e,t,r,n){void 0===t&&(t=Nt),void 0===r&&(r=Mt),void 0===n&&(n=!0);var o,i,a,s=Dt(e)>.179,u=s?t:r;return!n||(o=u,i=Dt(e),a=Dt(o),parseFloat((i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)).toFixed(2))>=4.5)?u:s?Nt:Mt},lighten:Rt,darken:xt,ellipsis:function(e,t){void 0===t&&(t=1);var r={display:"inline-block",maxWidth:e||"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"};return t>1?N({},r,{WebkitBoxOrient:"vertical",WebkitLineClamp:t,display:"-webkit-box",whiteSpace:"normal"}):r},mix:kt,stripUnit:Ze,math:function(e,t){var r=Xe(e),n=r.match(Ye);if(n&&!n.every((function(e){return e===n[0]})))throw new He(41);return""+function(e,t){var r,n=function(e){var t={};return t.symbols=e?N({},ze.symbols,e.symbols):N({},ze.symbols),t}(t),o=[n.symbols["("].prefix],i=[],a=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(n.symbols).map((function(e){return n.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");a.lastIndex=0;var s=!1;do{var u=(r=a.exec(e))||[")",void 0],l=u[0],c=u[1],d=n.symbols[l],p=d&&!d.prefix&&!d.func,f=!d||!d.postfix&&!d.infix;if(c||(s?f:p))throw new He(37,r?r.index:e.length,e);if(s){var h=d.postfix||d.infix;do{var g=o[o.length-1];if((h.precedence-g.precedence||g.rightToLeft)>0)break}while(Je(o,i));s="postfix"===h.notation,")"!==h.symbol&&(o.push(h),s&&Je(o,i))}else if(d){if(o.push(d.prefix||d.func),d.func&&(!(r=a.exec(e))||"("!==r[0]))throw new He(38,r?r.index:e.length,e)}else i.push(+l),s=!0}while(r&&o.length);if(o.length)throw new He(39,r?r.index:e.length,e);if(r)throw new He(40,r?r.index:e.length,e);return i.pop()}(Xe(r.replace(Ye,"")),t)+(n?Xe(n[0]):"")},borderRadius:function(e,t){var r,n,o,i=(o=e).charAt(0).toUpperCase()+o.slice(1);if(!t&&0!==t)throw new He(62);if("Top"===i||"Bottom"===i)return(r={})["border"+i+"RightRadius"]=t,r["border"+i+"LeftRadius"]=t,r;if("Left"===i||"Right"===i)return(n={})["borderTop"+i+"Radius"]=t,n["borderBottom"+i+"Radius"]=t,n;throw new He(63)},getValueAndUnit:function(e){if("string"!=typeof e)return[e,""];var t=e.match(et);return t?[parseFloat(e),t[2]]:[e,void 0]}},bx=null!==(px=window.ResizeObserver)&&void 0!==px?px:pr})(),u})())}}}));