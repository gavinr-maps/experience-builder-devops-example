System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-ui/advanced/map","jimu-ui/advanced/setting-components","jimu-theme","jimu-arcgis"],function(e,o){var t={},s={},i={},n={},l={},a={},r={};return{setters:[function(e){t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){s.FormattedMessage=e.FormattedMessage,s.Immutable=e.Immutable,s.React=e.React,s.css=e.css,s.polished=e.polished},function(e){i.Checkbox=e.Checkbox,i.Label=e.Label,i.Radio=e.Radio},function(e){n.JimuSymbolType=e.JimuSymbolType,n.SymbolSelector=e.SymbolSelector},function(e){l.SettingRow=e.SettingRow,l.SettingSection=e.SettingSection},function(e){a.withTheme=e.withTheme},function(e){r.featureUtils=e.featureUtils,r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=a},14321:e=>{"use strict";e.exports=i},48993:e=>{"use strict";e.exports=n},62686:e=>{"use strict";e.exports=r},67386:e=>{"use strict";e.exports=t},79244:e=>{"use strict";e.exports=s},79298:e=>{"use strict";e.exports=l}},o={};function m(t){var s=o[t];if(void 0!==s)return s.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,m),i.exports}m.d=(e,o)=>{for(var t in o)m.o(o,t)&&!m.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},m.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),m.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="";var p={};return m.p=window.jimuConfig.baseUrl,(()=>{"use strict";m.r(p),m.d(p,{default:()=>b});var e=m(67386),o=m(79244),t=m(14321),s=m(48993),i=m(79298);const n="Point",l="Polyline",a="Polygon",r="Use layer-defined symbols",y="Use custom symbols",d="Set as operational layers";var c=m(1888),u=m(62686);class h extends o.React.PureComponent{constructor(e){super(e),this.modalStyle={position:"absolute",top:"0",bottom:"0",width:"259px",height:"auto",borderRight:"",borderBottom:"",paddingBottom:"1px"},this.onOperationalLayerCheckboxChange=e=>{var o;const t=!!(null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.checked),s=this.props.config.set("isOperationalLayer",t);this.props.onSettingChange({actionId:this.props.actionId,config:s})},this.handleIsUseCustomSymbolOption=e=>{this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config.set("isUseCustomSymbol",e).set("symbolOption",null)})},this.onSymbolChanged=(e,o)=>{this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config.setIn(["symbolOption",o],e.toJSON())})},this.onSymbolCreated=(e,o)=>{this.defaultSymbolOption=this.defaultSymbolOption.set(o,null==e?void 0:e.toJSON()),!this.props.config.symbolOption&&this.defaultSymbolOption.pointSymbol&&this.defaultSymbolOption.polylineSymbol&&this.defaultSymbolOption.polygonSymbol&&this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config.setIn(["symbolOption"],this.defaultSymbolOption)})},this.getInitSymbolFromConfig=e=>{let o;const t=this.props.config.symbolOption;return this.jsonUtils&&(e===s.JimuSymbolType.Point?o=(null==t?void 0:t.pointSymbol)?t.pointSymbol:u.featureUtils.getDefaultSymbol("point"):e===s.JimuSymbolType.Polyline?o=(null==t?void 0:t.polylineSymbol)?t.polylineSymbol:u.featureUtils.getDefaultSymbol("polyline"):e===s.JimuSymbolType.Polygon&&(o=(null==t?void 0:t.polygonSymbol)?t.polygonSymbol:u.featureUtils.getDefaultSymbol("polygon"))),o?this.jsonUtils.fromJSON(o):null},this.jsonUtils=null,this.defaultSymbolOption=(0,o.Immutable)({}),this.state={isModulesLoaded:!1}}componentDidMount(){(0,u.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then(e=>{[this.jsonUtils]=e,this.setState({isModulesLoaded:!0})}),this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config})}getStyle(e){return o.css`
      .setting-header {
        padding: ${o.polished.rem(10)} ${o.polished.rem(16)} ${o.polished.rem(0)} ${o.polished.rem(16)}
      }

      .deleteIcon {
        cursor: pointer;
        opacity: .8;
      }

      .deleteIcon:hover {
        opacity: 1;
      }
    `}render(){var m;const p=!!(null===(m=this.props.config)||void 0===m?void 0:m.isOperationalLayer);return(0,e.jsxs)("div",{css:this.getStyle(this.props.theme),children:[(0,e.jsxs)(i.SettingSection,{title:this.props.intl.formatMessage({id:"symbol",defaultMessage:"symbol"}),children:[(0,e.jsx)(i.SettingRow,{children:(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:(0,e.jsxs)("div",{className:"align-items-center d-flex",children:[(0,e.jsx)(t.Radio,{style:{cursor:"pointer"},checked:!this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!1)},"aria-labelledby":"useLayerDefinedLabel"}),(0,e.jsx)("label",{id:"useLayerDefinedLabel",className:"m-0 ml-2",style:{cursor:"pointer"},children:this.props.intl.formatMessage({id:"mapAction_UseLayerDefinedSymbols",defaultMessage:r})})]})})}),(0,e.jsx)(i.SettingRow,{children:(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:(0,e.jsxs)("div",{className:"align-items-center d-flex",children:[(0,e.jsx)(t.Radio,{style:{cursor:"pointer"},checked:this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!0)},"aria-labelledby":"useCustomLabel"}),(0,e.jsx)("label",{id:"useCustomLabel",className:"m-0 ml-2",style:{cursor:"pointer"},children:this.props.intl.formatMessage({id:"mapAction_UseCustomSymbols",defaultMessage:y})})]})})}),this.props.config.isUseCustomSymbol&&this.jsonUtils&&(0,e.jsxs)(i.SettingSection,{children:[(0,e.jsx)(i.SettingRow,{label:this.props.intl.formatMessage({id:"mapAction_Point",defaultMessage:n}),children:(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Point,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Point),onPointSymbolChanged:e=>{this.onSymbolChanged(e,"pointSymbol")},onCreated:e=>{this.onSymbolCreated(e.symbol,"pointSymbol")}})}),(0,e.jsx)(i.SettingRow,{label:this.props.intl.formatMessage({id:"mapAction_Polyline",defaultMessage:l}),children:(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Polyline,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Polyline),onPolylineSymbolChanged:e=>{this.onSymbolChanged(e,"polylineSymbol")},onCreated:e=>{this.onSymbolCreated(e.symbol,"polylineSymbol")}})}),(0,e.jsx)(i.SettingRow,{label:this.props.intl.formatMessage({id:"mapAction_Polygon",defaultMessage:a}),children:(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Polygon,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Polygon),onPolygonSymbolChanged:e=>{this.onSymbolChanged(e,"polygonSymbol")},onCreated:e=>{this.onSymbolCreated(e.symbol,"polygonSymbol")}})})]})]}),(0,e.jsx)(i.SettingSection,{children:(0,e.jsx)(i.SettingRow,{children:(0,e.jsxs)(t.Label,{children:[(0,e.jsx)(t.Checkbox,{checked:p,className:"mr-1",onChange:this.onOperationalLayerCheckboxChange}),(0,e.jsx)(o.FormattedMessage,{id:"mapAction_OperationalLayer",defaultMessage:d})]})})})]})}}h.defaultProps={config:(0,o.Immutable)({isUseCustomSymbol:!0,isOperationalLayer:!0})};const b=(0,c.withTheme)(h)})(),p})())}}});