System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-ui/advanced/map","jimu-ui/advanced/setting-components","jimu-arcgis"],function(e,o){var t={},s={},l={},i={},n={},a={};return{setters:[function(e){t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){s.FormattedMessage=e.FormattedMessage,s.Immutable=e.Immutable,s.React=e.React,s.injectIntl=e.injectIntl},function(e){l.Checkbox=e.Checkbox,l.Label=e.Label,l.Radio=e.Radio},function(e){i.JimuSymbolType=e.JimuSymbolType,i.SymbolSelector=e.SymbolSelector},function(e){n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){a.featureUtils=e.featureUtils,a.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{var e={14321:e=>{"use strict";e.exports=l},48993:e=>{"use strict";e.exports=i},62686:e=>{"use strict";e.exports=a},67386:e=>{"use strict";e.exports=t},79244:e=>{"use strict";e.exports=s},79298:e=>{"use strict";e.exports=n}},o={};function r(t){var s=o[t];if(void 0!==s)return s.exports;var l=o[t]={exports:{}};return e[t](l,l.exports,r),l.exports}r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var m={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(m),r.d(m,{default:()=>u});var e=r(67386),o=r(79244),t=r(14321),s=r(48993),l=r(79298);const i="Point",n="Polyline",a="Polygon",c="Use layer-defined symbols",y="Use custom symbols",d="Set as operational layers";var p=r(62686);class b extends o.React.PureComponent{constructor(e){super(e),this.onOperationalLayerCheckboxChange=e=>{var o;const t=!!(null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.checked),s=this.props.config.set("isOperationalLayer",t);this.props.onSettingChange(s)},this.handleIsUseCustomSymbolOption=e=>{this.props.onSettingChange(Object.assign({},this.props.config.set("isUseCustomSymbol",e).set("symbolOption",null)))},this.onSymbolCreated=(e,o)=>{this.defaultSymbolOption=this.defaultSymbolOption.set(o,null==e?void 0:e.toJSON()),!this.props.config.symbolOption&&this.defaultSymbolOption.pointSymbol&&this.defaultSymbolOption.polylineSymbol&&this.defaultSymbolOption.polygonSymbol&&this.props.onSettingChange(Object.assign({},this.props.config.set("symbolOption",this.defaultSymbolOption)))},this.onSymbolChanged=(e,o)=>{this.props.onSettingChange(Object.assign({},this.props.config.setIn(["symbolOption",o],e.toJSON())))},this.getInitSymbolFromConfig=e=>{let o;const t=this.props.config.symbolOption;return this.jsonUtils&&(e===s.JimuSymbolType.Point?o=(null==t?void 0:t.pointSymbol)?t.pointSymbol:p.featureUtils.getDefaultSymbol("point"):e===s.JimuSymbolType.Polyline?o=(null==t?void 0:t.polylineSymbol)?t.polylineSymbol:p.featureUtils.getDefaultSymbol("polyline"):e===s.JimuSymbolType.Polygon&&(o=(null==t?void 0:t.polygonSymbol)?t.polygonSymbol:p.featureUtils.getDefaultSymbol("polygon"))),o?this.jsonUtils.fromJSON(o):null},this.jsonUtils=null,this.defaultSymbolOption=(0,o.Immutable)({}),this.state={isModulesLoaded:!1}}componentDidMount(){(0,p.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then(e=>{[this.jsonUtils]=e,this.setState({isModulesLoaded:!0})})}render(){var r;const m=!!(null===(r=this.props.config)||void 0===r?void 0:r.isOperationalLayer),p=this.props.intl.formatMessage({id:"mapAction_Point",defaultMessage:i}),b=this.props.intl.formatMessage({id:"mapAction_Polyline",defaultMessage:n}),u=this.props.intl.formatMessage({id:"mapAction_Polygon",defaultMessage:a});return(0,e.jsxs)("div",{className:"w-100",children:[(0,e.jsxs)(l.SettingSection,{title:this.props.intl.formatMessage({id:"symbol",defaultMessage:"symbol"}),className:"pt-0",children:[(0,e.jsx)(l.SettingRow,{className:"mt-0",children:(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:(0,e.jsxs)("div",{className:"align-items-center d-flex",children:[(0,e.jsx)(t.Radio,{style:{cursor:"pointer"},checked:!this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!1)},"aria-labelledby":"useLayerDefinedLabel"}),(0,e.jsx)("label",{id:"useLayerDefinedLabel",className:"m-0 ml-2",style:{cursor:"pointer"},children:this.props.intl.formatMessage({id:"mapAction_UseLayerDefinedSymbols",defaultMessage:c})})]})})}),(0,e.jsx)(l.SettingRow,{children:(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:(0,e.jsxs)("div",{className:"align-items-center d-flex",children:[(0,e.jsx)(t.Radio,{style:{cursor:"pointer"},checked:this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!0)},"aria-labelledby":"useCustomLabel"}),(0,e.jsx)("label",{id:"useCustomLabel",className:"m-0 ml-2",style:{cursor:"pointer"},children:this.props.intl.formatMessage({id:"mapAction_UseCustomSymbols",defaultMessage:y})})]})})}),this.props.config.isUseCustomSymbol&&this.jsonUtils&&(0,e.jsx)(l.SettingSection,{className:"pb-0",children:(0,e.jsxs)(l.SettingRow,{className:"d-flex justify-content-around",children:[(0,e.jsxs)("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:p,children:[(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Point,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Point),onCreated:e=>{this.onSymbolCreated(e.symbol,"pointSymbol")},onPointSymbolChanged:e=>{this.onSymbolChanged(e,"pointSymbol")}}),(0,e.jsx)("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p})]}),(0,e.jsxs)("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:b,children:[(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Polyline,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Polyline),onCreated:e=>{this.onSymbolCreated(e.symbol,"polylineSymbol")},onPolylineSymbolChanged:e=>{this.onSymbolChanged(e,"polylineSymbol")}}),(0,e.jsx)("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:b})]}),(0,e.jsxs)("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:u,children:[(0,e.jsx)(s.SymbolSelector,{jimuSymbolType:s.JimuSymbolType.Polygon,symbol:this.getInitSymbolFromConfig(s.JimuSymbolType.Polygon),onCreated:e=>{this.onSymbolCreated(e.symbol,"polygonSymbol")},onPolygonSymbolChanged:e=>{this.onSymbolChanged(e,"polygonSymbol")}}),(0,e.jsx)("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u})]})]})})]}),(0,e.jsx)(l.SettingSection,{children:(0,e.jsx)(l.SettingRow,{children:(0,e.jsxs)(t.Label,{children:[(0,e.jsx)(t.Checkbox,{checked:m,className:"mr-1",onChange:this.onOperationalLayerCheckboxChange}),(0,e.jsx)(o.FormattedMessage,{id:"mapAction_OperationalLayer",defaultMessage:d})]})})})]})}}b.defaultProps={config:(0,o.Immutable)({isUseCustomSymbol:!0,isOperationalLayer:!0})};const u=(0,o.injectIntl)(b)})(),m})())}}});