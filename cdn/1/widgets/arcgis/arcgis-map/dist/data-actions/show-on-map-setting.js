System.register(["jimu-core","jimu-ui","jimu-ui/advanced/map","jimu-ui/advanced/setting-components","jimu-arcgis"],(function(e,t){var o={},l={},n={},s={},i={};return{setters:[function(e){o.Immutable=e.Immutable,o.React=e.React,o.injectIntl=e.injectIntl},function(e){l.Radio=e.Radio},function(e){n.JimuSymbolType=e.JimuSymbolType,n.SymbolSelector=e.SymbolSelector},function(e){s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection},function(e){i.featureUtils=e.featureUtils,i.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{"use strict";var e={62686:e=>{e.exports=i},79244:e=>{e.exports=o},14321:e=>{e.exports=l},48993:e=>{e.exports=n},79298:e=>{e.exports=s}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};return(()=>{a.r(m),a.d(m,{default:()=>b});var e=a(79244),t=a(14321),o=a(48993),l=a(79298);const n="Point",s="Polyline",i="Polygon",r="Use layer-defined symbols",c="Use custom symbols";var y=a(62686);class p extends e.React.PureComponent{constructor(t){super(t),this.handleIsUseCustomSymbolOption=e=>{this.props.onSettingChange(Object.assign({},this.props.config.set("isUseCustomSymbol",e).set("symbolOption",null)))},this.onSymbolCreated=(e,t)=>{this.defaultSymbolOption=this.defaultSymbolOption.set(t,null==e?void 0:e.toJSON()),!this.props.config.symbolOption&&this.defaultSymbolOption.pointSymbol&&this.defaultSymbolOption.polylineSymbol&&this.defaultSymbolOption.polygonSymbol&&this.props.onSettingChange(Object.assign({},this.props.config.set("symbolOption",this.defaultSymbolOption)))},this.onSymbolChanged=(e,t)=>{this.props.onSettingChange(Object.assign({},this.props.config.setIn(["symbolOption",t],e.toJSON())))},this.getInitSymbolFromConfig=e=>{let t;const l=this.props.config.symbolOption;return this.jsonUtils&&(e===o.JimuSymbolType.Point?t=(null==l?void 0:l.pointSymbol)?l.pointSymbol:y.featureUtils.getDefaultSymbol("point"):e===o.JimuSymbolType.Polyline?t=(null==l?void 0:l.polylineSymbol)?l.polylineSymbol:y.featureUtils.getDefaultSymbol("polyline"):e===o.JimuSymbolType.Polygon&&(t=(null==l?void 0:l.polygonSymbol)?l.polygonSymbol:y.featureUtils.getDefaultSymbol("polygon"))),t?this.jsonUtils.fromJSON(t):null},this.jsonUtils=null,this.defaultSymbolOption=(0,e.Immutable)({}),this.state={isModulesLoaded:!1}}componentDidMount(){(0,y.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then((e=>{[this.jsonUtils]=e,this.setState({isModulesLoaded:!0})}))}render(){const a=this.props.intl.formatMessage({id:"mapAction_Point",defaultMessage:n}),m=this.props.intl.formatMessage({id:"mapAction_Polyline",defaultMessage:s}),y=this.props.intl.formatMessage({id:"mapAction_Polygon",defaultMessage:i});return e.React.createElement("div",{className:"w-100"},e.React.createElement(l.SettingSection,null,e.React.createElement(l.SettingRow,null,e.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},e.React.createElement("div",{className:"align-items-center d-flex"},e.React.createElement(t.Radio,{style:{cursor:"pointer"},checked:!this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!1)},"aria-labelledby":"useLayerDefinedLabel"}),e.React.createElement("label",{id:"useLayerDefinedLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseLayerDefinedSymbols",defaultMessage:r}))))),e.React.createElement(l.SettingRow,null,e.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},e.React.createElement("div",{className:"align-items-center d-flex"},e.React.createElement(t.Radio,{style:{cursor:"pointer"},checked:this.props.config.isUseCustomSymbol,onChange:()=>{this.handleIsUseCustomSymbolOption(!0)},"aria-labelledby":"useCustomLabel"}),e.React.createElement("label",{id:"useCustomLabel",className:"m-0 ml-2",style:{cursor:"pointer"}},this.props.intl.formatMessage({id:"mapAction_UseCustomSymbols",defaultMessage:c}))))),this.props.config.isUseCustomSymbol&&this.jsonUtils&&e.React.createElement(l.SettingSection,{className:"pb-0"},e.React.createElement(l.SettingRow,{className:"d-flex justify-content-around"},e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:a},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Point,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Point),onCreated:e=>{this.onSymbolCreated(e.symbol,"pointSymbol")},onPointSymbolChanged:e=>{this.onSymbolChanged(e,"pointSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},a)),e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:m},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Polyline,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Polyline),onCreated:e=>{this.onSymbolCreated(e.symbol,"polylineSymbol")},onPolylineSymbolChanged:e=>{this.onSymbolChanged(e,"polylineSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},m)),e.React.createElement("div",{className:"symbol-selector d-flex flex-column align-items-center w-25",title:y},e.React.createElement(o.SymbolSelector,{jimuSymbolType:o.JimuSymbolType.Polygon,symbol:this.getInitSymbolFromConfig(o.JimuSymbolType.Polygon),onCreated:e=>{this.onSymbolCreated(e.symbol,"polygonSymbol")},onPolygonSymbolChanged:e=>{this.onSymbolChanged(e,"polygonSymbol")}}),e.React.createElement("label",{className:"m-0 ml-0 w-100 d-block text-center",style:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},y))))))}}p.defaultProps={config:(0,e.Immutable)({isUseCustomSymbol:!0})};const b=(0,e.injectIntl)(p)})(),m})())}}}));