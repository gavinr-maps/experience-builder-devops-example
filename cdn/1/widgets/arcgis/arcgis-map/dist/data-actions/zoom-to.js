System.register(["jimu-core","jimu-arcgis"],function(t,e){var r={},a={};return{setters:[function(t){r.AbstractDataAction=t.AbstractDataAction,r.DataLevel=t.DataLevel,r.DataSourceStatus=t.DataSourceStatus,r.MutableStoreManager=t.MutableStoreManager},function(t){a.loadArcGISJSAPIModules=t.loadArcGISJSAPIModules}],execute:function(){t((()=>{var t={62686:t=>{"use strict";t.exports=a},79244:t=>{"use strict";t.exports=r},88217:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABsklEQVRYCe2WP0vDUBTFz2sLuggZHASX4ORYd4eIi07WybVuOhTrF5BXv0CHIrjVUae2U12EDO7t6CRdBAeHgBR0aJ/vJkUi5OXlplOxB9qG++/8cptXCvx3CdYCZMuDKh4BUw9QLiCcqF8F+noIFIYQkx5kzY/i9vdsALLtQI07epxnH0kV4g6i0IA8H9nqC7aCMK/GA/3pZaqNGqpQkw5kc7Yhc6cdQN5UdbtrHmHMlDEt1Y3ZWcIOoNSFbYgxL4R+XtJlBwDK6SNSs9beUmq7Iek6a2hX9lHeWIezuoLuyysuH58xCj4NHeZwlg386SbzwdkJPHczNKdkZXsrjFGOKzZA82D31zhuRpugrXDFBqC7NYm+Eq7YAMHXt9GDtsAVG2D4/mH06OmHkSs2wGn3CUlboFhdnwSu2AB01HZuH8KjR2Zk7I/ewlieY5jrd4CMju/73JtNrGdvIHHKHMElwHIDC7ABoRq5H3Jl7y1ah/t9H3uH+s+r8Ky18QIyv67JeCjp2g5AXVyIjOY0OhsAB4JhzgPIAsE05wOkQeQwzweQBJHTnEbNJ9mSuNKvRdYP0GGJ/zuVb/EAAAAASUVORK5CYII="}},e={};function o(r){var a=e[r];if(void 0!==a)return a.exports;var A=e[r]={exports:{}};return t[r](A,A.exports,o),A.exports}o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="";var A={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(A),o.d(A,{default:()=>a});var t=o(79244),e=o(62686);o(88217);var r=function(t,e,r,a){return new(r||(r=Promise))(function(o,A){function n(t){try{s(a.next(t))}catch(t){A(t)}}function u(t){try{s(a.throw(t))}catch(t){A(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(n,u)}s((a=a.apply(t,e||[])).next())})};class a extends t.AbstractDataAction{isSupported(e,a){return r(this,void 0,void 0,function*(){const r=this.getSupportedDataSets(e,a);return 1===r.length||r.length>=2&&a===t.DataLevel.Records})}getSupportedDataSets(e,r){return e.filter(e=>{const a=e.dataSource;if(!a||a.getStatus()===t.DataSourceStatus.NotReady)return!1;if(!((null==a?void 0:a.supportSpatialInfo)&&(null==a?void 0:a.supportSpatialInfo())))return!1;if(r===t.DataLevel.Records){return this.getRecords(e,r).length>0}return r===t.DataLevel.DataSource&&!!(null==a?void 0:a.createJSAPILayerByDataSource)})}getRecords(e,r){var a;let o=[];return r===t.DataLevel.DataSource?o=[]:r===t.DataLevel.Records&&(null===(a=e.records)||void 0===a?void 0:a.length)>0&&(o=e.records),o}getClonedFeatures(t,e,r){const a=this.getRecords(t,e).map(t=>function(t,e){let r=null;return t.clone?r=t.clone():(r=e.fromJSON(Object.assign({},t)),r.attributes=Object.assign({},t.attributes)),r}(t.feature,r));return a}onExecute(a,o){return r(this,void 0,void 0,function*(){var r;const A=yield(0,e.loadArcGISJSAPIModules)(["esri/Graphic"]),[n]=A,u=this.getSupportedDataSets(a,o),s={padding:{left:50,right:50,top:50,bottom:50}};if(1===u.length){const e=u[0],a={type:"zoom-to-graphics",features:this.getClonedFeatures(e,o,n),dataSourceId:(null===(r=e.dataSource)||void 0===r?void 0:r.id)||null,zoomToOption:s};t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"zoomToFeatureActionValue.value",a)}else if(u.length>=2){const e=[];u.forEach(t=>{const r=this.getClonedFeatures(t,o,n);e.push(r)});const r={type:"zoom-to-array-graphics",arrayFeatures:e,zoomToOption:s};t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"zoomToFeatureActionValue.value",r)}return!0})}}})(),A})())}}});