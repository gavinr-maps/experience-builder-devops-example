"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_GeoBimIssuesExtension-h-51c80b"],{99510:(e,i,s)=>{s.d(i,{GeoBIMIssuesExtension:()=>l});var n=Object.defineProperty,t=(e,i,s)=>((e,i,s)=>i in e?n(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);class l extends Autodesk.Viewing.Extension{constructor(e,i){super(e,i),t(this,"issues"),t(this,"pushPinExt"),t(this,"viewer"),this.issues=[],this.handlePinSelected=this.handlePinSelected.bind(this),this.viewer=e}async load(){return this.pushPinExt=await this.viewer.loadExtension("Autodesk.BIM360.Extension.PushPin",{hideIssuesButton:!1,hideRfisButton:!0,hideFieldIssuesButton:!0}),this.viewer.addEventListener("pushpin.selected",this.handlePinSelected),!0}async showBIMIssues(e){if(e.length===this.issues.length&&e.every((e,i)=>e===this.issues[i]))return;this.issues=e,this.pushPinExt.removeAllItems();const i=[];e.forEach(e=>{var s,n,t,l,o,u,d,h;if(void 0===e)return;const a=null==e?void 0:e.sourceData,r=void 0!==(null==(s=null==a?void 0:a.linkedDocuments)?void 0:s.length)?a.linkedDocuments[0]:null;null!==r&&i.push({status:null==a?void 0:a.status,viewerState:null==(n=r.details)?void 0:n.viewerState,position:{x:null==(l=null==(t=r.details)?void 0:t.position)?void 0:l.x,y:null==(u=null==(o=r.details)?void 0:o.position)?void 0:u.y,z:null==(h=null==(d=r.details)?void 0:d.position)?void 0:h.z},label:null==a?void 0:a.displayId,id:null==a?void 0:a.id})}),this.pushPinExt.loadItemsV2(i)}async handlePinSelected(){var e,i;const s=null==(i=null==(e=this.pushPinExt)?void 0:e.pushPinManager)?void 0:i.selectedItem,n=this.issues.find(e=>{var i;return(null==(i=e.sourceData)?void 0:i.id)===s.itemData.id}),t=null==n?void 0:n.sourceUrl;if(void 0!==t){const e=t;void 0!==e&&window.open(e,"_blank")}}unload(){var e,i;return null==(i=null==(e=this.pushPinExt)?void 0:e.pushPinManager)||i.removeEventListener("pushpin.selected",this.handlePinSelected),!0}}}}]);