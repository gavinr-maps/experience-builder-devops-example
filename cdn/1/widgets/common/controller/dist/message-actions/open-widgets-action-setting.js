System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-for-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"],(function(e,t){var a={},o={},n={},l={},i={},s={},r={},c={},u={};return{setters:[function(e){a.DataSourceManager=e.DataSourceManager,a.FixedPosition=e.FixedPosition,a.Immutable=e.Immutable,a.MessageType=e.MessageType,a.React=e.React,a.ReactRedux=e.ReactRedux,a.css=e.css,a.defaultMessages=e.defaultMessages,a.hooks=e.hooks,a.polished=e.polished},function(e){o.Label=e.Label,o.MultiSelect=e.MultiSelect,o.Option=e.Option,o.Radio=e.Radio,o.Select=e.Select,o.defaultMessages=e.defaultMessages},function(e){n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){l.AllDataSourceTypes=e.AllDataSourceTypes,l.DataSourceSelector=e.DataSourceSelector},function(){},function(e){s.searchUtils=e.searchUtils},function(e){r.styled=e.styled},function(){},function(){}],execute:function(){e((()=>{var e={778:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.829 2.535a.909.909 0 0 0-1.657 0L2.291 13.356a.456.456 0 0 0 .831.377L4.818 10h6.365l1.696 3.733a.456.456 0 0 0 .831-.377zM5.272 9 8 3l2.729 6z" clip-rule="evenodd"></path></svg>'},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},17087:(e,t,a)=>{"use strict";a.d(t,{bC:()=>n});var o=a(79244);const n="controller";o.FixedPosition.TopRight,document.body,document},49014:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});const o={_widgetLabel:"Widget Controller",behavior:"Behavior",openWidget:"How many widgets can be opened",displayType:"Display type",iconStyle:"Icon",showIconLabel:"Label",iconSizeOverride:"Size",iconInterval:"Spacing",advancedIconStyle:"Icon style",advancedIconColor:"Icon color",openStart:"Open widgets on loading",widgetsSelected:"{widgetNumber} widgets selected",appearanceTip:"Select the widgets inside the Widget Controller, and customize their icons, labels, or styles to change their appearances.",appearanceTipExpress:"Customize widget icon styles within the Widget Controller to change their appearances.",widgetPanelArrangment:"Widget panel arrangement",panelFloating:"Floating",indicator:"Indicator",messageAction_openWidget:"Open widget",overflownStyle:"Overflown style",popupWindow:"Popup window"}},24410:(e,t,a)=>{"use strict";a.d(t,{useControlledWidgets:()=>u});var o,n,l,i=a(79244),s=(a(4108),a(79298),a(41496));!function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(o||(o={})),function(e){e.Center="center",e.Start="start",e.End="end"}(n||(n={})),function(e){e.Arrows="ARROWS",e.PopupWindow="POPUP_WINDOW"}(l||(l={}));a(14321),a(49014);var r,c=a(1888);!function(e){e[e.Circle=0]="Circle",e[e.Rectangle=1]="Rectangle"}(r||(r={}));a(15562),a(17087),a(54337),a(778);a(45508);c.styled.div`
  width: 100%;
  height: 1px;
  background-color: var(--ref-palette-neutral-500);
  margin: 16px 0;
`,i.css`
    font-size: 13px;
    font-weight: lighter;
    .setting-row-item {
      width: 100%;
      display: flex;
      margin-top: 0.5rem;
      > span.jimu-radio {
        flex-shrink: 0;
        margin-top: 0.1rem;
      }
      > label {
        margin-bottom: 0;
      }
    }
    .jimu-multi-select {
      width: 100%;
      > .jimu-dropdown {
        width: 100%;
      }
      > .jimu-menu-item {
        width: 100%;
        height: ${i.polished.rem(26)};
      }
    }
  `;const u=(e,t)=>{const a=(e=>{var t,a,o;let n=(null!==(o=null===(a=null===(t=null==e?void 0:e.order)||void 0===t?void 0:t.asMutable)||void 0===a?void 0:a.call(t))&&void 0!==o?o:[]).map((t=>{var a;return null===(a=e.content)||void 0===a?void 0:a[t]}));return n=n.filter((e=>e&&e.id&&e.widgetId&&!e.isPending)),n.map((e=>e.id)).map((t=>{var a,o;return null===(o=null===(a=e.content)||void 0===a?void 0:a[t])||void 0===o?void 0:o.widgetId}))})(i.ReactRedux.useSelector((a=>{var o,n,l,i;const r=null===(l=null===(n=null===(o=(a=a.appStateInBuilder).appConfig.widgets)||void 0===o?void 0:o[e])||void 0===n?void 0:n.layouts)||void 0===l?void 0:l[t],c=a.browserSizeMode,u=a.appConfig.mainSizeMode,d=s.searchUtils.findLayoutId(r,c,u);return null===(i=a.appConfig.layouts)||void 0===i?void 0:i[d]}))),o=i.ReactRedux.useSelector((e=>e.appStateInBuilder.appConfig.widgets));return(0,i.Immutable)(a||[]).map((e=>{var t;return{label:null===(t=o[e])||void 0===t?void 0:t.label,value:e}}))}},79244:e=>{"use strict";e.exports=a},4108:e=>{"use strict";e.exports=i},41496:e=>{"use strict";e.exports=s},1888:e=>{"use strict";e.exports=r},14321:e=>{"use strict";e.exports=o},13089:e=>{"use strict";e.exports=l},79298:e=>{"use strict";e.exports=n},15562:e=>{"use strict";e.exports=c},54337:e=>{"use strict";e.exports=u}},t={};function d(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,d),n.exports}d.d=(e,t)=>{for(var a in t)d.o(t,a)&&!d.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var g={};return(()=>{"use strict";d.r(g),d.d(g,{default:()=>u});var e=d(79244),t=d(14321),a=d(79298),o=d(49014),n=d(13089);const l=(0,e.Immutable)([n.AllDataSourceTypes.FeatureLayer,n.AllDataSourceTypes.SceneLayer,n.AllDataSourceTypes.BuildingComponentSubLayer,n.AllDataSourceTypes.ImageryLayer,n.AllDataSourceTypes.OrientedImageryLayer,n.AllDataSourceTypes.SubtypeGroupLayer,n.AllDataSourceTypes.SubtypeSublayer]);function i(t){const{messageWidgetId:a,useDataSources:o=(0,e.Immutable)([]),onChange:i}=t,s=e.ReactRedux.useSelector((e=>{var t,o,n,l,i,s;const r=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig,c=null===(o=null==r?void 0:r.widgets)||void 0===o?void 0:o[a];if((null===(n=null==c?void 0:c.useDataSources)||void 0===n?void 0:n.length)>0)return c.useDataSources;if((null===(l=null==c?void 0:c.useMapWidgetIds)||void 0===l?void 0:l.length)>0){const e=c.useMapWidgetIds[0],t=null===(i=null==r?void 0:r.widgets)||void 0===i?void 0:i[e];if((null===(s=null==t?void 0:t.useDataSources)||void 0===s?void 0:s.length)>0)return t.useDataSources}return null}));let r=(0,e.Immutable)([]),c=(0,e.Immutable)([]);const u=e.DataSourceManager.getInstance();return null==s||s.forEach((e=>{const t=u.getDataSource(e.dataSourceId);t&&(t.type===n.AllDataSourceTypes.WebMap||t.type===n.AllDataSourceTypes.WebScene?r=r.concat([e.dataSourceId]):c=c.concat([t.isDataView?t.getMainDataSource().id:t.id]))})),0===r.length?r=void 0:c=void 0,e.React.useEffect((()=>{if(!Array.isArray(s))return;const e=s.map((e=>e.mainDataSourceId)),t=o.filter((t=>e.includes(t.dataSourceId)||e.includes(t.mainDataSourceId)||e.includes(t.rootDataSourceId)));t.length<o.length&&i(t.asMutable({deep:!0}))}),[s,i,o]),e.React.createElement(n.DataSourceSelector,{types:l,useDataSources:o,fromRootDsIds:r,fromDsIds:c,mustUseDataSource:!0,isMultiple:!0,isMultipleDataView:!0,hideAddDataButton:!0,hideDataView:!0,hideTypeDropdown:!0,enableToSelectOutputDsFromSelf:!0,onChange:i})}var s=d(24410),r=d(17087);function c(a){const{widgetId:o,selectedWidgetIds:n,onChange:l}=a,i=e.ReactRedux.useSelector((e=>{var t;const a=e.appStateInBuilder.appConfig.widgets[o].config;return null===(t=null==a?void 0:a.behavior)||void 0===t?void 0:t.onlyOpenOne})),c=(0,s.useControlledWidgets)(o,r.bC),u=e.React.useCallback(((e,t)=>{l([t.props.value])}),[l]),d=e.React.useCallback(((e,t,a)=>{l(a)}),[l]),g=e.hooks.useTranslation(t.defaultMessages),p=e.React.useCallback((e=>g("numSelected",{number:e.length})),[g]);return e.React.useEffect((()=>{i&&n.length>1&&l([n[0]]),i&&0===n.length&&c.length>0&&l([c[0].value])}),[c,i,l,n]),e.React.createElement(e.React.Fragment,null,i&&e.React.createElement(t.Select,{value:n[0],onChange:u},c.map((a=>e.React.createElement(t.Option,{value:a.value,key:a.value},a.label)))),!i&&e.React.createElement(t.MultiSelect,{items:c,values:n,className:"pt-1 custom-multiselect",fluid:!0,displayByValues:p,onClickItem:d}))}function u(n){var l;const{actionId:s,widgetId:r,messageWidgetId:u,messageType:d,onSettingChange:g}=n,p=n.config||(0,e.Immutable)({widgetIds:[],controllerId:r,useDataSources:[]}),m=e.hooks.useLatest(p);e.React.useEffect((()=>{const e=m.current;n.config||g({actionId:s,config:e})}),[s,m,g,n.config]);const v=[e.MessageType.DataRecordsSelectionChange].includes(d),S=e.hooks.useTranslation(o.A,e.defaultMessages,t.defaultMessages),[f,h]=e.React.useState((null===(l=p.useDataSources)||void 0===l?void 0:l.length)>0),y=e.React.useCallback((e=>{var t;h(e);const a=m.current;!e&&(null===(t=a.useDataSources)||void 0===t?void 0:t.length)>0&&g({actionId:s,config:a.set("useDataSources",[])})}),[s,m,g]),w=e.React.useCallback((e=>{const t=m.current;g({actionId:s,config:t.set("useDataSources",e)})}),[s,m,g]),R=e.React.useCallback((e=>{const t=m.current;g({actionId:s,config:t.set("widgetIds",e)})}),[s,m,g]);return e.React.createElement("div",null,v&&e.React.createElement(a.SettingSection,{title:S("messageAction_TriggerData")},e.React.createElement(a.SettingRow,null,e.React.createElement(t.Label,null,e.React.createElement(t.Radio,{className:"mr-2",checked:!f,onChange:()=>{y(!1)}}),S("allDataWithoutCount"))),e.React.createElement(a.SettingRow,null,e.React.createElement(t.Label,{className:"d-flex align-items-center label-line-height"},e.React.createElement(t.Radio,{className:"mr-2",checked:f,onChange:()=>{y(!0)}}),S("custom"))),f&&e.React.createElement(a.SettingRow,{flow:"wrap"},e.React.createElement(i,{messageWidgetId:u,useDataSources:p.useDataSources,onChange:w}))),e.React.createElement(a.SettingSection,null,e.React.createElement(a.SettingRow,{label:S("messageAction_openWidget"),flow:"wrap"},e.React.createElement(c,{widgetId:r,selectedWidgetIds:p.widgetIds,onChange:R}))))}})(),g})())}}}));