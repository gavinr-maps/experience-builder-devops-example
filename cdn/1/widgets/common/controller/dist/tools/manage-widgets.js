System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-theme","jimu-for-builder","jimu-layouts/layout-runtime"],(function(e,t){var o={},i={},r={},n={},a={},s={};return{setters:[function(e){o.BrowserSizeMode=e.BrowserSizeMode,o.FixedPosition=e.FixedPosition,o.ReactRedux=e.ReactRedux,o.appActions=e.appActions,o.css=e.css,o.getAppStore=e.getAppStore,o.i18n=e.i18n,o.jsx=e.jsx},function(e){i.defaultMessages=e.defaultMessages},function(e){r.SortTree=e.SortTree},function(e){n.useTheme=e.useTheme},function(e){a.appBuilderSync=e.appBuilderSync,a.builderAppSync=e.builderAppSync},function(){}],execute:function(){e((()=>{var e={73549:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.667 4.667 11.333 0 16 4.667l-4.667 4.666zM0 1.333V8h6.667V1.333zM6.667 16H0V9.333h6.667zM8 16V9.333h6.667V16z" clip-rule="evenodd"></path></svg>'},91455:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M20 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2zM2 1h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M9 4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zM4 8V4h4v4zM17 4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zm-5 4V4h4v4zM9 12a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1zm-5 4v-4h4v4zM17 14a3 3 0 1 0-6 0 3 3 0 0 0 6 0m-5 0a2 2 0 1 1 4 0 2 2 0 0 1-4 0" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=o},4108:e=>{"use strict";e.exports=a},41496:e=>{"use strict";e.exports=s},1888:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=r}},t={};function l(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};return(()=>{"use strict";l.r(d),l.d(d,{default:()=>S});var e=l(79244),t=l(14321),o=l(91455),i=l.n(o),r=l(73549),n=l.n(r),a=l(79298),s=l(1888);const u=t=>e.css`
width: 300px;
height: 400px;
overflow-y: auto;
padding: ${t.sys.spacing[4]};
.jimu-tree-item__main-line {
  height: 32px;
  background-color: ${t.ref.palette.neutral[500]};
  &:hover {
    background-color: ${t.ref.palette.neutral[600]};
  }
  color: ${t.ref.palette.neutral[1100]};
}
.jimu-tree-item__body {
  border: none !important;
}
`,p=t=>{var o,i;const r=t.widgetId,n=null===(i=null===(o=e.ReactRedux.useSelector((e=>(e.appStateInBuilder?e.appStateInBuilder:e).widgetsState[r].widgetTreeJson)))||void 0===o?void 0:o.asMutable)||void 0===i?void 0:i.call(o,{deep:!0}),l=e.ReactRedux.useSelector((e=>(e.appStateInBuilder?e.appStateInBuilder:e).widgetsState[r].isItemDroppable)),d=e.ReactRedux.useSelector((e=>(e.appStateInBuilder?e.appStateInBuilder:e).widgetsState[r].onTreeSort)),p=e.ReactRedux.useSelector((e=>(e.appStateInBuilder?e.appStateInBuilder:e).widgetsState[r].onTreeRemove)),c=(0,s.useTheme)();return(0,e.jsx)("div",{css:u(c)},(0,e.jsx)(a.SortTree,{rootItemJson:n,isItemDroppable:l,onSort:d,onRemove:p}))};var c=l(4108);const g="controller";e.FixedPosition.TopRight,document.body,document;l(41496);class S{constructor(){this.index=3,this.id="conttroller-manage-widgets1",this.name="conttroller-manage-widgets2"}getAppState(){const t=(0,e.getAppStore)().getState();return t.appStateInBuilder?t.appStateInBuilder:t}getGroupId(){return"controller-tools"}getTitle(){const o=e.i18n.getIntl("_jimu");return o?o.formatMessage({id:"manageWidgets",defaultMessage:t.defaultMessages.manageWidgets}):"Manage widgets"}getIcon(){return window.jimuConfig.isBuilder?n():i()}visible(){return!0}disabled(e){var t,o,i,r,n;const a=this.getAppState(),{appConfig:s,browserSizeMode:l}=a,d=e.layoutItem.widgetId,u=s.widgets[d],p=(null===(t=u.layouts[g])||void 0===t?void 0:t[l])||(null===(o=u.layouts[g])||void 0===o?void 0:o[s.mainSizeMode]);return 0===(null!==(n=null===(r=null===(i=s.layouts[p])||void 0===i?void 0:i.order)||void 0===r?void 0:r.length)&&void 0!==n?n:0)}checked(){if(this.getAppState().browserSizeMode===e.BrowserSizeMode.Small)return this.isOpenInSidePanel}onClick(t){const o=t.layoutItem.widgetId;if(this.getAppState().browserSizeMode===e.BrowserSizeMode.Small){this.isOpenInSidePanel=!this.isOpenInSidePanel;const t=()=>{this.isOpenInSidePanel=!1,((t,o)=>{window.jimuConfig.isBuilder?c.builderAppSync.publishWidgetToolbarStateChangeToApp(t,o):(0,e.getAppStore)().dispatch(e.appActions.widgetToolbarStateChange(t,o))})(o,["controller-manage-widgets"])};c.appBuilderSync.publishSidePanelToApp({type:"manageWidgets",uri:"widgets/common/controller/",widgetId:o,keepPanel:!0,active:this.isOpenInSidePanel,onClose:t})}}getSettingPanel(t){return this.getAppState().browserSizeMode===e.BrowserSizeMode.Small?null:p}}})(),d})())}}}));