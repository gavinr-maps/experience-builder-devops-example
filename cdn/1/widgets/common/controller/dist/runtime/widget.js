System.register(["jimu-core","jimu-ui","jimu-theme","jimu-layouts/layout-runtime"],(function(e,t){var o={},a={},n={},i={};return{setters:[function(e){o.AppMode=e.AppMode,o.BaseVersionManager=e.BaseVersionManager,o.ContainerType=e.ContainerType,o.ErrorBoundary=e.ErrorBoundary,o.FixedPosition=e.FixedPosition,o.Immutable=e.Immutable,o.LayoutItemType=e.LayoutItemType,o.React=e.React,o.ReactRedux=e.ReactRedux,o.ReactResizeDetector=e.ReactResizeDetector,o.WidgetManager=e.WidgetManager,o.WidgetState=e.WidgetState,o.WidgetType=e.WidgetType,o.appActions=e.appActions,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.jsx=e.jsx,o.lodash=e.lodash,o.polished=e.polished},function(e){a.Button=e.Button,a.FloatingPanel=e.FloatingPanel,a.Icon=e.Icon,a.Loading=e.Loading,a.MobilePanel=e.MobilePanel,a.Modal=e.Modal,a.ModalBody=e.ModalBody,a.NavButtonGroup=e.NavButtonGroup,a.Pagination=e.Pagination,a.Popper=e.Popper,a.Tooltip=e.Tooltip,a.defaultMessages=e.defaultMessages,a.styleUtils=e.styleUtils},function(e){n.styled=e.styled},function(e){i.PageContext=e.PageContext,i.searchUtils=e.searchUtils}],execute:function(){e((()=>{var e={54044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M12 0h4v16H0v-4h12z"></path><path fill="#FFF" d="M13 1h2v14H1v-2h12z"></path></svg>'},26189:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 10"><path fill="#B6B6B6" d="M10 2.778V0L0 10h2.778zM10 5.607 5.607 10H10z"></path></svg>'},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},49859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M4 4h2v1H4zM8 4h2v1H8zM14 4h-2v1h2zM15 4h1v2h-1zM16 8h-1v2h1zM4 14h1v2H4zM5 6H4v2h1zM4 10h1v2H4zM16 12h-1v2h1zM16 15v1h-2v-1zM12 15h-2v1h2zM6 15h2v1H6z"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},17087:(e,t,o)=>{"use strict";o.d(t,{D7:()=>r,VU:()=>d,aP:()=>c,bC:()=>n,iI:()=>i,kg:()=>s,up:()=>l});var a=o(79244);const n="controller",i={sm:24,default:32,lg:48},s={width:150,height:120},r={width:360,height:360},l={x:70,y:70},c={x:30,y:30},d=(a.FixedPosition.TopRight,[{name:"flip",options:{flipVariations:!1}},{name:"preventOverflow",options:{boundary:document.body,rootBoundary:document}},{name:"offset",options:{offset:[0,16]}}])},70687:(e,t,o)=>{"use strict";var a,n,i;o.d(t,{AH:()=>i,aL:()=>n,t2:()=>a}),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(a||(a={})),function(e){e.Center="center",e.Start="start",e.End="end"}(n||(n={})),function(e){e.Arrows="ARROWS",e.PopupWindow="POPUP_WINDOW"}(i||(i={}))},50572:(e,t,o)=>{"use strict";o.d(t,{I6:()=>c,Q$:()=>s});var a=o(79244),n=o(14321),i=o(17087);const s=(e,t,o)=>{let a=i.iI[e];t&&(a+=21);return a+=2*r(e,o),a},r=(e,t)=>"circle"===t?"sm"===e?4:"default"===e?2:"lg"===e?0:void 0:6,l={none:"0",sm:"0",default:"var(--sys-shape-1)",lg:"var(--sys-shape-2)"},c=a.React.forwardRef(((e,t)=>{var o;const{label:i,className:c,showLabel:d,showIndicator:u=!0,showTooltip:p=!0,labelGrowth:v=0,icon:g,marker:h,onClick:m,onMarkerClick:f,avatar:w,autoFlip:b,active:y,editDraggable:x,disabled:S,widgetid:R}=e,I=w.type||"primary",C=w.size||"default",k=w.shape||"circle",M=((e,t,o,n,i)=>a.React.useMemo((()=>{const l=s(e,t,n),c=l+i,d=r(e,n);return a.css`
      display: flex;
      align-items:center;
      flex-direction: column;
      justify-content: ${t?"space-around":"center"};
      width: ${a.polished.rem(c)} !important;
      height: ${a.polished.rem(l)};
      .tool-drag-handler {
        cursor: auto;
      }
      .avatar {
        padding: ${d}px;
        position: relative;
        text-align: center;
        &:hover .marker {
          visibility: visible;
        }
        .avatar-button.disabled {
          color: var(--sys-color-action-disabled-text);
          background-color: var(--sys-color-action-disabled);
          border: 1px solid var(--sys-color-divider-secondary);
        }
        .marker {
          position: absolute;
          right: 0;
          top: 0;
          padding: 0;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          .icon-btn-sizer {
            min-width: .625rem;
            min-height: .625rem;
          }
          visibility: hidden;
        }
      }
      ${o?".avatar.active {\n        .avatar-button, .marker {\n          transform: translateY(-7px);\n        }\n        ::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          border: 1px solid var(--ref-palette-white);\n          border-radius: 3px;\n          width: 6px;\n          height: 3px;\n          background-color: var(--sys-color-primary-main);\n          box-sizing: content-box;\n        }\n      }":""}
      .avatar-label {
        text-align: center;
        width: 100%;
        min-height: ${a.polished.rem(21)};
        cursor: default;
      }
    `}),[e,t,n,i,o]))(C,d,u,k,v),j=l[C],z=(0,a.jsx)(n.Button,{"data-widgetid":R,"aria-label":i,"aria-expanded":y,"aria-haspopup":"dialog",icon:!0,active:y,className:(0,a.classNames)("avatar-button",{disabled:S}),ref:t,type:I,size:C,style:{borderRadius:"circle"===k?"50%":j},onClick:m},(0,a.jsx)(n.Icon,{color:"string"!=typeof g&&(null===(o=g.properties)||void 0===o?void 0:o.color),icon:"string"!=typeof g?g.svg:g,autoFlip:b}));return(0,a.jsx)("div",{"data-widgetid":R,className:(0,a.classNames)("avatar-card",{active:y},c),css:M},(0,a.jsx)("div",{className:(0,a.classNames)({"no-drag-action":!x,active:y},"avatar tool-drag-handler")},p?(0,a.jsx)(n.Tooltip,{title:i,style:{pointerEvents:"none"}},z):z,h&&(0,a.jsx)(n.Button,{className:"marker",size:"sm",icon:!0,onClick:f},(0,a.jsx)(n.Icon,{size:8,icon:h}))),d&&(0,a.jsx)("div",{className:(0,a.classNames)("avatar-label text-truncate",{active:y})},i))}))},12279:(e,t,o)=>{"use strict";o.d(t,{GD:()=>l,FZ:()=>c.FZ});var a=o(79244),n=o(50572),i=o(14321),s=o(62838),r=o.n(s);const l=e=>{var t,o;const{markerEnabled:s,onMarkerClick:l,widgetid:c,showLabel:d,showIndicator:u,showTooltip:p,labelGrowth:v,avatar:g,onClick:h,active:m,editDraggable:f,className:w}=e,b=a.ReactRedux.useSelector((e=>{var t;return null===(t=e.appConfig.widgets)||void 0===t?void 0:t[c]})),y="string"==typeof b.icon?b.icon:b.icon.asMutable({deep:!0});return b?a.React.createElement(n.I6,{widgetid:c,className:`widget-avatar-card ${w}`,showLabel:d,showIndicator:u,showTooltip:p,labelGrowth:v,avatar:g,label:b.label,icon:y,autoFlip:null===(o=null===(t=null==b?void 0:b.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.flipIcon,marker:s?r():"",active:m,editDraggable:f,onMarkerClick:l,onClick:h}):a.React.createElement(i.Loading,null)};o(42667);var c=o(2021),d=(o(49859),o(1888)),u=o(70687);(0,d.styled)("div",{shouldForwardProp:e=>!["vertical","space","alignment"].includes(e)})((e=>`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: ${e.alignment===u.aL.Start?"flex-start":e.alignment===u.aL.End?"flex-end":"center"};\n  flex-direction: ${e.vertical?"column":"row"};\n  .avatar-placeholder {\n    &:not(:first-of-type) {\n      margin-top: ${e.vertical?a.polished.rem(e.space):"unset"};\n      margin-left: ${e.vertical?"unset":a.polished.rem(e.space)};\n    }\n  }\n`)),(e=>{const t=[];for(;e>0;)t.push(e),e--})(3),(0,a.Immutable)({type:"secondary",size:"lg",shape:"circle"})},28482:(e,t,o)=>{"use strict";o.d(t,{PG:()=>i,V5:()=>d,af:()=>s,lL:()=>r,pp:()=>c});var a=o(79244),n=o(41496);const i=(e,t)=>{const o=a.ReactRedux.useSelector((e=>e.widgetsRuntimeInfo)),n=s(e,t),i=l(n);return a.React.useMemo((()=>{const e={};return i.forEach((t=>{var n;const i=null!==(n=null==o?void 0:o[t])&&void 0!==n?n:{isClassLoaded:!1};e[t]=(0,a.Immutable)(i)})),(0,a.Immutable)(e)}),[i,o])},s=(e,t)=>a.ReactRedux.useSelector((o=>{var a,i,s,r;const l=null===(s=null===(i=null===(a=o.appConfig.widgets)||void 0===a?void 0:a[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],c=o.browserSizeMode,d=o.appConfig.mainSizeMode,u=n.searchUtils.findLayoutId(l,c,d);return null===(r=o.appConfig.layouts)||void 0===r?void 0:r[u]})),r=(e,t)=>{var o,i,s,r;const l=(0,a.getAppStore)().getState().appConfig,c=(0,a.getAppStore)().getState().browserSizeMode,d=null===(s=null===(i=null===(o=l.widgets)||void 0===o?void 0:o[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],u=n.searchUtils.findLayoutId(d,c,l.mainSizeMode);return null===(r=l.layouts)||void 0===r?void 0:r[u]},l=e=>{const t=(e=>{var t,o,a;let n=(null!==(a=null===(o=null===(t=null==e?void 0:e.order)||void 0===t?void 0:t.asMutable)||void 0===o?void 0:o.call(t))&&void 0!==a?a:[]).map((t=>{var o;return null===(o=e.content)||void 0===o?void 0:o[t]}));return n=n.filter((e=>e&&e.id&&e.widgetId&&!e.isPending)),n.map((e=>e.id))})(e);return t.map((t=>{var o,a;return null===(a=null===(o=e.content)||void 0===o?void 0:o[t])||void 0===a?void 0:a.widgetId}))},c=(e,t)=>{if(null!=(null==e?void 0:e.content)&&t)return Object.keys(e.content).find((o=>e.content[o].widgetId===t))},d=e=>[a.WidgetState.Opened,a.WidgetState.Active].includes(e.state)},42667:(e,t,o)=>{"use strict";o.d(t,{Q:()=>l});var a=o(79244),n=o(14321),i=o(19640),s=o(70687);const r=[],l=a.React.forwardRef(((e,t)=>{const{syncScroll:o,className:l,lists:c=r,createItem:d,vertical:u,itemLength:p,space:v,alignment:g=s.aL.Center,minLength:h=p,autoScrollEnd:m,autoSize:f,onScrollStatusChange:w,onMouseDown:b}=e,y=a.hooks.useTranslation(n.defaultMessages),[x,S]=a.hooks.useForwardRef(t),{start:R,end:I,disablePrevious:C,disableNext:k,hideArrow:M,scroll:j,remainLength:z}=(0,i.k)({rootRef:x,lists:c,itemLength:p,autoSize:f,vertical:u,space:v,minLength:h,autoScrollEnd:m}),A=c.slice(R,I),L=((e,t,o,n,i,r,l)=>a.css`
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    button.previous, button.next {
      flex-shrink: 0;
      display: ${i?"none":"block"};
    }
    ${r!==s.aL.Start||n||e?"":`button.next { transform: translateX(${-l}px); }`}
    ${r===s.aL.Start&&!n&&e?`button.next { transform: translateY(${-l}px); }`:""}
    ${r!==s.aL.End||n||e?"":`button.previous { transform: translateX(${l}px); }`}
    ${r===s.aL.End&&!n&&e?`button.previous { transform: translateY(${l}px); }`:""}
    .root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`} 
      max-height: ${n?"100%":"calc(100% - 20px)"};
      max-width: ${n?"100%":"calc(100% - 20px)"};
      display: flex;
      justify-content: ${r===s.aL.Start?"flex-start":r===s.aL.End?"flex-end":"center"};
      flex-wrap: nowrap;
      align-items: center;
      .scroll-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
`)(u,v,h,f,M,g,z);a.React.useEffect((()=>{null==w||w(M,C,k)}),[k,C,M,w]),a.React.useEffect((()=>{"function"==typeof o&&o(j)}),[j,o]);return(0,a.jsx)(n.NavButtonGroup,{css:L,type:"tertiary",vertical:u,onChange:e=>{j(e,!0)},disablePrevious:C,disableNext:k,previousAriaLabel:y("previous"),nextAriaLabel:y("next"),className:(0,a.classNames)("scroll-list",l)},(0,a.jsx)("div",{className:"root scroll-list-root",ref:S,onMouseDown:b},c.map((e=>{const t=!A.includes(e);return d(e,(0,a.classNames)("scroll-list-item",{"d-none":t}))}))))}))},4843:(e,t,o)=>{"use strict";o.d(t,{z:()=>h});var a=o(79244),n=o(19640),i=o(70687),s=o(14321),r=o(17087);const l=(e,t,o)=>a.css`
    position: ${e===t?"relative":"absolute"};
    left: ${(e-t)*(6*o+40)}px;
    transition: all ease 0.3s;
  `,c=e=>{const{lists:t=[],createItem:o,itemLength:n,isOpen:i,reference:c,advancedStyle:d,onClose:u,onMouseDown:p}=e,v=a.hooks.useCheckSmallBrowserSizeMode(),g=3*(v?4:5),[h,m]=a.React.useState(1),f=Math.ceil(t.length/g),w=new Array(f).fill(1).map(((e,t)=>t+1)),b=e=>{m(e)},y=a.hooks.useLatest(h);a.React.useEffect((()=>{y.current>f&&0!==f&&m(f)}),[y,f]);const x=((e,t,o)=>{const n=o?4:5,i=o?a.css`top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important;`:"";return a.css`
    ${i}
    &.modal-dialog {
      width: fit-content;
      margin: 0;
      .modal-content {
        border-radius: 8px;
        .modal-body {
          padding: 0;
        }
      }
    }
    &.popper {
      border-radius: 4px;
    }
    .popup-more {
      padding: var(--sys-spacing-3);
      display: flex;
      position: relative;
      overflow: hidden;
      .popup-page {
        display: grid;
        max-width: ${e*n}px;
        grid-template-columns: repeat(${t>1||o?n:"auto-fit"}, ${e}px);
        grid-template-rows: repeat(${t>1||o?3:"auto-fit"}, 1fr);
        gap: var(--sys-spacing-2) 0;
        justify-content: center;
      }
    }
    .popup-pagination {
      padding: 0 var(--sys-spacing-3) var(--sys-spacing-2) var(--sys-spacing-3);
      text-align: center;
      .jimu-pagination {
        justify-content: center;
        .jimu-page-number {
          display: none;
        }
      }
      .page-indicator {
        width: 6px;
        height: 6px;
        padding: 0;
        border-radius: 3px;
        border: none;
        background-color: var(--sys-color-action-disabled);
        transition: width ease 0.3s;
        &+.page-indicator {
          margin-left: 8px;
        }
        &.page-current {
          background-color: var(--sys-color-action-selected);
        }
      }
    }
  `})(n,w.length,v),S=a.React.useRef(0),R=a.React.useRef(0),I=(0,a.jsx)(a.React.Fragment,null,(0,a.jsx)("div",{className:"popup-more",css:d,onTouchStart:e=>{1===e.touches.length&&(S.current=e.touches[0].clientX)},onTouchMove:e=>{1===e.touches.length&&(R.current=e.touches[0].clientX)},onTouchEnd:e=>{const t=R.current-S.current;t<-100&&m((e=>e<f?e+1:e)),t>100&&m((e=>e>1?e-1:e)),S.current=0,R.current=0},onMouseDown:p},w.map((e=>{const i=t.slice(g*(e-1),g*e);return(0,a.jsx)("div",{key:e,className:"popup-page",css:l(e,h,n),onFocus:()=>{m(e)}},i.map((e=>o(e,"popup-list-item",u))))}))),w.length>1&&(0,a.jsx)("div",{className:"popup-pagination"},v&&w.map((e=>(0,a.jsx)(s.Button,{key:e,tabIndex:-1,"aria-hidden":!0,className:(0,a.classNames)("page-indicator",{"page-current":h===e}),onClick:()=>{b(e)}}))),!v&&(0,a.jsx)(s.Pagination,{variant:"text",current:h,simple:!0,size:"sm",totalPage:w.length,onChangePage:b})));return v?(0,a.jsx)(s.Modal,{className:"popup-more-modal",css:x,isOpen:i,toggle:u},(0,a.jsx)(s.ModalBody,null,I)):(0,a.jsx)(s.Popper,{className:"popup-more-popper",css:x,open:i,reference:c,autoFocus:!0,trapFocus:!0,modifiers:r.VU,toggle:u},I)};var d=o(50572),u=o(13166),p=o(4651),v=o.n(p),g=o(54657);const h=a.React.forwardRef(((e,t)=>{const{vertical:o,alignment:s,space:r,itemStyle:l,lists:p=[],createItem:h,itemLength:m,minLength:f=m,autoSize:w,advanced:b,className:y,onMouseDown:x}=e,S=((e,t,o,n=i.aL.Center)=>a.css`
    &.root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`} 
      max-height: 100%;
      max-width: 100%;
      display: flex;
      justify-content: ${"center"===n?"center":"flex-"+n};
      flex-wrap: nowrap;
      align-items: center;
      .popup-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
  `)(o,r,f,s),[R,I]=a.hooks.useForwardRef(t),C=(0,n.s)({rootRef:R,lists:p,itemLength:m,autoSize:w,vertical:o,space:r,minLength:f});let k=p,M=[],j=!1;C<p.length&&(k=p.slice(0,C-1),M=p.slice(C-1),j=!0);const[z,A]=a.React.useState(!1),L=a.React.useRef(null),$=a.React.useCallback((e=>{A((t=>{var o,a;const n="boolean"==typeof e?e:!t;return n||null===(a=null===(o=L.current)||void 0===o?void 0:o.focus)||void 0===a||a.call(o),n}))}),[]);a.React.useEffect((()=>{0===M.length&&A(!1)}),[M.length]);const E=a.hooks.useTranslation(u.A),O=(0,g.useAdvancedStyle)(l.variant,b);return(0,a.jsx)("div",{className:(0,a.classNames)("root popup-list-root",y),css:S,ref:I,onMouseDown:x},k.map((e=>h(e,(0,a.classNames)("popup-list-item")))),j&&(0,a.jsx)(d.I6,{ref:L,className:"popup-more-button popup-list-item",label:E("moreWidgets"),icon:v(),showLabel:l.showLabel,showIndicator:l.showIndicator,showTooltip:l.showTooltip,labelGrowth:l.labelGrowth,avatar:l.avatar,onClick:()=>{$()}}),(0,a.jsx)(c,{lists:M,createItem:h,isOpen:z,itemLength:m,reference:L.current,advancedStyle:O,onClose:()=>{$(!1)},onMouseDown:x}))}))},19640:(e,t,o)=>{"use strict";o.d(t,{k:()=>r,s:()=>l});var a=o(79244),n=o(2021);const i=(e,t,o=0,a=o,i)=>{let s=(0,n.P1)(e,500,t,!i);s+=o,s=Math.max(s,a);const r=(0,n.km)(500,t);return s=i?r:Math.min(s,r),s},s=(e,t,o)=>{let a=e,n=t;return n-a>o?n=e+o:n-a<o&&(a=0,n=a+o),[a,n]},r=e=>{var t;const{rootRef:o,lists:n,itemLength:r,autoSize:l,vertical:c,space:d,minLength:u,autoScrollEnd:p}=e,v=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0,g=i(o,c,d,u,l),h=Math.floor(g/r)>v?v:Math.floor(g/r),m=g-r*h,[f,w]=a.React.useState(s(0,0,h)[0]),[b,y]=a.React.useState(s(0,0,h)[1]),x=a.hooks.useLatest(f),S=a.hooks.useLatest(b),[R,I]=a.React.useState(b-f>=v),C=0===f,k=b===v;a.React.useEffect((()=>{if(0===g)return;const[e,t]=s(S.current,x.current,h);w(e),y(t),I(t-e>=v)}),[h,g,S,x,v]);const M=a.hooks.useEventCallback(((e,t=!0)=>{const o=t?1:h;let a=0,n=0;e?(a=f-o,a<0?(a=0,n=a+h):n=b-o):(n=b+o,n>v?(n=v,a=n-h):a=f+o),w(a),y(n)})),j=a.React.useRef([]),z=a.hooks.useEventCallback((()=>{const e=v>0&&j.current.length>0&&n[n.length-1]!==j.current[j.current.length-1];if(p&&e&&j.current.length>v){let e=0,t=0;t=v,e=t-h,e=Math.max(0,e),w(e),y(t)}}));return a.React.useEffect((()=>{z(),j.current=n}),[n,z]),{start:f,end:b,disablePrevious:C,disableNext:k,hideArrow:R,scroll:M,remainLength:m}},l=e=>{var t;const{rootRef:o,lists:a,itemLength:n,autoSize:s,vertical:r,space:l,minLength:c}=e,d=null!==(t=null==a?void 0:a.length)&&void 0!==t?t:0,u=i(o,r,l,c,s);return Math.floor(u/n)>d?d:Math.floor(u/n)}},2021:(e,t,o)=>{"use strict";o.d(t,{FZ:()=>s,P1:()=>r,_C:()=>i,km:()=>l});var a=o(79244),n=o(50572);const i=(e,t)=>{const o=null==e?void 0:e.showLabel,a=null==e?void 0:e.labelGrowth,i=null==e?void 0:e.avatar.size,s=null==e?void 0:e.avatar.shape;return(0,n.Q$)(i,o,s)+t+a},s=e=>{var t,o;if(!e)return;return(null===(o=null===(t=(0,a.getAppStore)().getState().widgetsRuntimeInfo)||void 0===t?void 0:t[e])||void 0===o?void 0:o.isClassLoaded)?Promise.resolve(a.WidgetManager.getInstance().getWidgetClass(e)):a.WidgetManager.getInstance().loadWidgetClass(e)},r=(e,t=500,o=!1,n)=>{var i,s;const r=o?"clientHeight":"clientWidth",[l,c]=a.React.useState(null!==(s=null===(i=e.current)||void 0===i?void 0:i[r])&&void 0!==s?s:0),d=!n&&!window.jimuConfig.isInBuilder,u=a.hooks.useLatest((()=>{const t=e.current[r]||0;c(t)})),p=a.React.useMemo((()=>a.lodash.debounce((()=>{u.current()}),t,{leading:!0})),[]);return a.React.useEffect((()=>{if(d)return;const t=e.current;t&&p();const o=new ResizeObserver(p);return o.observe(t),()=>{o.disconnect(),p.cancel()}}),[e,p,d]),l},l=(e=500,t=!1)=>{const o=t?"clientHeight":"clientWidth",[n,i]=a.React.useState((()=>document.body[o]-40));a.hooks.useUpdateEffect((()=>{i(document.body[o]-40)}),[o]);const s=a.React.useMemo((()=>a.lodash.debounce((()=>{i(document.body[o]-40)}),e)),[o,e]);return a.React.useEffect((()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)})),[s]),n}},53716:(e,t,o)=>{"use strict";o.d(t,{Ku:()=>d,Sr:()=>c,xu:()=>p,z_:()=>l});var a=o(79244),n=o(14321),i=o(28482),s=o(17087),r=o(13166);const l=e=>document.querySelector(`.widget-controller .avatar-card[data-widgetid='${e}'] button`),c=e=>document.querySelector(`[data-widgetid='${e}'] .popup-more-button button`),d=e=>{const{isRuntime:t,isResizing:i}=e,s=a.hooks.useTranslation(r.A),l=o(t?26189:54044);return a.React.useMemo((()=>{const e=(0,a.jsx)("div",{className:"resize-handle d-flex p-1"},(0,a.jsx)(n.Icon,{icon:l,size:t?10:16,currentColor:!1}));return i||t?e:(0,a.jsx)(n.Tooltip,{title:s("resizerTooltip")},e)}),[i,t,l,s])},u=(e,t)=>{const o=(0,i.lL)(t,s.bC),n=Object.keys(o.content).find((t=>o.content[t].widgetId===e));(0,a.getAppStore)().dispatch(a.appActions.selectionChanged({layoutId:o.id,layoutItemId:n}))},p=(e,t,o,n,i=!1)=>{n?((0,a.getAppStore)().dispatch(a.appActions.closeWidgets(o)),o.includes(t)||((0,a.getAppStore)().dispatch(a.appActions.openWidget(t)),i&&u(t,e))):o.includes(t)?(0,a.getAppStore)().dispatch(a.appActions.closeWidget(t)):((0,a.getAppStore)().dispatch(a.appActions.openWidget(t)),i&&u(t,e))}},20863:(e,t,o)=>{"use strict";o.d(t,{Ay:()=>M});var a=o(79244),n=o(17087),i=o(28482),s=o(14321),r=o(12279),l=o(41496),c=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o};function d(e){const{widgetId:t,canCrossLayoutBoundary:o,className:n,layoutId:i,layoutItemId:d}=e,u=c(e,["widgetId","canCrossLayoutBoundary","className","layoutId","layoutItemId"]),p=a.hooks.useCancelablePromiseMaker(),[v,g]=a.React.useState(null),[h,m]=a.React.useState(""),[f,w]=a.React.useState("");a.React.useEffect((()=>{g(null),m("");p((0,r.FZ)(t)).then((e=>{g(e),m(t)}),(e=>{var t;w(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)}))}),[p,t]);const b=a.React.useCallback((()=>{var e,o;if(f)return;if(window.jimuConfig.isBuilder)return;(null===(o=null===(e=(0,a.getAppStore)().getState().widgetsRuntimeInfo)||void 0===e?void 0:e[t])||void 0===o?void 0:o.state)===a.WidgetState.Active||(0,a.getAppStore)().dispatch(a.appActions.activateWidget(t))}),[f,t]),y=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Design)),x=a.ReactRedux.useSelector((e=>{var o,a,n;const i=e.appConfig.widgets[t];return null!==(n=null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.supportInlineEditing)&&void 0!==n&&n})),S=a.ReactRedux.useSelector((e=>{const o=e.widgetsRuntimeInfo[t];return x&&(null==o?void 0:o.isInlineEditing)})),R=a.ReactRedux.useSelector((e=>{var o;const n=e.appConfig.widgets[t];return(null===(o=null==n?void 0:n.manifest)||void 0===o?void 0:o.widgetType)!==a.WidgetType.Layout})),I=a.ReactRedux.useSelector((e=>{var o,a,n;const i=e.appConfig.widgets[t];return(null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.hasEmbeddedLayout)&&Object.keys(null!==(n=i.layouts)&&void 0!==n?n:{}).length>0})),C=y&&!S&&R&&!I,{viewOnly:k}=a.React.useContext(l.PageContext),M=a.React.useCallback((e=>{const{browserSizeMode:o,appConfig:{mainSizeMode:n}}=(0,a.getAppStore)().getState();!x||k||window.parent.isExpressBuilder&&o!==n||(e.stopPropagation(),(0,a.getAppStore)().dispatch(a.appActions.setWidgetIsInlineEditingState(t,!0)))}),[x,k,t]),j=(0,a.classNames)("widget-renderer w-100 h-100",n),z=(e=>a.React.useMemo((()=>a.css`
      overflow: ${e?"visible":"hidden"};
      position: relative;
      .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
      }
      .widget-mask {
        position: absolute;
        background: transparent;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 1;
      }
  `),[e]))(o);return(0,a.jsx)("div",Object.assign({css:z,className:j,onMouseDownCapture:b,onDoubleClickCapture:M,"data-widgetid":h},u),(0,a.jsx)("div",{className:"widget-content p-1"},f,!f&&v&&(0,a.jsx)(a.ErrorBoundary,null,(0,a.jsx)(v,{widgetId:h,layoutId:i,layoutItemId:d})),!f&&!v&&(0,a.jsx)(s.Loading,null)),C&&(0,a.jsx)("div",{className:"widget-mask"}))}const u=(0,a.Immutable)({}),p=e=>{var t,o,n;const{containerMapId:r,onClose:l,widgets:c=u,layout:p,onClick:v}=e,g=null!==(t=Object.keys(c).find((e=>(0,i.V5)(c[e]))))&&void 0!==t?t:"",h=null===(n=null===(o=(0,a.getAppStore)().getState().appConfig.widgets)||void 0===o?void 0:o[g])||void 0===n?void 0:n.label;return a.React.createElement(s.MobilePanel,{className:(0,a.classNames)("mobile-widget-launcher",{"d-none":!g}),mapWidgetId:r,title:h,open:!!g,keepMount:!0,onClick:e=>{v(e,g)},onClose:e=>{l(e,g)}},Object.entries(c).map((([e,t])=>{if(!(void 0!==t.state))return null;const o=(0,i.V5)(t),n=null==p?void 0:p.id,s=(0,i.pp)(p,e);return a.React.createElement(d,{key:e,widgetId:e,layoutId:n,layoutItemId:s,onClick:t=>{v(t,e)},className:(0,a.classNames)({"d-none":!o})})})))};var v=o(70687),g=o(53716);const h=()=>document.body.getBoundingClientRect(),m=(e,t,o,n,i)=>{const[s,r]=a.React.useState((()=>h())),[l,c]=a.React.useState([o]),d=a.React.useRef(0);a.React.useEffect((()=>{const e=()=>{const e=h();r(e)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const u=(e,t)=>e.right>=t.right||e.left<=t.left,p=(e,t)=>e.bottom>=t.bottom||e.top<=t.top,g=a.hooks.useEventCallback((t=>{if(d.current++,d.current>7)return console.warn(`Number of cycles: ${d.current}.You may have opened too many panels, and now there is not enough space for them to be placed without overstepping and blocking`),t;const a=((e,t)=>!(!e||!t)&&(u(e,t)||p(e,t)))(t,s);if(!a)return t;const{width:n,height:r}=t;let{left:l,top:c,right:h,bottom:m}=t;if(a){const t=u({left:l,top:c,right:h,bottom:m,width:n,height:r},s),a=p({left:l,top:c,right:h,bottom:m,width:n,height:r},s);t&&(l=e===v.t2.SideBySide?o.x:s.right-n),a||e!==v.t2.SideBySide||(c+=i),h=l+n,m=c+r}return g({left:l,top:c,right:h,bottom:m,width:n,height:r})}));return a.React.useEffect((()=>{const a=[];let s={width:0,height:0};Object.keys(t).forEach(((r,l)=>{const c=t[r],u=0!==l?a[l-1]:o;let{x:p,y:h}=u;if(e===v.t2.SideBySide){const{width:e}=s;p+=n>0?e:-e,p+=0!==l?n:0}else e===v.t2.Stack&&(p+=0!==l?n:0,h+=0!==l?i:0);const m={left:p,top:h,right:p+c.width,bottom:h+c.height,width:c.width,height:c.height},{left:f,top:w}=g(m);d.current>7?(p=u.x,h=u.y):(p=f,h=w),d.current=0,a.push({x:p,y:h}),s=c})),c(a)}),[e,o,n,i,s.width,s.height,g,t]),l},f=(0,a.Immutable)({}),w=e=>{const{mode:t,start:o,spaceX:r,spaceY:l,sizes:c,widgets:u=f,layout:p,onResizeStop:v,onClick:h,onClose:w}=e,b=a.ReactRedux.useSelector((e=>e.appConfig.widgets)),[y,x]=a.React.useState(c),S=a.React.useMemo((()=>((e,t)=>{let o=(0,a.Immutable)({});return Object.keys(e).forEach((e=>{o=o.set(e,t[e]||n.D7)})),o})(u,y)),[y,u]),[R,I]=a.React.useState(!1),C=m(t,S,o,r,l),k=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Run)),M=(0,a.jsx)(g.Ku,{isRuntime:k,isResizing:R});return(0,a.jsx)(a.React.Fragment,null,Object.entries(u).map((([e,t],o)=>{var n;if(!(void 0!==t.state))return null;const r=(0,i.V5)(t),l=C[o];if(!l)return null;const c=S[e],u=null===(n=null==b?void 0:b[e])||void 0===n?void 0:n.label,g=null==p?void 0:p.id,m=(0,i.pp)(p,e);return(0,a.jsx)(s.FloatingPanel,{key:e,style:{maxWidth:"100vw"},headerTitle:u,defaultPosition:l,defaultSize:c,className:(0,a.classNames)({"d-none":!r},"multiple-widget-launcher"),showHeaderClose:!0,showHeaderCollapse:!0,activateOnlyForHeader:!0,autoFocus:r,dragBounds:"body",resizeHandle:M,onClick:t=>{h(t,e)},onResize:t=>{((e,t)=>{x(y.set(e,t)),I(!0)})(e,t)},onResizeStop:t=>{((e,t)=>{null==v||v(e,t),I(!1)})(e,t)},onHeaderClose:t=>{w(t,e)}},(0,a.jsx)(a.React.Fragment,null,(0,a.jsx)(d,{widgetId:e,layoutId:g,layoutItemId:m})))})))},b=(0,a.Immutable)({}),y=e=>{const{widgets:t=b,root:o,placement:r,sizes:l,layout:c,onResizeStop:u,onClick:p,onClose:v}=e,h=a.ReactRedux.useSelector((e=>e.appConfig.widgets)),[m,f]=a.React.useState(l),[w,y]=a.React.useState(!1),x=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Run)),S=(0,a.jsx)(g.Ku,{isRuntime:x,isResizing:w});return(0,a.jsx)(a.React.Fragment,null,Object.entries(t).map((([e,t])=>{var l,w;if(!(void 0!==t.state))return null;const b=t.state!==a.WidgetState.Closed,x=null!==(l=m[e])&&void 0!==l?l:n.D7,R=null===(w=null==h?void 0:h[e])||void 0===w?void 0:w.label;let I=(0,g.z_)(e);I&&I.offsetParent||(I=(null==o?void 0:o.querySelector(".popup-more-button button"))||(null==o?void 0:o.querySelector(".avatar-card")));const C=null==c?void 0:c.id,k=(0,i.pp)(c,e);return(0,a.jsx)(s.Popper,{key:e,style:{maxWidth:"100vw"},modifiers:n.VU,className:(0,a.classNames)({"d-none":!b},"single-widget-launcher"),headerTitle:R,activateOnlyForHeader:!0,minSize:n.kg,dragBounds:"body",defaultSize:x,resizeHandle:S,onResize:t=>{var o,a;o=e,a=t,f((e=>e.set(o,a))),y(!0)},onResizeStop:t=>{var o,a;o=e,a=t,null==u||u(o,a),y(!1)},onHeaderClose:t=>{v(t,e)},showHeaderCollapse:!0,floating:!0,open:!0,autoFocus:b,reference:I,onClick:t=>{p(t,e)},placement:r},(0,a.jsx)(d,{widgetId:e,layoutId:C,layoutItemId:k}))})))},x=(0,a.Immutable)({}),S=e=>{const{widgets:t=x,root:o,placement:r,layout:l,onClick:c,onClose:u}=e,[p,v]=a.React.useState({}),h=a.React.useCallback((e=>{v((t=>Object.assign(Object.assign({},t),{[e]:(t[e]||0)+1})))}),[]);return(0,a.jsx)(a.React.Fragment,null,Object.entries(t).map((([e,t])=>{if(!(void 0!==t.state))return null;const v=t.state!==a.WidgetState.Closed;let m=(0,g.z_)(e);m&&m.offsetParent||(m=(null==o?void 0:o.querySelector(".popup-more-button button"))||(null==o?void 0:o.querySelector(".avatar-button")));const f=null==l?void 0:l.id,w=(0,i.pp)(l,e);return(0,a.jsx)(s.Popper,{key:e,version:p[e]||0,css:a.css`
    border-radius: 0;
    max-width: 100vw;
    overflow: hidden;
    .widget-content {
      padding: 0 !important;
    }
  `,modifiers:n.VU,className:(0,a.classNames)({"d-none":!v},"off-panel-widget-launcher"),dragBounds:"body",open:!0,autoFocus:v,reference:m,toggle:(t,o)=>{"escape"===o&&u(t,e)},onClick:t=>{c(t,e)},placement:r},(0,a.jsx)(d,{widgetId:e,layoutId:f,layoutItemId:w}),(0,a.jsx)(a.ReactResizeDetector,{onResize:()=>{h(e)}}))})))},R=e=>a.ReactRedux.useSelector((t=>{var o,a,n,i;const s=t.appConfig,r=t.browserSizeMode,c=s.widgets[e].parent;let d=null!==(o=c[r])&&void 0!==o?o:[];if(0===d.length){d=null!==(a=c[s.mainSizeMode])&&void 0!==a?a:[]}const u=null===(n=d[0])||void 0===n?void 0:n.layoutId,p=l.searchUtils.getWidgetIdThatUseTheLayoutId(s,u),v=s.widgets[p];return"arcgis-map"===(null===(i=null==v?void 0:v.manifest)||void 0===i?void 0:i.name)?v.id:""})),I=e=>{const t=(0,a.getAppStore)().getState().appConfig.sections,o=Object.values(null!=t?t:{}).find((t=>{var o;return null===(o=t.views)||void 0===o?void 0:o.includes(e)}));return null==o?void 0:o.id},C=(e,t)=>{const o=(e=>{const t=(0,a.getAppStore)().getState().appConfig.sections,o=e?Object.values(e).map((e=>e.currentViewId)):[],n=o.map(I),i=Object.values(null!=t?t:{}).map((e=>{var t;if(!n.includes(e.id))return null===(t=e.views)||void 0===t?void 0:t[0]})).filter((e=>!!e)),s=o;return i.forEach((e=>{o.includes(e)||s.push(e)})),s})(e),n=(0,a.getAppStore)().getState().browserSizeMode,i=(0,a.getAppStore)().getState().appConfig,s=l.searchUtils.getContentContainerInfo(i,t,a.LayoutItemType.Widget,n);let r=!0;if(!s)return r;if(s.type===a.ContainerType.View)if(o.includes(s.id)){const e=s.id,t=I(e),c=l.searchUtils.getContentContainerInfo(i,t,a.LayoutItemType.Section,n);c&&c.type===a.ContainerType.View&&(o.includes(c.id)||(r=!1))}else r=!1;return r},k=e=>{const t=a.ReactRedux.useSelector((e=>{var t;return null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.sectionNavInfos}));return C(t,e)};function M(e){var t,o,s,r,c,d,u,v,h,m;const{id:f,config:b,version:x,rootRef:I,onResizeStop:C}=e,{viewOnly:M}=a.React.useContext(l.PageContext),j=a.hooks.useCheckSmallBrowserSizeMode(),z=null===(t=b.behavior)||void 0===t?void 0:t.onlyOpenOne,A=null!==(s=null===(o=null==b?void 0:b.behavior)||void 0===o?void 0:o.arrangement)&&void 0!==s?s:"floating",L=z&&"floating"===A,$=!z&&"floating"===A,E=(0,i.af)(f,n.bC),O=a.React.useCallback(((e,t)=>{var o;e.stopPropagation();const n=(0,a.getAppStore)().getState(),s=n.appRuntimeInfo.appMode===a.AppMode.Express,r=n.browserSizeMode!==n.appConfig.mainSizeMode;if(M||s&&r)return;const l=null==E?void 0:E.id,c=(0,i.pp)(E,t),d=null===(o=(0,a.getAppStore)().getState().appRuntimeInfo)||void 0===o?void 0:o.selection;d&&d.layoutId===l&&d.layoutItemId===c||(0,a.getAppStore)().dispatch(a.appActions.selectionChanged({layoutId:l,layoutItemId:c}))}),[E,M]),N=a.React.useCallback(((e,t)=>{var o;if(!t)return;null==e||e.stopPropagation(),null==e||e.preventDefault(),(0,a.getAppStore)().dispatch(a.appActions.closeWidget(t));const n=(0,g.z_)(t)||(0,g.Sr)(f);null===(o=null==n?void 0:n.focus)||void 0===o||o.call(n),(0,a.getAppStore)().dispatch(a.appActions.selectionChanged(null))}),[f]),P=R(f),T=(null===(r=b.behavior)||void 0===r?void 0:r.vertical)?"right-start":"bottom-start",B=null===(c=b.behavior)||void 0===c?void 0:c.displayType,W=null===(v=null===(u=null===(d=(0,a.getAppStore)())||void 0===d?void 0:d.getState())||void 0===u?void 0:u.appContext)||void 0===v?void 0:v.isRTL,F=a.React.useMemo((()=>W?Object.assign(Object.assign({},n.up),{x:document.body.clientWidth-n.D7.width-n.up.x}):n.up),[W]),H=a.React.useMemo((()=>W?Object.assign(Object.assign({},n.aP),{x:-n.aP.x}):n.aP),[W]),D=null===(h=b.behavior)||void 0===h?void 0:h.size,U=(0,i.PG)(f,n.bC),V=a.hooks.useLatest(U),_=Object.keys(U),G=a.React.useCallback((()=>{const e=V.current,t=Object.keys(e).filter((t=>(0,i.V5)(e[t])));(0,a.getAppStore)().dispatch(a.appActions.closeWidgets(t))}),[V]);a.hooks.useUpdateEffect((()=>{(0,a.getAppStore)().dispatch(a.appActions.resetWidgetsState(_))}),[x]);const q=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.currentPageId));a.hooks.useUpdateEffect((()=>{G()}),[q]);const X=k(f),Y=a.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),K=null===(m=b.behavior)||void 0===m?void 0:m.openStarts;a.hooks.useUpdateEffect((()=>{X?!Y&&(null==K?void 0:K.length)>0&&setTimeout((()=>{(0,a.getAppStore)().dispatch(a.appActions.openWidgets(K))}),1e3):G()}),[X]),a.React.useEffect((()=>(Y?(0,a.getAppStore)().dispatch(a.appActions.resetWidgetsState(_)):(null==K?void 0:K.length)&&X&&setTimeout((()=>{(0,a.getAppStore)().dispatch(a.appActions.openWidgets(K))}),1e3),()=>{G()})),[]);const Q=a.ReactRedux.useSelector((e=>{const t=e.appConfig.widgets;return _.filter((e=>t[e].offPanel)).join(",")}),a.ReactRedux.shallowEqual),Z=_.filter((e=>!Q.split(",").includes(e))).join(","),J=a.React.useMemo((()=>U.without.apply(U,Z.split(","))),[Z,U]),ee=a.React.useMemo((()=>U.without.apply(U,Q.split(","))),[Q,U]);return(0,a.jsx)(a.React.Fragment,null,j&&(0,a.jsx)(p,{containerMapId:P,layout:E,widgets:U,onClick:O,onClose:N}),!j&&L&&(0,a.jsx)(y,{sizes:D,root:I.current,placement:T,widgets:ee,layout:E,onResizeStop:C,onClick:O,onClose:N}),!j&&$&&(0,a.jsx)(w,{sizes:D,mode:B,start:F,spaceX:H.x,spaceY:H.y,widgets:ee,layout:E,onResizeStop:C,onClick:O,onClose:N}),!j&&(0,a.jsx)(S,{root:I.current,placement:T,widgets:J,layout:E,onClick:O,onClose:N}))}},13166:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});const a={_widgetLabel:"Widget Controller",_action_openWidget_label:"Open widget",resizerTooltip:"Customize the window size by dragging and dropping.",moreWidgets:"More widgets"}},23740:(e,t,o)=>{o.p=window.jimuConfig.baseUrl},54657:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__set_webpack_public_path__:()=>S,default:()=>x,useAdvancedStyle:()=>b});var a=o(79244),n=o(2021),i=o(70687),s=o(42667),r=o(12279),l=o(17087),c=o(28482),d=o(20863),u=o(53716),p=o(4843);const v=e=>{var t,o,v,g,h,m,f,w;const{id:b,config:y,version:x,autoSize:S}=e,R=null===(t=y.behavior)||void 0===t?void 0:t.onlyOpenOne,I=null===(o=y.behavior)||void 0===o?void 0:o.vertical,C=y.behavior.overflownStyle||i.AH.Arrows,k=null===(v=null==y?void 0:y.appearance)||void 0===v?void 0:v.card,M=(0,n._C)(k,null===(g=null==y?void 0:y.appearance)||void 0===g?void 0:g.space),j=a.hooks.useCheckSmallBrowserSizeMode(),z=a.React.useRef(null),A=(0,c.PG)(b,l.bC),L=Object.keys(A),$=L.filter((e=>(0,c.V5)(A[e]))),E=a.React.useCallback((e=>{var t;const o=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.widgetid;if(!o)return;const a=!!j||R;$.includes(o)||e.stopPropagation(),(0,u.xu)(b,o,$,a,!0)}),[j,R,$,b]),O=a.React.useCallback(((e,t,o)=>{const n=$.includes(e);return a.React.createElement(r.GD,{key:e,className:`${t} layout-item`,widgetid:e,markerEnabled:!1,active:n,showLabel:k.showLabel,showIndicator:k.showIndicator,showTooltip:k.showTooltip,labelGrowth:k.labelGrowth,avatar:k.avatar,variant:k.variant,onClick:e=>{null==o||o(e),E(e)}})}),[k,E,$]);return a.React.createElement("div",{className:"controller-runtime w-100 h-100"},a.React.createElement(d.Ay,{id:b,config:y,version:x,rootRef:z}),C===i.AH.PopupWindow&&a.React.createElement(p.z,{ref:z,className:"runtime--popup-list",vertical:I,itemLength:M,space:null===(h=y.appearance)||void 0===h?void 0:h.space,alignment:null===(m=y.behavior)||void 0===m?void 0:m.alignment,autoSize:S,lists:L,createItem:O,itemStyle:k,advanced:y.appearance.advanced}),C===i.AH.Arrows&&a.React.createElement(s.Q,{ref:z,className:"runtime--scroll-list",vertical:I,itemLength:M,space:null===(f=y.appearance)||void 0===f?void 0:f.space,alignment:null===(w=y.behavior)||void 0===w?void 0:w.alignment,autoSize:S,lists:L,createItem:O}))};var g=o(14321);const h={behavior:{onlyOpenOne:!0,openStarts:[],displayType:"STACK",vertical:!1,size:{}},appearance:{space:0,advanced:!1,card:{showLabel:!1,labelGrowth:10,showTooltip:!0,showIndicator:!1,avatar:{type:"primary",size:"default",shape:"circle"}}}};class m extends a.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"Version manager for release 1.0.0",upgrader:e=>{if(!e)return h;if(e.behavior&&e.appearance)return e;{let o=e;return e.behavior||(o=o.setIn(["behavior","openStarts"],[]),o=o.setIn(["behavior","onlyOpenOne"],e.onlyOpenOne),o=o.setIn(["behavior","displayType"],e.displayType),o=o.setIn(["behavior","vertical"],e.vertical),o=o.setIn(["behavior","size"],e.size),o=o.without(["onlyOpenOne","displayType","size"])),e.appearance||(o=o.setIn(["appearance","advanced"],!1),e.vertical?o=o.setIn(["appearance","space"],e.space):(o=o.setIn(["appearance","space"],0),o=o.setIn(["appearance","card","labelGrowth"],e.space)),o=o.setIn(["appearance","card","showLabel"],e.showLabel),o=o.setIn(["appearance","card","avatar","size"],"SMALL"===(t=e.iconSize)?"sm":"MEDIUM"===t?"default":"LARGE"===t?"lg":t),o=o.setIn(["appearance","card","avatar","shape"],e.iconStyle),o=o.setIn(["appearance","card","avatar","type"],"primary"),o=o.without(["space","showLabel","iconSize","iconStyle","vertical"])),o}var t}},{version:"1.1.0",description:"Version manager for release 1.1.0",upgrader:e=>{var t,o;if(!e)return h;let a=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card;const n=null==a?void 0:a.variants,i=null===(o=null==a?void 0:a.avatar)||void 0===o?void 0:o.type;let s=e;if(n){const e=((e,t="primary")=>null==e?void 0:e[t])(n,i);a=null==a?void 0:a.set("variant",e).without("variants"),s=s.setIn(["appearance","card"],a)}return s}},{version:"1.6.0",description:"Version manager for release 1.6.0",upgrader:e=>{var t;if(!e)return h;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showTooltip",!0),a=a.setIn(["appearance","card"],o)),a}},{version:"1.14.0",description:"Version manager for release 1.14.0",upgrader:e=>{var t;if(!e)return h;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showIndicator",!1),a=a.setIn(["appearance","card"],o)),a}}]}}const f=new m,w=(e,t)=>{const{bg:o,iconColor:n,boxShadow:i,color:s,italic:r,bold:l,underline:c,strike:d}=e||{},u=g.styleUtils.toCSSTextUnderLine({underline:c,strike:d});let p=a.css``;return"active"===t&&(p=a.css`::after {
      background-color: ${o};
    }`),a.css`
    >.avatar {
      >.avatar-button {
        ${o?a.css`background-color: ${o}; border-color: ${o};`:""}
        ${n?a.css`color: ${n};`:""}
        ${(null==i?void 0:i.color)?a.css`box-shadow: ${g.styleUtils.toCSSBoxshadow(i)};`:""}
      }
      ${p}
    }
    >.avatar-label {
      ${s?a.css`color: ${s};`:""}
      ${r?a.css`font-style: italic;`:""}
      ${l?a.css`font-weight: bold;`:""}
      ${c||d?a.css`text-decoration: ${u};`:""}
    }
  `},b=(e,t)=>{const o=null==e?void 0:e.default,n=null==e?void 0:e.active,i=o&&n?o.merge(n):n,s=null==e?void 0:e.hover,r=o&&s?o.merge(s):s;return a.React.useMemo((()=>{const e=t&&o?w(o,"regular"):"",n=w({bg:"var(--sys-color-primary-dark)"},"active"),s=t&&i?w(i,"active"):"",l=t&&r?w(r,"hover"):"";return a.css`
      .avatar-card {
        ${e}
        ${a.css`&.active:not(.disabled) { ${n} }`}
        ${s?a.css`&.active:not(.disabled) { ${s} }`:""}
        ${l?a.css`&:hover { ${l} }`:""}
      }
    `}),[t,o,i,r])},y=e=>{var t,o,n,i;const{builderSupportModules:s,id:r,config:c,onInitResizeHandler:d,onInitDragHandler:u,autoWidth:p,autoHeight:g}=e,h=null===(t=c.behavior)||void 0===t?void 0:t.onlyOpenOne,m=null===(o=c.behavior)||void 0===o?void 0:o.displayType,f=null===(n=null==c?void 0:c.behavior)||void 0===n?void 0:n.vertical,w=null==c?void 0:c.appearance.advanced,y=null===(i=null==c?void 0:c.appearance)||void 0===i?void 0:i.card.variant,x=f?g:p,S=a.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),R=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode));a.React.useEffect((()=>{null==d||d(null,null,(()=>{M((e=>e+1))}))}),[d]),a.React.useEffect((()=>{null==u||u(null,null,(()=>{M((e=>e+1))}))}),[u]);const I=S&&R!==a.AppMode.Run,C=I&&s.widgetModules.Builder,[k,M]=a.React.useState(0);a.hooks.useUpdateEffect((()=>{M((e=>e+1))}),[h,m,R]);const j=((e,t,o)=>{const n=e?0:l.iI.sm,i=e?0:l.iI.sm,s=t?"5px":0,r=o?"5px":0;return a.React.useMemo((()=>a.css`
      overflow: visible;
      white-space: nowrap;
      .controller-container {
        width: 100%;
        height: 100%;
        padding: ${r} ${s};
        min-width:  ${n}px;
        min-height: ${i}px;
      }
    `),[s,r,n,i])})(x,p,g),z=b(y,w);return(0,a.jsx)("div",{className:"widget-controller jimu-widget rw-controller",css:[j,z]},(0,a.jsx)("div",{className:"controller-container"},!I&&(0,a.jsx)(v,{id:r,version:k,config:c,autoSize:x}),I&&C&&(0,a.jsx)(C,{id:r,version:k,config:c,autoSize:x})))};y.versionManager=f;const x=y;function S(e){o.p=e}},79244:e=>{"use strict";e.exports=o},41496:e=>{"use strict";e.exports=i},1888:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=a}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="",s(23740),s(54657)})())}}}));