System.register(["jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-theme"],(function(e,t){var o={},a={},n={},i={};return{setters:[function(e){o.AppMode=e.AppMode,o.BaseVersionManager=e.BaseVersionManager,o.ErrorBoundary=e.ErrorBoundary,o.FixedPosition=e.FixedPosition,o.Immutable=e.Immutable,o.React=e.React,o.ReactRedux=e.ReactRedux,o.WidgetManager=e.WidgetManager,o.WidgetState=e.WidgetState,o.WidgetType=e.WidgetType,o.appActions=e.appActions,o.classNames=e.classNames,o.css=e.css,o.focusElementInKeyboardMode=e.focusElementInKeyboardMode,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.jsx=e.jsx,o.lodash=e.lodash,o.polished=e.polished},function(e){a.Button=e.Button,a.FloatingPanel=e.FloatingPanel,a.Icon=e.Icon,a.Loading=e.Loading,a.MobilePanel=e.MobilePanel,a.Modal=e.Modal,a.ModalBody=e.ModalBody,a.NavButtonGroup=e.NavButtonGroup,a.Pagination=e.Pagination,a.Popper=e.Popper,a.Tooltip=e.Tooltip,a.defaultMessages=e.defaultMessages,a.styleUtils=e.styleUtils},function(e){n.PageContext=e.PageContext,n.searchUtils=e.searchUtils},function(e){i.styled=e.styled}],execute:function(){e((()=>{var e={54044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M12 0h4v16H0v-4h12z"></path><path fill="#FFF" d="M13 1h2v14H1v-2h12z"></path></svg>'},26189:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 10"><path fill="#B6B6B6" d="M10 2.778V0L0 10h2.778zM10 5.607 5.607 10H10z"></path></svg>'},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},49859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M4 4h2v1H4zM8 4h2v1H8zM14 4h-2v1h2zM15 4h1v2h-1zM16 8h-1v2h1zM4 14h1v2H4zM5 6H4v2h1zM4 10h1v2H4zM16 12h-1v2h1zM16 15v1h-2v-1zM12 15h-2v1h2zM6 15h2v1H6z"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},17087:(e,t,o)=>{"use strict";o.d(t,{D7:()=>r,XJ:()=>p,ZT:()=>u,aP:()=>c,bC:()=>n,iI:()=>i,kg:()=>s,up:()=>l,yH:()=>d});var a=o(79244);const n="controller",i={sm:24,default:32,lg:48},s={width:150,height:120},r={width:360,height:360},l={x:70,y:70},c={x:30,y:30},d=(a.FixedPosition.TopRight,{flipAlignment:!1}),u={boundary:document.body,rootBoundary:"document"},p=16},70687:(e,t,o)=>{"use strict";var a,n,i;o.d(t,{AH:()=>i,aL:()=>n,t2:()=>a}),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(a||(a={})),function(e){e.Center="center",e.Start="start",e.End="end"}(n||(n={})),function(e){e.Arrows="ARROWS",e.PopupWindow="POPUP_WINDOW"}(i||(i={}))},50572:(e,t,o)=>{"use strict";o.d(t,{I6:()=>c,Q$:()=>s});var a=o(79244),n=o(14321),i=o(17087);const s=(e,t,o)=>{let a=i.iI[e];t&&(a+=21);return a+=2*r(e,o),a},r=(e,t)=>"circle"===t?"sm"===e?4:"default"===e?2:"lg"===e?0:void 0:6,l={none:"0",sm:"0",default:"var(--sys-shape-1)",lg:"var(--sys-shape-2)"},c=a.React.forwardRef(((e,t)=>{var o;const{label:i,className:c,showLabel:d,showIndicator:u=!0,showTooltip:p=!0,labelGrowth:v=0,icon:g,marker:h,onClick:m,onMarkerClick:f,avatar:w,autoFlip:b,active:y,editDraggable:x,disabled:S,widgetid:R}=e,I=w.type||"primary",C=w.size||"default",k=w.shape||"circle",M=((e,t,o,n,i)=>a.React.useMemo((()=>{const l=s(e,t,n),c=l+i,d=r(e,n);return a.css`
      display: flex;
      align-items:center;
      flex-direction: column;
      justify-content: ${t?"space-around":"center"};
      width: ${a.polished.rem(c)} !important;
      height: ${a.polished.rem(l)};
      .tool-drag-handler {
        cursor: auto;
      }
      .avatar {
        padding: ${d}px;
        position: relative;
        text-align: center;
        &:hover .marker {
          visibility: visible;
        }
        .avatar-button.disabled {
          color: var(--sys-color-action-disabled-text);
          background-color: var(--sys-color-action-disabled);
          border: 1px solid var(--sys-color-divider-secondary);
        }
        .marker {
          position: absolute;
          right: 0;
          top: 0;
          padding: 0;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          .icon-btn-sizer {
            min-width: .625rem;
            min-height: .625rem;
          }
          visibility: hidden;
        }
      }
      ${o?".avatar.active {\n        .avatar-button, .marker {\n          transform: translateY(-7px);\n        }\n        ::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          border: 1px solid var(--ref-palette-white);\n          border-radius: 3px;\n          width: 6px;\n          height: 3px;\n          background-color: var(--sys-color-primary-main);\n          box-sizing: content-box;\n        }\n      }":""}
      .avatar-label {
        text-align: center;
        width: 100%;
        min-height: ${a.polished.rem(21)};
        cursor: default;
      }
    `}),[e,t,n,i,o]))(C,d,u,k,v),j=l[C],z=(0,a.jsx)(n.Button,{"data-widgetid":R,"aria-label":i,"aria-expanded":y,"aria-haspopup":"dialog",icon:!0,active:y,className:(0,a.classNames)("avatar-button",{disabled:S}),type:I,size:C,style:{borderRadius:"circle"===k?"50%":j},onClick:m},(0,a.jsx)(n.Icon,{color:"string"!=typeof g&&(null===(o=g.properties)||void 0===o?void 0:o.color),icon:"string"!=typeof g?g.svg:g,autoFlip:b}));return(0,a.jsx)("div",{ref:t,"data-widgetid":R,className:(0,a.classNames)("avatar-card",{active:y},c),css:M},(0,a.jsx)("div",{className:(0,a.classNames)({"no-drag-action":!x,active:y},"avatar tool-drag-handler")},p?(0,a.jsx)(n.Tooltip,{title:i,style:{pointerEvents:"none"}},z):z,h&&(0,a.jsx)(n.Button,{className:"marker",size:"sm",icon:!0,onClick:f},(0,a.jsx)(n.Icon,{size:8,icon:h}))),d&&(0,a.jsx)("div",{className:(0,a.classNames)("avatar-label text-truncate",{active:y})},i))}))},12279:(e,t,o)=>{"use strict";o.d(t,{GD:()=>l,FZ:()=>c.F});var a=o(79244),n=o(50572),i=o(14321),s=o(62838),r=o.n(s);const l=e=>{var t,o;const{markerEnabled:s,onMarkerClick:l,widgetid:c,showLabel:d,showIndicator:u,showTooltip:p,labelGrowth:v,avatar:g,onClick:h,active:m,editDraggable:f,className:w}=e,b=a.ReactRedux.useSelector((e=>{var t;return null===(t=e.appConfig.widgets)||void 0===t?void 0:t[c]})),y="string"==typeof b.icon?b.icon:b.icon.asMutable({deep:!0});return b?a.React.createElement(n.I6,{widgetid:c,className:`widget-avatar-card ${w}`,showLabel:d,showIndicator:u,showTooltip:p,labelGrowth:v,avatar:g,label:b.label,icon:y,autoFlip:null===(o=null===(t=null==b?void 0:b.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.flipIcon,marker:s?r():"",active:m,editDraggable:f,onMarkerClick:l,onClick:h}):a.React.createElement(i.Loading,null)};o(42667);var c=o(9567),d=(o(49859),o(1888)),u=o(70687);(0,d.styled)("div",{shouldForwardProp:e=>!["vertical","space","alignment"].includes(e)})((e=>`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: ${e.alignment===u.aL.Start?"flex-start":e.alignment===u.aL.End?"flex-end":"center"};\n  flex-direction: ${e.vertical?"column":"row"};\n  .avatar-placeholder {\n    &:not(:first-of-type) {\n      margin-top: ${e.vertical?a.polished.rem(e.space):"unset"};\n      margin-left: ${e.vertical?"unset":a.polished.rem(e.space)};\n    }\n  }\n`)),(e=>{const t=[];for(;e>0;)t.push(e),e--})(3),(0,a.Immutable)({type:"secondary",size:"lg",shape:"circle"})},28482:(e,t,o)=>{"use strict";o.d(t,{H9:()=>p,PG:()=>s,V5:()=>u,af:()=>r,lL:()=>l,pp:()=>d});var a=o(79244),n=o(41496),i=o(17087);const s=(e,t)=>{const o=a.ReactRedux.useSelector((e=>e.widgetsRuntimeInfo)),n=r(e,t),i=c(n);return a.React.useMemo((()=>{const e={};return i.forEach((t=>{var n;const i=null!==(n=null==o?void 0:o[t])&&void 0!==n?n:{isClassLoaded:!1};e[t]=(0,a.Immutable)(i)})),(0,a.Immutable)(e)}),[i,o])},r=(e,t)=>a.ReactRedux.useSelector((o=>{var a,i,s,r;const l=null===(s=null===(i=null===(a=o.appConfig.widgets)||void 0===a?void 0:a[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],c=o.browserSizeMode,d=o.appConfig.mainSizeMode,u=n.searchUtils.findLayoutId(l,c,d);return null===(r=o.appConfig.layouts)||void 0===r?void 0:r[u]})),l=(e,t)=>{var o,i,s,r;const l=(0,a.getAppStore)().getState().appConfig,c=(0,a.getAppStore)().getState().browserSizeMode,d=null===(s=null===(i=null===(o=l.widgets)||void 0===o?void 0:o[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],u=n.searchUtils.findLayoutId(d,c,l.mainSizeMode);return null===(r=l.layouts)||void 0===r?void 0:r[u]},c=e=>{const t=(e=>{var t,o,a;let n=(null!==(a=null===(o=null===(t=null==e?void 0:e.order)||void 0===t?void 0:t.asMutable)||void 0===o?void 0:o.call(t))&&void 0!==a?a:[]).map((t=>{var o;return null===(o=e.content)||void 0===o?void 0:o[t]}));return n=n.filter((e=>e&&e.id&&e.widgetId&&!e.isPending)),n.map((e=>e.id))})(e);return t.map((t=>{var o,a;return null===(a=null===(o=e.content)||void 0===o?void 0:o[t])||void 0===a?void 0:a.widgetId}))},d=(e,t)=>{if(null!=(null==e?void 0:e.content)&&t)return Object.keys(e.content).find((o=>e.content[o].widgetId===t))},u=e=>[a.WidgetState.Opened,a.WidgetState.Active].includes(e.state),p=e=>{const t=s(e,i.bC),o=Object.keys(t);return a.ReactRedux.useSelector((t=>{var a,n,i;const s=t.appRuntimeInfo.selection,r=null===(i=null===(n=null===(a=t.appConfig.layouts[null==s?void 0:s.layoutId])||void 0===a?void 0:a.content)||void 0===n?void 0:n[null==s?void 0:s.layoutItemId])||void 0===i?void 0:i.widgetId;return e===r||o.includes(r)}))}},42667:(e,t,o)=>{"use strict";o.d(t,{Q:()=>c});var a=o(79244),n=o(14321),i=o(19640),s=o(70687),r=o(28482);const l=[],c=a.React.forwardRef(((e,t)=>{const{controllerId:o,className:c,lists:d=l,createItem:u,vertical:p,itemLength:v,space:g,alignment:h=s.aL.Center,autoScrollEnd:m,autoSize:f,onMouseDown:w}=e,b=a.hooks.useTranslation(n.defaultMessages),[y,x]=a.hooks.useForwardRef(t),{start:S,end:R,disablePrevious:I,disableNext:C,hideArrow:k,scroll:M,remainLength:j}=(0,i.k)({rootRef:y,lists:d,itemLength:v,autoSize:f,vertical:p,space:g,autoScrollEnd:m}),z=d.slice(S,R),A=(({vertical:e,space:t,itemLength:o,autoSize:n,hideArrow:i,alignment:r,remainLength:l})=>a.css`
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    button.previous, button.next {
      flex-shrink: 0;
      display: ${i?"none":"block"};
    }
    ${r!==s.aL.Start||n||e?"":`button.next { transform: translateX(${-l}px); }`}
    ${r===s.aL.Start&&!n&&e?`button.next { transform: translateY(${-l}px); }`:""}
    ${r!==s.aL.End||n||e?"":`button.previous { transform: translateX(${l}px); }`}
    ${r===s.aL.End&&!n&&e?`button.previous { transform: translateY(${l}px); }`:""}
    .root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`} 
      max-height: ${n?"100%":"calc(100% - 20px)"};
      max-width: ${n?"100%":"calc(100% - 20px)"};
      display: flex;
      justify-content: ${r===s.aL.Start?"flex-start":r===s.aL.End?"flex-end":"center"};
      flex-wrap: nowrap;
      align-items: center;
      .scroll-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
`)({vertical:p,space:g,itemLength:v,autoSize:f,hideArrow:k,alignment:h,remainLength:j}),$=(0,r.H9)(o);a.React.useEffect((()=>{$&&((0,a.getAppStore)().dispatch(a.appActions.widgetStatePropChange(o,"hideArrow",k)),(0,a.getAppStore)().dispatch(a.appActions.widgetStatePropChange(o,"disablePrevious",I)),(0,a.getAppStore)().dispatch(a.appActions.widgetStatePropChange(o,"disableNext",C)),(0,a.getAppStore)().dispatch(a.appActions.widgetToolbarStateChange(o,["controller-previous","controller-next"])))}),[o,C,I,k,$]),a.React.useEffect((()=>{$&&(0,a.getAppStore)().dispatch(a.appActions.widgetStatePropChange(o,"onArrowClick",M))}),[o,$,M]);return(0,a.jsx)(n.NavButtonGroup,{css:A,type:"tertiary",vertical:p,onChange:e=>{M(e,!0)},disablePrevious:I,disableNext:C,previousAriaLabel:b("previous"),nextAriaLabel:b("next"),className:(0,a.classNames)("scroll-list",c)},(0,a.jsx)("div",{className:"root scroll-list-root",ref:x,onMouseDown:w},d.map((e=>{const t=!z.includes(e);return u(e,(0,a.classNames)("scroll-list-item",{"d-none":t}))}))))}))},4843:(e,t,o)=>{"use strict";o.d(t,{z:()=>h});var a=o(79244),n=o(19640),i=o(70687),s=o(14321),r=o(17087);const l=(e,t,o)=>a.css`
    position: ${e===t?"relative":"absolute"};
    left: ${(e-t)*(6*o+40)}px;
    transition: all ease 0.3s;
  `,c=e=>{const{lists:t=[],createItem:o,itemLength:n,isOpen:i,reference:c,advancedStyle:d,onClose:u,onMouseDown:p}=e,v=a.hooks.useCheckSmallBrowserSizeMode(),g=3*(v?4:5),[h,m]=a.React.useState(1),f=Math.ceil(t.length/g),w=new Array(f).fill(1).map(((e,t)=>t+1)),b=e=>{m(e)},y=a.hooks.useLatest(h);a.React.useEffect((()=>{y.current>f&&0!==f&&m(f)}),[y,f]);const x=((e,t,o)=>{const n=o?4:5,i=o?a.css`top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important;`:"";return a.css`
    ${i}
    &.modal-dialog {
      width: fit-content;
      margin: 0;
      .modal-content {
        border-radius: 8px;
        .modal-body {
          padding: 0;
        }
      }
    }
    &.popper {
      border-radius: 4px;
    }
    .popup-more {
      padding: var(--sys-spacing-3);
      display: flex;
      position: relative;
      overflow: hidden;
      .popup-page {
        display: grid;
        max-width: ${e*n}px;
        grid-template-columns: repeat(${t>1||o?n:"auto-fit"}, ${e}px);
        grid-template-rows: repeat(${t>1||o?3:"auto-fit"}, 1fr);
        gap: var(--sys-spacing-2) 0;
        justify-content: center;
      }
    }
    .popup-pagination {
      padding: 0 var(--sys-spacing-3) var(--sys-spacing-2) var(--sys-spacing-3);
      text-align: center;
      .jimu-pagination {
        justify-content: center;
        .jimu-page-number {
          display: none;
        }
      }
      .page-indicator {
        width: 6px;
        height: 6px;
        padding: 0;
        border-radius: 3px;
        border: none;
        background-color: var(--sys-color-action-disabled);
        transition: width ease 0.3s;
        &+.page-indicator {
          margin-left: 8px;
        }
        &.page-current {
          background-color: var(--sys-color-action-selected);
        }
      }
    }
  `})(n,w.length,v),S=a.React.useRef(0),R=a.React.useRef(0),I=(0,a.jsx)(a.React.Fragment,null,(0,a.jsx)("div",{className:"popup-more",css:d,onTouchStart:e=>{1===e.touches.length&&(S.current=e.touches[0].clientX)},onTouchMove:e=>{1===e.touches.length&&(R.current=e.touches[0].clientX)},onTouchEnd:e=>{const t=R.current-S.current;t<-100&&m((e=>e<f?e+1:e)),t>100&&m((e=>e>1?e-1:e)),S.current=0,R.current=0},onMouseDown:p},w.map((e=>{const i=t.slice(g*(e-1),g*e);return(0,a.jsx)("div",{key:e,className:"popup-page",css:l(e,h,n),onFocus:()=>{m(e)}},i.map((e=>o(e,"popup-list-item",u))))}))),w.length>1&&(0,a.jsx)("div",{className:"popup-pagination"},v&&w.map((e=>(0,a.jsx)(s.Button,{key:e,tabIndex:-1,"aria-hidden":!0,className:(0,a.classNames)("page-indicator",{"page-current":h===e}),onClick:()=>{b(e)}}))),!v&&(0,a.jsx)(s.Pagination,{variant:"text",current:h,simple:!0,size:"sm",totalPage:w.length,onChangePage:b})));return v?(0,a.jsx)(s.Modal,{className:"popup-more-modal",css:x,isOpen:i,toggle:u},(0,a.jsx)(s.ModalBody,null,I)):(0,a.jsx)(s.Popper,{className:"popup-more-popper",css:x,open:i,reference:c,autoFocus:!0,trapFocus:!0,flipOptions:r.yH,shiftOptions:r.ZT,offsetOptions:r.XJ,toggle:u},I)};var d=o(50572),u=o(13166),p=o(4651),v=o.n(p),g=o(54657);const h=a.React.forwardRef(((e,t)=>{const{vertical:o,alignment:s,space:r,itemStyle:l,lists:p=[],createItem:h,itemLength:m,autoSize:f,advanced:w,className:b,onMouseDown:y}=e,x=((e,t,o,n=i.aL.Center)=>a.css`
    &.root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`}
      max-height: 100%;
      max-width: 100%;
      display: flex;
      justify-content: ${"center"===n?"center":"flex-"+n};
      flex-wrap: nowrap;
      align-items: center;
      .popup-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
  `)(o,r,m,s),[S,R]=a.hooks.useForwardRef(t),I=(0,n.s)({rootRef:S,lists:p,itemLength:m,autoSize:f,vertical:o,space:r});let C=p,k=[],M=!1;I<p.length&&(C=p.slice(0,I-1),k=p.slice(I-1),M=!0);const[j,z]=a.React.useState(!1),A=a.React.useRef(null),$=a.React.useCallback((e=>{z((t=>{const o="boolean"==typeof e?e:!t;return o||(0,a.focusElementInKeyboardMode)(A.current),o}))}),[]);a.React.useEffect((()=>{0===k.length&&z(!1)}),[k.length]);const O=a.hooks.useTranslation(u.A),L=(0,g.useAdvancedStyle)(l.variant,w);return(0,a.jsx)("div",{className:(0,a.classNames)("root popup-list-root",b),css:x,ref:R,onMouseDown:y},C.map((e=>h(e,(0,a.classNames)("popup-list-item")))),M&&(0,a.jsx)(d.I6,{ref:A,className:"popup-more-card popup-list-item",label:O("moreWidgets"),icon:v(),showLabel:l.showLabel,showIndicator:l.showIndicator,showTooltip:l.showTooltip,labelGrowth:l.labelGrowth,avatar:l.avatar,active:j,onClick:()=>{$()}}),(0,a.jsx)(c,{lists:k,createItem:h,isOpen:j,itemLength:m,reference:A.current,advancedStyle:L,onClose:()=>{$(!1)},onMouseDown:y}))}))},19640:(e,t,o)=>{"use strict";o.d(t,{k:()=>s,s:()=>r});var a=o(79244);const n=(e,t=!1,o=0,n=o,i)=>{var s,r;const l=t?"clientHeight":"clientWidth",[c,d]=a.React.useState(null!==(r=null===(s=e.current)||void 0===s?void 0:s[l])&&void 0!==r?r:0),u=i,p=a.hooks.useLatest((()=>{const t=e.current[l]||0;d(t)})),v=a.React.useMemo((()=>a.lodash.debounce((()=>{p.current()}),500,{leading:!0})),[p]);return a.React.useEffect((()=>{if(u)return;const t=e.current;t&&v();const o=new ResizeObserver(v);return o.observe(t),()=>{o.disconnect(),v.cancel()}}),[e,v,u]),Math.max(c+o,n)},i=(e,t,o)=>{let a=e,n=t;return n-a>o?n=e+o:n-a<o&&(a=0,n=a+o),[a,n]},s=e=>{var t;const{rootRef:o,lists:s,itemLength:r,autoSize:l,vertical:c,space:d,autoScrollEnd:u}=e,p=null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0;let v,g=n(o,c,d,r,l);l?(v=p,g=r*v):v=Math.floor(g/r)>p?p:Math.floor(g/r);const h=g-r*v,[m,f]=a.React.useState(i(0,0,v)[0]),[w,b]=a.React.useState(i(0,0,v)[1]),y=a.hooks.useLatest(m),x=a.hooks.useLatest(w),[S,R]=a.React.useState(w-m>=p),I=0===m,C=w===p;a.React.useEffect((()=>{if(0===g)return;const[e,t]=i(x.current,y.current,v);f(e),b(t),R(t-e>=p)}),[v,g,x,y,p]);const k=a.hooks.useEventCallback(((e,t=!0)=>{const o=t?1:v;let a=0,n=0;e?(a=m-o,a<0?(a=0,n=a+v):n=w-o):(n=w+o,n>p?(n=p,a=n-v):a=m+o),f(a),b(n)})),M=a.hooks.usePrevious(p);return a.React.useEffect((()=>{if(u&&(p>0&&M>0)&&M<p){let e=0,t=0;t=p,e=t-v,e=Math.max(0,e),f(e),b(t)}}),[u,p,v,M]),{start:m,end:w,disablePrevious:I,disableNext:C,hideArrow:S,scroll:k,remainLength:h}},r=e=>{var t;const{rootRef:o,lists:a,itemLength:i,autoSize:s,vertical:r,space:l}=e,c=null!==(t=null==a?void 0:a.length)&&void 0!==t?t:0,d=n(o,r,l,i,s);let u;return u=s||Math.floor(d/i)>c?c:Math.floor(d/i),u}},9567:(e,t,o)=>{"use strict";o.d(t,{F:()=>s,_:()=>i});var a=o(79244),n=o(50572);const i=(e,t)=>{const o=null==e?void 0:e.showLabel,a=null==e?void 0:e.labelGrowth,i=null==e?void 0:e.avatar.size,s=null==e?void 0:e.avatar.shape;return(0,n.Q$)(i,o,s)+t+a},s=e=>{var t,o;if(!e)return;return(null===(o=null===(t=(0,a.getAppStore)().getState().widgetsRuntimeInfo)||void 0===t?void 0:t[e])||void 0===o?void 0:o.isClassLoaded)?Promise.resolve(a.WidgetManager.getInstance().getWidgetClass(e)):a.WidgetManager.getInstance().loadWidgetClass(e)}},53716:(e,t,o)=>{"use strict";o.d(t,{Ht:()=>l,Ku:()=>d,Sr:()=>c,cq:()=>v,xu:()=>p});var a=o(79244),n=o(14321),i=o(28482),s=o(17087),r=o(13166);const l=e=>document.querySelector(`.widget-controller .avatar-card[data-widgetid='${e}']`),c=e=>document.querySelector(`[data-widgetid='${e}'] .popup-more-card`),d=e=>{const{isRuntime:t,isResizing:i}=e,s=a.hooks.useTranslation(r.A),l=o(t?26189:54044);return a.React.useMemo((()=>{const e=(0,a.jsx)("div",{className:"resize-handle d-flex p-1"},(0,a.jsx)(n.Icon,{icon:l,size:t?10:16,currentColor:!1}));return i||t?e:(0,a.jsx)(n.Tooltip,{title:s("resizerTooltip")},e)}),[i,t,l,s])},u=(e,t)=>{const o=(0,i.lL)(t,s.bC),n=Object.keys(o.content).find((t=>o.content[t].widgetId===e));(0,a.getAppStore)().dispatch(a.appActions.selectionChanged({layoutId:o.id,layoutItemId:n}))},p=(e,t,o,n,i=!1)=>{n?((0,a.getAppStore)().dispatch(a.appActions.closeWidgets(o)),o.includes(t)||((0,a.getAppStore)().dispatch(a.appActions.openWidget(t)),i&&u(t,e))):o.includes(t)?(0,a.getAppStore)().dispatch(a.appActions.closeWidget(t)):((0,a.getAppStore)().dispatch(a.appActions.openWidget(t)),i&&u(t,e))},v=e=>{const[t,o]=a.React.useState(!0);return a.React.useEffect((()=>{let t;return e?(t=new IntersectionObserver((e=>{const t=e[0];if(!t)return;const a=t.target.checkVisibility();o(a)})),t.observe(e)):o(!1),()=>{t&&t.disconnect()}}),[e]),t}},20863:(e,t,o)=>{"use strict";o.d(t,{A:()=>I});var a=o(79244),n=o(17087),i=o(28482),s=o(14321),r=o(12279),l=o(41496),c=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o};function d(e){const{widgetId:t,canCrossLayoutBoundary:o,className:n,layoutId:i,layoutItemId:d}=e,u=c(e,["widgetId","canCrossLayoutBoundary","className","layoutId","layoutItemId"]),p=a.hooks.useCancelablePromiseMaker(),[v,g]=a.React.useState(null),[h,m]=a.React.useState(""),[f,w]=a.React.useState("");a.React.useEffect((()=>{g(null),m("");p((0,r.FZ)(t)).then((e=>{g(e),m(t)}),(e=>{var t;w(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)}))}),[p,t]);const b=a.React.useCallback((()=>{var e,o;if(f)return;if(window.jimuConfig.isBuilder)return;(null===(o=null===(e=(0,a.getAppStore)().getState().widgetsRuntimeInfo)||void 0===e?void 0:e[t])||void 0===o?void 0:o.state)===a.WidgetState.Active||(0,a.getAppStore)().dispatch(a.appActions.activateWidget(t))}),[f,t]),y=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Design)),x=a.ReactRedux.useSelector((e=>{var o,a,n;const i=e.appConfig.widgets[t];return null!==(n=null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.supportInlineEditing)&&void 0!==n&&n})),S=a.ReactRedux.useSelector((e=>{const o=e.widgetsRuntimeInfo[t];return x&&(null==o?void 0:o.isInlineEditing)})),R=a.ReactRedux.useSelector((e=>{var o;const n=e.appConfig.widgets[t];return(null===(o=null==n?void 0:n.manifest)||void 0===o?void 0:o.widgetType)!==a.WidgetType.Layout})),I=a.ReactRedux.useSelector((e=>{var o,a,n;const i=e.appConfig.widgets[t];return(null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.hasEmbeddedLayout)&&Object.keys(null!==(n=i.layouts)&&void 0!==n?n:{}).length>0})),C=y&&!S&&R&&!I,{viewOnly:k}=a.React.useContext(l.PageContext),M=a.React.useCallback((e=>{const{browserSizeMode:o,appConfig:{mainSizeMode:n}}=(0,a.getAppStore)().getState();!x||k||window.parent.isExpressBuilder&&o!==n||(e.stopPropagation(),(0,a.getAppStore)().dispatch(a.appActions.setWidgetIsInlineEditingState(t,!0)))}),[x,k,t]),j=(0,a.classNames)("widget-renderer w-100 h-100",n),z=(e=>a.React.useMemo((()=>a.css`
      overflow: ${e?"visible":"hidden"};
      position: relative;
      .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
      }
      .widget-mask {
        position: absolute;
        background: transparent;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 1;
      }
  `),[e]))(o);return(0,a.jsx)("div",Object.assign({css:z,className:j,onMouseDownCapture:b,onDoubleClickCapture:M,"data-widgetid":h},u),(0,a.jsx)("div",{className:"widget-content p-1"},f,!f&&v&&(0,a.jsx)(a.ErrorBoundary,null,(0,a.jsx)(v,{widgetId:h,layoutId:i,layoutItemId:d})),!f&&!v&&(0,a.jsx)(s.Loading,null)),C&&(0,a.jsx)("div",{className:"widget-mask"}))}const u=(0,a.Immutable)({}),p=e=>{var t,o,n;const{rootVisible:r,containerMapId:l,onClose:c,widgets:p=u,layout:v,onClick:g}=e,h=null!==(t=Object.keys(p).find((e=>(0,i.V5)(p[e]))))&&void 0!==t?t:"",m=null===(n=null===(o=(0,a.getAppStore)().getState().appConfig.widgets)||void 0===o?void 0:o[h])||void 0===n?void 0:n.label;return a.React.createElement(s.MobilePanel,{className:(0,a.classNames)("mobile-widget-launcher",{"d-none":!h}),mapWidgetId:l,title:m,open:!!h&&r,keepMount:!0,onClick:e=>{g(e,h)},onClose:e=>{c(e,h)}},Object.entries(p).map((([e,t])=>{if(!(void 0!==t.state))return null;const o=(0,i.V5)(t),n=null==v?void 0:v.id,s=(0,i.pp)(v,e);return a.React.createElement(d,{key:e,widgetId:e,layoutId:n,layoutItemId:s,onClick:t=>{g(t,e)},className:(0,a.classNames)({"d-none":!o})})})))};var v=o(70687),g=o(53716);const h=()=>document.body.getBoundingClientRect(),m=(e,t,o,n,i)=>{const[s,r]=a.React.useState((()=>h())),[l,c]=a.React.useState([o]),d=a.React.useRef(0);a.React.useEffect((()=>{const e=()=>{const e=h();r(e)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const u=(e,t)=>e.right>=t.right||e.left<=t.left,p=(e,t)=>e.bottom>=t.bottom||e.top<=t.top,g=a.hooks.useEventCallback((t=>{if(d.current++,d.current>7)return console.warn(`Number of cycles: ${d.current}.You may have opened too many panels, and now there is not enough space for them to be placed without overstepping and blocking`),t;const a=((e,t)=>!(!e||!t)&&(u(e,t)||p(e,t)))(t,s);if(!a)return t;const{width:n,height:r}=t;let{left:l,top:c,right:h,bottom:m}=t;if(a){const t=u({left:l,top:c,right:h,bottom:m,width:n,height:r},s),a=p({left:l,top:c,right:h,bottom:m,width:n,height:r},s);t&&(l=e===v.t2.SideBySide?o.x:s.right-n),a||e!==v.t2.SideBySide||(c+=i),h=l+n,m=c+r}return g({left:l,top:c,right:h,bottom:m,width:n,height:r})}));return a.React.useEffect((()=>{const a=[];let s={width:0,height:0};Object.keys(t).forEach(((r,l)=>{const c=t[r],u=0!==l?a[l-1]:o;let{x:p,y:h}=u;if(e===v.t2.SideBySide){const{width:e}=s;p+=n>0?e:-e,p+=0!==l?n:0}else e===v.t2.Stack&&(p+=0!==l?n:0,h+=0!==l?i:0);const m={left:p,top:h,right:p+c.width,bottom:h+c.height,width:c.width,height:c.height},{left:f,top:w}=g(m);d.current>7?(p=u.x,h=u.y):(p=f,h=w),d.current=0,a.push({x:p,y:h}),s=c})),c(a)}),[e,o,n,i,s.width,s.height,g,t]),l},f=(0,a.Immutable)({}),w=e=>{const{rootVisible:t,mode:o,start:r,spaceX:l,spaceY:c,sizes:u,widgets:p=f,layout:v,autoFocus:h,onResizeStop:w,onClick:b,onClose:y}=e,x=a.ReactRedux.useSelector((e=>e.appConfig.widgets)),[S,R]=a.React.useState(u),I=a.React.useMemo((()=>((e,t)=>{let o=(0,a.Immutable)({});return Object.keys(e).forEach((e=>{o=o.set(e,t[e]||n.D7)})),o})(p,S)),[S,p]),[C,k]=a.React.useState(!1),M=m(o,I,r,l,c),j=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Run)),z=(0,a.jsx)(g.Ku,{isRuntime:j,isResizing:C});return(0,a.jsx)(a.React.Fragment,null,Object.entries(p).map((([e,o],n)=>{var r;if(!(void 0!==o.state))return null;const l=(0,i.V5)(o),c=M[n];if(!c)return null;const u=I[e],p=null===(r=null==x?void 0:x[e])||void 0===r?void 0:r.label,g=null==v?void 0:v.id,m=(0,i.pp)(v,e);return(0,a.jsx)(s.FloatingPanel,{key:e,style:{maxWidth:"100vw",position:"fixed"},headerTitle:p,defaultPosition:c,defaultSize:u,className:(0,a.classNames)({"d-none":!l||!t},"multiple-widget-launcher"),showHeaderClose:!0,showHeaderCollapse:!0,activateOnlyForHeader:!0,autoFocus:l&&h,dragBounds:"body",resizeHandle:z,onClick:t=>{b(t,e)},onResize:t=>{((e,t)=>{R(S.set(e,t)),k(!0)})(e,t)},onResizeStop:t=>{((e,t)=>{null==w||w(e,t),k(!1)})(e,t)},onHeaderClose:t=>{y(t,e)}},(0,a.jsx)(d,{widgetId:e,layoutId:g,layoutItemId:m}))})))},b=(0,a.Immutable)({}),y=e=>{const{widgets:t=b,root:o,placement:r,sizes:l,layout:c,autoFocus:u,onResizeStop:p,onClick:v,onClose:h}=e,m=a.ReactRedux.useSelector((e=>e.appConfig.widgets)),[f,w]=a.React.useState(l),[y,x]=a.React.useState(!1),S=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode===a.AppMode.Run)),R=(0,a.jsx)(g.Ku,{isRuntime:S,isResizing:y});return(0,a.jsx)(a.React.Fragment,null,Object.entries(t).map((([e,t])=>{var l,b;if(!(void 0!==t.state))return null;const y=t.state!==a.WidgetState.Closed,S=null!==(l=f[e])&&void 0!==l?l:n.D7,I=null===(b=null==m?void 0:m[e])||void 0===b?void 0:b.label;let C=(0,g.Ht)(e);C&&C.offsetParent||(C=(null==o?void 0:o.querySelector(".popup-more-card"))||(null==o?void 0:o.querySelector(".avatar-card")));const k=null==c?void 0:c.id,M=(0,i.pp)(c,e);return(0,a.jsx)(s.FloatingPanel,{key:e,style:{maxWidth:"100vw"},flipOptions:n.yH,shiftOptions:n.ZT,offsetOptions:n.XJ,className:(0,a.classNames)({"d-none":!y},"single-widget-launcher"),headerTitle:I,activateOnlyForHeader:!0,minSize:n.kg,dragBounds:"body",defaultSize:S,resizeHandle:R,onResize:t=>{var o,a;o=e,a=t,w((e=>e.set(o,a))),x(!0)},onResizeStop:t=>{var o,a;o=e,a=t,null==p||p(o,a),x(!1)},onHeaderClose:t=>{h(t,e)},showHeaderCollapse:!0,open:!0,autoFocus:y&&u,reference:C,onClick:t=>{v(t,e)},placement:r},(0,a.jsx)(d,{widgetId:e,layoutId:k,layoutItemId:M}))})))},x=(0,a.Immutable)({}),S=e=>{const{widgets:t=x,root:o,placement:r,layout:l,onClick:c,onClose:u}=e;return(0,a.jsx)(a.React.Fragment,null,Object.entries(t).map((([e,t])=>{if(!(void 0!==t.state))return null;const p=t.state!==a.WidgetState.Closed;let v=(0,g.Ht)(e);v&&v.offsetParent||(v=(null==o?void 0:o.querySelector(".popup-more-card"))||(null==o?void 0:o.querySelector(".avatar-card")));const h=null==l?void 0:l.id,m=(0,i.pp)(l,e);return(0,a.jsx)(s.Popper,{key:e,autoUpdate:!0,css:a.css`
    border-radius: 0;
    max-width: 100vw;
    .widget-content {
      padding: 0 !important;
    }
  `,flipOptions:n.yH,shiftOptions:n.ZT,offsetOptions:n.XJ,className:(0,a.classNames)({"d-none":!p},"off-panel-widget-launcher"),open:!0,autoFocus:p,reference:v,toggle:(t,o)=>{"escape"===o&&u(t,e)},onClick:t=>{c(t,e)},placement:r},(0,a.jsx)(d,{widgetId:e,layoutId:h,layoutItemId:m}))})))},R=e=>a.ReactRedux.useSelector((t=>{var o,a,n,i;const s=t.appConfig,r=t.browserSizeMode,c=s.widgets[e].parent;let d=null!==(o=c[r])&&void 0!==o?o:[];if(0===d.length){d=null!==(a=c[s.mainSizeMode])&&void 0!==a?a:[]}const u=null===(n=d[0])||void 0===n?void 0:n.layoutId,p=l.searchUtils.getWidgetIdThatUseTheLayoutId(s,u),v=s.widgets[p];return"arcgis-map"===(null===(i=null==v?void 0:v.manifest)||void 0===i?void 0:i.name)?v.id:""}));function I(e){var t,o,s,r,c,d,u,v,h,m;const{id:f,config:b,version:x,rootRef:I,autoFocus:C=!0,onResizeStop:k}=e,{viewOnly:M}=a.React.useContext(l.PageContext),j=a.hooks.useCheckSmallBrowserSizeMode(),z=null===(t=b.behavior)||void 0===t?void 0:t.onlyOpenOne,A=null!==(s=null===(o=null==b?void 0:b.behavior)||void 0===o?void 0:o.arrangement)&&void 0!==s?s:"floating",$=z&&"floating"===A,O=!z&&"floating"===A,L=(0,i.af)(f,n.bC),E=a.React.useCallback(((e,t)=>{var o;e.stopPropagation();const n=new CustomEvent("click");n.composedPath=()=>e.nativeEvent.composedPath(),window.dispatchEvent(n);const s=(0,a.getAppStore)().getState(),r=s.appRuntimeInfo.appMode===a.AppMode.Express,l=s.browserSizeMode!==s.appConfig.mainSizeMode;if(M||r&&l)return;const c=null==L?void 0:L.id,d=(0,i.pp)(L,t),u=null===(o=(0,a.getAppStore)().getState().appRuntimeInfo)||void 0===o?void 0:o.selection;u&&u.layoutId===c&&u.layoutItemId===d||(0,a.getAppStore)().dispatch(a.appActions.selectionChanged({layoutId:c,layoutItemId:d}))}),[L,M]),P=a.React.useCallback(((e,t)=>{if(!t)return;null==e||e.stopPropagation(),null==e||e.preventDefault(),(0,a.getAppStore)().dispatch(a.appActions.closeWidget(t));const o=(0,g.Ht)(t)||(0,g.Sr)(f);(0,a.focusElementInKeyboardMode)(o),(0,a.getAppStore)().dispatch(a.appActions.selectionChanged(null))}),[f]),N=R(f),T=(null===(r=b.behavior)||void 0===r?void 0:r.vertical)?"right-start":"bottom-start",B=null===(c=b.behavior)||void 0===c?void 0:c.displayType,W=null===(v=null===(u=null===(d=(0,a.getAppStore)())||void 0===d?void 0:d.getState())||void 0===u?void 0:u.appContext)||void 0===v?void 0:v.isRTL,F=a.React.useMemo((()=>W?Object.assign(Object.assign({},n.up),{x:document.body.clientWidth-n.D7.width-n.up.x}):n.up),[W]),H=a.React.useMemo((()=>W?Object.assign(Object.assign({},n.aP),{x:-n.aP.x}):n.aP),[W]),D=null===(h=b.behavior)||void 0===h?void 0:h.size,V=(0,i.PG)(f,n.bC),G=a.hooks.useLatest(V),U=Object.keys(V),_=a.ReactRedux.useSelector((e=>{var t,o;const a=e.appRuntimeInfo.selection;return null===(o=null===(t=e.appConfig.layouts[null==a?void 0:a.layoutId])||void 0===t?void 0:t.content)||void 0===o?void 0:o[null==a?void 0:a.layoutItemId].widgetId}));a.hooks.useUpdateEffect((()=>{const e=Object.keys(G.current),t=e.filter((e=>(0,i.V5)(G.current[e])));e.includes(_)&&!t.includes(_)&&(0,g.xu)(f,_,t,b.behavior.onlyOpenOne)}),[b.behavior.onlyOpenOne,f,_,G]);const X=a.React.useCallback((()=>{const e=G.current,t=Object.keys(e).filter((t=>(0,i.V5)(e[t])));(0,a.getAppStore)().dispatch(a.appActions.closeWidgets(t))}),[G]);a.hooks.useUpdateEffect((()=>{(0,a.getAppStore)().dispatch(a.appActions.resetWidgetsState(U))}),[x]);const q=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.currentPageId));a.hooks.useUpdateEffect((()=>{X()}),[q]);const K=(0,g.cq)(I.current),Y=a.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),Z=null===(m=b.behavior)||void 0===m?void 0:m.openStarts;a.React.useEffect((()=>{K?!Y&&(null==Z?void 0:Z.length)>0&&(0,a.getAppStore)().dispatch(a.appActions.openWidgets(Z)):X()}),[X,Y,Z,K]);const J=a.ReactRedux.useSelector((e=>{const t=e.appConfig.widgets;return U.filter((e=>t[e].offPanel)).join(",")}),a.ReactRedux.shallowEqual),Q=U.filter((e=>!J.split(",").includes(e))).join(","),ee=a.React.useMemo((()=>V.without.apply(V,Q.split(","))),[Q,V]),te=a.React.useMemo((()=>V.without.apply(V,J.split(","))),[J,V]);return(0,a.jsx)(a.React.Fragment,null,j&&(0,a.jsx)(p,{containerMapId:N,layout:L,widgets:V,rootVisible:K,onClick:E,onClose:P}),!j&&$&&(0,a.jsx)(y,{sizes:D,root:I.current,placement:T,widgets:te,layout:L,autoFocus:C,onResizeStop:k,onClick:E,onClose:P}),!j&&O&&(0,a.jsx)(w,{sizes:D,rootVisible:K,mode:B,start:F,spaceX:H.x,spaceY:H.y,widgets:te,layout:L,autoFocus:C,onResizeStop:k,onClick:E,onClose:P}),!j&&(0,a.jsx)(S,{root:I.current,placement:T,widgets:ee,layout:L,onClick:E,onClose:P}))}},13166:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});const a={_widgetLabel:"Widget Controller",_action_openWidget_label:"Open widget",resizerTooltip:"Customize the window size by dragging and dropping.",moreWidgets:"More widgets"}},23740:(e,t,o)=>{o.p=window.jimuConfig.baseUrl},54657:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__set_webpack_public_path__:()=>S,default:()=>x,useAdvancedStyle:()=>b});var a=o(79244),n=o(9567),i=o(70687),s=o(42667),r=o(12279),l=o(17087),c=o(28482),d=o(20863),u=o(53716),p=o(4843);const v=e=>{var t,o,v,g,h,m,f,w;const{id:b,config:y,version:x,autoSize:S}=e,R=null===(t=y.behavior)||void 0===t?void 0:t.onlyOpenOne,I=null===(o=y.behavior)||void 0===o?void 0:o.vertical,C=y.behavior.overflownStyle||i.AH.Arrows,k=null===(v=null==y?void 0:y.appearance)||void 0===v?void 0:v.card,M=(0,n._)(k,null===(g=null==y?void 0:y.appearance)||void 0===g?void 0:g.space),j=a.hooks.useCheckSmallBrowserSizeMode(),z=a.React.useRef(null),A=(0,c.PG)(b,l.bC),$=Object.keys(A),O=$.filter((e=>(0,c.V5)(A[e]))),L=a.React.useCallback((e=>{var t;const o=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.widgetid;if(!o)return;const a=!!j||R;O.includes(o)||e.stopPropagation(),(0,u.xu)(b,o,O,a,!0)}),[j,R,O,b]),[E,P]=a.React.useState(!1),N=a.React.useCallback(((e,t,o)=>{const n=O.includes(e);return a.React.createElement(r.GD,{key:e,className:`${t} layout-item`,widgetid:e,markerEnabled:!1,active:n,showLabel:k.showLabel,showIndicator:k.showIndicator,showTooltip:k.showTooltip,labelGrowth:k.labelGrowth,avatar:k.avatar,variant:k.variant,onClick:t=>{P(!0),(0,a.getAppStore)().dispatch(a.appActions.widgetStatePropChange(e,"autoFocus",!0)),null==o||o(t),L(t)}})}),[k,L,O]);return a.React.createElement("div",{className:"controller-runtime w-100 h-100"},a.React.createElement(d.A,{id:b,config:y,version:x,rootRef:z,autoFocus:E}),C===i.AH.PopupWindow&&a.React.createElement(p.z,{ref:z,className:"runtime--popup-list",vertical:I,itemLength:M,space:null===(h=y.appearance)||void 0===h?void 0:h.space,alignment:null===(m=y.behavior)||void 0===m?void 0:m.alignment,autoSize:S,lists:$,createItem:N,itemStyle:k,advanced:y.appearance.advanced}),C===i.AH.Arrows&&a.React.createElement(s.Q,{ref:z,controllerId:b,className:"runtime--scroll-list",vertical:I,itemLength:M,space:null===(f=y.appearance)||void 0===f?void 0:f.space,alignment:null===(w=y.behavior)||void 0===w?void 0:w.alignment,autoSize:S,lists:$,createItem:N}))};var g=o(14321);const h={behavior:{onlyOpenOne:!0,openStarts:[],displayType:"STACK",vertical:!1,size:{}},appearance:{space:0,advanced:!1,card:{showLabel:!1,labelGrowth:10,showTooltip:!0,showIndicator:!1,avatar:{type:"primary",size:"default",shape:"circle"}}}};class m extends a.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"Version manager for release 1.0.0",upgrader:e=>{if(!e)return h;if(e.behavior&&e.appearance)return e;{let o=e;return e.behavior||(o=o.setIn(["behavior","openStarts"],[]),o=o.setIn(["behavior","onlyOpenOne"],e.onlyOpenOne),o=o.setIn(["behavior","displayType"],e.displayType),o=o.setIn(["behavior","vertical"],e.vertical),o=o.setIn(["behavior","size"],e.size),o=o.without(["onlyOpenOne","displayType","size"])),e.appearance||(o=o.setIn(["appearance","advanced"],!1),e.vertical?o=o.setIn(["appearance","space"],e.space):(o=o.setIn(["appearance","space"],0),o=o.setIn(["appearance","card","labelGrowth"],e.space)),o=o.setIn(["appearance","card","showLabel"],e.showLabel),o=o.setIn(["appearance","card","avatar","size"],"SMALL"===(t=e.iconSize)?"sm":"MEDIUM"===t?"default":"LARGE"===t?"lg":t),o=o.setIn(["appearance","card","avatar","shape"],e.iconStyle),o=o.setIn(["appearance","card","avatar","type"],"primary"),o=o.without(["space","showLabel","iconSize","iconStyle","vertical"])),o}var t}},{version:"1.1.0",description:"Version manager for release 1.1.0",upgrader:e=>{var t,o;if(!e)return h;let a=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card;const n=null==a?void 0:a.variants,i=null===(o=null==a?void 0:a.avatar)||void 0===o?void 0:o.type;let s=e;if(n){const e=((e,t="primary")=>null==e?void 0:e[t])(n,i);a=null==a?void 0:a.set("variant",e).without("variants"),s=s.setIn(["appearance","card"],a)}return s}},{version:"1.6.0",description:"Version manager for release 1.6.0",upgrader:e=>{var t;if(!e)return h;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showTooltip",!0),a=a.setIn(["appearance","card"],o)),a}},{version:"1.14.0",description:"Version manager for release 1.14.0",upgrader:e=>{var t;if(!e)return h;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showIndicator",!1),a=a.setIn(["appearance","card"],o)),a}}]}}const f=new m,w=(e,t)=>{const{bg:o,iconColor:n,boxShadow:i,color:s,italic:r,bold:l,underline:c,strike:d}=e||{},u=g.styleUtils.toCSSTextUnderLine({underline:c,strike:d});let p=a.css``;return"active"===t&&(p=a.css`::after {
      background-color: ${o};
    }`),a.css`
    >.avatar {
      >.avatar-button {
        ${o?a.css`background-color: ${o}; border-color: ${o};`:""}
        ${n?a.css`color: ${n};`:""}
        ${(null==i?void 0:i.color)?a.css`box-shadow: ${g.styleUtils.toCSSBoxshadow(i)};`:""}
      }
      ${p}
    }
    >.avatar-label {
      ${s?a.css`color: ${s};`:""}
      ${r?a.css`font-style: italic;`:""}
      ${l?a.css`font-weight: bold;`:""}
      ${c||d?a.css`text-decoration: ${u};`:""}
    }
  `},b=(e,t)=>{const o=null==e?void 0:e.default,n=null==e?void 0:e.active,i=o&&n?o.merge(n):n,s=null==e?void 0:e.hover,r=o&&s?o.merge(s):s;return a.React.useMemo((()=>{const e=t&&o?w(o,"regular"):"",n=w({bg:"var(--sys-color-primary-dark)"},"active"),s=t&&i?w(i,"active"):"",l=t&&r?w(r,"hover"):"";return a.css`
      .avatar-card {
        ${e}
        ${a.css`&.active:not(.disabled) { ${n} }`}
        ${s?a.css`&.active:not(.disabled) { ${s} }`:""}
        ${l?a.css`&:hover { ${l} }`:""}
      }
    `}),[t,o,i,r])},y=e=>{var t,o,n,i;const{builderSupportModules:s,id:r,config:c,onInitResizeHandler:d,onInitDragHandler:u,autoWidth:p,autoHeight:g}=e,h=null===(t=c.behavior)||void 0===t?void 0:t.onlyOpenOne,m=null===(o=c.behavior)||void 0===o?void 0:o.displayType,f=null===(n=null==c?void 0:c.behavior)||void 0===n?void 0:n.vertical,w=null==c?void 0:c.appearance.advanced,y=null===(i=null==c?void 0:c.appearance)||void 0===i?void 0:i.card.variant,x=f?g:p,S=a.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),R=a.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode));a.React.useEffect((()=>{null==d||d(null,null,(()=>{M((e=>e+1))}))}),[d]),a.React.useEffect((()=>{null==u||u(null,null,(()=>{M((e=>e+1))}))}),[u]);const I=S&&R!==a.AppMode.Run,C=I&&s.widgetModules.Builder,[k,M]=a.React.useState(0);a.hooks.useUpdateEffect((()=>{M((e=>e+1))}),[h,m,R]);const j=((e,t,o)=>{const n=e?0:l.iI.sm,i=e?0:l.iI.sm,s=t?"5px":0,r=o?"5px":0;return a.React.useMemo((()=>a.css`
      overflow: visible;
      white-space: nowrap;
      .controller-container {
        width: 100%;
        height: 100%;
        padding: ${r} ${s};
        min-width:  ${n}px;
        min-height: ${i}px;
      }
    `),[s,r,n,i])})(x,p,g),z=b(y,w);return(0,a.jsx)("div",{className:"widget-controller jimu-widget rw-controller",css:[j,z]},(0,a.jsx)("div",{className:"controller-container"},!I&&(0,a.jsx)(v,{id:r,version:k,config:c,autoSize:x}),I&&C&&(0,a.jsx)(C,{id:r,version:k,config:c,autoSize:x})))};y.versionManager=f;const x=y;function S(e){o.p=e}},79244:e=>{"use strict";e.exports=o},41496:e=>{"use strict";e.exports=n},1888:e=>{"use strict";e.exports=i},14321:e=>{"use strict";e.exports=a}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="",s(23740),s(54657)})())}}}));