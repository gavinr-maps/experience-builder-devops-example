System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-theme"],function(e,t){var o={},a={},n={},i={},s={};return{setters:[function(e){o.jsx=e.jsx,o.jsxs=e.jsxs},function(e){a.AppMode=e.AppMode,a.BaseVersionManager=e.BaseVersionManager,a.ErrorBoundary=e.ErrorBoundary,a.ExtensionManager=e.ExtensionManager,a.FixedPosition=e.FixedPosition,a.Immutable=e.Immutable,a.React=e.React,a.ReactRedux=e.ReactRedux,a.WidgetManager=e.WidgetManager,a.WidgetState=e.WidgetState,a.WidgetType=e.WidgetType,a.appActions=e.appActions,a.classNames=e.classNames,a.css=e.css,a.focusElementInKeyboardMode=e.focusElementInKeyboardMode,a.getAppStore=e.getAppStore,a.hooks=e.hooks,a.lodash=e.lodash,a.polished=e.polished},function(e){n.Button=e.Button,n.FloatingPanel=e.FloatingPanel,n.Icon=e.Icon,n.Loading=e.Loading,n.MobilePanel=e.MobilePanel,n.Modal=e.Modal,n.ModalBody=e.ModalBody,n.NavButtonGroup=e.NavButtonGroup,n.Pagination=e.Pagination,n.Popper=e.Popper,n.Tooltip=e.Tooltip,n.defaultMessages=e.defaultMessages,n.hooks=e.hooks,n.styleUtils=e.styleUtils},function(e){i.PageContext=e.PageContext,i.searchUtils=e.searchUtils},function(e){s.styled=e.styled}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=s},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},4843:(e,t,o)=>{"use strict";o.d(t,{z:()=>m});var a=o(67386),n=o(79244),i=o(19640),s=o(70687),r=o(14321),l=o(17087);const d=(e,t,o)=>n.css`
    position: ${e===t?"relative":"absolute"};
    left: ${(e-t)*(6*o+40)}px;
    transition: all ease 0.3s;
  `,c=e=>{const{lists:t=[],createItem:o,itemLength:i,isOpen:s,reference:c,advancedStyle:u,onClose:p,onMouseDown:v}=e,g=n.hooks.useCheckSmallBrowserSizeMode(),h=3*(g?4:5),[m,f]=n.React.useState(1),w=Math.ceil(t.length/h),b=new Array(w).fill(1).map((e,t)=>t+1),x=e=>{f(e)},y=n.hooks.useLatest(m);n.React.useEffect(()=>{y.current>w&&0!==w&&f(w)},[y,w]);const S=((e,t,o)=>{const a=o?4:5,i=o?n.css`top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important;`:"";return n.css`
    ${i}
    &.modal-dialog {
      width: fit-content;
      margin: 0;
      .modal-content {
        .modal-body {
          padding: 0;
        }
      }
    }
    .popup-more {
      padding: var(--sys-spacing-3);
      display: flex;
      position: relative;
      overflow: hidden;
      .popup-page {
        display: grid;
        max-width: ${e*a}px;
        grid-template-columns: repeat(${t>1||o?a:"auto-fit"}, ${e}px);
        grid-template-rows: repeat(${t>1||o?3:"auto-fit"}, 1fr);
        gap: var(--sys-spacing-2) 0;
        justify-content: center;
      }
    }
    .popup-pagination {
      padding: 0 var(--sys-spacing-3) var(--sys-spacing-2) var(--sys-spacing-3);
      text-align: center;
      .jimu-pagination {
        justify-content: center;
        .jimu-page-number {
          display: none;
        }
      }
      .page-indicator {
        width: 6px;
        height: 6px;
        padding: 0;
        border-radius: 3px;
        border: none;
        background-color: var(--sys-color-action-disabled);
        transition: width ease 0.3s;
        &+.page-indicator {
          margin-left: 8px;
        }
        &.page-current {
          background-color: var(--sys-color-action-selected);
        }
      }
    }
  `})(i,b.length,g),R=n.React.useRef(0),I=n.React.useRef(0),C=(0,a.jsxs)(n.React.Fragment,{children:[(0,a.jsx)("div",{className:"popup-more",css:u,onTouchStart:e=>{1===e.touches.length&&(R.current=e.touches[0].clientX)},onTouchMove:e=>{1===e.touches.length&&(I.current=e.touches[0].clientX)},onTouchEnd:e=>{const t=I.current-R.current;t<-100&&f(e=>e<w?e+1:e),t>100&&f(e=>e>1?e-1:e),R.current=0,I.current=0},onMouseDown:v,children:b.map(e=>{const n=t.slice(h*(e-1),h*e);return(0,a.jsx)("div",{className:"popup-page",css:d(e,m,i),onFocus:()=>{f(e)},children:n.map(e=>o(e,"popup-list-item",p))},e)})}),b.length>1&&(0,a.jsxs)("div",{className:"popup-pagination",children:[g&&b.map(e=>(0,a.jsx)(r.Button,{tabIndex:-1,"aria-hidden":!0,className:(0,n.classNames)("page-indicator",{"page-current":m===e}),onClick:()=>{x(e)}},e)),!g&&(0,a.jsx)(r.Pagination,{variant:"text",current:m,simple:!0,size:"sm",totalPage:b.length,onChangePage:x})]})]});return g?(0,a.jsx)(r.Modal,{className:"popup-more-modal",css:S,isOpen:s,toggle:p,children:(0,a.jsx)(r.ModalBody,{children:C})}):(0,a.jsx)(r.Popper,{className:"popup-more-popper",overflowHidden:!0,css:S,open:s,reference:c,autoFocus:!0,trapFocus:!0,flipOptions:l.yH,shiftOptions:l.ZT,offsetOptions:l.XJ,toggle:p,children:C})};var u=o(50572),p=o(13166),v=o(4651),g=o.n(v),h=o(54657);const m=n.React.forwardRef((e,t)=>{const{vertical:o,alignment:r,space:l,itemStyle:d,lists:v=[],createItem:m,itemLength:f,autoSize:w,advanced:b,className:x,onMouseDown:y}=e,S=((e,t,o,a=s.aL.Center)=>n.css`
    &.root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`}
      max-height: 100%;
      max-width: 100%;
      display: flex;
      justify-content: ${"center"===a?"center":"flex-"+a};
      flex-wrap: nowrap;
      align-items: center;
      .popup-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
  `)(o,l,f,r),[R,I]=n.hooks.useForwardRef(t),C=(0,i.s)({rootRef:R,lists:v,itemLength:f,autoSize:w,vertical:o,space:l});let M=v,k=[],j=!1;C<v.length&&(M=v.slice(0,C-1),k=v.slice(C-1),j=!0);const[z,$]=n.React.useState(!1),A=n.React.useRef(null),O=n.React.useCallback(e=>{$(t=>{const o="boolean"==typeof e?e:!t;return o||(0,n.focusElementInKeyboardMode)(A.current),o})},[]);n.React.useEffect(()=>{0===k.length&&$(!1)},[k.length]);const L=n.hooks.useTranslation(p.A),P=(0,h.useAdvancedStyle)(d.variant,b);return(0,a.jsxs)("div",{className:(0,n.classNames)("root popup-list-root",x),css:S,ref:I,onMouseDown:y,children:[M.map(e=>m(e,(0,n.classNames)("popup-list-item"))),j&&(0,a.jsx)(u.I,{ref:A,className:"popup-more-card popup-list-item",label:L("moreWidgets"),icon:g(),showLabel:d.showLabel,showIndicator:d.showIndicator,showTooltip:d.showTooltip,labelGrowth:d.labelGrowth,avatar:d.avatar,active:z,onClick:()=>{O()}}),(0,a.jsx)(c,{lists:k,createItem:m,isOpen:z,itemLength:f,reference:A.current,advancedStyle:P,onClose:()=>{O(!1)},onMouseDown:y})]})})},9567:(e,t,o)=>{"use strict";o.d(t,{FZ:()=>u,GF:()=>s,Jt:()=>r,Q$:()=>d,YC:()=>i,_C:()=>c,jN:()=>l});var a=o(79244),n=o(17087);const i=(e,t)=>"custom"!==e?e||"default":t<=n.ln.sm?"sm":t>n.ln.sm&&t<=n.ln.default?"default":t>n.ln.default?"lg":void 0,s=(e,t)=>"custom"===e?null!=t?t:n.ln.default:n.ln[e],r=(e,t)=>"custom"===e&&null!=t?t:n.UI,l=(e,t)=>{const o="circle"===t;return"sm"===e?o?3:5:"default"===e?o?2:6:"lg"===e?o?4:10:void 0},d=(e,t,o,a)=>{let i=t;o&&(i+=n.nx);return i+=2*l(e,a),i},c=(e,t)=>{var o,a,n,r,l;const c=null==e?void 0:e.showLabel,u=null==e?void 0:e.labelGrowth,p=i(null===(o=null==e?void 0:e.avatar)||void 0===o?void 0:o.size,null===(a=null==e?void 0:e.avatar)||void 0===a?void 0:a.buttonSize),v=s(null===(n=null==e?void 0:e.avatar)||void 0===n?void 0:n.size,null===(r=null==e?void 0:e.avatar)||void 0===r?void 0:r.buttonSize),g=null===(l=null==e?void 0:e.avatar)||void 0===l?void 0:l.shape;return d(p,v,c,g)+t+u},u=e=>{var t,o;if(!e)return;return(null===(o=null===(t=(0,a.getAppStore)().getState().widgetsRuntimeInfo)||void 0===t?void 0:t[e])||void 0===o?void 0:o.isClassLoaded)?Promise.resolve(a.WidgetManager.getInstance().getWidgetClass(e)):a.WidgetManager.getInstance().loadWidgetClass(e)}},12279:(e,t,o)=>{"use strict";o.d(t,{GD:()=>d,FZ:()=>c.FZ});var a=o(67386),n=o(79244),i=o(50572),s=o(14321),r=o(62838),l=o.n(r);const d=e=>{var t,o;const{markerEnabled:r,onMarkerClick:d,widgetid:c,showLabel:u,showIndicator:p,showTooltip:v,labelGrowth:g,avatar:h,onClick:m,active:f,editDraggable:w,className:b}=e,x=n.ReactRedux.useSelector(e=>{var t;return null===(t=e.appConfig.widgets)||void 0===t?void 0:t[c]}),y="string"==typeof x.icon?x.icon:x.icon.asMutable({deep:!0});return x?(0,a.jsx)(i.I,{widgetid:c,className:`widget-avatar-card ${b}`,showLabel:u,showIndicator:p,showTooltip:v,labelGrowth:g,avatar:h,label:x.label,icon:y,autoFlip:null===(o=null===(t=null==x?void 0:x.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.flipIcon,marker:r?l():"",active:f,editDraggable:w,onMarkerClick:d,onClick:m}):(0,a.jsx)(s.Loading,{})};o(42667);var c=o(9567),u=(o(49859),o(1888)),p=o(70687);(0,u.styled)("div",{shouldForwardProp:e=>!["vertical","space","alignment"].includes(e)})(e=>`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: ${e.alignment===p.aL.Start?"flex-start":e.alignment===p.aL.End?"flex-end":"center"};\n  flex-direction: ${e.vertical?"column":"row"};\n  .avatar-placeholder {\n    &:not(:first-of-type) {\n      margin-top: ${e.vertical?`${e.space}px`:"unset"};\n      margin-left: ${e.vertical?"unset":`${e.space}px`};\n    }\n  }\n`),(e=>{const t=[];for(;e>0;)t.push(e),e--})(3),(0,n.Immutable)({type:"secondary",size:"lg",shape:"circle"})},13166:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});const a={_widgetLabel:"Widget Controller",_action_openWidget_label:"Open widget",_action_toggleWidget_label:"Toggle widget",resizerTooltip:"Customize the window size by dragging and dropping.",moreWidgets:"More widgets"}},14321:e=>{"use strict";e.exports=n},17087:(e,t,o)=>{"use strict";o.d(t,{D7:()=>c,UI:()=>i,XJ:()=>h,ZT:()=>g,aP:()=>p,bC:()=>n,iI:()=>r,kg:()=>d,ln:()=>l,nx:()=>s,up:()=>u,yH:()=>v});var a=o(79244);const n="controller",i=16,s=21,r={sm:24,default:32,lg:48},l={sm:26,default:32,lg:40},d={width:150,height:120},c={width:360,height:360},u={x:70,y:70},p={x:30,y:30},v=(a.FixedPosition.TopRight,{flipAlignment:!1}),g={boundary:document.body,rootBoundary:"document"},h=16},19640:(e,t,o)=>{"use strict";o.d(t,{k:()=>s,s:()=>r});var a=o(79244);const n=(e,t=!1,o=0,n=o,i)=>{var s,r;const l=t?"clientHeight":"clientWidth",[d,c]=a.React.useState(null!==(r=null===(s=e.current)||void 0===s?void 0:s[l])&&void 0!==r?r:0),u=i,p=a.hooks.useLatest(()=>{const t=e.current[l]||0;c(t)}),v=a.React.useMemo(()=>a.lodash.debounce(()=>{p.current()},500,{leading:!0}),[p]);return a.React.useEffect(()=>{if(u)return;const t=e.current;t&&v();const o=new ResizeObserver(v);return o.observe(t),()=>{o.disconnect(),v.cancel()}},[e,v,u]),Math.max(d+o,n)},i=(e,t,o)=>{let a=e,n=t;return n-a>o?n=e+o:n-a<o&&(a=0,n=a+o),[a,n]},s=e=>{var t;const{rootRef:o,lists:s,itemLength:r,autoSize:l,vertical:d,space:c,autoScrollEnd:u}=e,p=null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0;let v,g=n(o,d,c,r,l);l?(v=p,g=r*v):v=Math.floor(g/r)>p?p:Math.floor(g/r);const h=g-r*v,[m,f]=a.React.useState(i(0,0,v)[0]),[w,b]=a.React.useState(i(0,0,v)[1]),x=a.hooks.useLatest(m),y=a.hooks.useLatest(w),[S,R]=a.React.useState(w-m>=p),I=0===m,C=w===p;a.React.useEffect(()=>{if(0===g)return;const[e,t]=i(y.current,x.current,v);f(e),b(t),R(t-e>=p)},[v,g,y,x,p]);const M=a.hooks.useEventCallback((e,t=!0)=>{const o=t?1:v;let a=0,n=0;e?(a=m-o,a<0?(a=0,n=a+v):n=w-o):(n=w+o,n>p?(n=p,a=n-v):a=m+o),f(a),b(n)}),k=a.hooks.usePrevious(p);return a.React.useEffect(()=>{if(u&&(p>0&&k>0)&&k<p){let e=0,t=0;t=p,e=t-v,e=Math.max(0,e),f(e),b(t)}},[u,p,v,k]),{start:m,end:w,disablePrevious:I,disableNext:C,hideArrow:S,scroll:M,remainLength:h}},r=e=>{var t;const{rootRef:o,lists:a,itemLength:i,autoSize:s,vertical:r,space:l}=e,d=null!==(t=null==a?void 0:a.length)&&void 0!==t?t:0,c=n(o,r,l,i,s);let u;return u=s||Math.floor(c/i)>d?d:Math.floor(c/i),u}},20863:(e,t,o)=>{"use strict";o.d(t,{A:()=>M});var a=o(67386),n=o(79244),i=o(17087),s=o(28482),r=o(14321),l=o(12279),d=o(41496),c=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o};function u(e){const{widgetId:t,canCrossLayoutBoundary:o,className:i,layoutId:u,layoutItemId:p,offPanel:v}=e,g=c(e,["widgetId","canCrossLayoutBoundary","className","layoutId","layoutItemId","offPanel"]),h=n.hooks.useCancelablePromiseMaker(),[m,f]=n.React.useState(null),[w,b]=n.React.useState(""),[x,y]=n.React.useState("");n.React.useEffect(()=>{f(null),b("");h((0,l.FZ)(t)).then(e=>{f(e),b(t)},e=>{var t;y(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)})},[h,t]);const S=n.React.useCallback(()=>{var e,o;if(x)return;if(window.jimuConfig.isBuilder)return;(null===(o=null===(e=(0,n.getAppStore)().getState().widgetsRuntimeInfo)||void 0===e?void 0:e[t])||void 0===o?void 0:o.state)===n.WidgetState.Active||(0,n.getAppStore)().dispatch(n.appActions.activateWidget(t))},[x,t]),R=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===n.AppMode.Design),I=n.ReactRedux.useSelector(e=>{var o,a,n;const i=e.appConfig.widgets[t];return null!==(n=null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.supportInlineEditing)&&void 0!==n&&n}),C=n.ReactRedux.useSelector(e=>{const o=e.widgetsRuntimeInfo[t];return I&&(null==o?void 0:o.isInlineEditing)}),M=n.ReactRedux.useSelector(e=>{var o;const a=e.appConfig.widgets[t];return(null===(o=null==a?void 0:a.manifest)||void 0===o?void 0:o.widgetType)!==n.WidgetType.Layout}),k=n.ReactRedux.useSelector(e=>{var o,a,n;const i=e.appConfig.widgets[t];return(null===(a=null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.properties)||void 0===a?void 0:a.hasEmbeddedLayout)&&Object.keys(null!==(n=i.layouts)&&void 0!==n?n:{}).length>0}),j=R&&!C&&M&&!k,{viewOnly:z,builderTheme:$}=n.React.useContext(d.PageContext),A=(0,s.eU)(),O=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode),L=A===t&&!z&&O!==n.AppMode.Run,P=A!==t&&!z&&O===n.AppMode.Design,E=n.React.useCallback(e=>{const{browserSizeMode:o,appConfig:{mainSizeMode:a}}=(0,n.getAppStore)().getState();!I||z||window.parent.isExpressBuilder&&o!==a||(e.stopPropagation(),(0,n.getAppStore)().dispatch(n.appActions.setWidgetIsInlineEditingState(t,!0)))},[I,z,t]),N=(0,n.classNames)("widget-renderer w-100 h-100",i),T=((e,t,o)=>n.React.useMemo(()=>{const a=t?`\n    .widget-tip {\n      display: block;\n      padding: inherit;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      top: 0;\n      right: 0;\n      pointer-events: none;\n    }\n    .widget-tip.selected {\n      border: 1px solid ${t.sys.color.primary.main};\n    }\n    &:hover > .widget-tip.highlight {\n      border: 2px solid ${t.sys.color.primary.main};\n    }\n    `:"",i=e?"visible":"hidden";return n.css`
      overflow: ${i};
      position: relative;
      .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
        ${o?`border-radius: var(--sys-shape-2); overflow: ${i};`:""}
      }
      .widget-mask {
        position: absolute;
        background: transparent;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 1;
      }
      ${a}
    `},[t,e,o]))(o,$,v);return(0,a.jsxs)("div",Object.assign({css:T,className:N,onMouseDownCapture:S,onDoubleClickCapture:E,"data-widgetid":w},g,{children:[(0,a.jsxs)("div",{className:"widget-content p-1",children:[x,!x&&m&&(0,a.jsx)(n.ErrorBoundary,{children:(0,a.jsx)(m,{widgetId:w,layoutId:u,layoutItemId:p})}),!x&&!m&&(0,a.jsx)(r.Loading,{})]}),j&&(0,a.jsx)("div",{className:"widget-mask"}),(L||P)&&(0,a.jsx)("div",{className:(0,n.classNames)("widget-tip",{selected:L,highlight:P})})]}))}const p=(0,n.Immutable)({}),v=e=>{var t,o,i;const{rootVisible:l,containerMapId:d,onClose:c,widgets:v=p,layout:g,onClick:h}=e,m=null!==(t=Object.keys(v).find(e=>(0,s.V5)(v[e])))&&void 0!==t?t:"",f=null===(i=null===(o=(0,n.getAppStore)().getState().appConfig.widgets)||void 0===o?void 0:o[m])||void 0===i?void 0:i.label;return(0,a.jsx)(r.MobilePanel,{className:(0,n.classNames)("mobile-widget-launcher",{"d-none":!m}),mapWidgetId:d,title:f,open:!!m&&l,keepMount:!0,onClick:e=>{h(e,m)},onClose:e=>{c(e,m)},children:Object.entries(v).map(([e,t])=>{if(!(void 0!==t.state))return null;const o=(0,s.V5)(t),i=null==g?void 0:g.id,r=(0,s.pp)(g,e);return(0,a.jsx)(u,{widgetId:e,layoutId:i,layoutItemId:r,onClick:t=>{h(t,e)},className:(0,n.classNames)({"d-none":!o})},e)})})};var g=o(70687),h=o(53716);const m=()=>document.body.getBoundingClientRect(),f=(e,t,o,a,i)=>{const[s,r]=n.React.useState(()=>m()),[l,d]=n.React.useState([o]),c=n.React.useRef(0);n.React.useEffect(()=>{const e=()=>{const e=m();r(e)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const u=(e,t)=>e.right>=t.right||e.left<=t.left,p=(e,t)=>e.bottom>=t.bottom||e.top<=t.top,v=n.hooks.useEventCallback(t=>{if(c.current++,c.current>7)return console.warn(`Number of cycles: ${c.current}.You may have opened too many panels, and now there is not enough space for them to be placed without overstepping and blocking`),t;const a=((e,t)=>!(!e||!t)&&(u(e,t)||p(e,t)))(t,s);if(!a)return t;const{width:n,height:r}=t;let{left:l,top:d,right:h,bottom:m}=t;if(a){const t=u({left:l,top:d,right:h,bottom:m,width:n,height:r},s),a=p({left:l,top:d,right:h,bottom:m,width:n,height:r},s);t&&(l=e===g.t2.SideBySide?o.x:s.right-n),a||e!==g.t2.SideBySide||(d+=i),h=l+n,m=d+r}return v({left:l,top:d,right:h,bottom:m,width:n,height:r})});return n.React.useEffect(()=>{const n=[];let s={width:0,height:0};Object.keys(t).forEach((r,l)=>{const d=t[r],u=0!==l?n[l-1]:o;let{x:p,y:h}=u;if(e===g.t2.SideBySide){const{width:e}=s;p+=a>0?e:-e,p+=0!==l?a:0}else e===g.t2.Stack&&(p+=0!==l?a:0,h+=0!==l?i:0);const m={left:p,top:h,right:p+d.width,bottom:h+d.height,width:d.width,height:d.height},{left:f,top:w}=v(m);c.current>7?(p=u.x,h=u.y):(p=f,h=w),c.current=0,n.push({x:p,y:h}),s=d}),d(n)},[e,o,a,i,s.width,s.height,v,t]),l},w=(0,n.Immutable)({}),b=e=>{const{rootVisible:t,mode:o,start:l,spaceX:d,spaceY:c,sizes:p,widgets:v=w,layout:g,autoFocus:m,onResizeStop:b,onClick:x,onClose:y}=e,S=n.ReactRedux.useSelector(e=>e.appConfig.widgets),[R,I]=n.React.useState(p),C=n.React.useMemo(()=>((e,t)=>{let o=(0,n.Immutable)({});return Object.keys(e).forEach(e=>{o=o.set(e,t[e]||i.D7)}),o})(v,R),[R,v]),[M,k]=n.React.useState(!1),j=f(o,C,l,d,c),z=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===n.AppMode.Run),$=(0,a.jsx)(h.Ku,{isRuntime:z,isResizing:M});return(0,a.jsx)(n.React.Fragment,{children:Object.entries(v).map(([e,o],n)=>{var l;if(!(void 0!==o.state))return null;const d=(0,s.V5)(o),c=j[n];if(!c)return null;const p=C[e],v=null===(l=null==S?void 0:S[e])||void 0===l?void 0:l.label,h=null==g?void 0:g.id,f=(0,s.pp)(g,e);return(0,a.jsx)(r.FloatingPanel,{style:{maxWidth:"100vw",position:"fixed",backgroundColor:"var(--sys-color-surface-paper)"},headerTitle:v,defaultPosition:c,defaultSize:p,open:d&&t,keepMount:!0,className:"multiple-widget-launcher",showHeaderClose:!0,showHeaderCollapse:!0,activateOnlyForHeader:!0,autoFocus:d&&m,minSize:i.kg,dragBounds:"body",resizeHandle:$,onClick:t=>{x(t,e)},onResize:t=>{((e,t)=>{I(R.set(e,t)),k(!0)})(e,t)},onResizeStop:t=>{((e,t)=>{null==b||b(e,t),k(!1)})(e,t)},onHeaderClose:t=>{y(t,e)},children:(0,a.jsx)(u,{widgetId:e,layoutId:h,layoutItemId:f})},e)})})},x=(0,n.Immutable)({}),y=e=>{const{widgets:t=x,root:o,placement:l,sizes:d,layout:c,autoFocus:p,onResizeStop:v,onClick:g,onClose:m}=e,f=n.ReactRedux.useSelector(e=>e.appConfig.widgets),[w,b]=n.React.useState(d),[y,S]=n.React.useState(!1),R=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===n.AppMode.Run),I=(0,a.jsx)(h.Ku,{isRuntime:R,isResizing:y});return(0,a.jsx)(n.React.Fragment,{children:Object.entries(t).map(([e,t])=>{var d,x;if(!(void 0!==t.state))return null;const y=t.state!==n.WidgetState.Closed,R=null!==(d=w[e])&&void 0!==d?d:i.D7,C=null===(x=null==f?void 0:f[e])||void 0===x?void 0:x.label;let M=(0,h.Ht)(e);M&&M.offsetParent||(M=(null==o?void 0:o.querySelector(".popup-more-card"))||(null==o?void 0:o.querySelector(".avatar-card")));const k=null==c?void 0:c.id,j=(0,s.pp)(c,e);return(0,a.jsx)(r.FloatingPanel,{style:{maxWidth:"100vw",backgroundColor:"var(--sys-color-surface-paper)"},flipOptions:i.yH,shiftOptions:i.ZT,offsetOptions:i.XJ,className:"single-widget-launcher",headerTitle:C,activateOnlyForHeader:!0,minSize:i.kg,dragBounds:"body",defaultSize:R,resizeHandle:I,onResize:t=>{var o,a;o=e,a=t,b(e=>e.set(o,a)),S(!0)},onResizeStop:t=>{var o,a;o=e,a=t,null==v||v(o,a),S(!1)},onHeaderClose:t=>{m(t,e)},showHeaderCollapse:!0,open:y,keepMount:!0,autoFocus:y&&p,reference:M,onClick:t=>{g(t,e)},placement:l,children:(0,a.jsx)(u,{widgetId:e,layoutId:k,layoutItemId:j})},e)})})},S=(0,n.Immutable)({}),R=e=>{const{widgets:t=S,root:o,placement:l,layout:d,onClick:c,onClose:p}=e;return(0,a.jsx)(n.React.Fragment,{children:Object.entries(t).map(([e,t])=>{if(!(void 0!==t.state))return null;const v=t.state!==n.WidgetState.Closed;let g=(0,h.Ht)(e);g&&g.offsetParent||(g=(null==o?void 0:o.querySelector(".popup-more-card"))||(null==o?void 0:o.querySelector(".avatar-card")));const m=null==d?void 0:d.id,f=(0,s.pp)(d,e);return(0,a.jsx)(r.Popper,{autoUpdate:!0,css:n.css`
    border-radius: 0;
    max-width: 100vw;
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    filter: drop-shadow(0 0 6px rgba(0, 0, 0, .15));
    .widget-content {
      padding: 0 !important;
    }
  `,flipOptions:i.yH,shiftOptions:i.ZT,offsetOptions:i.XJ,className:"off-panel-widget-launcher",open:v,keepMount:!0,autoFocus:v,reference:g,toggle:(t,o)=>{"escape"===o&&p(t,e)},onClick:t=>{c(t,e)},placement:l,children:(0,a.jsx)(u,{widgetId:e,layoutId:m,layoutItemId:f,offPanel:!0})},e)})})};var I=o(54657);const C=e=>n.ReactRedux.useSelector(t=>{var o,a,n,i;const s=t.appConfig,r=t.browserSizeMode,l=s.widgets[e].parent;let c=null!==(o=l[r])&&void 0!==o?o:[];if(0===c.length){c=null!==(a=l[s.mainSizeMode])&&void 0!==a?a:[]}const u=null===(n=c[0])||void 0===n?void 0:n.layoutId,p=d.searchUtils.getWidgetIdThatUseTheLayoutId(s,u),v=s.widgets[p];return"arcgis-map"===(null===(i=null==v?void 0:v.manifest)||void 0===i?void 0:i.name)?v.id:""});function M(e){var t,o,r,l,c,u,p,g,m,f;const{id:w,config:x,version:S,rootRef:M,autoFocus:k=!0,onResizeStop:j}=e,{viewOnly:z}=n.React.useContext(d.PageContext),$=n.hooks.useCheckSmallBrowserSizeMode(),A=null===(t=x.behavior)||void 0===t?void 0:t.onlyOpenOne,O=null!==(r=null===(o=null==x?void 0:x.behavior)||void 0===o?void 0:o.arrangement)&&void 0!==r?r:"floating",L=A&&"floating"===O,P=!A&&"floating"===O,E=(0,s.af)(w,i.bC),N=n.React.useCallback((e,t)=>{var o;e.stopPropagation();const a=new CustomEvent("click");a.composedPath=()=>e.nativeEvent.composedPath(),window.dispatchEvent(a);const i=(0,n.getAppStore)().getState(),r=i.appRuntimeInfo.appMode===n.AppMode.Express,l=i.browserSizeMode!==i.appConfig.mainSizeMode;if(z||r&&l)return;const d=null==E?void 0:E.id,c=(0,s.pp)(E,t),u=null===(o=(0,n.getAppStore)().getState().appRuntimeInfo)||void 0===o?void 0:o.selection;u&&u.layoutId===d&&u.layoutItemId===c||(0,n.getAppStore)().dispatch(n.appActions.selectionChanged({layoutId:d,layoutItemId:c}))},[E,z]),T=n.React.useCallback((e,t)=>{if(!t)return;null==e||e.stopPropagation(),null==e||e.preventDefault(),(0,n.getAppStore)().dispatch(n.appActions.closeWidget(t));const o=(0,h.z_)(t)||(0,h.Sr)(w);(0,n.focusElementInKeyboardMode)(o),(0,n.getAppStore)().dispatch(n.appActions.selectionChanged(null))},[w]),B=C(w),W=(null===(l=x.behavior)||void 0===l?void 0:l.vertical)?"right-start":"bottom-start",F=null===(c=x.behavior)||void 0===c?void 0:c.displayType,H=null===(g=null===(p=null===(u=(0,n.getAppStore)())||void 0===u?void 0:u.getState())||void 0===p?void 0:p.appContext)||void 0===g?void 0:g.isRTL,D=n.React.useMemo(()=>H?Object.assign(Object.assign({},i.up),{x:document.body.clientWidth-i.D7.width-i.up.x}):i.up,[H]),U=n.React.useMemo(()=>H?Object.assign(Object.assign({},i.aP),{x:-i.aP.x}):i.aP,[H]),V=null===(m=x.behavior)||void 0===m?void 0:m.size,G=(0,s.PG)(w,i.bC),_=n.hooks.useLatest(G),X=Object.keys(G),Y=(0,s.eU)();n.hooks.useUpdateEffect(()=>{const e=Object.keys(_.current),t=e.filter(e=>(0,s.V5)(_.current[e]));e.includes(Y)&&!t.includes(Y)&&(0,h.xu)(w,Y,t,x.behavior.onlyOpenOne)},[x.behavior.onlyOpenOne,w,Y,_]);const K=n.React.useCallback(()=>{const e=_.current,t=Object.keys(e).filter(t=>(0,s.V5)(e[t]));(0,n.getAppStore)().dispatch(n.appActions.closeWidgets(t))},[_]);n.hooks.useUpdateEffect(()=>{(0,n.getAppStore)().dispatch(n.appActions.resetWidgetsState(X))},[S]);const q=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.currentPageId);n.hooks.useUpdateEffect(()=>{K()},[q]);const Z=n.React.useContext(I.VisibleContext),J=n.ReactRedux.useSelector(e=>e.appContext.isInBuilder),Q=null===(f=x.behavior)||void 0===f?void 0:f.openStarts;n.React.useEffect(()=>{Z?!J&&(null==Q?void 0:Q.length)>0&&(0,n.getAppStore)().dispatch(n.appActions.openWidgets(Q)):K()},[K,J,Q,Z]);const ee=n.ReactRedux.useSelector(e=>{const t=e.appConfig.widgets;return X.filter(e=>$?"controller"===t[e].manifest.name:t[e].offPanel).join(",")},n.ReactRedux.shallowEqual),te=X.filter(e=>!ee.split(",").includes(e)).join(","),oe=n.React.useMemo(()=>G.without.apply(G,te.split(",")),[te,G]),ae=n.React.useMemo(()=>G.without.apply(G,ee.split(",")),[ee,G]);return(0,a.jsxs)(n.React.Fragment,{children:[$&&(0,a.jsx)(v,{containerMapId:B,layout:E,widgets:ae,rootVisible:Z,onClick:N,onClose:T}),!$&&L&&(0,a.jsx)(y,{sizes:V,root:M.current,placement:W,widgets:ae,layout:E,autoFocus:k,onResizeStop:j,onClick:N,onClose:T}),!$&&P&&(0,a.jsx)(b,{sizes:V,rootVisible:Z,mode:F,start:D,spaceX:U.x,spaceY:U.y,widgets:ae,layout:E,autoFocus:k,onResizeStop:j,onClick:N,onClose:T}),(0,a.jsx)(R,{root:M.current,placement:W,widgets:oe,layout:E,onClick:N,onClose:T})]})}},23740:(e,t,o)=>{o.p=window.jimuConfig.baseUrl},26189:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 10"><path fill="#B6B6B6" d="M10 2.778V0L0 10h2.778zM10 5.607 5.607 10H10z"></path></svg>'},28482:(e,t,o)=>{"use strict";o.d(t,{H9:()=>v,PG:()=>s,V5:()=>u,af:()=>r,eU:()=>p,lL:()=>l,pp:()=>c});var a=o(79244),n=o(41496),i=o(17087);const s=(e,t)=>{const o=a.ReactRedux.useSelector(e=>e.widgetsRuntimeInfo),n=r(e,t),i=d(n);return a.React.useMemo(()=>{const e={};return i.forEach(t=>{var n;const i=null!==(n=null==o?void 0:o[t])&&void 0!==n?n:{isClassLoaded:!1};e[t]=(0,a.Immutable)(i)}),(0,a.Immutable)(e)},[i,o])},r=(e,t)=>a.ReactRedux.useSelector(o=>{var a,i,s,r;const l=null===(s=null===(i=null===(a=o.appConfig.widgets)||void 0===a?void 0:a[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],d=o.browserSizeMode,c=o.appConfig.mainSizeMode,u=n.searchUtils.findLayoutId(l,d,c);return null===(r=o.appConfig.layouts)||void 0===r?void 0:r[u]}),l=(e,t)=>{var o,i,s,r;const l=(0,a.getAppStore)().getState(),d=l.appStateInBuilder||l;if(!d)return;const c=d.appConfig,u=d.browserSizeMode,p=null===(s=null===(i=null===(o=c.widgets)||void 0===o?void 0:o[e])||void 0===i?void 0:i.layouts)||void 0===s?void 0:s[t],v=n.searchUtils.findLayoutId(p,u,c.mainSizeMode);return null===(r=c.layouts)||void 0===r?void 0:r[v]},d=e=>{const t=(e=>{var t,o,a;let n=(null!==(a=null===(o=null===(t=null==e?void 0:e.order)||void 0===t?void 0:t.asMutable)||void 0===o?void 0:o.call(t))&&void 0!==a?a:[]).map(t=>{var o;return null===(o=e.content)||void 0===o?void 0:o[t]});return n=n.filter(e=>e&&e.id&&e.widgetId&&!e.isPending),n.map(e=>e.id)})(e);return t.map(t=>{var o,a;return null===(a=null===(o=e.content)||void 0===o?void 0:o[t])||void 0===a?void 0:a.widgetId})},c=(e,t)=>{if(null!=(null==e?void 0:e.content)&&t)return Object.keys(e.content).find(o=>e.content[o].widgetId===t)},u=e=>[a.WidgetState.Opened,a.WidgetState.Active].includes(e.state),p=()=>a.ReactRedux.useSelector(e=>{var t,o;const a=e.appRuntimeInfo.selection;return null===(o=null===(t=e.appConfig.layouts[null==a?void 0:a.layoutId])||void 0===t?void 0:t.content)||void 0===o?void 0:o[null==a?void 0:a.layoutItemId].widgetId}),v=e=>{const t=s(e,i.bC),o=Object.keys(t),a=p();return e===a||o.includes(a)}},41496:e=>{"use strict";e.exports=i},42667:(e,t,o)=>{"use strict";o.d(t,{Q:()=>c});var a=o(67386),n=o(79244),i=o(14321),s=o(19640),r=o(70687),l=o(28482);const d=[],c=n.React.forwardRef((e,t)=>{const{controllerId:o,className:c,lists:u=d,createItem:p,vertical:v,itemLength:g,space:h,alignment:m=r.aL.Center,autoScrollEnd:f,autoSize:w,onMouseDown:b}=e,x=n.hooks.useTranslation(i.defaultMessages),[y,S]=n.hooks.useForwardRef(t),{start:R,end:I,disablePrevious:C,disableNext:M,hideArrow:k,scroll:j,remainLength:z}=(0,s.k)({rootRef:y,lists:u,itemLength:g,autoSize:w,vertical:v,space:h,autoScrollEnd:f}),$=u.slice(R,I),A=(({vertical:e,space:t,itemLength:o,autoSize:a,hideArrow:i,alignment:s,remainLength:l})=>n.css`
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    button.previous, button.next {
      flex-shrink: 0;
      display: ${i?"none":"block"};
      &:hover {
        color: var(--sys-color-primary-light);
      }
    }
    ${s!==r.aL.Start||a||e?"":`button.next { transform: translateX(${-l}px); }`}
    ${s===r.aL.Start&&!a&&e?`button.next { transform: translateY(${-l}px); }`:""}
    ${s!==r.aL.End||a||e?"":`button.previous { transform: translateX(${l}px); }`}
    ${s===r.aL.End&&!a&&e?`button.previous { transform: translateY(${l}px); }`:""}
    .root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      ${e?`min-height: ${o}px;`:`min-width: ${o}px;`}
      max-height: ${a?"100%":"calc(100% - 20px)"};
      max-width: ${a?"100%":"calc(100% - 20px)"};
      display: flex;
      justify-content: ${s===r.aL.Start?"flex-start":s===r.aL.End?"flex-end":"center"};
      flex-wrap: nowrap;
      align-items: center;
      .scroll-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?t+"px":"unset"};
          margin-left: ${e?"unset":t+"px"};
        }
      }
    }
`)({vertical:v,space:h,itemLength:g,autoSize:w,hideArrow:k,alignment:m,remainLength:z}),O=(0,l.H9)(o);n.React.useEffect(()=>{O&&((0,n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(o,"hideArrow",k)),(0,n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(o,"disablePrevious",C)),(0,n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(o,"disableNext",M)),(0,n.getAppStore)().dispatch(n.appActions.widgetToolbarStateChange(o,["controller-previous","controller-next"])))},[o,M,C,k,O]),n.React.useEffect(()=>{if(O){const e=n.ExtensionManager.getInstance(),t=e.getExtensionById(`${o}-previous`),a=e.getExtensionById(`${o}-next`);t&&(t.scroll=j),a&&(a.scroll=j)}},[o,O,j]);return(0,a.jsx)(i.NavButtonGroup,{css:A,variant:"text",tag:"div",vertical:v,onChange:e=>{j(e,!0)},disablePrevious:C,disableNext:M,previousAriaLabel:x("previous"),nextAriaLabel:x("next"),className:(0,n.classNames)("scroll-list",c),children:(0,a.jsx)("div",{className:"root scroll-list-root",ref:S,onMouseDown:b,children:u.map(e=>{const t=!$.includes(e);return p(e,(0,n.classNames)("scroll-list-item",{"d-none":t}))})})})})},49859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M4 4h2v1H4zM8 4h2v1H8zM14 4h-2v1h2zM15 4h1v2h-1zM16 8h-1v2h1zM4 14h1v2H4zM5 6H4v2h1zM4 10h1v2H4zM16 12h-1v2h1zM16 15v1h-2v-1zM12 15h-2v1h2zM6 15h2v1H6z"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path></svg>'},50572:(e,t,o)=>{"use strict";o.d(t,{I:()=>l});var a=o(67386),n=o(79244),i=o(14321),s=o(9567);const r={none:"0",sm:"0",default:"var(--sys-shape-1)",lg:"var(--sys-shape-2)"},l=n.React.forwardRef((e,t)=>{var o;const{label:l,className:d,showLabel:c,showIndicator:u=!0,showTooltip:p=!0,labelGrowth:v=0,icon:g,marker:h,onClick:m,onMarkerClick:f,avatar:w,autoFlip:b,active:x,editDraggable:y,disabled:S,widgetid:R}=e,I=w.type||"primary",C=(0,s.YC)(w.size,w.buttonSize),M=(0,s.GF)(w.size,w.buttonSize),k=(0,s.Jt)(w.size,w.iconSize),j=w.shape||"circle",z=(e=>{const{size:t,buttonSize:o,showLabel:a,showIndicator:l,shape:d,labelGrowth:c}=e,u=i.hooks.useClassicTheme();return n.React.useMemo(()=>{const e=(0,s.Q$)(t,o,a,d),i=e+c,p=(0,s.jN)(t,d),v="circle"===d?"50%":r[t],g="circle"===d?{sm:-1,default:0,lg:4}[t]:p-6;return n.css`
      display: flex;
      align-items:center;
      flex-direction: column;
      justify-content: ${a?"space-around":"center"};
      width: ${u?n.polished.rem(i):i+"px"} !important;
      height: ${u?n.polished.rem(e):e+"px"};
      .tool-drag-handler {
        cursor: auto;
      }
      .avatar {
        padding: ${p}px;
        position: relative;
        text-align: center;
        &:hover .marker {
          visibility: visible;
        }
        .avatar-button {
          width: ${o}px;
          height: ${o}px;
          border-radius: ${v};
        }
        .avatar-button.disabled {
          color: var(--sys-color-action-disabled-text);
          background-color: var(--sys-color-action-disabled);
          border: 1px solid var(--sys-color-divider-secondary);
        }
        .marker {
          position: absolute;
          right: ${g}px;
          top: ${g}px;
          padding: 0;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          .icon-btn-sizer {
            min-width: .625rem;
            min-height: .625rem;
          }
          visibility: hidden;
        }
      }
      ${l?".avatar.active {\n        .avatar-button, .marker {\n          transform: translateY(-7px);\n        }\n        ::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          border: 1px solid var(--ref-palette-white);\n          border-radius: 3px;\n          width: 6px;\n          height: 3px;\n          background-color: var(--sys-color-primary-main);\n          box-sizing: content-box;\n        }\n      }":""}
      .avatar-label {
        text-align: center;
        width: 100%;
        min-height: ${u?n.polished.rem(21):"21px"};
        cursor: default;
      }
    `},[t,o,a,d,c,u,l])})({size:C,buttonSize:M,showLabel:c,showIndicator:u,shape:j,labelGrowth:v}),$=r[C],A=(0,a.jsx)(i.Button,{"data-widgetid":R,"aria-label":l,"aria-expanded":x,"aria-haspopup":"dialog",icon:!0,active:x,className:(0,n.classNames)("avatar-button",{disabled:S}),type:I,size:C,style:{borderRadius:"circle"===j?"50%":$},onClick:m,children:(0,a.jsx)(i.Icon,{color:"string"!=typeof g&&(null===(o=g.properties)||void 0===o?void 0:o.color),icon:"string"!=typeof g?g.svg:g,size:k,autoFlip:b})});return(0,a.jsxs)("div",{ref:t,"data-widgetid":R,className:(0,n.classNames)("avatar-card",{active:x},d),css:z,children:[(0,a.jsxs)("div",{className:(0,n.classNames)({"no-drag-action":!y,active:x},"avatar tool-drag-handler"),children:[p?(0,a.jsx)(i.Tooltip,{title:l,style:{pointerEvents:"none"},children:A}):A,h&&(0,a.jsx)(i.Button,{className:"marker",size:"sm",icon:!0,onClick:f,children:(0,a.jsx)(i.Icon,{size:8,icon:h})})]}),c&&(0,a.jsx)("div",{className:(0,n.classNames)("avatar-label text-truncate",{active:x}),children:l})]})})},53716:(e,t,o)=>{"use strict";o.d(t,{Ht:()=>d,Ku:()=>p,Sr:()=>u,xu:()=>g,z_:()=>c});var a=o(67386),n=o(79244),i=o(14321),s=o(28482),r=o(17087),l=o(13166);const d=e=>document.querySelector(`.widget-controller .avatar-card[data-widgetid='${e}']`),c=e=>document.querySelector(`.widget-controller .avatar-card[data-widgetid='${e}'] button`),u=e=>document.querySelector(`[data-widgetid='${e}'] .popup-more-card button`),p=e=>{const{isRuntime:t,isResizing:s}=e,r=n.hooks.useTranslation(l.A),d=o(t?26189:54044);return n.React.useMemo(()=>{const e=(0,a.jsx)("div",{className:"resize-handle d-flex p-1",children:(0,a.jsx)(i.Icon,{icon:d,size:t?10:16,currentColor:!1})});return s||t?e:(0,a.jsx)(i.Tooltip,{title:r("resizerTooltip"),children:e})},[s,t,d,r])},v=(e,t)=>{const o=(0,s.lL)(t,r.bC),a=Object.keys(o.content).find(t=>o.content[t].widgetId===e);(0,n.getAppStore)().dispatch(n.appActions.selectionChanged({layoutId:o.id,layoutItemId:a}))},g=(e,t,o,a,i=!1)=>{a?((0,n.getAppStore)().dispatch(n.appActions.closeWidgets(o)),o.includes(t)||((0,n.getAppStore)().dispatch(n.appActions.openWidget(t)),i&&v(t,e))):o.includes(t)?(0,n.getAppStore)().dispatch(n.appActions.closeWidget(t)):((0,n.getAppStore)().dispatch(n.appActions.openWidget(t)),i&&v(t,e))}},54044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M12 0h4v16H0v-4h12z"></path><path fill="#FFF" d="M13 1h2v14H1v-2h12z"></path></svg>'},54657:(e,t,o)=>{"use strict";o.r(t),o.d(t,{VisibleContext:()=>b,__set_webpack_public_path__:()=>I,default:()=>R,useAdvancedStyle:()=>y});var a=o(67386),n=o(79244),i=o(9567),s=o(70687),r=o(42667),l=o(12279),d=o(17087),c=o(28482),u=o(20863),p=o(53716),v=o(4843);const g=e=>{var t,o,g,h,m,f,w,b;const{id:x,config:y,version:S,autoSize:R}=e,I=null===(t=y.behavior)||void 0===t?void 0:t.onlyOpenOne,C=null===(o=y.behavior)||void 0===o?void 0:o.vertical,M=y.behavior.overflownStyle||s.AH.Arrows,k=null===(g=null==y?void 0:y.appearance)||void 0===g?void 0:g.card,j=(0,i._C)(k,null===(h=null==y?void 0:y.appearance)||void 0===h?void 0:h.space),z=n.hooks.useCheckSmallBrowserSizeMode(),$=n.React.useRef(null),A=(0,c.PG)(x,d.bC),O=Object.keys(A),L=O.filter(e=>(0,c.V5)(A[e])),P=n.React.useCallback(e=>{var t;const o=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.widgetid;if(!o)return;const a=!!z||I;L.includes(o)||e.stopPropagation(),(0,p.xu)(x,o,L,a,!0)},[z,I,L,x]),[E,N]=n.React.useState(!1),T=n.React.useCallback((e,t,o)=>{const i=L.includes(e);return(0,a.jsx)(l.GD,{className:`${t} layout-item`,widgetid:e,markerEnabled:!1,active:i,showLabel:k.showLabel,showIndicator:k.showIndicator,showTooltip:k.showTooltip,labelGrowth:k.labelGrowth,avatar:k.avatar,variant:k.variant,onClick:t=>{N(!0),(0,n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(e,"autoFocus",!0)),null==o||o(t),P(t)}},e)},[k,P,L]);return(0,a.jsxs)("div",{className:"controller-runtime w-100 h-100",children:[(0,a.jsx)(u.A,{id:x,config:y,version:S,rootRef:$,autoFocus:E}),M===s.AH.PopupWindow&&(0,a.jsx)(v.z,{ref:$,className:"runtime--popup-list",vertical:C,itemLength:j,space:null===(m=y.appearance)||void 0===m?void 0:m.space,alignment:null===(f=y.behavior)||void 0===f?void 0:f.alignment,autoSize:R,lists:O,createItem:T,itemStyle:k,advanced:y.appearance.advanced}),M===s.AH.Arrows&&(0,a.jsx)(r.Q,{ref:$,controllerId:x,className:"runtime--scroll-list",vertical:C,itemLength:j,space:null===(w=y.appearance)||void 0===w?void 0:w.space,alignment:null===(b=y.behavior)||void 0===b?void 0:b.alignment,autoSize:R,lists:O,createItem:T})]})};var h=o(14321);const m={behavior:{onlyOpenOne:!0,openStarts:[],displayType:"STACK",vertical:!1,size:{}},appearance:{space:0,advanced:!1,card:{showLabel:!1,labelGrowth:10,showTooltip:!0,showIndicator:!1,avatar:{type:"primary",size:"default",shape:"circle"}}}};class f extends n.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"Version manager for release 1.0.0",upgrader:e=>{if(!e)return m;if(e.behavior&&e.appearance)return e;{let o=e;return e.behavior||(o=o.setIn(["behavior","openStarts"],[]),o=o.setIn(["behavior","onlyOpenOne"],e.onlyOpenOne),o=o.setIn(["behavior","displayType"],e.displayType),o=o.setIn(["behavior","vertical"],e.vertical),o=o.setIn(["behavior","size"],e.size),o=o.without(["onlyOpenOne","displayType","size"])),e.appearance||(o=o.setIn(["appearance","advanced"],!1),e.vertical?o=o.setIn(["appearance","space"],e.space):(o=o.setIn(["appearance","space"],0),o=o.setIn(["appearance","card","labelGrowth"],e.space)),o=o.setIn(["appearance","card","showLabel"],e.showLabel),o=o.setIn(["appearance","card","avatar","size"],"SMALL"===(t=e.iconSize)?"sm":"MEDIUM"===t?"default":"LARGE"===t?"lg":t),o=o.setIn(["appearance","card","avatar","shape"],e.iconStyle),o=o.setIn(["appearance","card","avatar","type"],"primary"),o=o.without(["space","showLabel","iconSize","iconStyle","vertical"])),o}var t}},{version:"1.1.0",description:"Version manager for release 1.1.0",upgrader:e=>{var t,o;if(!e)return m;let a=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card;const n=null==a?void 0:a.variants,i=null===(o=null==a?void 0:a.avatar)||void 0===o?void 0:o.type;let s=e;if(n){const e=((e,t="primary")=>null==e?void 0:e[t])(n,i);a=null==a?void 0:a.set("variant",e).without("variants"),s=s.setIn(["appearance","card"],a)}return s}},{version:"1.6.0",description:"Version manager for release 1.6.0",upgrader:e=>{var t;if(!e)return m;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showTooltip",!0),a=a.setIn(["appearance","card"],o)),a}},{version:"1.14.0",description:"Version manager for release 1.14.0",upgrader:e=>{var t;if(!e)return m;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,a=e;return o&&(o=o.set("showIndicator",!1),a=a.setIn(["appearance","card"],o)),a}},{version:"1.19.0",description:"Version manager for release 1.19.0",upgrader:e=>{if(!e)return m;let t=e;return["default","hover","active"].forEach(e=>{var o,a,n,i;const s=null===(i=null===(n=null===(a=null===(o=null==t?void 0:t.appearance)||void 0===o?void 0:o.card)||void 0===a?void 0:a.variant)||void 0===n?void 0:n[e])||void 0===i?void 0:i.boxShadow;if((e=>{const{color:t,offsetX:o,offsetY:a,blur:n,spread:i}=e||{};return t&&(!o||!a||!n)&&(a||n||i)})(s)){const o=(e=>{const{color:t,offsetX:o,offsetY:a,blur:n,spread:i}=e||{},s=[o,a,n,i].filter(e=>!!e);return{color:t,offsetX:s[0],offsetY:s[1],blur:s[2],spread:s[3]}})(s);t=t.setIn(["appearance","card","variant",e,"boxShadow"],o)}}),t}}]}}const w=new f,b=n.React.createContext(!0),x=(e,t)=>{const{bg:o,iconColor:a,boxShadow:i,color:s,italic:r,bold:l,underline:d,strike:c}=e||{},u=h.styleUtils.toCSSTextUnderLine({underline:d,strike:c});let p;if(i&&(null==i?void 0:i.color)){const{offsetX:e="0",offsetY:t="0",blur:o="0",spread:a="0"}=i;p={offsetX:e,offsetY:t,blur:o,spread:a,color:null==i?void 0:i.color}}let v=n.css``;return"active"===t&&(v=n.css`::after {
      background-color: ${o};
    }`),n.css`
    >.avatar {
      >.avatar-button {
        ${o?n.css`background-color: ${o}; border-color: ${o};`:""}
        ${a?n.css`color: ${a};`:""}
        ${(null==p?void 0:p.color)?n.css`box-shadow: ${h.styleUtils.toCSSBoxshadow(p)};`:""}
      }
      ${v}
    }
    >.avatar-label {
      ${s?n.css`color: ${s};`:""}
      ${r?n.css`font-style: italic;`:""}
      ${l?n.css`font-weight: bold;`:""}
      ${d||c?n.css`text-decoration: ${u};`:""}
    }
  `},y=(e,t)=>{const o=null==e?void 0:e.default,a=null==e?void 0:e.active,i=o&&a?o.merge(a):a,s=null==e?void 0:e.hover,r=o&&s?o.merge(s):s;return n.React.useMemo(()=>{const e=t&&o?x(o,"regular"):"",a=x({bg:"var(--sys-color-primary-dark)"},"active"),s=t&&i?x(i,"active"):"",l=t&&r?x(r,"hover"):"";return n.css`
      .avatar-card {
        ${e}
        ${n.css`&.active:not(.disabled) { ${a} }`}
        ${s?n.css`&.active:not(.disabled) { ${s} }`:""}
        ${l?n.css`&:hover { ${l} }`:""}
      }
    `},[t,o,i,r])},S=e=>{var t,o,i,s;const{builderSupportModules:r,id:l,config:c,onInitResizeHandler:u,onInitDragHandler:p,autoWidth:v,autoHeight:h,controllerWidgetId:m,state:f}=e,w=null===(t=c.behavior)||void 0===t?void 0:t.onlyOpenOne,x=null===(o=c.behavior)||void 0===o?void 0:o.displayType,S=null===(i=null==c?void 0:c.behavior)||void 0===i?void 0:i.vertical,R=null==c?void 0:c.appearance.advanced,I=null===(s=null==c?void 0:c.appearance)||void 0===s?void 0:s.card.variant,C=!!m||v,M=!!m||h,k=S?M:C,j=m?f===n.WidgetState.Opened:f!==n.WidgetState.Hidden,z=n.ReactRedux.useSelector(e=>e.appContext.isInBuilder),$=n.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode);n.React.useEffect(()=>{null==u||u(null,null,()=>{P(e=>e+1)})},[u]),n.React.useEffect(()=>{null==p||p(null,null,()=>{P(e=>e+1)})},[p]);const A=z&&$!==n.AppMode.Run,O=A&&r.widgetModules.Builder,[L,P]=n.React.useState(0);n.hooks.useUpdateEffect(()=>{P(e=>e+1)},[w,x,$]);const E=((e,t,o)=>{const a=e?0:d.iI.sm,i=e?0:d.iI.sm,s=t?"5px":0,r=o?"5px":0;return n.React.useMemo(()=>n.css`
      overflow: visible;
      white-space: nowrap;
      .controller-container {
        width: 100%;
        height: 100%;
        padding: ${r} ${s};
        min-width:  ${a}px;
        min-height: ${i}px;
      }
    `,[s,r,a,i])})(k,C,M),N=y(I,R);return(0,a.jsx)("div",{className:"widget-controller jimu-widget rw-controller",css:[E,N],children:(0,a.jsx)("div",{className:"controller-container",children:(0,a.jsxs)(b.Provider,{value:j,children:[!A&&(0,a.jsx)(g,{id:l,version:L,config:c,autoSize:k}),A&&O&&(0,a.jsx)(O,{id:l,version:L,config:c,autoSize:k})]})})})};S.versionManager=w;const R=S;function I(e){o.p=e}},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},67386:e=>{"use strict";e.exports=o},70687:(e,t,o)=>{"use strict";var a,n,i;o.d(t,{AH:()=>i,aL:()=>n,t2:()=>a}),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(a||(a={})),function(e){e.Center="center",e.Start="start",e.End="end"}(n||(n={})),function(e){e.Arrows="ARROWS",e.PopupWindow="POPUP_WINDOW"}(i||(i={}))},79244:e=>{"use strict";e.exports=a}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="",r(23740),r(54657)})())}}});