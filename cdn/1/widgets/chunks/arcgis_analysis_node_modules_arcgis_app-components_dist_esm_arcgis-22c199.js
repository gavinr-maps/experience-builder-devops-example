/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-22c199.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-22c199"],{74351:(e,t,a)=>{a.r(t),a.d(t,{arcgis_delete_folder:()=>f,arcgis_delete_items:()=>w,arcgis_item_category_schema_editor:()=>I,arcgis_schema_editor:()=>T});var i=a(7263),r=a(31670),s=a(58233),o=a(62159),n=a(96295),l=a(94788),c=a(46581),d=a(11935),h=a(57878),g=a(43780),u=a(29259),m=a(59296),p=a(98525),y=a(59673);a(28926),a(70506),a(99004),a(78613),a(65215),a(49038),a(2174),a(66488),a(31141);const C=async(e,t)=>(0,c.r)(`${e.userContentUrl}/${t.id}`);async function v(e,t,a,i){try{const r=`${(0,l.g)(e)}search`;return{result:(await(0,c.r)(r,{q:`owner:${t.username} ownerfolder:${a.id} ${i||""}`,num:1})).total}}catch(e){return{result:0}}}const f=class{constructor(e){(0,i.r)(this,e),this.arcgisDeleteFolderClose=(0,i.c)(this,"arcgisDeleteFolderClose",7),this.arcgisDeleteFolderSuccess=(0,i.c)(this,"arcgisDeleteFolderSuccess",7),this.arcgisDeleteFolderFail=(0,i.c)(this,"arcgisDeleteFolderFail",7),this.updateItems=async()=>{var e;const t=await C(null!==(e=this.user)&&void 0!==e?e:r.c.user,this.folder);this.items=t.items},this.renderMessage=()=>{var e;const{i18n:t,folder:a,mode:r,folderTotal:o,portal:n,lang:l,items:c}=this,{text:d,description:h}=(null===(e=null==n?void 0:n.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled)?(()=>{let e="",i="";switch(r){case"UNPROTECTED":e=t.message.recycleAll.replace("${title}",a.title);break;case"UNRECYCLABLE":case"UNRECYCLABLE_UNPROTECTED":e=t.message.canBeEmptied.replace("${title}",a.title);break;case"PROTECTED_UNRECYCLABLE":case"PROTECTED_UNPROTECTED":case"PROTECTED_UNRECYCLABLE_UNPROTECTED":e=t.message.mustBeEmpty.replace("${title}",a.title),i=t.message.aFewCannotBeDeleted;break;case"PROTECTED":e=t.message.cannotBeDeleted.replace("${title}",a.title)}return{text:e,description:i}})():(()=>{let e="";if("PROTECTED"===r)e=t.message.cannotBeDeleted.replace("${title}",a.title);else{e=(0,s.b)(l,t.disabledMessage,o||(null==c?void 0:c.length)||0).replace("${label}",a.title)}return{text:e,description:null}})();return(0,i.h)(i.F,null,d&&(0,i.h)("p",{innerHTML:d}),h&&(0,i.h)("p",null,h))},this.handlePostDeleteItems=async()=>{var e;0===(await C(null!==(e=this.user)&&void 0!==e?e:r.c.user,this.folder)).total?await this.handleDeleteFolder():this.arcgisDeleteFolderFail.emit(this.i18n.deleteProtectedItemsInFolder)},this.handleDeleteFolder=async()=>{var e;(await(async(e,t,a)=>{const i=`${(null!=a?a:t.user).userContentUrl}/${e.id}/delete`;return await(0,c.r)(i,{},{},"post")})(this.folder,this.portal,null!==(e=this.user)&&void 0!==e?e:r.c.user)).success&&this.arcgisDeleteFolderSuccess.emit(this.i18n.success.replace("${title}",this.folder.title))},this.portal=void 0,this.user=void 0,this.folder=void 0,this.active=!0,this.mode=void 0,this.items=void 0}async componentWillLoad(){var e,t;const a=await(0,o.g)(this.el);this.i18n=a[0],this.lang=a[1];const i=null!==(e=this.user)&&void 0!==e?e:r.c.user,s=null!==(t=this.portal)&&void 0!==t?t:r.c.portal;this.isEmpty=(await async function(e,t,a){return{result:0===(await v(e,t,a)).result}}(s,i,this.folder)).result,this.folderTotal=(await async function(e,t,a){return{result:(await v(e,t,a,n.H)).result}}(s,i,this.folder)).result,this.updateItems()}render(){var e,t;const{portal:a,user:r,active:s,i18n:o,folder:n,items:l,mode:c,isEmpty:d}=this;if(n)return d?(0,i.h)("calcite-modal",{widthScale:"s",open:s,kind:"danger",onCalciteModalClose:()=>this.arcgisDeleteFolderClose.emit()},(0,i.h)("div",{slot:"header"},o.deleteFolder),(0,i.h)("div",{slot:"content",innerHTML:o.message.empty.replace("${title}",n.title)}),(0,i.h)("calcite-button",{slot:"secondary",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},width:"full"},o.cancel),(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",kind:"danger","data-id":"nextButton",onClick:async()=>{await this.handleDeleteFolder(),this.active=!1},width:"full"},o.delete)):(0,i.h)("arcgis-delete-items",{items:l,portal:a,user:r,active:s,showSelectedItemsCount:!1,primaryBucket:(null===(e=this.mode)||void 0===e?void 0:e.includes("PROTECTED"))?"protectedItems":"unrecyclableItems",allowPermanentlyDeleteDeselect:!1,showConfirmDeleteMessage:"PROTECTED"===c&&(null===(t=null==a?void 0:a.sourceJSON)||void 0===t?void 0:t.recycleBinEnabled),closeOnConfirm:!1,onArcgisDeleteItemsModeChange:e=>{this.mode=e.detail},onArcgisDeleteItemsClose:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},onArcgisDeleteItemsDelete:async()=>{await this.handlePostDeleteItems(),this.active=!1}},(0,i.h)("div",{slot:"header"},o.deleteFolder),(0,i.h)("div",{slot:"message"},this.renderMessage()))}get el(){return(0,i.d)(this)}},w=class{constructor(e){(0,i.r)(this,e),this.arcgisDeleteItemsDelete=(0,i.c)(this,"arcgisDeleteItemsDelete",7),this.arcgisDeleteItemsError=(0,i.c)(this,"arcgisDeleteItemsError",7),this.arcgisDeleteItemsClose=(0,i.c)(this,"arcgisDeleteItemsClose",7),this.arcgisDeleteItemsModeChange=(0,i.c)(this,"arcgisDeleteItemsModeChange",7),this.additionalDependentItemsTotal=0,this.deletePrimaryAction="RECYCLE",this.headerTitle="",this.configurePermanentlyDeleteOverrideUI=()=>{var e;const{i18n:t}=this;this.headerTitle=t.permanentlyDelete,this.primaryButtonText=t.permanentlyDelete,this.deleteMode="UNRECYCLABLE",this.permanentDeleteOverrideEnabled=!0,null===(e=this.modalRef)||void 0===e||e.setFocus()},this.renderContent=()=>{var e,t;const{portal:a,items:r,inRecycleBin:s,deleteItemsBuckets:o,deleteMode:n,deletePrimaryAction:l,permanentDeleteOverrideEnabled:c,configurePermanentlyDeleteOverrideUI:d,showConfirmDeleteMessage:h,allowPermanentlyDeleteDeselect:g}=this;return(0,i.h)(i.F,null,(0,i.h)("slot",{name:"message"}),this.showCompositeDisclaimer?(0,i.h)("arcgis-delete-items-composite-disclaimer",{buckets:this.deleteItemsBuckets,additionalDependentItemsTotal:this.additionalDependentItemsTotal}):(null!==(t=null===(e=a.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled)&&void 0!==t?t:a.recycleBinEnabled)&&!s?(0,i.h)("arcgis-delete-items-recycle",{items:r,buckets:o,mode:n,primaryAction:l,primaryBucket:this.primaryBucket,allowPermanentlyDeleteDeselect:g,permanentlyDeleteOverridden:c,disableLinks:this.disableLinks,onArcgisDeleteItemsPermanentlyDeleteOverride:()=>{d()},onArcgisDeleteItemsPermanentlyDeleteBucketToggle:({detail:e})=>{this.preventNonRecyclableItemDelete=e},showSelectedItemsCount:this.showSelectedItemsCount}):h?(0,i.h)("arcgis-delete-items-permanent",{buckets:o,mode:n}):null)},this.handleDelete=async()=>{var e,t;this.isLoading=!0;const{unprotectedItems:a,unrecyclableItems:i}=this.deleteItemsBuckets;let r=[],s=[];try{if(this.permanentDeleteOverrideEnabled){const e=[...a];!this.preventNonRecyclableItemDelete&&e.push(...i),r=await this.deleteItems(e.map((e=>e.item)),!0)}else s=a.length>0?await this.deleteItems(a.map((e=>e.item))):[],r=i.length>0&&!this.preventNonRecyclableItemDelete?await this.deleteItems(i.map((e=>e.item)),!0):[];const e=(0,h.s)({deletedItems:s,permanentlyDeletedItems:r});e.successes.length>0&&this.arcgisDeleteItemsDelete.emit({deletedItems:[...e.successes.filter((e=>!e.permanentDelete))],permanentlyDeletedItems:[...e.successes.filter((e=>e.permanentDelete))]});const{errors:t}=e;t.length>0&&this.arcgisDeleteItemsError.emit(t),this.closeOnConfirm&&(this.active=!1)}catch(a){this.arcgisDeleteItemsError.emit({messageCode:null!==(t=null===(e=a.details)||void 0===e?void 0:e.messageCode)&&void 0!==t?t:"unknown"}),this.isLoading=!1}},this.deleteItems=async(e,t=!1)=>1===e.length?[await(0,h.d)(e[0],this.portal,t)]:(await(0,h.a)(e,this.portal,t)).results,this.user=void 0,this.portal=void 0,this.items=[],this.inRecycleBin=void 0,this.active=void 0,this.showSelectedItemsCount=!0,this.showConfirmDeleteMessage=!0,this.allowPermanentlyDeleteDeselect=!0,this.disableLinks=void 0,this.primaryBucket="unrecyclableItems",this.closeOnConfirm=!0,this.allowDiscouraged=void 0,this.store=(0,d.c)({}),this.deleteItemsBuckets={unrecyclableItems:[],unprotectedItems:[],protectedItems:[],selectedCompositeItems:[]},this.permanentDeleteOverrideEnabled=!1,this.showCompositeDisclaimer=!1,this.isLoading=!1,this.preventNonRecyclableItemDelete=!1}async componentWillLoad(){const e=await(0,o.g)(this.el);this.i18n=e[0],this.store.state.i18n=this.i18n,this.store.state.portal=this.portal,this.store.state.locale=(0,o.a)(this.el),this.determineDeleteState()}async handleItemUpdate(){this.determineDeleteState({fetch:!0})}async determineDeleteState(e={fetch:!0}){const{fetch:t}=e;try{if(this.inRecycleBin)return this.deleteMode="UNRECYCLABLE",this.deletePrimaryAction="PERMANENTLY_DELETE",this.primaryButtonText=this.i18n.permanentlyDelete,this.headerTitle=this.i18n.permanentlyDelete,void(this.deleteItemsBuckets.unrecyclableItems=this.items.map((e=>({item:e}))));t&&(this.isLoading=!0,this.deleteItemsBuckets=Object.assign({},await(0,h.b)(this.items,this.portal,this.allowDiscouraged)),this.additionalDependentItemsTotal=this.countDependentItems()-this.deleteItemsBuckets.selectedCompositeItems.length,this.showCompositeDisclaimer=this.additionalDependentItemsTotal>0,this.isLoading=!1),this.deleteMode=(0,h.c)(this.deleteItemsBuckets),this.arcgisDeleteItemsModeChange.emit(this.deleteMode),this.deletePrimaryAction=(0,h.e)(this.deleteMode),this.primaryButtonText=this.i18n["PERMANENTLY_DELETE"===this.deletePrimaryAction?"permanentlyDelete":"delete"],this.headerTitle=this.i18n["PERMANENTLY_DELETE"===this.deletePrimaryAction?"permanentlyDelete":(0,h.i)(this.deleteItemsBuckets.unprotectedItems)||1!==this.items.length?"deleteItems":"deleteItem"]}catch(e){console.error(e)}}countDependentItems(){const{unprotectedItems:e}=this.deleteItemsBuckets;return e.reduce(((e,t)=>{var a,i,r,s;return e+(null!==(s=(null===(a=t.relatedItems)||void 0===a?void 0:a.isComposite)&&(null===(r=null===(i=t.relatedItems)||void 0===i?void 0:i.resultData)||void 0===r?void 0:r.count))&&void 0!==s?s:0)}),0)}renderDeleteButton(){const{isLoading:e,i18n:t,primaryButtonText:a}=this;return(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",kind:"danger","data-id":"nextButton",onClick:async()=>this.handleDelete(),width:"full",disabled:e||"PROTECTED_UNRECYCLABLE"===this.deleteMode&&this.preventNonRecyclableItemDelete},null!=a?a:t.delete)}renderCompositeDisclaimerNextButton(){const{isLoading:e,i18n:t}=this;return(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:async()=>this.showCompositeDisclaimer=!1,width:"full",disabled:e},t.next)}render(){const{i18n:e,active:t,isLoading:a,headerTitle:r,deletePrimaryAction:s,permanentDeleteOverrideEnabled:o,additionalDependentItemsTotal:n,showCompositeDisclaimer:l,renderContent:c}=this,d=o||!l&&n>0;return(0,i.h)("calcite-modal",{key:"c15ffcc8486c184c501c0b84804109fe404be757",open:t,widthScale:"s",kind:l?"info":"danger",outsideCloseDisabled:!0,ref:e=>this.modalRef=e,onCalciteModalClose:()=>{this.arcgisDeleteItemsClose.emit(),this.active=!1}},(0,i.h)("span",{key:"1b14fcda2b73a33fc48e1fd41a7c6bb67bddca48",slot:"header",class:"header"},(0,i.h)("slot",{key:"66c73c07bc564a7e45ef0960097bf804b0d5418c",name:"header"},r)),(0,i.h)("div",{key:"84fa97296d11c098eab599f76d76e022fb9cc9b3",slot:"content",class:"content"},a?(0,i.h)("calcite-scrim",{loading:!0}):c()),!a&&(0,i.h)(i.F,{key:"ece7227492604074b5eeed810d90a3c43942bd27"},(0,i.h)("div",{key:"1986a91ab6f3e66e890ddb715e8478d48b2f63e5",slot:"back"},d&&(0,i.h)("calcite-button",{key:"9c88a9e539d72bb874f4c4d8583958651c77b2d0",appearance:"outline-fill",kind:"neutral","data-id":"backButton",onClick:()=>{o?(this.permanentDeleteOverrideEnabled=!1,this.determineDeleteState({fetch:!1})):this.showCompositeDisclaimer=!0},width:"full",disabled:a},e.back)),(0,i.h)("calcite-button",{key:"41028d9c6e47adfc3021e56cac8100fd6c30c9e7",slot:"secondary",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{this.active=!1},width:"full"},e.cancel),"NONE"!==s&&(this.showCompositeDisclaimer?this.renderCompositeDisclaimerNextButton():this.renderDeleteButton())))}get el(){return(0,i.d)(this)}static get watchers(){return{items:["handleItemUpdate"]}}};w.style=".content{display:flex;min-height:72px;flex-direction:column;justify-content:center}::slotted([slot=message]){margin-bottom:1rem}";const D=async(e,t,a)=>{const i=a?`${(0,l.g)(t)}/content/groups/${a.id}/`:`${(0,l.g)(t)}`,r=a?{q:n.H,countFields:"access,contentstatus,groupCategories"}:{q:`orgid:${e.orgId} ${n.H}`,countFields:"categories"};try{const{aggregations:e}=await(0,c.r)(`${i}search`,Object.assign(Object.assign({},r),{countSize:200,num:0,f:"json"}));return{result:a?e.counts.find((({fieldName:e})=>"groupCategories"===e)):e.counts[0]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},b=e=>{e.forEach((e=>{e.description&&delete e.description,e.categories?b(e.categories):e.categories=[]}))},S=e=>{const t=structuredClone(e);return b(t),t},I=class{constructor(e){(0,i.r)(this,e),this.workflowCancel=(0,i.c)(this,"workflowCancel",7),this.newSchemaWorkflowComplete=(0,i.c)(this,"newSchemaWorkflowComplete",7),this.deleteAllSchema=(0,i.c)(this,"deleteAllSchema",7),this.hasChangeSinceLastOpen=!1,this.didFetchTemplates=!1,this.templateInfo={custom:{schema:[{title:"Categories",categories:[]}]},arcgis:{schema:[],learnMoreId:"120001309"},iso:{schema:[],learnMoreId:"120001310"},inspire:{schema:[],learnMoreId:"120001311"}},this.fetchCategoryData=async()=>{var e,t;const{user:a,portal:i,setCategorySchema:r,group:s,templateInfo:o,didFetchTemplates:n}=this,[{result:l},{result:c}]=await Promise.all([(0,g.g)({user:a,portal:i,group:s}),D(a,i,s)]);if(null===(t=null===(e=null==l?void 0:l[0])||void 0===e?void 0:e.categories)||void 0===t?void 0:t.length)r(l),this.categoryAggregationData=c;else if(this.rootCategoryTitle=u.U.replace("/",""),this.categorySchema=[],this.newCategoryMode=!0,!n){this.isFetchingTemplate=!0;const{result:e}=await(async e=>{try{const[{categorySchema:t},{categorySchema:a},{categorySchema:i}]=await Promise.all([(0,g.a)(e,"LivingAtlas"),(0,g.a)(e,"Inspire"),(0,g.a)(e,"ISO")]);return{result:{LivingAtlas:t,Inspire:a,ISO:i}}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(i);o.arcgis.schema=e.LivingAtlas,o.iso.schema=e.ISO,o.inspire.schema=e.Inspire,this.didFetchTemplates=!0,this.isFetchingTemplate=!1}},this.setCategorySchema=e=>{this.rootCategoryTitle=e[0].title,this.categorySchema=e[0].categories},this.closeDialog=()=>{this.schemaToConfirm=null,this.hasUnsavedChanges=!1,this.workflowCancel.emit({hasChangeSinceLastOpen:this.hasChangeSinceLastOpen})},this.updateSchema=async({schemaToUpdate:e,ignoreNewCategoryMode:t=!1,optimisticUpdate:a=!0})=>{const{portal:i,rootCategoryTitle:r,handleError:s,fetchCategoryData:o,newCategoryMode:n,group:d,deleteAllSchema:h}=this;if(n&&!t)return this.hasUnsavedChanges=e.length>0,this.categorySchema=e,!0;this.hasChangeSinceLastOpen=!0;const g=this.categorySchema;a&&(this.categorySchema=e);return(async()=>{if(this.error=null,0===e.length){const{error:e}=await(async(e,t)=>{try{const a=t?(0,y.a)(e,t):`${(0,l.g)(e)}/portals/${e.id}/`;return await(0,c.r)(`${a}deleteCategorySchema`,{},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(i,d);return void(e?(s("generic"),a&&(this.categorySchema=g)):(this.newCategoryMode=!0,h.emit()))}const{error:t}=await(async({portal:e,group:t,categorySchema:a})=>{try{const i=t?(0,y.a)(e,t):`${(0,l.g)(e)}/portals/${e.id}/`;return await(0,c.r)(`${i}assignCategorySchema`,{categorySchema:JSON.stringify({categorySchema:a})},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})({portal:i,categorySchema:[{title:r,categories:n?S(e):e}],group:d});t?(s("generic"),a&&(this.categorySchema=g)):(this.hasUnsavedChanges=!1,await o())})(),!0},this.finishSetupNewCategorySchema=async()=>{const{newSchemaWorkflowComplete:e,categorySchema:t,updateSchema:a}=this;await a({schemaToUpdate:t,ignoreNewCategoryMode:!0})&&(this.newCategoryMode=!1,e.emit({newSchema:t}))},this.renderTemplates=()=>{const{templateInfo:e,i18n:t,chosenTemplate:a,config:r,setCategorySchema:s}=this,{helpBase:o,helpMap:n}=r;return(0,i.h)("div",{class:"template-container"},(0,i.h)("p",{class:"template-title"},t.template.title),(0,i.h)("calcite-tile-select-group",null,Object.keys(e).map((r=>{const{learnMoreId:l}=e[r];return(0,i.h)("calcite-tile-select",{key:r,checked:a===r,description:t.template.templateList[r].message,heading:t.template.templateList[r].title,width:"auto",value:r,onCalciteTileSelectChange:t=>{const a=t.target.value;this.chosenTemplate=a,s(e[a].schema),this.hasUnsavedChanges="custom"!==a}},l&&(0,i.h)("calcite-link",{href:`${o}${n[l]}`,role:"presentation",class:"template-link",iconEnd:"launch",target:"_blank",rel:"noopener noreferrer"},t.template.learnMore))}))))},this.renderConfirmationModal=()=>{const{i18n:e,handleUpdateSchemaWithCount:t,schemaToConfirm:a,lang:r}=this;if(!a)return null;const o=e.warning["delete"===a.type?"deleteInUseCategory":"changeTitleInUseCategory"];return(0,i.h)("calcite-modal",{kind:"danger",scale:"m",widthScale:"s",onCalciteModalClose:e=>{e.stopPropagation(),this.schemaToConfirm=null},open:!!a,class:"confirm-modal",style:{"--calcite-modal-scrim-background":"rgba(255, 255, 255, 0.5)"}},(0,i.h)("div",{slot:"header"},o.title),(0,i.h)("div",{slot:"content",class:"confirm-modal-content"},(0,s.b)(r,o.message,a.count).replace("${newTitle}","change-title"===a.type?a.newTitle:"")),(0,i.h)("calcite-button",{slot:"secondary",appearance:"outline","data-id":"cancelButton",onClick:()=>{this.schemaToConfirm=null,"change-title"===a.type&&(this.categorySchema=[...this.categorySchema])},width:"full"},e.cancel),(0,i.h)("calcite-button",{slot:"primary",appearance:"solid","data-id":"nextButton",onClick:t,width:"full"},o.cta))},this.handleUpdateSchemaWithCount=async()=>{const{group:e,schemaToConfirm:t,portal:a,updateSchema:i,categoryAggregationData:r}=this;this.isUpdatingCategoryWithCount=!0,this.schemaToConfirm=null;await i({schemaToUpdate:t.schema})&&(await(0,g.d)({path:t.path,portal:a,updateInfo:"delete"===t.type?{type:"delete"}:{type:"change-title",newTitle:t.newTitle},group:e}),"change-title"===t.type&&(r.fieldValues=r.fieldValues.map((e=>{const a=t.path.toLowerCase(),i=(0,u.a)(a,t.newTitle.toLowerCase());return e.value.toLowerCase()===a?Object.assign(Object.assign({},e),{value:i}):e})),this.categoryAggregationData=Object.assign({},r))),this.isUpdatingCategoryWithCount=!1},this.handleError=e=>{const{i18n:t}=this;let a=t.error[e].message;"maxCharacter"===e&&(a=a.replace("${maxCharacter}",`${p.M}`)),this.error={title:t.error[e].title,message:a}},this.getUnsavedChangesConfirmation=()=>window.confirm(this.i18n.hasUnsavedChanges),this.user=void 0,this.portal=void 0,this.config=void 0,this.group=void 0,this.isActive=void 0,this.newCategoryMode=!1,this.categorySchema=[],this.categoryAggregationData={fieldName:"categories",fieldValues:[]},this.hasUnsavedChanges=void 0,this.error=null,this.isFetchingSchemaOnActiveChange=!1,this.isFetchingTemplate=!1,this.isUpdatingCategoryWithCount=!1,this.schemaToConfirm=void 0,this.rootCategoryTitle=void 0,this.chosenTemplate="custom"}async componentWillLoad(){const e=await(0,o.g)(this.el);this.i18n=e[0],this.lang=e[1]}componentDidLoad(){this.handleIsActiveChange()}async handleIsActiveChange(){this.hasChangeSinceLastOpen=!1,this.chosenTemplate="custom",this.error=null,this.schemaToConfirm=null,!this.isActive||(0,m.a)(this.user)&&!this.group||(this.isFetchingSchemaOnActiveChange=!0,await this.fetchCategoryData(),this.isFetchingSchemaOnActiveChange=!1)}render(){const{newCategoryMode:e,categorySchema:t,categoryAggregationData:a,rootCategoryTitle:r,isActive:s,isFetchingSchemaOnActiveChange:o,closeDialog:n,i18n:l,group:c,updateSchema:d,error:h,renderTemplates:g,chosenTemplate:u,isFetchingTemplate:m,workflowCancel:p,finishSetupNewCategorySchema:y,hasUnsavedChanges:C,handleError:v,renderConfirmationModal:f,isUpdatingCategoryWithCount:w,getUnsavedChangesConfirmation:D}=this;return!s||o?null:(0,i.h)("calcite-modal",{open:s,beforeClose:async()=>{if(C&&!D())throw new Error},onCalciteModalClose:n,scale:"m",class:{modal:!0,"modal--large":e},outsideCloseDisabled:!0},(0,i.h)("div",{slot:"header",class:"header"},l[c?"modalGroupHeader":"modalHeader"]),(0,i.h)("div",{slot:"content",class:"stage"},f(),(0,i.h)("calcite-alert",{icon:!0,open:!!h,label:null==h?void 0:h.title,kind:"danger",onCalciteAlertClose:()=>this.error=null},(0,i.h)("div",{slot:"message"},null==h?void 0:h.message)),(m||w)&&(0,i.h)("calcite-scrim",{loading:!0},l.loadingText),e&&g(),(0,i.h)("div",{class:{"inner-container":!0,"inner-container--new-category":e}},!e&&(0,i.h)("p",{class:"help-text"},l.helpText),(0,i.h)("arcgis-schema-editor",{newCategoryMode:e,showInputByDefault:"custom"===u,canEditCategory:()=>!0,categoryAggregationData:a,categorySchema:t,rootCategoryPath:`/${r}`,canCollapseAll:!e,saveNewTitle:async({newSchema:e,categoryCount:t,path:a,newTitle:i})=>t?(this.schemaToConfirm={schema:e,count:t,path:a,newTitle:i,type:"change-title"},!0):d({schemaToUpdate:e,optimisticUpdate:!1}),saveNewCategory:async({newSchema:e})=>d({schemaToUpdate:e}),onArcgisSchemaEditorDelete:async({detail:{newSchema:e,categoryCount:t,path:a}})=>t?this.schemaToConfirm={schema:e,count:t,path:a,type:"delete"}:d({schemaToUpdate:e}),onArcgisSchemaEditorListOrderChange:async({detail:{newSchema:e}})=>d({schemaToUpdate:e}),onArcgisSchemaEditorInvalidMove:({detail:{errorCode:e}})=>{v(e)},onArcgisSchemaEditorTitleInvalid:({detail:{errorCode:e}})=>{v(e)}}))),e&&(0,i.h)(i.F,null,(0,i.h)("calcite-button",{slot:"secondary",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{C&&!D()||p.emit()},width:"full"},l.cancel),(0,i.h)("calcite-button",{slot:"primary",appearance:"solid","data-id":"nextButton",onClick:y,width:"full",disabled:!C},l.finishSetup)))}get el(){return(0,i.d)(this)}static get watchers(){return{isActive:["handleIsActiveChange"]}}};I.style=".stage{height:100%;--tw-translate-x:0px;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));overflow:hidden;display:flex}.modal{--calcite-modal-content-padding:0;--calcite-modal-width:48rem;--calcite-modal-height:90vh;--calcite-modal-content-background:var(--calcite-color-background)}.modal--large{--calcite-modal-width:1080px}.template-container{overflow:auto;width:20rem;padding:1rem}.template-title{margin-top:0px;margin-bottom:0px;margin-bottom:1rem;font-size:1.125rem}.template-link{font-size:0.75rem}.inner-container{overflow:auto;box-sizing:border-box;width:100%;padding:2rem}.inner-container--new-category{padding-inline-start:0.5rem;padding:1rem}.help-text{margin-top:0px}.confirm-modal{--calcite-modal-width:32rem;--calcite-modal-height:auto}.confirm-modal-content{padding:1rem}";const T=class{constructor(e){(0,i.r)(this,e),this.arcgisSchemaEditorListOrderChange=(0,i.c)(this,"arcgisSchemaEditorListOrderChange",7),this.arcgisSchemaEditorDelete=(0,i.c)(this,"arcgisSchemaEditorDelete",7),this.arcgisSchemaEditorInvalidMove=(0,i.c)(this,"arcgisSchemaEditorInvalidMove",7),this.arcgisSchemaEditorTitleInvalid=(0,i.c)(this,"arcgisSchemaEditorTitleInvalid",7),this.prevChangeEventPayload=null,this.prevSchema=null,this.handleExpandCollapseAllClick=()=>{this.isCollapsedAll=!this.isCollapsedAll,this.itemRef.expandOrCollapseAll(this.isCollapsedAll)},this.handleListOrderChange=e=>{const{categorySchema:t,arcgisSchemaEditorListOrderChange:a,uiCategory:i,rootCategoryPath:r}=this,s=(0,p.g)(i,e,r);a.emit(Object.assign(Object.assign({},e),{newSchema:s})),this.prevSchema=t},this.handleDeleteClick=e=>{const{arcgisSchemaEditorDelete:t,uiCategory:a,rootCategoryPath:i}=this,r=(0,p.a)(a,e,i);t.emit(Object.assign(Object.assign({},e),{path:(0,p.b)({uiPath:e.path,rootCategoryPath:i,uiCategory:a}),newSchema:r})),this.prevSchema=this.categorySchema},this.handleSaveNewTitle=async e=>{const{saveNewTitle:t,uiCategory:a,arcgisSchemaEditorTitleInvalid:i,rootCategoryPath:r}=this,s=e.path,o=(0,p.c)({targetParentCategory:(0,p.d)(a,s,r).parentCategory,targetCategory:{path:s,title:e.newTitle}});if(o)return i.emit(Object.assign(Object.assign({},e),{errorCode:o})),!1;const n=this.categorySchema,l=(0,p.e)(a,e,r),c=await t(Object.assign(Object.assign({},e),{path:(0,p.b)({uiPath:s,rootCategoryPath:r,uiCategory:a}),newSchema:l}));if(c){this.prevSchema=n;const{targetCategory:t,parentCategory:i}=(0,p.d)(a,e.path,r);t.title=e.newTitle,t.path=(0,u.b)(i.path,t)}return c},this.handleSaveNewCategory=async e=>{const{saveNewCategory:t,uiCategory:a,arcgisSchemaEditorTitleInvalid:i,rootCategoryPath:r}=this,s=e.path,{parentCategory:o,targetCategory:n}=(0,p.d)(a,s,r),l=(0,p.c)({targetParentCategory:null!=n?n:o,targetCategory:{path:s,title:e.newTitle}});if(l)return i.emit(Object.assign(Object.assign({},e),{errorCode:l})),!1;const c=this.categorySchema,d=(0,p.f)(a,e,r),h=await t(Object.assign(Object.assign({},e),{newSchema:d}));return h&&(this.prevSchema=c),h},this.isMoveValid=e=>{const{maxDepth:t,arcgisSchemaEditorInvalidMove:a,prevChangeEventPayload:i,rootCategoryPath:r}=this,{fromCategory:s,toCategory:o,fromItemCategory:n}=e,{fromCategory:l,fromItemCategory:c,toCategory:d,fromIndex:h,toIndex:g}=null!=i?i:{};if(i&&l.path===s.path&&c.path===n.path&&d.path===o.path&&h===e.fromIndex&&g===e.toIndex)return this.prevChangeEventPayload=null,null;this.prevChangeEventPayload=e;const{path:u}=o;if("number"==typeof t&&u&&(0,p.h)(u,r)>t)return a.emit(Object.assign(Object.assign({},e),{errorCode:"maxDepthExceeded"})),!1;const m=(0,p.c)({targetParentCategory:o,targetCategory:n});return!m||(a.emit(Object.assign(Object.assign({},e),{errorCode:m})),!1)},this.categorySchema=void 0,this.rootCategoryPath=void 0,this.categoryAggregationData=void 0,this.showInputByDefault=!1,this.newCategoryMode=void 0,this.maxDepth=2,this.maxCategories=900,this.canCollapseAll=!0,this.canEditCategory=void 0,this.saveNewTitle=void 0,this.saveNewCategory=void 0,this.isCollapsedAll=!1,this.uiCategory=void 0,this.canAddCategory=!1,this.canDeleteCategory=!1}async componentWillLoad(){const e=await(0,o.g)(this.el);this.i18n=e[0],this.categorySchemaChangeHandler()}async revertSchema(){this.categorySchema=this.prevSchema}categorySchemaChangeHandler(){const{categorySchema:e,categoryAggregationData:t,rootCategoryPath:a}=this;this.uiCategory=(0,p.i)({categorySchema:e,categoryAggregationData:t,rootCategoryPath:a});const i=(0,p.j)(e);this.canAddCategory=i<this.maxCategories,this.canDeleteCategory=!0}render(){const{uiCategory:e,rootCategoryPath:t,newCategoryMode:a,showInputByDefault:r,canAddCategory:s,canDeleteCategory:o,canEditCategory:n,canCollapseAll:l,i18n:c,isCollapsedAll:d,maxDepth:h,handleExpandCollapseAllClick:g,handleListOrderChange:u,handleSaveNewTitle:m,handleSaveNewCategory:p,isMoveValid:y}=this;return(0,i.h)(i.H,{key:"87166543c6c2d4a0223362f6d9a96d2d6ddd2863"},l&&(0,i.h)("calcite-button",{key:"4b8381acd60ca329e76ca4bd9a41ca1486aded0d",iconStart:d?"chevron-down":"chevron-up",appearance:"transparent",onClick:g,class:"expand-collapse-all"},d?c.expandAll:c.collapseAll),(0,i.h)("arcgis-schema-editor-category",{key:"c37a11b257fdbedc15975b9be253fdfa76354385",category:e,rootCategoryPath:t,newCategoryMode:a,showInputByDefault:r,canAddCategory:s,canDeleteCategory:o,canEditCategory:n,i18n:c,maxDepth:h,isMoveValid:y,onListOrderChanged:e=>u(e.detail),onArcgisSchemaEditorInternalDeleteClick:e=>this.handleDeleteClick(e.detail),saveNewTitle:m,saveNewCategory:p,ref:e=>this.itemRef=e}))}get el(){return(0,i.d)(this)}static get watchers(){return{rootCategoryPath:["categorySchemaChangeHandler"],categorySchema:["categorySchemaChangeHandler"],categoryAggregationData:["categorySchemaChangeHandler"]}}};T.style=".expand-collapse-all{margin-bottom:1rem}"},29259:(e,t,a)=>{a.d(t,{U:()=>i,a:()=>o,b:()=>r,g:()=>s});const i="/Categories",r=(e,t,a=!0)=>{const i=null!=e?e:"";return`${i}${i.endsWith("/")?"":"/"}${a?t.title.toLocaleLowerCase():t.title}`};function s(e){var t;let a=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.title;return a&&"/"!==a.charAt(0)&&(a=`/${a}`),a||i}const o=(e,t)=>`${e.replace(/\/([^\/]+)$/,`/${t}`)}`},43780:(e,t,a)=>{a.d(t,{a:()=>u,b:()=>h,c:()=>g,d:()=>p,f:()=>d,g:()=>c,u:()=>m});var i=a(46581),r=a(29259),s=a(31670),o=a(59673),n=a(59296),l=a(94788);const c=async({portal:e,user:t,group:a,useCache:i=!1})=>{var r;try{const s=await(a?h(a.id,e,i):d(e,t,i));return{result:null!==(r=null==s?void 0:s.categorySchema)&&void 0!==r?r:null}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}};async function d(e,t,a=!0){if(null!=e||(e=s.c.portal),null!=t||(t=s.c.user),!(null==e?void 0:e.id)||t&&(0,n.a)(t))return null;const r=()=>(0,i.r)(`${(0,l.g)(e)}portals/${e.id}/categorySchema`);return a?(0,i.f)(r,"categorySchema",e.id):r()}async function h(e,t,a=!0){if(null!=t||(t=null===s.c||void 0===s.c?void 0:s.c.portal),!e||!t)return null;const r=()=>(0,i.r)(`${(0,o.a)(t,{id:e})}categorySchema`);return a?(0,i.f)(r,"categorySchema",e):r()}async function g(e,t,a=!0){if(null!=e||(e=s.c.portal),null!=t||(t=s.c.user),!(null==e?void 0:e.id)||t&&(0,n.a)(t))return null;const r=()=>(0,i.r)(`${(0,l.g)(e)}portals/${e.id}/memberCategorySchema`);return a?(0,i.f)(r,"memberCategorySchema",e.id):r()}async function u(e,t,a=!0){const r=()=>async function(e,t){var a;const r=(0,l.g)(e),s=(0,l.d)(e),n=await(0,i.r)(`${r}portals/self?culture=${s}`),c=await(0,i.r)(`${r}community/groups?q=${n.contentCategorySetsGroupQuery}`),d=null===(a=null==c?void 0:c.results)||void 0===a?void 0:a[0],h=(await(0,i.r)((0,o.g)(e,d),{q:`typekeywords: ${t}`})).results[0];return(0,i.r)(`${r}content/items/${h.id}/data`)}(e,t);return a?(0,i.f)(r,"categorySchema",t):r()}async function m({categories:e,itemIds:t,portal:a}){try{const r=`${(0,l.g)(a)}/content/updateItems`,s=JSON.stringify(t.map((t=>({[t]:{categories:Array.isArray(e)?e:e[t]}}))));return{result:await(0,i.r)(r,{items:s},{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}const p=async({path:e,portal:t,group:a,updateInfo:i})=>{try{const s=(await y({category:e,portal:t,group:a,num:1})).total;if(0===s)return console.warn(`No items found with category ${e} when updating schema`),{};const o=100,n=Math.ceil(s/o),l=[];for(let s=0;s<n;s++)l.push(y({category:e,portal:t,group:a,start:s*o,num:o}).then((({results:t})=>{const a={};return t.forEach((t=>{const s="change-title"===i.type?t.categories.map((t=>{const a=(0,r.a)(e,i.newTitle);return t===e?a:t.replace(`${e}/`,`${a}/`)})):t.categories.filter((t=>!t.startsWith(e)));a[t.id]=s})),a})));const c=await Promise.all(l);return await Promise.all(c.map((e=>m({categories:e,itemIds:Object.keys(e),portal:t})))),{}}catch(t){return console.error(`Error ${i.type} items schema from path ${e}:`,t),{error:{code:"unhandledError"}}}},y=({category:e,num:t=100,start:a=0,portal:r,group:s})=>{const n={start:a,num:t,categories:JSON.stringify([e])},c=s?(0,o.g)(r,s):`${(0,l.g)(r)}search`;return(0,i.r)(c,Object.assign(Object.assign({},n),{q:s?void 0:`orgid: ${r.id}`}))}},59673:(e,t,a)=>{a.d(t,{a:()=>r,g:()=>s});var i=a(94788);const r=(e,t)=>(0,i.a)(`${(0,i.g)(e)}community/groups/${t.id}`),s=(e,t)=>`${((e,t)=>(0,i.a)(`${(0,i.g)(e)}content/groups/${t.id}`))(e,t)}search`},59296:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>u,c:()=>g,d:()=>h,e:()=>m,f:()=>y,g:()=>p,h:()=>T,i:()=>c,j:()=>l,k:()=>C,l:()=>O,m:()=>f,n:()=>w,o:()=>I,p:()=>b,q:()=>D,r:()=>S,s:()=>k,t:()=>d,u:()=>E,v:()=>o,w:()=>n});var i=a(2174);const r=e=>{var t,a,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(a=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==a?a:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function s(e){return e&&!e.orgId}function o(e,t){return(0,i.u)(e,t)||"update"===e.itemControl||(0,i.c)([e],t)&&g(t)}function n(e,t){const a=(0,i.c)([e],t),r=(0,i.u)(e,t)||g(t)&&a,s=m(t)&&v(t);return!!(r||a&&s)}const l=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageLicenses"))};function c(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}const h=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("Developer")};function g(e){return"org_admin"===r(e)||"account_admin"===r(e)}function u(e){return["org_admin","account_admin"].includes(r(e))&&!(null==e?void 0:e.roleId)}function m(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function p(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function y(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function C(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:assignToGroups"))}const v=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))};function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function b(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function T(e,t,a,i){const r=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),s=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!g(t)&&!s||!(null==a?void 0:a.isPortal)&&!r)}function E(e){return!!e&&(!m(e)||m(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const k=({items:e,user:t,portal:a})=>{const r=e[0],s=r.owner;if(a.isPortal&&s!==t.username&&s.includes("esri_")&&!["esri_livingatlas"].includes(s))return!1;const n=(0,i.u)(r,t),l=m(t),c=A(t),d=o(r,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!l&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||f(e)||w(e)||!!t.canSharePublic&&D(e)}(t,a)||A(t));return n||d||(0,i.c)(e,t)&&c};function A(e){return I(e)||b(e)||S(e)}function O(e){const t=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>t.includes(e)))}},96295:(e,t,a)=>{a.d(t,{H:()=>i,R:()=>r});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',r="Indoors Map Configuration,Code Attachment"},98525:(e,t,a)=>{a.d(t,{M:()=>C,a:()=>n,b:()=>y,c:()=>p,d:()=>c,e:()=>s,f:()=>o,g:()=>r,h:()=>l,i:()=>d,j:()=>m});var i=a(29259);const r=(e,{fromCategory:{path:t},toCategory:{path:a},fromIndex:i,toIndex:r},s)=>{const o=structuredClone(e),n=c(o,t,s);let l=n;t!==a&&(l=c(o,a,s));const[d]=n.targetCategory.categories.splice(i,1);return l.targetCategory.categories.splice(r,0,d),h(o)},s=(e,{newTitle:t,path:a},i)=>{const r=structuredClone(e);return c(r,a,i).targetCategory.title=t,h(r)},o=(e,{newTitle:t,path:a},i)=>{const r=structuredClone(e),s=a.replace(/\/[^/]+$/,"");if(s){const{targetCategory:e}=c(r,s,i);e.categories.push({title:t,categories:[],count:0,path:null})}else r.categories.push({title:t,categories:[],count:0,path:null});return h(r)},n=(e,{path:t},a)=>{const i=structuredClone(e),{targetIndex:r,parentCategory:s}=c(i,t,a);return null==s||s.categories.splice(r,1),h(i)},l=(e,t)=>{var a;return null!==(a=null==e?void 0:e.toLocaleLowerCase().replace(t.toLowerCase(),"").slice(1).split("/").length)&&void 0!==a?a:0},c=(e,t,a)=>{var r;const s=a.toLocaleLowerCase();if(null==t||t===s)return{targetCategory:e,targetIndex:1,parentCategory:null,originalPath:t};const o=t.slice(1).split("/");let n=0===t.toLocaleLowerCase().indexOf(s)?(0,i.b)("",{title:o.shift()}):"",l=null,c=e,d=0,h=n;do{n=(0,i.b)(n,{title:o.shift()}),l=c,d=c.categories.findIndex((e=>e.path.toLocaleLowerCase()===n.toLocaleLowerCase())),c=c.categories[d],h+=`/${null!==(r=null==c?void 0:c.title)&&void 0!==r?r:""}`}while(o.length>0&&c.categories.length);return h=h.replace(s,a),{targetCategory:c,targetIndex:d,parentCategory:l,originalPath:h}},d=({categoryAggregationData:e,categorySchema:t,rootCategoryPath:a})=>{var i,r;const s=a.toLocaleLowerCase();return{title:"",path:null,count:null!==(r=null===(i=e.fieldValues.find((e=>e.value===s)))||void 0===i?void 0:i.count)&&void 0!==r?r:0,categories:u({parentPath:null,categorySchema:t,categoryAggregationData:e,lowerCaseRootCategoryPath:s})}},h=e=>e.categories.map(g),g=e=>({title:e.title,categories:e.categories.map(g)}),u=({categoryAggregationData:e,categorySchema:t,parentPath:a,lowerCaseRootCategoryPath:r})=>t.map((t=>{var s,o,n;const l=(0,i.b)(null!=a?a:r,t),c=null===(s=e.fieldValues.find((e=>e.value===l)))||void 0===s?void 0:s.count,d=u({parentPath:l,categorySchema:null!==(o=t.categories)&&void 0!==o?o:[],categoryAggregationData:e,lowerCaseRootCategoryPath:r});return{title:null!==(n=t.displayName)&&void 0!==n?n:t.title,path:l,count:null!=c?c:0,categories:d}})),m=e=>e.reduce(((e,t)=>{var a;return e+1+m(null!==(a=t.categories)&&void 0!==a?a:[])}),0),p=({targetCategory:e,targetParentCategory:t})=>{var a;const i=null===(a=e.title.toLocaleLowerCase())||void 0===a?void 0:a.trim();return i?i.length>C?"maxCharacter":t.categories.some((t=>t.title.toLowerCase()===i&&t.path!==e.path))?"destinationHasSameName":null:"emptyTitle"},y=({rootCategoryPath:e,uiCategory:t,uiPath:a})=>c(t,a,e).originalPath,C=100}}]);