/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-54871b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-54871b"],{71700:(e,t,a)=>{a.d(t,{a:()=>r,b:()=>o,c:()=>n,d:()=>s});const s=(0,a(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),r=s.state,n=s.state,o=s.state},18597:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_feature_layer_summary:()=>c});var s=a(7263),r=a(71700),n=a(99907),o=a(17613);a(11935),a(31670);const c=class{constructor(e){(0,s.r)(this,e),this.newItemUpdatePage=(0,s.c)(this,"newItemUpdatePage",7),this.featureLayerInfos=[],this.selectAll=()=>{const e={};this.featureLayerInfos.forEach((t=>{e[t.name]=!0})),this.selectedLayerInfoNames=e},this.deselectAll=()=>{this.selectedLayerInfoNames={}},this.selectOrDeselectLayer=(e,t)=>{t?this.selectedLayerInfoNames[e]=!0:delete this.selectedLayerInfoNames[e],this.selectedLayerInfoNames=Object.assign({},this.selectedLayerInfoNames)},this.selectedLayerInfoNames={},this.alertInfo=void 0}handleNext(){const{selectedLayerInfoNames:e,featureLayerInfos:t}=this;if(!Object.keys(e).some((t=>!0===e[t])))return(0,o.f)("No layer chosen"),void this.setAlertMessage("noLayer");r.a.selectedServiceInfoLayersNames=Object.assign({},e);const a=t.some((t=>"Table"!==t.type&&e[t.name]));this.newItemUpdatePage.emit(a?"featureLayerPreference":"itemProperties")}async componentWillLoad(){const{serviceInfo:e,selectedServiceInfoLayersNames:t,addFeatureLayerType:a}=r.a,{i18n:s}=n.u;this.addCreateI18n=s,this.i18n=s.featureLayerSummary,this.creationType=a,this.layerName=(null==e?void 0:e.name)||r.a.sourceTitle;const o=e;this.featureLayerInfos=[...o.layers,...o.tables].sort(((e,t)=>e.id-t.id));let c={};t?c=Object.assign({},t):this.featureLayerInfos.forEach((e=>{c[e.name]=!0})),this.selectedLayerInfoNames=c}setAlertMessage(e){this.alertInfo=this.i18n.error[e]}render(){const{i18n:e,addCreateI18n:t,selectedLayerInfoNames:a,featureLayerInfos:r,alertInfo:n,creationType:c,layerName:l,selectAll:i,deselectAll:d,selectOrDeselectLayer:y}=this,f=r.length>1,u=t.featureLayer,m=Object.keys(a).length<=0;return(0,s.h)(s.H,{key:"c0c78924b8590319aabac052299617c62193da5f"},(0,s.h)("arcgis-new-item-description",{key:"5d747bdab8b52bb29811865f492dd55ab9393ad2",class:"layer-description",header:u.creationType[c],content:l,leadingIconInfo:{icon:"featureLayer",scale:"s"}}),(0,s.h)("arcgis-new-item-description",{key:"f07f0b7b034d81041f55f4f4256c49769d9f7bf2",header:e.layerDetails,content:f?e.deselectAnyLayers:"",class:"details"}),f&&(0,s.h)("calcite-button",{key:"e283d2331c3ee52d74ad12e176601088cbc313ce",kind:"neutral",class:"deselect-button",onClick:m?i:d},m?e.selectAll:e.deselectAll),(0,s.h)("div",{key:"8e83d71340ea16cf5a60b25e0fb05cf51452a538",class:"info-container"},null==r?void 0:r.map(((e,r)=>(0,s.h)("arcgis-new-item-layer-summary-item",{key:r,layerInfo:e,translatedLayerType:u.type,translatedFieldType:t.fieldType,selected:a[e.name],hideSelect:!f,onLayerSelectionChange:t=>{y(e.name,t.detail)},onExpand:e=>{const{expanded:t}=e.detail;t&&(0,o.i)("layer")}})))),(0,s.h)("arcgis-new-item-alert",{key:"de443329eb23f5e137eb2962a92f29c4aecec392",heading:null==n?void 0:n.title,description:null==n?void 0:n.description,active:!!n,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,s.d)(this)}};c.style=".info-container{padding-bottom:1.5rem}.layer-description{display:block;margin-bottom:1.5rem}.details{display:block;padding-bottom:0.5rem}.deselect-button{margin-top:1.5rem;margin-bottom:1rem}arcgis-new-item-layer-summary-item+arcgis-new-item-layer-summary-item{border-top:none}"},31670:(e,t,a)=>{a.d(t,{c:()=>r,o:()=>n});const s=(0,a(11935).c)({portal:null,user:null,api:4,scale:"m"}),r=s.state,n=s.onChange},17613:(e,t,a)=>{a.d(t,{a:()=>f,b:()=>d,c:()=>y,e:()=>l,f:()=>u,i:()=>i});var s=a(31670),r=a(71700);const n="create feature layer",o="my content",c=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},l=e=>{const t=s.c.telemetry;null==t||t.stepWorkflow(n,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:n,attribute:c(r.a.addFeatureLayerType),pageName:o})},i=e=>{const t=s.c.telemetry;null==t||t.stepWorkflow(n,`expand ${e} details`,{category:n,attribute:c(r.a.addFeatureLayerType),pageName:o})},d=()=>{const e=s.c.telemetry;null==e||e.stepWorkflow(n,"filter",{category:n,attribute:c(r.a.addFeatureLayerType),pageName:o})},y=e=>{const t=c(e),a=s.c.telemetry;null==a||a.stepWorkflow(n,"from option",{category:n,attribute:t,pageName:o})},f=()=>{const{addFeatureLayerType:e,serviceInfo:t}=r.a,a=t,l=s.c.telemetry;null==l||l.endWorkflow(n,{category:n,attribute:c(e),pageName:o,count:a.layers.length,number:a.tables.length})},u=e=>{var t;null===(t=s.c.telemetry)||void 0===t||t.logError({category:n,error:e})}},11935:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(7263);const r=e=>!("isConnected"in e)||e.isConnected,n=((e,t)=>{let a;return(...s)=>{a&&clearTimeout(a),a=setTimeout((()=>{a=0,e(...s)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(r))}),2e3),o=e=>"function"==typeof e?e():e,c=(e,t)=>{const a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)},l=(e,t)=>{const a=((e,t=((e,t)=>e!==t))=>{const a=o(e);let s=new Map(Object.entries(null!=a?a:{}));const r={dispose:[],get:[],set:[],reset:[]},n=()=>{var t;s=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),r.reset.forEach((e=>e()))},l=e=>(r.get.forEach((t=>t(e))),s.get(e)),i=(e,a)=>{const n=s.get(e);t(a,n,e)&&(s.set(e,a),r.set.forEach((t=>t(e,a,n))))},d="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,t)=>l(t),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,a)=>(i(t,a),!0)}),y=(e,t)=>(r[e].push(t),()=>{c(r[e],t)});return{state:d,get:l,set:i,on:y,onChange:(t,a)=>{const s=y("set",((e,s)=>{e===t&&a(s)})),r=y("reset",(()=>a(o(e)[t])));return()=>{s(),r()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(y("set",t.set)),t.get&&e.push(y("get",t.get)),t.reset&&e.push(y("reset",t.reset)),t.dispose&&e.push(y("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{r.dispose.forEach((e=>e())),n()},reset:n,forceUpdate:e=>{const t=s.get(e);r.set.forEach((a=>a(e,t,t)))}}})(e,t);return a.use((()=>{if("function"!=typeof s.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const a=(0,s.g)();a&&((e,t,a)=>{const s=e.get(t);s?s.includes(a)||s.push(a):e.set(t,[a])})(e,t,a)},set:t=>{const a=e.get(t);a&&e.set(t,a.filter(s.f)),n(e)},reset:()=>{e.forEach((e=>e.forEach(s.f))),n(e)}}})()),a}},99907:(e,t,a)=>{a.d(t,{a:()=>s,u:()=>r});const s=(0,a(11935).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),r=s.state}}]);