/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-927c7f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-927c7f"],{1546:(e,t,l)=>{l.r(t),l.d(t,{arcgis_label:()=>y,arcgis_label_content:()=>L,arcgis_label_content_style:()=>S});var i=l(7263),a=l(62159),s=l(28926),o=l(46227),n=l(77040),r=l(1991),c=l(58233),d=l(24674),h=l(84537);l(78613),l(70506),l(99004),l(11935);const f="enable-label",m="label-switch",b="component-ul",y=class{constructor(e){(0,i.r)(this,e),this.labelUpdated=(0,i.c)(this,"labelUpdated",7),this.arcgisLabelDismissedChange=(0,i.c)(this,"arcgisLabelDismissedChange",7),this.internalLabelUpdated=(0,i.c)(this,"internalLabelUpdated",7),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.arcgisFilterDone=(0,i.c)(this,"arcgisFilterDone",7),this.labelReRender=(0,i.c)(this,"labelReRender",7),this.labelComponent=(e,t,l)=>{var a;return(0,i.h)("div",{key:e,id:e},(0,i.h)("arcgis-label-content",{guid:e,labelClass:t,blockOpen:l,calciteFlowItem:(null===(a=this.calciteFlowProps)||void 0===a?void 0:a.calciteFlowItem)||this.hostElement.shadowRoot.getElementById("labelFlowItem_Id")}))},this.mapView=void 0,this.layer=void 0,this.portal=void 0,this.config=void 0,this.layerDisplayType=n.l.feature,this.dismissible=!1,this.hideLayerTitle=!1,this.calciteFlowProps=null,this.labelComponents=[],this.reRender=void 0}async componentWillLoad(){var e;[this.strings,this.currentLanguage]=await(0,a.g)(this.hostElement),this.layerGeometryType=await(0,r.j)(this.layer),this.serviceType=(0,r.d)(this.layer),d.l.layer=this.layer,d.l.mapView=this.mapView,d.l.portal=this.portal,d.l.config=this.config,d.l.strings=this.strings,d.l.currentLanguage=this.currentLanguage,d.l.layerGeometryType=this.layerGeometryType,d.l.serviceType=this.serviceType,d.l.layerDisplayType=this.layerDisplayType,this.labelingInfo=this.layerDisplayType===n.l.feature?this.layer.labelingInfo:this.layer.featureReduction.labelingInfo,this.layerDisplayType===n.l.feature?this.layer.labelsVisible=this.layer.labelsVisible||!1:this.layerDisplayType===n.l.cluster&&(this.layer.featureReduction.labelsVisible=this.layer.featureReduction.labelsVisible||!1),Array.isArray(this.labelingInfo)&&this.labelingInfo.forEach((e=>{this.addLabelClass(e,1===this.labelingInfo.length)})),(null===(e=this.calciteFlowProps)||void 0===e?void 0:e.calciteFab)&&!this.getLabelEnabledProp()&&(this.calciteFlowProps.calciteFab.hidden=!0)}componentDidLoad(){var e;this.sortableComponents=this.hostElement.shadowRoot.getElementById("SortableComponents_Id"),this.calciteFab=(null===(e=this.calciteFlowProps)||void 0===e?void 0:e.calciteFab)||this.hostElement.shadowRoot.getElementById("addComponentBtn_Id"),this.calciteFab.onclick=async e=>{e.stopPropagation(),this.closeLabelPopovers.emit();const t=await this.getLabelClass();this.labelingInfo?this.labelingInfo.push(t):this.labelingInfo=[t],this.addLabelClass(t,!0),this.focusLastLabelClass()},this.flowItemNode&&requestAnimationFrame((()=>this.flowItemNode.setFocus()))}componentDidUpdate(){this.internalLabelUpdated.emit()}mainPopupReRenderHandler(e){e.stopPropagation(),this.reRender=!this.reRender}deleteComponentHandler(e){e.stopPropagation(),this.closeLabelPopovers.emit();const t=this.sortableComponents.getElementsByTagName("div");for(let l=0;l<t.length;l++)if(t[l].id===e.detail){this.labelingInfo.splice(l,1),this.labelComponents.splice(l,1);break}this.labelReRender.emit(),this.calciteFab.setFocus()}duplicateComponentHandler(e){e.stopPropagation(),this.closeLabelPopovers.emit();const t=this.sortableComponents.getElementsByTagName("div");for(let l=0;l<t.length;l++)if(t[l].id===e.detail){const e=this.labelingInfo[l].clone();this.labelingInfo.push(e),this.addLabelClass(e,!0),this.focusLastLabelClass();break}}internalLabelUpdatedHandler(e){e.stopPropagation(),this.labelingInfo&&!e.detail&&(this.layerDisplayType===n.l.feature?this.layer.labelingInfo=[...this.labelingInfo]:this.layer.featureReduction.labelingInfo=[...this.labelingInfo]),this.labelUpdated.emit()}disableLabelPanelHandler(e){var t;e.stopPropagation();((null===(t=this.calciteFlowProps)||void 0===t?void 0:t.calciteFlowItem)||this.hostElement.shadowRoot.getElementById("labelFlowItem_Id")).disabled=e.detail}async done(){this.arcgisFilterDone.emit(),this.closeLabelPopovers.emit()}async setFocus(){var e;this.flowItemNode?this.flowItemNode.setFocus():null===(e=this.labelSwitch)||void 0===e||e.focus()}enableDisableLabel(e){this.hostElement.shadowRoot.getElementById("labelDiv_Id").style.display=e?"block":"none",this.calciteFab.style.display=e?"block":"none",this.closeLabelPopovers.emit()}getLabelEnabledProp(){switch(this.layerDisplayType){case n.l.feature:return this.layer.labelsVisible;case n.l.cluster:return this.layer.featureReduction.labelsVisible;default:return this.layer.labelsVisible}}addLabelClass(e,t=!1){this.labelComponents=[...this.labelComponents,this.labelComponent((0,o.g)(),e,t)]}async getLabelClass(){var e,t,l,i,a,o;const[r,c,d,h]=await(0,s.l)(["esri/layers/support/LabelClass","esri/views/support/colorUtils","esri/smartMapping/labels/clusters","esri/smartMapping/labels/bins"]);return this.layerDisplayType===n.l.feature?new r(this.defaultLabelProps(this.defaultSymbolProps(await c.getBackgroundColor(this.mapView),await c.getBackgroundColorTheme(this.mapView)))):"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)?(null===(l=null===(t=await h.getLabelSchemes({layer:this.layer}))||void 0===t?void 0:t.primaryScheme)||void 0===l?void 0:l.labelingInfo[0])||null:(null===(o=null===(a=await d.getLabelSchemes({layer:this.layer,renderer:null===(i=this.layer)||void 0===i?void 0:i.renderer,view:this.mapView}))||void 0===a?void 0:a.primaryScheme)||void 0===o?void 0:o.labelingInfo[0])||null}defaultLabelProps(e){const t=this.defaultLabelField();return{symbol:{type:"text",color:e.fontColor,haloColor:e.haloColor,haloSize:e.haloSize,font:{family:e.fontFamily,size:e.fontSize}},labelExpressionInfo:this.layerDisplayType===n.l.cluster?{expression:`$feature["${t}"]`}:this.serviceType!==n.s.mapImage?{expression:t?this.layer.fields.some((e=>{var l;if(e.name===t)return"coded-value"===(null===(l=null==e?void 0:e.domain)||void 0===l?void 0:l.type)}))?`$feature["${t}"]\nDomainName($feature, "${t}")`:`$feature["${t}"]`:null}:null,labelExpression:this.serviceType===n.s.mapImage?`[${t}]`:null,labelPlacement:this.defaultPlacement(),maxScale:this.layer.maxScale||0,minScale:this.layer.minScale||0}}defaultLabelField(){let e=null;return this.layerDisplayType===n.l.cluster?e=this.layer.featureReduction.fields[0].name:"displayField"in this.layer&&"fieldsIndex"in this.layer&&this.layer.displayField&&this.layer.fieldsIndex.get(this.layer.displayField)?e=this.layer.displayField:this.layer.fields.find((t=>{if(t.type.toLowerCase().includes("string"))return e=t.name})),e||this.layer.fields[0].name}defaultSymbolProps(e,t){return"light"===t?{fontFamily:"Arial",fontSize:9.75,fontColor:"#262626",haloColor:"#f7f7f7",haloSize:1}:"dark"===t?{fontFamily:"Arial",fontSize:9.75,fontColor:"#f7f7f7",haloColor:"#262626",haloSize:1}:{fontFamily:"Arial",fontSize:9.75,fontColor:e||"#262626",haloColor:"#f7f7f7",haloSize:.75}}defaultPlacement(){var e;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)?"always-horizontal":"point"===this.layerGeometryType||"multipoint"===this.layerGeometryType?"above-center":"polyline"===this.layerGeometryType?"center-along":"polygon"===this.layerGeometryType?"always-horizontal":null}focusLastLabelClass(){setTimeout((()=>requestAnimationFrame((()=>{const e=this.hostElement.shadowRoot.querySelectorAll("arcgis-label-content");(null==e?void 0:e.length)&&e[e.length-1].setFocus()}))),200)}labelSwitchAndContent(){return(0,i.h)("div",null,(0,i.h)("calcite-label",{class:f,alignment:"start",layout:"inline-space-between"},this.strings.enableLabels,(0,i.h)("calcite-switch",{ref:e=>this.labelSwitch=e,scale:"s",class:m,checked:this.getLabelEnabledProp(),onCalciteSwitchChange:e=>{const t=e.target.checked;switch(this.layerDisplayType){case n.l.feature:this.layer.labelsVisible=t;break;case n.l.cluster:this.layer.featureReduction.labelsVisible=t;break;default:this.layer.labelsVisible=t}this.enableDisableLabel(t),this.internalLabelUpdated.emit(!0)}})),(0,i.h)("div",{id:"labelDiv_Id",hidden:!this.getLabelEnabledProp()},(0,i.h)("div",{id:"SortableComponents_Id",class:b},this.labelComponents)))}render(){const e=(0,i.h)("calcite-fab",{key:"83ee4be3ce18a9c710199f83d2209be0c0b3b9de",hidden:!this.getLabelEnabledProp(),id:"addComponentBtn_Id",icon:"plus",slot:"fab",scale:"s",appearance:"outline-fill",kind:"neutral",label:this.strings.addLabel,text:this.strings.addLabel,"text-enabled":!0});return(0,i.h)(i.H,{key:"f20447c8f6c9af0d4eebab81e6e8e7127e5221f5",style:this.calciteFlowProps?{}:{display:"flex",flex:"1 1 auto",overflow:"hidden"}},this.calciteFlowProps?(0,i.h)("div",{dir:(0,c.g)(this.hostElement)},this.labelSwitchAndContent()):(0,i.h)("calcite-flow",{dir:(0,c.g)(this.hostElement)},(0,i.h)("calcite-flow-item",{id:"labelFlowItem_Id",heading:this.strings.labelFeatures,description:this.hideLayerTitle?void 0:this.layer.title,closable:this.dismissible,onCalciteFlowItemClose:e=>{e.stopPropagation(),this.closeLabelPopovers.emit(),this.arcgisLabelDismissedChange.emit()},ref:e=>this.flowItemNode=e},this.labelSwitchAndContent(),e)))}get hostElement(){return(0,i.d)(this)}};y.style=".enable-label{background-color:var(--arcgis-app-background);display:flex;padding:var(--arcgis-app-cap-spacing) var(--arcgis-app-cap-spacing-half) var(--arcgis-app-cap-spacing-quarter);border-bottom:solid 1px var(--arcgis-app-border)}.enable-label-label{display:flex;flex-flow:column nowrap;flex:1 0 0%;overflow:hidden}.label-switch{margin:0;flex:0 0 0%;justify-self:flex-end}.component-ul{margin:0 0 var(--arcgis-app-cap-spacing);padding:0}";const p="label-content-btn-section",g="label-content-btn-exp",u="label-content-btn",v="label-content-btn-text",w="label-content-btn-icon",C="field-expression-div",L=class{constructor(e){(0,i.r)(this,e),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.internalLabelUpdated=(0,i.c)(this,"internalLabelUpdated",7),this.labelContentReRender=(0,i.c)(this,"labelContentReRender",7),this.disableLabelPanel=(0,i.c)(this,"disableLabelPanel",7),this.defaultScript="",this.aggregationExpressionMapping=new Map,this.fieldPickListChanges=async e=>{var t,l;e.stopPropagation();const i=null===(l=null===(t=e.detail)||void 0===t?void 0:t.selectedFields)||void 0===l?void 0:l[0];if(i){if(this.serviceType===n.s.mapImage)this.labelClass.labelExpression=`[${i}]`;else if(this.layerDisplayType===n.l.cluster)if(this.aggregationExpressionMapping.has(i))this.labelClass.labelExpressionInfo.expression=this.aggregationExpressionMapping.get(i);else for(const[e,t]of this.aggregationExpressionMapping)e===i&&(this.labelClass.labelExpressionInfo.expression=t);else this.labelClass.labelExpressionInfo=this.layer.fields.some((e=>{var t;if(e.name===i)return"coded-value"===(null===(t=null==e?void 0:e.domain)||void 0===t?void 0:t.type)}))?{expression:`$feature["${i}"]\nDomainName($feature, "${i}")`}:{expression:`$feature["${i}"]`};this.labelContentReRender.emit()}this.closeLabelPopovers.emit()},this.guid=void 0,this.blockOpen=!1,this.labelClass=void 0,this.calciteFlowItem=void 0,this.reRender=void 0}async componentWillLoad(){if(this.layer=d.l.layer,this.mapView=d.l.mapView,this.portal=d.l.portal,this.config=d.l.config,this.strings=d.l.strings,this.currentLanguage=d.l.currentLanguage,this.layerDisplayType=d.l.layerDisplayType,this.serviceType=d.l.serviceType,this.popupTemplate=this.layerDisplayType===n.l.feature?this.layer.popupTemplate:this.layer.featureReduction.popupTemplate,this.labelFields=await this.getFieldsForLabeling(),this.defaultScript=`// ${this.strings.arcadeScriptLine1} \n// ${this.strings.arcadeScriptLine2}\n// $feature.name + " " + $feature.status\n`,this.calciteFlowItem||(this.calciteFlowItem=this.hostElement.closest("#labelFlowItem_Id")),this.layerDisplayType===n.l.cluster){[this.binLabelCreator,this.clusterLabelCreator]=await(0,s.l)(["esri/smartMapping/labels/bins","esri/smartMapping/labels/clusters"]);const e=async e=>{var t,l;let i;i="binning"===(null===(t=this.layer.featureReduction)||void 0===t?void 0:t.type)?await this.binLabelCreator.getLabelSchemes({layer:this.layer,field:e}):await this.clusterLabelCreator.getLabelSchemes({layer:this.layer,renderer:null===(l=this.layer)||void 0===l?void 0:l.renderer,view:this.mapView,field:e});[null==i?void 0:i.primaryScheme,...null==i?void 0:i.secondarySchemes].forEach((e=>{var t,l,i;this.aggregationExpressionMapping.set(null==e?void 0:e.fieldName,null===(i=null===(l=null===(t=null==e?void 0:e.labelingInfo)||void 0===t?void 0:t[0])||void 0===l?void 0:l.labelExpressionInfo)||void 0===i?void 0:i.expression)}))},t=[];this.labelFields.forEach((l=>{t.push(e(l.name))})),await Promise.all(t)}}componentDidLoad(){this.addScaleRangeSlider()}componentDidUpdate(){this.internalLabelUpdated.emit()}disconnectedCallback(){this.arcgisFieldPickList&&document.body.removeChild(this.arcgisFieldPickList),this.labelStyle&&document.body.removeChild(this.labelStyle),this.popoverRenameForm&&document.body.removeChild(this.popoverRenameForm),this.labelFilter&&document.body.removeChild(this.labelFilter)}async setFocus(){this.blockOpen&&(this.blockOptions.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),this.blockOptions.setFocus())}calciteBlockToggleHandler(){this.closeLabelPopovers.emit()}labelContentReRenderHandler(e){e.stopPropagation(),this.reRender=!this.reRender}closeLabelPopoversHandler(){this.arcgisFieldPickList&&(document.body.removeChild(this.arcgisFieldPickList),this.arcgisFieldPickList=null,this.attributesBtn.focus()),this.labelStyle&&(document.body.removeChild(this.labelStyle),this.labelStyle=null,this.styleBtn.focus()),this.popoverRenameForm&&(document.body.removeChild(this.popoverRenameForm),this.popoverRenameForm=null,this.blockOptions.setFocus()),this.labelFilter&&(document.body.removeChild(this.labelFilter),this.labelFilter=null,this.filterBtn.focus()),this.disableLabelPanel.emit(!1)}notifySymbolChangesHandler(e){this.guid===e.detail&&(e.stopPropagation(),this.labelContentReRender.emit())}notifyFilterUpdatedHandler(e){this.guid===e.detail&&(e.stopPropagation(),this.labelContentReRender.emit())}renameComponentHandler(e){this.guid===e.detail&&(this.closeLabelPopovers.emit(),e.stopPropagation(),this.popoverRenameForm||(this.popoverRenameForm=document.createElement("arcgis-popover-rename-form"),this.popoverRenameForm.guid=this.guid,this.popoverRenameForm.refElement=this.hostElement,this.popoverRenameForm.popoverPanelWidth=this.hostElement.getBoundingClientRect().width,this.popoverRenameForm.intlRenameHeader=this.strings.popoverRenameHeader,this.popoverRenameForm.intlOk=this.strings.ok,this.popoverRenameForm.intlCancel=this.strings.cancel,this.popoverRenameForm.intlClose=this.strings.close,this.popoverRenameForm.inputValue=this.labelClass.name||this.getDisplayFieldName()||this.strings.label,document.body.appendChild(this.popoverRenameForm),this.disableLabelPanel.emit(!0)))}popoverRenameFormEventHandler(e){this.guid===e.detail[0]&&(e.stopPropagation(),this.closeLabelPopovers.emit(),e.detail[1]&&(this.labelClass.name=e.detail[1],this.labelContentReRender.emit()))}async getFieldsForLabeling(){var e;if(this.layerDisplayType===n.l.feature){const t=await(0,r.k)(this.layer);if(null===(e=this.popupTemplate)||void 0===e?void 0:e.fieldInfos){let e=[];return t.filter((e=>["string","small-integer","big-integer","integer","single","double","long","date","date-only","time-only","timestamp-offset","oid","guid","global-id"].indexOf(e.type)>-1)).forEach((t=>{e=[...e,t.clone()],this.popupTemplate.fieldInfos.find((l=>{l.fieldName===t.name&&(e[e.length-1].alias=l.label)}))})),e}return t}return(0,r.l)(this.popupTemplate,!1)}async openAttributesList(){this.closeLabelPopovers.emit(),this.calciteFlowItem.loading=!0,this.arcgisFieldPickList||(this.arcgisFieldPickList=document.createElement("arcgis-field-pick-list"),this.arcgisFieldPickList.popoverProps={refElement:this.calciteFlowItem,offsetSkidding:50},this.arcgisFieldPickList.fields=this.labelFields,this.arcgisFieldPickList.layer=this.layer,this.arcgisFieldPickList.mapView=this.mapView,this.arcgisFieldPickList.showFieldInfo=this.layerDisplayType===n.l.feature,this.arcgisFieldPickList.selectedFields=[this.labelClass.getLabelExpressionSingleField()]||0,this.arcgisFieldPickList.addEventListener("arcgisFieldPickListDismissed",this.fieldPickListChanges),document.body.appendChild(this.arcgisFieldPickList),this.disableLabelPanel.emit(!0)),this.calciteFlowItem.loading=!1}getFieldNameFromAggregationExpression(){var e,t;if(this.layerDisplayType===n.l.cluster)for(const[l,i]of this.aggregationExpressionMapping)if(i===(null===(t=null===(e=this.labelClass)||void 0===e?void 0:e.labelExpressionInfo)||void 0===t?void 0:t.expression))return l}openLabelStyle(){this.closeLabelPopovers.emit(),this.labelStyle||(this.labelStyle=document.createElement("arcgis-label-content-style"),this.labelStyle.guid=this.guid,this.labelStyle.labelContentRefElement=this.calciteFlowItem,this.labelStyle.labelClass=this.labelClass,document.body.appendChild(this.labelStyle),this.disableLabelPanel.emit(!0))}async openArcadeEditor(){var e,t,l;this.closeLabelPopovers.emit(),this.arcadeEditor||(this.calciteFlowItem.disabled=!0,this.arcadeEditor=document.createElement("arcgis-modal-arcade"),this.arcadeEditor.arcadeScript=(null===(e=this.labelClass.labelExpressionInfo)||void 0===e?void 0:e.expression)||"",this.arcadeEditor.arcadeProfile=this.getArcadeProfile(),this.arcadeEditor.testData=await this.getArcadeTestData(),this.arcadeEditor.addExistingExpressions=!0,this.arcadeEditor.layer=this.layer,this.arcadeEditor.arcadeTitle=(null===(t=this.labelClass.labelExpressionInfo)||void 0===t?void 0:t.title)||this.strings.newExpression,this.arcadeEditor.arcadeTitleEditable=!0,this.arcadeEditor.returnPredictOutputType=!1,this.arcadeEditor.arcadeTitleEditingEnabled=!(null===(l=this.labelClass.labelExpressionInfo)||void 0===l?void 0:l.title),document.body.appendChild(this.arcadeEditor),this.arcadeEditor.addEventListener("arcgisModalArcadeClose",(e=>this.arcadeSetup(e.detail))))}async arcadeSetup(e){var t;e&&((null===(t=this.labelClass.labelExpressionInfo)||void 0===t?void 0:t.expression)?(this.labelClass.labelExpressionInfo.expression=e.script,this.labelClass.labelExpressionInfo.title=e.title):this.labelClass.labelExpressionInfo={expression:e.script,title:e.title},this.labelContentReRender.emit()),this.calciteFlowItem.disabled=!1,document.body.removeChild(this.arcadeEditor),this.arcadeEditor=null,this.arcadeBtn.setFocus()}getArcadeProfile(){return{id:"labeling",definitions:{$feature:this.layerDisplayType===n.l.cluster?{fields:(0,r.l)(this.popupTemplate,!1)}:this.layer}}}async getArcadeTestData(){try{if(this.layerDisplayType===n.l.cluster)return{profileVariableInstances:{$feature:await(0,r.m)(this.mapView,this.layer,this.popupTemplate)},spatialReference:this.mapView.spatialReference,timeZone:this.mapView.timeZone};let e;return e="subtype-sublayer"===this.layer.type?this.layer.parent.url:this.layer.url,{profileVariableInstances:{$feature:(await(0,r.n)(this.layer,this.mapView)).features[0],$layer:this.layer,$map:this.mapView.map,$datastore:e},spatialReference:this.mapView.spatialReference,timeZone:this.mapView.timeZone}}catch(e){console.log(e)}}getDisplayFieldName(){const e=this.layerDisplayType===n.l.cluster?this.getFieldNameFromAggregationExpression():this.labelClass.getLabelExpressionSingleField(),t=this.labelFields.find((t=>{if(t.name===e)return t}));return(null==t?void 0:t.alias)||e}addScaleRangeSlider(){const{labelClass:e}=this;(0,s.l)(["esri/widgets/ScaleRangeSlider"]).then((([t])=>{var l,i;const a=this.hostElement.shadowRoot.getElementById("slider_Id"),s=new t({view:this.mapView,region:(null===(l=this.portal)||void 0===l?void 0:l.region)||(null===(i=this.portal)||void 0===i?void 0:i.getRegion().toLowerCase())||"wo",minScale:e.minScale||0,maxScale:e.maxScale||0},a);a.insertAdjacentHTML("afterbegin",`<link rel="stylesheet" href="${this.config.jsapiUrl}/themes/light/main.css" />`),s.watch(["minScale","maxScale"],((t,l,i)=>{"minScale"===i?e.minScale=t:"maxScale"===i&&(e.maxScale=t),this.closeLabelPopovers.emit(),this.labelContentReRender.emit()}))}))}render(){var e,t,l;const{blockOpen:a,guid:s,strings:o}=this,r=this.serviceType===n.s.feature||this.serviceType===n.s.stream||this.serviceType===n.s.subtype||this.serviceType===n.s.orientedImagery||this.serviceType===n.s.mapImage&&(null===(t=null===(e=this.layer.layer.capabilities)||void 0===e?void 0:e.exportMap)||void 0===t?void 0:t.supportsArcadeExpressionForLabeling),d=(0,i.h)("calcite-label",{key:"13e5722848d02001302fd138f0a6daf5c8c75508"},o.labelAttribute,(0,i.h)("div",{key:"f565f1422ffb4c85f29517250dee9ce30d746cc8",class:C},(0,i.h)("div",{key:"3e9ad48155b9da462403fc6c20e7754cc42aed8c",class:r?g:p},(0,i.h)("button",{key:"a5c652a820937f056d7dd63412391966ff8d12ee",ref:e=>this.attributesBtn=e,class:u,title:o.field,onClick:e=>{e.stopPropagation(),this.openAttributesList()}},(0,i.h)("span",{key:"7935765624a075787d1ef29fbaeecff0b472f5ad",class:v},this.getDisplayFieldName()||(null===(l=this.labelClass.labelExpressionInfo)||void 0===l?void 0:l.title)||o.newExpression),(0,i.h)("span",{key:"59bf98f1d3a6592ff904f9781a2ddefcfbf095e5",class:w},(0,i.h)("calcite-icon",{key:"e47fb009043bcc158faa5b05f9d55c379b4155da",scale:"s",icon:"chevron-down"})))),r&&(0,i.h)("calcite-action",{key:"428df623fb8cf7c8f8d79232887b46f16cc0902f",ref:e=>this.arcadeBtn=e,scale:"s",text:o.expression,onClick:e=>{e.stopPropagation(),this.openArcadeEditor()}},(0,i.h)("calcite-icon",{key:"90b72086cd8ee8e506242e8098f1fdf929b453bc",scale:"s",icon:"code"})))),h=(0,i.h)("calcite-label",{key:"7021af824e4dae9a7c677748dd31fadc51585ee2"},o.filter,(0,i.h)("div",{key:"f2f66cc0b946c74f253d943f7be7a80e5cc4ffcb",class:p},(0,i.h)("button",{key:"3c7549f8c410245d6c0b25042e8143bceef956b4",ref:e=>this.filterBtn=e,class:u,title:o.editLabelFilter,onClick:e=>{e.stopPropagation(),this.closeLabelPopovers.emit(),this.labelFilter||(this.labelFilter=document.createElement("arcgis-label-content-filter"),this.labelFilter.guid=this.guid,this.labelFilter.labelFilterRefElement=this.calciteFlowItem,this.labelFilter.labelClass=this.labelClass,document.body.appendChild(this.labelFilter),this.disableLabelPanel.emit(!0))}},(0,i.h)("span",{key:"37afa8803ff4eba4118d800d11ce5ec3a1c77b4d",class:v},o.editLabelFilter),(0,i.h)("span",{key:"a744643cf6c71bbc50770f0f7d24802eaa139a21",class:w},(0,i.h)("calcite-icon",{key:"b38d0060b7369c9bdc224181bc6e8e3cc4fd4162",scale:"s",icon:"chevron-down"}))))),f=(0,i.h)("calcite-label",{key:"73a37a7fbb2873a81e5a4a26967bf66dbbcd1610"},o.labelStyle,(0,i.h)("div",{key:"9e9523029002d5fe1f198a9a15da7c9bacb915d6",class:p},(0,i.h)("button",{key:"1d18420b937fe744255cb50e37dfe82103dab3ca",ref:e=>this.styleBtn=e,class:u,title:o.editLabelStyle,onClick:e=>{e.stopPropagation(),this.openLabelStyle()}},(0,i.h)("span",{key:"8c3b6b9b1d884bc84df21874e082a742bca919d5",class:v},o.editLabelStyle),(0,i.h)("span",{key:"eb59272fa02e5b5a4ee44b1f93686b3890f6ad0d",class:w},(0,i.h)("calcite-icon",{key:"bc4a57af5d48c3787b868406a831eabf97d77d8a",scale:"s",icon:"chevron-down"}))))),m=(0,i.h)("calcite-label",{key:"6d5fc161f0a452d2a54eb3c8c8676c4e1ef4462e"},o.visibleRange,(0,i.h)("div",{key:"12055438a9bd1c27fb524082167119487ab76976",id:"slider_Id"}));return(0,i.h)(i.H,{key:"8b91acb77da37db4faaa6867aeae8aeefa648887"},(0,i.h)("calcite-block",{key:"56e285084b18c2fbd0c4e7def1c66ecefd85531b",dir:(0,c.g)(this.hostElement),heading:this.labelClass.name||this.getDisplayFieldName()||this.strings.label,collapsible:!0,open:a},(0,i.h)("div",{key:"beb7f98a0a2862ad522fc0457d71be0d3f7101f8",slot:"control"},(0,i.h)("arcgis-calcite-block-options",{key:"7570f220fbb58fe6f07c80d80fa97e9de195d603",ref:e=>this.blockOptions=e,guid:s,intlOptions:o.options,intlDelete:o.delete,intlDuplicate:o.duplicate,intlRename:o.rename,calciteBlockOptions:{hasDelete:!0,hasDuplicate:!0,hasRename:!0}})),(0,i.h)("div",{key:"22b06b78957551276f32b8124eb5aabde5c3c875",slot:"icon"},(0,i.h)("calcite-icon",{key:"4c90573dfb9f8e6581fe6fe1ae31d224917dcd44",scale:"m",icon:"label"})),d,this.serviceType===n.s.ogcFeature||this.serviceType===n.s.wfs||this.serviceType===n.s.subtype?null:h,f,m))}get hostElement(){return(0,i.d)(this)}};L.style=".label-content-btn-section{background-color:var(--arcgis-app-background);min-width:100%}.label-content-btn{background:var(--arcgis-app-background-clear);border:1px solid var(--arcgis-app-border);border-radius:var(--arcgis-app-border-radius);display:flex;align-items:center;justify-content:space-between;padding:var(--arcgis-app-cap-spacing-half) var(--arcgis-app-side-spacing-quarter);cursor:pointer;width:100%;text-align:unset;transition:background-color var(--arcgis-app-animation-time-fast) var(--arcgis-app-easing-function), border-color var(--arcgis-app-animation-time-fast) var(--arcgis-app-easing-function)}.label-content-btn:hover{background-color:var(--arcgis-app-background-hover);border-color:var(--arcgis-app-border-hover)}.label-content-btn-exp{width:calc(100% - 32px)}.label-content-btn-exp .label-content-btn{border:none;border-radius:0;border-right:1px solid var(--arcgis-app-border)}.label-content-btn-text{font-family:var(--arcgis-app-font-family);font-size:var(--arcgis-app-font-size-0);flex:0 1 auto;overflow:hidden;padding:0 var(--arcgis-app-side-spacing-eighth);text-overflow:ellipsis;white-space:nowrap}.label-content-btn-icon{flex:0 0 0%;padding:0 var(--arcgis-app-side-spacing-half)}.field-expression-div{align-items:center;display:flex;justify-content:space-between;width:100%;border:1px solid var(--arcgis-app-border);border-radius:var(--arcgis-app-border-radius)}.field-expression-div calcite-action{flex:0 0 auto}#slider_Id{min-width:100%}";const S=class{constructor(e){(0,i.r)(this,e),this.closeLabelPopovers=(0,i.c)(this,"closeLabelPopovers",7),this.notifySymbolChanges=(0,i.c)(this,"notifySymbolChanges",7),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();this.narrow=t.contentRect.width<=275,this.reRender=!this.reRender})),this.minMaxOffset={minOffsetX:-20,minOffsetY:-20,maxOffsetX:20,maxOffsetY:20},this.percentLabelFlip=!1,this.narrow=!1,this.openFontPopover=()=>{var e,t;if(!this.arcgisFontPicker){this.panelElement.disabled=!0,this.arcgisFontPicker=document.createElement("arcgis-font-picker"),this.arcgisFontPicker.fontMap=this.fontMap,this.arcgisFontPicker.font=null===(t=null===(e=this.labelClass)||void 0===e?void 0:e.symbol)||void 0===t?void 0:t.font;const l=this.labelContentRefElement.getBoundingClientRect();this.arcgisFontPicker.popoverProps={refElement:this.labelContentRefElement,offsetSkidding:50,overlayPositioning:"fixed",maxHeight:.8*l.height+"px"},this.arcgisFontPicker.addEventListener("arcgisFontPickerDismissed",this.closeFontPopver),this.arcgisFontPicker.addEventListener("arcgisFontPickerChange",this.changeFont),document.body.appendChild(this.arcgisFontPicker)}},this.closeFontPopver=()=>{this.arcgisFontPicker&&(this.panelElement.disabled=!1,document.body.removeChild(this.arcgisFontPicker),this.arcgisFontPicker=null,setTimeout((()=>{this.panelElement.setFocus()}),100))},this.changeFont=e=>{var t,l;const i=null==e?void 0:e.detail,a=null===(l=null===(t=this.labelClass)||void 0===t?void 0:t.symbol)||void 0===l?void 0:l.font;i&&a&&(a.family=i.family,a.weight=i.weight,a.style=i.style),this.reRender=!this.reRender,this.notifySymbolChanges.emit(this.guid)},this.guid=void 0,this.labelContentRefElement=void 0,this.labelClass=void 0,this.isOpen=!1,this.reRender=!1}componentWillLoad(){this.layer=d.l.layer,this.portal=d.l.portal,this.strings=d.l.strings,this.layerGeometryType=d.l.layerGeometryType,this.serviceType=d.l.serviceType,this.layerDisplayType=d.l.layerDisplayType,this.fontMap=this.serviceType===n.s.mapImage?h.m:h.f;const e=(0,c.g)(this.hostElement),t=new Intl.NumberFormat(d.l.currentLanguage,{style:"percent"}).format(0);this.percentLabelFlip="rtl"===e?t.endsWith("%"):t.startsWith("%")}componentDidLoad(){this.isOpen=!0,setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),200),this.resizeObserver.observe(this.labelContentRefElement)}disconnectedCallback(){this.resizeObserver.unobserve(this.labelContentRefElement)}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}async calciteBlockSectionToggleHandler(e){e.stopPropagation();const t=e.composedPath();"haloBlock_Id"===(null==t?void 0:t[0].id)?this.labelClass.symbol.haloColor?(this.tempHaloColor=this.labelClass.symbol.haloColor,this.labelClass.symbol.haloColor=null):await(0,s.l)(["esri/Color"]).then((async([e])=>{var t;this.labelClass.symbol.haloColor=this.tempHaloColor||new e("white"),this.labelClass.symbol.haloSize=this.labelClass.symbol.haloSize||.75;this.hostElement.shadowRoot.getElementById("haloColorPicker_Id").color=(null===(t=this.labelClass.symbol.haloColor)||void 0===t?void 0:t.toHex())||"#ffffff"})):"backgroundBlock_Id"===(null==t?void 0:t[0].id)&&(this.labelClass.symbol.backgroundColor?(this.tempBackgroundColor=this.labelClass.symbol.backgroundColor,this.tempBorderLineColor=this.labelClass.symbol.borderLineColor,this.tempBorderLineSize=this.labelClass.symbol.borderLineSize,this.labelClass.symbol.backgroundColor=null,this.labelClass.symbol.borderLineColor=null,this.labelClass.symbol.borderLineSize=null):await(0,s.l)(["esri/Color"]).then((async([e])=>{var t,l,i,a;this.labelClass.symbol.backgroundColor=this.tempBackgroundColor||new e("white");this.hostElement.shadowRoot.getElementById("backgroundColorPicker_Id").color=(null===(t=this.labelClass.symbol.backgroundColor)||void 0===t?void 0:t.toHex())||"#ffffff",this.labelClass.symbol.borderLineColor=this.tempBorderLineColor||new e("white");this.hostElement.shadowRoot.getElementById("borderLineColorPicker_Id").color=(null===(l=this.labelClass.symbol.borderLineColor)||void 0===l?void 0:l.toHex())||"#ffffff",this.labelClass.symbol.borderLineSize=null!==(i=this.tempBorderLineSize)&&void 0!==i?i:.75;this.hostElement.shadowRoot.getElementById("borderLineSizePicker_Id").value=`${null!==(a=this.labelClass.symbol.borderLineSize/.75)&&void 0!==a?a:1}`}))),this.notifySymbolChanges.emit(this.guid),this.hostElement.shadowRoot.getElementById("managePopover_Id").reposition()}getPlacementArray(e){var t;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(t=this.layer.featureReduction)||void 0===t?void 0:t.type)?[]:"point"===e||"multipoint"===e?h.p:"polyline"===e?h.a:[]}changeOffset(e){this.labelClass.symbol.xoffset=e.x,this.offsetXElement.value=this.labelClass.symbol.xoffset,this.offsetXYSlider.x=e.x,this.labelClass.symbol.yoffset=e.y,this.offsetYElement.value=this.labelClass.symbol.yoffset,this.offsetXYSlider.y=-e.y,this.notifySymbolChanges.emit(this.guid)}placementSelection(){var e;return this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type)||!([n.s.feature,n.s.csv,n.s.geojson,n.s.ogcFeature].indexOf(this.serviceType)>-1&&("point"===this.layerGeometryType||"multipoint"===this.layerGeometryType||"polyline"===this.layerGeometryType)||this.serviceType===n.s.mapImage&&("point"===this.layerGeometryType||"multipoint"===this.layerGeometryType||"polyline"===this.layerGeometryType))?null:(0,i.h)("calcite-label",{class:"placement-label"},this.strings.placement,(0,i.h)("calcite-select",{label:this.strings.placement,onCalciteSelectChange:e=>{this.labelClass.labelPlacement=e.currentTarget.selectedOption.value,this.notifySymbolChanges.emit(this.guid)},ref:e=>this.placementNode=e},this.getPlacementArray(this.layerGeometryType).map((e=>(0,i.h)("calcite-option",{value:e,selected:this.labelClass.labelPlacement===e},this.strings[e]||e)))))}render(){var e,t,l,a,o,d,f,m,b,y,p,g,u,v,w,C,L,S;const k=this.layerDisplayType===n.l.cluster&&"binning"===(null===(e=this.layer.featureReduction)||void 0===e?void 0:e.type),I=(0,i.h)("calcite-label",{key:"fa553101985905c740dfec9eca25750881e742ee"},this.strings.font,(0,i.h)("calcite-button",{key:"fed5779b17913fe737de12510cd5d58cd7c64f72",alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",iconEnd:"chevron-down",label:(0,h.b)(null===(l=null===(t=this.labelClass)||void 0===t?void 0:t.symbol)||void 0===l?void 0:l.font),width:"full",scale:"m",onClick:this.openFontPopover,ref:e=>this.fontNode=e},(0,h.b)(null===(o=null===(a=this.labelClass)||void 0===a?void 0:a.symbol)||void 0===o?void 0:o.font))),R=(0,i.h)("calcite-label",{key:"335a91042eed5aa9e47678ade51670ca5d2af123"},this.strings.size,(0,i.h)("calcite-input-number",{key:"1be1754a680e7d2f1b6687afe27857d1c769e524",scale:"s",min:5,max:125,value:`${this.labelClass.symbol.font.size/.75||5}`,onCalciteInputNumberInput:e=>{this.waitOnUser(e,(e=>{this.labelClass.symbol.font.size=.75*Number(e.value),this.notifySymbolChanges.emit(this.guid)}),5)}})),P=(0,i.h)("div",{key:"16f36b9204cd12787560dc1a335c8cf521913ad4",class:"offset-div"},(0,i.h)("calcite-label",{key:"ffb0ea05468075d79fdd7ada152fb8b5670b5644"},this.strings.offset,(0,i.h)("arcgis-xy-slider",{key:"572244ecceee21e4b9a0d6e46d8a527b8dd46594",ref:e=>{this.offsetXYSlider=e},x:this.labelClass.symbol.xoffset||0,y:-this.labelClass.symbol.yoffset||0,minX:this.minMaxOffset.minOffsetX,minY:this.minMaxOffset.minOffsetY,maxX:this.minMaxOffset.maxOffsetX,maxY:this.minMaxOffset.maxOffsetY,step:1,snappable:!0,onArcgisXYSliderInput:e=>{e.stopPropagation();const t=e.currentTarget;this.changeOffset({x:t.x||0,y:-t.y||0})}})),(0,i.h)("div",{key:"7715684b7ab1f32b028288cff137e1d90f8598d7"},(0,i.h)("calcite-label",{key:"1a6c917aa63e35587bd756a7ca73bd0f47a7b012",scale:"s"},this.strings.offsetX,(0,i.h)("calcite-input-number",{key:"0f31f63f1cc033f424b029444dbb630f777b89f9",scale:"s",placeholder:this.strings.offsetX,value:`${this.labelClass.symbol.xoffset||0}`,min:this.minMaxOffset.minOffsetX,max:this.minMaxOffset.maxOffsetX,ref:e=>{this.offsetXElement=e},onCalciteInputNumberInput:e=>{this.waitOnUser(e,(()=>{this.changeOffset({x:Number(this.offsetXElement.value)||0,y:Number(this.offsetYElement.value)||0})}),0)}})),(0,i.h)("calcite-label",{key:"ae668f5c6c22ed2fa753970eb73a85f88a869af4",scale:"s"},this.strings.offsetY,(0,i.h)("calcite-input-number",{key:"0413a237dd390691d6c3923defc5e417ae95d06e",scale:"s",placeholder:this.strings.offsetY,value:`${this.labelClass.symbol.yoffset||0}`,min:this.minMaxOffset.minOffsetY,max:this.minMaxOffset.maxOffsetY,ref:e=>{this.offsetYElement=e},onCalciteInputNumberInput:e=>{this.waitOnUser(e,(()=>{this.changeOffset({x:Number(this.offsetXElement.value)||0,y:Number(this.offsetYElement.value)||0})}),0)}})))),x=(0,i.h)("calcite-label",{key:"38892f41dd99143359ce98d61a8ee2987e7c5bef",alignment:"start",layout:"inline-space-between"},this.strings.allowOverrun,(0,i.h)("calcite-switch",{key:"1d9ea9b251e9a0bff1d875b1e4944516e5d25e40",scale:"s",checked:this.labelClass.allowOverrun,onCalciteSwitchChange:e=>{this.labelClass.allowOverrun=e.target.checked,this.notifySymbolChanges.emit(this.guid)}})),T=(0,i.h)("calcite-label",{key:"7c65fa30eaebde9099877b0df0efba20321ecf9d",alignment:"start",layout:"inline-space-between"},this.strings.repeatLabel,(0,i.h)("calcite-switch",{key:"1b1812d4064b33eef5371b3b06469ac3430070a4",scale:"s",checked:this.labelClass.repeatLabel,onCalciteSwitchChange:e=>{this.labelClass.repeatLabel=e.target.checked,this.reRender=!this.reRender,this.notifySymbolChanges.emit(this.guid)}})),E=(0,i.h)("calcite-label",{key:"386885afdcb706e7b326b97277761902a136c949"},this.strings.labelRepeat,(0,i.h)("calcite-input-number",{key:"8cd645370ef09387eea13a6449996b8906150fcd",disabled:!this.labelClass.repeatLabel,scale:"s",min:0,value:`${this.labelClass.repeatLabelDistance||0}`,onCalciteInputNumberInput:e=>{this.waitOnUser(e,(e=>{this.labelClass.repeatLabelDistance=Number(e.value),this.notifySymbolChanges.emit(this.guid)}),0)}})),F=this.panelElement&&(0,i.h)("calcite-block-section",{key:"3ffa90e1514177f1d7740843e508a70202870a1b",id:"haloBlock_Id",text:this.strings.halo,toggleDisplay:"switch",open:!!this.labelClass.symbol.haloColor},(0,i.h)("calcite-label",{key:"d1e166f079b6179923888d7acb7d0382e15519f2"},this.strings.color,(0,i.h)("arcgis-color-input",{key:"7acb847072dfbfac78ce9a653c02707e45a47477",id:"haloColorPicker_Id",color:(null===(d=this.labelClass.symbol.haloColor)||void 0===d?void 0:d.toHex())||"#ffffff",storageId:"arcgis-symbol-styler-storage-colors",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{const l=this.labelClass.symbol.haloColor.a;this.labelClass.symbol.haloColor=new e(t),this.labelClass.symbol.haloColor.a=l,this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode&&(this.placementNode.disabled=!0)}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode&&(this.placementNode.disabled=!1)}})),(0,i.h)("calcite-label",{key:"b049b235b7e7167e5b61244f8f204d8c95ce829c"},this.strings.transparency,(0,i.h)("arcgis-slider-input",{key:"273338f588a9bad88317eca001868ae7e18f91de",min:0,max:100,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,r.a)(null!==(m=null===(f=this.labelClass.symbol.haloColor)||void 0===f?void 0:f.a)&&void 0!==m?m:1)),onArcgisSliderInputValueChange:e=>{const t=e.detail,l=(0,r.t)(t);this.labelClass.symbol.haloColor.a=l,this.notifySymbolChanges.emit(this.guid),(0,i.f)(this.hostElement)},withSteppers:!this.narrow,label:this.strings.transparency})),(0,i.h)("calcite-label",{key:"05c8bb3aeec126e9264e0399c0703726d4ff4cf4"},this.strings.size,(0,i.h)("calcite-input-number",{key:"d3ae9521d48b720bac2134f3bda2f977b7f05cc9",scale:"s",min:1,max:10,value:`${Math.round(this.labelClass.symbol.haloSize/.75||1)}`,onCalciteInputNumberInput:e=>{this.waitOnUser(e,(e=>{this.labelClass.symbol.haloSize=.75*Number(e.value),this.notifySymbolChanges.emit(this.guid)}),1)}}))),A=this.panelElement&&(0,i.h)("calcite-block-section",{key:"eaddd2c76d8e034d3fe14330cc52902632cb16c4",id:"backgroundBlock_Id",text:this.strings.background,toggleDisplay:"switch",open:!!this.labelClass.symbol.backgroundColor},(0,i.h)("calcite-label",{key:"a8b0fd7fdb87b0e45d41e4ffcd6e8a588dfa09b2"},this.strings.color,(0,i.h)("arcgis-color-input",{key:"7f6d386df18c724b3624fc3f648d5495463fc90d",id:"backgroundColorPicker_Id",color:(null===(b=this.labelClass.symbol.backgroundColor)||void 0===b?void 0:b.toHex())||"#ffffff",storageId:"arcgis-symbol-styler-storage-colors",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{const l=this.labelClass.symbol.backgroundColor.a;this.labelClass.symbol.backgroundColor=new e(t),this.labelClass.symbol.backgroundColor.a=l,this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode&&(this.placementNode.disabled=!0)}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode&&(this.placementNode.disabled=!1)}})),(0,i.h)("calcite-label",{key:"99fce3fa5500780c97713b0a2880ad32765da9a4"},this.strings.transparency,(0,i.h)("arcgis-slider-input",{key:"4ae7781fc68976b33e0b0cf3aa5ea594e942db37",min:0,max:100,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,r.a)(null!==(p=null===(y=this.labelClass.symbol.backgroundColor)||void 0===y?void 0:y.a)&&void 0!==p?p:1)),onArcgisSliderInputValueChange:e=>{const t=e.detail,l=(0,r.t)(t);this.labelClass.symbol.backgroundColor.a=l,this.notifySymbolChanges.emit(this.guid),(0,i.f)(this.hostElement)},withSteppers:!this.narrow,label:this.strings.transparency})),(0,i.h)("calcite-label",{key:"75ac9c34d3804d02146b97760ed90788f01e20f5"},this.strings.outlineColor,(0,i.h)("arcgis-color-input",{key:"894f3d304bd90858964c726ccb234d8647dff3ce",id:"borderLineColorPicker_Id",color:(null===(g=this.labelClass.symbol.borderLineColor)||void 0===g?void 0:g.toHex())||"#ffffff",storageId:"arcgis-symbol-styler-storage-colors",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{const l=this.labelClass.symbol.borderLineColor.a;this.labelClass.symbol.borderLineColor=new e(t),this.labelClass.symbol.borderLineColor.a=l,this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode&&(this.placementNode.disabled=!0)}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode&&(this.placementNode.disabled=!1)}})),(0,i.h)("calcite-label",{key:"cbd83dd21ecab039a0b81fe93ddff958e9fa3e30"},this.strings.outlineTransparency,(0,i.h)("arcgis-slider-input",{key:"7354252461a8fd14638ce7044c3843d6cfbbd206",min:0,max:100,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,r.a)(null!==(v=null===(u=this.labelClass.symbol.borderLineColor)||void 0===u?void 0:u.a)&&void 0!==v?v:1)),onArcgisSliderInputValueChange:e=>{const t=e.detail,l=(0,r.t)(t);this.labelClass.symbol.borderLineColor.a=l,this.notifySymbolChanges.emit(this.guid),(0,i.f)(this.hostElement)},withSteppers:!this.narrow,label:this.strings.transparency})),(0,i.h)("calcite-label",{key:"be623b07a6e2888074883d49ee6cb8d464fbf8fd"},this.strings.outlineWidth,(0,i.h)("calcite-input-number",{key:"30915f7d2168365f7113d4f90d6badfcc111b85f",id:"borderLineSizePicker_Id",scale:"s",min:0,max:18,value:`${null!==(w=this.labelClass.symbol.borderLineSize/.75)&&void 0!==w?w:1}`,onCalciteInputNumberInput:e=>{this.waitOnUser(e,(e=>{this.labelClass.symbol.borderLineSize=.75*Number(e.value),this.notifySymbolChanges.emit(this.guid)}),5)}}))),B=this.labelContentRefElement.getBoundingClientRect();return(0,i.h)(i.H,{key:"c9fd2910c4c74186072744e913cc931101b10f5a",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"c191ed82906eade4efc25abc414e54035450ac72",dir:(0,c.g)(this.hostElement),id:"managePopover_Id",placement:"leading-start",open:this.isOpen,pointerDisabled:!0,referenceElement:this.labelContentRefElement,offsetDistance:-Math.round(this.labelContentRefElement.getBoundingClientRect().width),offsetSkidding:50,label:this.strings.labelStyle,style:{zIndex:"100"},triggerDisabled:!0,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"264f91f9fa2e963b83261962a7b0e9dfec2b7f9b",ref:e=>this.panelElement=e,closable:!0,class:"panel",style:{width:`${B.width}px`,maxHeight:.8*B.height+"px"},onCalcitePanelClose:()=>this.closeLabelPopovers.emit()},(0,i.h)("div",{key:"c768b37e62bfb368e5e1184313cae65838e24b16",slot:"header-content"},this.strings.labelStyle),(0,i.h)("calcite-block",{key:"83dace0bd8a9203725103d52f92d3bc4c2d6aa1f",heading:"",collapsible:!1,open:!0},I," ",R,(0,i.h)("calcite-label",{key:"6d584190997bba8e3ec91bba0106d22657a58535"},this.strings.color,this.panelElement&&(0,i.h)("arcgis-color-input",{key:"cde1d8ad0afb205199277e692137829763579550",color:(null===(C=this.labelClass.symbol.color)||void 0===C?void 0:C.toHex())||"#ffffff",storageId:"arcgis-symbol-styler-storage-colors",popoverProps:{refElement:this.panelElement,placement:"leading-start",offsetDistance:-Math.round(this.panelElement.getBoundingClientRect().width),offsetSkidding:50,maxHeight:.8*B.height-52+"px"},onArcgisColorInputChange:async e=>{const t=e.target.color;await(0,s.l)(["esri/Color"]).then((([e])=>{const l=this.labelClass.symbol.color.a;this.labelClass.symbol.color=new e(t),this.labelClass.symbol.color.a=l,this.notifySymbolChanges.emit(this.guid)}))},onArcgisColorInputPopoverOpen:()=>{setTimeout((()=>{this.fontNode.disabled=!0,this.placementNode&&(this.placementNode.disabled=!0)}),200)},onArcgisColorInputPopoverClose:()=>{this.fontNode.disabled=!1,this.placementNode&&(this.placementNode.disabled=!1)}})),(0,i.h)("calcite-label",{key:"b5386c3a196e0f3276a922a0c6d99a6346705b34"},this.strings.transparency,(0,i.h)("arcgis-slider-input",{key:"7f1ced378fa7d07ab315825a703c8fe59fa792cd",min:0,max:100,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,r.a)(null!==(S=null===(L=this.labelClass.symbol.color)||void 0===L?void 0:L.a)&&void 0!==S?S:1)),onArcgisSliderInputValueChange:e=>{const t=e.detail,l=(0,r.t)(t);this.labelClass.symbol.color.a=l,this.notifySymbolChanges.emit(this.guid),(0,i.f)(this.hostElement)},withSteppers:!this.narrow,label:this.strings.transparency})),F,"polyline"!==this.layerGeometryType&&A,this.placementSelection(),k||"polyline"!==this.layerGeometryType?P:null,k||"polyline"!==this.layerGeometryType?null:(0,i.h)("div",null,x," ",T," ",E)))))}waitOnUser(e,t,l){const i=e.target;this.typingHndl&&(clearTimeout(this.typingHndl),this.typingHndl=void 0);const a=i.value,s=parseFloat(a);a?(0,r.i)(i.min)&&(0,r.i)(i.max)&&(i.min>s||i.max<s)?this.typingHndl=setTimeout((()=>{this.typingHndl=void 0,i.min>s?(i.value=`${i.min}`,t(i)):i.max<s&&(i.value=`${i.max}`,t(i))}),750):("-"!==a[0]||0!==s&&!isNaN(s))&&t(i):this.typingHndl=setTimeout((()=>{this.typingHndl=void 0,i.value=`${l}`,t(i)}),2e3)}get hostElement(){return(0,i.d)(this)}};S.style=".offset-div{align-items:center;display:flex;justify-content:space-between;gap:16px}.placement-label{margin-top:12px}"},84537:(e,t,l)=>{l.d(t,{a:()=>a,b:()=>n,f:()=>s,m:()=>o,p:()=>i});const i=["above-center","above-left","above-right","below-center","below-left","below-right","center-center","center-left","center-right"],a=["above-along","center-along","below-along"],s=new Map;s.set("Abril Fatface Regular",{font:{family:"Abril Fatface",style:"normal",weight:"normal"}}),s.set("Alegreya Bold",{font:{family:"Alegreya",style:"normal",weight:"bold"}}),s.set("Alegreya Bold Italic",{font:{family:"Alegreya",style:"italic",weight:"bold"}}),s.set("Alegreya Italic",{font:{family:"Alegreya",style:"italic",weight:"normal"}}),s.set("Alegreya Regular",{font:{family:"Alegreya",style:"normal",weight:"normal"}}),s.set("Alegreya Sans Italic",{font:{family:"Alegreya Sans",style:"italic",weight:"normal"}}),s.set("Alegreya SC Bold",{font:{family:"Alegreya SC",style:"normal",weight:"bold"}}),s.set("Alegreya SC Italic",{font:{family:"Alegreya SC",style:"italic",weight:"normal"}}),s.set("Alegreya SC Regular",{font:{family:"Alegreya SC",style:"normal",weight:"normal"}}),s.set("Amarante Regular",{font:{family:"Amarante",style:"normal",weight:"normal"}}),s.set("Amatic SC Bold",{font:{family:"Amatic SC",style:"normal",weight:"bold"}}),s.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),s.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),s.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),s.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),s.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),s.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),s.set("Atomic Age Regular",{font:{family:"Atomic Age",style:"normal",weight:"normal"}}),s.set("Audiowide Regular",{font:{family:"Audiowide",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Bold",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Bold Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Demi Italic",{font:{family:"Avenir Next LT Pro Demi",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Italic",{font:{family:"Avenir Next LT Pro",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Regular",{font:{family:"Avenir Next LT Pro",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Light Italic",{font:{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Light Regular",{font:{family:"Avenir Next LT Pro Light",style:"normal",weight:"normal"}}),s.set("Avenir Next LT Pro Medium Bold",{font:{family:"Avenir Next LT Pro Medium",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Medium Bold Italic",{font:{family:"Avenir Next LT Pro Medium",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Bold",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Bold Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"bold"}}),s.set("Avenir Next LT Pro Regular Italic",{font:{family:"Avenir Next LT Pro Regular",style:"italic",weight:"normal"}}),s.set("Avenir Next LT Pro Regular Regular",{font:{family:"Avenir Next LT Pro Regular",style:"normal",weight:"normal"}}),s.set("Belleza Regular",{font:{family:"Belleza",style:"normal",weight:"normal"}}),s.set("BellTopo Sans Bold",{font:{family:"BellTopo Sans",style:"normal",weight:"bold"}}),s.set("BellTopo Sans Bold Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"bold"}}),s.set("BellTopo Sans Italic",{font:{family:"BellTopo Sans",style:"italic",weight:"normal"}}),s.set("BellTopo Sans Regular",{font:{family:"BellTopo Sans",style:"normal",weight:"normal"}}),s.set("Black Ops One Regular",{font:{family:"Black Ops One",style:"normal",weight:"normal"}}),s.set("Cabin Sketch Bold",{font:{family:"Cabin Sketch",style:"normal",weight:"bold"}}),s.set("Cabin Sketch Regular",{font:{family:"Cabin Sketch",style:"normal",weight:"normal"}}),s.set("Coming Soon Regular",{font:{family:"Coming Soon",style:"normal",weight:"normal"}}),s.set("FGDC GeoAge Regular",{font:{family:"FGDC GeoAge",style:"normal",weight:"normal"}}),s.set("Homemade Apple Regular",{font:{family:"Homemade Apple",style:"normal",weight:"normal"}}),s.set("IM FELL DW Pica PRO Italic",{font:{family:"IM FELL DW Pica PRO",style:"italic",weight:"normal"}}),s.set("IM FELL DW Pica PRO Regular",{font:{family:"IM FELL DW Pica PRO",style:"normal",weight:"normal"}}),s.set("Josefin Sans Regular",{font:{family:"Josefin Sans",style:"normal",weight:"normal"}}),s.set("Josefin Sans Semibold Italic",{font:{family:"Josefin Sans Semibold",style:"italic",weight:"normal"}}),s.set("Josefin Slab Bold",{font:{family:"Josefin Slab",style:"normal",weight:"bold"}}),s.set("Josefin Slab Bold Italic",{font:{family:"Josefin Slab",style:"italic",weight:"bold"}}),s.set("Josefin Slab Italic",{font:{family:"Josefin Slab",style:"italic",weight:"normal"}}),s.set("Josefin Slab Light Italic",{font:{family:"Josefin Slab Light",style:"italic",weight:"normal"}}),s.set("Josefin Slab Regular",{font:{family:"Josefin Slab",style:"normal",weight:"normal"}}),s.set("Josefin Slab Semibold Italic",{font:{family:"Josefin Slab Semibold",style:"italic",weight:"normal"}}),s.set("Josefin Slab Thin Italic",{font:{family:"Josefin Slab Thin",style:"italic",weight:"normal"}}),s.set("Just Another Hand Regular",{font:{family:"Just Another Hand",style:"normal",weight:"normal"}}),s.set("Kranky Regular",{font:{family:"Kranky",style:"normal",weight:"normal"}}),s.set("Life Savers Bold",{font:{family:"Life Savers",style:"normal",weight:"bold"}}),s.set("Loved By The King Regular",{font:{family:"Loved By The King",style:"normal",weight:"normal"}}),s.set("Merriweather Bold",{font:{family:"Merriweather",style:"normal",weight:"bold"}}),s.set("Merriweather Bold Italic",{font:{family:"Merriweather",style:"italic",weight:"bold"}}),s.set("Merriweather Italic",{font:{family:"Merriweather",style:"italic",weight:"normal"}}),s.set("Merriweather Regular",{font:{family:"Merriweather",style:"normal",weight:"normal"}}),s.set("Montserrat Bold",{font:{family:"Montserrat",style:"normal",weight:"bold"}}),s.set("Montserrat Italic",{font:{family:"Montserrat",style:"italic",weight:"normal"}}),s.set("Montserrat Medium Italic",{font:{family:"Montserrat Medium",style:"italic",weight:"normal"}}),s.set("Montserrat Regular",{font:{family:"Montserrat",style:"normal",weight:"normal"}}),s.set("Montserrat Semibold Italic",{font:{family:"Montserrat Semibold",style:"italic",weight:"normal"}}),s.set("Noto Sans Bold",{font:{family:"Noto Sans",style:"normal",weight:"bold"}}),s.set("Noto Sans Bold Italic",{font:{family:"Noto Sans",style:"italic",weight:"bold"}}),s.set("Noto Sans Italic",{font:{family:"Noto Sans",style:"italic",weight:"normal"}}),s.set("Noto Sans Regular",{font:{family:"Noto Sans",style:"normal",weight:"normal"}}),s.set("Noto Serif Bold",{font:{family:"Noto Serif",style:"normal",weight:"bold"}}),s.set("Noto Serif Bold Italic",{font:{family:"Noto Serif",style:"italic",weight:"bold"}}),s.set("Noto Serif Italic",{font:{family:"Noto Serif",style:"italic",weight:"normal"}}),s.set("Noto Serif Regular",{font:{family:"Noto Serif",style:"normal",weight:"normal"}}),s.set("Old Standard TT Bold",{font:{family:"Old Standard TT",style:"normal",weight:"bold"}}),s.set("Old Standard TT Italic",{font:{family:"Old Standard TT",style:"italic",weight:"normal"}}),s.set("Old Standard TT Regular",{font:{family:"Old Standard TT",style:"normal",weight:"normal"}}),s.set("Orbitron Bold",{font:{family:"Orbitron",style:"normal",weight:"bold"}}),s.set("Orbitron Regular",{font:{family:"Orbitron",style:"normal",weight:"normal"}}),s.set("Oregano Italic",{font:{family:"Oregano",style:"italic",weight:"normal"}}),s.set("Oregano Regular",{font:{family:"Oregano",style:"normal",weight:"normal"}}),s.set("Oswald Bold",{font:{family:"Oswald",style:"normal",weight:"bold"}}),s.set("Oswald Regular",{font:{family:"Oswald",style:"normal",weight:"normal"}}),s.set("Pacifico Regular",{font:{family:"Pacifico",style:"normal",weight:"normal"}}),s.set("Palatino Linotype Regular",{font:{family:"Palatino Linotype",style:"normal",weight:"normal"}}),s.set("Playfair Display Black Regular",{font:{family:"Playfair Display Black",style:"normal",weight:"normal"}}),s.set("Playfair Display Bold",{font:{family:"Playfair Display",style:"normal",weight:"bold"}}),s.set("Playfair Display Bold Italic",{font:{family:"Playfair Display",style:"italic",weight:"bold"}}),s.set("Playfair Display Italic",{font:{family:"Playfair Display",style:"italic",weight:"normal"}}),s.set("Playfair Display Regular",{font:{family:"Playfair Display",style:"normal",weight:"normal"}}),s.set("Playfair Display SC Bold",{font:{family:"Playfair Display SC",style:"normal",weight:"bold"}}),s.set("Playfair Display SC Regular",{font:{family:"Playfair Display SC",style:"normal",weight:"normal"}}),s.set("Redressed Regular",{font:{family:"Redressed",style:"normal",weight:"normal"}}),s.set("Risque Regular",{font:{family:"Risque",style:"normal",weight:"normal"}}),s.set("Roboto Condensed Italic",{font:{family:"Roboto Condensed",style:"italic",weight:"normal"}}),s.set("Roboto Condensed Light Italic",{font:{family:"Roboto Condensed Light",style:"italic",weight:"normal"}}),s.set("Rye Regular",{font:{family:"Rye",style:"normal",weight:"normal"}}),s.set("Special Elite Regular",{font:{family:"Special Elite",style:"normal",weight:"normal"}}),s.set("Syncopate Bold",{font:{family:"Syncopate",style:"normal",weight:"bold"}}),s.set("Syncopate Regular",{font:{family:"Syncopate",style:"normal",weight:"normal"}}),s.set("Tangerine Regular",{font:{family:"Tangerine",style:"normal",weight:"normal"}}),s.set("Ubuntu Bold",{font:{family:"Ubuntu",style:"normal",weight:"bold"}}),s.set("Ubuntu Bold Italic",{font:{family:"Ubuntu",style:"italic",weight:"bold"}}),s.set("Ubuntu Condensed Regular",{font:{family:"Ubuntu Condensed",style:"normal",weight:"normal"}}),s.set("Ubuntu Italic",{font:{family:"Ubuntu",style:"italic",weight:"normal"}}),s.set("Ubuntu Light Bold",{font:{family:"Ubuntu Light",style:"normal",weight:"bold"}}),s.set("Ubuntu Light Bold Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"bold"}}),s.set("Ubuntu Light Italic",{font:{family:"Ubuntu Light",style:"italic",weight:"normal"}}),s.set("Ubuntu Light Regular",{font:{family:"Ubuntu Light",style:"normal",weight:"normal"}}),s.set("Ubuntu Medium Italic",{font:{family:"Ubuntu Medium",style:"italic",weight:"normal"}}),s.set("Ubuntu Mono Bold",{font:{family:"Ubuntu Mono",style:"normal",weight:"bold"}}),s.set("Ubuntu Mono Bold Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"bold"}}),s.set("Ubuntu Mono Italic",{font:{family:"Ubuntu Mono",style:"italic",weight:"normal"}}),s.set("Ubuntu Mono Regular",{font:{family:"Ubuntu Mono",style:"normal",weight:"normal"}}),s.set("Ubuntu Regular",{font:{family:"Ubuntu",style:"normal",weight:"normal"}}),s.set("UnifrakturCook Bold",{font:{family:"UnifrakturCook",style:"normal",weight:"bold"}}),s.set("Vast Shadow Regular",{font:{family:"Vast Shadow",style:"normal",weight:"normal"}}),s.set("Walter Turncoat Regular",{font:{family:"Walter Turncoat",style:"normal",weight:"normal"}});const o=new Map;function n(e){return e?"normal"===e.style&&"normal"===e.weight?`${e.family} Regular${"BellTopo Sans"===e.family?"(Beta)":""}`:"normal"===e.style&&"bold"===e.weight?`${e.family} Bold`:"italic"===e.style&&"normal"===e.weight?`${e.family} Italic`:"italic"===e.style&&"bold"===e.weight?`${e.family} Bold Italic`:"Arial Regular":""}o.set("Arial Bold",{font:{family:"Arial",style:"normal",weight:"bold"}}),o.set("Arial Bold Italic",{font:{family:"Arial",style:"italic",weight:"bold"}}),o.set("Arial Italic",{font:{family:"Arial",style:"italic",weight:"normal"}}),o.set("Arial Regular",{font:{family:"Arial",style:"normal",weight:"normal"}}),o.set("Arial Unicode MS Bold",{font:{family:"Arial Unicode MS",style:"normal",weight:"bold"}}),o.set("Arial Unicode MS Bold Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"bold"}}),o.set("Arial Unicode MS Italic",{font:{family:"Arial Unicode MS",style:"italic",weight:"normal"}}),o.set("Arial Unicode MS Regular",{font:{family:"Arial Unicode MS",style:"normal",weight:"normal"}}),o.set("Avenir Bold",{font:{family:"Avenir",style:"normal",weight:"bold"}}),o.set("Avenir Bold Italic",{font:{family:"Avenir",style:"italic",weight:"bold"}}),o.set("Avenir Italic",{font:{family:"Avenir",style:"italic",weight:"normal"}}),o.set("Avenir Regular",{font:{family:"Avenir",style:"normal",weight:"normal"}}),o.set("Times New Roman Bold",{font:{family:"Times New Roman",style:"normal",weight:"bold"}}),o.set("Times New Roman Bold Italic",{font:{family:"Times New Roman",style:"italic",weight:"bold"}}),o.set("Times New Roman Italic",{font:{family:"Times New Roman",style:"italic",weight:"normal"}}),o.set("Times New Roman Regular",{font:{family:"Times New Roman",style:"normal",weight:"normal"}}),o.set("Verdana Bold",{font:{family:"Verdana",style:"normal",weight:"bold"}}),o.set("Verdana Bold Italic",{font:{family:"Verdana",style:"italic",weight:"bold"}}),o.set("Verdana Italic",{font:{family:"Verdana",style:"italic",weight:"normal"}}),o.set("Verdana Regular",{font:{family:"Verdana",style:"normal",weight:"normal"}})},46227:(e,t,l)=>{l.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let l=0;l<e;l++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},11935:(e,t,l)=>{l.d(t,{c:()=>r});var i=l(7263);const a=e=>!("isConnected"in e)||e.isConnected,s=((e,t)=>{let l;return(...i)=>{l&&clearTimeout(l),l=setTimeout((()=>{l=0,e(...i)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(a))}),2e3),o=e=>"function"==typeof e?e():e,n=(e,t)=>{const l=e.indexOf(t);l>=0&&(e[l]=e[e.length-1],e.length--)},r=(e,t)=>{const l=((e,t=((e,t)=>e!==t))=>{const l=o(e);let i=new Map(Object.entries(null!=l?l:{}));const a={dispose:[],get:[],set:[],reset:[]},s=()=>{var t;i=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),a.reset.forEach((e=>e()))},r=e=>(a.get.forEach((t=>t(e))),i.get(e)),c=(e,l)=>{const s=i.get(e);t(l,s,e)&&(i.set(e,l),a.set.forEach((t=>t(e,l,s))))},d="undefined"==typeof Proxy?{}:new Proxy(l,{get:(e,t)=>r(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,l)=>(c(t,l),!0)}),h=(e,t)=>(a[e].push(t),()=>{n(a[e],t)});return{state:d,get:r,set:c,on:h,onChange:(t,l)=>{const i=h("set",((e,i)=>{e===t&&l(i)})),a=h("reset",(()=>l(o(e)[t])));return()=>{i(),a()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{a.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=i.get(e);a.set.forEach((l=>l(e,t,t)))}}})(e,t);return l.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const l=(0,i.g)();l&&((e,t,l)=>{const i=e.get(t);i?i.includes(l)||i.push(l):e.set(t,[l])})(e,t,l)},set:t=>{const l=e.get(t);l&&e.set(t,l.filter(i.f)),s(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),s(e)}}})()),l}},24674:(e,t,l)=>{l.d(t,{l:()=>i});const i=(0,l(11935).c)({layer:null,mapView:null,portal:null,config:null,strings:null,currentLanguage:null,layerGeometryType:null,serviceType:null,layerDisplayType:null}).state}}]);