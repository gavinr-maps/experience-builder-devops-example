/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-7570b7.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-7570b7"],{42552:(e,s,t)=>{t.r(s),t.d(s,{arcgis_smart_mapping_assist_feedback:()=>l});var a=t(7263),i=(t(77040),t(70506),t(82646)),n=t(23521);t(99004),t(58233),t(28926),t(78613),t(62159),t(11935),t(1991);const l=class{constructor(e){(0,a.r)(this,e),this.arcgisSmartMappingAssistFeedbackClose=(0,a.c)(this,"arcgisSmartMappingAssistFeedbackClose",7),this.chat=void 0}componentWillLoad(){}render(){const{checkBoxNode:e,textAreaNode:s}=this,{strings:t}=i.s;return(0,a.h)(a.H,{key:"d0baaffe0853ebfea24742d07553e6fc613560c1"},(0,a.h)("calcite-modal",{key:"2c1a89362f6e12ef2be50de304faa6d542c13546",class:"modal",open:!0,scale:"l",escapeDisabled:!0,outsideCloseDisabled:!0,role:"dialog",onCalciteModalClose:()=>this.arcgisSmartMappingAssistFeedbackClose.emit()},(0,a.h)("div",{key:"47f5726e26a5cf977bd2862fc1b71a445a5aab67",slot:"header"},t.assistFeedback.sendFeedback),(0,a.h)("div",{key:"9667b6f53ac6e3dd8e037564536f43a9e8d6a1c9",slot:"content"},this.renderContent()),(0,a.h)("calcite-button",{key:"9356d6ccddf2f498df1b14bc4936fa00e8f5dc9b",slot:"secondary",appearance:"outline-fill",alignment:"end",onClick:()=>this.arcgisSmartMappingAssistFeedbackClose.emit()},t.cancel),(0,a.h)("calcite-button",{key:"cdd0549cd0d4cf98a0ce5350ef6c9238dbf9418d",slot:"primary",alignment:"end",appearance:"solid",disabled:!(null==e?void 0:e.checked)||!(null==s?void 0:s.value),onClick:()=>this.handleSubmit()},t.assistFeedback.submit)))}renderContent(){const{config:e,strings:s}=i.s,{helpBase:t,helpMap:n}=e,l=(0,a.h)("calcite-link",{target:"_blank",href:`${t}${n[120003249]}`},s.assistFeedback.privacyStatement),c=(0,a.h)("calcite-link",{target:"_blank",href:`${t}${n[120003249]}`},s.assistFeedback.supplement),o=(0,a.h)("calcite-link",{target:"_blank",href:`${t}${n[120003249]}`},s.assistFeedback.privacy),r=s.assistFeedback.iAgree,d=r.substring(0,r.indexOf("${privacyStatement}")),p=r.substring(r.indexOf("${privacyStatement}")+19,r.indexOf("${supplement}")),m=r.substring(r.indexOf("${supplement}")+13),h=s.assistFeedback.learnMore,u=h.substring(0,h.indexOf("${privacy}")),b=h.substring(h.indexOf("${privacy}")+10);return(0,a.h)(a.F,null,(0,a.h)("div",{class:"title"},s.assistFeedback.tellUs),(0,a.h)("div",{class:"sub-title"},s.assistFeedback.dontShare),(0,a.h)("calcite-text-area",{class:"text-input",placeholder:s.panels.assist.placeholder,value:"",scale:"s",rows:10,resize:"vertical",onCalciteTextAreaChange:()=>(0,a.f)(this.hostElement),onClick:()=>(0,a.f)(this.hostElement),ref:e=>this.textAreaNode=e}),(0,a.h)("div",{class:"title email"},s.assistFeedback.email),(0,a.h)("div",{class:"sub-title"},s.assistFeedback.shareEmail),(0,a.h)("calcite-input-text",{class:"email-input",placeholder:s.assistFeedback.enterEmail}),(0,a.h)("div",{class:"disclaimer"},(0,a.h)("calcite-checkbox",{class:"disclaimer-checkbox",onClick:()=>(0,a.f)(this.hostElement),ref:e=>this.checkBoxNode=e}),(0,a.h)("div",null,(0,a.h)("div",null,d,l,p,c,m),(0,a.h)("div",null,u,o,b))))}async handleSubmit(){(0,n.s)({text:this.textAreaNode.value}),this.arcgisSmartMappingAssistFeedbackClose.emit()}get hostElement(){return(0,a.d)(this)}};l.style=".modal{top:7.5%;left:7.5%;right:7.5%;--calcite-modal-width:85%;--calcite-modal-height:85%}.text-input{width:100%}.title{font-weight:bold;font-size:16px}.sub-title{font-size:var(--calcite-font-size--1);padding-bottom:10px}.email-input{margin-top:10px;max-width:400px}.email{margin-top:20px}.disclaimer{font-size:var(--calcite-font-size--1);margin-top:30px;display:flex;-moz-column-gap:10px;column-gap:10px}.disclaimer-checkbox{margin-top:5px}"},23521:(e,s,t)=>{t.d(s,{a:()=>n,s:()=>l});t(77040),t(70506);var a=t(82646);const i="https://ndh-inf-ml-p01.esri.com/dev/mapping";async function n(e){var s;const{text:t}=e,{layer:n,modules:l}=a.s;if(!(0,a.r)(n))return;const c={token:"",map_data:{data:n.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type})))},messages:t,entry_point:"style"},o={method:"post",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}};console.log("request body: ",c);try{const e=(null===(s=l.urlUtils.urlToObject(document.URL).query)||void 0===s?void 0:s.assistUrl)||i,{data:a}=await l.esriRequest(e,o);if(a.status_code&&200!==a.status_code)return console.log("*** question/response: ",JSON.stringify({question:t,response:a})),Promise.resolve({message:a.botMessage,status:"error",type:"response"});const n=a[0],c=n.botMessage,r="map_style"===n.actionType?"valid":"invalid";return Promise.resolve({message:c,status:r,dataObject:n,type:"response"})}catch(e){return Promise.resolve({message:e.message,status:"error",type:"response"})}}async function l(e){const{text:s}=e,{layer:t,modules:n}=a.s;if(!(0,a.r)(t))return;const l=t.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type}))),c={method:"post",body:JSON.stringify({token:"",map_data:{data:l},messages:s,entry_point:"style"}),headers:{"Content-Type":"application/json"}};console.log(JSON.stringify(c));try{await n.esriRequest(i,c)}catch(e){}}}}]);