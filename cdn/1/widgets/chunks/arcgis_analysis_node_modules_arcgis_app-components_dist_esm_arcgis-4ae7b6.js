/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4ae7b6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4ae7b6"],{67575:(e,t,r)=>{r.d(t,{a:()=>i,i:()=>n});const i={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service"},n=e=>!!Object.values(i).includes(e)},22182:(e,t,r)=>{r.r(t),r.d(t,{arcgis_group_thumbnail:()=>S,arcgis_user_popup:()=>x,arcgis_user_popup_popover:()=>I});var i=r(7263),n=r(65215),o=r(94788),s=r(78613),a=r(46581),l=r(62159),c=r(12166),u=r(96601),d=r(31670),p=r(11246),v=r(58233),h=r(20375),f=r(59296),m=r(71695),g=r(15437);r(28926),r(70506),r(99004),r(79714),r(2174),r(86537),r(11935),r(66488),r(67575);const b=/^#[0-9A-F]{3}$/i,w=/^#[0-9A-F]{6}$/i;function y(e){return function(e){return e&&4===e.length&&b.test(e)}(e)||function(e){return e&&7===e.length&&w.test(e)}(e)}function k(e){return function(e){let{r:t,g:r,b:i}=e;t/=255,r/=255,i/=255;const n=Math.max(t,r,i),o=Math.min(t,r,i),s=n-o;if(n===o)return 0;let a=(n+o)/2;switch(n){case t:a=(r-i)/s+(r<i?6:0);break;case r:a=(i-t)/s+2;break;case i:a=(t-r)/s+4}return Math.round(60*a)}(function(e){if(!y(e))return null;if(3===(e=e.replace("#","")).length){const[t,r,i]=e.split("");return{r:parseInt(`${t}${t}`,16),g:parseInt(`${r}${r}`,16),b:parseInt(`${i}${i}`,16)}}return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}}(e))}const S=class{constructor(e){(0,i.r)(this,e),this.openTooltip=()=>{this.tooltipElement&&(this.tooltipElement.open=!0)},this.closeTooltip=()=>{this.tooltipElement&&(this.tooltipElement.open=!1)},this.group=void 0,this.portal=void 0,this.tooltip=void 0,this.scale="m",this.error=!1}render(){const{group:e,error:t,openTooltip:r,closeTooltip:n}=this;if((null==e?void 0:e.thumbnail)&&!t)return(0,i.h)(i.H,null,(0,i.h)("img",{alt:"",class:"thumbnail",onError:()=>this.error=!0,ref:e=>this.thumbnailElement=e,src:this.getThumbnailURI(),onMouseLeave:n,onMouseEnter:r,onFocusout:n,onFocusin:r}),this.renderTooltip());const o=this.generateInitials(),s=this.generateFillColor();return(0,i.h)(i.H,null,(0,i.h)("span",{class:"background",ref:e=>this.thumbnailElement=e,style:{backgroundColor:s},onMouseLeave:n,onMouseEnter:r,onFocusout:n,onFocusin:r},o?(0,i.h)("span",{"aria-hidden":"true",class:"initials"},o):(0,i.h)("calcite-icon",{class:"icon",icon:"users",scale:"xl"===this.scale?"l":this.scale})),this.renderTooltip())}renderTooltip(){return this.tooltip?(0,i.h)("calcite-tooltip",{ref:e=>{e.referenceElement=this.thumbnailElement,this.tooltipElement=e},closeOnClick:!0,label:this.group.title,placement:"bottom-start",offsetDistance:6,offsetSkidding:0,class:"tooltip"},(0,i.h)("p",{class:"tooltip-text"},this.group.title)):null}getThumbnailURI(){const{group:e}=this;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const t=(0,n.g)(this.portal),r=t?`?token=${t}`:"";return`${(0,o.g)(this.portal)}community/groups/${e.id}/info/${e.thumbnail}${r}`}generateFillColor(){const{group:{title:e,id:t},el:r}=this,i=(0,s.g)(r),n=`#${null==t?void 0:t.substr(t.length-6)}`,o=t&&y(n)?n:function(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let r="#";for(let e=0;e<3;e++)r+=("00"+(t>>8*e&255).toString(16)).substr(-2);return r}(e);if(!t&&!e||!y(o))return"var(--calcite-color-foreground-2)";return`hsl(${k(o)}, 60%, ${"dark"===i?20:90}%)`}generateInitials(){var e,t;const r=null===(t=null===(e=this.group)||void 0===e?void 0:e.title)||void 0===t?void 0:t.trim().charAt(0);return!!(null==r?void 0:r.match(/^\w+$/))&&r}get el(){return(0,i.d)(this)}};S.style=":host{display:inline-block}:host([scale=s]){height:1.5rem;width:1.5rem;font-size:0.625rem}:host([scale=m]){height:2rem;width:2rem;font-size:0.75rem}:host([scale=l]){font-size:1rem;height:2.75rem;width:2.75rem}:host([scale=xl]){font-size:1.25rem;height:4rem;width:4rem}.icon{display:flex;color:var(--calcite-color-text-3)}.background{position:relative;display:flex;height:100%;width:100%;align-items:center;justify-content:center}.initials{position:absolute;font-weight:700;text-transform:uppercase;color:var(--calcite-color-text-2)}.thumbnail{height:100%;width:100%}.tooltip-text{margin:0px;padding:0px;font-size:0.75rem;color:var(--calcite-color-text-2)}calcite-tooltip{pointer-events:none}";const x=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPopupInternalUIAction=(0,i.c)(this,"arcgisUserPopupInternalUIAction",7),this.user=void 0,this.username=void 0,this.item=void 0,this.api=void 0,this.scale="m",this.portal=void 0,this.baseUrl=void 0,this.underline=void 0,this.showAvatar=!0,this.showName=!0,this.showUsername=!1,this.wrap=void 0,this.appearance="transparent",this.checkOnline=void 0,this.itemUserInfo=void 0,this.groups=void 0,this.total=void 0,this.showPopover=void 0,this.privateUser=void 0}async componentWillLoad(){this.init()}async init(){const{el:e,item:t,username:r,portal:i}=this,n=await(0,l.g)(e);if(this.i18n=n[0],this.lang=n[1],t)this.fetchItemUserInfo();else if(r)try{const e=await(0,c.f)(r,i);this.itemUserInfo=e}catch(e){this.privateUser=!0}}async setFocus(){var e;null===(e=this.button)||void 0===e||e.focus()}async fetchItemUserInfo(){const{portal:e,item:t,lang:r,checkOnline:i}=this;this.itemUserInfo=await(0,c.a)(t,e,r,i)}async fetchItemsAndGroups(){const{user:e,itemUserInfo:t,item:r,portal:i,total:n,username:o,checkOnline:s}=this,l=o||(null==e?void 0:e.username)||(null==r?void 0:r.owner);(0,u.i)(r)||(this.groups||(this.groups=await(0,a.f)((()=>(0,c.b)(l,i,s)),"userGroups",l)),isNaN(n)&&(this.total=await(0,a.f)((()=>(0,c.c)((e||t).username,i,s)),"userItemsTotal",l)))}render(){const{user:e,itemUserInfo:t,portal:r,item:n,baseUrl:o,button:s,appearance:a,i18n:l,scale:c}=this,u=e||t;return u&&l?(0,i.h)(i.H,null,(0,i.h)("button",{class:{button:!0,"button--outline":"outline"===a},ref:e=>this.button=e,onClick:async()=>{this.showPopover||(this.showPopover=!0),this.fetchItemsAndGroups()}},(0,i.h)("slot",null,(0,i.h)("arcgis-user-avatar",{user:u,scale:"m"===c?"m":"s",portal:r,showName:this.showName,description:this.showUsername?u.username:"",showAvatar:this.showAvatar,underline:this.underline,checkOnline:this.checkOnline,wrap:this.wrap}))),this.showPopover&&(0,i.h)("arcgis-tunnel",{reference:this.el},(0,i.h)("arcgis-user-popup-popover",{onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisUserPopupInternalUIAction.emit(e.detail)},onArcgisUserPopupPopoverClose:()=>{this.showPopover=!1,this.popoverNode=null},onArcgisUserPopupPopoverKeyDown:e=>{if("Escape"===e.detail.key){setTimeout((()=>{this.button.focus()}),200)}},user:e,item:n,portal:r,baseUrl:o,itemUserInfo:t,i18n:l,groups:this.groups,total:this.total,checkOnline:this.checkOnline,ref:e=>{e&&(e.referenceElement=s,this.popoverNode||(this.popoverNode=e,e.open()))}}))):(0,i.h)("arcgis-user-avatar",{scale:"s",showName:!0,checkOnline:this.checkOnline})}get el(){return(0,i.d)(this)}static get watchers(){return{item:["fetchItemUserInfo"]}}};function $({baseUrl:e,portal:t,user:r,type:i}){var n,o;const s=(0,g.h)(e),{username:a,orgId:l}=r,c=encodeURIComponent(a),u=(null===(n=t.user)||void 0===n?void 0:n.username)===r.username;return("groups"===i&&(0,m.z)(t.user)||"content"===i&&(0,m.o)(t.user)||(0,f.c)(t.user)||u)&&l===(null===(o=t.user)||void 0===o?void 0:o.orgId)?`${s}/${i}.html${u?"":`?user=${c}`}`:`${s}/search.html?q=owner:%22${c}%22&restrict=false#${i}`}x.style=":host{display:flex}.button{display:flex;align-items:center;max-width:100%;cursor:pointer;white-space:normal;border-style:none;padding:0px;font-size:0.75rem;color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;transition-property:all;outline-color:transparent;background:transparent;font-family:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.button--outline{box-sizing:border-box;width:100%;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;transition-property:all;border:1px solid var(--calcite-ui-border-3)}.button--outline:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.name{overflow:hidden;white-space:nowrap;margin-inline-start:0.5rem;text-overflow:ellipsis}";const I=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPopupPopoverClose=(0,i.c)(this,"arcgisUserPopupPopoverClose",7),this.arcgisUserPopupPopoverKeyDown=(0,i.c)(this,"arcgisUserPopupPopoverKeyDown",7),this.arcgisUserPopupInternalUIAction=(0,i.c)(this,"arcgisUserPopupInternalUIAction",7),this.numberFormatOptions={api:d.c.api,places:0,type:"decimal"},this.user=void 0,this.item=void 0,this.portal=void 0,this.baseUrl=void 0,this.referenceElement=void 0,this.itemUserInfo=void 0,this.groups=void 0,this.total=void 0,this.i18n=void 0,this.checkOnline=void 0,this.groupsText="",this.itemsText="",this.expanded=void 0}async close(){this.togglePopover(!1)}async open(){this.togglePopover(!0)}async updateGroupsText(e){const t=await(0,v.f)(e.total,this.numberFormatOptions);this.groupsText=this.i18n.groups.replace("${number}",t)}async updateItemsText(e){const t=await(0,v.f)(e,this.numberFormatOptions);this.itemsText=this.i18n.items.replace("${number}",t)}componentWillLoad(){this.groups&&this.updateGroupsText(this.groups),isNaN(this.total)||this.updateItemsText(this.total)}async togglePopover(e){if(this.popoverNode)return this.popoverNode.open=e,void await(0,p.t)(150)}openLink(e){var t;e.preventDefault();const r=null===(t=e.target)||void 0===t?void 0:t.href;window.open(r,"_blank")}renderOrgButtons(){const{i18n:e,baseUrl:t,itemUserInfo:r}=this,n=(0,g.h)((null==r?void 0:r.url)||t);return(0,i.h)(i.F,null,(0,i.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",href:n,target:"_blank",onClick:e=>this.openLink(e)},e.homepage),(0,i.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",href:`${n}/gallery.html`,target:"_blank",onClick:e=>this.openLink(e)},e.gallery))}renderUserButtons(e){const{i18n:t,baseUrl:r,portal:n,total:o,groups:s}=this,a=!this.groupsText||!this.itemsText,{username:l}=e;return a?(0,i.h)("calcite-loader",{label:t.loadingUserInformation,scale:"s",class:"loader"}):(0,i.h)(i.F,null,!!(null==s?void 0:s.total)&&(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${$({baseUrl:r,portal:n,user:e,type:"groups"})}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view all groups"})}},this.groupsText),!!o&&(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${$({baseUrl:r,portal:n,user:e,type:"content"})}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view all content"})}},this.itemsText),(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${(0,g.h)(r)}/user.html?user=${encodeURIComponent(l)}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view profile"})}},t.profile))}render(){const{i18n:e,user:t,item:r,itemUserInfo:n,lang:o,portal:s,expanded:a,referenceElement:l}=this,d=t||n,v=(0,u.i)(r),{username:f,description:m}=d,g=(0,c.g)(d,o),b=(0,h.g)(m)||"",w=b.replace(/<br>/g," ".repeat(40)),y=!a&&w.length>=240,k=y?`${w.substring(0,240).trim().replace(/\s{5,40}/g,"<br>")}...`:b,S=v?this.i18n.itemManagedBy.replace("${username}",f):f;return(0,i.h)(i.H,{key:"a934458fbbd269aa31b89b248cd64d3592bd80b3"},(0,i.h)("calcite-popover",{key:"45f258cf5aedae1f37d826e6c9aacae6c6158ff4",class:"popover",label:g,pointerDisabled:!0,referenceElement:l,placement:"bottom-start",id:`${f}-popover`,ref:e=>this.popoverNode=e,autoClose:!0,onCalcitePopoverOpen:(0,p.d)((()=>{this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"open profile popup"})}),100),onCalcitePopoverClose:()=>this.arcgisUserPopupPopoverClose.emit(),onKeyDown:e=>this.arcgisUserPopupPopoverKeyDown.emit(e)},(0,i.h)("div",{key:"5bdbbb0379f831f9b73372cb6b47888f9bc14b54",class:"wrapper"},(0,i.h)("div",{key:"a4db603dae62fc2d434d162762379cfd01d49466",class:"header"},(0,i.h)("arcgis-user-avatar",{key:"d4092250106b5d081114fb944ffb57110f5ac13c",class:"user-avatar",user:d,scale:"l",portal:s,showName:!0,description:S,checkOnline:this.checkOnline})),(0,i.h)("div",{key:"96541603704d207dff7aecbca1c70e1ff100d72f",class:"content"},k&&(0,i.h)("p",{key:"a4f4f10b8bf3e1ffd80aaaf710bdc6b88d4c0761",class:{content__description:!0,"content__description--expanded":a},innerHTML:k}),a&&(0,i.h)("div",{key:"3d7bf6637fe42bee7098bdc8d844fef0a9ed986d",class:"content__fade"}),y&&(0,i.h)("calcite-link",{key:"0ea43b43fd2d2417938fff17d61e332862fabb56",class:"content__link",onClick:()=>this.expanded=!0},e.expand),a&&(0,i.h)("calcite-link",{key:"63e3e648bf4dd49836391abfce80513b90e0458b",class:"content__link",onClick:()=>this.expanded=!1},e.showLess),(0,i.h)("div",{key:"c59a3f3961f381bc3bd2a21dc16de06c8d23ef42",class:"buttons"},v?this.renderOrgButtons():this.renderUserButtons(d))))))}get el(){return(0,i.d)(this)}static get watchers(){return{groups:["updateGroupsText"],total:["updateItemsText"]}}};I.style='.wrapper{background-color:var(--calcite-color-foreground-1);width:20rem}.header{padding-left:1rem;padding-right:1rem;padding-top:1.25rem;padding-bottom:1.25rem}.user-avatar{max-width:100%}.content{padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:1.25rem}.content__description{margin:0px;overflow:auto;padding:0px;padding-bottom:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-2);max-height:15.5rem}.content__description--expanded:after{content:"";display:block;height:1rem}.content__fade{position:relative;z-index:10;margin-bottom:0.25rem;display:block;height:1rem;width:100%;background:linear-gradient(to bottom, transparent, var(--calcite-color-foreground-1) 74%);margin-top:-1rem}.content__link{font-size:0.875rem}.buttons{display:grid;grid-auto-flow:column;padding-top:1rem;grid-gap:0.5rem}.button{min-width:0px}.loader{--calcite-loader-padding:0}'},2174:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>s,c:()=>u,d:()=>d,e:()=>p,f:()=>f,g:()=>x,h:()=>m,i:()=>l,j:()=>w,k:()=>y,l:()=>g,m:()=>S,n:()=>k,o:()=>h,p:()=>b,q:()=>v,u:()=>c});var i=r(28926),n=r(94788);function o(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function s(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function a(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function l(e,t){return e.owner===t.username}function c(e,t){return l(e,t)||function(e,t){var r;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,n="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!l(e,t)&&n&&i.includes("esri_")&&!o.includes(i))return!1;return n}(e,t)}const u=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),d=(e,t)=>`${(0,n.a)(t)}item.html?id=${e}`,p=(e,t)=>`${(0,n.g)(t)}/content/users/${e}`,v=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{});function h(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Spatiotemporal")}function f(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("View Service")}function m(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Hosted Service")}function g(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Multi Services View")}function b(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function w(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,n.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r;const i=null!==(r=null===(t=e.data)||void 0===t?void 0:t.groups)&&void 0!==r?r:[];return Promise.resolve(i)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function y(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);return s(`${(0,n.g)(o)}content/items/${r.id}/groups`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r,i,n,o,s;const a=[...null!==(r=null===(t=e.data)||void 0===t?void 0:t.admin)&&void 0!==r?r:[],...null!==(n=null===(i=e.data)||void 0===i?void 0:i.member)&&void 0!==n?n:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(a)}),(()=>Promise.reject()))}async function k(e,t,{relationshipType:r,direction:o}){const s=`${(0,n.g)(t)}content/items/${e}/relatedItems`,[a]=await(0,i.l)(["esri/request"]);return await a(s,{query:{f:"json",relationshipType:r,direction:o},method:"get",responseType:"json"})}function S(e,t){return null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>e.id===t.id&&e.capabilities.includes("updateitemcontrol")))))}const x=(e,t)=>`${t}/content/items/${e}`},66488:(e,t,r)=>{r.d(t,{a:()=>p,b:()=>u,c:()=>a,d:()=>l,e:()=>v,f:()=>o,g:()=>d,h:()=>s,i:()=>h,q:()=>c});var i=r(46581),n=r(94788);function o(e){var t;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(t=e.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))}function s(e){var t,r;return e.isPortal?"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){var t;return e.isPortal&&"modernOnly"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)}(e):"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){const t=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=t}(e)}async function a(e){try{return{result:await(0,i.f)((()=>(0,i.r)(`${(0,n.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,i.f)((()=>(0,i.r)(`${(0,n.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function c(e={},t){return(0,i.r)(`${(0,n.g)(t)}/community/groups`,e)}const u=async(e,t)=>{var r;if(!e)return[];const o=`${(0,n.a)(null!==(r=t.restUrl)&&void 0!==r?r:t.portalUrl)}portals/self/servers`,s=await(0,i.f)((()=>(0,i.r)(o)),"selfServers",t.id);return null==s?void 0:s.servers},d=e=>p((0,n.c)(e)),p=e=>{var t;const r=`${(0,n.a)(null!==(t=(0,n.b)(e))&&void 0!==t?t:e)}info`;return(0,i.f)((()=>(0,i.r)(r,{},{addTokenManually:!1})),"portalInfo",r)};async function v(e,t){return!e.isPortal||await h(e,t)}async function h(e,t){if(!t||!e)return!1;if(!e.isPortal)return!0;const{result:r,error:n}=await(0,i.f)((()=>f(e,t)),"isPortalBackedBySDS",e.id);return!n&&r}const f=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await m(t,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},m=async(e,t)=>{var r;return(null!==(r=await u(e,t))&&void 0!==r?r:[]).filter((e=>e.isHosted))[0]}},71695:(e,t,r)=>{r.d(t,{a:()=>C,b:()=>p,c:()=>O,d:()=>g,e:()=>b,f:()=>y,g:()=>v,h:()=>m,i:()=>k,j:()=>S,k:()=>I,l:()=>u,m:()=>P,n:()=>d,o:()=>N,p:()=>T,q:()=>G,r:()=>U,s:()=>_,t:()=>L,u:()=>D,v:()=>M,w:()=>l,x:()=>$,y:()=>x,z:()=>A});var i=r(66488),n=r(94788),o=r(59296),s=r(31670),a=r(46581);async function l(){return new Promise((async e=>{const{portal:t}=s.c;if(null==t?void 0:t.isPortal){const r=t.helperServices.geocode,i=await function(e){const{config:t,portal:r}=s.c;return new Promise((async(i,n)=>{const o=e.filter((e=>c(e.url,r))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],r=`${t.restBaseUrl}/content/items/${e}`;try{i((await(0,a.r)(r)).url)}catch(e){n(e)}}else n("No world geocoder configured")}))}(r);e(i)}else{const r=function(e){const t=null==e?void 0:e.portalHostname;if(-1!==t.indexOf("dev"))return"dev";if(-1!==t.indexOf("qa"))return"qa";return""}(t);e(`https://geocode${r}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function c(e="",t){var r;const i=t.isPortal,n=e.toLowerCase(),o=n.indexOf("/geocodeserver")>-1&&n.indexOf("/rest/services/")>-1,s=i&&n.indexOf(null===(r=t.portalHostname)||void 0===r?void 0:r.toLowerCase())>-1,a=!i&&n.indexOf("utility")&&n.indexOf(".arcgis.com")>-1;return o&&(s||a)}function u(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function p(e,t){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,i.i)(t,e)}async function v(e,t){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,i.i)(t,e)}const h=async(e,t)=>{var r;return await v(e,t)&&(!t.isPortal||!!t.supports3DTilesServices||!!(null===(r=t.sourceJSON)||void 0===r?void 0:r.supports3DTilesServices))};function f(e){return!(0,o.a)(e)&&!0}function m(e){var t;return!(0,o.a)(e)&&(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishScenes"))}const g=e=>!(0,o.a)(e);function b(e,t,r){var i,n;const o=!!(null===(n=null===(i=t.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===n?void 0:n.url),s=function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(t.isPortal||w(r))}(e,t,r),a=t.isPortal?s:s||function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!t.isPortal&&w(r)}(e,t,r);return o&&a}function w(e){return null==e?void 0:e.some((e=>{var t;return null===(t=e.entitlements)||void 0===t?void 0:t.some((e=>"image"===e.toLowerCase()))}))}async function y(e){var t;const{userLicensedItems:r}=await(0,a.r)(`${null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl}/community/self?returnUserLicensedItems=true`);return r}function k(e,t){var r,i;const s=null===(r=t.helperServices)||void 0===r?void 0:r.geocode.some((({url:e})=>c(e,t))),a=null!==(i=null==e?void 0:e.privileges)&&void 0!==i?i:[];return!(0,o.a)(e)&&s&&(!t.isPortal||!(0,n.i)(t)&&a.includes("portal:user:viewOrgItems")&&a.includes("portal:user:createItem"))}const S=e=>!(0,o.a)(e);function x(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function $(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function I(e,t){var r;return!!t.isPortal&&!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:registerDataStores"))}function P(e){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const U=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function O(e,t,r){return!t.isPortal&&await p(e,t)&&await async function(e,t,r){return!(0,o.a)(e)&&!!t.supportsHostedServices&&u(e)&&(await v(e,t)||await p(e,t)||m(e)||f(e)||b(e,t,r))}(e,t,r)}async function C(e,t,r){switch(t){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return p(e,r);case"Tile Package":return v(e,r);case"3DTiles Package":return h(e,r);case"Vector Tile Package":return f(e);case"Scene Package":return m(e);case"Service Definition":return async function(e,t){return await p(e,t)&&await v(e,t)}(e,r);default:return!0}}function T(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageCredits"))}function _(e,t){var r,i,n;return(0,o.c)(e)||T(e)||!!((null!==(r=null==e?void 0:e.assignedCredits)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.assignedCredits)>-1&&(null===(n=null==t?void 0:t.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const L=e=>!1;function A(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))}function G(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))}function N(e){return(0,o.b)(e)||G(e)&&function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewItems"))}(e)&&(function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:reassignItems"))}(e))}function M(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const D=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},96295:(e,t,r)=>{r.d(t,{H:()=>i,R:()=>n});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',n="Indoors Map Configuration,Code Attachment"},81457:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>c,c:()=>d,d:()=>o,e:()=>n,g:()=>a,r:()=>l,s:()=>s});var i=r(11246);function n(e,t,r,i){!function(e,t,r){r=r||{};let i=null==r?void 0:r.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=r.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(r.expires=i.toUTCString());let n,o=`${e}=${encodeURIComponent(t)}`;for(n in r){o+=`; ${n}`;const e=r[n];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,i?JSON.stringify(t):t,r)}function o(e,t){const r=function(e){const t=document.cookie,r=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),n=t.match(r);return n?decodeURIComponent(n[1]):void 0}(e);return r&&t?JSON.parse(r):r}function s(e,t,r){window.localStorage.setItem(e,r?JSON.stringify(t):t)}function a(e,t){const r=window.localStorage.getItem(e);return r&&t?JSON.parse(r):r}function l(e){window.localStorage.removeItem(e)}function c(e,t,r){window.sessionStorage.setItem(e,r?JSON.stringify(t):t)}function u(e,t){const r=window.sessionStorage.getItem(e);return r&&t?JSON.parse(r):r}function d(e){window.sessionStorage.removeItem(e)}},20375:(e,t,r)=>{function i(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function n(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function o(e,t){return e.replace(/\$\{startLink\}/g,`<calcite-link href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function s(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}r.d(t,{a:()=>o,g:()=>i,i:()=>n,r:()=>s})},15437:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>v,c:()=>u,d:()=>m,e:()=>f,f:()=>g,g:()=>b,h:()=>l,i:()=>w,r:()=>c,s:()=>p,u:()=>d});var i=r(94788),n=r(31670),o=r(28926),s=r(81457),a=r(67575);function l(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function c(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function u(e){var t;const r=null!==(t=null===n.c||void 0===n.c?void 0:n.c.api)&&void 0!==t?t:4,[i]=await(0,o.l)([4===r?"esri/core/urlUtils":"esri/urlUtils"]);let s=i.urlToObject(e);s.query=s.query||{};for(let e in s.query||{})s.query.hasOwnProperty(e)&&(Array.isArray(s.query[e])||(s.query[e]=s.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return s}function d(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function p(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function v(e){const{config:t,portal:r}=n.c;let i=!1;if(!e)return!1;if((t.httpsDomains||[]).forEach((t=>{(e.indexOf(`.${t}/`)>-1||e.indexOf(`/${t}/`)>-1)&&(i=!0)})),!i){let t=r.portalHostname;t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),e.indexOf(t)>-1&&(i=!0)}return i}function h(e){if(!e)return!1;const{config:t,portal:r}=n.c,o=(0,i.g)(r),s=new URL(o).hostname,a=!1===t.isMultiTenant,l=-1!==e.indexOf(".arcgis.com/"),c=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),u=r.supportsHostedServices&&-1!==e.indexOf(s)&&!a;return l&&c||!l&&u}function f(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const t=(0,s.d)("esri_auth",!0);return"web"!==(null===(e=null==t?void 0:t.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function m(e){let t=e.toLowerCase();-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t=(e="https://"+e).toLowerCase());let r=t.indexOf("//");r=t.indexOf("/",r+2),-1==r?t=(e+="/arcgis/rest/services").toLowerCase():r==t.length-1&&(t=(e+="arcgis/rest/services").toLowerCase());let i=t.indexOf("/arcgis",r);i==t.length-7?t=(e+="/rest/services").toLowerCase():i==t.length-8&&(t=(e+="rest/services").toLowerCase()),i=t.indexOf("/server",r),t.endsWith("/server")?t=(e+="/rest/services").toLowerCase():t.endsWith("/server/")&&(t=(e+="rest/services").toLowerCase());const n=t.indexOf("/rest/services",r),o=t.indexOf("/services",r),s=t.indexOf("/rest",r);return-1==n&&o>-1?t=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==n&&s>-1&&(t=(e=`${e.substring(0,s)}/rest/services${e.substring(s+5)}`).toLowerCase()),t.indexOf("/rest/services"),e}const g=(e,t=!1)=>(e=l(e),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!t&&"https:"!==location.protocol||!h(e)&&!v(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),b=(e,t=!1)=>{var r,n,o;if(!e)return{error:{code:"invalidUrl"}};if(w(e,t))return{error:{code:"httpWarning"}};const s=decodeURIComponent(e),l=s.replace(i.v,"").match(/((\.|\/)*(kml|kmz))/gi),c=s.replace(i.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),u=s.replace(i.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),d=s.replace(i.v,"").match(/((\.|\/)*(rss))/gi),p=null===(r=s.replace(i.v,"").match(i.r))||void 0===r?void 0:r[1],v=s.replace(i.v,"").match(i.h),h=s.replace(i.v,"").match(/((\.|\/)*(csv))/gi),f=s.replace(i.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let m=null;if(s.match(i.f))m="GeoJson";else if(!u||c||p)if(p&&!c)m=a.a[p];else if(v)m="Map Service";else if(c){const e="/"===(null==c?void 0:c[0].charAt(0))?"/":"=";m=null===(o=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else l?m="KML":d?m="GeoRSS":h?m="CSV":f?m="Tile Layer":s.endsWith("KnowledgeGraphServer")&&(m="Knowledge Graph");else m="OGCFeatureServer";return{result:m}},w=(e,t)=>!t&&e.includes("http://")},12166:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>d,c:()=>p,d:()=>v,f:()=>c,g:()=>h});var i=r(94788),n=r(96295),o=r(46581),s=r(78613),a=r(65215),l=r(79714);async function c(e,t,r){const n=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),s=`${null!=n?n:(0,i.g)(t)}community/users/${e}`,a=(null==s?void 0:s.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>{try{return await(0,o.r)(s,{},a)}catch(t){return{username:e}}}),"user",s)}async function u(e,t,r,i){var n,o;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(n=e.sourceJSON)||void 0===n?void 0:n.contentStatus)){const n=await(0,l.f)(e,r,t,i);if(!n)return c(e.owner,t,i);const{description:a,name:u,thumbnail:d,url:p}=n;return{description:a?(0,s.s)(a):"",fullName:u,username:e.owner,thumbnail:d,id:e.orgId||(null===(o=e.portal)||void 0===o?void 0:o.id),url:p}}return c(e.owner,t,i)}async function d(e,t,r){const n=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),s=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(0,o.r)(`${n}community/groups`,{q:`(owner:"${e}")`,num:100},s)),"userGroups",e)}async function p(e,t,r){const s=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),a=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(await(0,o.r)(`${s}search`,{q:`(owner:"${e}") ${n.H}`,num:1},a)).total),"userItemsTotal",e)}function v(e,t,r=!1){if(e.thumbnailUrl)return e.thumbnailUrl;if(!e.thumbnail)return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const n=(0,a.g)(t);return`${(0,i.g)(t)}community/users/${e.username}/info/${e.thumbnail}${n&&!r?`?token=${n}`:""}`}function h(e,t){const{fullName:r,firstName:i,lastName:n,username:o}=e;return r||(i&&n?"ja"===t?`${n} ${i}`:`${i} ${n}`:o)}}}]);