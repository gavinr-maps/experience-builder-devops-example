"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-3691da"],{60567:(t,e,i)=>{i.d(e,{N:()=>s,R:()=>r});const r={CORE:"CORE",STANDARD:"STANDARD"},s={INTEGER:"integer",FLOAT:"float"}},41656:(t,e,i)=>{i.r(e),i.d(e,{rfx_functions_list:()=>u,rfx_list_view:()=>p,rfx_search:()=>x});var r=i(17002),s=i(62559),o=(i(5294),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(38146)),a=i(19562),c=(i(23795),i(17902),i(56451),i(68852),i(71802),i(44345),i(60567)),n=i(1409);i(63716),i(59799),i(14385),i(15517),i(15195);const l="no-results-container",h="tool-category-wrapper",d="no-results-icon",f="tools-list-item",u=class{constructor(t){(0,r.r)(this,t),this.triggerChangePanel=(0,r.c)(this,"triggerChangePanel",7),this.triggerSelectTool=(0,r.c)(this,"triggerSelectTool",7),this.openCategoriesChange=(0,r.c)(this,"openCategoriesChange",7),this.modifyPanelState=t=>{this.triggerSelectTool.emit(t),this.triggerChangePanel.emit(1)},this.getRfxFunctionIcon=t=>{let e="";return e="raster-analysis",t.icon??e},this.displayResults=()=>{const t=Array.from(this.rfxFunctionsMap.keys());return this.searchIsActive?(0,r.h)("calcite-list",{selectionAppearance:"border"},this.renderFunctionSearchList(t)):this.renderRfxFunctionsCategoriesList(t)},this.renderFunctionSearchList=t=>{const e=[];return t.map((t=>{const i=this.rfxFunctionsMap.get(t);void 0!==i&&i.length>0&&e.push(...this.renderRfxFunctions(t))})),e},this.renderRfxFunctionsCategoriesList=t=>t.map(((t,e)=>{const i=this.rfxFunctionsMap.get(t);if(void 0!==i&&i.length>0)return(0,r.h)("calcite-block",{class:h,dir:this.dir,heading:this.rfxFunctionsMap.get(t)[0].categoryTitle,collapsible:!0,open:this.openCategories.has(e),onCalciteBlockToggle:()=>this.openCategoriesChange.emit(e)},(0,r.h)("calcite-list",{selectionAppearance:"border"},this.renderRfxFunctions(t)))})),this.renderNoResults=()=>(0,r.h)("div",{class:l},(0,r.h)("calcite-icon",{class:d,icon:"search",scale:"m"}),(0,r.h)("p",null,this.strings.noResults)),this.createRfxFunctionCategoryHelp=()=>{this.rfxFunctionHelpTooltip=document.createElement("calcite-tooltip"),document.body.appendChild(this.rfxFunctionHelpTooltip)},this.showRfxFunctionTooltip=(t,e,i)=>{this.removeHelpTooltip();const r=t.target;this.createRfxFunctionCategoryHelp(),void 0!==this.rfxFunctionHelpTooltip&&void 0!==r&&(this.rfxFunctionHelpTooltip.referenceElement=r,this.rfxFunctionHelpTooltip.placement="left",this.rfxFunctionHelpTooltip.innerText=i??(0,o.f)(this.strings.defaultToolDescription,{toolTitle:e}),this.hoverTimer=setTimeout((()=>{void 0!==this.rfxFunctionHelpTooltip&&(this.rfxFunctionHelpTooltip.open=!0)}),500))},this.removeHelpTooltip=()=>{clearTimeout(this.hoverTimer),void 0!==this.rfxFunctionHelpTooltip&&(this.rfxFunctionHelpTooltip?.remove(),this.rfxFunctionHelpTooltip.open=!1)},this.renderRfxFunctions=t=>this.rfxFunctionsMap.get(t)?.map((e=>(0,r.h)("calcite-list-item",{class:f,label:e.title,description:!0===this.showFunctionDescription?e.description:"",onClick:()=>this.isEmbeddedInCoreApp?null:this.modifyPanelState(e),onMouseOver:t=>this.showRfxFunctionTooltip(t,e.title,e.description),onMouseOut:this.removeHelpTooltip,value:`${t}_${e.toolName}`,key:`${t}_${e.toolName}`,scale:this.scale},(0,r.h)("calcite-icon",{icon:this.getRfxFunctionIcon(e),slot:"content-start",scale:this.scale}),this.isEmbeddedInCoreApp?(0,r.h)(r.F,null,(0,r.h)("calcite-icon",{id:"add-tool",icon:"plus-circle",slot:"content-end",scale:this.scale,onClick:()=>this.modifyPanelState(e)})):null)))??[],this.categories=void 0,this.mode=c.R.STANDARD,this.rfxFunctionsArray=[],this.searchIsActive=void 0,this.scale=a.U.Scale,this.showFunctionDescription=void 0,this.openCategories=new Set([0]),this.rfxFunctionsMap=new Map}onBuildRfxFunctionsMap(){const t=new Map;for(let e=0;e<this.categories?.length;e+=1)t.set(this.categories[e],this.rfxFunctionsArray.filter((t=>t.categoryName===this.categories[e])));this.rfxFunctionsMap=t}get isEmbeddedInCoreApp(){return this.mode===c.R.CORE}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,s.b)(this.hostElement,(0,r.g)("."))),this.onBuildRfxFunctionsMap()}disconnectedCallback(){this.removeHelpTooltip(),this.rfxFunctionHelpTooltip?.remove()}render(){return(0,r.h)(r.H,{key:"7bf47a01ed6db3e7f19ac554f63edf69568b8f6d"},this.rfxFunctionsArray.length>0?this.displayResults():this.renderNoResults())}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}static get watchers(){return{categories:["onBuildRfxFunctionsMap"],rfxFunctionsArray:["onBuildRfxFunctionsMap"]}}};u.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}:host{display:flex;flex-direction:column;flex-wrap:wrap}.tool-category-wrapper{width:100%}.no-results-container{justify-content:center;display:flex;flex-direction:column;width:100%;align-items:center;color:var(--calcite-color-text-3)}.no-results-icon{margin-top:1.5rem}";const p=class{constructor(t){(0,r.r)(this,t),this.triggerSelectFunction=(0,r.c)(this,"triggerSelectFunction",7),this.searchValue="",this.filterValue=[],this.searchCallback=t=>{this.searchValue=t.detail.searchValue,this.functionsList=[...t.detail.rfxFunctions],this.filterValue=[...t.detail.filterValue]},this.handleTriggerPanelChange=t=>{},this.handleTriggerSelectTool=t=>{const e=t.detail;this.triggerSelectFunction.emit(e.toolName)},this.handleOpenCategoryChange=t=>{const e=t.detail;this.openCategories.has(e)?this.openCategories.delete(e):this.openCategories.add(e)},this.functionsList=[],this.mode=void 0,this.openCategories=new Set([0]),this.showToolDescription=void 0,this.scale=a.U.Scale}async connectedCallback(){const{rfxFunctions:t,rfxCategories:e}=await(0,n.a)();this.rfxFunctionsArray=t.map((t=>({analysisEngine:"raster",categoryName:t.category,categoryTitle:t.categoryTitle,description:t.snippet,icon:"raster-function",title:t.title,toolName:t.name,analysisType:"rft"}))),this.rfxFunctionsArray?.length>-1&&(this.rfxCategories=e,this.functionsList=[...this.rfxFunctionsArray])}render(){return(0,r.h)("div",{key:"cfc7705605506e41aa3e1b7a63960b2d3428844b"},(0,r.h)("rfx-search",{key:"81111a72d8987b86769c01332787ce52b9429f39",rfxFunctionsArray:this.rfxFunctionsArray??[],onAnalysisStudioSearchUpdate:this.searchCallback,searchValue:this.searchValue,filterValue:this.filterValue,hideFilter:!0}),(0,r.h)("rfx-functions-list",{key:"4f151abcec23347e81bebecf31a7d1eea37e47bf",rfxFunctionsArray:this.functionsList,categories:this.rfxCategories,searchIsActive:""!==this.searchValue,showFunctionDescription:!1,mode:this.mode,scale:this.scale,onTriggerChangePanel:this.handleTriggerPanelChange,onTriggerSelectTool:this.handleTriggerSelectTool,openCategories:this.openCategories,onOpenCategoriesChange:this.handleOpenCategoryChange}))}},g="analysis--rtl",x=class{constructor(t){(0,r.r)(this,t),this.analysisStudioSearchUpdate=(0,r.c)(this,"analysisStudioSearchUpdate",7),this.filterList=(t,e)=>t.filter((()=>0===e.length)),this.getSearchableFunctionsList=t=>(t??this.rfxFunctionsArray).map((t=>({title:t.title,toolName:t.toolName,keys:t.keys}))),this.getToolsListFromSearchList=t=>t.map((t=>this.rfxFunctionsArray.filter((e=>t.title===e.title&&t.toolName===e.toolName))[0])),this.onAnalysisStudioSearchUpdate=()=>{if(this.calciteFilter.value!==this.searchValue){const t=this.calciteFilter.filteredItems,e=this.filterList(this.getToolsListFromSearchList(t),this.filterValue);this.rfxFunctionItems=[...e],this.analysisStudioSearchUpdate.emit({rfxFunctions:this.rfxFunctionItems,searchValue:this.calciteFilter.value??"",filterValue:this.filterValue})}},this.handleFilterItemSelection=t=>{const e=!1===this.filterValue.includes(t)?[...this.filterValue,t]:this.filterValue.filter((e=>e!==t)),i=""===this.calciteFilter.value?this.rfxFunctionsArray:this.getToolsListFromSearchList(this.calciteFilter.filteredItems);this.rfxFunctionItems=this.filterList(i,e),this.analysisStudioSearchUpdate.emit({rfxFunctions:this.rfxFunctionItems,searchValue:this.searchValue??"",filterValue:e})},this.open=!1,this.rfxFunctionItems=void 0,this.rfxFunctionsArray=void 0,this.searchValue=void 0,this.filterValue=void 0,this.placeholderText=void 0,this.hideFilter=!1}onDataChange(t){this.getSearchableFunctionsList(t)}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,s.b)(this.hostElement,(0,r.g)(".")));this.searchKeys={},this.rfxFunctionsArray.forEach((t=>(t.keys=(t.keys??[]).map((t=>{const e=t.replace("$","");return this.searchKeys?.[e]})),t))),this.rfxFunctionItems=[...this.rfxFunctionsArray]}componentDidLoad(){this.calciteFilter.items=[...this.calciteFilter.items]}render(){return(0,r.h)(r.H,{key:"38eed703ef674d09db21eb48bee057502f39ba8b",class:{[g]:"rtl"===this.dir}},(0,r.h)("calcite-filter",{key:"179bd6736ea8598c73ab9ee7fa297ce5fb1ba77c",placeholder:this.placeholderText??this.strings.defaultSearchPlaceholder,items:this.getSearchableFunctionsList(this.rfxFunctionsArray),onCalciteFilterChange:this.onAnalysisStudioSearchUpdate,value:this.searchValue,ref:t=>{this.calciteFilter=t},dir:this.dir}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}static get watchers(){return{rfxFunctionItems:["onDataChange"]}}};x.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}:host{display:flex;background-color:var(--calcite-color-foreground-1);border-bottom:1px solid var(--calcite-color-border-3)}.action-padding{padding-right:var(--analysis-half-spacing);padding-left:0rem}:host(.analysis--rtl) .action-padding{padding-left:var(--analysis-half-spacing);padding-right:0rem}"},19562:(t,e,i)=>{i.d(e,{C:()=>s,U:()=>r,a:()=>o});const r={Scale:"s",PopoverTimer:60},s={s:"s",m:"m",l:"l"},o={absolute:"absolute",fixed:"fixed"}}}]);