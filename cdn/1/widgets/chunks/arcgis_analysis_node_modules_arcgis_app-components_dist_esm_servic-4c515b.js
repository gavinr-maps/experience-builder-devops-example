/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_servic-4c515b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_servic-4c515b"],{67575:(e,r,t)=>{t.d(r,{a:()=>i,i:()=>n});const i={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service"},n=e=>!!Object.values(i).includes(e)},43539:(e,r,t)=>{t.d(r,{a:()=>f,f:()=>g,s:()=>m});var i=t(94788),n=t(65215),o=t(31670),s=t(46581),a=t(15437);function c(e,r,t){var i,n;return{description:e.description,fieldAliases:null===(i=e.fields)||void 0===i?void 0:i.map((e=>e.alias)),fields:e.fields,geometryType:t?"table":e.geometryType,id:e.id,title:e.name,type:e.type,matched:null===(n=null==r?void 0:r.find((r=>r.id===e.id)))||void 0===n?void 0:n.matched}}function l(e,r){const{config:t}=o.c,i=(0,a.a)(e),n=Object.assign(Object.assign({useProxy:!1,timeout:!1===t.isMultiTenant?6e4:5e3,addSSL:i},r?{}:{addTokenManually:!1}),{usePost:!0,disableIdentityLookup:!0});return(0,s.r)(e,{},n,"post")}function d(e){var r,t;return(null==e?void 0:e.code)||(null===(t=null===(r=null==e?void 0:e.details)||void 0===r?void 0:r.raw)||void 0===t?void 0:t.code)}function u(e){const r=d(e);return[404,500].includes(r)||"Invalid URL"===(null==e?void 0:e.message)}function v(e,r){const t=d(r),i=498===t&&"Invalid Token"===(null==r?void 0:r.message),n=499===t&&("Token Required"===(null==r?void 0:r.message)||"Token required."===(null==r?void 0:r.message));return!e&&(n||403===t||i)&&!!o.c.user}async function f(e,r,t,i){const n={error:{code:"unhandledError"}};try{try{return{result:await l(`${t}/${r}`,i)}}catch(o){return v(i,o)?f(e,r,t,!0):(u(o)&&(n.error.code="serviceNotExist"),n)}}catch(e){return n}}function p(e,r,t,i){var n,o;const s=null==t?void 0:t.tables,a=(null===(n=null==t?void 0:t.layers)||void 0===n?void 0:n.length)>0||s,l=[...((null==t?void 0:t.layers)||[]).map((e=>e.id)),...null===(o=(null==t?void 0:t.tables)||[])||void 0===o?void 0:o.map((e=>e.id))];return(e||[]).filter((({id:e,type:r})=>!a||"Table"===r&&!s||l.includes(e))).map((e=>c(e,r,i)))}function m(e,r){return e.map((e=>{var t;return Object.assign(Object.assign({},e),{matched:null===(t=null==r?void 0:r.find((r=>r.id===e.id)))||void 0===t?void 0:t.matched})}))}async function g({item:e,portal:r,layers:t,isSecure:o,data:s,retry:a}){var d;const f={error:{code:"unhandledError"}};try{if(!s&&!a)try{const t=(0,n.g)(r),o=t?`&token=${t}`:"",a=`${(0,i.g)(r)}content/items/${e.id}/data?f=json${o}`,c=await fetch(a),l=await c.text();if(l&&(s=JSON.parse(l)),(null==s?void 0:s.error)&&403===s.error.code&&"SB_0006"===(null===(d=s.error)||void 0===d?void 0:d.messageCode))return f.error.code="serviceNotExist",f}catch(e){s=null}if("Feature Collection"===e.type&&(null==s?void 0:s.layers))return{result:{sublayers:s.layers.map((({layerDefinition:e},r)=>{var t;return{description:"",fields:e.fields,fieldAliases:null===(t=e.fields)||void 0===t?void 0:t.map((e=>e.alias)),geometryType:e.geometryType,type:e.type,id:r,matched:!1,title:e.name}}))}};try{const{url:r}=e;return async function({serviceInfo:e,item:r,layers:t,isSecure:i,data:n}){var o,s;const{url:a}=r;if(!(null===(o=e.layers)||void 0===o?void 0:o.length)&&!(null===(s=e.tables)||void 0===s?void 0:s.length)&&(null==e?void 0:e.fields))return{result:{sublayers:[c(e,t)],serviceInfo:e}};try{const{layers:r,tables:o}=await l(`${a}/layers`,i);return{result:{sublayers:[...p(r,t,n),...p(o,t,n,!0)].sort(((e,r)=>e.id-r.id)),serviceInfo:e}}}catch(e){return{error:{code:"unhandledError"}}}}({serviceInfo:await l(r,o),item:e,layers:t,isSecure:o,data:s})}catch(i){return v(o,i)?g({item:e,portal:r,layers:t,data:s,isSecure:!0}):(u(i)&&(f.error.code="serviceNotExist"),f)}}catch(e){return f}}},81457:(e,r,t)=>{t.d(r,{a:()=>d,b:()=>l,c:()=>u,d:()=>o,e:()=>n,g:()=>a,r:()=>c,s:()=>s});var i=t(11246);function n(e,r,t,i){!function(e,r,t){t=t||{};let i=null==t?void 0:t.expires;if("number"==typeof i){const e=new Date,r=24*i*60*60*1e3;e.setTime(Date.now()+r),i=t.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(t.expires=i.toUTCString());let n,o=`${e}=${encodeURIComponent(r)}`;for(n in t){o+=`; ${n}`;const e=t[n];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,i?JSON.stringify(r):r,t)}function o(e,r){const t=function(e){const r=document.cookie,t=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),n=r.match(t);return n?decodeURIComponent(n[1]):void 0}(e);return t&&r?JSON.parse(t):t}function s(e,r,t){window.localStorage.setItem(e,t?JSON.stringify(r):r)}function a(e,r){const t=window.localStorage.getItem(e);return t&&r?JSON.parse(t):t}function c(e){window.localStorage.removeItem(e)}function l(e,r,t){window.sessionStorage.setItem(e,t?JSON.stringify(r):r)}function d(e,r){const t=window.sessionStorage.getItem(e);return t&&r?JSON.parse(t):t}function u(e){window.sessionStorage.removeItem(e)}},15437:(e,r,t)=>{t.d(r,{a:()=>p,b:()=>f,c:()=>d,d:()=>g,e:()=>m,f:()=>S,g:()=>y,h:()=>c,i:()=>h,r:()=>l,s:()=>v,u:()=>u});var i=t(94788),n=t(31670),o=t(28926),s=t(81457),a=t(67575);function c(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function l(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function d(e){var r;const t=null!==(r=null===n.c||void 0===n.c?void 0:n.c.api)&&void 0!==r?r:4,[i]=await(0,o.l)([4===t?"esri/core/urlUtils":"esri/urlUtils"]);let s=i.urlToObject(e);s.query=s.query||{};for(let e in s.query||{})s.query.hasOwnProperty(e)&&(Array.isArray(s.query[e])||(s.query[e]=s.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return s}function u(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function v(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function f(e){const{config:r,portal:t}=n.c;let i=!1;if(!e)return!1;if((r.httpsDomains||[]).forEach((r=>{(e.indexOf(`.${r}/`)>-1||e.indexOf(`/${r}/`)>-1)&&(i=!0)})),!i){let r=t.portalHostname;r.indexOf("/")>-1&&(r=r.substring(0,r.indexOf("/"))),e.indexOf(r)>-1&&(i=!0)}return i}function p(e){if(!e)return!1;const{config:r,portal:t}=n.c,o=(0,i.g)(t),s=new URL(o).hostname,a=!1===r.isMultiTenant,c=-1!==e.indexOf(".arcgis.com/"),l=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),d=t.supportsHostedServices&&-1!==e.indexOf(s)&&!a;return c&&l||!c&&d}function m(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const r=(0,s.d)("esri_auth",!0);return"web"!==(null===(e=null==r?void 0:r.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function g(e){let r=e.toLowerCase();-1==r.indexOf("http://")&&-1==r.indexOf("https://")&&(r=(e="https://"+e).toLowerCase());let t=r.indexOf("//");t=r.indexOf("/",t+2),-1==t?r=(e+="/arcgis/rest/services").toLowerCase():t==r.length-1&&(r=(e+="arcgis/rest/services").toLowerCase());let i=r.indexOf("/arcgis",t);i==r.length-7?r=(e+="/rest/services").toLowerCase():i==r.length-8&&(r=(e+="rest/services").toLowerCase()),i=r.indexOf("/server",t),r.endsWith("/server")?r=(e+="/rest/services").toLowerCase():r.endsWith("/server/")&&(r=(e+="rest/services").toLowerCase());const n=r.indexOf("/rest/services",t),o=r.indexOf("/services",t),s=r.indexOf("/rest",t);return-1==n&&o>-1?r=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==n&&s>-1&&(r=(e=`${e.substring(0,s)}/rest/services${e.substring(s+5)}`).toLowerCase()),r.indexOf("/rest/services"),e}const S=(e,r=!1)=>(e=c(e),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!r&&"https:"!==location.protocol||!p(e)&&!f(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),y=(e,r=!1)=>{var t,n,o;if(!e)return{error:{code:"invalidUrl"}};if(h(e,r))return{error:{code:"httpWarning"}};const s=decodeURIComponent(e),c=s.replace(i.v,"").match(/((\.|\/)*(kml|kmz))/gi),l=s.replace(i.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),d=s.replace(i.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),u=s.replace(i.v,"").match(/((\.|\/)*(rss))/gi),v=null===(t=s.replace(i.v,"").match(i.r))||void 0===t?void 0:t[1],f=s.replace(i.v,"").match(i.h),p=s.replace(i.v,"").match(/((\.|\/)*(csv))/gi),m=s.replace(i.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let g=null;if(s.match(i.f))g="GeoJson";else if(!d||l||v)if(v&&!l)g=a.a[v];else if(f)g="Map Service";else if(l){const e="/"===(null==l?void 0:l[0].charAt(0))?"/":"=";g=null===(o=null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else c?g="KML":u?g="GeoRSS":p?g="CSV":m?g="Tile Layer":s.endsWith("KnowledgeGraphServer")&&(g="Knowledge Graph");else g="OGCFeatureServer";return{result:g}},h=(e,r)=>!r&&e.includes("http://")}}]);