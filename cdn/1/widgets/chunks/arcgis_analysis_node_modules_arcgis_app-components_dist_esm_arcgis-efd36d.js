/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-efd36d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-efd36d"],{81635:(e,r,i)=>{i.r(r),i.d(r,{arcgis_privileges_picker:()=>x});var s=i(7263),t=i(62159),a=i(66488),o=i(41168);i(78613),i(58233),i(28926),i(70506),i(99004),i(46581),i(31670),i(11935),i(94788),i(65215);function n(e){return{key:"general-members",heading:e.members,privileges:[{privilege:"portal:user:viewOrgUsers"}]}}function l(e,r){return{key:"general-groups",heading:e.groups,privileges:[{privilege:"portal:user:createGroup"},{privilege:"portal:user:joinGroup"},{privilege:"portal:user:joinNonOrgGroup",hidden:r},{privilege:"portal:user:viewOrgGroups"},{privilege:"portal:user:invitePartneredCollaborationMembers",dependencies:["portal:user:createGroup","portal:user:addExternalMembersToGroup"],hidden:r},{privilege:"portal:user:addExternalMembersToGroup",dependencies:["portal:user:createGroup"],hidden:r}]}}function p(e,r,i,s,t,a,o,n){return{key:"general-content",heading:e.content,privileges:[{privilege:"portal:user:createItem"},{privilege:"portal:publisher:publishFeatures",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishTiles",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishScenes",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:!i.sceneViewerEnabled},{privilege:"portal:publisher:publishTiledImagery",dependencies:["portal:user:createItem"],hidden:r},{privilege:"portal:publisher:publishDynamicImagery",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishServerServices",dependencies:["portal:user:createItem"],removeDependencies:["portal:publisher:bulkPublishFromDataStores","portal:publisher:publishServerGPServices"],hidden:!r},{privilege:"portal:publisher:publishKnowledgeGraph",dependencies:["portal:user:createItem"],hidden:!r||!a},{privilege:"portal:user:viewOrgItems"},{privilege:"premium:publisher:createNotebooks",removeDependencies:["premium:publisher:scheduleNotebooks","premium:publisher:createAdvancedNotebooks"],hidden:!s},{privilege:"premium:publisher:scheduleNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!s},{privilege:"portal:publisher:bulkPublishFromDataStores",dependencies:["portal:user:createItem","portal:publisher:publishServerServices"],hidden:!r||r&&!i.bulkPublishingEnabled},{privilege:"portal:publisher:registerDataStores",dependencies:["portal:user:createItem"],hidden:!r||r&&!i.bulkPublishingEnabled},{privilege:"portal:user:viewTracks",hidden:!i.locationTrackingUIEnabled},{privilege:"portal:user:reassignItems",dependencies:["portal:user:createItem","portal:user:viewOrgUsers"]},{privilege:"portal:user:receiveItems",dependencies:["portal:user:createItem"],hidden:"member"!==n},{privilege:"portal:publisher:publishFeeds",hidden:!t},{privilege:"portal:publisher:publishRealTimeAnalytics",hidden:!t},{privilege:"portal:publisher:publishBigDataAnalytics",hidden:!t},{privilege:"portal:publisher:createDataPipelines",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"portal:publisher:publishLivestreamVideo",dependencies:["portal:user:createItem"],hidden:!r||!o},{privilege:"portal:publisher:publishVideo",dependencies:["portal:user:createItem"],hidden:!r||!o},{privilege:"portal:user:generateApiTokens",dependencies:["portal:user:createItem"],hidden:"member"!==n},{privilege:"portal:user:assignPrivilegesToApps",dependencies:["portal:user:createItem"],hidden:"member"!==n}]}}function d(e,r,i,s){var t,a;return{key:"general-sharing",heading:e.sharing,privileges:[{privilege:"portal:user:shareToGroup"},{privilege:"portal:user:shareToOrg"},{privilege:"portal:user:shareToPublic"},{privilege:"portal:user:shareGroupToOrg"},{privilege:"portal:user:shareGroupToPublic",hidden:!1===i.canSharePublic&&!s},{privilege:"opendata:user:designateGroup",dependencies:["portal:user:shareGroupToPublic"],hidden:r||!0!==(null===(a=null===(t=null==i?void 0:i.portalProperties)||void 0===t?void 0:t.openData)||void 0===a?void 0:a.enabled)}]}}function c(e){return{key:"location-basemaps-section",heading:e.basemaps,readonly:!0,privileges:[{privilege:"premium:user:basemaps",learnMoreLink:"https://developers.arcgis.com/rest/basemap-styles/",readonly:!0}]}}function u(e){return{key:"location-basemaps-section",heading:e.basemaps,privileges:[{privilege:"premium:user:basemaps",learnMoreLink:"https://developers.arcgis.com/rest/basemap-styles/"},{privilege:"premium:user:staticbasemaptiles"}]}}function g(e){return{key:"location-places-section",heading:e.places,privileges:[{privilege:"premium:user:places",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/place-finding/"}]}}function m(e){return{key:"location-geocoding-section",heading:e.geocoding,privileges:[{privilege:"premium:user:geocode",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/"}]}}function v(e){return{key:"location-geocoding-section",heading:e.geocoding,privileges:[{privilege:"premium:user:geocode:temporary",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/geocode-addresses/#storage-parameter"},{privilege:"premium:user:geocode:stored",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/geocode-addresses/#storage-parameter"}]}}function h(e){return{key:"location-routing-section",heading:e.routing,privileges:[{privilege:"premium:user:networkanalysis",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/"}]}}function b(e){return{key:"location-routing-section",heading:e.routing,privileges:[{privilege:"premium:user:networkanalysis:routing",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/route-and-directions/"},{privilege:"premium:user:networkanalysis:optimizedrouting",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/optimized-routing/"},{privilege:"premium:user:networkanalysis:vehiclerouting",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/fleet-routing/"},{privilege:"premium:user:networkanalysis:servicearea",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/service-areas/"},{privilege:"premium:user:networkanalysis:closestfacility",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/closest-facility-routing/"},{privilege:"premium:user:networkanalysis:locationallocation",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/location-allocation/"},{privilege:"premium:user:networkanalysis:origindestinationcostmatrix",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/travel-cost-matrix/"},{privilege:"premium:user:networkanalysis:lastmiledelivery"}]}}function w(e){return{key:"location-data-enrich-section",heading:e.dataEnrichment,privileges:[{privilege:"premium:user:geoenrichment",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/data-enrichment/"}]}}function f(e){return{key:"location-elevation-section",heading:e.elevation,privileges:[{privilege:"premium:user:elevation",learnMoreLink:"https://developers.arcgis.com/rest/elevation/api-reference/get-started-with-elevation-services.htm"}]}}function k(e,r,i){return{key:"general-premium",heading:e.premiumContent,privileges:[{privilege:"premium:publisher:createAdvancedNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!i},{privilege:"premium:user:demographics",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"premium:user:featurereport",dependencies:["portal:user:createItem"],hidden:r}]}}function y(e,r,i,s){return{key:"general-premium",heading:e.premiumContentServices,privileges:[{privilege:"premium:user:geocode",hidden:"member"!==s},{privilege:"premium:user:networkanalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:spatialanalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:geoenrichment",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:demographics",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"premium:publisher:geoanalytics",hidden:!r},{privilege:"premium:publisher:rasteranalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishTiledImagery"]},{privilege:"premium:publisher:createAdvancedNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!i},{privilege:"portal:user:runWebTool",hidden:!i},{privilege:"premium:user:featurereport",dependencies:["portal:user:createItem"],hidden:r},{privilege:"premium:user:networkanalysis:lastmiledelivery"},{privilege:"premium:user:staticbasemaptiles",hidden:"member"===s}]}}function I(e){return{key:"general-features",heading:e.features,privileges:[{privilege:"features:user:edit"},{privilege:"features:user:fullEdit",dependencies:["features:user:edit"]}]}}function U(e,r){return{key:"general-version",heading:e.versionMgmt,hidden:!r,privileges:[{privilege:"features:user:manageVersions",dependencies:["features:user:edit","features:user:fullEdit"],hidden:!r}]}}function G(e,r){return{key:"general-webhooks",heading:e.webhooks,hidden:!r,privileges:[{privilege:"portal:publisher:createFeatureWebhook",dependencies:["portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishServerServices"],hidden:!r}]}}function O(e){return{key:"admin-members",heading:e.members,privileges:[{privilege:"portal:admin:viewUsers",dependencies:["portal:user:viewOrgUsers"]},{privilege:"portal:admin:updateUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:deleteUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:inviteUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:disableUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:changeUserRoles",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:manageLicenses",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:updateMemberCategorySchema",dependencies:["portal:admin:updateUsers"]}]}}function P(e){return{key:"admin-groups",heading:e.groups,privileges:[{privilege:"portal:admin:viewGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:admin:viewUsers"]},{privilege:"portal:admin:updateGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:deleteGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:reassignGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:assignToGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:user:invitePartneredCollaborationMembers","portal:user:addExternalMembersToGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:manageEnterpriseGroups"},{privilege:"portal:admin:createUpdateCapableGroup",dependencies:["portal:user:createGroup"]},{privilege:"portal:admin:createLeavingDisallowedGroup",dependencies:["portal:user:createGroup"]}]}}function S(e){return{key:"admin-content",heading:e.content,privileges:[{privilege:"portal:admin:viewItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:admin:viewUsers"]},{privilege:"portal:admin:updateItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:deleteItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:reassignItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:updateItemCategorySchema",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:updateItems"]},{privilege:"portal:publisher:publishServerGPServices",dependencies:["portal:user:runWebTool"]},{privilege:"portal:admin:shareToOrg",dependencies:["portal:user:viewOrgItems","portal:user:shareToOrg","portal:admin:viewUsers","portal:admin:viewItems","portal:admin:viewGroups"]},{privilege:"portal:admin:shareToPublic",dependencies:["portal:user:viewOrgItems","portal:user:shareToPublic","portal:admin:viewUsers","portal:admin:viewItems","portal:admin:viewGroups"]},{privilege:"portal:admin:createReports",dependencies:["portal:user:createItem","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:viewUsers"]}]}}function T(e){return{key:"admin-marketplace",heading:e.marketplaceSubscriptions,privileges:[{privilege:"marketplace:admin:manage",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"marketplace:admin:purchase",dependencies:["portal:user:createGroup","portal:user:joinGroup","portal:user:shareToGroup","marketplace:admin:startTrial"]},{privilege:"marketplace:admin:startTrial",dependencies:["portal:user:createGroup","portal:user:joinGroup","portal:user:shareToGroup"]}]}}function C(e,r){const i=["portal:user:viewOrgItems","portal:user:viewOrgUsers","portal:admin:viewItems","portal:admin:viewUsers","portal:user:viewOrgGroups","portal:admin:viewGroups"],s=[...i,"portal:admin:updateUsers","portal:admin:changeUserRoles","portal:admin:manageLicenses"];return{key:"admin-settings",heading:e.orgSettings,privileges:[{privilege:"portal:admin:manageSecurity",dependencies:r?s:i},{privilege:"portal:admin:manageWebsite",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:viewOrgItems","portal:user:createItem","portal:user:createGroup","portal:user:shareToGroup","portal:user:shareToOrg","portal:user:shareToPublic","portal:user:shareGroupToOrg","portal:user:shareGroupToPublic","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:updateGroups","portal:admin:updateItems","portal:admin:updateItemCategorySchema","portal:admin:shareToOrg","portal:admin:shareToPublic"]},{privilege:"portal:admin:manageCollaborations",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:viewOrgItems","portal:user:createItem","portal:user:createGroup","portal:publisher:publishFeatures","portal:user:shareToGroup","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:updateGroups","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"]},{privilege:"portal:admin:manageCredits",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers","portal:admin:updateUsers"],hidden:r},{privilege:"portal:admin:manageRoles",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers","portal:admin:changeUserRoles"]},{privilege:"portal:admin:manageServers",dependencies:["portal:user:createItem","portal:user:viewOrgUsers","portal:admin:manageUtilityServices"],hidden:!r},{privilege:"portal:admin:manageUtilityServices",dependencies:["portal:user:viewOrgUsers","portal:user:createItem","portal:publisher:publishFeatures","portal:user:viewOrgItems","portal:user:shareToOrg"]},{privilege:"portal:admin:manageWebhooks",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:viewOrgGroups","portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishServerServices","portal:publisher:publishServerGPServices","portal:publisher:createFeatureWebhook","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:createGPWebhook"],hidden:!r}]}}function E(e,r){return{key:"admin-webhooks",heading:e.webhooks,hidden:!r,privileges:[{privilege:"portal:admin:createGPWebhook",dependencies:["portal:publisher:publishServerGPServices"],hidden:!r}]}}function L(e,r,i,s,t,a,o,c,u,g){return{key:"general-privileges",heading:e.generalPrivileges,sections:[n(e),l(e,i),p(e,i,s,t,a,o,c,g),d(e,i,r,u),..."locationPlatform"!==g?["app"===g?k(e,i,t):y(e,i,t,g)]:[],I(e),U(e,i),G(e,i)]}}function M(e,r,i){return{key:"admin-privileges",heading:e.adminPrivileges,sections:[O(e),P(e),S(e),..."member"===i?[T(e)]:[],C(e,r),E(e,r)]}}function D(e){return{key:"location-services-privileges",heading:e.locationServices,sections:[c(e),m(e),h(e),w(e)]}}function F(e){return{key:"location-services-privileges",heading:e.locationServices,sections:[u(e),g(e),v(e),b(e),w(e),f(e)]}}const x=class{constructor(e){(0,s.r)(this,e),this.arcgisPrivilegesPickerSelectChange=(0,s.c)(this,"arcgisPrivilegesPickerSelectChange",7),this.orgCapabilities=[],this.notebookServerConfigured=!1,this.handleSwitchChange=e=>{const r=e.target,i=this.privilegesRecords[r.value];if(r.checked&&!this.value.includes(r.value)){const e=[r.value],s=this.getAllDependencies(i);null==s||s.forEach((r=>{this.value.includes(r)||e.push(r)})),this.value=[...this.value,...e]}else{const e=this.getAllDependencies(i,!0);this.value=this.value.filter((i=>i!==r.value&&!(null==e?void 0:e.includes(i))))}this.arcgisPrivilegesPickerSelectChange.emit(this.value)},this.handleToggleAll=(e,r,i)=>{const s=[];if(this.configs.forEach((t=>{(t.key===e||i)&&t.sections.forEach((t=>{t.readonly||i&&t.key!==e||t.privileges.forEach((e=>{if(!e.hidden&&!e.readonly&&!s.includes(e.privilege)){s.push(e.privilege);const i=this.getAllDependencies(e,r);null==i||i.forEach((e=>{s.includes(e)||s.push(e)}))}}))}))})),r)this.value=this.value.filter((e=>!s.includes(e)));else{const e=[...this.value];s.forEach((r=>{e.includes(r)||e.push(r)})),this.value=e}this.arcgisPrivilegesPickerSelectChange.emit(this.value)},this.portalConfig=void 0,this.portal=void 0,this.user=void 0,this.limitToUserPrivileges=!1,this.value=[],this.maxContentHeight="",this.mode="member",this.searchTerm=""}async componentWillLoad(){var e;const r=await(0,t.g)(this.el);this.strings=r[0];const{portalConfig:i,user:s,portal:n}=this,l=n.isPortal;let p;if(this.servers=await(0,a.b)(s,n),l||(p=await(0,o.a)(n),this.orgCapabilities=(null==p?void 0:p.orgCapabilities)||[]),l)this.notebookServerConfigured=Boolean(i.notebookServerEnabled&&n.sourceJSON.supportsHostedNotebooks);else{const r=["Trial Developer","Trial","Trial Press","Developer Subscription"],s=(null==p?void 0:p.type)&&-1!==r.indexOf(p.type);this.notebookServerConfigured=Boolean(i.notebookServerEnabled&&(!s||(null===(e=null==n?void 0:n.sourceJSON.allowedBetaFeatures)||void 0===e?void 0:e.includes("notebooks"))))}"app"!==this.mode||this.value.includes("premium:user:basemaps")||(this.value=[...this.value,"premium:user:basemaps"]),this.initConfig()}initConfig(){const e=this.portal.isPortal,r=e?this.checkServerFunction("VelocityServer"):this.orgCapabilities.some((e=>"velocity"===e.id)),i=this.checkServerFunction("KnowledgeServer"),s=this.checkServerFunction("VideoServer"),t=this.value.includes("portal:user:shareGroupToPublic");this.configs=function(e,r,i,s,t,a,o,n,l,p,d,c){var u;let g=[..."locationPlatform"===c?[F(e)]:[],..."app"===c?[D(e)]:[],..."member"===c?[L(e,r,i,s,t,a,o,n,l,c)]:[],..."member"===c?[M(e,i,c)]:[]];return(null===(u=null==p?void 0:p.privileges)||void 0===u?void 0:u.length)&&d&&(g=g.filter((e=>(e.sections.forEach((e=>{e.privileges.forEach((e=>{e.hidden||(e.hidden=!p.privileges.includes(e.privilege))})),e.hidden=e.privileges.every((e=>e.hidden))})),e.sections.some((e=>!e.hidden)))))),g.forEach((e=>{e.total=0,e.sections.forEach((r=>{r.total=0,r.privileges.forEach((i=>{i.hidden||(r.total++,e.total++)}))}))})),g}(this.strings,this.portal,e,this.portalConfig,this.notebookServerConfigured,r,i,s,t,this.user,this.limitToUserPrivileges,this.mode),this.privilegesRecords=this.configs.reduce(((e,r)=>Object.assign(Object.assign({},e),r.sections.reduce(((e,r)=>r.privileges.reduce(((e,r)=>Object.assign(Object.assign({},e),{[r.privilege]:r})),e)),{}))),{})}filterBySearchTerm(){const e=this.searchTerm.trim().toLowerCase();this.configs.forEach((r=>{r.sections.forEach((r=>{this.sectionMatchesTerm(r,e)})),r.found=r.heading.toLowerCase().includes(e)||r.sections.some((e=>e.found))}))}sectionMatchesTerm(e,r){var i;e.privileges&&e.privileges.forEach((e=>{this.privilegesMatchesTerm(e,r)})),e.found=!e.hidden&&(e.heading.toLowerCase().includes(r)||Boolean(null===(i=e.privileges)||void 0===i?void 0:i.some((e=>e.found))))}privilegesMatchesTerm(e,r){var i,s;if(e.privilege){const t=this.getPrivilegeInfo(e.privilege),a=(null===(i=t.label)||void 0===i?void 0:i.toLowerCase())||"",o=(null===(s=t.description)||void 0===s?void 0:s.toLowerCase())||"";e.found=!e.hidden&&(a.includes(r)||o.includes(r)||e.privilege.includes(r))}}checkServerFunction(e){var r;return null===(r=this.servers)||void 0===r?void 0:r.some((r=>{var i;return null===(i=r.serverFunction)||void 0===i?void 0:i.includes(e)}))}getPrivilegeInfo(e){const r=this.strings.privileges[e];let i="";return i="locationPlatform"===this.mode?r.descriptionLocationPlatform||r.descriptionApp||r.description:"app"===this.mode?r.descriptionApp||r.description||r.descriptionLocationPlatform:this.portal.isPortal&&r.descriptionPortal?r.descriptionPortal:r.description,{label:this.portal.isPortal&&r.labelPortal?r.labelPortal:r.label,description:i}}getAllDependencies(e,r,i=[]){const s=r?e.removeDependencies:e.dependencies;return e&&(null==s?void 0:s.length)?(s.forEach((e=>{const s=this.privilegesRecords[e];s&&!s.hidden&&(i.includes(e)||i.push(e),i=this.getAllDependencies(s,r,i))})),i):i}render(){this.configs.forEach((e=>{e.enabled=0,e.sections.forEach((r=>{r.enabled=0,r.privileges.forEach((i=>{!i.hidden&&this.value.includes(i.privilege)&&(r.enabled++,e.enabled++)}))}))})),this.filterBySearchTerm();const e=Boolean(this.searchTerm);return(0,s.h)("div",{key:"dec44986138e0e9b4997cdd34629215c12441eb1"},(0,s.h)("calcite-input",{key:"828d5243ba5cdf7ccac57f7e1dfb727e336d1bf7",type:"search",icon:"search",placeholder:this.strings.searchPrivileges,onCalciteInputInput:e=>{this.searchTerm=e.target.value}}),(0,s.h)("calcite-accordion",{key:"4cf712fd14b99e7881795cedbed1bbf5d2bbcd54",class:"main-wrapper",appearance:"transparent",iconPosition:"start",style:{"max-height":this.maxContentHeight||"auto"}},this.configs.filter((e=>e.found)).map((r=>(0,s.h)("calcite-accordion-item",{key:r.key,heading:r.heading,description:e?"":`${this.strings.enabledLabel} ${r.enabled}/${r.total}`,expanded:!0},!e&&(0,s.h)("calcite-switch",{slot:"actions-end",class:"title-action",checked:r.enabled===r.total,onCalciteSwitchChange:e=>{const i=e.target.checked;this.handleToggleAll(r.key,!i)}}),(0,s.h)("calcite-accordion",{class:"main-section-container",appearance:"transparent",iconPosition:"start"},r.sections.filter((e=>!e.hidden&&e.found)).map((r=>(0,s.h)("calcite-accordion-item",{key:r.key,heading:r.heading,description:e?"":`${this.strings.enabledLabel} ${r.enabled}/${r.total}`,class:"accordion-section-item"},!e&&(0,s.h)("calcite-switch",{slot:"actions-end",class:"section-action",checked:r.enabled===r.total,disabled:r.readonly,onCalciteSwitchChange:e=>{const i=e.target.checked;this.handleToggleAll(r.key,!i,!0)}}),(0,s.h)("div",{class:"privileges-container"},r.privileges.filter((e=>!e.hidden&&e.found)).map((e=>{const r=this.getPrivilegeInfo(e.privilege);return(0,s.h)("calcite-label",{key:e.privilege,class:"privilege-row",layout:"inline-space-between"},(0,s.h)("div",null,(0,s.h)("div",{class:"privilege-title"},r.label),(0,s.h)("div",{class:"privilege-desc"},r.description," ",e.learnMoreLink&&(0,s.h)("calcite-link",{href:e.learnMoreLink,target:"_blank"},this.strings.learnMore))),(0,s.h)("calcite-switch",{value:e.privilege,checked:this.value.includes(e.privilege),onCalciteSwitchChange:this.handleSwitchChange,disabled:e.readonly}))}))))))))))))}get el(){return(0,s.d)(this)}};x.style=".main-wrapper{margin-top:1rem;overflow-y:auto}.main-section-container{margin-top:1rem}.title-action{margin-inline-end:1.5rem}.section-action{margin-inline-end:0.75rem}.accordion-section-item{margin-bottom:1rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-2);background-color:var(--calcite-color-foreground-1)}.enabled-label{margin-inline-end:0.5rem}.privileges-container{padding-top:0.5rem}.privilege-row{margin-inline-start:1.75rem}.privilege-title{margin-bottom:0.25rem;font-weight:500}.privilege-desc{font-size:0.75rem}.sub-section{margin-inline-start:1.75rem;padding-bottom:0.5rem}.sub-section-heading{display:flex;padding-bottom:1rem}.sub-section-title{flex:1 1 0%}::-webkit-scrollbar{width:14px}::-webkit-scrollbar-track{background-color:transparent}::-webkit-scrollbar-thumb{background-color:var(--calcite-color-border-1);border-radius:14px;border:4px solid transparent;background-clip:content-box}::-webkit-scrollbar-thumb:hover{background-color:var(--calcite-color-text-3)}"},66488:(e,r,i)=>{i.d(r,{a:()=>u,b:()=>d,c:()=>n,d:()=>l,e:()=>g,f:()=>a,g:()=>c,h:()=>o,i:()=>m,q:()=>p});var s=i(46581),t=i(94788);function a(e){var r;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(r=e.sourceJSON)||void 0===r?void 0:r.portalDeploymentType))}function o(e){var r,i;return e.isPortal?"modern"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)||function(e){var r;return e.isPortal&&"modernOnly"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)}(e):"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){const r=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=r}(e)}async function n(e){try{return{result:await(0,s.f)((()=>(0,s.r)(`${(0,t.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,s.f)((()=>(0,s.r)(`${(0,t.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function p(e={},r){return(0,s.r)(`${(0,t.g)(r)}/community/groups`,e)}const d=async(e,r)=>{var i;if(!e)return[];const a=`${(0,t.a)(null!==(i=r.restUrl)&&void 0!==i?i:r.portalUrl)}portals/self/servers`,o=await(0,s.f)((()=>(0,s.r)(a)),"selfServers",r.id);return null==o?void 0:o.servers},c=e=>u((0,t.c)(e)),u=e=>{var r;const i=`${(0,t.a)(null!==(r=(0,t.b)(e))&&void 0!==r?r:e)}info`;return(0,s.f)((()=>(0,s.r)(i,{},{addTokenManually:!1})),"portalInfo",i)};async function g(e,r){return!e.isPortal||await m(e,r)}async function m(e,r){if(!r||!e)return!1;if(!e.isPortal)return!0;const{result:i,error:t}=await(0,s.f)((()=>v(e,r)),"isPortalBackedBySDS",e.id);return!t&&i}const v=async(e,r)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await h(r,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},h=async(e,r)=>{var i;return(null!==(i=await d(e,r))&&void 0!==i?i:[]).filter((e=>e.isHosted))[0]}},41168:(e,r,i)=>{i.d(r,{a:()=>a,g:()=>o});var s=i(46581),t=i(94788);const a=async e=>{try{return{result:await(0,s.r)(`${(0,t.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},o=async(e,r)=>await(0,s.f)((()=>a(e)),"subscriptionType",(0,s.b)(r))}}]);