/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f49b1e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f49b1e"],{99004:(e,t,i)=>{i.d(t,{c:()=>a,g:()=>l});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},5298:(e,t,i)=>{i.r(t),i.d(t,{arcgis_field_add_pages_add_field:()=>h});var a=i(7263),l=i(75890),r=i(2915),s=i(79238),n=i(39274),o=i(28926),d=i(94788),c=i(20375),u=i(90079);i(11935),i(31670),i(51325),i(71700),i(49712),i(57399),i(65215),i(50852),i(7652),i(46581),i(2174),i(99907),i(86537),i(66488),i(67575),i(15437),i(73596),i(91253),i(43780),i(59673),i(59296),i(70506),i(99004);function p(e){return`${e}:00`}const f={esriFieldTypeInteger:"intDefaultValueError",esriFieldTypeBigInteger:"bigIntDefaultValueError",esriFieldTypeDouble:"doubleDefaultValueError"},h=class{constructor(e){(0,a.r)(this,e),this.arcgisWorkflowCancel=(0,a.c)(this,"arcgisWorkflowCancel",7),this.arcgisWorkflowComplete=(0,a.c)(this,"arcgisWorkflowComplete",7),this.arcgisWorkflowPrimaryButtonTextChange=(0,a.c)(this,"arcgisWorkflowPrimaryButtonTextChange",7),this.arcgisFieldAddFieldAdded=(0,a.c)(this,"arcgisFieldAddFieldAdded",7),this.arcgisWorkflowToggleNavigationEnabled=(0,a.c)(this,"arcgisWorkflowToggleNavigationEnabled",7),this.arcgisWorkflowCloseButtonEnabled=(0,a.c)(this,"arcgisWorkflowCloseButtonEnabled",7),this.selectedFieldValueType=null,this.showNullableToggle=!1,this.payload=void 0,this.layerAfterFieldAddition=void 0,this.nullValueInput=!0,this.payloadIsValid=!0,this.timeDateInputs=void 0,this.timeDatePickerIsValid=!0,this.fieldErrors={nameFieldError:null,lengthFieldError:null,bigIntDefaultValueError:null,doubleDefaultValueError:null,intDefaultValueError:null,timeDefaultValueFieldError:null,dateDefaultValueFieldError:null,timezoneDefaultValueFieldError:null},this.nameFieldErrorTest=null,this.dateTimeDefaultValueIsValid=!0,this.dateTimeDefaultValueIsActive=!1,this.error=void 0,this.addInProgress=!1}async navigateToNextPage(){const{i18n:e}=l.a;if(!this.validatePayload())return this.payloadIsValid=!1,void(this.error={title:e.addFieldErrors.invalidFieldParameters,message:e.addFieldErrors.invalidInputsError});this.payload.type=l.a.selectedFieldType;const t={fields:[this.payload]},i=JSON.stringify(t);this.addInProgress=!0,this.disableModalButtons(!0),this.handleAddField(i)}async componentWillLoad(){const{i18n:e,layer:t,selectedFieldType:i}=l.a;this.arcgisWorkflowPrimaryButtonTextChange.emit(e.addField),this.layerInfoToUpdate={},await this.loadAllModules();const a=await t.queryFeatureCount();switch(this.showNullableToggle=0===a,this.payload={name:"",type:"",alias:"",nullable:!0,editable:!0},this.timeDateInputs={date:"",time:""},i){case"esriFieldTypeGlobalID":this.payload.name="GlobalID",this.payload.alias="GlobalID",this.payload.nullable=!1,this.payload.editable=!1,this.payload.defaultValue="NEWID() WITH VALUES";break;case"esriFieldTypeString":this.payload.length=256;break;case"esriFieldTypeTimestampOffset":this.timeDateInputs.timezone="";break;case"esriFieldTypeGUID":this.selectedFieldValueType="uniqueIdentifier"}this.handlePickerConditions()}componentDidLoad(){const{i18n:e,selectedFieldType:t}=l.a;if("esriFieldTypeBigInteger"===t){document.querySelector("#esriFieldTypeBigInteger-block").shadowRoot.querySelector(".description").innerHTML=(0,c.i)(e.numbers.types.esriFieldTypeBigInteger.description)}"esriFieldTypeTimestampOffset"===l.a.selectedFieldType&&(this.timeZoneEl.shadowRoot.childNodes[0].maxItems=8)}render(){const{showNullableToggle:e,error:t,fieldErrors:i,addInProgress:r}=this,{selectedFieldType:n,selectedFieldTypeCategory:o,i18n:d}=l.a,{nameFieldError:c}=i,u="esriFieldTypeTimeOnly"===n||"esriFieldTypeDateOnly"===n||"esriFieldTypeTimestampOffset"===n||"esriFieldTypeBigInteger"===n,p=d[o].types[n].title,f=d[o].types[n].description;return(0,a.h)(a.H,{key:"32e7f4ccc064413921951948d8a9e93c3763fdcb",class:{"overflow-hidden":r}},this.renderAddLoader(),(0,a.h)("div",{key:"1d1c3f143bf9c1d8495c87b01ffd0826e00f65e8",class:"field-block"},(0,a.h)("calcite-block",{key:"2acd875bece5eedd83766d6cd86b0853f393e918",id:`${n}-block`,class:"field-type-block",heading:p,description:f},(0,a.h)("calcite-icon",{key:"20ca428a543efe0b4b5af605e1b9389061693f89",scale:"s",slot:"icon",icon:s.f[n]})),u&&(0,a.h)("calcite-notice",{key:"1c0e95c4dc0964c2c9ee4914126fca3fe7e9ecb5",open:!0,class:"new-field-type-notice",icon:"information",scale:"s"},(0,a.h)("div",{key:"3af21f3f6ff8cc46f4c1ba34fc29384b353ea6f2",slot:"title"},d.newFieldTypeNotice))),"esriFieldTypeGlobalID"!==n?(0,a.h)("div",{class:"main-input-fields-container"},(0,a.h)("calcite-label",{class:"field-section"},d.fieldName,(0,a.h)("calcite-input",{status:null==c?void 0:c.status,required:!0,onCalciteInputInput:e=>{const t=e.target.value;this.handlePayloadInput(t,"name")}}),c&&(0,a.h)("calcite-input-message",{icon:null==c?void 0:c.icon,status:null==c?void 0:c.status},null==c?void 0:c.message)),(0,a.h)("calcite-label",{class:"field-section"},d.displayName,(0,a.h)("calcite-input",{onCalciteInputInput:e=>{const t=e.target.value;this.handlePayloadInput(t,"alias")}})),"esriFieldTypeString"===n&&(0,a.h)("calcite-label",{class:"field-section"},d.length,this.renderLengthField()),"esriFieldTypeGUID"!==n&&(0,a.h)("calcite-label",{class:"field-section"},d.defaultValue,this.fieldsToShow.enableNormalPicker?"esriFieldTypeString"===n?this.renderTextDefaultValue():this.renderNumberDefaultValue():(0,a.h)("div",{class:"time-date-pickers"},this.fieldsToShow.enableDatePicker&&this.renderDatePicker(),this.fieldsToShow.enableTimePicker&&this.renderTimePicker(),this.fieldsToShow.enableTimezonePicker&&this.renderTimezonePicker())),(0,a.h)("calcite-label",{class:"field-section"},d.fieldValueType,(0,a.h)("calcite-combobox",{maxItems:7,label:d.fieldValueType,selectionMode:"single-persist",onCalciteComboboxChange:e=>{const t=e.target.value;this.selectedFieldValueType=t}},Object.keys(d.fieldValueTypes).filter((e=>"none"!==e)).map((e=>(0,a.h)("calcite-combobox-item",{value:e,textLabel:d.fieldValueTypes[e],selected:"esriFieldTypeGUID"===n&&"uniqueIdentifier"===e}))))),e&&this.renderNullableToggle()):(0,a.h)("calcite-notice",{open:!0,class:"global-id-notice",icon:"information",scale:"s"},(0,a.h)("div",{slot:"title"},d.addGlobalIDNotice)),(0,a.h)("arcgis-new-item-alert",{key:"d3aff8dab30a82390f18fecb837e63db455d4211",heading:null==t?void 0:t.title,description:null==t?void 0:t.message,active:!!t,onAlertDismiss:()=>this.error=null}))}renderAddLoader(){const{addInProgress:e}=this,{i18n:t}=l.a;return(0,a.h)("div",{class:"loader-container "+(e?"active":"")},(0,a.h)("calcite-loader",{class:"loader",label:t.addingField,hidden:!e}),(0,a.h)("div",{class:"loader-text"},t.addingField))}renderNullableToggle(){const{i18n:e}=l.a;return(0,a.h)("calcite-label",{layout:"inline",class:"field-section"},(0,a.h)("calcite-switch",{id:"toggleNullValues",checked:this.nullValueInput,onCalciteSwitchChange:e=>{this.nullValueInput=e.target.checked,this.handlePayloadInput(this.nullValueInput,"nullable")}}),e.allowNullValues)}renderTextDefaultValue(){return(0,a.h)("calcite-input",{type:"text",onCalciteInputInput:e=>{const t=e.target.value;this.handlePayloadInput(t,"defaultValue")}})}renderNumberDefaultValue(){const{selectedFieldType:e}=l.a,{max:t,min:i}=function(e){let t,i;switch(e){case"esriFieldTypeBigInteger":t=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;break;case"esriFieldTypeDouble":default:t=r.b,i=r.c;break;case"esriFieldTypeInteger":t=r.M,i=r.a}return{max:t,min:i}}(e),s="esriFieldTypeDouble"===e,n=this.fieldErrors[f[e]];let o;const d=()=>{this.handlePayloadInput(o,"defaultValue"),this.inputNumberNode.value=this.payload.defaultValue};return(0,a.h)("calcite-input-number",{ref:e=>this.inputNumberNode=e,max:t,min:i,integer:!s,step:s?.01:1,status:n?"invalid":"idle","validation-icon":n?"exclamation-mark-triangle":null,"validation-message":n,onCalciteInputNumberInput:e=>{o=e.target.value,s||this.handlePayloadInput(o,"defaultValue")},onBlur:()=>{s&&d()}})}renderLengthField(){const{lengthFieldError:e}=this.fieldErrors;return(0,a.h)("calcite-input-number",{integer:!0,min:r.f,max:r.g,value:`${this.payload.length}`,required:!0,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputNumberInput:e=>{const t=e.target.value;this.handlePayloadInput(t,"length")}})}renderDatePicker(){const{dateDefaultValueFieldError:e}=this.fieldErrors;return(0,a.h)("calcite-input-date-picker",{overlayPositioning:"fixed",class:"time-date-picker "+(e?"error-active":""),required:!!e,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputDatePickerChange:e=>{const t=e.target.value,i=Array.isArray(t)?t[0]:t;this.handleTimeDatePickerInputs(i,"date")}})}renderTimePicker(){const{timeDefaultValueFieldError:e}=this.fieldErrors;return(0,a.h)("calcite-input-time-picker",{class:"time-date-picker "+(e?"error-active":""),required:!!e,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputTimePickerChange:e=>{const t=e.target.value;this.handleTimeDatePickerInputs(t,"time")}})}renderTimezonePicker(){const{timezoneDefaultValueFieldError:e}=this.fieldErrors;return(0,a.h)("calcite-input-time-zone",{clearable:!0,value:this.timeDateInputs.timezone||null,id:"timezonePickerInput",ref:e=>this.timeZoneEl=e,class:"time-date-picker "+(e?"error-active":""),status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputTimeZoneChange:e=>{const t=e.target.value;this.handleTimeDatePickerInputs(t,"timezone")}})}async loadAllModules(){const[e,t,i]=await(0,o.l)(["esri/request","esri/layers/support/FeatureTemplate","esri/Graphic"]);this.modules={request:e,FeatureTemplate:t,Graphic:i}}async handleAddField(e){var t;const{layer:i,i18n:a}=l.a,{request:r}=this.modules;try{const a={layer:i},s=`${i.url}/${i.layerId}`;await(0,n.w)(e,s,!1);const o=`${i.url}/${i.layerId}`;await r(o,{query:{f:"json",token:i.portalItem.portal.credential.token},method:"post",responseType:"json"}).then((async e=>{a.serviceInfo=e.data,this.layerAfterFieldAddition=e.data}),(()=>this.handleError()));const d=a.serviceInfo.fields.filter((e=>e.name.toLowerCase()===this.payload.name.toLowerCase()&&(e.name!==this.payload.name&&(this.payload.name=e.name,a.name=e.name),!0)))[0];this.newFieldName=d.name;const c=function(e,t,i){let a={};switch(t.type){case"esriFieldTypeInteger":a.places=0,a.digitSeparator=!0;break;case"esriFieldTypeDouble":a.places=2,a.digitSeparator=!0;break;case i>=10:a.dateFormat="short-date-long-time"}const l={fieldName:t.name,label:t.alias,isEditable:t.editable,tooltip:"",visible:!0,format:a,stringFieldOption:"text-box"};e&&e.fieldInfos&&(e.fieldInfos.some((e=>e.fieldName===l.fieldName))||e.fieldInfos.push(l));return e}(i.popupTemplate,d,i.version);this.layerInfoToUpdate.popupInfo=c,a.popupInfo=c,this.updateTypesAndTemplatesOnLayer(),(null===(t=a.serviceInfo.templates)||void 0===t?void 0:t.length)?a.serviceInfo.templates.forEach((e=>{"esriFieldTypeGlobalID"!==l.a.selectedFieldType&&(e.prototype.attributes[d.name]=d.defaultValue||null)})):a.serviceInfo.types.forEach((e=>{e.templates.forEach((e=>{"esriFieldTypeGlobalID"!==l.a.selectedFieldType&&(e.prototype.attributes[d.name]=d.defaultValue||null)}))})),this.updateFeatureService(a,this.modules.request)}catch(e){console.error(e),this.addInProgress=!1,this.disableModalButtons(!1),this.error={title:a.addFieldErrors.genericAddFieldError.title,message:a.addFieldErrors.genericAddFieldError.description}}}updateTypesAndTemplatesOnLayer(){var e;const{layerAfterFieldAddition:t}=this,i=t;if(null===(e=i.templates)||void 0===e?void 0:e.length){const e=this.updateTemplatesList(i.templates);i.templates=e}else if(i.types){const e=i.types;i.types=[],e.forEach((e=>{e.templates=this.updateTemplatesList(e.templates),this.addType(i,e)}))}}updateTemplatesList(e){const{i18n:t}=l.a,{layerAfterFieldAddition:i}=this,{modules:a}=this,r=[];return(null!=e?e:[]).forEach((e=>{var l;const s=new a.FeatureTemplate;s.description=null!==(l=e.description)&&void 0!==l?l:"",s.name=e.name||t.newFeature,s.drawingTool=e.drawingTool||"point";const n={};i.fields.forEach((t=>{let i=!1;for(const a in e.prototype.attributes)if(a===t.name){i=!0,n[t.name]=e.prototype.attributes[t.name];break}!i&&t.editable&&(n[t.name]=t.defaultValue||null)}));const o=new a.Graphic({attributes:n});s.prototype=o,r.push(s)})),r}addType(e,t){if(e.types){e.types.some((e=>e.id===t.id))||e.types.push(t)}else e.types=[t]}async updateFeatureService(e,t){const{i18n:i,layer:a}=l.a,{payload:r}=this,s=a.portalItem;let n=e.serviceInfo.templates;if(!n.length){const e={name:i.newFeature,description:"",drawingTool:"esriFeatureEditToolPoint",prototype:{attributes:{}}};this.layerAfterFieldAddition.fields.forEach((t=>{"esriFieldTypeGlobalID"!==l.a.selectedFieldType&&(e.prototype.attributes[t.name]=t.defaultValue||null)})),n=[e]}const o={templates:n,types:e.serviceInfo.types};let c=JSON.stringify(o);if(this.selectedFieldValueType){r.description={value:"",fieldValueType:this.selectedFieldValueType},r.domain=null,o.fields=[r];c=function(e,t,i){const a=e.indexOf(t),l=e.indexOf(i),r=e.slice(a,l).replace(/"/g,'\\"');return`${e.slice(0,a)}"${r}"${e.slice(l)}`}(JSON.stringify(o),'{"value"',',"domain"')}const p=`${a.url.replace("/rest/services","/rest/admin/services")}/${a.layerId}/updateDefinition`,f={f:"json",updateDefinition:c};await t(p,{query:Object.assign(Object.assign({},f),{f:"json",token:s.portal.credential.token}),method:"post",responseType:"json"}).then((async i=>{var l;if(null===(l=i.data)||void 0===l?void 0:l.success){const i=e.serviceInfo;if(i){const e=i.fields;e.forEach(((t,i)=>e[i].type=u.e[e[i].type])),this.layerInfoToUpdate.fields=e}const l=`${(0,d.g)(s.portal)}content/items/${s.id}/data`;await t(l,{query:{f:"json"},method:"get",responseType:"json",token:s.portal.credential.token}).then((async i=>{const l=i.data;if((null==l?void 0:l.layers)||(null==l?void 0:l.tables)){const i=a.isTable,r=i?l.tables:l.layers,n=r.find((e=>e.id===a.layerId));if(null==n?void 0:n.popupInfo){n.popupInfo.fieldInfos=[...e.popupInfo.fieldInfos];const a=`${(0,d.g)(s.portal)}content/users/${s.owner}/items/${s.id}/update`,l=i?{tables:r}:{layers:r},o={f:"json",text:JSON.stringify(l)};await t(a,{query:Object.assign(Object.assign({f:"json"},o),{token:s.portal.credential.token}),method:"post",responseType:"json"}).then((e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.success)?this.handleSuccess():this.handleError()}),(()=>this.handleError()))}else this.handleSuccess()}else 200!==i.httpStatus||i.data&&"{}"!==JSON.stringify(i.data)?this.handleError():this.handleSuccess()}),(()=>this.handleError()))}}),(()=>this.handleError()))}validatePayload(){var e;return"esriFieldTypeGlobalID"!==l.a.selectedFieldType&&this.checkFieldErrors(),this.dateTimeDefaultValueIsValid&&(!this.fieldErrors.nameFieldError||"invalid"!==(null===(e=this.fieldErrors.nameFieldError)||void 0===e?void 0:e.status))&&!this.fieldErrors.lengthFieldError&&!this.fieldErrors.bigIntDefaultValueError&&!this.fieldErrors.doubleDefaultValueError&&!this.fieldErrors.intDefaultValueError}checkFieldErrors(){const{payload:e,fieldErrors:t}=this,{layer:i,selectedFieldType:a,i18n:s}=l.a,n=Object.assign({},t);switch(n.nameFieldError=function(e,t){const{addFieldErrors:i}=l.a.i18n,a={icon:"exclamation-mark-triangle",status:"invalid",message:null},s=e.toUpperCase(),n=r.s.includes(s),o=/[\`\~\@\#\$\%\^\&\*\(\)\\\-\+\=\|\,<>\?\/\{\}\.\!\'\[\]\:\;\n\r\s\"]/.test(e)||/[\`\~\@\#\$\%\^\&\*\(\)\\\-\+\=\|\,<>\?\/\{\}\.\!\'\[\]\:\;\n\r\d\_\"]/.test(e.charAt(0)),d=t.some((t=>t.name.toLowerCase()===e.toLowerCase())),c=e.length>r.d,u=+e[0],p=e.length>r.e;switch(!0){case!e.length:a.message=i.valueIsRequiredError;break;case!!u:case o:a.message=i.invalidNameInputInvalidCharactersError;break;case n:a.message=i.invalidNameInputSQLError;break;case d:a.message=i.existingFieldNameError;break;case c:a.message=i.lengthExceeds;break;case p:a.icon="information",a.status="idle",a.message=l.a.i18n.fieldNameCharacterNotice}return a.message?a:null}(e.name,i.fields),!0){case"esriFieldTypeString"===a:n.lengthFieldError=function(e){const{addFieldErrors:t}=l.a.i18n,i=e<r.f,a=e>r.g;return i||a?t.outOfRangeValueError:null}(e.length);break;case"esriFieldTypeInteger"===a:case"esriFieldTypeDouble"===a:case"esriFieldTypeBigInteger"===a:n[f[a]]=function(e,t){const{addFieldErrors:i}=l.a.i18n;switch(e){case"esriFieldTypeBigInteger":if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)return i.outOfRangeValueError;break;case"esriFieldTypeDouble":if(t>r.b||t<r.c)return i.outOfRangeValueError;break;case"esriFieldTypeInteger":if(t>r.M||t<r.a)return i.outOfRangeValueError}return null}(a,e.defaultValue);break;case("esriFieldTypeDate"===a||"esriFieldTypeTimestampOffset"===a)&&!this.dateTimeDefaultValueIsValid:n.timeDefaultValueFieldError=this.timeDateInputs.time.length?null:s.addFieldErrors.valueIsRequiredError,n.dateDefaultValueFieldError=this.timeDateInputs.date.length?null:s.addFieldErrors.valueIsRequiredError,"esriFieldTypeTimestampOffset"===a&&(n.timezoneDefaultValueFieldError=this.timeDateInputs.timezone.length?null:s.addFieldErrors.valueIsRequiredError)}this.fieldErrors=Object.assign({},n)}handlePayloadInput(e,t){const{selectedFieldType:i}=l.a;let a=e;if("defaultValue"===t)switch(i){case"esriFieldTypeTimeOnly":a=p(e);break;case"esriFieldTypeDouble":a=function(e){let t=e;if(null==e?void 0:e.includes(".")){const i=e.split(".");if(null==i?void 0:i.length){const e=i[1].length,a=Number(i[0]);a!==r.b&&a!==r.c||(t=Math.round(Number(t))),e>3&&(t=Number(t).toFixed(3))}}return`${t}`}(e)}this.payload[t]=a,this.checkFieldErrors()}checkIfTimeDatePickerValid(){const e=Object.values(this.timeDateInputs).every((e=>!!e)),t=Object.values(this.timeDateInputs).every((e=>!e));return this.dateTimeDefaultValueIsValid=e||t,this.dateTimeDefaultValueIsValid}handleTimeDatePickerInputs(e,t){const{selectedFieldType:i}=l.a;switch(i){case"esriFieldTypeDate":this.timeDateInputs[t]=e,this.timeDateInputs.date&&this.timeDateInputs.time&&this.handlePayloadInput(function(e,t){const i=p(e);return Date.parse(`${t} ${i}`)}(this.timeDateInputs.time,this.timeDateInputs.date),"defaultValue");break;case"esriFieldTypeTimestampOffset":this.timeDateInputs[t]=e,this.timeDateInputs.date&&this.timeDateInputs.time&&this.timeDateInputs.timezone&&this.handlePayloadInput(function(e,t,i){const a=Math.floor(Number(i)/60),l=a<0?-1*a:a,r=Number(i)%60;return`${e}T${t}:00${a<0?"-":"+"}${String(l).padStart(2,"0")}:${r>0?r:"00"}`}(this.timeDateInputs.date,this.timeDateInputs.time,this.timeDateInputs.timezone),"defaultValue");break;case"esriFieldTypeTimeOnly":case"esriFieldTypeDateOnly":this.handlePayloadInput(e,"defaultValue")}this.dateTimeDefaultValueIsActive=Object.values(this.timeDateInputs).some((e=>e.length>0)),this.checkIfTimeDatePickerValid()}handlePickerConditions(){const{selectedFieldType:e}=l.a,t="esriFieldTypeDate"===e||"esriFieldTypeTimestampOffset"===e,i=t||"esriFieldTypeTimeOnly"===e,a=t||"esriFieldTypeDateOnly"===e,r="esriFieldTypeTimestampOffset"===e,s=!i&&!a&&!r;this.fieldsToShow={enableNormalPicker:s,enableTimePicker:i,enableDatePicker:a,enableTimezonePicker:r}}disableModalButtons(e){this.arcgisWorkflowToggleNavigationEnabled.emit(!e),this.arcgisWorkflowCloseButtonEnabled.emit(!e)}handleSuccess(){this.displaySuccessAlert(),this.arcgisFieldAddFieldAdded.emit(this.newFieldName),(0,l.d)(),this.arcgisWorkflowComplete.emit("success")}displaySuccessAlert(){const{i18n:e}=l.a,t=document.createElement("calcite-alert");t.kind="success",t.icon="check-circle",t.autoClose=!0;const i=document.createElement("div");i.slot="message",i.innerHTML=e.fieldAdded,t.append(i),t.open=!0,document.body.append(t)}displayErrorAlert(){var e;const{i18n:t}=l.a;this.errorAlertNode&&(null===(e=this.errorAlertNode.parentElement)||void 0===e||e.removeChild(this.errorAlertNode),this.errorAlertNode=null);const i=this.errorAlertNode=document.createElement("calcite-alert");i.kind="danger",i.icon="exclamation-mark-triangle";const a=document.createElement("div");a.slot="message",a.innerHTML=t.fieldAdditionUnsuccessful,i.append(a),i.open=!0,document.body.append(i),setTimeout((()=>i.setFocus()),1e3)}handleError(){this.arcgisWorkflowCancel.emit(),this.displayErrorAlert()}get el(){return(0,a.d)(this)}};h.style=".field-type-block.sc-arcgis-field-add-pages-add-field{margin-bottom:1.25rem}.time-date-pickers.sc-arcgis-field-add-pages-add-field{display:flex;flex-direction:column;gap:0.75rem}.new-field-type-notice.sc-arcgis-field-add-pages-add-field{padding-bottom:1rem;color:var(--calcite-color-text-1)}.field-section.sc-arcgis-field-add-pages-add-field{margin-bottom:0.75rem}.global-id-notice.sc-arcgis-field-add-pages-add-field{color:var(--calcite-color-text-1)}.error-active.sc-arcgis-field-add-pages-add-field{margin-bottom:0.5rem}.loader-container.sc-arcgis-field-add-pages-add-field{position:absolute;top:0px;right:0px;z-index:40;display:none;height:100%;width:100%;overflow:hidden;padding:0px;background:rgba(255, 255, 255, 0.95)}.active.sc-arcgis-field-add-pages-add-field{display:flex;flex-direction:column;place-content:center;align-items:center;justify-items:center}.loader.sc-arcgis-field-add-pages-add-field{padding:0px}.loader-text.sc-arcgis-field-add-pages-add-field{text-align:center;font-size:1rem;font-weight:500;margin-right:6.25rem;margin-left:6.25rem}.character-notice-icon.sc-arcgis-field-add-pages-add-field{--calcite-ui-icon-color:var(--calcite-color-brand)}calcite-block.sc-arcgis-field-add-pages-add-field{border-width:2px;border-style:solid;border-color:var(--calcite-color-border-3)}"},70506:(e,t,i)=>{i.d(t,{e:()=>r});var a,l=i(99004),r={exports:{}};a=r.exports,l.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",a="next";function l(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function r(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function s(e){void 0===e&&(e=i);var t=r(e),s=l(e);if(s!==a&&3===s.major){var n=s.minor<=10?"js/":"";return"".concat(t).concat(n,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function n(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function o(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}function d(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function c(e){return!e||l(e)?s(e):e}function u(e,t){var i=c(e),a=d(i);return a||o(a=n(i),t),a}var p={};function f(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,i){var a;i&&(a=E(e,i));var l=function(){t(e),e.removeEventListener("load",l,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",l,!1)}function E(e,t){var i=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}function T(e){void 0===e&&(e={}),p=e}function m(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window.require;return e&&e.on}function I(e){void 0===e&&(e={});var i={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var a=i.version,l=i.url||r(a);return new t.Promise((function(e,t){var r=m();if(r){var s=r.getAttribute("src");s!==l?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):y()?e(r):h(r,e,t)}else if(y())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var n=i.css;n&&u(!0===n?a:n,i.insertCssBefore),h(r=f(l),(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),t),document.body.appendChild(r)}}))}function g(e){return new t.Promise((function(t,i){var a=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.remove(),t(e)}))}))}function N(e,t){if(void 0===t&&(t={}),y())return g(e);var i=m(),a=i&&i.getAttribute("src");return!t.url&&a&&(t.url=a),I(t).then((function(){return g(e)}))}e.utils=t,e.loadModules=N,e.getScript=m,e.isLoaded=y,e.loadScript=I,e.setDefaultOptions=T,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(a)},28926:(e,t,i)=>{i.d(t,{l:()=>l});var a=i(70506);const l=async(e,t)=>(await a.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},75890:(e,t,i)=>{i.d(t,{a:()=>l,d:()=>r});const a=(0,i(11935).c)({itemData:null,layer:null,selectedFieldType:null,selectedFieldTypeCategory:null,i18n:null}),l=a.state,r=a.dispose},20375:(e,t,i)=>{function a(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function l(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function r(e,t){return e.replace(/\$\{startLink\}/g,`<calcite-link href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function s(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}i.d(t,{a:()=>r,g:()=>a,i:()=>l,r:()=>s})},79238:(e,t,i)=>{i.d(t,{a:()=>a,e:()=>l,f:()=>r});const a={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},l={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},r={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},2915:(e,t,i)=>{i.d(t,{M:()=>o,a:()=>n,b:()=>c,c:()=>d,d:()=>a,e:()=>l,f:()=>s,g:()=>r,h:()=>u,i:()=>p,s:()=>f});const a=128,l=31,r=2147483647,s=1,n=-2147483648,o=2147483647,d=-9e15,c=9e15,u=["text","numbers","dates","globalIdentifiers"],p=["esriFieldTypeString","esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeBigInteger","esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeGlobalID","esriFieldTypeGUID"],f=["ABSOLUTE","ACCESS","ACTION","ADD","ALL","ALLOCATE","ALPHANUMERIC","ALTER","AND","ANY","ARE","AS","ASC","ASSERTION","AT","AUTHORIZATION","AUTOINCREMENT","AVG","BEGIN","BETWEEN","BINARY","BIT","BIT_LENGTH","BOOLEAN","BOTH","BY","BYTE","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHAR_LENGTH","CHARACTER","CHARACTER_LENGTH","CHECK","CLOSE","COALESCE","COLLATE","COLLATION","COLUMN","COMMENT","COMMIT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTINUE","CONVERT","CORRESPONDING","COUNT","COUNTER","CREATE","CROSS","CURRENCY","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DATETIME","DAY","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DESCRIBE","DESCRIPTOR","DIAGNOSTICS","DISCONNECT","DISALLOW","DISTINCT","DISTINCTROW","DOMAIN","DOUBLE","DROP","EQV","ELSE","END","END-EXEC","ESCAPE","EXCEPT","EXCEPTION","EXEC","EXECUTE","EXISTS","EXTERNAL","EXTRACT","FALSE","FETCH","FIRST","FLOAT","FLOAT4","FLOAT8","FOR","FOREIGN","FOUND","FROM","FULL","GENERAL","GET","GLOBAL","GO","GOTO","GRANT","GROUP","GUID","HAVING","HOUR","IDENTITY","IEEEDOUBLE","IEEESINGLE","IGNORE","IMMEDIATE","IMAGE","IN","IMP","INDEX","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGER4","INTEGER1","INTEGER2","INTERSECT","INTERVAL","INTO","IS","ISOLATION","JOIN","KEY","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LOCAL","LOCK","LOGICAL","LOGICAL1","LONG","LONGBINARY","LONGTEXT","LOWER","MATCH","MAX","MEMO","MIN","MINUTE","MODULE","MONTH","MOD","MONEY","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOT","NULL","NULLIF","NUMBER","NUMERIC","OCTET_LENGTH","OF","OFF","OLEOBJECT","ON","ONLY","OPEN","OPTION","OR","ORDER","OUTER","OUTPUT","OWNERACCESS","OVERLAPS","PAD","PARTIAL","PARAMETERS","PERCENT","PIVOT","POSITION","PRECISION","PREPARE","PRESERVE","PRIMARY","PRIOR","PRIVILEGES","PROCEDURE","PUBLIC","READ","REAL","REFERENCES","RELATIVE","RESTRICT","REVOKE","RIGHT","ROLLBACK","ROWID","ROWS","SCHEMA","SCROLL","SECOND","SECTION","SELECT","SESSION","SESSION_USER","SET","SHORT","SINGLE","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCODE","SQLERROR","SQLSTATE","STDEV","STDEVP","STRING","SUBTYPE","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLEID","TEMPORARY","TEXT","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRANSACTION","TRANSFORM","TRANSLATE","TRANSLATION","TRIM","TRUE","TYPE","UNION","UNIQUE","UNKNOWN","UPDATE","UPPER","USAGE","USER","USING","VALUE","VALUES","VAR","VARCHAR","VARBINARY","VARP","VARYING","VIEW","WHEN","WHENEVER","WHERE","WITH","WORK","WRITE","XOR","YEAR","YESNO","ZONE"]}}]);