/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_privil-57e782.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_privil-57e782"],{2174:(e,r,n)=>{n.d(r,{a:()=>l,b:()=>u,c:()=>d,d:()=>c,e:()=>v,f:()=>f,g:()=>q,h:()=>g,i:()=>s,j:()=>w,k:()=>$,l:()=>y,m:()=>O,n:()=>b,o:()=>p,p:()=>h,q:()=>m,u:()=>a});var i=n(28926),o=n(94788);function t(e){var r;return!!(null===(r=e.owner)||void 0===r?void 0:r.toLowerCase().includes("esri"))}function u(e){var r;return t(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Credits"))}function l(e){var r;return t(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Subscription"))}function s(e,r){return e.owner===r.username}function a(e,r){return s(e,r)||function(e,r){var n;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,o="admin"===e.itemControl,t=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!s(e,r)&&o&&i.includes("esri_")&&!t.includes(i))return!1;return o}(e,r)}const d=(e,r)=>!!r.orgId&&e.every((e=>e.isOrgItem)),c=(e,r)=>`${(0,o.a)(r)}item.html?id=${e}`,v=(e,r)=>`${(0,o.g)(r)}/content/users/${e}`,m=e=>e.reduce(((e,r)=>(e[r.owner]=e[r.owner]?[...e[r.owner],r.id]:[r.id],e)),{});function p(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Spatiotemporal")}function f(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("View Service")}function g(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Hosted Service")}function y(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Multi Services View")}function h(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function w(e){var r;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const t=n.portal,[u]=await(0,i.l)(["esri/request"]);if(null==t?void 0:t.user){return u(`${(0,o.g)(t)}community/users/${t.user.username}`,{query:{f:"json",token:null===(r=n.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,n;const i=null!==(n=null===(r=e.data)||void 0===r?void 0:r.groups)&&void 0!==n?n:[];return Promise.resolve(i)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function $(e){var r;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const t=n.portal,[u]=await(0,i.l)(["esri/request"]);return u(`${(0,o.g)(t)}content/items/${n.id}/groups`,{query:{f:"json",token:null===(r=n.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,n,i,o,t,u;const l=[...null!==(n=null===(r=e.data)||void 0===r?void 0:r.admin)&&void 0!==n?n:[],...null!==(o=null===(i=e.data)||void 0===i?void 0:i.member)&&void 0!==o?o:[],...null!==(u=null===(t=e.data)||void 0===t?void 0:t.other)&&void 0!==u?u:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function b(e,r,{relationshipType:n,direction:t}){const u=`${(0,o.g)(r)}content/items/${e}/relatedItems`,[l]=await(0,i.l)(["esri/request"]);return await l(u,{query:{f:"json",relationshipType:n,direction:t},method:"get",responseType:"json"})}function O(e,r){return null==e?void 0:e.some((e=>null==r?void 0:r.some((r=>e.id===r.id&&e.capabilities.includes("updateitemcontrol")))))}const q=(e,r)=>`${r}/content/items/${e}`},59296:(e,r,n)=>{n.d(r,{a:()=>t,b:()=>m,c:()=>v,d:()=>c,e:()=>p,f:()=>g,g:()=>f,h:()=>T,i:()=>a,j:()=>s,k:()=>y,l:()=>S,m:()=>w,n:()=>$,o:()=>I,p:()=>O,q:()=>b,r:()=>q,s:()=>_,t:()=>d,u:()=>j,v:()=>u,w:()=>l});var i=n(2174);const o=e=>{var r,n,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(r=null==e?void 0:e.roleId)&&void 0!==r?r:null==e?void 0:e.id)&&void 0!==n?n:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function t(e){return e&&!e.orgId}function u(e,r){return(0,i.u)(e,r)||"update"===e.itemControl||(0,i.c)([e],r)&&v(r)}function l(e,r){const n=(0,i.c)([e],r),o=(0,i.u)(e,r)||v(r)&&n,t=p(r)&&h(r);return!!(o||n&&t)}const s=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageLicenses"))};function a(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}const c=e=>{var r;return null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.includes("Developer")};function v(e){return"org_admin"===o(e)||"account_admin"===o(e)}function m(e){return["org_admin","account_admin"].includes(o(e))&&!(null==e?void 0:e.roleId)}function p(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function f(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItemCategorySchema"))}function g(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateGroups"))}function y(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:assignToGroups"))}const h=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))};function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function $(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function b(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function q(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function T(e,r,n,i){const o=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),t=((null==r?void 0:r.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!r||!v(r)&&!t||!(null==n?void 0:n.isPortal)&&!o)}function j(e){return!!e&&(!p(e)||p(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const _=({items:e,user:r,portal:n})=>{const o=e[0],t=o.owner;if(n.isPortal&&t!==r.username&&t.includes("esri_")&&!["esri_livingatlas"].includes(t))return!1;const l=(0,i.u)(o,r),s=p(r),a=P(r),d=u(o,r)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(r)&&!s&&(function(e,r){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(r)||w(e)||$(e)||!!r.canSharePublic&&b(e)}(r,n)||P(r));return l||d||(0,i.c)(e,r)&&a};function P(e){return I(e)||O(e)||q(e)}function S(e){const r=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>r.includes(e)))}},12926:(e,r,n)=>{n.d(r,{a:()=>c,g:()=>v,q:()=>d});var i=n(46581),o=n(94788),t=n(22783),u=n(93816);function l(e,r,n){const i=(0,o.g)(e);return n?`${i}community/groups/${r.groupId}/userlist`:r.includeExternalUsers?`${i}community/users`:`${i}portals/self/users/search`}function s(e,r,n){const i=r?function(e){const{num:r,start:n,sortOrder:i,sortField:o,filters:u,searchTerm:l}=e,s={name:""+(l?`${(0,t.c)(l)}`:"")},a=Object.keys(u||{}).reduce(((e,r)=>{const{param:n,value:i,start:o,end:t}=u[r];return e[n]="joined"===r?`000000${o.getTime()},000000${t.getTime()}`:i,e}),s);return Object.assign({num:r,start:n,sortField:o,sortOrder:i},a)}(e):function(e,r){var n,i;const{num:o,start:u,sortOrder:l,sortField:s,filters:a,baseQuery:d,searchTerm:c}=e,v=Object.keys(a||{}),m={q:`${d||""} ${c?`(${(0,t.c)(c)}) `:""} `},p=v.reduce(((e,r)=>{const{param:n,value:i}=a[r];if("categories"===n)e.categories="null"===i?i:JSON.stringify(i);else if("emailstatus"===n||"mfaenabled"===n)e.q=`${e.q} ${i}`;else if("provider"===n&&i.includes(",")){const r=`(provider:${i.split(",").join(" OR provider:")})`;e.q=`${e.q} ${r}`}else"memberType"!==n&&(e.q=`${e.q} ${n}:${i}`);return e}),m);if(e.includeExternalUsers){if("collaboration"===(null===(n=e.group)||void 0===n?void 0:n.membershipAccess)){const n=null===(i=e.partnerCollaborations)||void 0===i?void 0:i.filter((e=>"active"===e.to.state)).map((e=>e.to.orgId));p.q=`${p.q} (orgid: ${r.id} OR ${(null==n?void 0:n.length)?` OR orgid:${n.join(" OR orgid:")}`:""})`}else v.some((e=>"orgid"===a[e].param))||(p.q=`${p.q} +(orgid: [0 TO {])`);p.searchUserAccess="includeTrustedOrgs"}if(e.includeExternalUsers&&e.coordinatorsOnly&&(p.filter=`(username:${e.collaborationCoordinators.map((e=>e.username)).join(" OR username:")})`),e.groupId&&(p.q=`${p.q} group:${e.groupId}`),null==a?void 0:a.groupRole){const r="admin"===a.groupRole.value?"":"-";p.filter+=`(${r}username:${e.groupAdmins.join(` OR ${r}username:`)})`}return p.q=p.q.trim(),Object.assign({num:o,start:u,sortField:s,sortOrder:l},p)}(e,n);return i}function a(e,r,n){n?null==e||e.forEach((e=>{r.groupOwner&&r.groupOwner===e.username&&(e.memberType="owner")})):r.groupId&&r.groupOwner&&(null==e||e.forEach((e=>{var n;e.username===r.groupOwner?e.memberType="owner":(null===(n=r.groupAdmins)||void 0===n?void 0:n.includes(e.username))&&(e.memberType="admin")})))}async function d(e,r){var n,t;const u=Boolean(!r.myOrgView&&r.groupId),d=l(e,r,u),c=s(r,u,e),v=await(0,i.r)(d,c);if(a(v.users||v.results,r,u),r.includeExternalUsers&&!r.coordinatorsOnly&&(!r.filters||0===Object.keys(r.filters).length)){const u=(null===(n=r.searchTerm)||void 0===n?void 0:n.trim().toLowerCase())||"",l=await async function(e,r,n){if(!n||!r||r.length<3)return!1;const t=(0,o.g)(e),u=`${t}community/users`;try{const e=await(0,i.r)(u,{filter:`username:${r} AND group:${n}`,num:1});return(null==e?void 0:e.total)>0}catch(e){return!1}}(e,u,r.groupId),s=(v.users||v.results).some((e=>e.username.toLowerCase()===u));if(u.length>0&&!s&&!l&&1===r.start&&"collaboration"!==(null===(t=r.group)||void 0===t?void 0:t.membershipAccess)){const r=await async function(e,r){const n=(0,o.g)(e),t=`${n}community/users/${r}`;try{const e=await(0,i.r)(t);return!e.username||e.firstName||e.fullName||e.lastName||(e.fullName=e.username,e.firstName=e.username),e}catch(e){}}(e,u);r&&(v.results.unshift(r),v.total++)}}return Object.assign(Object.assign({},v),{q:c.q,queryParams:c})}async function c(e,r){const n=Boolean(!r.myOrgView&&r.groupId),i=l(e,r,n),o=s(r,n,e),t=await(0,u.f)(i,o,n?"users":"results",!0);return a(t,r,n),t}async function v(e){var r,n;const t=`${(0,o.g)(e)}portals/self/users/search`,u=await(0,i.r)(t,{q:`orgid:${e.id}`,countFields:"categories",countSize:200,num:0});return((null===(n=null===(r=null==u?void 0:u.aggregations)||void 0===r?void 0:r.counts[0])||void 0===n?void 0:n.fieldValues)||[]).reduce(((e,r)=>("/categories"!==r.value&&(e[r.value]=r.count),e)),{})}},93816:(e,r,n)=>{n.d(r,{f:()=>o});var i=n(46581);async function o(e,r,n="results",o=!1){let t,u,l,s,a=1,d=[];r.start=a,r.num||(r.num=100);try{const c=await(0,i.r)(e,r);if(!(null==c?void 0:c[n]))return d;for(d=[...d,...c[n]],a=c.nextStart,t=c.total-d.length,u=Math.ceil(t/r.num),l=[],s=0;s<u;s++)if(r.start=a+s*r.num,o){const o=await(0,i.r)(e,r);(null==o?void 0:o[n])&&(d=[...d,...o[n]])}else l.push((0,i.r)(e,r));if(!o){(await Promise.all(l)).forEach((e=>{d=[...d,...e[n]]}))}return d}catch(e){return d}}},22783:(e,r,n)=>{n.d(r,{c:()=>o});var i=n(78613);function o(e=""){return(0,i.s)(e).replace(/[<>\/\\[\]\?]/g,"\\$&").trim()}}}]);