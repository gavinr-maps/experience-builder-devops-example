/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4a244f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4a244f"],{84305:(e,r,t)=>{t.r(r),t.d(r,{arcgis_smart_mapping_panels_raster_gallery:()=>d});var a=t(7263),s=(t(77040),t(70506),t(82646)),n=t(95875),i=t(58233),l=t(22601),o=t(42648);t(99004),t(62159),t(78613),t(11935),t(1991),t(28926),t(32756);function c(e,r){switch(e){case"raster-flow":r((0,l.c)());break;case"raster-vector-field":r((0,o.a)());break;case"raster-stretch":r((0,s.a7)());break;case"raster-rgb":r((0,s.a6)());break;case"raster-shaded-relief":r(function(){const{layer:e,modules:r}=s.s,t=e,a="imagery"===t.type?t.rasterFunction:void 0;return r.RasterShadedReliefCreator.createRenderer({layer:t,rasterFunction:a})}());break;case"raster-class-breaks":r((0,o.c)());break;case"raster-colormap":r(async function(){const{layer:e,modules:r}=s.s,t=e,a="imagery"===t.type?t.rasterFunction:void 0;return r.RasterColormapCreator.createRenderer({layer:t,rasterFunction:a}).then((e=>(e.renderer.colormapInfos.forEach(((r,t)=>{r.label||(e.renderer.colormapInfos[t].label=" ")})),Promise.resolve(e))))}());break;case"raster-unique-value":r((0,s.a5)())}}const d=class{constructor(e){(0,a.r)(this,e),this.arcgisSmartMappingPanelsRasterGalleryClose=(0,a.c)(this,"arcgisSmartMappingPanelsRasterGalleryClose",7),this.arcgisSmartMappingPanelsRasterGalleryError=(0,a.c)(this,"arcgisSmartMappingPanelsRasterGalleryError",7),this.tileNodes=[],this.handleSelectClick=e=>{const{layer:r}=s.s;r.bandIds=[],c(e,this.galleryRequestWrapper)},this.handleOptionsClick=e=>{switch(e){case"raster-class-breaks":{const e=document.createElement("arcgis-smart-mapping-panels-raster-class-breaks");e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-colormap":{const e=document.createElement("arcgis-smart-mapping-panels-raster-colormap");e.addEventListener("arcgisSmartMappingPanelsRasterColormapClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterColormapBackClick",(()=>this.focusSelectedTile())),this.flowNode.appendChild(e);break}case"raster-flow":{const e=document.createElement("arcgis-smart-mapping-panels-raster-flow");e.addEventListener("arcgisSmartMappingPanelsRasterFlowClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterFlowBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterFlowError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-rgb":{const e=document.createElement("arcgis-smart-mapping-panels-raster-rgb");e.addEventListener("arcgisSmartMappingPanelsRasterRgbClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterRgbBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterRgbError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-shaded-relief":{const e=document.createElement("arcgis-smart-mapping-panels-raster-shaded-relief");e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-stretch":{const e=document.createElement("arcgis-smart-mapping-panels-raster-stretch");e.addEventListener("arcgisSmartMappingPanelsRasterStretchClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterStretchBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterStretchError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-unique-value":{const e=document.createElement("arcgis-smart-mapping-panels-raster-unique-value");e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}case"raster-vector-field":{const e=document.createElement("arcgis-smart-mapping-panels-raster-vector-field");e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldBackClick",(()=>this.focusSelectedTile())),e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e);break}}},this.handleDone=()=>{this.arcgisSmartMappingPanelsRasterGalleryClose.emit("save")},this.handleCancel=()=>{const{originalRendererObj:e,originalEffect:r,originalBandCombination:t}=this,{layer:a}=s.s,n=a;n.effect=r,n.bandIds=t,(0,s.a8)(e),this.arcgisSmartMappingPanelsRasterGalleryClose.emit("cancel")},this.galleryRequestWrapper=e=>{const{strings:r}=s.s;(0,n.r)(e,this.flowItemNode).then((e=>{(0,s.a8)(e.renderer),(0,a.f)(this.hostElement)}),(()=>{this.arcgisSmartMappingPanelsRasterGalleryError.emit({message:r.panels.gallery.errors.changeRendererErrorMsg,type:"warning"})}))},this.menuOpen=void 0,this.showBackButton=void 0,this.beforeBack=void 0}async setFocus(){var e;null===(e=this.flowItemNode)||void 0===e||e.setFocus()}async componentWillLoad(){const{layer:e,modules:r}=s.s,t=e,{rasterFunction:a}=t;await r.smartMappingRasterUtils.getSupportedRendererInfo({layer:t,rasterFunction:a}).then((async e=>{this.supportedRendererTypes=e.supportedTypes,this.originalRendererObj=(0,s.a9)(),this.originalEffect=t.effect,this.originalBandCombination=t.bandIds||await r.smartMappingRasterUtils.getDefaultBandCombination({layer:t,rasterFunction:a})})),this.flowNode=(0,s.f)(this.hostElement,"calcite-flow")}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.flowItemNode)||void 0===e?void 0:e.setFocus()}))}componentDidUpdate(){setTimeout((()=>{var e;return null===(e=this.tileNodes[0])||void 0===e?void 0:e.setFocus()}),300)}render(){const{isRTL:e,strings:r}=s.s;return(0,a.h)(a.H,{key:"9d4841ce0693da83852c23fc612dd8f8b9d41a45",class:"calcite-match-height"},(0,a.h)("calcite-flow-item",{key:"27fa340107644763e50eef8d3fc2abcb3854fce0",heading:r.panels.rasterGallery.style,class:{"flow-item":!0,[i.C.rtl]:e},closable:(0,s.F)(this.hostElement),menuOpen:this.menuOpen,beforeBack:this.beforeBack,showBackButton:this.showBackButton,onCalciteFlowItemClose:this.handleDone,ref:e=>this.flowItemNode=e},this.renderRasterGalleryContent()))}renderRasterGalleryContent(){return(0,a.h)(a.F,null,this.renderStyleOptions(),this.renderDoneButton(),this.renderCancelButton())}renderStyleOptions(){const{modules:e,strings:r}=s.s,t=(0,s.g)(),n=e.esriLang.clone(this.supportedRendererTypes).sort((e=>e===t?-1:1)).map(((e,r)=>this.renderStyleTile(e,r)));return(0,a.h)(a.F,null,(0,a.h)("calcite-label",{class:"styles-msg-title"},r.panels.rasterGallery.symbologyOptions),n)}renderStyleTile(e,r){const t=(0,s.g)();return(0,a.h)("arcgis-smart-mapping-tile",{key:`tile-${e}`,tileType:"gallery",type:e,selected:e===t,ref:e=>{e&&(this.tileNodes[r]=e)},onArcgisSmartMappingTileSelect:()=>this.handleSelectClick(e),onArcgisSmartMappingTileOptions:()=>this.handleOptionsClick(e)})}renderDoneButton(){const{strings:e}=s.s;return(0,a.h)("calcite-button",{slot:"footer",label:e.done,onClick:this.handleDone,appearance:"solid",width:"half"},e.done)}renderCancelButton(){const{strings:e}=s.s;return(0,a.h)("calcite-button",{slot:"footer",label:e.cancel,onClick:this.handleCancel,appearance:"outline-fill",width:"half"},e.cancel)}focusSelectedTile(){setTimeout((()=>requestAnimationFrame((()=>{var e;return null===(e=this.tileNodes[0])||void 0===e?void 0:e.setFocus()}))),300)}get hostElement(){return(0,a.d)(this)}};d.style=".styles-msg-title{margin-top:12px;padding:6px;font-weight:bold;font-size:16px;display:flex}.styles-msg{font-size:var(--calcite-font-size--2)}"},95875:(e,r,t)=>{let a,s;function n(e){e.loading=!1}function i(e,r){return function(e){e.loading=!0,s=!1,a&&clearTimeout(a),a=setTimeout((()=>{n(e),s=!0}),6e4)}(r),e.then((e=>(n(r),s?Promise.reject(new Error("timeout")):Promise.resolve(e)))).catch((e=>(n(r),Promise.reject(e))))}t.d(r,{r:()=>i})},42648:(e,r,t)=>{t.d(r,{a:()=>n,b:()=>o,c:()=>l,d:()=>i,g:()=>c});t(77040),t(70506);var a=t(82646),s=t(32756);function n(){const{layer:e,modules:r}=a.s,t=e,s="imagery"===t.type?t.rasterFunction:void 0;return r.RasterVectorFieldCreator.createRenderer({layer:t,rasterFunction:s}).then((e=>(t.effect=void 0,(0,a.a8)(e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function i(e){const{layer:r,modules:t}=a.s,s=r,n=(0,a.a9)(),i="imagery"===s.type?s.rasterFunction:void 0;return e=e||{},t.RasterVectorFieldCreator.createRenderer({layer:s,rasterFunction:i,style:e.style||n.style}).then((e=>{e.renderer.symbolTileSize=n.symbolTileSize;const r=(0,a.d)(n,"size");return e.renderer.visualVariables=(0,a.T)(e.renderer,"size")||[],e.renderer.visualVariables.push(r),e.renderer.flowRepresentation=n.flowRepresentation,e.renderer.inputUnit=n.inputUnit,e.renderer.outputUnit=n.outputUnit,Promise.resolve(e)}),(e=>Promise.reject(e)))}function l(){const{layer:e,modules:r}=a.s,t=e,n="imagery"===t.type?t.rasterFunction:void 0,i=(0,s.c)([[245,245,0],[255,0,0]].map((e=>new r.esriColor(e))));return r.RasterClassBreaksCreator.createRenderer({layer:t,rasterFunction:n,colorRamp:i}).then((e=>(e.renderer.classBreakInfos.forEach((e=>e.symbol.outline.width=0)),Promise.resolve(e))))}function o(e){const{layer:r,modules:t}=a.s,s=r,n=(0,a.a9)(),i="imagery"===s.type?s.rasterFunction:void 0;return t.RasterClassBreaksCreator.createRenderer({layer:s,rasterFunction:i,field:e.field||n.field,classificationMethod:e.classificationMethod||n.authoringInfo.classificationMethod,numClasses:e.numClasses||n.classBreakInfos.length,colorRamp:n.authoringInfo.colorRamp,definedInterval:e.definedInterval}).then((e=>(e.renderer.classBreakInfos.forEach((e=>e.symbol.outline.width=0)),Promise.resolve(e))))}function c(){var e;const{layer:r,modules:t,strings:s}=a.s,n=r;let i;const{rasterInfo:l}=n,o=null===(e=null==l?void 0:l.attributeTable)||void 0===e?void 0:e.fields;return i=o?o.filter((e=>"oid"!==e.type&&"string"!==e.type)):[new t.Field({name:"value",alias:s.panels.classBreaks.value})],i}},22601:(e,r,t)=>{t.d(r,{a:()=>n,c:()=>s,f:()=>i});t(77040),t(70506);var a=t(82646);function s(e){const{layer:r,mapView:t,modules:s}=a.s,n=r;return e=e||{},s.RasterFlowCreator.createRenderer({layer:n,view:t,theme:e.flowTheme||"flow-line",includeColorVariable:e.includeColorVariable,legendOptions:e.legendOptions,flowRepresentation:e.flowRepresentation,flowScheme:e.flowScheme||i()}).then((r=>(r.layerEffect&&-1===r.layerEffect.indexOf("drop-shadow")&&(n.effect=r.layerEffect),r.renderer.color=r.renderer.color&&(e.color||r.renderer.color),Promise.resolve(r))),(e=>Promise.reject(e)))}function n(e){var r;const{layer:t,mapView:s,modules:n}=a.s,l=t;e=e||{};const o=(0,a.a9)(),c=(0,a.d)(o,"color"),d=o.authoringInfo,p=e.flowTheme||(null==d?void 0:d.flowTheme)||"flow-line";return n.RasterFlowCreator.createRenderer({layer:l,view:s,theme:p,includeColorVariable:null!==(r=e.includeColorVariable)&&void 0!==r?r:!!c,legendOptions:e.legendOptions||(null==c?void 0:c.legendOptions),flowRepresentation:e.flowRepresentation||o.flowRepresentation,flowScheme:e.flowScheme}).then((r=>{const t=(0,a.J)(o,"color"),s=(0,a.J)(r.renderer,"color");(null==t?void 0:t.minSliderValue)&&(null==t?void 0:t.maxSliderValue)&&s&&(s.minSliderValue=t.minSliderValue,s.maxSliderValue=t.maxSliderValue);const l=(0,a.d)((0,a.a9)(),"color"),c=(0,a.d)(r.renderer,"color");l&&c&&l.stops.forEach(((e,r)=>{c.stops[r].value=e.value})),r.renderer.color=r.renderer.color&&(e.color||o.color||r.renderer.color);return(e.flowScheme||i())&&l&&c&&l.stops.forEach(((e,r)=>{c.stops[r].color=new n.esriColor(e.color.toJSON())})),p===d.flowTheme&&(r.renderer.flowSpeed=o.flowSpeed,r.renderer.density=o.density,r.renderer.trailLength=o.trailLength,r.renderer.trailWidth=o.trailWidth,r.renderer.trailCap=o.trailCap),Promise.resolve(r)}),(e=>Promise.reject(e)))}function i(){const{mapView:e,modules:r}=a.s,t=(0,a.a9)(),s=(0,a.d)(t,"color");if(!s)return null;const n=s.stops.map((e=>e.color)),i=r.flowSchemes.getSchemes({basemap:e.map.basemap||"topo"}),l=[i.primaryScheme].concat(i.secondarySchemes),o=[];return l.forEach((e=>{let r=n.some(((r,t)=>!(0,a.aa)(e.colors[t],r)));r?(e.colors=e.colors.reverse(),r=n.some(((r,t)=>!(0,a.aa)(e.colors[t],r))),r||o.push(e)):o.push(e)})),o.length?o[0]:null}}}]);