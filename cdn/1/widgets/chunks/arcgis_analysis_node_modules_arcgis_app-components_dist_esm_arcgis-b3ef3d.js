/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d"],{77256:(e,s,a)=>{a.r(s),a.d(s,{arcgis_smart_mapping_class_breaks_color_slider:()=>t});var l=a(7263),r=(a(77040),a(70506),a(82646)),i=a(13521),o=a(96432);a(99004),a(58233),a(28926),a(78613),a(62159),a(11935),a(1991);const t=class{constructor(e){(0,l.r)(this,e),this.arcgisSmartMappingClassBreaksColorSliderChange=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderChange",7),this.arcgisSmartMappingClassBreaksColorSliderError=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderError",7),this.styleSheetStatus="not-loaded"}render(){const{config:e}=r.s;return(0,l.h)(l.H,{key:"8aad2cd627ca19411e7692053531402cfe4a25a9"},(0,l.h)("link",{key:"d3a384731ea3c03ee68452035a85a92c249f9f2e",rel:"stylesheet",href:`${e.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,l.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,l.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderClassBreaksColorSlider():"not-loaded"===this.styleSheetStatus?this.renderClassBreaksColorSliderLoading():null)}renderClassBreaksColorSlider(){const{strings:e}=r.s;if(1!==(0,r.b)().classBreakInfos.length){return(this.prepareClassBreaksColorSlider()||this.classBreaksColorSlider)&&this.classBreaksColorSlider.min!==this.classBreaksColorSlider.max?(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-label",null,e.panels.classBreaks.dataRange),(0,l.h)("div",{class:"slider-box-buttons-front"},this.renderInvertButton()),(0,l.h)("div",{ref:e=>{e&&this.afterClassBreaksColorSliderCreate(e)}})):this.classBreaksColorSlider&&this.classBreaksColorSlider.min===this.classBreaksColorSlider.max?null:this.renderClassBreaksColorSliderLoading()}this.classBreaksColorSlider&&(this.classBreaksColorSlider.destroy(),this.classBreaksColorSlider=void 0)}renderInvertButton(){const{strings:e}=r.s;return(0,l.h)("arcgis-smart-mapping-action",{text:e.panels.classBreaks.invertSlider,icon:"arrowUpDown",onClick:()=>this.handleInvertSlider()})}renderClassBreaksColorSliderLoading(){const{strings:e}=r.s;return(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-loader",{label:e.loading}))}prepareClassBreaksColorSlider(){const{modules:e}=r.s,s=(0,r.b)();let a,l;a=s.classBreakInfos[0].minValue,l=s.classBreakInfos[s.classBreakInfos.length-1].maxValue,({min:a,max:l}=(0,r.aG)({min:a,max:l}));const t=(0,o.g)(),n={min:a,max:l,breaks:t,precision:(0,i.g)(t)};return this.classBreaksColorSlider?this.classBreaksColorSlider.set(n):(this.classBreaksColorSlider=new e.ClassedColorSlider(n),this.classBreaksColorSlider.min===this.classBreaksColorSlider.max&&this.classBreaksColorSlider.set(n),this.createclassBreaksColorSliderChangeEvents()),(0,r.O)(this.classBreaksColorSlider)}afterClassBreaksColorSliderCreate(e){if(this.classBreaksColorSlider.container)e.append(this.classBreaksColorSlider.container);else{const s=document.createElement("div");e.append(s),this.classBreaksColorSlider.container=s}}createclassBreaksColorSliderChangeEvents(){this.classBreaksColorSlider&&(this.classBreaksColorSlider.on("min-change",(e=>{const s=(0,r.b)().classBreakInfos;e.value>s[0].maxValue?this.handleMinMaxChange(s[0].maxValue,s[s.length-1].maxValue):this.handleMinMaxChange(e.value,s[s.length-1].maxValue)})),this.classBreaksColorSlider.on("max-change",(e=>{const s=(0,r.b)().classBreakInfos;e.value<s[s.length-1].minValue?this.handleMinMaxChange(s[0].minValue,s[s.length-1].minValue):this.handleMinMaxChange(s[0].minValue,e.value)})),this.classBreaksColorSlider.on("thumb-change",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))),this.classBreaksColorSlider.on("thumb-drag",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))))}handleInvertSlider(){const{modules:e}=r.s,s=(0,r.b)();let a=s.classBreakInfos.map((s=>(0,r.Q)(s.symbol)||new e.esriColor({r:64,g:64,b:64,a:1})));a=a.reverse(),s.classBreakInfos.map(((e,s)=>{(0,r.Q)(e.symbol)&&(0,r.W)(e.symbol,a[s])})),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({invertColors:!0})}handleMinMaxChange(e,s){const a=(0,r.b)();let l=a.classBreakInfos[0],i=a.classBreakInfos[a.classBreakInfos.length-1];l.minValue=e,l.label=(0,r.aH)(l,this.classBreaksColorSlider.precision),i.maxValue=s,i.label=(0,r.aH)(i,this.classBreaksColorSlider.precision),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}updateRendererBreaks(e){(0,r.b)().classBreakInfos.forEach(((s,a)=>{s.minValue===e[a].min&&s.maxValue===e[a].max||(s.minValue=e[a].min,s.maxValue=e[a].max,s.label=(0,r.aH)(s,this.classBreaksColorSlider.precision))})),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}get hostElement(){return(0,l.d)(this)}};t.style=".slider-box{height:320px}.slider-box .esri-classed-color-slider{min-width:200px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}.slider-box-buttons-front{display:flex}"},13521:(e,s,a)=>{a.d(s,{a:()=>t,b:()=>o,g:()=>d,u:()=>i});var l=a(1991),r=a(82646);a(70506);function i(e){const{modules:s}=r.s,a=(0,r.b)(),i=s.esriLang.clone(a.classBreakInfos);a.classBreakInfos=[],i.forEach(((s,o)=>{s=function(e,s,a,i){if((0,l.i)(s))if(0===s);else if(s<1){const l=Math.round(1/s);e.minValue="first"===i?Math.floor(e.minValue/s)/l:Math.round(e.minValue/s)/l,e.maxValue="last"===i?Math.ceil(e.maxValue/s)/l:Math.round(e.maxValue/s)/l,e.label=`${a>0?"> ":""}${e.minValue.toLocaleString(r.s.fullLocale,{maximumSignificantDigits:15})} - ${e.maxValue.toLocaleString(r.s.fullLocale,{maximumSignificantDigits:15})}`}else e.minValue="first"===i?Math.floor(e.minValue/s)*s:Math.round(e.minValue/s)*s,e.maxValue="last"===i?Math.ceil(e.maxValue/s)*s:Math.round(e.maxValue/s)*s,e.label=(a>0?"> ":"")+e.minValue.toLocaleString()+" - "+e.maxValue.toLocaleString();return e}(s,e,o,0===o?"first":o===i.length-1?"last":void 0),a.addClassBreakInfo({minValue:s.minValue,maxValue:s.maxValue,symbol:s.symbol,label:s.label})}))}function o(e){const s=(0,r.b)().classBreakInfos;let a=e,l=1/0;s.forEach((e=>{a||(a=Math.max(n(e.minValue),n(e.maxValue))),l=Math.min(l,e.maxValue-e.minValue)}));const i=[];return l>1e7?(i.push(1e7),i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e6?(i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e5?(i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e4?(i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e3?(i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001)):l>100?(i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5)):l>10?(i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>1?(a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.1?(a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.01?(a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.001?(a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7)):l>1e-4?(a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7),a>8&&i.push(1e-8)):l>1e-5&&(a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7),a>8&&i.push(1e-8),a>9&&i.push(1e-9)),i}function t(){const e=(0,r.b)();let s=1e10;return e.classBreakInfos.forEach((e=>{s=Math.min(s,h(e.minValue)),s=Math.min(s,h(e.maxValue))})),s}function n(e){let s=1;for(;Math.round(e*s)/s!==e;)s*=10;return Math.log(s)/Math.LN10}function h(e){let s=1e-8;for(;u(Math.round(e/s)*s)===e;)s*=10;return s/10}function u(e){return parseFloat(e.toPrecision(12))}function d(e){var s,a,r,i,o,t,h,d;let c=0;e.forEach((e=>{(0,l.i)(e.value)?c=Math.max(n(u(e.value)),c):((0,l.i)(e.minValue)&&(c=Math.max(n(u(e.minValue)),c)),(0,l.i)(e.maxValue)&&(c=Math.max(n(u(e.maxValue)),c)),(0,l.i)(e.min)&&(c=Math.max(n(u(e.min)),c)),(0,l.i)(e.max)&&(c=Math.max(n(u(e.max)),c)))})),c=Math.min(c,3);const p=e[0],m=e[e.length-1],C=Math.min(null!==(a=null!==(s=p.minValue)&&void 0!==s?s:p.min)&&void 0!==a?a:p.value,null!==(i=null!==(r=m.minValue)&&void 0!==r?r:m.min)&&void 0!==i?i:m.value),g=Math.max(null!==(t=null!==(o=p.maxValue)&&void 0!==o?o:p.max)&&void 0!==t?t:p.value,null!==(d=null!==(h=m.maxValue)&&void 0!==h?h:m.max)&&void 0!==d?d:m.value)-C;return g/e.length<2e-7?c=8:g/e.length<2e-6?c=7:g/e.length<2e-5?c=6:g/e.length<2e-4?c=5:g/e.length<.002?c=4:g/e.length<.02?c=3:g/e.length<.2?c=Math.max(c,2):g/e.length<2&&(c=Math.max(c,1)),Math.round(c)}}}]);