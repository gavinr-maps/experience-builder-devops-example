/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161"],{99004:(e,t,i)=>{i.d(t,{c:()=>o,g:()=>n});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},71700:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>a,c:()=>r,d:()=>o});const o=(0,i(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=o.state,r=o.state,a=o.state},76173:(e,t,i)=>{i.d(t,{A:()=>s,N:()=>n,a:()=>a,b:()=>r,c:()=>c,d:()=>l,u:()=>o});const o=["esriFieldTypeOID","esriFieldTypeGlobalID"],n="<None>",r={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage"},a={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},s={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},l=["zip","csv","xls","xlsx","geojson","gpkg","json"],c=["zip","csv","xls","xlsx"]},52308:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_csv_location_fields:()=>v});var o=i(7263),n=i(41168),r=i(31670),a=i(58233),s=i(59296),l=i(74186),c=i(71700),d=i(99907),u=i(28944),p=i(7380),h=i(71695);i(46581),i(28926),i(70506),i(99004),i(94788),i(65215),i(11935),i(78613),i(2174),i(81232),i(77040),i(76173),i(86537),i(66488);const v=class{constructor(e){(0,o.r)(this,e),this.newItemUpdatePage=(0,o.c)(this,"newItemUpdatePage",7),this.workflowComplete=(0,o.c)(this,"workflowComplete",7),this.newItemToggleNavigationEnabled=(0,o.c)(this,"newItemToggleNavigationEnabled",7),this.newItemDisableCloseButtons=(0,o.c)(this,"newItemDisableCloseButtons",7),this.userHasAssignedCredits=!1,this.orgIsRestricted=!1,this.showTotalCredits=!1,this.isAppendWorkflow=!1,this.logCSVLocationFieldsChanges=()=>{const e=r.c.telemetry,t={eventType:"other",pageName:"my content",category:"new item csv location settings",label:this.currentLocationType};"address place names"===this.currentLocationType&&(this.displayEnrichLayerSettings?t.action="GeometryOnly"===this.selectedCandidateFieldsType?"enrich with some fields":"enrich with all fields":t.action="enrich with no fields",t.facetValue="Multiple"===this.selectedLocationFieldSelectionType?"multi":"single line address",t.details=this.initialLocator===c.a.geocodeServiceUrl?"default locator":"locator changed",t.attribute=this.initialRegion===c.a.sourceCountry?"default region":"region changed"),null==e||e.logEvent(t)},this.selectedLocationType="none",this.advancedExpanded=!1,this.selectedCandidateFieldsType="GeometryOnly",this.displayEnrichLayerSettings=!1,this.selectedLocationFieldSelectionType="Single",this.error=void 0,this.i18n=void 0}async handleNext(){var e;if((this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits())return this.error=this.i18n.errors.insufficientCredits,void(null===(e=this.estimate)||void 0===e||e.scrollIntoView());const t=this.validateFields();if(t)this.error=t;else{if(this.error=null,this.isAppendWorkflow&&("add"===c.a.addAppendSelectOption||"upsert"===c.a.addAppendSelectOption)&&"none"===c.a.locationType&&"esriGeometryPoint"===c.a.sourceDataLayer.geometryType)return void(this.error=this.i18n.errors.noLocationTypeForAppend);const e=c.a.analyzeResults,t=(0,u.e)(this.selectedLocationFieldSelectionType,this.isAppendWorkflow);if(c.a.analyzeResults=Object.assign(Object.assign({},e),{publishParameters:t}),this.isAppendWorkflow){const{name:e}=c.a.dataLayer;c.a.dataLayer=t,c.a.dataLayer.name=e}this.logCSVLocationFieldsChanges();let i="itemProperties";this.isAddToMapTerminalPage()?this.workflowComplete.emit({type:c.a.type,url:encodeURI(c.a.url),customParameters:c.a.customParameters,results:{analyzeResults:c.a.analyzeResults,fields:c.a.selectedFields}}):(this.isAppendWorkflow&&(i="add"!==c.a.addAppendSelectOption||c.a.backupLayerFields.some((e=>"esriFieldTypeDate"===e.type))&&!this.isEnterprise?"appendKeyPairSelect":"appendMatchFields"),this.newItemUpdatePage.emit(i))}}hasInsufficientCredits(){return"address"===this.selectedLocationType&&(0,u.i)(c.a.geocodeServiceUrl)&&c.a.geocodeCost&&c.a.geocodeCost.transactionCreditCost>c.a.geocodeCost.availableCredits}showUnrestrictedOrgCreditsNotice(){return!(this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits()}isAddToMapTerminalPage(){return"map"===d.u.workflow&&"url"===c.a.newItemMode&&!c.a.enablePublishing}async analyze(){var e;const{file:t,url:i,existingItem:o,id:n,cloudProviderResource:a,type:s}=c.a,{portal:d,user:u,config:h,lang:v}=r.c;return(0,l.a)({analyzeArgs:(o||a||(0,p.a)(null!==(e=null==t?void 0:t.size)&&void 0!==e?e:0))&&n?{type:"item",itemid:n}:t?{type:"file",file:t}:{type:"url",sourceUrl:i},itemArgs:{itemType:s},configArgs:{portal:d,user:u,config:h,lang:v}})}async componentWillLoad(){var e,t,i,o,a,p;const{analyzeResults:v,type:g,selectedSheet:m,standardizedFieldNames:f,enablePublishing:y,cloudProviderResource:b,geocodeServiceUrl:w}=c.a,{portal:T,user:S,lang:L}=r.c,C=(0,u.a)();this.isAppendWorkflow="append"===d.u.workflow;const{result:k}=await(0,n.g)(T,S);r.c.subscriptionInfo=k;const x=(0,s.i)(k);this.isDev=x,this.isLocationPlatform=(0,s.d)(k),this.orgIsRestricted="restricted"===(null==k?void 0:k.state),this.isEnterprise=T.isPortal;const F=this.isAppendWorkflow&&T.isPortal,P=null!==(t=4===r.c.api?null===(e=null==S?void 0:S.sourceJSON)||void 0===e?void 0:e.assignedCredits:null==S?void 0:S.assignedCredits)&&void 0!==t?t:0;this.userHasAssignedCredits=P>0,this.i18n=d.u.i18n.csvLocationFields,this.isAddToMapTerminalPage()&&(d.u.nextText="addToMap");let _=F?["coordinates","none"]:["coordinates","address","none","mgrs","usng"];const I=(0,h.m)(S)&&((0,h.r)(S)||!this.isLocationPlatform)&&c.a.geocodeServers&&("map"!==d.u.workflow||y);this.showTotalCredits=(0,h.s)(S,T);const{selectedLocationFieldSelectionType:A}=c.a;this.selectedLocationFieldSelectionType=null!=A?A:"Single";const E="map"===d.u.workflow&&!y;this.locationTypes=_.map((e=>({optionTitle:this.i18n.locationTypes[e].title,description:(this.isLocationPlatform||x)&&"address"===e?this.i18n.locationTypes.address.descriptionDeveloper:this.i18n.locationTypes[e].description.replace("${type}","googlesheets"===(null==b?void 0:b.cloudFileType)?"Google Sheet":g),value:e,badge:"address"!==e||r.c.portal.isPortal||x||s.d?null:{label:this.i18n.consumesCredits,icon:"credits"},icon:"none"===e?"table":"layer-points"}))).filter((({value:e})=>("address"!==e||I)&&("coordinates"===e||!E)));const O=null==v?void 0:v.publishParameters;if(O){const e="Microsoft Excel"===g?null!==(o=null===(i=null==O?void 0:O.layers)||void 0===i?void 0:i[m])&&void 0!==o?o:null===(a=null==O?void 0:O.layers)||void 0===a?void 0:a[0]:null==v?void 0:v.publishParameters;if((e.latitudeFieldName||e.longitudeFieldName)&&(this.selectedLocationType="coordinates",c.a.locationType="coordinates",c.a.coordinateFieldType="LatitudeAndLongitude"),"coordinates"===O.locationType&&O.coordinateFieldType)switch(c.a.locationType="coordinates",O.coordinateFieldType){case"MGRS":this.selectedLocationType="mgrs",c.a.coordinateFieldType="MGRS";break;case"USNG":this.selectedLocationType="usng",c.a.coordinateFieldType="USNG";break;default:this.selectedLocationType="coordinates",c.a.coordinateFieldType="LatitudeAndLongitude"}else"address"===e.locationType&&I&&(this.selectedLocationType="address",c.a.locationType="address");null!==(p=c.a.locationType)&&void 0!==p||(c.a.locationType="none")}if(1===this.locationTypes.length){const e=this.locationTypes[0].value;this.selectedLocationType=e,c.a.locationType="mgrs"===e||"usng"===e?"coordinates":e}I||"address"!==this.selectedLocationType||(this.selectedLocationType="coordinates",c.a.locationType="coordinates"),"address"!==this.selectedLocationType||C.addressFields||(c.a.locationType="address"),f||await(0,l.s)({geocodeServiceUrl:w,locationType:c.a.locationType,lang:L}),F&&(this.selectedLocationType="coordinates",c.a.locationType="coordinates"),this.initialLocator=c.a.geocodeServiceUrl,this.initialRegion=c.a.sourceCountry,this.setLocationTypeTelemetry(this.selectedLocationType)}validateFields(){const{standardizedFieldNames:e,selectedFields:t,backupLayerFields:i}=c.a,o=this.isAppendWorkflow?i:Object.values(t),n=!o.find((({locationType:t})=>{const i=(null==t?void 0:t.toLowerCase())===this.selectedLocationType.toLowerCase(),o=!!(null==e?void 0:e[t]);return i||o}));switch(this.selectedLocationType){case"usng":case"mgrs":if(n)return this.i18n.errors.noFieldSelected;break;case"address":if("Single"===this.selectedLocationFieldSelectionType&&n)return this.i18n.errors.noFieldSelected;if("Multiple"===this.selectedLocationFieldSelectionType){if(!o.find((e=>e.locationType&&"unknown"!==e.locationType)))return this.i18n.errors.noFieldSelected}break;case"coordinates":if(o.filter((({locationType:e})=>"latitude"===e||"longitude"===e)).length<2)return this.i18n.errors.coordinate}}async updateLocationType(e,t){if(this.selectedLocationType=e,"none"===e)return c.a.locationType="none",void(this.currentLocationType="none");switch(e){case"mgrs":c.a.coordinateFieldType="MGRS",c.a.locationType="coordinates";break;case"coordinates":c.a.coordinateFieldType="LatitudeAndLongitude",c.a.locationType="coordinates";break;case"usng":c.a.coordinateFieldType="USNG",c.a.locationType="coordinates";break;case"address":c.a.locationType="address"}t&&await this.analyze(),this.setLocationTypeTelemetry(e)}setLocationTypeTelemetry(e){switch(e){case"mgrs":this.currentLocationType="mgrs coordinates";break;case"coordinates":this.currentLocationType="lat lon";break;case"usng":this.currentLocationType="usng coordinates";break;case"address":this.currentLocationType="address place names";break;case"none":this.currentLocationType="none"}}async updateGeocodeServer(e){c.a.geocodeServiceUrl=e,await this.analyze()}async updateRegion(e){c.a.sourceCountry=e,await this.analyze()}handleEnrichLayerSwitchChange(e){const t=e.target.checked;this.displayEnrichLayerSettings=t,this.updateCandidateFields(t?"Minimal":"GeometryOnly")}updateCandidateFields(e){this.selectedCandidateFieldsType=e,c.a.candidateFieldsType=e}renderLocationFields(){const{standardizedFieldNames:e}=c.a,t={address:e,coordinates:{latitude:this.i18n.latitude,longitude:this.i18n.longitude},mgrs:{mgrs:"MGRS"},usng:{usng:"USNG"}}[this.selectedLocationType];if("Single"===this.selectedLocationFieldSelectionType&&"address"===this.selectedLocationType&&t){const e=Object.keys(t)[0];return(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},t[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,t[e])))}return t&&Object.keys(t).map((e=>(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},t[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,t[e])))))}updateFieldLocationType(e,t){(this.isAppendWorkflow?c.a.backupLayerFields:Object.values(c.a.selectedFields)).forEach((i=>{i.name===e?i.locationType=t:i.locationType===t&&(i.locationType="unknown")}))}handleLocationFieldSelectionChange(e){this.selectedLocationFieldSelectionType=e,c.a.selectedLocationFieldSelectionType=e}renderFieldSelect(e,t){const i=this.isAppendWorkflow?c.a.backupLayerFields:c.a.selectedFields,n=Object.keys(i).map((e=>i[e])),r=!n.some((t=>t.locationType===e));return(0,o.h)("calcite-select",{label:t,role:"cell",onCalciteSelectChange:t=>this.updateFieldLocationType(t.currentTarget.selectedOption.value,e)},(0,o.h)("calcite-option",{value:"unknown",selected:r},this.i18n.unknown),n.map((t=>(0,o.h)("calcite-option",{value:t.name,selected:t.locationType===e},t.alias||t.name))))}render(){var e,t,i,n,s;const{geocodeServiceUrl:l,geocodeServers:p,geocodeCost:h,sourceCountry:v,countryCodes:g,backupLayerFields:m}=c.a,{isDev:f,isLocationPlatform:y}=this;if(!m)return;const{config:b}=r.c,w=null!==(t=null===(e=(0,u.a)())||void 0===e?void 0:e.estimatedRecordCount)&&void 0!==t?t:0,{helpMap:T,helpBase:S}=b,L=(0,a.g)(this.el);return(0,o.h)("div",{class:"wrapper"},(0,o.h)("arcgis-select",{class:"label--top",selectedOption:this.selectedLocationType,options:this.locationTypes,label:this.i18n.locationSettings,labelDescription:this.i18n.locationSettingsDescription,onArcgisOptionChange:e=>this.updateLocationType(e.detail,!0)}),"none"!==this.selectedLocationType&&(0,o.h)("div",null,"address"===this.selectedLocationType&&(0,o.h)("div",{class:"advanced"},(0,o.h)("button",{class:"advanced__toggle","aria-expanded":this.advancedExpanded.toString(),"aria-controls":"advanced__content",onClick:()=>this.advancedExpanded=!this.advancedExpanded},(0,o.h)("calcite-icon",{icon:"chevron-up",scale:"s",class:{advanced__icon:!0,[a.C.rtl]:"rtl"===L,"advanced__icon--open":this.advancedExpanded}}),this.i18n.advancedSettings),this.advancedExpanded&&(0,o.h)("div",{class:"advanced__content",id:"advanced__content"},(0,o.h)("div",{class:"two-up"},(0,o.h)("calcite-label",{class:"column"},this.i18n.locator,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateGeocodeServer(e.currentTarget.selectedOption.value)},null==p?void 0:p.map((e=>(0,o.h)("calcite-option",{value:e.url,selected:e.url===l},e.name))))),(0,o.h)("calcite-label",{class:"column"},this.i18n.region,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateRegion(e.currentTarget.selectedOption.value)},null==g?void 0:g.map((e=>(0,o.h)("calcite-option",{value:e.value,selected:e.value.toLowerCase()===v.toLowerCase()},this.i18n.countryCodes[e.value.toUpperCase()]||e.label)))))),!r.c.portal.isPortal&&!this.isAppendWorkflow&&(0,o.h)("div",{class:"enrich-layer-container"},(0,o.h)("calcite-label",{layout:"inline-space-between"},(0,o.h)("span",{class:"enrich-title"},this.i18n.enrich,(0,o.h)("arcgis-information",{label:null===(i=d.u.i18n)||void 0===i?void 0:i.moreInfo,placement:"top-start",paddedContent:!0,onClick:e=>{var t,i;e.stopPropagation(),null===(i=(t=e.target).togglePopover)||void 0===i||i.call(t)}},(0,o.h)("p",{class:"enrich-description"},this.i18n.enrichLayerDescription),(0,o.h)("calcite-link",{target:"_blank",href:`${S}${T[120002541]}`},this.i18n.enrichLayerLink))),(0,o.h)("calcite-switch",{checked:this.displayEnrichLayerSettings,onCalciteSwitchChange:this.handleEnrichLayerSwitchChange.bind(this)})),this.displayEnrichLayerSettings?(0,o.h)("calcite-radio-button-group",{layout:"vertical",name:"enrich-group",onCalciteRadioButtonGroupChange:e=>this.updateCandidateFields(e.target.selectedItem.value)},["Minimal","AllFields"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedCandidateFieldsType===e,value:e}),(0,o.h)("span",{class:"enrich-radio-text"},this.i18n.candidateFieldsTypes[e].description))))):null))),(0,o.h)("h3",{class:"header"},this.i18n.locationFields," ",(0,o.h)("span",{class:"asterisk"},"*")),"address"===this.selectedLocationType?(0,o.h)("calcite-radio-button-group",{name:"location-field-selection-group",layout:"vertical",onCalciteRadioButtonGroupChange:e=>this.handleLocationFieldSelectionChange(e.target.selectedItem.value)},["Single","Multiple"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedLocationFieldSelectionType===e,value:e}),this.i18n["Single"===e?"locationFieldSingle":"locationFieldMultiple"])))):null,(0,o.h)("div",{role:"table",class:"table"},(0,o.h)("div",{class:"row row--header",role:"row"},(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.locationType),(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.field)),this.renderLocationFields())),"address"===this.selectedLocationType&&h&&!r.c.portal.isPortal&&(0,u.i)(l)&&(0,o.h)(o.F,null,f?(0,o.h)("div",null,(0,o.h)("calcite-notice",{scale:"m",width:"full",open:!0,icon:"information"},(0,o.h)("div",{slot:"message"},this.i18n.recordCount.replace("${num}",`${w}`)))):y?null:(0,o.h)("arcgis-credit-estimate",{transactionCreditCost:h.transactionCreditCost,availableCredits:h.availableCredits,showTotal:this.showTotalCredits,class:"credit-estimate",api:r.c.api,ref:e=>this.estimate=e}),this.showUnrestrictedOrgCreditsNotice()&&(0,o.h)("calcite-notice",{class:"notice",kind:"brand",icon:"information",open:!0},(0,o.h)("div",{slot:"title"},this.i18n.unrestrictedOrgCredits.title),(0,o.h)("div",{slot:"message"},this.i18n.unrestrictedOrgCredits.description))),(0,o.h)("arcgis-new-item-alert",{heading:null===(n=this.error)||void 0===n?void 0:n.title,description:null===(s=this.error)||void 0===s?void 0:s.description,active:!!this.error,onAlertDismiss:()=>this.error=null}))}get el(){return(0,o.d)(this)}};v.style=".wrapper{padding-bottom:2rem}.table{margin-bottom:1.5rem}.row{display:flex;align-items:center;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;box-shadow:0px -1px 0px #eaeaea}.row--header{box-shadow:none}.cell{box-sizing:border-box;width:50%;padding:0.5rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1)}.cell--header{font-weight:400}.advanced{margin-top:1rem;margin-bottom:2rem;background-color:var(--calcite-color-foreground-2)}.advanced__toggle{margin:0px;box-sizing:border-box;display:flex;width:100%;cursor:pointer;align-items:center;border-radius:0;border-style:none;padding:1.25rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-2);background-color:transparent;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.advanced__toggle:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.advanced__icon{margin-inline-end:1rem;transform:rotate(90deg);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.arcgis--rtl{transform:rotate(-90deg)}.advanced__icon--open{transform:rotate(180deg)}.advanced__content{padding-left:1.25rem;padding-right:1.25rem;padding-top:0.5rem;padding-bottom:0.5rem}.two-up{margin-bottom:0.75rem;display:flex;justify-content:space-between}.column{width:calc(50% - 6px)}.header{margin:0px;margin-bottom:0.5rem;padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.description{margin:0px;margin-bottom:1.5rem;padding:0px;font-size:1rem;color:var(--calcite-color-text-3)}.enrich-layer-container{background-color:var(--calcite-color-foreground-1);border:1px solid var(--calcite-color-border-input);padding:15px 15px 0px 15px}.enrich-switch{display:flex;justify-content:space-between}.enrich-title{display:flex;color:var(--calcite-color-text-1)}.enrich-radio-text{color:var(--calcite-color-text-3)}.radio{margin-bottom:0.75rem}.asterisk{color:var(--calcite-color-status-danger)}.notice{margin-top:0.5rem}.loader-overlay{overflow:hidden}.enrich-description{margin-bottom:0.75rem;margin-top:0px}"},70506:(e,t,i)=>{i.d(t,{e:()=>r});var o,n=i(99004),r={exports:{}};o=r.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",o="next";function n(e){if(e.toLowerCase()===o)return o;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function r(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function a(e){void 0===e&&(e=i);var t=r(e),a=n(e);if(a!==o&&3===a.major){var s=a.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function l(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||n(e)?a(e):e}function u(e,t){var i=d(e),o=c(i);return o||l(o=s(i),t),o}var p={};function h(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function v(e,t,i){var o;i&&(o=g(e,i));var n=function(){t(e),e.removeEventListener("load",n,!1),o&&e.removeEventListener("error",o,!1)};e.addEventListener("load",n,!1)}function g(e,t){var i=function(o){t(o.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}function m(e){void 0===e&&(e={}),p=e}function f(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window.require;return e&&e.on}function b(e){void 0===e&&(e={});var i={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var o=i.version,n=i.url||r(o);return new t.Promise((function(e,t){var r=f();if(r){var a=r.getAttribute("src");a!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(a,")."))):y()?e(r):v(r,e,t)}else if(y())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=i.css;s&&u(!0===s?o:s,i.insertCssBefore),v(r=h(n),(function(){r.setAttribute("data-esri-loader","loaded"),e(r)}),t),document.body.appendChild(r)}}))}function w(e){return new t.Promise((function(t,i){var o=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o.remove(),t(e)}))}))}function T(e,t){if(void 0===t&&(t={}),y())return w(e);var i=f(),o=i&&i.getAttribute("src");return!t.url&&o&&(t.url=o),b(t).then((function(){return w(e)}))}e.utils=t,e.loadModules=T,e.getScript=f,e.isLoaded=y,e.loadScript=b,e.setDefaultOptions=m,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(o)},2174:(e,t,i)=>{i.d(t,{a:()=>s,b:()=>a,c:()=>d,d:()=>u,e:()=>p,f:()=>g,g:()=>L,h:()=>m,i:()=>l,j:()=>b,k:()=>w,l:()=>f,m:()=>S,n:()=>T,o:()=>v,p:()=>y,q:()=>h,u:()=>c});var o=i(28926),n=i(94788);function r(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function a(e){var t;return r(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function s(e){var t;return r(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function l(e,t){return e.owner===t.username}function c(e,t){return l(e,t)||function(e,t){var i;if(null!=e.isAdmin)return!!e.isAdmin;const o=e.owner,n="admin"===e.itemControl,r=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(i=e.portal)||void 0===i?void 0:i.isPortal)&&!l(e,t)&&n&&o.includes("esri_")&&!r.includes(o))return!1;return n}(e,t)}const d=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),u=(e,t)=>`${(0,n.a)(t)}item.html?id=${e}`,p=(e,t)=>`${(0,n.g)(t)}/content/users/${e}`,h=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{});function v(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Spatiotemporal")}function g(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("View Service")}function m(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Hosted Service")}function f(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function b(e){var t;const i=null==e?void 0:e.portalItem;if(!i)return Promise.resolve(null);const r=i.portal,[a]=await(0,o.l)(["esri/request"]);if(null==r?void 0:r.user){return a(`${(0,n.g)(r)}community/users/${r.user.username}`,{query:{f:"json",token:null===(t=i.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,i;const o=null!==(i=null===(t=e.data)||void 0===t?void 0:t.groups)&&void 0!==i?i:[];return Promise.resolve(o)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function w(e){var t;const i=null==e?void 0:e.portalItem;if(!i)return Promise.resolve(null);const r=i.portal,[a]=await(0,o.l)(["esri/request"]);return a(`${(0,n.g)(r)}content/items/${i.id}/groups`,{query:{f:"json",token:null===(t=i.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,i,o,n,r,a;const s=[...null!==(i=null===(t=e.data)||void 0===t?void 0:t.admin)&&void 0!==i?i:[],...null!==(n=null===(o=e.data)||void 0===o?void 0:o.member)&&void 0!==n?n:[],...null!==(a=null===(r=e.data)||void 0===r?void 0:r.other)&&void 0!==a?a:[]];return Promise.resolve(s)}),(()=>Promise.reject()))}async function T(e,t,{relationshipType:i,direction:r}){const a=`${(0,n.g)(t)}content/items/${e}/relatedItems`,[s]=await(0,o.l)(["esri/request"]);return await s(a,{query:{f:"json",relationshipType:i,direction:r},method:"get",responseType:"json"})}function S(e,t){return null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>e.id===t.id&&e.capabilities.includes("updateitemcontrol")))))}const L=(e,t)=>`${t}/content/items/${e}`},7380:(e,t,i)=>{i.d(t,{a:()=>l,f:()=>r,i:()=>s,m:()=>a});var o=i(11246),n=i(86537);function r(e,t){let i;i=t?t.map((e=>e.type)):Object.keys(n.a);let o=[];return i.forEach((t=>{var i;(null===(i=n.a[t].fileExt)||void 0===i?void 0:i.indexOf(e))>=0&&o.push(n.a[t])})),o}function a(e){return e?(0,o.b)(e.flatMap((e=>{var t;return null===(t=n.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const s=e=>e/1024/1024>50,l=e=>e/1024/1024>20},58233:(e,t,i)=>{i.d(t,{C:()=>s,a:()=>d,b:()=>u,f:()=>l,g:()=>a,l:()=>r});var o=i(28926),n=i(78613);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function a(e){return function(e,t,i){const o=(0,n.c)(e,`[${t}]`);return o?o.getAttribute(t):i}(e,"dir","ltr")}const s={rtl:"arcgis--rtl"};async function l(e,t){const{api:i,type:n,places:r}=t||{};if(4===i){const[t]=await(0,o.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:r,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:n}))}const[a]=await(0,o.l)(["dojo/number"]);return a.format(e,{type:n,places:r,pattern:null==t?void 0:t.pattern})}const c={};function d(e){let t=document.documentElement.lang;const i="bs"===t;i&&(t="hr");const o={year:"numeric",month:i?"numeric":"short",day:"numeric"};return c[t]||(c[t]=new Intl.DateTimeFormat(t,o)),c[t].format(e)}function u(e,t,i){const o=null!=e?e:"en";return 1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o)?t.single.replace("${number}","1"):1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)?t.multiple.replace("${number}",`${i}`):t.unknown.replace("${number}",`${i}`)}},28926:(e,t,i)=>{i.d(t,{l:()=>n});var o=i(70506);const n=async(e,t)=>(await o.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},66488:(e,t,i)=>{i.d(t,{a:()=>p,b:()=>d,c:()=>s,d:()=>l,e:()=>h,f:()=>r,g:()=>u,h:()=>a,i:()=>v,q:()=>c});var o=i(46581),n=i(94788);function r(e){var t;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(t=e.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))}function a(e){var t,i;return e.isPortal?"modern"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)||function(e){var t;return e.isPortal&&"modernOnly"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)}(e):"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){const t=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=t}(e)}async function s(e){try{return{result:await(0,o.f)((()=>(0,o.r)(`${(0,n.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,o.f)((()=>(0,o.r)(`${(0,n.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function c(e={},t){return(0,o.r)(`${(0,n.g)(t)}/community/groups`,e)}const d=async(e,t)=>{var i;if(!e)return[];const r=`${(0,n.a)(null!==(i=t.restUrl)&&void 0!==i?i:t.portalUrl)}portals/self/servers`,a=await(0,o.f)((()=>(0,o.r)(r)),"selfServers",t.id);return null==a?void 0:a.servers},u=e=>p((0,n.c)(e)),p=e=>{var t;const i=`${(0,n.a)(null!==(t=(0,n.b)(e))&&void 0!==t?t:e)}info`;return(0,o.f)((()=>(0,o.r)(i,{},{addTokenManually:!1})),"portalInfo",i)};async function h(e,t){return!e.isPortal||await v(e,t)}async function v(e,t){if(!t||!e)return!1;if(!e.isPortal)return!0;const{result:i,error:n}=await(0,o.f)((()=>g(e,t)),"isPortalBackedBySDS",e.id);return!n&&i}const g=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await m(t,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},m=async(e,t)=>{var i;return(null!==(i=await d(e,t))&&void 0!==i?i:[]).filter((e=>e.isHosted))[0]}},59296:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>h,c:()=>p,d:()=>u,e:()=>v,f:()=>m,g:()=>g,h:()=>k,i:()=>c,j:()=>l,k:()=>f,l:()=>_,m:()=>b,n:()=>w,o:()=>C,p:()=>S,q:()=>T,r:()=>L,s:()=>F,t:()=>d,u:()=>x,v:()=>a,w:()=>s});var o=i(2174);const n=e=>{var t,i,o;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(i=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==i?i:null===(o=null==e?void 0:e.sourceJSON)||void 0===o?void 0:o.id};function r(e){return e&&!e.orgId}function a(e,t){return(0,o.u)(e,t)||"update"===e.itemControl||(0,o.c)([e],t)&&p(t)}function s(e,t){const i=(0,o.c)([e],t),n=(0,o.u)(e,t)||p(t)&&i,r=v(t)&&y(t);return!!(n||i&&r)}const l=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageLicenses"))};function c(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}const u=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("Developer")};function p(e){return"org_admin"===n(e)||"account_admin"===n(e)}function h(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function v(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function g(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function m(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function f(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:assignToGroups"))}const y=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))};function b(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function L(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function k(e,t,i,o){const n=o&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(o.type),r=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!p(t)&&!r||!(null==i?void 0:i.isPortal)&&!n)}function x(e){return!!e&&(!v(e)||v(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const F=({items:e,user:t,portal:i})=>{const n=e[0],r=n.owner;if(i.isPortal&&r!==t.username&&r.includes("esri_")&&!["esri_livingatlas"].includes(r))return!1;const s=(0,o.u)(n,t),l=v(t),c=P(t),d=a(n,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!l&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||b(e)||w(e)||!!t.canSharePublic&&T(e)}(t,i)||P(t));return s||d||(0,o.c)(e,t)&&c};function P(e){return C(e)||S(e)||L(e)}function _(e){const t=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>t.includes(e)))}},41168:(e,t,i)=>{i.d(t,{a:()=>r,g:()=>a});var o=i(46581),n=i(94788);const r=async e=>{try{return{result:await(0,o.r)(`${(0,n.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},a=async(e,t)=>await(0,o.f)((()=>r(e)),"subscriptionType",(0,o.b)(t))},99907:(e,t,i)=>{i.d(t,{a:()=>o,u:()=>n});const o=(0,i(11935).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),n=o.state}}]);