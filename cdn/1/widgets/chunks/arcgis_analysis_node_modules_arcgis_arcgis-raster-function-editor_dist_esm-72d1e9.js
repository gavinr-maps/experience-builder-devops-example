"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-72d1e9"],{821:(e,t,a)=>{a.r(t),a.d(t,{rfx_dte_feature_select:()=>n});var r=a(17002),i=(a(5294),a(62559)),l=a(14385),s=a(15517),o=a(15195),c=a(19562);a(23795),a(17902),a(56451),a(68852),a(588),a(71802),a(44345),a(33752),a(63716),a(55448),a(2924),a(11840),a(52373),a(440),a(66744),a(38146);const n=class{constructor(e){(0,r.r)(this,e),this.rfxArgumentChange=(0,r.c)(this,"rfxArgumentChange",7),this.loaded=!1,this.inputLayers=void 0,this.value=void 0,this.placeholderText=void 0,this.rfxBrowseLayerClick=void 0,this.mode=void 0,this.maxItems=5}async connectedCallback(){!1===this.loaded&&await this.load()}async componentWillLoad(){({strings:this.strings}=await(0,i.b)(this.hostElement,(0,r.g)(".")))}async getSelectedLayer(){return!1===this.loaded&&await this.load(),(0,l.o)(this.value)?Promise.resolve(void 0):this._getSelectedLayer(this.value.url)}async updateBrowsedLayer(e){return e.forEach((e=>{0===this.inputLayers.filter((t=>t.url===e.url||`${t.url}/${t.layerId}`===e.url)).length&&this.inputLayers.push(e),this.value={name:e.title,url:(0,s.b)(e)},this.rfxArgumentChange.emit({value:this.value})})),Promise.resolve(void 0)}async load(){(0,l.o)(this.value)||await this.processValueLayer(),this.loaded=!0}isLayerAddedToMap(e){return this.inputLayers.some((t=>t.url===e||`${t.url}/${t.layerId}`===e))}async processValueLayer(){const e=this.value?.url;if((0,l.o)(e))return;if(!this.isLayerAddedToMap(e)){const e=await(0,s.i)(this.value),t=`${e?.url}/${e?.layerId}`;void 0===e||this.isLayerAddedToMap(t)||(this.inputLayers=[...this.inputLayers,e])}const t=await this._getSelectedLayer(e),a=(0,s.b)(t);(0,l.o)(t)||(0,l.o)(a)||(this.value={name:t.title,url:a},this.rfxArgumentChange.emit({value:this.value}))}async _handleComboBoxChange(e){const t=e.target.value;if((0,l.o)(t))this.value=void 0;else{if("browse"===t)return this.value=void 0,void this.rfxBrowseLayerClick({referenceElement:this.hostElement,isFeatureSelectElement:!0});{const e=await this._getSelectedLayer(t);this.value={name:e.title,url:(0,s.b)(e)}}}this.rfxArgumentChange.emit({value:this.value})}async _getSelectedLayer(e){e=(0,s.g)(e);const t=this.inputLayers.find((t=>t.url===e||`${t.url}/${t.layerId}`===e));return await(t?.load()),t}render(){const e=(0,l.o)(this.value)?this.value:(0,s.g)(this.value?.url);let t=[];return this.inputLayers&&Array.isArray(this.inputLayers)&&(t=this.inputLayers.map(((t,a)=>{if(!(0,l.o)(t?.url)){const i=`${t.url}/${t.layerId}`;return(0,r.h)("calcite-combobox-item",{key:`feature-layer-item-${a}`,value:i,textLabel:t.title,selected:i.indexOf(e)>-1,icon:"feature-layer",scale:c.U.Scale})}}))),(0,r.h)("div",{class:"esriRFxFeatureSelect"},(0,r.h)("calcite-combobox",{label:"rfx-dte-feature-select-combobox",placeholder:this.placeholderText??this.strings.selectFeature,selectionMode:"single",scale:c.U.Scale,value:e,onCalciteComboboxChange:e=>this._handleComboBoxChange(e),clearDisabled:!0,overlayPositioning:this.mode===o.a.EDITOR?c.a.fixed:c.a.absolute,maxItems:this.mode===o.a.EDITOR?this.maxItems:0},(0,r.h)(r.F,null,(0,r.h)("calcite-combobox-item",{class:"browse-layer",key:"layer-item-browse",value:"browse",textLabel:this.strings.browseLayer,scale:c.U.Scale,icon:"search",filterDisabled:!0}),...t)))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}};n.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.browse-layer{--calcite-color-text-1:var(--calcite-color-text-link);--calcite-color-text-3:var(--calcite-color-text-link)}"},19562:(e,t,a)=>{a.d(t,{C:()=>i,U:()=>r,a:()=>l});const r={Scale:"s",PopoverTimer:60},i={s:"s",m:"m",l:"l"},l={absolute:"absolute",fixed:"fixed"}}}]);