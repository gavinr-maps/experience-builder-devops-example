/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-92f444.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-92f444"],{90367:(e,i,n)=>{n.d(i,{a:()=>u,b:()=>f,c:()=>r,d:()=>s,g:()=>m});var l=n(1991),o=n(82646),a=(n(70506),n(96432));function r(e){var i;const{layer:n,useFeatureReduction:a,mapView:r,selectedFields:s,modules:d}=o.s,u=n;e=e||{};const f=(0,o.p)((0,o.b)()),m=!!(0,l.i)(e.includeSizeVariable)&&e.includeSizeVariable;return d.PieChartCreator.createRenderer({layer:u,view:r,attributes:t(e.fieldInfos),pieChartScheme:e.pieChartScheme||(0,o.a1)(),includeSizeVariable:m,outlineOptimizationEnabled:(0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!(!(0,o.D)()||!m),sizeOptimizationEnabled:!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&a}).then((e=>{(0,o.o)(f,e.renderer,{notOpacity:!0});const i=(0,o.a)();if(["chart","chart-size"].indexOf(i)>-1){const i=(0,o.k)(),n=s.map((e=>e.field)),l=i.map((e=>e.field)),a=n.toString()===l.toString(),r=d.esriLang.clone(n),t=d.esriLang.clone(l);r.sort(),t.sort();r.toString()===t.toString()&&(e.renderer.attributes=(0,o.b)().attributes,a||e.renderer.attributes.sort(((e,i)=>n.indexOf(e.field)-n.indexOf(i.field))),e.renderer.othersCategory=(0,o.b)().othersCategory,e.renderer.holePercentage=(0,o.b)().holePercentage)}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function s(e){var i,n;const{layer:a,useFeatureReduction:r,mapView:s,modules:d}=o.s,u=a;e=e||{};const f=(0,o.b)(),m=(0,o.d)(f,"size"),c=(0,o.J)(f,"size"),b=(0,o.p)(f);let p,y=e.fieldInfos?e.fieldInfos:f.attributes.map((e=>({field:e.field,simpleFieldType:o.w.NUMBER}))),v=!0;if(e.fieldInfos&&(f.attributes.forEach(((i,n)=>{i.field!==e.fieldInfos[n].field&&(v=!1)})),v&&(delete e.fieldInfos,(0,o.V)(e))))return Promise.resolve({renderer:f.clone()});v&&(p=f.attributes.map((e=>e.field)));const z=(0,o.b)(),V=(null===(i=z.attributes)||void 0===i?void 0:i.length)?z.attributes[0].color:null,h=f.backgroundFillSymbol;let g=!1;m&&(g=m.minSize.stops?m.minSize.stops[0].size>m.maxSize.stops[0].size:m.minSize>m.maxSize);const I=y[0];return y[0]=y[1],y[1]=I,d.PieChartCreator.createRenderer({layer:u,view:s,attributes:t(y),pieChartScheme:e.pieChartScheme||(0,o.a1)(),includeSizeVariable:(0,l.i)(e.includeSizeVariable)?e.includeSizeVariable:!!m,outlineOptimizationEnabled:(0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!b.sizeOutlineVisVar,sizeOptimizationEnabled:(0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!b.sizeAutoVisVar,legendOptions:void 0,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)&&r}).then((i=>{var n;if(!e.fieldInfos&&m){const e=(0,o.d)(i.renderer,"size");if(e.minDataValue=m.minDataValue,e.maxDataValue=m.maxDataValue,c){const e=(0,o.J)(i.renderer,"size");e.minSliderValue=c.minSliderValue,e.maxSliderValue=c.maxSliderValue}}if(v&&b.opacityVisVar&&b.authOpacityVisVar&&(i.renderer.visualVariables=(0,o.T)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,o.U)(i.renderer,"opacity"),i.renderer.visualVariables.push(b.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(b.authOpacityVisVar)),(0,o.o)(b,i.renderer,{notOpacity:!0}),p&&i.renderer.attributes.sort(((e,i)=>{const n=p.indexOf(e.field),l=p.indexOf(i.field);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),v&&i.renderer.attributes.forEach(((e,i)=>{e.label=f.attributes[i].label})),i.renderer.size=f.size,i.renderer.holePercentage=f.holePercentage,i.renderer.othersCategory=f.othersCategory,V&&(null===(n=i.renderer.attributes)||void 0===n?void 0:n.length)&&i.renderer.attributes.map(((e,i)=>{v&&(e.color=f.attributes[i].color)})),h&&(i.renderer.backgroundFillSymbol=h),g){const e=(0,o.d)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){return e.map((e=>({field:e.field,label:d(e.field)})))}function d(e){const i=o.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}function u(e){var i;const{layer:n,useFeatureReduction:r,mapImageSublayer:s,mapView:t,modules:d}=o.s,u=n;e=e||{};const f=(0,o.a)(),m=(0,o.p)((0,o.b)()),c=e.fieldInfos?e.fieldInfos[0]:null,b=e.theme?e.theme:"high-to-low",p={layer:u,view:t,field:c.field,valueExpression:c.expression,valueExpressionTitle:c.expressionTitle,normalizationField:e.normalizationField,theme:b,legendOptions:e.legendOptions,colorOptions:{colorScheme:e.colorScheme||(0,o.R)(b),isContinuous:!!(0,l.i)(e.isContinuous)&&e.isContinuous},symbolOptions:(0,o.B)()?void 0:{symbolStyle:e.symbolOptions||"caret"},symbols:e.symbols||void 0,minValue:e.min,maxValue:e.max,sizeOptimizationEnabled:!s&&"above-and-below"!==b&&(!!(0,l.i)(e.sizeOptimizationEnabled)&&e.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&r};return d.UnivariateColorSizeCreator.createContinuousRenderer(p).then((i=>{if(!e.noReuse&&["color","color-size","color-size-age"].indexOf(f)>-1&&(0,a.s)(e)){const e=(0,o.d)((0,o.b)(),"color"),n=(0,o.J)((0,o.b)(),"color");e&&n&&b===n.univariateTheme&&(i.renderer.visualVariables=[e],m.sizeOutlineVisVar&&i.renderer.visualVariables.push(m.sizeOutlineVisVar),i.renderer.authoringInfo.visualVariables=[n],(0,o.S)(i.renderer))}return(0,o.o)(m,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function f(e){var i,n,a,r,s,t,d;const{layer:u,useFeatureReduction:f,mapImageSublayer:m,mapView:c,modules:b}=o.s,p=u;e=e||{};const y=(0,o.b)(),v=(0,o.d)(y,"color");if(v&&e.fieldInfos&&e.fieldInfos[0]&&e.fieldInfos[0].field==v.field&&e.fieldInfos[0].expression==v.valueExpression&&e.normalizationField===v.normalizationField&&(delete e.fieldInfos,(0,o.V)(e)))return Promise.resolve({renderer:y.clone()});const z=(0,o.p)(y),V=(0,o.d)(y,"size"),h=y.authoringInfo,g=(0,o.J)(y,"size");let I=e.fieldInfos?e.fieldInfos[0]:v?{field:v.field,expression:v.valueExpression,expressionTitle:v.valueExpressionTitle,simpleFieldType:(null===(i=(0,o.t)(v.field))||void 0===i?void 0:i.simpleFieldType)||o.w.NUMBER}:{field:y.field,expression:y.valueExpression,expressionTitle:y.valueExpressionTitle,simpleFieldType:(null===(n=(0,o.t)(y.field))||void 0===n?void 0:n.simpleFieldType)||o.w.NUMBER};const S=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:v?v.normalizationField:y.normalizationField,O=e.theme?e.theme:h?h.univariateTheme:"high-to-low",E="above-and-below"===h.univariateTheme,x="above-and-below"===O,B="custom"===h.univariateSymbolStyle;"custom"!==e.symbolStyle||e.symbols||(1===y.classBreakInfos.length?e.symbols=[b.esriLang.clone(y.classBreakInfos[0].symbol),b.esriLang.clone(y.classBreakInfos[0].symbol)]:e.symbols=[b.esriLang.clone(y.classBreakInfos[0].symbol),b.esriLang.clone(y.classBreakInfos[1].symbol)]);const F=(0,l.i)(e.isContinuous)?e.isContinuous:!(!E&&x)&&!!v,k="picture-marker"===(null===(a=y.classBreakInfos[0].symbol)||void 0===a?void 0:a.type)||"picture-marker"===(null===(r=y.classBreakInfos[2===y.classBreakInfos.length?1:0].symbol)||void 0===r?void 0:r.type),w=!E&&x||k&&F?"caret":x?e.symbolStyle?["single","custom"].indexOf(e.symbolStyle)>-1?void 0:e.symbolStyle:e.symbols?void 0:"custom"!==h.univariateSymbolStyle?h.univariateSymbolStyle:void 0:void 0,q=!(k&&F)&&("custom"===e.symbolStyle||!e.symbolStyle&&B);let C=x&&!(0,o.B)()?{symbolStyle:w,symbols:w?void 0:2===(null===(s=e.symbols)||void 0===s?void 0:s.length)?{below:e.symbols[0],above:e.symbols[1]}:1===(null===(t=e.symbols)||void 0===t?void 0:t.length)?void 0:q?{below:y.classBreakInfos[0].symbol,above:y.classBreakInfos[2===y.classBreakInfos.length?1:0].symbol}:void 0}:void 0;(null==C?void 0:C.symbolStyle)||(null==C?void 0:C.symbols)||(C=void 0),F&&(null==C?void 0:C.symbols)&&((0,o.W)(null==C?void 0:C.symbols.below,new b.esriColor([0,0,0,.5])),(0,o.W)(null==C?void 0:C.symbols.above,new b.esriColor([0,0,0,.5])));const T=y.defaultSymbol,R=y.defaultLabel,P=y.backgroundFillSymbol;let D=!1;O===(null==h?void 0:h.univariateTheme)&&(0,l.i)(V.minSize)&&(D=V.minSize.stops?V.minSize.stops[0].size>V.maxSize.stops[0].size:V.minSize>V.maxSize);let L=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0])&&(L=!0);const U=x&&!E||!x&&E,M=e.discardMinMax?void 0:(0,l.i)(e.min)?e.min:L?void 0:g?g.minSliderValue:void 0,W=e.discardMinMax?void 0:(0,l.i)(e.max)?e.max:L?void 0:g?g.maxSliderValue:void 0,j="below"===h.univariateTheme,_="below"===O,N=_&&!j||!_&&j,Q=e.colorScheme||!U&&(0,o.R)(O),A={layer:p,view:c,field:I.field,valueExpression:I.expression,valueExpressionTitle:I.expressionTitle,theme:O,legendOptions:e.legendOptions||V.legendOptions,colorOptions:{colorScheme:Q,isContinuous:F},symbolOptions:C,normalizationField:S,minValue:M,maxValue:W,sizeOptimizationEnabled:!m&&"above-and-below"!==O&&((0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!z.sizeAutoVisVar),defaultSymbolEnabled:(0,l.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!y.defaultSymbol,forBinning:"binning"===(null===(d=p.featureReduction)||void 0===d?void 0:d.type)&&f};return b.UnivariateColorSizeCreator.createContinuousRenderer(A).then((i=>{var n,l,a,r,s;if(e.discardMinMax){const e=(0,o.d)(y,"color"),l=(0,o.d)(i.renderer,"color");null==e||e.stops.forEach(((e,i)=>e.value=null==l?void 0:l.stops[i].value));const a=(0,o.d)(y,"size"),r=(0,o.d)(i.renderer,"size");"above-and-below"===h.univariateTheme?null===(n=a.stops)||void 0===n||n.forEach(((e,i)=>{r.stops&&(e.value=r.stops[i].value)})):(a.minDataValue=r.minDataValue,a.maxDataValue=r.maxDataValue)}if((0,o.o)(z,i.renderer),x){const n=(0,o.Q)(i.renderer.classBreakInfos[0].symbol),r=i.renderer.classBreakInfos[1]?(0,o.Q)(i.renderer.classBreakInfos[1].symbol):n;if(!w)if(1===(null===(l=e.symbols)||void 0===l?void 0:l.length)&&1===i.renderer.classBreakInfos.length)i.renderer.classBreakInfos[0].symbol=e.symbols[0];else if(2===(null===(a=e.symbols)||void 0===a?void 0:a.length)&&1===i.renderer.classBreakInfos.length){const e=b.esriLang.clone(y.classBreakInfos[0].symbol);i.renderer.classBreakInfos[0].symbol=e}else if("single"===e.symbolStyle&&2===i.renderer.classBreakInfos.length){let e=b.esriLang.clone(y.classBreakInfos[0].symbol);i.renderer.classBreakInfos[0].symbol=e.clone(),(0,o.W)(e,(0,o.Q)(i.renderer.classBreakInfos[1].symbol)),i.renderer.classBreakInfos[1].symbol=e,i.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let e=b.esriLang.clone(y.classBreakInfos[0].symbol);i.renderer.classBreakInfos[0].symbol=e,i.renderer.classBreakInfos[1]&&(e=y.classBreakInfos[1]?b.esriLang.clone(y.classBreakInfos[1].symbol):b.esriLang.clone(y.classBreakInfos[0].symbol),i.renderer.classBreakInfos[1].symbol=e)}const s=(0,o.d)(i.renderer,"color");if(s){const e=new b.esriColor([0,0,0,.5]);(0,o.W)(i.renderer.classBreakInfos[0].symbol,e),i.renderer.classBreakInfos[1]&&(0,o.W)(i.renderer.classBreakInfos[1].symbol,e)}else v||s?((0,o.W)(i.renderer.classBreakInfos[0].symbol,n),i.renderer.classBreakInfos[1]&&(0,o.W)(i.renderer.classBreakInfos[1].symbol,r)):((0,o.W)(i.renderer.classBreakInfos[0].symbol,(0,o.Q)(y.classBreakInfos[0].symbol)),(0,o.W)(i.renderer.classBreakInfos[1].symbol,(0,o.Q)(y.classBreakInfos[1].symbol)))}else x||(1===(null===(r=e.symbols)||void 0===r?void 0:r.length)?i.renderer.classBreakInfos[0].symbol=e.symbols[0]:1===(null===(s=y.classBreakInfos)||void 0===s?void 0:s.length)&&(i.renderer.classBreakInfos[0].symbol=y.classBreakInfos[0].symbol));if(E&&x&&!L){const e=(0,o.d)(i.renderer,"size"),n=(0,o.d)(i.renderer,"color");e.stops=b.esriLang.clone(V.stops),n&&n.stops.forEach(((e,i)=>{e.value=V.stops[i].value})),2==i.renderer.classBreakInfos.length&&(i.renderer.classBreakInfos[0].maxValue=V.stops[2].value,i.renderer.classBreakInfos[1].minValue=V.stops[2].value)}if(N&&Q&&v){const e=(0,o.d)(i.renderer,"color"),n=v.stops.length-1;e.stops.forEach(((e,i)=>{e.color=v.stops[n-i].color}))}if(T&&(i.renderer.defaultSymbol=T,i.renderer.defaultLabel=R),i.renderer.backgroundFillSymbol=P||void 0,D){const e=(0,o.d)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function m(){const{mapView:e}=o.s,i=(0,o.b)(),n=(0,o.d)(i,"color"),l=(0,o.d)(i,"size"),a=e.scale,{minSize:r,maxSize:s}=l;let t;if(l.stops)t=n.stops.map(((e,i)=>{const n=l.stops[i];return{color:e.color,size:n.size,value:n.value}}));else{const e=n.stops.length-1;if("number"==typeof r)t=n.stops.map(((i,n)=>({color:i.color,value:i.value,size:0===n?r:n===e?s:null})));else{let i,o;const d=r.stops.length-1;a>r.stops[d].value?(i=r.stops[d].size,o=s.stops[d].size):r.stops.forEach(((e,n)=>{a<=e.value&&(i=e.size,o=s.stops[n].size)}));const u=l.minDataValue,f=l.maxDataValue,m=(f-u)/4;t=n.stops.map(((n,l)=>({color:n.color,value:0===l?u:l===e?f:u+l*m,size:0===l?i:l===e?o:void 0})))}}return t}},99680:(e,i,n)=>{n.d(i,{a:()=>r,c:()=>a,g:()=>s});var l=n(1991),o=n(82646);n(70506);function a(e){var i;const{layer:n,useFeatureReduction:a,mapView:r,selectedFields:s,modules:d}=o.s,u=n;e=e||{};const f=(0,o.p)((0,o.b)());return d.PredominanceCreator.createRenderer({layer:u,view:r,fields:t(e.fieldInfos),predominanceScheme:e.predominanceScheme||(0,o._)(),includeOpacityVariable:!(0,l.i)(e.includeOpacityVariable)||(0,l.i)(e.includeOpacityVariable),includeSizeVariable:!!(0,l.i)(e.includeSizeVariable)&&e.includeSizeVariable,outlineOptimizationEnabled:(0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,o.D)(),sizeOptimizationEnabled:!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)&&a}).then((i=>{(0,o.o)(f,i.renderer,{notOpacity:!0});const n=(0,o.a)();if(!(0,l.i)(e.includeOpacityVariable)&&["predominance","predominance-size"].indexOf(n)>-1){const n=(0,o.k)(),l=s.map((e=>e.field)).sort(),a=n.map((e=>e.field)).sort();if(l.toString()===a.toString()){const n=(0,o.d)((0,o.b)(),"opacity"),l=(0,o.J)((0,o.b)(),"opacity");i.renderer.visualVariables=(0,o.T)(i.renderer,"opacity")||[],n&&i.renderer.visualVariables.push(n),i.renderer.authoringInfo.visualVariables=(0,o.U)(i.renderer,"opacity")||[],l&&i.renderer.authoringInfo.visualVariables.push(l);const a=i.renderer.uniqueValueInfos[0].symbol.clone();i.renderer.uniqueValueInfos=(0,o.b)().uniqueValueInfos,(0,o.D)()&&("predominance-size"===(0,o.a)()&&!0!==e.includeSizeVariable?(0,o.$)(i.renderer,a):"predominance"===(0,o.a)()&&!0===e.includeSizeVariable&&(0,o.a0)(i.renderer,a))}}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function r(e){var i;const{layer:n,useFeatureReduction:a,mapView:r,modules:s}=o.s,d=n;e=e||{};const u=(0,o.b)(),f=(0,o.d)(u,"size"),m=(0,o.J)(u,"size"),c=(0,o.p)(u);let b,p,y=e.fieldInfos?e.fieldInfos:u.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:o.w.NUMBER}))),v=!0;if(e.fieldInfos&&(u.uniqueValueGroups[0].classes.forEach(((i,n)=>{i.values[0].value!==e.fieldInfos[n].field&&(v=!1)})),v&&(delete e.fieldInfos,(0,o.V)(e))))return Promise.resolve({renderer:u.clone()});v&&(b=u.uniqueValueInfos.map((e=>e.value)));const z=(0,o.b)();p=z.uniqueValueInfos&&z.uniqueValueInfos.length?z.uniqueValueInfos[0].symbol:null;const V=u.defaultSymbol,h=u.defaultLabel,g=u.backgroundFillSymbol;let I=!1;f&&(I=f.minSize.stops?f.minSize.stops[0].size>f.maxSize.stops[0].size:f.minSize>f.maxSize);const S=y[0];return y[0]=y[1],y[1]=S,s.PredominanceCreator.createRenderer({layer:d,view:r,fields:t(y),predominanceScheme:e.predominanceScheme||(0,o._)(),includeOpacityVariable:(0,l.i)(e.includeOpacityVariable)?e.includeOpacityVariable:!!c.opacityVisVar,includeSizeVariable:(0,l.i)(e.includeSizeVariable)?e.includeSizeVariable:!!f,outlineOptimizationEnabled:(0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!c.sizeOutlineVisVar,sizeOptimizationEnabled:(0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!c.sizeAutoVisVar,legendOptions:void 0,defaultSymbolEnabled:(0,l.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!V,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a}).then((i=>{const n=i.renderer.uniqueValueInfos[0].symbol.clone();if(!e.fieldInfos&&f){const e=(0,o.d)(i.renderer,"size");if(e.minDataValue=f.minDataValue,e.maxDataValue=f.maxDataValue,m){const e=(0,o.J)(i.renderer,"size");e.minSliderValue=m.minSliderValue,e.maxSliderValue=m.maxSliderValue}}if(!(0,l.i)(e.includeOpacityVariable)&&v&&c.opacityVisVar&&c.authOpacityVisVar&&(i.renderer.visualVariables=(0,o.T)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,o.U)(i.renderer,"opacity"),i.renderer.visualVariables.push(c.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(c.authOpacityVisVar)),(0,o.o)(c,i.renderer,{notOpacity:!0}),b&&i.renderer.uniqueValueInfos.sort(((e,i)=>{const n=b.indexOf(e.value),l=b.indexOf(i.value);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),v&&i.renderer.uniqueValueInfos.forEach(((e,i)=>{e.label=u.uniqueValueInfos[i].label})),p&&i.renderer.uniqueValueInfos&&i.renderer.uniqueValueInfos.length){const l=i.renderer.uniqueValueInfos.slice();l.map(((e,i)=>{let n;v?n=u.uniqueValueInfos[i].symbol:(n=p.clone(),(0,o.W)(n,(0,o.Q)(e.symbol))),e.symbol=n})),i.renderer.uniqueValueInfos=l,(0,o.D)()&&("predominance-size"===(0,o.a)()&&!0!==e.includeSizeVariable?(0,o.$)(i.renderer,n):"predominance"===(0,o.a)()&&!0===e.includeSizeVariable&&(0,o.a0)(i.renderer,n))}if(V&&(i.renderer.defaultSymbol=V,i.renderer.defaultLabel=h),g&&(i.renderer.backgroundFillSymbol=g),I){const e=(0,o.d)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function s(e){var i;const{layer:n,useFeatureReduction:l,mapView:a,modules:r}=o.s,s=n;return e=e||{},r.predominantCategories({layer:s,view:a,fields:e.fieldInfos.map((e=>e.field)),forBinning:"binning"===(null===(i=s.featureReduction)||void 0===i?void 0:i.type)&&l})}function t(e){return e.map((e=>({name:e.field,label:d(e.field)})))}function d(e){const i=o.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}},93143:(e,i,n)=>{n.d(i,{a:()=>r,c:()=>a,u:()=>s});var l=n(1991),o=n(82646);n(70506);function a(e){var i,n;const{layer:a,useFeatureReduction:r,mapImageSublayer:s,mapView:t,modules:d}=o.s,u=a,f=(0,o.a)();let m=e.relationshipScheme;if(!m&&["relationship","relationship-size"].indexOf(f)>-1&&(m=(0,o.a4)()),e=e||{},"relationship-size"===f){const n=(0,o.b)().clone(),l=n.authoringInfo;if(l&&(null===(i=e.fieldInfos)||void 0===i?void 0:i.length)>1&&e.fieldInfos[0].field==l.field1.field&&e.fieldInfos[1].field==l.field2.field){if(n.visualVariables=(0,o.T)(n,"size"),n.authoringInfo.visualVariables=(0,o.U)(n,"size"),(0,o.D)()){const e=(0,o.q)(),i=n.uniqueValueInfos.slice();i.map((i=>{const n=(0,o.Q)(i.symbol);i.symbol=e.clone(),(0,o.W)(i.symbol,n)})),n.uniqueValueInfos=i}return Promise.resolve({renderer:n})}}const c=(0,o.p)((0,o.b)()),b={layer:u,view:t,field1:{field:e.fieldInfos[0].field},field2:{field:e.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:m,outlineOptimizationEnabled:!s&&(!(0,l.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!s&&(!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)&&r};return d.RelationshipCreator.createRenderer(b).then((e=>((0,o.o)(c,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function r(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,modules:t}=o.s,d=n;e=e||{};const u=(0,o.b)(),f=(0,o.a)(),m=u.authoringInfo,c=(0,o.d)(u,"size");if(e.fieldInfos&&e.fieldInfos.length>1&&e.fieldInfos[0].field==m.field1.field&&e.normalizationField1===m.field1.normalizationField&&e.fieldInfos[1].field==m.field2.field&&e.normalizationField2===m.field2.normalizationField&&(delete e.fieldInfos,delete e.normalizationField1,delete e.normalizationField2,(0,o.V)(e)&&!c))return Promise.resolve({renderer:u.clone()});let b=e.relationshipScheme;!b&&["relationship","relationship-size"].indexOf(f)>-1&&(b=(0,o.a4)());const p=(0,o.p)(u);let y=e.fieldInfos?e.fieldInfos[0]:{field:m.field1.field,simpleFieldType:o.w.NUMBER},v=e.fieldInfos?e.fieldInfos[1]:{field:m.field2.field,simpleFieldType:o.w.NUMBER};const z=void 0!==e.normalizationField1?e.normalizationField1:m.field1.normalizationField,V=void 0!==e.normalizationField2?e.normalizationField2:m.field2.normalizationField,h=u.uniqueValueInfos&&u.uniqueValueInfos.length?u.uniqueValueInfos[0].symbol:null,g=u.defaultSymbol,I=u.defaultLabel,S=e.numClasses?e.numClasses:m.numClasses,O={layer:d,view:s,field1:{field:y?y.field:u.field,normalizationField:z},field2:{field:v?v.field:u.field,normalizationField:V},classificationMethod:e.classificationMethod?e.classificationMethod:"manual"!==m.classificationMethod?m.classificationMethod:"quantile",numClasses:S,focus:e.focus?e.focus:m.focus,relationshipScheme:b,outlineOptimizationEnabled:!r&&((0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!p.sizeAutoVisVar),legendOptions:e.legendOptions?e.legendOptions:u.legendOptions,defaultSymbolEnabled:(0,l.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a};return t.RelationshipCreator.createRenderer(O).then((e=>{if((0,o.o)(p,e.renderer),h){e.renderer.uniqueValueInfos.forEach((e=>{const i=h.clone();(0,o.W)(i,(0,o.Q)(e.symbol)),e.symbol=i}))}return(0,o.b)().uniqueValueInfos.forEach((i=>{const n=e.renderer.uniqueValueInfos.find((e=>i.value===e.value));n&&(n.label=i.label)})),g&&(e.renderer.defaultSymbol=g,e.renderer.defaultLabel=I),Promise.resolve(e)}),(e=>Promise.reject(e)))}function s(e){const{modules:i}=o.s;e=e||{};const n=(0,o.b)(),l=n.authoringInfo;return i.RelationshipCreator.updateRenderer({field1:l.field1,field2:l.field2,numClasses:e.numClasses?e.numClasses:l.numClasses,focus:e.focus?"none"===e.focus?null:e.focus:l.focus,colors:e.colors,renderer:n})}},64164:(e,i,n)=>{n.d(i,{a:()=>r,b:()=>d,c:()=>a,d:()=>f,e:()=>t,f:()=>c,g:()=>u,s:()=>m});var l=n(1991),o=n(82646);n(70506);function a(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,modules:t}=o.s,d=n;e=e||{};const u=(0,o.p)((0,o.b)()),f=e.fieldInfos[0];return t.TypeCreator.createRenderer({layer:d,view:s,field:f.field,valueExpression:f.expression,valueExpressionTitle:f.expressionTitle,numTypes:e.numTypes||10,sortBy:e.sortBy||"count",typeScheme:e.typeScheme||(0,o.a2)(),returnAllCodedValues:!0,outlineOptimizationEnabled:!r&&(!(0,l.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!0,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a}).then((i=>{if(i.excludedUniqueValueInfos.length||(i.renderer.defaultLabel=null,i.renderer.defaultSymbol=null),m(e)){const e=(0,o.b)().clone(),n=(0,o.d)(e,"size","auto"),l=(0,o.d)(e,"size","outline");if(i.renderer.visualVariables=[],n&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(n)),l&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(l)),i.renderer.uniqueValueInfos=e.uniqueValueInfos,i.renderer.field2=e.field2,i.renderer.field3=e.field3,(0,o.D)()&&"type-size"===(0,o.a)()){const e=(0,o.q)(),n=i.renderer.uniqueValueInfos.slice();n.map((i=>{const n=(0,o.Q)(i.symbol);i.symbol=e.clone(),(0,o.W)(i.symbol,n)})),i.renderer.uniqueValueInfos=n}}return(0,o.o)(u,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function r(e){var i;const{layer:n,useFeatureReduction:a,mapImageSublayer:r,mapView:s,modules:t}=o.s,d=n;let u=(e=e||[]).fieldInfos?e.fieldInfos[0]:null;const f=(0,o.b)(),m=(0,o.p)(f),c=f.uniqueValueInfos&&f.uniqueValueInfos.length?f.uniqueValueInfos[0].symbol:null,b=f.defaultSymbol,p=f.defaultLabel,y=u&&(u.field!=f.field||u.expression!=f.valueExpression);return e=e||{},t.TypeCreator.createRenderer({layer:d,view:s,field:u?u.field:f.field,valueExpression:u?u.expression:f.valueExpression,valueExpressionTitle:u?u.expressionTitle:f.valueExpressionTitle,numTypes:e.numTypes||(y?10:f.uniqueValueInfos.length),sortBy:e.sortBy||"count",typeScheme:(0,o.a2)(),outlineOptimizationEnabled:!r&&((0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!m.sizeAutoVisVar),legendOptions:e.legendOptions||f.legendOptions,defaultSymbolEnabled:(0,l.i)(e.defaultSymbolEnabled)||!!f.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&a}).then((e=>{if((0,o.o)(m,e.renderer),c&&e.renderer.uniqueValueInfos&&e.renderer.uniqueValueInfos.length){const i=e.renderer.uniqueValueInfos.slice();i.map((e=>{const i=c.clone();(0,o.W)(i,(0,o.Q)(e.symbol)),e.symbol=i})),e.renderer.uniqueValueInfos=i}return b&&(e.renderer.defaultSymbol=b,e.renderer.defaultLabel=p),Promise.resolve(e)}),(e=>Promise.reject(e)))}const s={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function t(e,i){const{allUniqueValues:n,locale:l,mapView:a,modules:r}=o.s;if(r.intl.setLocale(l),(null==i?void 0:i.simpleFieldType)===o.w.DATE){const i=n&&r.rendererSupportUtils.calculateDateFormatInterval(n.map((e=>e.value)));let l=new Date(e);if("unknown"===a.timeZone)return r.intl.formatDate(l,Object.assign(Object.assign({},r.intl.convertDateFormatToIntlOptions(i?s[i]:"long-month-day-year")),{timeZone:"utc",timeZoneName:"shortOffset"}));{const e=new Date(l.getTime()+6e4*l.getTimezoneOffset());return r.intl.formatDate(e,Object.assign(Object.assign({},r.intl.convertDateFormatToIntlOptions(i?s[i]:"long-month-day-year")),{timeZone:a.timeZone}))}}return r.intl.formatDateOnly(e,r.intl.convertDateFormatToIntlOptions("long-month-day-year"))}function d(){const{allUniqueValues:e,modules:i}=o.s,n=(0,o.b)();if(!(null==e?void 0:e.length)||!(0,l.i)(e[0].count))return[];let a=[];n.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),a=a.concat(i)}));return e.filter((e=>-1===a.indexOf(null===e.value?"<Null>":`${e.value}`))).map((e=>new i.UniqueValueClass({label:e.label,symbol:e.symbol,values:[{value:e.value}]})))}function u(){const{allUniqueValues:e}=o.s,i=(0,o.b)();if(!(null==e?void 0:e.length)||!(0,l.i)(e[0].count))return[];let n=[];i.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push("<Null>"===e.value?"null":`${e.value}`))))),n=n.concat(i)}));return e.filter((e=>-1===n.indexOf(`${e.value}`)))}function f(e){const{strings:i}=o.s;let n=1,l=i.panels.type.defaultGroupName.replace("${number}",n.toString());for(;e.find((e=>e.heading===l));)l=i.panels.type.defaultGroupName.replace("${number}",(++n).toString());return l}function m(e){if(["type","type-size"].indexOf((0,o.a)())>-1){const i=(0,o.b)(),n={field:i.field,expression:i.valueExpression,expressionTitle:i.valueExpressionTitle};if((0,o.x)(e.fieldInfos[0],n))return!0}return!1}function c(e,i){const{modules:n}=o.s,l=(0,o.b)(),a=(0,o.t)(l.field),r=a&&["small-integer","integer","big-integer","long"].indexOf((0,o.z)(a.layerField))>-1,s=(null==a?void 0:a.simpleFieldType)===o.w.DATE,d="date-only"===(0,o.z)(a.layerField),u=[],f=(0,o.a2)();let m=0;e.classes.forEach(((l,c)=>{var b;if(1===l.values.length||i&&-1===i.indexOf(c))u.push(l),m++;else if(!i||i.indexOf(c)>-1){const i=["simple-marker","simple-line","simple-fill","cim"].indexOf(null===(b=l.symbol)||void 0===b?void 0:b.type)>-1?l.symbol:(0,o.q)((0,o.a)());l.values.forEach(((l,c)=>{const b=n.esriLang.clone(i);if(c>0)if(f){const i=f.colors[(e.classes.length+m)%f.colors.length];i&&(0,o.W)(b,i)}else{const i=(0,o.a3)().colors,l=new n.esriColor(i[(e.classes.length+m)%10]);l&&(0,o.W)(b,l)}const p=s||d?t(l.value,a):(null==a?void 0:a.simpleFieldType)===o.w.NUMBER?n.intl.formatNumber(r?parseInt(l.value):parseFloat(l.value)):l.value;u.push(new n.UniqueValueClass({values:[new n.UniqueValue({value:l.value})],label:p,symbol:b})),m++}))}})),e.classes=u}}}]);