/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2"],{99004:(e,t,r)=>{r.d(t,{c:()=>a,g:()=>n});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},24733:(e,t,r)=>{r.d(t,{a:()=>f,i:()=>p});var a=r(94788),n=r(7652),i=r(31670),o=r(51325),s=r(71700),c=r(86537),l=r(11163),d=r(39274),u=r(60420);const p=async(e,t)=>{var r;const{existingItemType:p,portal:f,existingItemPublishType:h}=t;i.c.initialFolder=null!==(r=await(0,n.e)(e.folderId||e.ownerFolder,e.itemOwner))&&void 0!==r?r:(0,n.f)(e.itemOwner);let y=e.type;"GeoJSON"===y&&(y="GeoJson"),o.i.title=e.title,o.i.categories=e.categories;const b=e.tags;switch(Array.isArray(b)?o.i.tags=b||[]:o.i.tags=(null!=b?b:"").split(","),s.a.id=e.id,s.a.type=y,s.a.fileName=e.name,s.a.existingItem=e,s.a.enablePublishing="tileLayer"!==p,s.a.newItemMode=p,p){case"file":s.a.extension=c.a[y].fileExt[0];break;case"tileLayer":const{id:t,url:r,title:n}=e,[{layers:i,tables:o,serviceInfo:p}]=await Promise.all([(0,d.q)(r,(0,a.g)(f),!0)]),{result:b}=await(0,u.f)({itemId:t,itemUrl:r,publishType:"vectorTiles"===h?"vector":"raster",portal:f,fullLayers:i});if(s.a.sourceTitle=n,s.a.tileLayerPublishType=h,"3dTiles"===s.a.tileLayerPublishType){s.a.tilesLayer3dTilesLayerType=l.D;break}s.a.tileLayerData=b,s.a.tileAutoCreation=!0,s.a.tileLayerBasemapType="standard",s.a.tileLayerBasemapUrl="",s.a.tileLayerFromFeatureLayer=!0,s.a.tileLayerLayers=i,s.a.tileLayerTables=o,s.a.tileLayerServiceInfo=p}},f=e=>{s.a.newItemMode="dataStore",s.a.type="Data Store",(null==e?void 0:e.portal.isPortal)||(s.a.typeKeywords=["Data Store connection"])}},22777:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select:()=>d});var a=r(7263),n=r(66488),i=r(31670),o=r(71700),s=r(99907),c=r(79468),l=r(24733);r(46581),r(28926),r(70506),r(99004),r(94788),r(65215),r(11935),r(15437),r(67575),r(7652),r(51325),r(86537),r(11163),r(39274),r(49712),r(90079),r(57399),r(50852),r(2174),r(73596),r(91253),r(43780),r(59673),r(59296),r(60420);const d=class{constructor(e){(0,a.r)(this,e),this.newItemUpdatePage=(0,a.c)(this,"newItemUpdatePage",7),this.options={folder:{page:"dataStoreSelectFolder",enabled:!0},database:{page:"dataStoreSelectDatabaseType",enabled:!0},cloud:{page:"dataStoreSelectCloud",enabled:!0},bdfs:{page:"dataStoreSelectBdfs",enabled:!1}},this.cloudOptions=["amazon","azure"],this.databaseOptions=["bigQuery","snowflake"],this.selected="folder",this.pipelineCloudSelection="amazon",this.pipelineDatabaseSelection="bigQuery",this.serverList=[]}async componentWillLoad(){const e=i.c.portal,t=i.c.user;(0,l.a)({portal:i.c.portal}),this.i18n=s.u.i18n.dataStoreSelect,this.isPortal=i.c.portal.isPortal,this.isPortal?this.selected="folder":this.selected="database",this.tileStrings=s.u.i18n.dataStoreSelectDatabase.pipelineProviders,this.serverList=await(0,n.b)(t,e),this.filterServers()}filterServers(){if(!i.c.portal.isPortal)return this.options.folder.enabled=!1,this.options.database.enabled=!0,this.options.cloud.enabled=!0,void(this.options.bdfs.enabled=!1);const e=this.serverList.filter((function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()}));e.length&&(o.a.hostingServer=e[0]);const t=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("GEOANALYTICS")>-1})),r=i.c.config.bdfsEnabled;this.options.bdfs.enabled=!!(null==t?void 0:t.length)&&r;const a=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("KNOWLEDGE")>-1})),n=i.c.config.noSQLEnabled;o.a.noSqlEnabled=!!(null==a?void 0:a.length)&&n&&!(0,c.i)()}handleNext(){let e;const t=this.selected;o.a.addDataStoreType=t,o.a.dataStoreSelectServerList=this.serverList,this.isPortal?e=this.options[t].page:"cloud"===this.selected?(o.a.addDataStoreType="cloud",o.a.provider=this.pipelineCloudSelection,e="dataStoreSelectCloudCredentials"):(o.a.addDataStoreType="database",o.a.databaseProvider=this.pipelineDatabaseSelection,e="dataStoreDatabaseCredentials"),this.newItemUpdatePage.emit(e)}render(){const{i18n:e,options:t,cloudOptions:r,databaseOptions:n,tileStrings:i}=this;let s="cloud"===this.selected?r:n;return(0,a.h)("div",{key:"9af054314e190a4efd469b6e2ec34de94baa7ade"},(0,a.h)("arcgis-new-item-description",{key:"74645533d006a29d545a4607886d3b01e322dc72",header:e.heading}),(0,a.h)("calcite-tile-select-group",{key:"d9054c2d5550784e3040069d4fc21e25584d0967",layout:"vertical",class:"tile-select-group"},Object.keys(t).map((r=>{let n;return n=this.isPortal?o.a.noSqlEnabled?e.options.database.descriptionNoSql:e.options.database.description:e.databaseDescriptionForOnline,t[r].enabled&&(0,a.h)("calcite-tile-select",{key:r,class:"tile-select",checked:this.selected===r,heading:e.options[r].title,description:"database"===r?n:e.options[r].description,name:"data-store-selection","input-enabled":!0,width:"full",type:"radio",value:r,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})}))),!this.isPortal&&(0,a.h)("div",{key:"44125d5667fec869562be65eaefe9305fd9d63cf",class:"dynamic-select"},(0,a.h)("arcgis-new-item-description",{key:"57f0ed6dcb7b64bdb7c7bca11718c8e010be2bb1",class:"dynamic-header",header:"cloud"===this.selected?e.subOptionsCloudDescription:e.subOptionsDatabaseDescription}),(0,a.h)("calcite-tile-select-group",{key:"85ebe2b0d04f5e0a2b4c1fbe5ed19d35d0ecdc54",layout:"vertical"},s.map((e=>(0,a.h)("calcite-tile-select",{key:e,"input-enabled":!0,checked:s[0]===e,width:"full",type:"radio",value:e,heading:i[e].title,description:i[e].description,onCalciteTileSelectChange:e=>{"cloud"===this.selected?this.pipelineCloudSelection=e.target.value:this.pipelineDatabaseSelection=e.target.value}}))))))}};d.style=".tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.dynamic-header{margin-bottom:1.5rem;margin-top:1.5rem;display:block}"},79468:(e,t,r)=>{r.d(t,{a:()=>f,b:()=>h,c:()=>p,d:()=>u,e:()=>o,f:()=>s,g:()=>g,h:()=>d,i:()=>w,j:()=>y,k:()=>T,l:()=>c,m:()=>l});var a=r(46581),n=r(31670),i=r(15437);function o(e,t){const r={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(r.clientPath=e.publisherFolderPath,r.info.path=e.newServerFolderPath,r.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(r.clientPath=e.publisherFolderPath,r.provider="UserManaged",r.info.datastoreConnectionType="replicated",r.info.fileServerPath=e.nfsSharePath,r.info.fileServerHost=e.nfsHostName,r.info.fileServerType="nfs"),r}function s(e,t){const r={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(r.info.connectionString=e.serverConnectionString,r.info.clientConnectionString=e.publisherConnectionString,r.info.dataStoreConnectionType="replicated"):"bigQuery"===e.databaseProvider||"snowflake"===e.databaseProvider?r.info.JDBCConnection=e.jdbcConnection:r.info.connectionString=e.publisherConnectionString,r}const c=async(e,t,r,a)=>{let n,i;if((null==r?void 0:r.length)>0){try{i=JSON.parse(r)}catch(e){return{error:{code:"invalidJSON"}}}n=function(e,t){const{type:r,project_id:a,private_key_id:n,private_key:i,client_email:o,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}=t,p={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:r,project_id:a,private_key_id:n,private_key:i,client_email:o,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}};return p}(e,i)}else(null==a?void 0:a.length)>0&&(n=function(e,t,r){const a={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:r};return a}(e,t,a));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{JDBCConnection:n}}}};function l(e){const{user:t,password:r,database:a,role:n,server:i,warehouse:o,schema:s}=e;return{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{JDBCConnection:{user:t,password:r,database:a,role:n,connectionUrl:`jdbc:snowflake://${i}`,warehouse:o,schema:s}}}}function d(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const r={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?r.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete r.info.connectionProperties.fallbackServerAddresses,r}function u(e,t){const r="bdfs"===e.addDataStoreType?e.bdfsCloudProvider:e.provider,a={info:{}},n={credentialType:"accesskey"};return"amazon"===r&&("accessKey"===e.credentialType?(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey):n.credentialType=e.credentialType,"custom"===e.selectedRegion.id?n.regionEndpointUrl=e.storageURL:(n.regionEndpointUrl=b(e.regions,e.selectedRegion),n.region=e.selectedRegion.id),a.info.objectStore=e.bucketName,a.provider="amazon"),"google"===r&&(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey,n.regionEndpointUrl="https://storage.googleapis.com",a.info.objectStore=e.bucketName,a.provider="Google"),"azure"!==r&&"azuredatalakegen2store"!==r||("sharedKey"===e.azureAuthenticationType?(n.credentialType="accessKey",n.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(n.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(n.tenantId=e.tenantId,n.clientId=e.clientId,n.clientSecret=e.clientSecret,n.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(n.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(n.credentialType=e.azureAuthenticationType,n.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(n.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?n.regionEndpointUrl=e.endpoint:n.accountEndpoint=b(e.regions,e.environment),n.accountName=e.accountName,"azure"===r?(a.info.objectStore=e.containerName,a.provider="azure"):(a.info.folder=e.cloudFolder?`${e.containerName}/${(0,i.r)(e.cloudFolder)}`:e.containerName,a.provider="azureDataLakeStore")),"alibaba"===r&&(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey,a.info.objectStore=e.bucketName,a.provider="Alibaba",n.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:b(e.regions,e.selectedRegion)),n.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==r&&(a.info.objectStore=a.info.objectStore+"/"+(0,i.r)(e.cloudFolder)),a.type="cloudStore",a.path="/cloudStores/"+t,a.info.connectionString=JSON.stringify(n),a}function p(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsFilesharePath}),connectionType:"fileShare"}}}function f(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsHdfsPath,username:e.bdfsHdfsUsername}),connectionType:"hdfs"}}}function h(e,t){const r={type:"bigDataFileShare",path:"/bigDataFileShares/"+t,info:{connectionString:"",connectionType:"hive"}},a=e.useNonDefaultDatabase;return r.info.connectionString=JSON.stringify({metaStoreUris:e.metastoreUris,database:a&&e.nonDefaultDatabaseName||"default"}),r}function y(e,t){return JSON.stringify({info:{connectionString:JSON.stringify({path:t}),connectionType:"dataStore"},path:`/bigDataFileShares/${e}`,type:"bigDataFileShare"})}function b(e,t){let r;return e.forEach((function(e){e.id===t.id&&(r=e.blobStoreEndpoint||e.storageEndpointSuffix)})),r}const g=async(e,t)=>{const r=e.results.out_connectionString.paramUrl,n=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${r}`,i=await(0,a.r)(n);return v(i)},v=e=>{const t=e.value;return{connectionStringProps:S(t),connectionString:t}},S=e=>{let t=[];return e&&e.split(";").forEach((e=>{const r=e.split("=");2!==r.length||m(t,r[0])||t.push({key:r[0],value:r[1]})})),t},m=(e,t)=>e.some((e=>e.key===t)),w=()=>{var e;const t=n.c.portal,r=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===r},T=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`}},70506:(e,t,r)=>{r.d(t,{e:()=>i});var a,n=r(99004),i={exports:{}};a=i.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",a="next";function n(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){void 0===e&&(e=r);var t=i(e),o=n(e);if(o!==a&&3===o.major){var s=o.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||n(e)?o(e):e}function u(e,t){var r=d(e),a=l(r);return a||c(a=s(r),t),a}var p={};function f(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,r){var a;r&&(a=y(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",n,!1)}function y(e,t){var r=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function b(e){void 0===e&&(e={}),p=e}function g(){return document.querySelector("script[data-esri-loader]")}function v(){var e=window.require;return e&&e.on}function S(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var a=r.version,n=r.url||i(a);return new t.Promise((function(e,t){var i=g();if(i){var o=i.getAttribute("src");o!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):v()?e(i):h(i,e,t)}else if(v())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&u(!0===s?a:s,r.insertCssBefore),h(i=f(n),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),t),document.body.appendChild(i)}}))}function m(e){return new t.Promise((function(t,r){var a=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];a.remove(),t(e)}))}))}function w(e,t){if(void 0===t&&(t={}),v())return m(e);var r=g(),a=r&&r.getAttribute("src");return!t.url&&a&&(t.url=a),S(t).then((function(){return m(e)}))}e.utils=t,e.loadModules=w,e.getScript=g,e.isLoaded=v,e.loadScript=S,e.setDefaultOptions=b,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(a)},28926:(e,t,r)=>{r.d(t,{l:()=>n});var a=r(70506);const n=async(e,t)=>(await a.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);