/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d99497.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d99497"],{46396:(e,t,o)=>{o.r(t),o.d(t,{arcgis_symbol_styler:()=>B});var i=o(7263),r=o(25380),l=o(94278),s=o(60496),n=o(82748),a=o(62159),c=o(58233),h=o(11246),d=o(28926),p=o(1991);o(78613),o(70506),o(99004),o(77040);function m(e,t,o=!1,i=!0){if(!e||!t)return!1;const r=e.every(((e,i)=>{const r=t[i];return e.r===r.r&&e.g===r.g&&e.b===r.b&&(!o||e.a===r.a)}));return i?r||m(e.slice().reverse(),t,o,!1):r}function y(e,t){return b(e,t)}function b(e,t){if(Array.isArray(e)){for(let o=0;o<e.length;o++){const i=b(e[o],t);if(void 0!==i)return i}return}const o=t(e);return void 0!==o?o:"cim"===e.type?b(e.data.symbol,t):"CIMSymbolReference"===e.type||"CIMMarkerGraphic"===e.type?b(e.symbol,t):"CIMPointSymbol"===e.type||"CIMPolygonSymbol"===e.type||"CIMLineSymbol"===e.type?b(e.symbolLayers,t):"CIMHatchFill"===e.type?b(e.lineSymbol,t):"CIMVectorMarker"===e.type?b(e.markerGraphics,t):void("CIMPictureMarker"!==e.type&&"CIMTextSymbol"!==e.type&&"CIMGradientFill"!==e.type&&"CIMGradientStroke"!==e.type&&"CIMObjectMarker3D"!==e.type&&"CIMCharacterMarker"!==e.type&&"CIMMaterialSymbolLayer"!==e.type&&"CIMPictureStroke"!==e.type&&"CIMPictureFill"!==e.type&&"CIMSolidFill"!==e.type&&e.type)}function u(e,t,o){const i=t.toJSON();y(e,(e=>{"fill"===o&&("CIMSolidFill"===e.type&&(e.color=i),"CIMPictureFill"!==e.type&&"CIMPictureMarker"!==e.type||(e.tintColor=i)),"stroke"===o&&("CIMSolidStroke"===e.type&&(e.color=i),"CIMPictureStroke"===e.type&&(e.tintColor=i))}))}function g(e,t){const o=y(e,(e=>{if("fill"===t){if("CIMSolidFill"===e.type)return e.color;if("CIMPictureFill"===e.type||"CIMPictureMarker"===e.type)return e.tintColor}if("stroke"===t){if("CIMSolidStroke"===e.type)return e.color;if("CIMPictureStroke"===e.type)return e.tintColor}}));return l.e.Color.fromJSON(o)}function S(){return{min:r.m,max:r.a}}function k(e,t){return 0===e.a&&(t.a=1),t}function C(e){return(0,l.i)(e)&&(R(e)||function(e){return!!l.e.cimSymbolUtils.getCIMSymbolColor(e)}(e))||(0,l.a)(e)&&!v(e)||(0,l.b)(e)}function f(e){return(0,l.i)(e)&&R(e)||(0,l.a)(e)||(0,l.c)(e)||(0,l.b)(e)}function v(e){return!("simple-marker"!==(null==e?void 0:e.type)||"x"!==e.style&&"cross"!==e.style)}function w(e,t=e.size){return Object.assign(Object.assign({},e),{size:x((0,s.p)(t))})}function I(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function O(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function x(e){const t=Number.isInteger(e)?0:3;return Number(e.toFixed(t))}function M(e,t){return isNaN(e)?t:I((0,s.a)(e))}function P(e){var t;return e&&"simple-line"!==e.type&&"simple-fill"!==e.type?(0,l.i)(e)?l.e.cimSymbolUtils.getCIMSymbolRotation(e,!0):null!==(t=e.angle)&&void 0!==t?t:0:0}function j(e){return"CIMTextSymbol"===e.type}function R(e){if(j(e.data.symbol))return!1;const{symbolLayers:t}=e.data.symbol;if(1===t.length){const[e]=t;if("CIMVectorMarker"!==e.type||e.colorLocked)return!1;const{markerGraphics:o}=e;return 1===o.length&&!j(o[0].symbol)&&A(o[0].symbol.symbolLayers)}if(2===t.length){const[e,o]=t;if("CIMVectorMarker"!==e.type||"CIMVectorMarker"!==o.type||e.colorLocked||e.size>o.size)return!1;const i=e.markerGraphics,r=o.markerGraphics;if(1!==i.length||1!==r.length)return!1;const[{symbol:l}]=i,[{symbol:s}]=r;return l&&s&&!j(l)&&!j(s)&&A(l.symbolLayers)&&function(e){return function(e){return!!(null==e?void 0:e.find((({type:e})=>"CIMSolidFill"===e)))}(e)&&L(e)}(s.symbolLayers)}return!1}function A(e){return function(e){return!!function(e){return null==e?void 0:e.find((({type:e,colorLocked:t})=>"CIMSolidFill"===e&&!t))}(e)}(e)&&L(e)}function L(e){return!!function(e){return null==e?void 0:e.find((({type:e})=>"CIMSolidStroke"===e))}(e)}function F(e){return e&&function(e){return r.s.includes(null==e?void 0:e.placement)&&"arrow"===(null==e?void 0:e.style)}(e)?e.placement:"none"}function z(e){if("none"!==e)return{style:"arrow",placement:e}}function T(e,t){if(e&&t&&function(e){return"color-ramp"===(null==e?void 0:e.type)&&"2d"===e.style}(e)){const o=function(e,t){const o=t.map((e=>e.stops)),i=4;let l=e.map((e=>e.clone())),s=0,n=!1;for(let e=0;e<i;e++){if(o.some((e=>m(l,e,!0,!1)))){n=!0;break}l=(0,r.f)(l,!0),s++}return n?(i-s)%i:null}(t.color,e.colorRamps);if(o>0)return e.colorRamps.map((e=>{const t=Object.assign({},e);for(let e=0;e<o;e++)t.stops=(0,r.f)(t.stops,!0);return t}))}return null==e?void 0:e.colorRamps}const B=class{constructor(e){(0,i.r)(this,e),this.arcgisSymbolStylerEdit=(0,i.c)(this,"arcgisSymbolStylerEdit",7),this.arcgisSymbolStylerMarkerChange=(0,i.c)(this,"arcgisSymbolStylerMarkerChange",7),this.arcgisSymbolStylerFillChange=(0,i.c)(this,"arcgisSymbolStylerFillChange",7),this.arcgisSymbolStylerFillEnabledChange=(0,i.c)(this,"arcgisSymbolStylerFillEnabledChange",7),this.arcgisSymbolStylerStrokeChange=(0,i.c)(this,"arcgisSymbolStylerStrokeChange",7),this.arcgisSymbolStylerStrokeEnabledChange=(0,i.c)(this,"arcgisSymbolStylerStrokeEnabledChange",7),this.arcgisSymbolStylerSourceIdChange=(0,i.c)(this,"arcgisSymbolStylerSourceIdChange",7),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();this.narrow=t.contentRect.width<=275})),this.windowResizeObserver=new ResizeObserver((()=>this.checkPopoverMaxHeight())),this.autoOpenFirstBlock=!1,this.autoCalcHeight=!1,this.colorInputEl=[],this.manualBlockOpen=!1,this.updatePreviewSymbol=(0,h.c)((()=>{const e=this.symbol.clone();this.syncSymbolProps(e,{symbolState:{marker:this.marker,fill:this.fill,stroke:this.stroke}}),this.previewSymbol=e}),150),this.setRampInputRef=e=>{this.rampInputEl=e},this.setColorInputRef=e=>{this.colorInputEl.push(e)},this.onColorRampFillTransparencyChange=e=>{const t=(0,p.t)(e),o={color:this.fill.color.map((e=>(0,n.c)(Object.assign(Object.assign({},e),{a:t}))))};this.fill=o,this.arcgisSymbolStylerFillChange.emit(o),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)},this.onFillColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections.fill;this.sections=Object.assign(Object.assign({},this.sections),{fill:Object.assign(Object.assign({},o),{activeCategory:t})}),e.stopPropagation()},this.onColorFillTransparencyChange=e=>{const t=(0,p.t)(e),{fill:o}=this,i={color:(0,n.c)(Object.assign(Object.assign({},o.color),{a:t}))};this.fill=i,this.arcgisSymbolStylerFillChange.emit(i),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)},this.onStrokeColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections.stroke;this.sections=Object.assign(Object.assign({},this.sections),{stroke:Object.assign(Object.assign({},o),{activeCategory:t})}),e.stopPropagation()},this.onColorStrokeTransparencyChange=e=>{const{stroke:t}=this,o=(0,p.t)(e),i=Object.assign(Object.assign({},t),{color:(0,n.c)(Object.assign(Object.assign({},t.color),{a:o}))});this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)},this.onColorRampStrokeTransparencyChange=e=>{const t=(0,p.t)(e),o=this.stroke,i=Object.assign(Object.assign({},o),{color:o.color.map((e=>(0,n.c)(Object.assign(Object.assign({},e),{a:t}))))});this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)},this.onStrokeStyleChange=e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-style"),{stroke:o}=this,i=Object.assign(Object.assign({},o),{style:t});this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},this.onStrokeArrowChange=e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-arrow"),{stroke:o}=this,i=Object.assign(Object.assign({},o),{marker:z(t)});this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},this.onStrokeWidthChange=e=>this.setStrokeWidth(e),this.onAutoAdjustStrokeChange=e=>{const t=e.currentTarget.checked,{stroke:o}=this,i=Object.assign(Object.assign({},o),{autoAdjusted:t});this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.syncSymbolProps=(e,t)=>{const o=(null==t?void 0:t.symbolState)||{marker:this.marker,fill:this.fill,stroke:this.stroke},i=null==t?void 0:t.cimChangeContext,r=(0,l.g)(e);return"point"===r?this.syncPointSymbolProps(e,o,i):"line"===r?this.syncLineSymbolProps(e,o,i):this.syncPolygonSymbolProps(e,o,i)},this.syncPointSymbolProps=(e,{fill:t,marker:o,stroke:i},r)=>{const{sections:a}=this,c=x((0,s.p)(o.size));if((0,l.a)(e)){const o=v(e);o||(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=a.fill.enabled?t.color:(0,n.c)(null)),e.outline&&(this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():o&&this.isFillColorRamp()?e.outline.color=this.getSampleFillColorRampColor():e.outline.color=a.stroke.enabled?i.color:(0,n.c)(null),e.outline.marker=i.marker,e.outline.style=i.style,e.outline.width=x((0,s.p)(i.size))),e.size=c}else(0,l.d)(e)&&(e.height=Math.round(e.height/e.width*c*100)/100,e.width=c);const h=Math.abs(o.angle);return(0,l.i)(e)?(["root","original-root"].indexOf(r)>-1?(l.e.cimSymbolUtils.applyCIMSymbolRotation(e,h,!0),l.e.cimSymbolUtils.scaleCIMSymbolTo(e,c)):e.data.symbol.angle=h,this.isFillColorRamp()?l.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&l.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"})):e.angle=h,e},this.syncLineSymbolProps=(e,{stroke:t},o)=>{const{sections:i}=this,r=x((0,s.p)(t.size));return(0,l.c)(e)?(this.isStrokeColorRamp()?e.color=this.getSampleStrokeColorRampColor():e.color=i.stroke.enabled?t.color:(0,n.c)(null),"original-root"!==o&&(e.marker=t.marker,e.style=t.style,e.width=r)):(0,l.i)(e)&&("root"===o&&l.e.cimSymbolUtils.scaleCIMSymbolTo(e,r),this.isStrokeColorRamp()&&l.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor())),e},this.syncPolygonSymbolProps=(e,{fill:t,stroke:o},i)=>{const{sections:r}=this,a=x((0,s.p)(o.size));return(0,l.b)(e)?(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=r.fill.enabled?t.color:(0,n.c)(null),this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():e.outline.color=r.stroke.enabled?o.color:(0,n.c)(null),"original-root"!==i&&(e.outline.width=a,e.outline.style=o.style)):(0,l.i)(e)&&(this.isFillColorRamp()?l.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&l.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"}),"root"===i&&((0,l.f)(e)?function(e,t){var o;null===(o=e.data.symbol.symbolLayers)||void 0===o||o.forEach((e=>{["CIMSolidStroke","CIMPictureStroke"].indexOf(e.type)>-1&&(e.width=t)}))}(e,a):l.e.cimSymbolUtils.scaleCIMSymbolTo(e,a))),e},this.onStrokeEnabledChange=e=>{const{sections:t}=this,o=v(this.activeSymbol);this.sections=Object.assign(Object.assign({},t),{stroke:Object.assign(Object.assign({},t.stroke),{enabled:!!o||e})}),o||(this.arcgisSymbolStylerStrokeEnabledChange.emit({enabled:e,stroke:w(this.stroke)}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))},this.onFillEnabledChange=e=>{const{fill:t,sections:o}=this,i=v(this.activeSymbol);this.sections=Object.assign(Object.assign({},o),{fill:Object.assign(Object.assign({},o.fill),{enabled:!i&&e})}),i||(this.arcgisSymbolStylerFillEnabledChange.emit({enabled:e,fill:t}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))},this.onAutoAdjustSizeChange=e=>{const t=e.currentTarget.checked,{marker:o}=this,i=Object.assign(Object.assign({},o),{autoAdjusted:t});this.marker=i,this.arcgisSymbolStylerMarkerChange.emit(w(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.onSymbolSizeChange=e=>this.setSymbolSize(e),this.onSymbolRotationChange=e=>{const{marker:t,fill:o,stroke:i}=this,r=Object.assign(Object.assign({},t),{angle:e,symbol:this.syncSymbolProps(this.symbol,{cimChangeContext:"root",symbolState:{marker:Object.assign(Object.assign({},t),{angle:e}),fill:o,stroke:i}})});this.marker=r,this.setInternalSymbol(r.symbol,!0),this.arcgisSymbolStylerMarkerChange.emit(w(r))},this.onSymbolSelect=e=>{var t;const{fill:o,marker:i,sections:r,stroke:s}=this,n="picture-marker"===(null===(t=this.activeSymbol)||void 0===t?void 0:t.type)&&"simple-marker"===e.type,a=v(this.activeSymbol),c=v(e),h=a&&!c,d=!a&&c;this.autoOpenFirstBlock=!0;const p=C(e),m=f(e),y={},b=(0,l.i)(this.activeSymbol)&&!(0,l.i)(e);if(b){if((0,l.a)(e)||(0,l.b)(e)){if(p&&"color"===r.fill.type&&(y.fill=Object.assign(Object.assign({},o),{color:e.color.clone()})),m&&"color"===r.stroke.type){const t=e.outline.color.clone();d&&(t.a=1),y.stroke=Object.assign(Object.assign({},s),{color:t}),l.b&&(y.stroke.size=e.outline.width,y.stroke.style=e.outline.style)}}else if((0,l.c)(e)&&m&&"color"===r.stroke.type){const t=e;y.stroke=Object.assign(Object.assign({},s),{size:t.width,color:t.color.clone()})}}else if((0,l.i)(e)){const t=l.e.cimSymbolUtils.getCIMSymbolColor(e);"color"===r.fill.type&&(y.fill=Object.assign(Object.assign({},o),{color:t})),y.stroke=Object.assign({},s),"point"===this.editGeometry?y.stroke.size=x(i.size):"line"===this.editGeometry&&(y.stroke.size=x(l.e.cimSymbolUtils.getCIMSymbolSize(e))),"color"===r.stroke.type&&(y.stroke.color=t),this.cimStrokeWidthBounds=S()}else if("color-ramp"===r.fill.type&&"color"===r.stroke.type)c?(this.tempStrokeColorRampStateActiveCategory=r.fill.activeCategory,this.tempStrokeColorRampStateStops=o.color,this.tempStrokePreviousColorBeforeColorRampSwitch=s.color,y.stroke=Object.assign(Object.assign({},s),{color:this.tempStrokeColorRampStateStops})):h&&(y.fill=Object.assign(Object.assign({},o),{color:this.tempStrokeColorRampStateStops}),y.stroke=Object.assign(Object.assign({},s),{color:this.tempStrokePreviousColorBeforeColorRampSwitch}),this.tempStrokeColorRampStateActiveCategory=null,this.tempStrokeColorRampStateStops=null);else if("color"===r.fill.type&&"color-ramp"===r.stroke.type){if(d){const e=s.color.map((e=>(e.a=1,e)));y.stroke=Object.assign(Object.assign({},s),{color:e})}}else if("color"===r.fill.type&&"color"===r.stroke.type&&d){const e=s.color.clone();d&&(e.a=1),y.stroke=Object.assign(Object.assign({},s),{color:e})}this.sections=Object.assign(Object.assign({},r),{fill:Object.assign(Object.assign({},r.fill),{open:!c&&r.fill.open,enabled:p&&(!c||(0,l.i)(e)||h||n||r.fill.enabled)}),stroke:Object.assign(Object.assign({},r.stroke),{enabled:m&&((0,l.i)(e)||d||b&&!c||n||r.stroke.enabled)})});const u=y.fill||o,g=y.stroke||s,k=Object.assign(Object.assign({},i),{symbol:this.syncSymbolProps(e,{cimChangeContext:"original-root",symbolState:{marker:i,fill:u,stroke:g}})});this.fill=u,this.stroke=g,this.marker=k,this.activeSymbol=e,this.setInternalSymbol(k.symbol,!0,!0),this.arcgisSymbolStylerMarkerChange.emit(w(k))},this.addStyles=async()=>{var e;const{portal:t,portalOrInterceptor:o,dir:i,editGeometry:r,mergedStrings:s}=this;if(document.querySelector("arcgis-symbol-styler-browse-styles"))return;const n=document.createElement("arcgis-symbol-styler-browse-styles");n.editGeometry=r,n.dir=i,n.portal=(null==o?void 0:o.portal)||o||t||l.e.Portal.getDefault(),n.strings=s,n.dir=i,n.excludeItemIds=await(null===(e=this.symbolPickerElement)||void 0===e?void 0:e.getStyleItemIds())||[],document.body.appendChild(n),n.addEventListener("arcgisSymbolStylerBrowseStylesClose",(e=>{var t;document.body.removeChild(n),(null===(t=e.detail)||void 0===t?void 0:t.length)&&(this.activeSourceId=e.detail[0],this.pickerReRenderFlag=!this.pickerReRenderFlag)}))},this.emitEdit=(0,h.d)((async(e,t)=>{const o=e.clone(),i={},{editGeometry:r}=this,l="point"===r,s=!v(e)&&"point"===r||"polygon"===r;l&&(i.marker=Object.assign(Object.assign({},w(this.marker)),{symbol:o})),s&&(i.fill=Object.assign({},this.fill)),i.stroke=Object.assign({},w(this.stroke)),this.arcgisSymbolStylerEdit.emit({symbol:o,info:i,symbolSwitch:t})}),300),this.flipFillColorRamps=()=>{const e=this.sections.fill,t=this.fill,o="2d"===e.style,i={color:(0,r.f)(t.color,o)};this.sections=Object.assign(Object.assign({},this.sections),{fill:Object.assign(Object.assign({},e),{colorRamps:e.colorRamps.map((({stops:e,tags:t,name:i})=>({stops:(0,r.f)(e,o),tags:t,name:i})))})}),this.fill=i,this.arcgisSymbolStylerFillChange.emit(i),this.emitEdit(this.symbol)},this.renderBlock=e=>{var t;return(0,i.h)("calcite-block",{collapsible:!0,disabled:null!==(t=e.disabled)&&void 0!==t&&t,heading:e.heading,key:e.key,onCalciteBlockOpen:this.onBlockToggle,onCalciteBlockClose:this.onBlockToggle},e.icon,e.content)},this.onBlockToggle=e=>{var t;this.manualBlockOpen?this.manualBlockOpen=!1:(null===(t=this.rampInputEl)||void 0===t||t.close(),this.colorInputEl.forEach((e=>null==e?void 0:e.close())))},this.renderSection=({disabled:e,embedded:t=!1,key:o,sectionContent:r})=>(0,i.h)("arcgis-symbol-styler-section",{disabled:e,key:o,embedded:t},r.map((({content:e})=>e))),this.flipStrokeColorRamps=()=>{const e=this.sections.stroke,t=this.stroke,o="2d"===e.style,i=Object.assign(Object.assign({},t),{color:(0,r.f)(t.color,o)});this.sections=Object.assign(Object.assign({},this.sections),{stroke:Object.assign(Object.assign({},e),{colorRamps:e.colorRamps.map((({stops:e,tags:t,name:i})=>({stops:(0,r.f)(e,o),tags:t.slice(),name:i})))})}),this.stroke=i,this.arcgisSymbolStylerStrokeChange.emit(w(i)),this.emitEdit(this.symbol)},this.popoverProps=void 0,this.initialSourceId=void 0,this.portal=void 0,this.stringOverrides=void 0,this.mode="default",this.displaySymbolsSelectionOnly=!1,this.cimStrokeWidthBounds=void 0,this.config=void 0,this.editGeometry=void 0,this.fill=void 0,this.marker=void 0,this.narrow=!1,this.preppingEdit=!0,this.previewSymbol=void 0,this.sections=void 0,this.builtInStrings=void 0,this.mergedStrings=void 0,this.stroke=void 0,this.symbol=void 0,this.tempStrokeColorRampStateActiveCategory="all",this.pickerReRenderFlag=!1,this.activeSymbol=void 0,this.activeSymbolItem=void 0,this.activeSourceId=void 0,this.state="editing"}connectedCallback(){this.resizeObserver.observe(this.el),this.windowResizeObserver.observe(document.body)}disconnectedCallback(){this.resizeObserver.unobserve(this.el),this.windowResizeObserver.unobserve(document.body)}async componentWillLoad(){const[,[e]]=await Promise.all([l.e.load(),(0,a.g)(this.el)]);this.currentLanguage=(0,a.a)(this.el),this.dir=(0,c.g)(this.el);const t=new Intl.NumberFormat(this.currentLanguage,{style:"percent"}).format(0);this.percentLabelFlip="rtl"===this.dir?t.endsWith("%"):t.startsWith("%"),this.builtInStrings=e}componentShouldUpdate(e,t,o){if("preppingEdit"===o)return!e}componentDidRender(){if(this.autoOpenFirstBlock&&!this.preppingEdit){const e=this.el.shadowRoot.querySelector("calcite-block");e&&(this.autoOpenFirstBlock=!1,this.manualBlockOpen=!0,e.open=!0)}}handleStringChanges(){this.mergedStrings=Object.assign(Object.assign({},this.builtInStrings),this.stringOverrides)}onPanelBack(e){e.stopPropagation()}async edit(e,t){var o,i,s,a,c,h,d;const p=function(e){return e?"text"===e.type||"picture-fill"===e.type?`editing symbol of type ${e.type} is not supported`:void 0:"missing symbol to edit"}(e);if(p)throw new Error(`[arcgis-symbol-styler] ${p}`);e=await this.checkLineOnlySymbol(e,t),this.portalOrInterceptor=t.portal||this.portal||l.e.Portal.getDefault(),this.preppingEdit=!0,this.autoOpenFirstBlock=!0;const{marker:m,fill:y,stroke:b}=t.sections;this.symbolFilter=t.symbolFilter||("all"===(null==m?void 0:m.markerType)||null==m?void 0:m.markerType),this.editGeometry=(0,l.g)(e);const u=C(e=e.clone()),g=f(e);((0,l.a)(e)||(0,l.b)(e))&&(e.outline?e.outline.color||(e.outline.color=(0,n.c)(null)):e.outline={type:"simple-line",color:(0,n.c)(null)});const k=Object.assign(Object.assign({autoAdjusted:!1},t.stroke),{size:M(null===(o=t.stroke)||void 0===o?void 0:o.size,2),style:r.b.includes(null===(i=t.stroke)||void 0===i?void 0:i.style)?t.stroke.style:"solid"});(null===(s=t.stroke)||void 0===s?void 0:s.marker)&&(k.marker=t.stroke.marker),this.sections={marker:{backgroundStyle:"light",optional:!1,enabled:!1,open:(null==m?void 0:m.open)||!1,symbolsOpen:m&&(!("symbolsOpen"in m)||m.symbolsOpen)||!1,sizeOpen:m&&(!("sizeOpen"in m)||m.sizeOpen)||!1,rotationOpen:m&&(!("rotationOpen"in m)||m.rotationOpen)||!1,keepChoice:(null==m?void 0:m.keepChoice)||!1,parts:Object.assign(Object.assign({},r.d),null==m?void 0:m.parts)},fill:{activeCategory:"all",open:(null==y?void 0:y.open)||!1,optional:(null==y?void 0:y.optional)||!1,enabled:u&&(null===(a=t.fillEnabled)||void 0===a||a)&&!(0,l.i)(e)&&"color"===(null==y?void 0:y.type)&&!!this.toColorPickerValue(t.fill.color),type:null==y?void 0:y.type,style:null==y?void 0:y.style,suggestedColorsOpen:(null==y?void 0:y.suggestedColorsOpen)||!1,customColorOpen:(null==y?void 0:y.customColorOpen)||!1,colorRampsOpen:(null==y?void 0:y.colorRampsOpen)||!1,colorRamps:T(y,t.fill),transparencyOpen:(null==y?void 0:y.transparencyOpen)||!1,parts:Object.assign(Object.assign(Object.assign({},r.c),r.e),null==y?void 0:y.parts)},stroke:{activeCategory:"all",optional:(null==b?void 0:b.optional)||!1,open:(null==b?void 0:b.open)||!1,enabled:g&&(null===(c=t.strokeEnabled)||void 0===c||c)&&!(0,l.i)(e)&&"color"===(null==b?void 0:b.type)&&!!this.toColorPickerValue(t.stroke.color),type:null==b?void 0:b.type,style:null==b?void 0:b.style,suggestedColorsOpen:(null==b?void 0:b.suggestedColorsOpen)||!1,customColorOpen:(null==b?void 0:b.customColorOpen)||!1,colorRampsOpen:(null==b?void 0:b.colorRampsOpen)||!1,colorRamps:T(b,t.stroke),transparencyOpen:(null==b?void 0:b.transparencyOpen)||!1,extraOpen:(null==b?void 0:b.extraOpen)||!1,extraParts:Object.assign(Object.assign({},r.g),null==b?void 0:b.extraParts),parts:Object.assign(Object.assign(Object.assign(Object.assign({},r.c),r.e),r.h),null==b?void 0:b.parts)}},this.marker=Object.assign(Object.assign({},t.marker),{size:M(null===(h=t.marker)||void 0===h?void 0:h.size,0),angle:P(e),autoAdjusted:(null===(d=t.marker)||void 0===d?void 0:d.autoAdjusted)||!1,symbol:e}),this.fill=Object.assign({},t.fill),this.stroke=k,this.activeSymbol=e,this.activeSourceId=(null==m?void 0:m.keepChoice)&&this.activeSourceId||null,this.activeSymbolItem=(null==m?void 0:m.keepChoice)&&this.activeSymbolItem||null,this.config=t,(0,l.i)(e)&&(this.isFillColorRamp()||this.isStrokeColorRamp())&&this.syncSymbolProps(e,{cimChangeContext:"root"}),(0,l.i)(e)&&(this.cimStrokeWidthBounds=S()),this.setInternalSymbol(e,!1),this.preppingEdit=!1}async checkLineOnlySymbol(e,t){var o,i,r,l,s,n,a;if(v(e)){const[c]=await(0,d.l)(["esri/symbols/SimpleMarkerSymbol"]);return e=new c,(null===(o=t.fill)||void 0===o?void 0:o.color)&&(Array.isArray(t.fill.color)?e.color=t.fill.color[t.fill.color.length-1]:e.color=t.fill.color),(null===(i=t.stroke)||void 0===i?void 0:i.color)&&(t.stroke.color=e.outline.color.clone()),((null===(r=t.stroke)||void 0===r?void 0:r.size)||0===(null===(l=t.stroke)||void 0===l?void 0:l.size))&&(t.stroke.size=e.outline.width),(null===(s=t.marker)||void 0===s?void 0:s.size)&&(e.size=t.marker.size),this.marker=Object.assign(Object.assign({},t.marker),{size:M(null===(n=t.marker)||void 0===n?void 0:n.size,0),angle:P(e),autoAdjusted:(null===(a=t.marker)||void 0===a?void 0:a.autoAdjusted)||!1,symbol:e}),this.emitEdit(e),Promise.resolve(e)}return Promise.resolve(e)}async setSize(e,t){"stroke"===e&&this.setStrokeWidth(O((0,s.a)(t)),!1),"marker"===e&&this.setSymbolSize(O((0,s.a)(t)),!1)}getLinePatternStyle(e){return{backgroundImage:`url(${(0,i.a)(`./assets/line-patterns/${e}.png`)})`}}getSelectedArrowPatternStyle(){return{backgroundImage:`url(${(0,i.a)("./assets/arrow-pattern-spritesheet.png")})`}}getArrowPatternOptionStyle(){return{backgroundImage:`url(${(0,i.a)("./assets/arrow-pattern-options-spritesheet.png")})`}}hasActiveLineOnlySimpleMarkerSymbol(){const{marker:e,symbol:t}=this;return e&&v(t)}hasActivePictureMarkerSymbol(){var e;return"picture-marker"===(null===(e=this.symbol)||void 0===e?void 0:e.type)||"picture-marker"===this.activeSymbol.type}setStrokeWidth(e,t=!0){const{stroke:o}=this,i=e<0?0:O(e),r=Object.assign(Object.assign({},o),{size:i});this.stroke=r,t&&this.arcgisSymbolStylerStrokeChange.emit(w(r,e)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),t)}isFillColorRamp(){var e;return"color-ramp"===(null===(e=this.config.sections.fill)||void 0===e?void 0:e.type)}isStrokeColorRamp(){var e;return"color-ramp"===(null===(e=this.config.sections.stroke)||void 0===e?void 0:e.type)}getSampleFillColorRampColor(){const e=this.sections.fill,t=this.fill;return this.getSampleColorRampColor(e,t.color)}getSampleStrokeColorRampColor(){const e=this.sections.stroke,t=this.stroke;return this.getSampleColorRampColor(e,t.color)}getSampleColorRampColor(e,t){const o=t.length;return"2d"===e.style||"discrete"===e.style?t[o-1]:t[Math.floor(o/2)]}setSymbolSize(e,t=!0){const{marker:o,fill:i,stroke:r,symbol:l}=this,s=Object.assign(Object.assign({},o),{symbol:this.syncSymbolProps(l,{cimChangeContext:"root",symbolState:{marker:Object.assign(Object.assign({},o),{size:e}),fill:i,stroke:r}}),size:e});this.marker=s,this.setInternalSymbol(s.symbol,t),t&&this.arcgisSymbolStylerMarkerChange.emit(w(s,e))}render(){var e,t,o,r,s,n;if(this.preppingEdit)return;const a=(0,c.g)(this.el),{sections:h}=this.config,d=(0,l.i)(this.activeSymbol);return(0,i.h)(i.H,null,(0,i.h)("calcite-flow",{ref:e=>{this.flowEl=e,this.checkPopoverMaxHeight()}},(0,i.h)("calcite-flow-item",{class:{[c.C.rtl]:"rtl"===a},dir:a,key:"main"},[!1!==(null===(t=null===(e=h.marker)||void 0===e?void 0:e.parts)||void 0===t?void 0:t.rotation)||!1!==(null===(r=null===(o=h.marker)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.preview)||!1!==(null===(n=null===(s=h.marker)||void 0===s?void 0:s.parts)||void 0===n?void 0:n.size)||"minimal"===this.mode||this.displaySymbolsSelectionOnly?this.renderSymbolBlock():null,d||!h.fill||this.displaySymbolsSelectionOnly?null:this.renderFillBlock(),d||!h.stroke||this.displaySymbolsSelectionOnly?null:this.renderStrokeBlock()]),"choosing-symbol"===this.state?this.renderSymbolSelectionPanel():null))}renderSymbolBlock(){const{marker:e,stroke:t}=this.sections,{parts:o}=e,{editGeometry:i,symbol:r}=this,s=(0,l.i)(r),n=[];return(o.preview||this.displaySymbolsSelectionOnly)&&n.push({content:this.renderSymbolsSelection()}),this.displaySymbolsSelectionOnly||(s&&(this.isFillColorRamp()?n.push({content:this.renderColorRampFillBlock(!0)}):this.isStrokeColorRamp()&&n.push({content:this.renderColorRampStrokeBlock(!0)})),"minimal"===this.mode&&(o.color&&n.push({content:this.renderRootCIMSymbolColorContent()}),o.transparency&&n.push({content:this.renderRootCIMSymbolTransparencyContent()})),"point"===i?(o.size&&n.push({content:s?this.renderRootCIMSymbolSizeContent():this.renderSymbolSizeContent()}),o.rotation&&n.push({content:this.renderSymbolRotationContent()})):s&&t.extraParts.width&&(!(0,l.f)(r)||(0,l.f)(r)&&function(e){var t;return!!(null===(t=e.data.symbol.symbolLayers)||void 0===t?void 0:t.find((({type:e})=>["CIMSolidStroke","CIMPictureStroke"].indexOf(e)>-1)))}(r))&&n.push({content:this.renderRootCIMSymbolWidthContent()}),s&&n.push({content:this.renderRootCIMSymbolContent(r)})),this.renderSection({key:"marker-symbols",sectionContent:n})}renderRootCIMSymbolContent(e){const t=this.renderCIMSymbolLayersContent(e.data.symbol,"root-symbol");return t.length>r.i?[...t.slice(0,r.i),(0,i.h)("div",{class:r.C.message},this.mergedStrings.additionalSymbolLayersNotShown.replace("${count}",r.i.toString()))]:t}renderCIMSymbolLayersContent({symbolLayers:e},t,o=!1,i){return e.filter((({type:e})=>this.isSupportedSymbolLayerType(e))).map(((e,r)=>{const l=`${t}__symbol-layers__symbol-layer-${r.toString()}`;return"CIMVectorMarker"===e.type?this.renderCIMVectorMarkerSymbolLayerBlocks(e,l):"CIMPictureMarker"===e.type?this.renderCIMPictureMarkerSymbolLayerBlock(e,l,o):"CIMSolidStroke"===e.type?this.renderCIMSolidStrokeSymbolLayerBlock(e,l,o,i):"CIMPictureStroke"===e.type?this.renderCIMPictureStrokeSymbolLayerBlock(e,l,o):"CIMSolidFill"===e.type?this.renderCIMSolidFillSymbolLayerBlock(e,l,o):"CIMHatchFill"===e.type?this.renderCIMHatchFillSymbolLayerBlocks(e,l):"CIMPictureFill"===e.type?this.renderCIMPictureFillSymbolLayerBlock(e,l,o):void 0})).filter(Boolean).flat()}renderSymbolsSelection(){var e,t;const o=this.previewSymbol,s=o?l.e.previewSymbol2D.getContrastingBackgroundTheme(o,245):"light",n="rtl"===(0,c.g)(this.el),a=1===(null===(e=this.filteredSources)||void 0===e?void 0:e.length)&&1===(null===(t=this.activeSymbolItems)||void 0===t?void 0:t.length);return(0,i.h)("calcite-label",{style:{"--arcgis-symbol-styler-inline-input-trigger-background-color":"dark"===s?"#f3f3f3":""}},this.mergedStrings.currentSymbol,(0,i.h)("button",{class:r.C.changeSymbolTrigger,disabled:a,onClick:()=>{this.state="choosing-symbol"},type:"button"},(0,i.h)("div",{class:r.C.container,tabIndex:0},(0,i.h)("div",{class:r.C.symbol},(0,i.h)("arcgis-symbol-styler-symbol-preview",{symbol:o,options:"point"===this.editGeometry?r.p:null})),(0,i.h)("div",{class:r.C.label},function(e,t){if(!e)return null;if("picture-marker"===e.type||"simple-marker"===e.type)return t.basicPoint;if("simple-line"===e.type)return t.basicLine;if("simple-fill"===e.type)return t.basicPolygon;if("CIMPointSymbol"===e.data.symbol.type)return t.vectorPoint;if("CIMLineSymbol"===e.data.symbol.type)return t.vectorLine;if("CIMPolygonSymbol"===e.data.symbol.type)return t.vectorPolygon;throw new Error("unsupported symbol provided")}(o,this.mergedStrings))),(0,i.h)("calcite-icon",{icon:a?null:"chevron-"+(n?"left":"right"),scale:"s"})))}renderSymbolSelectionPanel(){var e;const{dir:t,mergedStrings:o}=this,r=null===(e=window.customElements)||void 0===e?void 0:e.get("arcgis-item-browser");return(0,i.h)("calcite-flow-item",{class:{[c.C.rtl]:"rtl"===t,"symbol-selection-panel":!0},dir:t,heading:o.changeSymbol,key:"symbol-selection",beforeBack:async()=>{this.state="editing"}},r&&(0,i.h)(i.F,null,(0,i.h)("calcite-action",{id:"add-styles",slot:"header-actions-end",text:o.addStyles,icon:"plus",onClick:()=>this.addStyles()}),(0,i.h)("calcite-tooltip",{"reference-element":"add-styles"},o.addStyles)),(0,i.h)("arcgis-symbol-picker",{lang:this.currentLanguage,onArcgisActiveSymbolChange:e=>{const{detail:t}=e;this.onSymbolSelect(t),e.stopPropagation()},onArcgisActiveSourceIdChange:({detail:e})=>{this.activeSourceId=e,this.arcgisSymbolStylerSourceIdChange.emit(e)},onArcgisActiveSymbolItemChange:({detail:e})=>{this.activeSymbolItem=e},onArcgisSymbolSourcesChange:({detail:e})=>this.filteredSources=e,onArcgisActiveSourceItemsChange:({detail:e})=>this.activeSymbolItems=e,activeSymbolItem:this.activeSymbolItem,activeSourceId:this.activeSourceId||this.initialSourceId,portal:this.portalOrInterceptor,style:{"--scroller-max-height":"var(--symbol-scroller-max-height)"},symbolFilter:this.symbolFilter,symbol:this.activeSymbol,key:`${this.pickerReRenderFlag}`,ref:e=>this.symbolPickerElement=e}),(0,i.h)("calcite-button",{width:"full",slot:"footer",onClick:()=>this.flowEl.back()},o.done))}setInternalSymbol(e,t,o){this.symbol=e,this.updatePreviewSymbol(),t&&this.emitEdit(e,o)}renderRootCIMSymbolColorContent(){const e=l.e.cimSymbolUtils.getCIMSymbolColor(this.symbol);return(0,h.i)(e)?(0,i.h)("calcite-label",null,this.mergedStrings.color,(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(e),clearable:!0,onArcgisColorInputChange:t=>{const o=t.currentTarget.color,i=(0,n.c)(o);(0,n.i)(i)||(0,n.i)(e)||(i.a=e.a),l.e.cimSymbolUtils.applyCIMSymbolColor(this.symbol,i),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef})):null}renderRootCIMSymbolTransparencyContent(){var e;const t=l.e.cimSymbolUtils.getCIMSymbolColor(this.symbol);return(0,h.i)(t)?(0,i.h)("calcite-label",null,this.mergedStrings.transparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,p.a)(null!==(e=t.a)&&void 0!==e?e:1)),onArcgisSliderInputValueChange:e=>{const o=e.detail,i=(0,p.t)(o);t.a=i,l.e.cimSymbolUtils.applyCIMSymbolColor(this.symbol,t),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),e.stopPropagation()},withSteppers:!this.narrow,disabled:!1,label:this.mergedStrings.transparency})):null}renderRootCIMSymbolSizeContent(){const{sections:{marker:{parts:{size:e}}},marker:t}=this,o="object"==typeof e&&(null==e?void 0:e.autoSizeAdjust),n=l.e.cimSymbolUtils.getCIMSymbolSize(this.symbol);return(0,i.h)("div",{class:r.C.contentGroup},(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:o&&"editable"!==o&&t.autoAdjusted,min:1,max:150,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(n)),onArcgisSliderInputValueChange:e=>this.onSymbolSizeChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})),o?this.renderAutoAdjust((0,c.g)(this.el),this.marker.autoAdjusted,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null)}renderRootCIMSymbolWidthContent(){var e;const t=this.symbol,{sections:{stroke:{extraParts:{autoStrokeAdjust:o}}},stroke:n}=this,a=(0,c.g)(this.el),h=(0,l.f)(t)?function(e){var t,o;return null!==(o=(null===(t=e.data.symbol.symbolLayers)||void 0===t?void 0:t.find((e=>["CIMSolidStroke","CIMPictureStroke"].indexOf(e.type)>-1))).width)&&void 0!==o?o:0}(t):l.e.cimSymbolUtils.getCIMSymbolSize(this.symbol);let d=this.getStrokeString("width"),p=this.cimStrokeWidthBounds.min,m=this.cimStrokeWidthBounds.max;if((0,l.h)(t)){(null===(e=t.data.symbol.symbolLayers)||void 0===e?void 0:e.some((e=>["CIMVectorMarker","CIMPictureMarker"].indexOf(e.type)>-1)))&&(d=this.mergedStrings.symbolSize,p=r.n,m=r.q)}return(0,i.h)("div",{class:r.C.contentGroup},(0,i.h)("calcite-label",{dir:a},d,(0,i.h)("arcgis-slider-input",{disabled:o&&"editable"!==o&&n.autoAdjusted,min:p,max:m,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(h)),onArcgisSliderInputValueChange:e=>this.onStrokeWidthChange(e.detail),withSteppers:!this.narrow,label:d})),o?this.renderAutoAdjust(a,this.stroke.autoAdjusted,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null)}renderSymbolSizeContent(){const{sections:{marker:{parts:{size:e}}},marker:t}=this,o=(0,c.g)(this.el),l="object"==typeof e&&(null==e?void 0:e.autoSizeAdjust);return(0,i.h)("div",{class:r.C.contentGroup},(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:l&&"editable"!==l&&t.autoAdjusted,min:1,max:150,step:1,unitsLabel:this.mergedStrings.px,value:t.size,onArcgisSliderInputValueChange:e=>this.onSymbolSizeChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})),l?this.renderAutoAdjust(o,t.autoAdjusted,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null)}renderAutoAdjust(e,t,o,l){return(0,i.h)("calcite-label",{class:r.C.autoAdjustLabel,dir:e,layout:"inline",key:"auto-adjust"},(0,i.h)("calcite-checkbox",{checked:t,class:r.C.autoAdjustCheckbox,onCalciteCheckboxChange:l}),o)}renderSymbolRotationContent(){const{marker:e,mergedStrings:t}=this;return(0,i.h)("calcite-label",null,t.rotation,(0,i.h)("arcgis-slider-input",{min:0,max:360,step:1,unitsLabel:"\xba",flipLabels:"rtl"===this.dir,value:e.angle,onArcgisSliderInputValueChange:e=>this.onSymbolRotationChange(e.detail),withSteppers:!this.narrow,label:t.rotation}))}renderFillBlock(){const{fill:e}=this.config.sections;return"color"===e.type?this.renderColorFillBlock():this.renderColorRampFillBlock()}renderColorFillBlock(){const e=this.sections.fill,{parts:t}=e,o=[];return(t.suggestedColors||t.customColor)&&o.push({content:this.renderFillColorContent()}),t.transparency&&o.push({content:(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:!e.enabled},this.renderColorFillTransparencyContent(this.mergedStrings.fillTransparency,!e.enabled))}),this.renderSection({key:"color-fill",disabled:"non-editable"===e.optional||this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol(),sectionContent:o})}toColorPickerValue(e){return!e||(0,n.i)(e)?null:e.toHex()}renderFillColorContent(){const e=this.sections.fill,t=e.enabled?this.toColorPickerValue(this.fill.color):null;return(0,i.h)("calcite-label",null,this.mergedStrings.fillColor,(0,i.h)("arcgis-color-input",{color:t,clearable:!1!==e.optional,onArcgisColorInputChange:t=>{const o=t.currentTarget.color;if(!o)return void this.onFillEnabledChange(!1);e.enabled||this.onFillEnabledChange(!0);const i=(0,n.c)(o),{color:r}=this.fill,l=k(r,Object.assign(Object.assign(Object.assign({},r),i),{a:r.a})),s={color:(0,n.c)(l)};this.fill=s,this.arcgisSymbolStylerFillChange.emit(s),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))}getStrokeString(e){return this.mergedStrings["line"===this.editGeometry?e:`stroke${t=e,t.charAt(0).toUpperCase()+t.slice(1)}`];var t}isSupportedSymbolLayerType(e){return"CIMVectorMarker"===e||"CIMSolidFill"===e||"CIMSolidStroke"===e||"CIMHatchFill"===e||"CIMPictureFill"===e||"CIMPictureStroke"===e||"CIMPictureMarker"===e}getSymbolLayerPreviewSymbol(e,t){var o;const i={data:{type:"CIMSymbolReference",symbol:{type:"point"===t?"CIMPointSymbol":"line"===t?"CIMLineSymbol":"CIMPolygonSymbol",symbolLayers:[e]}}};return"CIMVectorMarker"===e.type&&(i.data.symbol.angle=null!==(o=e.rotation)&&void 0!==o?o:0),new l.e.CIMSymbol(i)}renderCIMVectorMarkerSymbolLayerBlocks(e,t){if("minimal"===this.mode)return null;const{sections:{marker:{parts:{size:o,rotation:a}},stroke:{extraParts:{autoStrokeAdjust:c}}},marker:h,mergedStrings:d}=this,m="object"==typeof o&&(null==o?void 0:o.autoSizeAdjust),b=this.getSymbolLayerPreviewSymbol(e,"point"),S=l.e.cimSymbolUtils.getCIMSymbolSize(b),k=l.e.cimSymbolUtils.getCIMSymbolRotation(b,!0),C=function(e){const t=new Set;return t.add(y(e,(e=>{if("CIMSolidFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMPictureMarker"===e.type)return"fill"}))),t.add(y(e,(e=>{if("CIMSolidStroke"===e.type||"CIMPictureStroke"===e.type)return"stroke"}))),Array.from(t).filter(Boolean)}(e),f=[];if(C.includes("fill")&&(!this.isFillColorRamp()||e.colorLocked)){const t=g(e,"fill"),o=[(0,i.h)("calcite-label",{key:"fill-color"},1===C.length?d.color:d.fillColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(t),clearable:!0,onArcgisColorInputChange:o=>{const i=(0,n.c)(o.currentTarget.color);(0,n.i)(i)||(0,n.i)(t)||(i.a=t.a),u(e,i,"fill"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),(0,i.h)("calcite-label",{key:"fill-transparency"},1===C.length?d.transparency:d.fillTransparency,(0,i.h)("arcgis-slider-input",{min:r.o,max:r.k,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,p.a)(t.a)),onArcgisSliderInputValueChange:o=>{const i=o.detail,r=(0,p.t)(i),l=t.clone();l.a=r,u(e,l,"fill"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===C.length?d.transparency:d.fillTransparency}))];f.push(o)}if(C.includes("stroke")){const t=g(e,"stroke"),o=function(e,t){let o=0;return y(e,(e=>{"fill"===t&&("CIMVectorMarker"!==e.type&&"CIMPictureMarker"!==e.type||e.size>o&&(o=e.size)),"stroke"===t&&("CIMSolidStroke"!==e.type&&"CIMPictureStroke"!==e.type||e.width>o&&(o=e.width))})),o}(e,"stroke"),l=[(0,i.h)("calcite-label",{key:"stroke-color"},1===C.length?d.color:d.strokeColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(t),clearable:!0,onArcgisColorInputChange:o=>{const i=(0,n.c)(o.currentTarget.color);(0,n.i)(i)||(0,n.i)(t)||(i.a=t.a),u(e,i,"stroke"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),(0,i.h)("calcite-label",{key:"stroke-transparency"},1===C.length?d.transparency:d.strokeTransparency,(0,i.h)("arcgis-slider-input",{min:r.o,max:r.k,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,p.a)(t.a)),onArcgisSliderInputValueChange:o=>{const i=o.detail,r=(0,p.t)(i),l=t.clone();l.a=r,u(e,l,"stroke"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===C.length?d.transparency:d.strokeTransparency})),(0,i.h)("calcite-label",{key:"stroke-width"},1===C.length?d.width:d.strokeWidth,(0,i.h)("arcgis-slider-input",{disabled:c&&"editable"!==c&&this.stroke.autoAdjusted,min:this.cimStrokeWidthBounds.min,max:this.cimStrokeWidthBounds.max,step:1,unitsLabel:d.px,value:O((0,s.a)(o)),onArcgisSliderInputValueChange:t=>{const o=t.detail;!function(e,t,o){y(e,(e=>{"fill"===o&&("CIMVectorMarker"!==e.type&&"CIMPictureMarker"!==e.type||(e.size=t)),"stroke"===o&&("CIMSolidStroke"!==e.type&&"CIMPictureStroke"!==e.type||(e.width=t))}))}(e,x((0,s.p)(o)),"stroke"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===C.length?d.width:d.strokeWidth}))];f.push(l)}const v=(0,i.h)("div",{class:r.C.contentGroup,key:`${t}__vector-marker-symbol-layer`},[...f],o&&(0,i.h)("calcite-label",null,d.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:m&&"editable"!==m&&h.autoAdjusted,min:r.n,max:r.q,step:1,unitsLabel:d.px,value:O((0,s.a)(S)),onArcgisSliderInputValueChange:e=>{const t=e.detail;this.setMarkerSymbolLayerSize(b,t),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:d.symbolSize})),a&&(0,i.h)("calcite-label",null,d.rotation,(0,i.h)("arcgis-slider-input",{min:r.r,max:r.l,step:1,unitsLabel:"\xba",flipLabels:"rtl"===this.dir,value:I(k),onArcgisSliderInputValueChange:e=>{const t=e.detail;l.e.cimSymbolUtils.applyCIMSymbolRotation(b,I(t),!0),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:d.rotation})),this.renderCIMMarkerPlacementSection(e)),w=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__symbol-layer-preview`,symbol:w,options:r.p,slot:"icon"}),key:`${t}__symbol-layer`,heading:d.vectorMarker,content:v})}setMarkerSymbolLayerSize(e,t){(0,l.j)(this.activeSymbol)?e.data.symbol.symbolLayers[0].size=x((0,s.p)(t)):l.e.cimSymbolUtils.scaleCIMSymbolTo(e,x((0,s.p)(t)))}renderCIMSolidFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return null;const l=(0,n.c)(e.color,!0),s=(0,n.i)(l);let a=null,c=null;this.isFillColorRamp()&&!e.colorLocked||(a=(0,i.h)("calcite-label",null,this.mergedStrings.fillColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l),clearable:!0,onArcgisColorInputChange:t=>{const o=(0,n.c)(t.currentTarget.color);(0,n.i)(o)||s||(o.a=l.a),e.color=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),c=(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:r.o,max:r.k,step:1,unitsLabel:"%",value:Math.round((0,p.a)(l.a)),disabled:s,onArcgisSliderInputValueChange:t=>{const o=t.detail,i=(0,p.t)(o),r=l.clone();r.a=i,e.color=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})));const h=a||c?(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__solid-fill-symbol-layer-content`},a,(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:s},c)):(0,i.h)("calcite-label",null,this.mergedStrings.emptySymbolLayerMsg);if(o)return h;const d=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-fill-symbol-layer-preview`,symbol:d,slot:"icon"}),heading:this.mergedStrings.solidFill,key:`${t}__solid-fill-symbol-layer`,content:h})}renderCIMSolidStrokeSymbolLayerBlock(e,t,o=!1,l){if("minimal"===this.mode)return null;const a=(0,n.c)(e.color,!0),c="CIMHatchFill"===(null==l?void 0:l.type),h=c&&this.isFillColorRamp(),d=this.sections.stroke.extraParts.autoStrokeAdjust,m=(0,n.i)(a);let y=null,b=null;this.isStrokeColorRamp()&&!e.colorLocked||(y=(0,i.h)("calcite-label",{key:"stroke-color"},o?this.mergedStrings.strokeColor:this.mergedStrings.color,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(a),clearable:!0,onArcgisColorInputChange:t=>{const o=(0,n.c)(t.currentTarget.color);(0,n.i)(o)||m||(o.a=a.a),e.color=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),b=(0,i.h)("calcite-label",{key:"stroke-transparency"},o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:r.o,max:r.k,step:1,unitsLabel:"%",value:Math.round((0,p.a)(a.a)),disabled:m,onArcgisSliderInputValueChange:t=>{const o=t.detail,i=(0,p.t)(o),r=a.clone();r.a=i,e.color=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency})));const u=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__solid-stroke-symbol-layer-content`},h?null:y,(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:m},h?null:b,(0,i.h)("calcite-label",null,o?this.mergedStrings.strokeWidth:this.mergedStrings.width,(0,i.h)("arcgis-slider-input",{disabled:m||d&&"editable"!==d&&this.stroke.autoAdjusted,min:this.cimStrokeWidthBounds.min,max:this.cimStrokeWidthBounds.max,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(e.width)),onArcgisSliderInputValueChange:t=>{const o=t.detail;e.width=x((0,s.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:o?this.mergedStrings.strokeWidth:this.mergedStrings.width}))),c?this.renderCIMHatchFillPatternSection(l):null);if(o)return u;const g=c?this.getSymbolLayerPreviewSymbol(Object.assign(Object.assign({},l),{lineSymbol:{type:"CIMLineSymbol",symbolLayers:[e]}}),"polygon"):this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-stroke-symbol-layer-preview`,symbol:g,slot:"icon"}),heading:c?this.mergedStrings.hatchFill:this.mergedStrings.solidStroke,key:`${t}__solid-stroke-symbol-layer`,content:u})}renderCIMHatchFillSymbolLayerBlocks(e,t){return this.renderCIMSymbolLayersContent(e.lineSymbol,`${t}__hatch-symbol-fill-symbol-layers`,!1,e).flat()}renderCIMHatchFillPatternSection(e){var t,o,l;const{mergedStrings:s}=this,n=null!==(t=e.offsetX)&&void 0!==t?t:0;return(0,i.h)("calcite-block-section",{key:"hatch-fill-pattern",text:s.pattern},(0,i.h)("calcite-label",null,s.rotation,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:r.l,min:r.r,onArcgisSliderInputValueChange:t=>{const o=t.detail;e.rotation=Math.abs(o),this.setInternalSymbol(this.symbol,!0)},step:1,unitsLabel:"\xba",value:null!==(o=e.rotation)&&void 0!==o?o:0,withSteppers:!this.narrow,label:s.rotation})),(0,i.h)("calcite-label",null,s.separation,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:r.v,min:r.w,onArcgisSliderInputValueChange:t=>{const o=t.detail;e.separation=o,this.setInternalSymbol(this.symbol,!0)},step:1,value:null!==(l=e.separation)&&void 0!==l?l:0,unitsLabel:s.px,withSteppers:!this.narrow,label:s.separation})),(0,i.h)("calcite-label",null,s.offset,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:r.t,min:r.u,onArcgisSliderInputValueChange:t=>{const o=t.detail;e.offsetX=o,e.offsetY=o,this.setInternalSymbol(this.symbol,!0)},step:1,value:n,unitsLabel:s.px,withSteppers:!this.narrow,label:s.offset})))}renderCIMPictureMarkerSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return null;const l=(0,n.c)(e.tintColor,!0),{sections:{marker:{parts:{size:a}}},marker:c}=this,h="object"==typeof a&&(null==a?void 0:a.autoSizeAdjust),d=this.getSymbolLayerPreviewSymbol(e,"point"),m=(0,n.i)(l),y=(0,i.h)("div",{key:`${t}__picture-marker-symbol-layer`},(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-marker-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l),clearable:!0,onArcgisColorInputChange:t=>{const o=(0,n.c)(t.currentTarget.color);(0,n.i)(o)||m||(o.a=l.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:m},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:r.o,max:r.k,step:1,unitsLabel:"%",value:Math.round((0,p.a)(l.a)),disabled:m,onArcgisSliderInputValueChange:t=>{const o=t.detail,i=(0,p.t)(o),r=l.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:m||h&&"editable"!==h&&c.autoAdjusted,min:r.n,max:r.q,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(e.size)),onArcgisSliderInputValueChange:e=>{const t=e.detail;this.setMarkerSymbolLayerSize(d,t),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})))),this.renderCIMMarkerPlacementSection(e),this.renderCIMPictureMarkerAnimationSection(e));if(o)return y;const b=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-fill-symbol-layer-preview`,symbol:b,options:r.p,slot:"icon"}),heading:this.mergedStrings.pictureMarker,key:`${t}__picture-marker-symbol-layer`,content:y})}sanitizePointPreviewSymbolLayer(e){return Object.assign(Object.assign({},e),{markerPlacement:void 0})}renderCIMPictureStrokeSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return null;const l=(0,n.c)(e.tintColor,!0),{sections:{marker:{parts:{size:a}}},marker:c}=this,h="object"==typeof a&&(null==a?void 0:a.autoSizeAdjust),d=(0,n.i)(l),m=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-stroke-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l),clearable:!0,onArcgisColorInputChange:t=>{const o=(0,n.c)(t.currentTarget.color);(0,n.i)(o)||d||(o.a=l.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:d},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:r.o,max:r.k,step:1,unitsLabel:"%",value:Math.round((0,p.a)(l.a)),disabled:d,onArcgisSliderInputValueChange:t=>{const o=t.detail,i=(0,p.t)(o),r=l.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:d||h&&"editable"!==h&&c.autoAdjusted,min:r.n,max:r.q,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(e.width)),onArcgisSliderInputValueChange:t=>{const o=t.detail;e.width=x((0,s.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize}))));if(o)return m;const y=this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__picture-stroke-symbol-layer-preview`,symbol:y,slot:"icon"}),heading:this.mergedStrings.pictureStroke,key:`${t}__picture-stroke-symbol-layer`,content:m})}renderCIMPictureFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return null;const l=(0,n.c)(e.tintColor,!0),{sections:{marker:{parts:{size:a}}},marker:c}=this,h="object"==typeof a&&(null==a?void 0:a.autoSizeAdjust),d=(0,n.i)(l),m=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-fill-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor,(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l),clearable:!0,onArcgisColorInputChange:t=>{const o=(0,n.c)(t.currentTarget.color);(0,n.i)(o)||d||(o.a=l.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:d},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:r.o,max:r.k,step:1,unitsLabel:"%",value:Math.round((0,p.a)(l.a)),disabled:d,onArcgisSliderInputValueChange:t=>{const o=t.detail,i=(0,p.t)(o),r=l.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:d||h&&"editable"!==h&&c.autoAdjusted,min:r.n,max:r.q,step:1,unitsLabel:this.mergedStrings.px,value:O((0,s.a)(e.height)),onArcgisSliderInputValueChange:t=>{const o=t.detail;e.height=x((0,s.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize}))));if(o)return m;const y=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__picture-fill-symbol-layer-preview`,symbol:y,slot:"icon"}),heading:this.mergedStrings.pictureFill,key:`${t}__picture-fill-symbol-layer`,content:m})}renderCIMPictureMarkerAnimationSection(e){var t,o,l;const{dir:s,mergedStrings:n}=this,{animatedSymbolProperties:a}=e;return a?(0,i.h)("calcite-block-section",{key:"picture-marker-animation",text:n.animation},(0,i.h)("calcite-label",{dir:s,layout:"inline"},(0,i.h)("calcite-checkbox",{checked:a.playAnimation,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;a.playAnimation=t,this.setInternalSymbol(this.symbol,!0)}}),n.playAnimation),(0,i.h)("calcite-label",{dir:s,layout:"inline"},(0,i.h)("calcite-checkbox",{checked:a.reverseAnimation,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;a.reverseAnimation=t,this.setInternalSymbol(this.symbol,!0)}}),n.reverseAnimation),(0,i.h)("calcite-label",null,n.startTimeOffset,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;a.randomizeStartTime="random"===t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"random",checked:a.randomizeStartTime},n.randomized),(0,i.h)("calcite-segmented-control-item",{value:"manual",checked:!a.randomizeStartTime},n.manualOffset))),(0,i.h)("calcite-label",null,n.manualOffset,(0,i.h)("arcgis-slider-input",{disabled:a.randomizeStartTime,max:r.x,min:r.y,onArcgisSliderInputValueChange:e=>{const t=e.detail;a.startTimeOffset=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:null!==(t=a.startTimeOffset)&&void 0!==t?t:0,withSteppers:!this.narrow,label:n.manualOffset})),(0,i.h)("calcite-label",null,n.duration,(0,i.h)("arcgis-slider-input",{max:r.x,min:r.y,onArcgisSliderInputValueChange:e=>{const t=e.detail;a.duration=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:null!==(o=a.duration)&&void 0!==o?o:0,withSteppers:!this.narrow,label:n.duration})),(0,i.h)("calcite-label",null,n.repeatType,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;a.repeatType=t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"None",checked:"None"===a.repeatType},n.none),(0,i.h)("calcite-segmented-control-item",{value:"Loop",checked:"Loop"===a.repeatType},n.loop),(0,i.h)("calcite-segmented-control-item",{value:"Oscillate",checked:"Oscillate"===a.repeatType},n.oscillate))),(0,i.h)("calcite-label",null,n.repeatDelay,(0,i.h)("arcgis-slider-input",{max:r.x,min:r.y,onArcgisSliderInputValueChange:e=>{const t=e.detail;a.repeatDelay=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:null!==(l=a.repeatDelay)&&void 0!==l?l:0,withSteppers:!this.narrow,label:n.repeatDelay}))):null}renderCIMMarkerPlacementSection(e){const{dir:t,mergedStrings:o}=this,{markerPlacement:l}=e;return"CIMMarkerPlacementInsidePolygon"!==(null==l?void 0:l.type)||"Random"!==(null==l?void 0:l.gridType)&&"Fixed"!==(null==l?void 0:l.gridType)?null:(0,i.h)("calcite-block-section",{key:"marker-placement",text:o.markerPlacement},(0,i.h)("calcite-label",null,o.gridType,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;l.gridType=t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"Fixed",checked:"Fixed"===l.gridType},o.fixed),(0,i.h)("calcite-segmented-control-item",{value:"Random",checked:"Random"===l.gridType},o.random))),(0,i.h)("calcite-label",null,o.randomness,(0,i.h)("arcgis-slider-input",{disabled:"Fixed"===l.gridType,flipLabels:this.percentLabelFlip,max:r.B,min:r.D,onArcgisSliderInputValueChange:e=>{const t=e.detail;l.randomness=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:l.randomness,unitsLabel:"%",withSteppers:!this.narrow,label:o.randomness})),(0,i.h)("calcite-label",null,o.stepX,(0,i.h)("arcgis-slider-input",{max:r.z,min:r.A,onArcgisSliderInputValueChange:e=>{const t=e.detail;l.stepX=x((0,s.p)(t)),this.setInternalSymbol(this.symbol,!0)},step:1,value:O((0,s.a)(l.stepX)),unitsLabel:o.px,withSteppers:!this.narrow,label:o.stepX})),(0,i.h)("calcite-label",null,o.stepY,(0,i.h)("arcgis-slider-input",{max:r.z,min:r.A,onArcgisSliderInputValueChange:e=>{const t=e.detail;l.stepY=x((0,s.p)(t)),this.setInternalSymbol(this.symbol,!0)},step:1,unitsLabel:o.px,value:O((0,s.a)(l.stepY)),withSteppers:!this.narrow,label:o.stepY})),(0,i.h)("calcite-label",{dir:t,layout:"inline"},(0,i.h)("calcite-checkbox",{checked:l.shiftOddRows&&"Fixed"===l.gridType,disabled:"Random"===l.gridType,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;l.shiftOddRows=t,this.setInternalSymbol(this.symbol,!0)}}),o.shiftOddRows))}renderColorFillTransparencyContent(e,t){var o,r;const{fill:l}=this;return(0,i.h)("calcite-label",null,e,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,p.a)(null!==(r=null===(o=l.color)||void 0===o?void 0:o.a)&&void 0!==r?r:1)),onArcgisSliderInputValueChange:e=>this.onColorFillTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:t,label:e}))}renderColorRampFillBlock(e=!1){const t=this.sections.fill,{parts:o}=t;if(this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol())return null;const i=[];return o.colorRamps&&i.push({content:this.renderFillColorRampsContent()}),o.transparency&&i.push({content:this.renderColorRampFillTransparencyContent()}),this.renderSection({key:"color-ramp-fill",disabled:"non-editable"===t.optional,embedded:e,sectionContent:i})}renderFillColorRampsContent(){const{style:e}=this.config.sections.fill,{activeCategory:t,colorRamps:o}=this.sections.fill;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.fill.color,colorRamps:o,heading:this.mergedStrings.colors,onCategoryChange:this.onFillColorRampCategoryChange,isSelected:t=>m(this.fill.color,t.stops,"2d"===e),onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{fill:i}=this,r=Object.assign(Object.assign({},i),{color:o});this.fill=r,this.tempStrokeColorRampStateStops=o,this.arcgisSymbolStylerFillChange.emit(r),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}renderRampsContent(e){return(0,i.h)("calcite-label",null,e.heading,(0,i.h)("arcgis-symbol-styler-color-ramp-input",{options:e,strings:this.mergedStrings,popoverProps:this.popoverProps,style:{"--scroller-max-height":"var(--ramp-scroller-max-height)"},ref:this.setRampInputRef}))}renderColorRampFillTransparencyContent(){const{fill:e}=this,t=e.color[0],o=4===t.length?t[3]/255:t.a;return(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,p.a)(o)),onArcgisSliderInputValueChange:e=>this.onColorRampFillTransparencyChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency}))}renderStrokeBlock(){const{stroke:e}=this.config.sections;return"color"===e.type?this.renderColorStrokeBlock():this.renderColorRampStrokeBlock()}renderColorStrokeBlock(){const e=this.sections.stroke,{parts:t}=e,o=[];if((t.suggestedColors||t.customColor)&&o.push({content:this.renderStrokeColorsContent()}),t.transparency||t.extra){const r=[];t.transparency&&r.push(this.showingRampOptionsInStroke()?this.renderColorRampStrokeTransparencyContent(!e.enabled):this.renderColorStrokeTransparencyContent(!e.enabled)),t.extra&&r.push(this.renderStrokeExtraContent(!e.enabled)),o.push({content:(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:!e.enabled},r)})}return this.renderSection({key:"color-stroke",disabled:"non-editable"===e.optional||this.hasActivePictureMarkerSymbol(),sectionContent:o})}renderStrokeColorRampsContent(){const{style:e}=this.config.sections.stroke,{activeCategory:t,colorRamps:o}=this.sections.stroke;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.stroke.color,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:this.onStrokeColorRampCategoryChange,isSelected:e=>m(this.stroke.color,e.stops),onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,r=Object.assign(Object.assign({},i),{color:o});this.stroke=r,this.arcgisSymbolStylerStrokeChange.emit(w(r)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipStrokeColorRamps})}showingRampOptionsInStroke(){const e=this.config.sections.stroke,t=v(this.activeSymbol),o=this.sections.fill.type;return t&&"color-ramp"===o&&"color"===e.type}renderStrokeColorsContent(){const e=this.sections.stroke;if(this.showingRampOptionsInStroke()){const e=this.tempStrokeColorRampStateActiveCategory,{style:t}=this.config.sections.fill,{colorRamps:o}=this.sections.fill;return this.renderRampsContent({style:t,activeCategory:e,colorRampStops:this.tempStrokeColorRampStateStops,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-value");this.tempStrokeColorRampStateActiveCategory=t,e.stopPropagation()},isSelected:e=>m(this.tempStrokeColorRampStateStops,e.stops),onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,r=Object.assign(Object.assign({},i),{color:o});this.stroke=r,this.tempStrokeColorRampStateStops=o,this.arcgisSymbolStylerStrokeChange.emit(w(r)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}const t=e.enabled?this.toColorPickerValue(this.stroke.color):null;return(0,i.h)("calcite-label",null,this.getStrokeString("color"),(0,i.h)("arcgis-color-input",{color:t,clearable:!1!==e.optional,onArcgisColorInputChange:t=>{const o=t.currentTarget.color;if(!o)return void this.onStrokeEnabledChange(!1);e.enabled||this.onStrokeEnabledChange(!0);const i=(0,n.c)(o),r=this.stroke.color,{stroke:l}=this,s=Object.assign(Object.assign({},l),{color:(0,n.c)(k(r,Object.assign(Object.assign(Object.assign({},r),i),{a:r.a})))});this.stroke=s,this.arcgisSymbolStylerStrokeChange.emit(w(s)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:r.j,ref:this.setColorInputRef}))}renderColorStrokeTransparencyContent(e){const{stroke:t}=this;return(0,i.h)("calcite-label",null,this.getStrokeString("transparency"),(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,p.a)(t.color.a)),onArcgisSliderInputValueChange:e=>this.onColorStrokeTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:e,label:this.getStrokeString("transparency")}))}renderStrokeExtraContent(e){var t,o;const{sections:{stroke:{extraParts:{arrow:s,autoStrokeAdjust:n,style:a,width:h}}},stroke:d}=this,p="line"===this.editGeometry,m="polygon"===this.editGeometry,y=p?.1:0,b=(0,l.i)(this.symbol),u=!b&&a&&(p||m),g=!b&&s&&p,S=!b&&h,k=!b&&n,C=(0,c.g)(this.el),f=F(d.marker);return(0,i.h)("div",{class:r.C.contentGroup},S?(0,i.h)("calcite-label",{dir:C,key:"width-options"},this.getStrokeString("width"),(0,i.h)("arcgis-slider-input",{disabled:e||n&&"editable"!==n&&d.autoAdjusted,min:y,max:18,step:1,unitsLabel:this.mergedStrings.px,value:d.size,onArcgisSliderInputValueChange:e=>this.onStrokeWidthChange(e.detail),withSteppers:!this.narrow,label:this.getStrokeString("width")})):null,k?this.renderAutoAdjust(C,d.autoAdjusted,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null,g?(0,i.h)("calcite-label",{dir:C,key:"arrow-options"},this.mergedStrings.arrow,(0,i.h)("calcite-dropdown",{class:{[r.C.iconDropdown]:!0,[r.C.arrowDropdown]:!0},onCalciteDropdownSelect:this.onStrokeArrowChange,widthScale:"l",placement:"top-end","overlay-positioning":null===(t=this.popoverProps)||void 0===t?void 0:t.overlayPositioning,scale:"s"},(0,i.h)("div",{role:"button",slot:"trigger",tabIndex:0},(0,i.h)("div",{"data-arrow":f,class:r.C.iconDropdownSelected,style:this.getSelectedArrowPatternStyle()}),(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,i.h)("calcite-dropdown-group",null,r.s.map((e=>(0,i.h)("calcite-dropdown-item",{selected:e===f,"data-arrow":e},(0,i.h)("div",{class:r.C.iconDropdownItemContent,"data-arrow":e,style:this.getArrowPatternOptionStyle()}))))))):null,u?(0,i.h)("calcite-label",{dir:C,key:"pattern-options"},this.mergedStrings.pattern,(0,i.h)("calcite-dropdown",{class:{[r.C.iconDropdown]:!0,[r.C.styleDropdown]:!0},onCalciteDropdownSelect:this.onStrokeStyleChange,widthScale:"l",placement:"top-end","overlay-positioning":null===(o=this.popoverProps)||void 0===o?void 0:o.overlayPositioning,scale:"s",maxItems:7},(0,i.h)("div",{role:"button",slot:"trigger",tabIndex:0},(0,i.h)("div",{class:r.C.iconDropdownSelected,style:this.getLinePatternStyle(d.style)}),(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,i.h)("calcite-dropdown-group",null,r.b.map((e=>(0,i.h)("calcite-dropdown-item",{selected:e===d.style,"data-style":e},(0,i.h)("div",{style:this.getLinePatternStyle(e),class:r.C.iconDropdownItemContent}))))))):null)}renderColorRampStrokeBlock(e=!1){const t=this.sections.stroke,o=t.parts,i=[];return o.colorRamps&&i.push({content:this.renderStrokeColorRampsContent()}),o.transparency&&i.push({content:this.renderColorRampStrokeTransparencyContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),o.extra&&i.push({content:this.renderStrokeExtraContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),this.renderSection({key:"color-ramp-stroke",disabled:"non-editable"===t.optional||this.hasActivePictureMarkerSymbol(),embedded:e,sectionContent:i})}renderColorRampStrokeTransparencyContent(e){const{stroke:t}=this;return(0,i.h)("calcite-label",null,this.getStrokeString("transparency"),(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,p.a)(t.color[0].a)),onArcgisSliderInputValueChange:e=>this.onColorRampStrokeTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:e,label:this.getStrokeString("transparency")}))}checkPopoverMaxHeight(){var e,t,o;if(this.flowEl&&this.popoverProps&&(!this.popoverProps.maxHeight||this.autoCalcHeight)){this.autoCalcHeight=!0;const i=this.flowEl.getBoundingClientRect(),r=window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientHeight)||(null===(t=document.body)||void 0===t?void 0:t.clientHeight)||0,l=r&&(null==i?void 0:i.top)?r-i.top-30:0;this.popoverProps.maxHeight=Math.max(l||i.height,250)-(null!==(o=this.popoverProps.offsetDistance)&&void 0!==o?o:0)-5+"px"}}static get assetsDirs(){return["assets"]}get el(){return(0,i.d)(this)}static get watchers(){return{builtInStrings:["handleStringChanges"],stringOverrides:["handleStringChanges"]}}};B.style='button{overflow:hidden;background-color:var(--arcgis-symbol-styler-inline-input-trigger-background-color);align-items:center;border:none;border-radius:0;box-sizing:border-box;cursor:pointer;display:flex;font-family:inherit;gap:8px;height:100%;justify-content:center;outline-color:transparent;outline-offset:0;padding:3px 0;padding-inline:3px 8px;position:relative;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;text-align:center;-webkit-appearance:none;width:100%}button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}button:hover{text-decoration:none}:host{min-width:240px;height:-moz-min-content;height:min-content;display:flex;flex:1 1 auto;flex-flow:column nowrap;align-items:stretch}calcite-dropdown{width:100%}calcite-flow{height:100%}.color-locked-info{display:flex;gap:4px;margin:8px 0;align-items:center}.color-locked-info calcite-icon{color:var(--calcite-color-text-3)}.icon-dropdown{padding:0.25rem 0 0 0;width:100%;background-color:var(--arcgis-app-background);height:2.25rem;border:1px solid #a9a9a9;box-shadow:inset 0 1px 2px rgba(0, 0, 0, 0.075)}.icon-dropdown--selected{cursor:pointer;margin-left:12px;height:3px;width:100%}.icon-dropdown .icon-dropdown-item-content,.icon-dropdown--selected{background-position:center;background-clip:content-box;background-origin:content-box;padding-left:0;padding-right:0}.icon-dropdown .icon-dropdown-item-content{height:30px;width:200px}.arcgis--rtl .icon-dropdown--selected{margin-right:12px}.style-dropdown [slot=trigger]{width:100%;display:flex;justify-content:space-between;align-items:center}.style-dropdown [slot=trigger] calcite-icon{margin:8px;background-color:#fff}.style-dropdown [slot=trigger],.style-dropdown .icon-dropdown-item-content{background-repeat:repeat-x}.arrow-dropdown [slot=trigger]{width:100%;display:flex;justify-content:space-between;align-items:center}.arrow-dropdown [slot=trigger] .icon-dropdown--selected{height:30px;background-size:100% 119px}.arrow-dropdown [slot=trigger] calcite-icon{margin:8px;background-color:#fff}.arrow-dropdown [slot=trigger] .icon-dropdown--selected,.arrow-dropdown .icon-dropdown-item-content{background-repeat:no-repeat}.arrow-dropdown [slot=trigger] .icon-dropdown--selected[data-arrow=none],.arrow-dropdown .icon-dropdown-item-content[data-arrow=none]{background-position:0 0}.arrow-dropdown [slot=trigger] .icon-dropdown--selected[data-arrow=begin],.arrow-dropdown .icon-dropdown-item-content[data-arrow=begin]{background-position:0 -32px}.arrow-dropdown [slot=trigger] .icon-dropdown--selected[data-arrow=end],.arrow-dropdown .icon-dropdown-item-content[data-arrow=end]{background-position:0 -61px}.arrow-dropdown [slot=trigger] .icon-dropdown--selected[data-arrow=begin-end],.arrow-dropdown .icon-dropdown-item-content[data-arrow=begin-end]{background-position:0 -91px}.content-group{display:flex;flex-direction:column}.content-group label{margin:8px 0 0 0}.color-ramp-selection{padding:4px}.section-toggle--disabled{pointer-events:none;opacity:0.5}.swatch-item{box-sizing:border-box;height:16px;width:16px;border-radius:2px;box-shadow:0 0 0 1px rgba(0, 0, 0, 0.33)}calcite-input[disabled] [data-adjustment]{pointer-events:none}arcgis-symbol-styler-section calcite-block{overflow:visible;margin:0 -12px}arcgis-symbol-styler-section calcite-block[open]:before{content:"";height:16px;display:flex;background-color:var(--calcite-color-foreground-2)}arcgis-symbol-styler-section calcite-block:nth-of-type(n+1){border-bottom:1px solid #f0f0f0}arcgis-symbol-styler-section calcite-block:last-child{border-bottom:none}arcgis-symbol-styler-section calcite-block arcgis-symbol-styler-section:nth-of-type(2){margin-top:12px}calcite-panel{overflow:visible;margin-top:0}.input-color{flex-wrap:nowrap;gap:8px;align-items:center}calcite-tooltip{max-width:250px}calcite-tooltip:not([open]){visibility:hidden;pointer-events:none}.message{margin-top:8px}arcgis-symbol-styler-symbol-preview[slot=icon]{width:32px;height:32px;padding:2px;display:flex;align-items:center;justify-content:center}.container{display:flex;padding:8px 12px;align-items:center;justify-content:center;width:100%;gap:8px;flex-grow:1}.symbol{height:32px;display:flex;justify-content:center;align-items:center}.label{flex-grow:1;display:flex;justify-content:flex-start}.change-symbol-trigger{border:1px solid #949494}.symbol-selection-panel{min-height:min(100vh - 200px, 500px);display:flex;flex-direction:column}.symbol-selection-panel arcgis-item-palette .palette{gap:8px}.symbol-selection-panel calcite-notice:first-of-type{margin:auto 0 0 0}.symbol-selection-panel calcite-label{margin:16px 12px 0 12px}.symbol-selection-panel calcite-panel{overflow:visible}.section{display:flex;flex-direction:column;background-color:var(--arcgis-app-background)}'},82748:(e,t,o)=>{o.d(t,{c:()=>l,i:()=>s});var i=o(94278);const r=[0,0,0,0];function l(e,t=!1){const o=null!=e?e:r;return t?i.e.Color.fromJSON(o):new i.e.Color(o)}function s({r:e,g:t,b:o,a:i}){return 0===e&&0===t&&0===o&&0===i}},25380:(e,t,o)=>{o.d(t,{A:()=>w,B:()=>I,C:()=>i,D:()=>O,E:()=>z,F:()=>r,a:()=>u,b:()=>s,c:()=>c,d:()=>n,e:()=>h,f:()=>F,g:()=>a,h:()=>d,i:()=>x,j:()=>p,k:()=>y,l:()=>S,m:()=>g,n:()=>f,o:()=>b,p:()=>m,q:()=>C,r:()=>k,s:()=>l,t:()=>j,u:()=>R,v:()=>M,w:()=>P,x:()=>A,y:()=>L,z:()=>v});const i={customSymbolContent:"custom-symbol-content",autoAdjustLabel:"auto-adjust-label",styleDropdown:"style-dropdown",arrowDropdown:"arrow-dropdown",iconDropdown:"icon-dropdown",iconDropdownSelected:"icon-dropdown--selected",iconDropdownItemContent:"icon-dropdown-item-content",colorRampFlipper:"color-ramp-flipper",scroller:"scroller",colorRampSelection:"color-ramp-selection",sectionToggleDisabled:"section-toggle--disabled",autoAdjustCheckbox:"auto-adjust-checkbox",contentGroup:"content-group",colorLockedInfo:"color-locked-info",message:"message",container:"container",label:"label",openIcon:"open-icon",symbol:"symbol",changeSymbolTrigger:"change-symbol-trigger"},r={all:["*"],light:["light"],dark:["dark"],redsAndYellows:["oranges","reds","yellows"],greens:["greens"],blues:["blues"],purplesAndPinks:["purples","pinks"],browns:["browns"],grays:["grays"],bright:["bright"],subdued:["subdued"],colorblindFriendly:["colorblind-friendly"]},l=["none","begin","end","begin-end"],s=["solid","dash","dot","dash-dot","long-dash-dot-dot","short-dash","short-dot","short-dash-dot","short-dash-dot-dot","long-dash","long-dash-dot"],n={size:!0,preview:!0,rotation:!0},a={style:!0,arrow:!0,width:!0,autoStrokeAdjust:!1},c={suggestedColors:!0,customColor:!0,transparency:!0},h={colorRamps:!0,transparency:!0},d={extra:!0},p="arcgis-symbol-styler-storage-colors",m={size:24,maxSize:24},y=100,b=0,u=18,g=0,S=360,k=0,C=150,f=1,v=200,w=0,I=100,O=0,x=10,M=200,P=0,j=100,R=0,A=120,L=0;function F(e,t=!1){return t?function(e){const t=Math.sqrt(e.length),o=z(e).reverse(),i=[];for(let e=0;e<t;e++){const t=[];o.forEach((o=>t.push(o[e]))),i.push(t)}return function(e,t){let o=[];e=e.slice().map((e=>e.slice()));const i=(t||"HH").split(""),r=i[0],l=i[1];"L"===r&&e.reverse();const s="H"===l;return e.forEach((e=>{s&&e.slice().reverse(),o=o.concat(e)})),o}(i).reverse()}(e):e.slice().reverse()}function z(e,t){let o=[];const i=Math.sqrt(e.length),r=(t||"HH").split(""),l=r[0],s="H"!==r[1];for(let t=0;t<i;t++){let r=[];for(let o=0;o<i;o++){const l=t*i+o;r.push(e[l])}s&&r.reverse(),o.push(r)}return"L"===l&&o.reverse(),o}},11246:(e,t,o)=>{o.d(t,{a:()=>c,b:()=>p,c:()=>r,d:()=>i,e:()=>l,f:()=>h,g:()=>m,i:()=>s,m:()=>n,t:()=>a,u:()=>d});const i=(e,t)=>{let o,i="idle";const r=(...r)=>new Promise((l=>{switch(i){case"flushed":i="idle",o?(clearTimeout(o),l(e(...r))):l(null);break;case"invoked":clearTimeout(o),i="idle",l(e(...r));break;case"cancelled":clearTimeout(o),i="idle",l(null);break;default:o&&clearTimeout(o),i="pending",o=setTimeout((()=>(i="idle",l(e(...r)))),t)}}));return r.flush=function(...e){return i="flushed",r(...e)},r.invoke=function(...e){return i="invoked",r(...e)},r.cancel=function(...e){return i="cancelled",r(...e)},r.getStatus=function(){return i},r},r=(e,t)=>{let o;return(...i)=>new Promise((r=>{o||(o=setTimeout((()=>{clearTimeout(o),o=void 0,r(e(...i))}),t))}))};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return null!=e}async function n(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:o,data:i}=t(e);return[o,i]}))),h=(e,t)=>e.length===t.length&&e.reduce(((e,o)=>e&&t.indexOf(o)>-1),!0);function d(e,t){const o=[],i={};return e.forEach((e=>{const r=t(e);null==i[r]&&(i[r]=e,o.push(e))})),o}function p(e){const t={boolean:{},number:{},string:{}},o=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(o.indexOf(e)>=0)&&o.push(e)}))}const m=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((o,i)=>e.slice(t*i,t+t*i)))},60496:(e,t,o)=>{o.d(t,{a:()=>r,p:()=>l});const i=96;function r(e){return e?e/72*i:0}function l(e){return e?72*e/i:0}},94278:(e,t,o)=>{o.d(t,{a:()=>n,b:()=>h,c:()=>c,d:()=>a,e:()=>l,f:()=>m,g:()=>r,h:()=>p,i:()=>s,j:()=>d});var i=o(28926);function r(e){return"cim"===e.type?"CIMLineSymbol"===e.data.symbol.type?"line":"CIMPolygonSymbol"===e.data.symbol.type?"polygon":"point":"simple-marker"===e.type||"picture-marker"===e.type?"point":"simple-line"===e.type?"line":"polygon"}const l={loaded:!1,async load(){if(this.loaded)return;const[e,t,o,r,l,s,n,a,c,h,d,p,m,y,b,u,g]=await(0,i.l)(["esri/core/screenUtils","esri/Color","esri/portal/Portal","esri/symbols/CIMSymbol","esri/symbols/WebStyleSymbol","esri/core/devEnvironmentUtils","esri/core/promiseUtils","esri/core/urlUtils","esri/portal/PortalItem","esri/symbols/support/previewSymbol2D","esri/symbols/support/gfxUtils","esri/symbols/support/jsonUtils","esri/symbols/support/styleUtils","esri/symbols/support/svgUtils","esri/symbols/support/symbolUtils","esri/symbols/support/cimSymbolUtils","esri/symbols/support/webStyleSymbolUtils"]);this.Color=t,this.Portal=o,this.CIMSymbol=r,this.WebStyleSymbol=l,this.devEnvironmentUtils=s,this.previewSymbol2D=h,this.promiseUtils=n,this.urlUtils=a,this.PortalItem=c,this.gfxUtils=d,this.jsonUtils=p,this.screenUtils=e,this.styleUtils=m,this.svgUtils=y,this.symbolUtils=b,this.cimSymbolUtils=u,this.webStyleSymbolUtils=g,this.loaded=!0}};function s(e){return"cim"===(null==e?void 0:e.type)}function n(e){return"simple-marker"===(null==e?void 0:e.type)}function a(e){return"picture-marker"===(null==e?void 0:e.type)}function c(e){return"simple-line"===(null==e?void 0:e.type)}function h(e){return"simple-fill"===(null==e?void 0:e.type)}function d(e){return"CIMPointSymbol"===e.data.symbol.type}function p(e){return"CIMLineSymbol"===e.data.symbol.type}function m(e){return"CIMPolygonSymbol"===e.data.symbol.type}}}]);