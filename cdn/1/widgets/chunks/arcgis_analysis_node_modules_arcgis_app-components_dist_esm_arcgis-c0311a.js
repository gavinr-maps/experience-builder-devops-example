/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a"],{71700:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>i,c:()=>l,d:()=>n});const n=(0,r(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=n.state,l=n.state,i=n.state},90250:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_feature_layer_from_scratch:()=>f});var n=r(7263),a=r(31670),l=r(11246),i=r(46227),s=r(51325),o=r(99907),c=r(90079),u=r(49712),d=r(17613),p=r(79238);r(11935),r(94788),r(71700),r(57399),r(65215);const f=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.layerNameInputRefs={},this.nameFieldChangedByUser={},this.getDuplicateLayerNameId=()=>{const{layerInfos:e}=this,t={};for(let r=0;r<e.length;r++){const{name:n,id:a}=e[r];if(t[n])return a;t[n]=!0}return null},this.getDefaultName=e=>{const{layerInfos:t}=this,r=t.reduce(((t,r)=>{const n=(a=r.name,parseInt(a.split("_")[1]));var a;return!r.name.startsWith(e)||isNaN(n)?t:t<=n?n+1:t}),1);return`${e}_${r}`},this.addLayer=()=>{const{i18n:e,layerInfos:t,getDefaultName:r,layerNameInputRefs:n}=this,a=e.layer,s=(0,i.g)(),o=r(a);this.layerInfos=[...t,{id:s,type:"point",name:o}],(0,l.t)(100).then((()=>{var e;null===(e=n[s])||void 0===e||e.setFocus()}))},this.deleteLayer=(e,t)=>{const{layerNameInputRefs:r,layerInfos:n,nameFieldChangedByUser:a}=this;1!==n.length&&(this.layerInfos=function(e,t){const r=[...e];return r.splice(t,1),r}(n,t),delete r[e],delete a[e])},this.changeLayerName=(e,t)=>{const{layerInfos:r,nameFieldChangedByUser:n}=this,a=r[e];a.name=t,n[a.id]=!0},this.changeLayerType=(e,t,r)=>{const{layerInfos:n,nameFieldChangedByUser:a,i18n:l,getDefaultName:i}=this,s=Object.assign({},n[e]);a[s.id]||("table"===t&&"table"!==r?s.name=i(l.layer):"table"!==t&&"table"===r&&(s.name=i(l.table))),s.type=r,this.layerInfos=[...n.slice(0,e),s,...n.slice(e+1)]},this.setAlertMessage=e=>{this.alertInfo=this.i18n.error[e]},this.alertInfo=void 0,this.layerInfos=[],this.layerPreference={captureGPS:!1,enableZDefaults:!1,enableMDefaults:!1}}async componentWillLoad(){this.addCreateI18n=o.u.i18n,this.i18n=this.addCreateI18n.featureLayerFromScratch;const{layerPreference:e,newLayerInfos:t}=(0,u.a)();this.layerPreference=e,t.length<=0?this.addLayer():this.layerInfos=[...t]}async handleNext(){var e,t,r;const{layerInfos:n,layerNameInputRefs:l,setAlertMessage:i,getDuplicateLayerNameId:o,newItemUpdatePage:c,layerPreference:p}=this,{portal:f}=a.c,y=null===(e=n.find((e=>!e.name.trim())))||void 0===e?void 0:e.id;if(y)return(0,d.f)("Missing layer name"),null===(t=l[y])||void 0===t||t.setFocus(),void i("emptyName");const m=o();if(m)return(0,d.f)("Layer names must be unique"),null===(r=l[m])||void 0===r||r.setFocus(),void i("duplicateTitle");1===this.layerInfos.length&&(s.i.title=this.layerInfos[0].name),(0,u.b)(this.layerInfos,p,f),c.emit("itemProperties")}render(){const{i18n:e,alertInfo:t,addCreateI18n:r,addLayer:a,layerInfos:l,layerNameInputRefs:i,deleteLayer:s,layerPreference:o,changeLayerName:u,changeLayerType:f}=this;return(0,n.h)(n.H,{key:"d413f06e370c41bd9e200aa03ecf2392e630384f"},(0,n.h)("arcgis-new-item-description",{key:"1976e0e2a24f7159c5b64d84907d12725a93c5cb",header:e.header}),(0,n.h)("div",{key:"2a1e205fc2e9cc2768e675cea7ad42514f6b00f8",class:"add-new-container"},(0,n.h)("div",{key:"e5d579b276c05ed78020b0ef099f868467ff080b",class:"layer-container"},l.map((({id:e,name:t,type:a},o)=>{const d=l[o];return(0,n.h)("li",{class:"info-card",key:e,value:e},(0,n.h)("calcite-input",{value:t,class:"layer-name-input",placeholder:r.featureLayer.placeholders[a],onCalciteInputInput:e=>{const t=e.target;u(o,t.value)},ref:t=>i[e]=t}),(0,n.h)("calcite-combobox",{label:r.featureLayer.type[d.type],class:"layer-type",selectionMode:"single",clearDisabled:!0,onCalciteComboboxChange:e=>{const t=e.target;f(o,d.type,t.selectedItems[0].value)}},c.f.filter((e=>"multipatch"!==e)).map((e=>(0,n.h)("calcite-combobox-item",{textLabel:r.featureLayer.type[e],icon:p.a[e],selected:d.type===e,value:e})))),l.length>1&&(0,n.h)("calcite-button",{appearance:"transparent",kind:"danger",scale:"m",href:"","icon-start":"trash",onClick:()=>s(e,o)}))}))),(0,n.h)("calcite-button",{key:"b6f735e7930e98f5d74327c73fd2d21911f71c21",appearance:"transparent",scale:"m","icon-start":"plus",class:"add-layer",onClick:a},e.add)),(0,n.h)("arcgis-new-item-layer-preference",{key:"6e4479478562e37c435d4234469c02844ff0aebc",i18n:e,defaultPreference:o,onLayerPreferenceChange:e=>{const{layerPreference:t}=this,r=e.detail;!t.captureGPS&&r.captureGPS&&(0,d.e)("captureGPS"),!t.enableZDefaults&&r.enableZDefaults&&(0,d.e)("enableZDefaults"),!t.enableMDefaults&&r.enableMDefaults&&(0,d.e)("enableMDefaults"),this.layerPreference=e.detail}}),(0,n.h)("arcgis-new-item-alert",{key:"fc3b21e6de2fc40f34bd115334c1ed5099d9b708",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,n.d)(this)}};f.style="p{margin-top:0px;margin-bottom:0px}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0px}.add-new-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;padding-bottom:2.5rem;background-color:var(--calcite-color-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;flex-grow:1;align-items:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);border-color:var(--calcite-color-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0px}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;margin-inline-end:1rem;flex-basis:100%}.layer-type:last-child{margin-inline-end:0px}"},31670:(e,t,r)=>{r.d(t,{c:()=>a,o:()=>l});const n=(0,r(11935).c)({portal:null,user:null,api:4,scale:"m"}),a=n.state,l=n.onChange},17613:(e,t,r)=>{r.d(t,{a:()=>p,b:()=>u,c:()=>d,e:()=>o,f:()=>f,i:()=>c});var n=r(31670),a=r(71700);const l="create feature layer",i="my content",s=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},o=e=>{const t=n.c.telemetry;null==t||t.stepWorkflow(l,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:l,attribute:s(a.a.addFeatureLayerType),pageName:i})},c=e=>{const t=n.c.telemetry;null==t||t.stepWorkflow(l,`expand ${e} details`,{category:l,attribute:s(a.a.addFeatureLayerType),pageName:i})},u=()=>{const e=n.c.telemetry;null==e||e.stepWorkflow(l,"filter",{category:l,attribute:s(a.a.addFeatureLayerType),pageName:i})},d=e=>{const t=s(e),r=n.c.telemetry;null==r||r.stepWorkflow(l,"from option",{category:l,attribute:t,pageName:i})},p=()=>{const{addFeatureLayerType:e,serviceInfo:t}=a.a,r=t,o=n.c.telemetry;null==o||o.endWorkflow(l,{category:l,attribute:s(e),pageName:i,count:r.layers.length,number:r.tables.length})},f=e=>{var t;null===(t=n.c.telemetry)||void 0===t||t.logError({category:l,error:e})}},11246:(e,t,r)=>{r.d(t,{a:()=>c,b:()=>p,c:()=>a,d:()=>n,e:()=>l,f:()=>u,g:()=>f,i:()=>i,m:()=>s,t:()=>o,u:()=>d});const n=(e,t)=>{let r,n="idle";const a=(...a)=>new Promise((l=>{switch(n){case"flushed":n="idle",r?(clearTimeout(r),l(e(...a))):l(null);break;case"invoked":clearTimeout(r),n="idle",l(e(...a));break;case"cancelled":clearTimeout(r),n="idle",l(null);break;default:r&&clearTimeout(r),n="pending",r=setTimeout((()=>(n="idle",l(e(...a)))),t)}}));return a.flush=function(...e){return n="flushed",a(...e)},a.invoke=function(...e){return n="invoked",a(...e)},a.cancel=function(...e){return n="cancelled",a(...e)},a.getStatus=function(){return n},a},a=(e,t)=>{let r;return(...n)=>new Promise((a=>{r||(r=setTimeout((()=>{clearTimeout(r),r=void 0,a(e(...n))}),t))}))};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function s(e,t){return await Promise.all([e,o(t)]),e}function o(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:r,data:n}=t(e);return[r,n]}))),u=(e,t)=>e.length===t.length&&e.reduce(((e,r)=>e&&t.indexOf(r)>-1),!0);function d(e,t){const r=[],n={};return e.forEach((e=>{const a=t(e);null==n[a]&&(n[a]=e,r.push(e))})),r}function p(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)}))}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((r,n)=>e.slice(t*n,t+t*n)))},11935:(e,t,r)=>{r.d(t,{c:()=>o});var n=r(7263);const a=e=>!("isConnected"in e)||e.isConnected,l=((e,t)=>{let r;return(...n)=>{r&&clearTimeout(r),r=setTimeout((()=>{r=0,e(...n)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(a))}),2e3),i=e=>"function"==typeof e?e():e,s=(e,t)=>{const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.length--)},o=(e,t)=>{const r=((e,t=((e,t)=>e!==t))=>{const r=i(e);let n=new Map(Object.entries(null!=r?r:{}));const a={dispose:[],get:[],set:[],reset:[]},l=()=>{var t;n=new Map(Object.entries(null!==(t=i(e))&&void 0!==t?t:{})),a.reset.forEach((e=>e()))},o=e=>(a.get.forEach((t=>t(e))),n.get(e)),c=(e,r)=>{const l=n.get(e);t(r,l,e)&&(n.set(e,r),a.set.forEach((t=>t(e,r,l))))},u="undefined"==typeof Proxy?{}:new Proxy(r,{get:(e,t)=>o(t),ownKeys:e=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>n.has(t),set:(e,t,r)=>(c(t,r),!0)}),d=(e,t)=>(a[e].push(t),()=>{s(a[e],t)});return{state:u,get:o,set:c,on:d,onChange:(t,r)=>{const n=d("set",((e,n)=>{e===t&&r(n)})),a=d("reset",(()=>r(i(e)[t])));return()=>{n(),a()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{a.dispose.forEach((e=>e())),l()},reset:l,forceUpdate:e=>{const t=n.get(e);a.set.forEach((r=>r(e,t,t)))}}})(e,t);return r.use((()=>{if("function"!=typeof n.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const r=(0,n.g)();r&&((e,t,r)=>{const n=e.get(t);n?n.includes(r)||n.push(r):e.set(t,[r])})(e,t,r)},set:t=>{const r=e.get(t);r&&e.set(t,r.filter(n.f)),l(e)},reset:()=>{e.forEach((e=>e.forEach(n.f))),l(e)}}})()),r}},51325:(e,t,r)=>{r.d(t,{a:()=>n,i:()=>a});const n=(0,r(11935).c)({title:"",snippet:"",tags:[],categories:[]}),a=n.state},94788:(e,t,r)=>{r.d(t,{a:()=>f,b:()=>p,c:()=>b,d:()=>v,e:()=>m,f:()=>l,g:()=>g,h:()=>i,i:()=>h,p:()=>d,r:()=>o,s:()=>a,t:()=>y,v:()=>c});var n=r(31670);const a=/\+|\?|\/|\(|\)|\\|\!|\#|\"|\||\*|\:|<|>|\%|\$|\@|\'|\^|\[|\]|\,|\=|\;/gi,l=/(\.|outputFormat=)json|geojson$/i,i=/\/ags\//gi,s="MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer|VideoServer",o=new RegExp(`http.+/(${s})`),c="/arcgis/rest/services|/rest/services|/arcgis/services|/arcgis/rest",u=new RegExp(`(?<server>http.+(?:${c})(?:/?.*/(?<name>.*)/(?<type>${s})))(?!.*/${s})/?(?<soe>\\d+)?.*`,"i"),d=e=>{const t=e.match(u);if(!t){return e.match(i)?{baseServerUrl:e,serverName:null,serverType:"MapServer",index:null}:null}const[,r,n,a,l]=t,s=parseInt(l);return{baseServerUrl:r,serverName:n,serverType:a,index:isNaN(s)?null:s}},p=e=>{if(!e)return null;if(!e.match(c))return null;const t=e.split("/rest");return t.length<2?null:`${t[0]}/rest/`},f=e=>e&&"/"!==e.charAt(e.length-1)?`${e}/`:e,y=({path:e,url:t})=>{const r=t.split("/"),n=e.split("/");return r.slice(0,r.length-n.length).join("/")};function m(e){const{customBaseUrl:t,portalHostname:r,urlKey:n}=e,{protocol:a}=window.location;return`${a}//${n?`${n}.${t}`:r}`}function h(e){var t,r;return null!==(t=null==e?void 0:e.isWebTierAuth)&&void 0!==t?t:null===(r=e.sourceJSON)||void 0===r?void 0:r.isWebTierAuth}function g(e){var t;const{portal:r,config:a}=n.c||{};return null!==(t=f(null==a?void 0:a.restBaseUrl))&&void 0!==t?t:b(e||r)}function b(e){var t;return f(null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl)}function v(e){var t,r,n;return(null===(r=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.sourceJSON)||void 0===r?void 0:r.culture)||(null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.culture)||navigator.language||"en-US"}},65215:(e,t,r)=>{r.d(t,{g:()=>a});var n=r(31670);function a(e){var t,r,a,l;return null!=e||(e=null===n.c||void 0===n.c?void 0:n.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(a=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.credential)||void 0===a?void 0:a.token)||(null===(l=null==e?void 0:e.portalUser)||void 0===l?void 0:l.token)||""}},79238:(e,t,r)=>{r.d(t,{a:()=>n,e:()=>a,f:()=>l});const n={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},a={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},l={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},99907:(e,t,r)=>{r.d(t,{a:()=>n,u:()=>a});const n=(0,r(11935).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),a=n.state}}]);