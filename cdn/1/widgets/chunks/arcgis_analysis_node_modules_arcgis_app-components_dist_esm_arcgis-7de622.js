/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7de622.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7de622"],{71700:(e,r,n)=>{n.d(r,{a:()=>t,b:()=>l,c:()=>o,d:()=>i});const i=(0,n(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),t=i.state,o=i.state,l=i.state},43677:(e,r,n)=>{n.r(r),n.d(r,{arcgis_notebook_runtime_select:()=>p});var i=n(7263),t=n(62159),o=n(71700),l=n(66488),s=n(31670),u=n(46581),a=n(71695);n(78613),n(58233),n(28926),n(70506),n(99004),n(11935),n(94788),n(65215),n(59296),n(2174);function d(e){return{10.7:"1.0","10.7.0":"1.0","10.7.1":"2.0",10.8:"3.0","10.8.0":"3.0","10.8.1":"4.0"}[e]||e}async function c(){var e;const r=await async function(){const{config:e,portal:r,user:n}=s.c;return new Promise((async(i,t)=>{var o,s;if(r.isPortal){const e=await(0,l.b)(n,r);if(null==e?void 0:e.length){const r=e.filter((e=>e.serverFunction.split(",").some((e=>"notebookserver"===e.toLowerCase()))));if(r.length)return i(r[0].url);t()}}else{const r=await(0,u.r)(`${e.restBaseUrl}/portals/self/urls`),n=null===(s=null===(o=null==r?void 0:r.urls)||void 0===o?void 0:o.notebooks)||void 0===s?void 0:s.https;if(n)return i(`https://${n}`);t()}}))}(),n=await function(e){return(0,u.r)(`${e}/admin/notebooks/runtimes`,{},{})}(r);return(null===(e=null==n?void 0:n.runtimes)||void 0===e?void 0:e.length)?function(e=[],r){const{user:n}=s.c,i=(0,a.y)(n);return e.sort(((e,r)=>e.esriProvidedRuntime===r.esriProvidedRuntime?0:e.esriProvidedRuntime?-1:1)).filter((e=>!(!i&&e.requiresAdvancedPrivileges)&&(d(r)===d(e.version)||!e.esriProvidedRuntime)))}(n.runtimes,n.currentRuntimeVersion):null}function v(){const{user:e}=s.c;return function(){var e,r,n,i,t;const{config:o,portal:l}=s.c;if(l.isPortal)return!(!o.notebookServerEnabled||!l.supportsHostedNotebooks&&!(null===(e=l.sourceJSON)||void 0===e?void 0:e.supportsHostedNotebooks));{const e=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf((null===(r=l.subscriptionInfo)||void 0===r?void 0:r.type)||(null===(i=null===(n=l.sourceJSON)||void 0===n?void 0:n.subscriptionInfo)||void 0===i?void 0:i.type));return o.notebookServerEnabled&&(!e||-1!==(l.allowedBetaFeatures||(null===(t=l.sourceJSON)||void 0===t?void 0:t.allowedBetaFeatures)||[]).indexOf("notebooks"))}}()&&(0,a.x)(e)}const p=class{constructor(e){(0,i.r)(this,e),this.handleRuntimeChange=e=>{const r=e.currentTarget.selectedOption.value,n=parseInt(r,10)||0;this.selectedRuntimeIndex=n,this.updateProperties(this.runtimes[n])},this.i18n=void 0,this.runtimes=void 0,this.loading=!0,this.error=!1,this.selectedRuntimeIndex=0}async componentWillLoad(){const e=await(0,t.g)(this.el);this.i18n=e[0]}async componentDidLoad(){try{if(!v())return;const e=await c();if(this.runtimes=e,!e||!e.length)throw new Error;this.updateProperties(e[0])}catch(e){this.error=!0}this.loading=!1}updateProperties(e){o.a.properties={notebookRuntimeName:e.name,notebookRuntimeVersion:d(e.version)}}render(){const{i18n:e,selectedRuntimeIndex:r}=this;return v()?(0,i.h)("calcite-label",null,(0,i.h)("span",{class:"label"},e.selectRuntime),(0,i.h)("calcite-notice",{icon:!0,open:this.error,scale:"s",kind:"danger"},(0,i.h)("div",{slot:"title"},e.error.title),(0,i.h)("div",{slot:"message"},e.error.runtimes)),this.loading?(0,i.h)("span",null,(0,i.h)("calcite-loader",{class:"loader",inline:!0,label:e.loadingRuntimes})," ",e.loadingRuntimes):!this.error&&(0,i.h)("calcite-select",{label:e.selectRuntime,onCalciteSelectChange:this.handleRuntimeChange},this.runtimes.map(((e,n)=>(0,i.h)("calcite-option",{value:n,selected:r===n},e.name," - ",e.version))))):null}get el(){return(0,i.d)(this)}};p.style=":host{--arcgis-label-font-weight:400}.label{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight)}.label--bold{--arcgis-label-font-weight:500}.loader{color:var(--calcite-color-brand)}.leader-text{font-size:0.875rem;color:var(--calcite-color-text-1)}"},2174:(e,r,n)=>{n.d(r,{a:()=>s,b:()=>l,c:()=>d,d:()=>c,e:()=>v,f:()=>f,g:()=>I,h:()=>g,i:()=>u,j:()=>w,k:()=>b,l:()=>h,m:()=>S,n:()=>P,o:()=>m,p:()=>y,q:()=>p,u:()=>a});var i=n(28926),t=n(94788);function o(e){var r;return!!(null===(r=e.owner)||void 0===r?void 0:r.toLowerCase().includes("esri"))}function l(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Credits"))}function s(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Subscription"))}function u(e,r){return e.owner===r.username}function a(e,r){return u(e,r)||function(e,r){var n;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,t="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!u(e,r)&&t&&i.includes("esri_")&&!o.includes(i))return!1;return t}(e,r)}const d=(e,r)=>!!r.orgId&&e.every((e=>e.isOrgItem)),c=(e,r)=>`${(0,t.a)(r)}item.html?id=${e}`,v=(e,r)=>`${(0,t.g)(r)}/content/users/${e}`,p=e=>e.reduce(((e,r)=>(e[r.owner]=e[r.owner]?[...e[r.owner],r.id]:[r.id],e)),{});function m(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Spatiotemporal")}function f(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("View Service")}function g(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Hosted Service")}function h(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function w(e){var r;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[l]=await(0,i.l)(["esri/request"]);if(null==o?void 0:o.user){return l(`${(0,t.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(r=n.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,n;const i=null!==(n=null===(r=e.data)||void 0===r?void 0:r.groups)&&void 0!==n?n:[];return Promise.resolve(i)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function b(e){var r;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[l]=await(0,i.l)(["esri/request"]);return l(`${(0,t.g)(o)}content/items/${n.id}/groups`,{query:{f:"json",token:null===(r=n.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,n,i,t,o,l;const s=[...null!==(n=null===(r=e.data)||void 0===r?void 0:r.admin)&&void 0!==n?n:[],...null!==(t=null===(i=e.data)||void 0===i?void 0:i.member)&&void 0!==t?t:[],...null!==(l=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==l?l:[]];return Promise.resolve(s)}),(()=>Promise.reject()))}async function P(e,r,{relationshipType:n,direction:o}){const l=`${(0,t.g)(r)}content/items/${e}/relatedItems`,[s]=await(0,i.l)(["esri/request"]);return await s(l,{query:{f:"json",relationshipType:n,direction:o},method:"get",responseType:"json"})}function S(e,r){return null==e?void 0:e.some((e=>null==r?void 0:r.some((r=>e.id===r.id&&e.capabilities.includes("updateitemcontrol")))))}const I=(e,r)=>`${r}/content/items/${e}`},66488:(e,r,n)=>{n.d(r,{a:()=>v,b:()=>d,c:()=>s,d:()=>u,e:()=>p,f:()=>o,g:()=>c,h:()=>l,i:()=>m,q:()=>a});var i=n(46581),t=n(94788);function o(e){var r;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(r=e.sourceJSON)||void 0===r?void 0:r.portalDeploymentType))}function l(e){var r,n;return e.isPortal?"modern"===(null===(n=e.portalProperties)||void 0===n?void 0:n.homePage)||function(e){var r;return e.isPortal&&"modernOnly"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)}(e):"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){const r=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=r}(e)}async function s(e){try{return{result:await(0,i.f)((()=>(0,i.r)(`${(0,t.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function u(e){return(0,i.f)((()=>(0,i.r)(`${(0,t.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function a(e={},r){return(0,i.r)(`${(0,t.g)(r)}/community/groups`,e)}const d=async(e,r)=>{var n;if(!e)return[];const o=`${(0,t.a)(null!==(n=r.restUrl)&&void 0!==n?n:r.portalUrl)}portals/self/servers`,l=await(0,i.f)((()=>(0,i.r)(o)),"selfServers",r.id);return null==l?void 0:l.servers},c=e=>v((0,t.c)(e)),v=e=>{var r;const n=`${(0,t.a)(null!==(r=(0,t.b)(e))&&void 0!==r?r:e)}info`;return(0,i.f)((()=>(0,i.r)(n,{},{addTokenManually:!1})),"portalInfo",n)};async function p(e,r){return!e.isPortal||await m(e,r)}async function m(e,r){if(!r||!e)return!1;if(!e.isPortal)return!0;const{result:n,error:t}=await(0,i.f)((()=>f(e,r)),"isPortalBackedBySDS",e.id);return!t&&n}const f=async(e,r)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await g(r,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},g=async(e,r)=>{var n;return(null!==(n=await d(e,r))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]}},59296:(e,r,n)=>{n.d(r,{a:()=>o,b:()=>p,c:()=>v,d:()=>c,e:()=>m,f:()=>g,g:()=>f,h:()=>T,i:()=>a,j:()=>u,k:()=>h,l:()=>D,m:()=>w,n:()=>b,o:()=>k,p:()=>S,q:()=>P,r:()=>I,s:()=>$,t:()=>d,u:()=>O,v:()=>l,w:()=>s});var i=n(2174);const t=e=>{var r,n,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(r=null==e?void 0:e.roleId)&&void 0!==r?r:null==e?void 0:e.id)&&void 0!==n?n:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function o(e){return e&&!e.orgId}function l(e,r){return(0,i.u)(e,r)||"update"===e.itemControl||(0,i.c)([e],r)&&v(r)}function s(e,r){const n=(0,i.c)([e],r),t=(0,i.u)(e,r)||v(r)&&n,o=m(r)&&y(r);return!!(t||n&&o)}const u=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageLicenses"))};function a(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}const c=e=>{var r;return null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.includes("Developer")};function v(e){return"org_admin"===t(e)||"account_admin"===t(e)}function p(e){return["org_admin","account_admin"].includes(t(e))&&!(null==e?void 0:e.roleId)}function m(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function f(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItemCategorySchema"))}function g(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateGroups"))}function h(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:assignToGroups"))}const y=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))};function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function b(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function T(e,r,n,i){const t=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),o=((null==r?void 0:r.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!r||!v(r)&&!o||!(null==n?void 0:n.isPortal)&&!t)}function O(e){return!!e&&(!m(e)||m(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const $=({items:e,user:r,portal:n})=>{const t=e[0],o=t.owner;if(n.isPortal&&o!==r.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const s=(0,i.u)(t,r),u=m(r),a=_(r),d=l(t,r)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(r)&&!u&&(function(e,r){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(r)||w(e)||b(e)||!!r.canSharePublic&&P(e)}(r,n)||_(r));return s||d||(0,i.c)(e,r)&&a};function _(e){return k(e)||S(e)||I(e)}function D(e){const r=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>r.includes(e)))}},71695:(e,r,n)=>{n.d(r,{a:()=>D,b:()=>v,c:()=>_,d:()=>h,e:()=>y,f:()=>b,g:()=>p,h:()=>g,i:()=>P,j:()=>S,k:()=>T,l:()=>d,m:()=>O,n:()=>c,o:()=>j,p:()=>C,q:()=>N,r:()=>$,s:()=>x,t:()=>R,u:()=>A,v:()=>L,w:()=>u,x:()=>k,y:()=>I,z:()=>q});var i=n(66488),t=n(94788),o=n(59296),l=n(31670),s=n(46581);async function u(){return new Promise((async e=>{const{portal:r}=l.c;if(null==r?void 0:r.isPortal){const n=r.helperServices.geocode,i=await function(e){const{config:r,portal:n}=l.c;return new Promise((async(i,t)=>{const o=e.filter((e=>a(e.url,n))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],n=`${r.restBaseUrl}/content/items/${e}`;try{i((await(0,s.r)(n)).url)}catch(e){t(e)}}else t("No world geocoder configured")}))}(n);e(i)}else{const n=function(e){const r=null==e?void 0:e.portalHostname;if(-1!==r.indexOf("dev"))return"dev";if(-1!==r.indexOf("qa"))return"qa";return""}(r);e(`https://geocode${n}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function a(e="",r){var n;const i=r.isPortal,t=e.toLowerCase(),o=t.indexOf("/geocodeserver")>-1&&t.indexOf("/rest/services/")>-1,l=i&&t.indexOf(null===(n=r.portalHostname)||void 0===n?void 0:n.toLowerCase())>-1,s=!i&&t.indexOf("utility")&&t.indexOf(".arcgis.com")>-1;return o&&(l||s)}function d(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function c(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,r){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,i.i)(r,e)}async function p(e,r){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,i.i)(r,e)}const m=async(e,r)=>{var n;return await p(e,r)&&(!r.isPortal||!!r.supports3DTilesServices||!!(null===(n=r.sourceJSON)||void 0===n?void 0:n.supports3DTilesServices))};function f(e){return!(0,o.a)(e)&&!0}function g(e){var r;return!(0,o.a)(e)&&(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishScenes"))}const h=e=>!(0,o.a)(e);function y(e,r,n){var i,t;const o=!!(null===(t=null===(i=r.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===t?void 0:t.url),l=function(e,r,n){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(r.isPortal||w(n))}(e,r,n),s=r.isPortal?l:l||function(e,r,n){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!r.isPortal&&w(n)}(e,r,n);return o&&s}function w(e){return null==e?void 0:e.some((e=>{var r;return null===(r=e.entitlements)||void 0===r?void 0:r.some((e=>"image"===e.toLowerCase()))}))}async function b(e){var r;const{userLicensedItems:n}=await(0,s.r)(`${null!==(r=e.restUrl)&&void 0!==r?r:e.portalUrl}/community/self?returnUserLicensedItems=true`);return n}function P(e,r){var n,i;const l=null===(n=r.helperServices)||void 0===n?void 0:n.geocode.some((({url:e})=>a(e,r))),s=null!==(i=null==e?void 0:e.privileges)&&void 0!==i?i:[];return!(0,o.a)(e)&&l&&(!r.isPortal||!(0,t.i)(r)&&s.includes("portal:user:viewOrgItems")&&s.includes("portal:user:createItem"))}const S=e=>!(0,o.a)(e);function I(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function k(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function T(e,r){var n;return!!r.isPortal&&!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:registerDataStores"))}function O(e){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const $=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function _(e,r,n){return!r.isPortal&&await v(e,r)&&await async function(e,r,n){return!(0,o.a)(e)&&!!r.supportsHostedServices&&d(e)&&(await p(e,r)||await v(e,r)||g(e)||f(e)||y(e,r,n))}(e,r,n)}async function D(e,r,n){switch(r){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,n);case"Tile Package":return p(e,n);case"3DTiles Package":return m(e,n);case"Vector Tile Package":return f(e);case"Scene Package":return g(e);case"Service Definition":return async function(e,r){return await v(e,r)&&await p(e,r)}(e,n);default:return!0}}function C(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageCredits"))}function x(e,r){var n,i,t;return(0,o.c)(e)||C(e)||!!((null!==(n=null==e?void 0:e.assignedCredits)&&void 0!==n?n:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.assignedCredits)>-1&&(null===(t=null==r?void 0:r.portalProperties)||void 0===t?void 0:t.showCreditsOnProfile))}const R=e=>!1;function q(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewGroups"))}function N(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewUsers"))}function j(e){return(0,o.b)(e)||N(e)&&function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewItems"))}(e)&&(function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:reassignItems"))}(e))}function L(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const A=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")}}]);