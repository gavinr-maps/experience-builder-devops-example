/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-48b4e2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-48b4e2"],{98256:(e,t,o)=>{o.r(t),o.d(t,{arcgis_color_input:()=>m,arcgis_popup_color_popover:()=>y,arcgis_popup_styler_popover:()=>b,arcgis_slider_input:()=>v,arcgis_symbol_picker_file_upload:()=>w,arcgis_symbol_styler_browse_styles:()=>k,arcgis_symbol_styler_color_ramp_input:()=>A,arcgis_symbol_styler_section:()=>H,arcgis_symbol_styler_symbol_preview:()=>N});var i=o(7263),s=o(62159),r=o(81457),l=o(58233),n=o(43935),a=o(11246),c=o(28926),d=o(94788),h=o(25380),p=o(82748),u=o(94278);o(78613),o(11935),o(70506),o(99004),o(31670);const g="recent",f="color-picker-container",m=class{constructor(e){(0,i.r)(this,e),this.arcgisColorInputChange=(0,i.c)(this,"arcgisColorInputChange",7),this.arcgisColorInputSwatchUpdate=(0,i.c)(this,"arcgisColorInputSwatchUpdate",7),this.arcgisInternalColorInputStoredColor=(0,i.c)(this,"arcgisInternalColorInputStoredColor",7),this.arcgisColorInputPopoverOpen=(0,i.c)(this,"arcgisColorInputPopoverOpen",7),this.arcgisColorInputPopoverClose=(0,i.c)(this,"arcgisColorInputPopoverClose",7),this.focusHandler=e=>{this.activeEl=e.target},this.onClose=e=>{var t,o;this.storeRecentColorToStorage(null===(t=this.colorPickerEl)||void 0===t?void 0:t.value),e.stopPropagation(),this.arcgisColorInputPopoverClose.emit(null===(o=this.colorPickerEl)||void 0===o?void 0:o.value)},this.handleSwatchClickOrKeyUp=e=>{if("key"in e&&"Enter"!==e.key&&"Space"!==e.key)return;const t=e.currentTarget.color;this.updateColor(t),this.arcgisColorInputSwatchUpdate.emit(t),setTimeout((()=>this.recentColor1El.focus()),200)},this.recentColorsKeyDownHandler=e=>{if(1===this.recentColors.length)return;const t=e.key;let o;this.activeEl===this.recentColor1El?o=1:this.activeEl===this.recentColor2El?o=2:this.activeEl===this.recentColor3El&&(o=3),"ArrowLeft"===t&&(o&&1!==o?this[`recentColor${o-1}El`].focus():this[`recentColor${this.recentColors.length}El`].focus()),"ArrowRight"===t&&(o&&o!==this.recentColors.length?this[`recentColor${o+1}El`].focus():this.recentColor1El.focus())},this.setInlineInputRef=e=>{this.inlineInputEl=e},this.setColorPickerRef=e=>{e&&(this.colorPickerEl=e)},this.setRecentColorRef1=e=>{e&&(this.recentColor1El=e)},this.setRecentColorRef2=e=>{e&&(this.recentColor2El=e)},this.setRecentColorRef3=e=>{e&&(this.recentColor3El=e)},this.onOpen=()=>{var e;null===(e=this.colorPickerEl)||void 0===e||e.setFocus(),this.arcgisColorInputPopoverOpen.emit()},this.handleClear=()=>{this.updateColor(null)},this.clearable=!1,this.color="#d00b33",this.compact=!1,this.disabled=!1,this.placement="auto",this.popoverProps=void 0,this.storageId=void 0,this.recentColors=[]}storedColorHandler(e){e.composedPath().includes(this.el)||this.setRecentColorsFromStorage()}arcgisRecentColorsUpdateHandler({detail:e}){this.storeRecentColorToStorage(e)}async setFocus(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.setFocus())}async close(){await this.inlineInputEl.close()}updateColor(e,t=!0){e!==this.color&&(this.color=e,this.arcgisColorInputChange.emit(),t&&this.storeRecentColorToStorage(e))}storeRecentColorToStorage(e){if(!e)return;const t=[e,...this.recentColors.filter((t=>t!==e))].slice(0,3);(0,r.s)(this.storageId,t,!0),this.recentColors=t,this.arcgisInternalColorInputStoredColor.emit()}async componentWillLoad(){[this.strings]=await(0,s.g)(this.el),this.setRecentColorsFromStorage()}setRecentColorsFromStorage(){const e=(0,r.g)(this.storageId,!0);e&&(this.recentColors=[...e])}disconnectedCallback(){this.removeTooltip()}render(){const{compact:e,disabled:t,recentColors:o,strings:s}=this,r=[o[0],o[1]],n="rtl"===(0,l.g)(this.el);return e||r.push(o[2]),(0,i.h)(i.H,{key:"088a1b5f2f813a102edf3f24493d475583afc18f"},(0,i.h)("arcgis-symbol-styler-inline-input",{key:"02a6e80ed8df9bb5b49f09490f92c58ef2fb5118",disabled:t,intlDone:s.commitColor,heading:s.selectColor,label:s.selectColor,onArcgisSymbolStylerInlineInputClose:this.onClose,onArcgisSymbolStylerInlineInputOpen:this.onOpen,popoverProps:this.popoverProps,ref:this.setInlineInputRef},(0,i.h)("div",{key:"e8f8f54426dce86a80358023c3ab00c9284cb1a5",class:f,slot:"content"},(0,i.h)("calcite-color-picker",{allowEmpty:this.clearable,class:"color-picker",key:"color-picker"+(e?"--compact":""),onCalciteColorPickerInput:e=>{this.updateColor(this.colorPickerEl.value,!1),e.stopPropagation()},ref:this.setColorPickerRef,scale:e?"s":"m",storageId:this.storageId,value:this.color})),(0,i.h)("div",{key:"eb805d4079bd102bff0c16122edf4b99e15927e0",slot:"preview"},(0,i.h)("calcite-color-picker-swatch",{key:"72ffa159db0737b1cc6fb6ad324b9591a0c01e10",color:this.color,scale:"s"})),(0,i.h)("div",{key:"a299197661dfadc09e90bf808e6cbb2db46afd9e","aria-label":s.recentColors,class:g,onKeyDown:this.recentColorsKeyDownHandler,slot:"content-end",tabindex:-1},r.map(((e,t)=>e?(0,i.h)("calcite-color-picker-swatch",{active:e===this.color,color:e,key:e,onClick:this.handleSwatchClickOrKeyUp,onFocus:this.focusHandler,onKeyUp:this.handleSwatchClickOrKeyUp,ref:this[`setRecentColorRef${t+1}`],role:"button",scale:"s",tabindex:0}):this.renderEmptySwatch(`empty-swatch-${t}`)))),this.clearable&&[(0,i.h)("div",{key:"3b8f683d61e1b31f53845ef036fc82484de61c9f",slot:"content-end"},(0,i.h)("calcite-action",{key:"438ff5ef07c74274a3a5e6068e899b6e3906fc41",icon:"circle-disallowed",scale:"s",label:s.clearColor,text:s.clearColor,ref:e=>this.actionEl=e,onClick:this.handleClear,onMouseOver:()=>this.addTooltip({referenceElement:this.actionEl,placement:n?"right-start":"left-start",innerHTML:s.noColor}),onMouseOut:()=>this.removeTooltip()}))]))}renderEmptySwatch(e){return(0,i.h)("svg",{class:"empty-swatch",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",width:"20",key:e},(0,i.h)("rect",{width:"20",height:"20",fill:"#f8f8f8",stroke:"#000","stroke-dasharray":"2"}))}addTooltip(e){this.removeTooltip(),this.tooltipEl=document.createElement("calcite-tooltip"),this.tooltipEl.placement=e.placement||"auto",this.tooltipEl.referenceElement=e.referenceElement,this.tooltipEl.overlayPositioning="fixed",this.tooltipEl.innerHTML=e.innerHTML,this.tooltipEl.open=!0,this.el.parentElement.appendChild(this.tooltipEl)}removeTooltip(){var e;(null===(e=this.tooltipEl)||void 0===e?void 0:e.parentNode)&&(this.tooltipEl.parentNode.removeChild(this.tooltipEl),this.tooltipEl=void 0)}get el(){return(0,i.d)(this)}};m.style=":host,arcgis-symbol-styler-inline-input{display:block}.color-picker-container{display:flex;flex-direction:column}.color-picker{--calcite-color-border-1:transparent;overflow-x:hidden}[slot=preview] calcite-color-picker-swatch{width:100%;height:24px}.recent{align-items:center;border:1px solid #949494;display:flex;gap:8px;height:32px;padding:0px 6px;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}.recent:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.recent calcite-color-picker-swatch:not([active]){cursor:pointer}.recent calcite-color-picker-swatch:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.recent calcite-color-picker-swatch:focus[active]{border-radius:100%}.empty-swatch{cursor:default}calcite-tooltip:not([open]){visibility:hidden;pointer-events:none}";const y=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupColorPopoverClose=(0,i.c)(this,"arcgisPopupColorPopoverClose",7),this.arcgisPopupColorPopoverOpen=(0,i.c)(this,"arcgisPopupColorPopoverOpen",7),this.arcgisPopupColorPopoverChange=(0,i.c)(this,"arcgisPopupColorPopoverChange",7),this.closedWithEvent=!1,this.handlePanelDismissedChange=e=>{const t=e.currentTarget;t.closed&&(this.close(),t.closed=!1),e.stopPropagation()},this.handleDone=()=>{this.close()},this.handlePopoverOpen=e=>{this.arcgisPopupColorPopoverOpen.emit(),e.stopPropagation()},this.handlePopoverClose=e=>{this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0,e.stopPropagation()},this.handlePopoverKeyUp=({key:e})=>{"Escape"===e&&this.close()},this.disabled=!1,this.heading=void 0,this.intlDone=void 0,this.label=void 0,this.hexColor=void 0,this.popoverProps=void 0,this.open=!1}disabledChanged(e){e&&this.open&&this.close()}onInlineInputOpen(e){this.open&&(e.composedPath().includes(this.el)||(this.open=!1))}async setFocus(){var e;null===(e=this.panelElement)||void 0===e||e.setFocus()}async close(){this.open=!1,this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0}async setOpen(e){this.open=e}disconnectedCallback(){this.closedWithEvent||this.arcgisPopupColorPopoverClose.emit()}render(){const{popoverProps:e}=this;return(0,i.h)(i.H,{key:"0a1e798ea4b8d2add01999ae3157f136cbc4c381",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"8c91ef55554bd2af4e4ebc7a22f6d9db132c031e",pointerDisabled:!0,onKeyUp:this.handlePopoverKeyUp,label:this.label,offsetDistance:(null==e?void 0:e.offsetDistance)||0,offsetSkidding:(null==e?void 0:e.offsetSkidding)||0,flipDisabled:(null==e?void 0:e.flipDisabled)||!1,open:this.open,overlayPositioning:(null==e?void 0:e.overlayPositioning)||"fixed",referenceElement:(null==e?void 0:e.refElement)||this.previewContainerEl,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,placement:(null==e?void 0:e.placement)||"bottom",triggerDisabled:!0},(0,i.h)("calcite-panel",{key:"fde5c3837a414a6fd36317753ccee52b42ed261d",closable:!0,onCalcitePanelClose:this.handlePanelDismissedChange,heading:this.heading,style:(null==e?void 0:e.maxHeight)&&{maxHeight:e.maxHeight},ref:e=>this.panelElement=e},(0,i.h)("calcite-color-picker",{key:"f38d1c3e2929d2894c35d26e74dd36190842749e",allowEmpty:!1,onCalciteColorPickerInput:e=>{const t=e.target.value;this.arcgisPopupColorPopoverChange.emit(t),e.stopPropagation()},scale:"m",value:this.hexColor,storageId:"arcgis-symbol-styler-storage-colors"}),(0,i.h)("calcite-button",{key:"e614954b3526108793d7605d439e6ce09b4d1e45",appearance:"solid",scale:"m",slot:"footer",width:"full",label:this.intlDone,onClick:this.handleDone},this.intlDone))))}get el(){return(0,i.d)(this)}static get watchers(){return{disabled:["disabledChanged"]}}},b=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupStylerPopoverClose=(0,i.c)(this,"arcgisPopupStylerPopoverClose",7),this.arcgisPopupStylerPopoverDisconnected=(0,i.c)(this,"arcgisPopupStylerPopoverDisconnected",7),this.documentTabHandler=void 0,this.documentClickHandler=void 0,this.panelScrollHandler=void 0,this.onOpen=()=>{requestAnimationFrame((()=>this.setFocus()))},this.referenceElement=void 0,this.open=!1}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}async setFocus(){var e;null===(e=this.closeActionNode)||void 0===e||e.setFocus()}async setOpen(e){var t;this.popoverNode&&(this.popoverNode.open=e,e&&(null===(t=this.panelNode)||void 0===t||t.setFocus(),this.popoverNode.reposition()))}async addStyler(e){this.contentNode&&this.contentNode.appendChild(e)}async getPopoverRefElement(){return this.closeActionNode}componentWillLoad(){this.strings=n.p.strings}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.closeActionNode)||void 0===e?void 0:e.setFocus()}))}disconnectedCallback(){this.arcgisPopupStylerPopoverDisconnected.emit()}render(){const{referenceElement:e,open:t,strings:o}=this;return(0,i.h)(i.H,{key:"90c8e7546db0585c134a8b1aaf7a52fa1fd0a000",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"7cce01d7a86075375a404b2db108cc33522d8805",open:t,placement:"leading-start",offsetDistance:0,offsetSkidding:45,pointerDisabled:!0,triggerDisabled:!0,label:o.chartStyle,referenceElement:e,onCalcitePopoverOpen:this.onOpen,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"de553d7a3b79c47b5c1fcde6917aa3aaed68a039",closable:!1,heading:o.chartStyle,class:"styler-panel",ref:e=>this.panelNode=e,onCalcitePanelClose:()=>{this.arcgisPopupStylerPopoverClose.emit(),setTimeout((()=>e.parentElement.focus()),300)}},(0,i.h)("calcite-action",{key:"c426318222fb05d308c0caef13524595e2c3834d",id:"symbol-styler-dismiss-button",slot:"header-actions-end",scale:"s",icon:"x",text:o.close,onClick:()=>this.arcgisPopupStylerPopoverClose.emit(),ref:e=>this.closeActionNode=e}),(0,i.h)("div",{key:"ee165ae430649f2d4d98246318d4b1b004bef1c2",class:"styler-div",ref:e=>this.contentNode=e}))))}get hostElement(){return(0,i.d)(this)}};b.style=".styler-panel{width:328px;min-height:300px}.styler-div{width:100%}";const v=class{constructor(e){(0,i.r)(this,e),this.arcgisSliderInputValueChange=(0,i.c)(this,"arcgisSliderInputValueChange",7),this.applyValueOnChange=(0,a.d)((e=>{this.debouncedApplyValueOnChange(e)}),800),this.disabled=!1,this.flipLabels=!1,this.min=void 0,this.max=void 0,this.value=void 0,this.step=void 0,this.unitsLabel=void 0,this.withSteppers=!1,this.label=void 0}render(){const{disabled:e,min:t,max:o,value:s,step:r,withSteppers:l,flipLabels:n,unitsLabel:a,label:c}=this;return(0,i.h)(i.H,{key:"cc11bccb2c125a58ab31e1fe4f72e434324cd722"},(0,i.h)("div",{key:"7bf160bae0e8920ee24ee6bf0e84b22fa49646ae",class:"select-number"},(0,i.h)("calcite-slider",{key:"04d4fc134aea8169984624fc50b48dbda1d8a177",class:"slider",disabled:e,min:t,max:o,value:s,step:r,onCalciteSliderInput:e=>this.applyValueOnChange(e.target)}),(0,i.h)("calcite-input",{key:"134986424db593400b4f4eb5bcda401698f56666",class:"select-number-input",disabled:e,min:t,max:o,numberButtonType:l?"vertical":"none",prefixText:n?a:"",onCalciteInputInput:e=>this.applyValueOnChange(e.target),onClick:e=>e.stopPropagation(),scale:"s",step:"any",suffixText:n?"":a,type:"number",value:`${s}`,label:c})))}debouncedApplyValueOnChange(e){const{min:t,max:o,value:i}=this,s=Number(e.value),r=Math.min(o,Math.max(t,s));s!==i&&(e.value=`${r}`,this.arcgisSliderInputValueChange.emit(r))}get hostElement(){return(0,i.d)(this)}};v.style=".select-number{display:flex;align-items:center;justify-content:space-between;position:relative}.slider{width:50%}.select-number-input{width:45%;font-size:var(--arcgis-app-font-size-0);font-family:var(--arcgis-app-font-family)}";const w=class{constructor(e){(0,i.r)(this,e),this.arcgisSymbolPickerFileUploadChange=(0,i.c)(this,"arcgisSymbolPickerFileUploadChange",7),this.arcgisSymbolPickerFileUploadInvalidFile=(0,i.c)(this,"arcgisSymbolPickerFileUploadInvalidFile",7),this.arcgisSymbolPickerFileUploadError=(0,i.c)(this,"arcgisSymbolPickerFileUploadError",7),this.handleDragOver=e=>{e.preventDefault()},this.handleDrop=e=>{e.preventDefault(),this.processFile(e.dataTransfer.files[0])},this.handleFileInputChange=async e=>{await this.processFile(e.target.files[0])},this.portal=void 0,this.strings=void 0}render(){return(0,i.h)("div",{key:"479b199f46ec7a17671da1d88a11a337a9502aeb",class:"file-step","aria-label":this.strings.fileUpload.dragDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragOver,onDrop:this.handleDrop},(0,i.h)("div",{key:"87ff35a70c0e17711a97cc897c0cd438a16df5f4"},(0,i.h)("div",{key:"442390bd80b8e43faf8ac01f5aa29af2e76e1697",class:"file-step__drag-text","aria-label":this.strings.fileUpload.dragDrop},this.strings.fileUpload.dragDrop),(0,i.h)("calcite-button",{key:"0dfdca5b525aa30a7dbc949a5cbfa7964ae7038e",class:"file-step__browse-button",appearance:"transparent",iconStart:"image",onClick:()=>{this.fileInput.click()}},this.strings.fileUpload.browse),(0,i.h)("input",{key:"b4bda5efe56961f0a88c3e346d90ecf26027d3c6",ref:e=>{this.fileInput=e},onChange:this.handleFileInputChange,class:"file-step__file-input",type:"file",accept:".jpg,.gif,.png,.svg,image/jpg,image/gif,image/png,image/svg+xml"})))}async processFile(e){const{portal:t}=this;if(e&&e){if(!this.isValidFile(e))return void this.arcgisSymbolPickerFileUploadInvalidFile.emit();if(this.isSVGFile(e)){const[o]=await(0,c.l)(["esri/rest/symbolService"]),i=t.helperServices.symbols.url,s=new FileReader;s.onload=async t=>{const s={svgImage:t.target.result};o.generateSymbol(i,s).then((t=>{this.arcgisSymbolPickerFileUploadChange.emit({cim:t.symbol,fileName:e.name||"",width:t.symbol.width,height:t.symbol.height})}))},s.readAsText(e)}else{const t=new FileReader;t.onload=async t=>{var o=new Image;o.src=t.target.result,o.onload=()=>{this.arcgisSymbolPickerFileUploadChange.emit({dataURL:t.target.result,fileName:e.name||"",width:o.width,height:o.height})},o.onerror=()=>{this.arcgisSymbolPickerFileUploadError.emit()}},t.readAsDataURL(e)}}}isValidFile(e){return(null==e?void 0:e.name)&&/\.(gif|jpg|jpeg|png|svg)$/i.test(e.name)}isSVGFile(e){return(null==e?void 0:e.name)&&/\.(svg)$/i.test(e.name)}get el(){return(0,i.d)(this)}};w.style=":host{display:inline-block;background-color:white;width:100%;padding:20px 5px 15px 5px;border-color:var(--calcite-color-border-1);border-width:2px;border-style:dashed;box-sizing:border-box}.file-step{text-align:center}.file-step__upload-icon{margin-bottom:0.5rem;margin-top:0.25rem;color:var(--calcite-color-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{font-size:0.9rem;margin-bottom:0.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}";const C="arcgis-symbol-styler-storage-styles",k=class{constructor(e){(0,i.r)(this,e),this.arcgisSymbolStylerBrowseStylesClose=(0,i.c)(this,"arcgisSymbolStylerBrowseStylesClose",7),this.cardNodes={},this.editGeometry=void 0,this.excludeItemIds=void 0,this.portal=void 0,this.strings=void 0,this.items=void 0,this.pagination=void 0,this.selectedCount=0}async componentWillLoad(){const{editGeometry:e}=this,t=(0,r.g)(C,!0)||{};this.savedStyleIds=(null==t?void 0:t[e])||[]}render(){var e,t,o;const{portal:s,editGeometry:r,savedStyleIds:l,excludeItemIds:n,strings:a}=this,c=s.user;let h="";null==l||l.forEach((e=>h+=` -id:${e}`)),(null==n?void 0:n.length)&&n.forEach((e=>h+=` -id:${e}`));const p=`type:"Style" typekeywords:"web2d" ${"point"===r?'typekeywords:"pointSymbol"':"line"===r?'typekeywords:"lineSymbol"':'typekeywords:"polygonSymbol"'}${h}`,u=`${(0,d.e)(s)}/home/`;return(0,i.h)(i.H,{key:"4172eeacb5227a16e3a2edb6634c4b55ea955e75"},(0,i.h)("calcite-modal",{key:"a3de65dbb09b1ae2ca3a5c3c5592088322ae32af",class:"styles-modal",open:!0,scale:"s",escapeDisabled:!0,outsideCloseDisabled:!0,role:"dialog",onCalciteModalClose:()=>this.arcgisSymbolStylerBrowseStylesClose.emit()},(0,i.h)("h3",{key:"6133281d7ca183909561c0884e2f0dcb6c161c49",slot:"header",class:"header"},this.strings.addStyles),(0,i.h)("arcgis-item-browser",{key:"f043278b4eeeb9675d4182dbd3ce70630fe89939",view:"list",selection:"multiple",filter:p,portal:s,user:c,api:4,config:{baseUrl:u},slot:"content",onArcgisItemBrowserUpdate:e=>{const{results:t,num:o,start:i,total:s}=e.detail;this.items=t,this.pagination={start:i,num:o,total:s}},onArcgisItemBrowserSelect:()=>{var e,t;return this.selectedCount=null===(t=null===(e=this.itemBrowserNode)||void 0===e?void 0:e.selectedItems)||void 0===t?void 0:t.length},ref:e=>this.itemBrowserNode=e},(0,i.h)("arcgis-item-browser-top-bar",{key:"122b3442aff8426bab333b8307bb3bf5d85f3136",slot:"top-bar","filter-toggle":!0},(0,i.h)("arcgis-item-browser-bucket-select",{key:"95bdbd61d7781038543c164040344933a585fa1a",slot:"bucket",options:s.isPortal?["my","favorites","group","org","living atlas"]:void 0}),(0,i.h)("arcgis-item-browser-search",{key:"c61c4e4af321ec1107c4dec1113c5423f333013c",slot:"search",term:""})),(0,i.h)("arcgis-item-browser-sort",{key:"6f023d6f12ccdb11b9022754e00bf892baf4f569",options:["modified","title","relevance"],slot:"sort"}),(0,i.h)("arcgis-item-browser-filters",{key:"bfc18440110995552d49f58a328abdecac6bfc66",slot:"filters"},s.user&&(0,i.h)("arcgis-item-browser-filter-folder",{key:"106a985705095320eaa002f8f950460790706d82"}),(0,i.h)("arcgis-item-browser-filter-categories",{key:"50efc63a88b55f8848f7868f10859c50c2255100"}),(0,i.h)("arcgis-item-browser-filter-sharing",{key:"8af12dd64420d54991d8f21d04049c5791400ade"}),(0,i.h)("arcgis-item-browser-filter-collaborations",{key:"e73b922f1d97055b053f2c1105c7f18b32bcfdf7"}),(0,i.h)("arcgis-item-browser-filter-tags",{key:"19b9a8ccc28a1f2aed20947fb6309c55ff354e2e"}),(0,i.h)("arcgis-item-browser-filter-content-status",{key:"5fb1ef0cbbf122edca4105ebe1c5b2471b8f27cd"}),(0,i.h)("arcgis-item-browser-filter-date",{key:"0fa47af71f0e4918b3fd05171dc65196143712f8",property:"modified"}),(0,i.h)("arcgis-item-browser-filter-date",{key:"59c18a1cf378d9f8d16ac4d0f3e0ab6c84624b16",property:"created"})),(0,i.h)("arcgis-item-browser-content",{key:"9d63b3f43f5f2c2e541c9292f5c5a391d084994d",slot:"content"},(this.items||[]).map((e=>(0,i.h)("arcgis-item-browser-card",{key:`card-${e.id}`,item:e,portal:s,baseUrl:u,showItemType:!0,showDateUpdated:!0,showOwner:!0,showSummary:!0,showThumbnail:!0,ref:t=>this.cardNodes[e.id]=t},(0,i.h)("calcite-button",{label:a.viewItemDetail,scale:"s",appearance:"outline-fill",kind:"neutral",slot:"actions-end",target:"_blank",href:`${u}/item.html?id=${e.id}`},a.viewItemDetail))))),(0,i.h)("arcgis-item-browser-pagination",{key:"a71a7bbfd313f0c096bc00fcde8f71aa93d8e205",slot:"pagination",total:null===(e=this.pagination)||void 0===e?void 0:e.total,start:null===(t=this.pagination)||void 0===t?void 0:t.start,num:null===(o=this.pagination)||void 0===o?void 0:o.num})),(0,i.h)("calcite-button",{key:"ba546fe829c0cbbf3aeef83d4ccc598e8924cbf9",slot:"secondary",width:"full",appearance:"outline-fill",alignment:"center",scale:"m",onClick:()=>this.arcgisSymbolStylerBrowseStylesClose.emit()},this.strings.cancel),(0,i.h)("calcite-button",{key:"1686877234c26e594011105108aae8e752955b7c",slot:"primary",width:"full",alignment:"center",appearance:"solid",scale:"m",disabled:!this.selectedCount,onClick:()=>{this.saveNewStyleItemsInLocalStorage(this.itemBrowserNode.selectedItems),this.arcgisSymbolStylerBrowseStylesClose.emit(this.itemBrowserNode.selectedItems.length?this.itemBrowserNode.selectedItems.map((e=>e.id)):[])}},this.strings.add)))}saveNewStyleItemsInLocalStorage(e){const{editGeometry:t}=this,o=(0,r.g)(C,!0)||{},i=(null==o?void 0:o[t])||[];if(e.map((e=>e.id)).forEach((e=>{i.includes(e)||i.push(e)})),this.savedStyleIds=i,o[t]=i,["point","polygon"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("lineSymbol"))).map((e=>e.id)),i=o.line||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.line=i)}if(["point","line"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("polygonSymbol"))).map((e=>e.id)),i=o.polygon||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.polygon=i)}if(["line","polygon"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("pointSymbol"))).map((e=>e.id)),i=o.point||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.point=i)}(0,r.s)(C,o,!0)}get hostElement(){return(0,i.d)(this)}};k.style=".styles-modal{--calcite-modal-height:min(900px, calc(80vh + 100px));--calcite-modal-width:1080px;--calcite-modal-content-padding:0px}.header{width:50%}";const S="color-picker-container";let x=0;const P="color-ramp-item",I=({stops:e,style:t="continuous",name:o,layout:s="vertical",width:r=20,height:l=70})=>{const n=x+++"-color-ramp-gradient",a="vertical"===s?"rotate(90)":"";return(0,i.h)("span",{title:o,class:P},(0,i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",height:l,width:r},(0,i.h)("defs",null,(0,i.h)("linearGradient",{id:n,gradientTransform:a},"continuous"===t?function(e){const t=1/(e.length-1);return e.slice().map((({r:e,g:o,b:s},r)=>{const l=r*t*100;return(0,i.h)("stop",{"stop-color":`rgb(${e}, ${o}, ${s})`,offset:`${l}%`})}))}(e):function(e){const t=1/e.length,o=[];return e.slice().forEach((({r:e,g:s,b:r},l)=>{const n=l*t*100,a=(l+1)*t*100;o.push((0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${n}%`}),(0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${a}%`}))})),o}(e))),(0,i.h)("rect",{x:"0",y:"0",fill:`url('#${n}')`,width:"100%",height:"100%"})))};const E="color-ramp-item",U=({stops:e,name:t,opacity:o=null,size:s=48})=>{const{svgUtils:r}=u.e,l=Math.sqrt(e.length),n=(0,h.E)(e),a=Math.sqrt(Math.pow(s,2)+Math.pow(s,2))+0;let c=null;null!=o&&(c={opacity:`${o}`});const d=[],p=[],g=[],f=(s||75)/l;for(let e=0;e<l;e++){const t=e*f;for(let o=0;o<l;o++){const i=o*f,s=R(n[e][o]),l=$(null),a={type:"rect",x:i,y:t,width:f,height:f};d.push(D(s)),p.push(_(a,s.fill,l,null)),g.push(r.getBoundingBox(a))}}const m=r.computeBBox(g),y=r.getTransformMatrix(m,a,a,0,!1,0);return(0,i.h)("span",{title:t,class:E},(0,i.h)("div",{style:c},(0,i.h)("svg",{width:a,height:a,style:null,xmlns:"http://www.w3.org/2000/svg"},(0,i.h)("defs",null,d),(0,i.h)("g",{transform:y},p))))};function D(e){const{pattern:t,linearGradient:o}=e;if(t)return(0,i.h)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},(0,i.h)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(o){const e=o.stops.map(((e,t)=>(0,i.h)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color})));return(0,i.h)("linearGradient",{id:o.id,gradientUnits:"userSpaceOnUse",x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},e)}return null}let T=0,O=0;function _(e,t,o,s){if(e){if("circle"===e.type)return(0,i.h)("circle",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return(0,i.h)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return(0,i.h)("rect",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return(0,i.h)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const s="string"!=typeof e.path?e.path.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim():e.path;return(0,i.h)("path",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",d:s})}if("text"===e.type)return(0,i.h)("text",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4","text-anchor":s.align,"text-decoration":s.decoration,kerning:s.kerning,rotate:s.rotate,"text-rendering":"auto","font-style":s.font.style,"font-variant":s.font.variant,"font-weight":s.font.weight,"font-size":s.font.size,"font-family":s.font.family,x:e.x,y:e.y},e.text)}return null}function R(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const o="patternId-"+ ++T;t.fill=`url(#${o})`,t.pattern={id:o,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const o="linearGradientId-"+ ++O;t.fill=`url(#${o})`,t.linearGradient={id:o,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&(0,p.c)(e.color).toString()})))}}else if(e){const o=(0,p.c)(e);t.fill=o.toString()}return t}function $(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=(0,p.c)(e.color).toString()),e.style)){let o=null;if(e.style in F&&(o=F[e.style]),Array.isArray(o)){o=o.slice(0);for(let t=0;t<o.length;++t)o[t]*=e.width;if("butt"!==e.cap){for(let t=0;t<o.length;t+=2)o[t]-=e.width,o[t]<1&&(o[t]=1);for(let t=1;t<o.length;t+=2)o[t]+=e.width}o=o.join(",")}t.dashArray=o}return t}const F={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},A=class{constructor(e){(0,i.r)(this,e),this.setInlineInputRef=e=>{this.inlineInputEl=e},this.disabled=!1,this.options=void 0,this.placement="auto",this.popoverProps=void 0,this.strings=void 0}async setFocus(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.setFocus())}async close(){var e;await(null===(e=this.inlineInputEl)||void 0===e?void 0:e.close())}render(){const{disabled:e,strings:t}=this,o=(0,l.g)(this.el);return(0,i.h)(i.H,{key:"4cdb383c0d4567459c876c6a172d219ed2129d99"},(0,i.h)("arcgis-symbol-styler-inline-input",{key:"f09a2d971afe228e942ab9ded3726524fe4b74cb",disabled:e,intlDone:t.done,heading:t.ramp,label:this.options.heading,popoverProps:this.popoverProps,ref:this.setInlineInputRef,class:{[l.C.rtl]:"rtl"===o}},(0,i.h)("div",{key:"7d4467dcf6a6392839e1966213366967addf89ab",class:S,slot:"content"},this.renderRampsContent(this.options)),(0,i.h)("div",{key:"606a2e917bac8835fdbaa7e5c999c575da5ba28f",slot:"preview"},(0,i.h)(I,{key:"b0833db12d84e658b962e6cddee732d84449db32",stops:this.options.colorRampStops.slice().reverse(),style:this.options.style,layout:"horizontal",height:"100%",width:"100%"}))))}renderRampsContent({activeCategory:e,colorRamps:t,isSelected:o,onCategoryChange:s,onFlip:r,onSelect:l,style:n}){const{strings:a}=this,{categories:c,ramps:d}=this.getCategoriesAndColorRampsBySelectedCategory(e,t),p="2d"===n,u=p?"rotate":"arrow-up-down",g=p?a.rotateColors:a.flipColors,f=p?U:I,m=p?3:6;return[(0,i.h)("div",{class:"section"},(0,i.h)("calcite-label",null,this.strings.category,(0,i.h)("calcite-select",{width:"full",label:this.strings.category,onCalciteSelectChange:s},c.map((t=>(0,i.h)("calcite-option",{value:t,label:a.categories[t],selected:t===e}))))),(0,i.h)("calcite-button",{class:h.C.colorRampFlipper,appearance:"transparent",onClick:e=>{e.preventDefault(),e.stopImmediatePropagation(),r()},scale:"s",width:"full"},(0,i.h)("calcite-icon",{icon:u,scale:"s",style:p?{transform:"rotateY(180deg)"}:null}),g)),(0,i.h)("div",{class:{[h.C.scroller]:!0,[h.C.colorRampSelection]:!0}},(0,i.h)("arcgis-item-palette",{items:d,extraItemProps:{style:n},ItemRenderer:f,itemsPerRow:m,selected:o,onArcgisItemSelect:l}))]}getCategoriesAndColorRampsBySelectedCategory(e,t){const o=h.F[e],i=t.filter((t=>"all"===e||o.some((e=>t.tags.indexOf(e)>-1)))),s=new Set;t.forEach((e=>e.tags.forEach((e=>s.add(e)))));return{categories:Object.keys(h.F).filter((e=>"all"===e||h.F[e].some((e=>s.has(e))))),ramps:i}}get el(){return(0,i.d)(this)}};A.style=".scroller{max-height:var(--scroller-max-height, 200px);overflow-y:auto;min-width:200px;overflow-x:hidden;display:flex;justify-content:center}.color-ramp-item{display:inline-flex;flex-grow:1}.color-ramp-item svg{display:flex}.color-picker-container{display:flex;flex-direction:column}.color-picker-container arcgis-item-palette .palette{gap:20px}calcite-color-picker-swatch{width:200px}.section{display:flex;flex-direction:column;padding:12px;background-color:var(--arcgis-app-background)}.color-ramp-selection{padding:4px 20px 4px 4px;border:1px solid lightgray;border-top:none}.arcgis--rtl .color-ramp-selection{padding:4px 4px 4px 20px;}.color-ramp-flipper calcite-icon{margin:0 0.5rem}[slot=preview] .color-ramp-item{height:24px}";const H=class{constructor(e){(0,i.r)(this,e),this.disabled=!1,this.embedded=!1}render(){return(0,i.h)(i.H,{key:"ed72030caa273e619926679a61242b9757818951",tabindex:this.disabled?-1:""},(0,i.h)("slot",{key:"2486c169a3ca8ff2e9b26928f7bcb8a5beea1dca"}))}};H.style=":host{display:flex;flex-direction:column;background-color:var(--arcgis-app-background);padding:16px 12px}:host([disabled]){opacity:var(--arcgis-app-disabled-opacity);pointer-events:none}:host([embedded]){padding:0}";const N=class{constructor(e){(0,i.r)(this,e),this.updatePreview=(0,a.d)((async()=>{var e;const{symbol:t}=this;if(!t)return;const o=Object.assign({},this.options);"cim"===t.type&&"CIMPolygonSymbol"===t.data.symbol.type&&delete o.size;const i=t.clone();"picture-marker"===i.type&&o.size&&"number"==typeof o.size&&(i.width=i.width/i.height*o.size,i.height=o.size);const s=u.e.symbolUtils.renderPreviewHTML(i,o);this.lastPreviewRender=s;const r=await s;this.lastPreviewRender!==s||(null===(e=this.lastPreview)||void 0===e||e.remove(),this.lastPreview=r,this.el.shadowRoot.append(r),this.backgroundTheme=u.e.previewSymbol2D.getContrastingBackgroundTheme(t,245))}),250),this.backgroundTheme="light",this.contrast=!1,this.options=void 0,this.symbol=void 0}watchSymbolAndOptions(){this.updatePreview()}async componentDidLoad(){await this.updatePreview()}render(){return(0,i.h)(i.H,{key:"557af6954b082eb130e17315a90587e92d7fdbc7",class:{dark:this.contrast&&"dark"===this.backgroundTheme}})}get el(){return(0,i.d)(this)}static get watchers(){return{symbol:["watchSymbolAndOptions"],options:["watchSymbolAndOptions"]}}};N.style=":host{display:inline-block}:host(.dark){background-color:#f3f3f3}"},82748:(e,t,o)=>{o.d(t,{c:()=>r,i:()=>l});var i=o(94278);const s=[0,0,0,0];function r(e,t=!1){const o=null!=e?e:s;return t?i.e.Color.fromJSON(o):new i.e.Color(o)}function l({r:e,g:t,b:o,a:i}){return 0===e&&0===t&&0===o&&0===i}},25380:(e,t,o)=>{o.d(t,{A:()=>S,B:()=>x,C:()=>i,D:()=>P,E:()=>$,F:()=>s,a:()=>m,b:()=>l,c:()=>c,d:()=>n,e:()=>d,f:()=>R,g:()=>a,h:()=>h,i:()=>I,j:()=>p,k:()=>g,l:()=>b,m:()=>y,n:()=>C,o:()=>f,p:()=>u,q:()=>w,r:()=>v,s:()=>r,t:()=>D,u:()=>T,v:()=>E,w:()=>U,x:()=>O,y:()=>_,z:()=>k});const i={customSymbolContent:"custom-symbol-content",autoAdjustLabel:"auto-adjust-label",styleDropdown:"style-dropdown",arrowDropdown:"arrow-dropdown",iconDropdown:"icon-dropdown",iconDropdownSelected:"icon-dropdown--selected",iconDropdownItemContent:"icon-dropdown-item-content",colorRampFlipper:"color-ramp-flipper",scroller:"scroller",colorRampSelection:"color-ramp-selection",sectionToggleDisabled:"section-toggle--disabled",autoAdjustCheckbox:"auto-adjust-checkbox",contentGroup:"content-group",colorLockedInfo:"color-locked-info",message:"message",container:"container",label:"label",openIcon:"open-icon",symbol:"symbol",changeSymbolTrigger:"change-symbol-trigger"},s={all:["*"],light:["light"],dark:["dark"],redsAndYellows:["oranges","reds","yellows"],greens:["greens"],blues:["blues"],purplesAndPinks:["purples","pinks"],browns:["browns"],grays:["grays"],bright:["bright"],subdued:["subdued"],colorblindFriendly:["colorblind-friendly"]},r=["none","begin","end","begin-end"],l=["solid","dash","dot","dash-dot","long-dash-dot-dot","short-dash","short-dot","short-dash-dot","short-dash-dot-dot","long-dash","long-dash-dot"],n={size:!0,preview:!0,rotation:!0},a={style:!0,arrow:!0,width:!0,autoStrokeAdjust:!1},c={suggestedColors:!0,customColor:!0,transparency:!0},d={colorRamps:!0,transparency:!0},h={extra:!0},p="arcgis-symbol-styler-storage-colors",u={size:24,maxSize:24},g=100,f=0,m=18,y=0,b=360,v=0,w=150,C=1,k=200,S=0,x=100,P=0,I=10,E=200,U=0,D=100,T=0,O=120,_=0;function R(e,t=!1){return t?function(e){const t=Math.sqrt(e.length),o=$(e).reverse(),i=[];for(let e=0;e<t;e++){const t=[];o.forEach((o=>t.push(o[e]))),i.push(t)}return function(e,t){let o=[];e=e.slice().map((e=>e.slice()));const i=(t||"HH").split(""),s=i[0],r=i[1];"L"===s&&e.reverse();const l="H"===r;return e.forEach((e=>{l&&e.slice().reverse(),o=o.concat(e)})),o}(i).reverse()}(e):e.slice().reverse()}function $(e,t){let o=[];const i=Math.sqrt(e.length),s=(t||"HH").split(""),r=s[0],l="H"!==s[1];for(let t=0;t<i;t++){let s=[];for(let o=0;o<i;o++){const r=t*i+o;s.push(e[r])}l&&s.reverse(),o.push(s)}return"L"===r&&o.reverse(),o}},31670:(e,t,o)=>{o.d(t,{c:()=>s,o:()=>r});const i=(0,o(11935).c)({portal:null,user:null,api:4,scale:"m"}),s=i.state,r=i.onChange},11246:(e,t,o)=>{o.d(t,{a:()=>c,b:()=>p,c:()=>s,d:()=>i,e:()=>r,f:()=>d,g:()=>u,i:()=>l,m:()=>n,t:()=>a,u:()=>h});const i=(e,t)=>{let o,i="idle";const s=(...s)=>new Promise((r=>{switch(i){case"flushed":i="idle",o?(clearTimeout(o),r(e(...s))):r(null);break;case"invoked":clearTimeout(o),i="idle",r(e(...s));break;case"cancelled":clearTimeout(o),i="idle",r(null);break;default:o&&clearTimeout(o),i="pending",o=setTimeout((()=>(i="idle",r(e(...s)))),t)}}));return s.flush=function(...e){return i="flushed",s(...e)},s.invoke=function(...e){return i="invoked",s(...e)},s.cancel=function(...e){return i="cancelled",s(...e)},s.getStatus=function(){return i},s},s=(e,t)=>{let o;return(...i)=>new Promise((s=>{o||(o=setTimeout((()=>{clearTimeout(o),o=void 0,s(e(...i))}),t))}))};function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(e){return null!=e}async function n(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:o,data:i}=t(e);return[o,i]}))),d=(e,t)=>e.length===t.length&&e.reduce(((e,o)=>e&&t.indexOf(o)>-1),!0);function h(e,t){const o=[],i={};return e.forEach((e=>{const s=t(e);null==i[s]&&(i[s]=e,o.push(e))})),o}function p(e){const t={boolean:{},number:{},string:{}},o=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(o.indexOf(e)>=0)&&o.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((o,i)=>e.slice(t*i,t+t*i)))},11935:(e,t,o)=>{o.d(t,{c:()=>a});var i=o(7263);const s=e=>!("isConnected"in e)||e.isConnected,r=((e,t)=>{let o;return(...i)=>{o&&clearTimeout(o),o=setTimeout((()=>{o=0,e(...i)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))}),2e3),l=e=>"function"==typeof e?e():e,n=(e,t)=>{const o=e.indexOf(t);o>=0&&(e[o]=e[e.length-1],e.length--)},a=(e,t)=>{const o=((e,t=((e,t)=>e!==t))=>{const o=l(e);let i=new Map(Object.entries(null!=o?o:{}));const s={dispose:[],get:[],set:[],reset:[]},r=()=>{var t;i=new Map(Object.entries(null!==(t=l(e))&&void 0!==t?t:{})),s.reset.forEach((e=>e()))},a=e=>(s.get.forEach((t=>t(e))),i.get(e)),c=(e,o)=>{const r=i.get(e);t(o,r,e)&&(i.set(e,o),s.set.forEach((t=>t(e,o,r))))},d="undefined"==typeof Proxy?{}:new Proxy(o,{get:(e,t)=>a(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,o)=>(c(t,o),!0)}),h=(e,t)=>(s[e].push(t),()=>{n(s[e],t)});return{state:d,get:a,set:c,on:h,onChange:(t,o)=>{const i=h("set",((e,i)=>{e===t&&o(i)})),s=h("reset",(()=>o(l(e)[t])));return()=>{i(),s()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{s.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const t=i.get(e);s.set.forEach((o=>o(e,t,t)))}}})(e,t);return o.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const o=(0,i.g)();o&&((e,t,o)=>{const i=e.get(t);i?i.includes(o)||i.push(o):e.set(t,[o])})(e,t,o)},set:t=>{const o=e.get(t);o&&e.set(t,o.filter(i.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),r(e)}}})()),o}},43935:(e,t,o)=>{o.d(t,{c:()=>i,p:()=>s});function i(e){e.layer=null,e.mapView=null,e.portal=null,e.config=null,e.strings=null,e.currentLanguage=null,e.currentLanguageIntl=null,e.serviceType=null,e.popupTemplate=null,e.layerHasAttachment=null,e.layerHasET=null,e.layerHasAttributes=null,e.layerHasCharts=null,e.layerHasImages=null,e.layerHasText=null,e.layerDisplayType=null,e.supportsArcade=null,e.blockFeatureReductionArcade=!1,e.layerHasRelatedRecords=!1}const s=(0,o(11935).c)({layer:null,mapView:null,portal:null,config:null,strings:null,currentLanguage:null,currentLanguageIntl:null,serviceType:null,popupTemplate:null,layerHasAttachment:null,layerHasET:null,layerHasAttributes:null,layerHasCharts:null,layerHasImages:null,layerHasText:null,layerDisplayType:null,supportsArcade:null,blockFeatureReductionArcade:!1,layerHasRelatedRecords:!1}).state},94788:(e,t,o)=>{o.d(t,{a:()=>u,b:()=>p,c:()=>b,d:()=>v,e:()=>f,f:()=>r,g:()=>y,h:()=>l,i:()=>m,p:()=>h,r:()=>a,s:()=>s,t:()=>g,v:()=>c});var i=o(31670);const s=/\+|\?|\/|\(|\)|\\|\!|\#|\"|\||\*|\:|<|>|\%|\$|\@|\'|\^|\[|\]|\,|\=|\;/gi,r=/(\.|outputFormat=)json|geojson$/i,l=/\/ags\//gi,n="MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer|VideoServer",a=new RegExp(`http.+/(${n})`),c="/arcgis/rest/services|/rest/services|/arcgis/services|/arcgis/rest",d=new RegExp(`(?<server>http.+(?:${c})(?:/?.*/(?<name>.*)/(?<type>${n})))(?!.*/${n})/?(?<soe>\\d+)?.*`,"i"),h=e=>{const t=e.match(d);if(!t){return e.match(l)?{baseServerUrl:e,serverName:null,serverType:"MapServer",index:null}:null}const[,o,i,s,r]=t,n=parseInt(r);return{baseServerUrl:o,serverName:i,serverType:s,index:isNaN(n)?null:n}},p=e=>{if(!e)return null;if(!e.match(c))return null;const t=e.split("/rest");return t.length<2?null:`${t[0]}/rest/`},u=e=>e&&"/"!==e.charAt(e.length-1)?`${e}/`:e,g=({path:e,url:t})=>{const o=t.split("/"),i=e.split("/");return o.slice(0,o.length-i.length).join("/")};function f(e){const{customBaseUrl:t,portalHostname:o,urlKey:i}=e,{protocol:s}=window.location;return`${s}//${i?`${i}.${t}`:o}`}function m(e){var t,o;return null!==(t=null==e?void 0:e.isWebTierAuth)&&void 0!==t?t:null===(o=e.sourceJSON)||void 0===o?void 0:o.isWebTierAuth}function y(e){var t;const{portal:o,config:s}=i.c||{};return null!==(t=u(null==s?void 0:s.restBaseUrl))&&void 0!==t?t:b(e||o)}function b(e){var t;return u(null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl)}function v(e){var t,o,i;return(null===(o=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.sourceJSON)||void 0===o?void 0:o.culture)||(null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.culture)||navigator.language||"en-US"}},81457:(e,t,o)=>{o.d(t,{a:()=>d,b:()=>c,c:()=>h,d:()=>r,e:()=>s,g:()=>n,r:()=>a,s:()=>l});var i=o(11246);function s(e,t,o,i){!function(e,t,o){o=o||{};let i=null==o?void 0:o.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=o.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(o.expires=i.toUTCString());let s,r=`${e}=${encodeURIComponent(t)}`;for(s in o){r+=`; ${s}`;const e=o[s];!0!==e&&(r+=`=${e}`)}document.cookie=r}(e,i?JSON.stringify(t):t,o)}function r(e,t){const o=function(e){const t=document.cookie,o=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),s=t.match(o);return s?decodeURIComponent(s[1]):void 0}(e);return o&&t?JSON.parse(o):o}function l(e,t,o){window.localStorage.setItem(e,o?JSON.stringify(t):t)}function n(e,t){const o=window.localStorage.getItem(e);return o&&t?JSON.parse(o):o}function a(e){window.localStorage.removeItem(e)}function c(e,t,o){window.sessionStorage.setItem(e,o?JSON.stringify(t):t)}function d(e,t){const o=window.sessionStorage.getItem(e);return o&&t?JSON.parse(o):o}function h(e){window.sessionStorage.removeItem(e)}},94278:(e,t,o)=>{o.d(t,{a:()=>n,b:()=>d,c:()=>c,d:()=>a,e:()=>r,f:()=>u,g:()=>s,h:()=>p,i:()=>l,j:()=>h});var i=o(28926);function s(e){return"cim"===e.type?"CIMLineSymbol"===e.data.symbol.type?"line":"CIMPolygonSymbol"===e.data.symbol.type?"polygon":"point":"simple-marker"===e.type||"picture-marker"===e.type?"point":"simple-line"===e.type?"line":"polygon"}const r={loaded:!1,async load(){if(this.loaded)return;const[e,t,o,s,r,l,n,a,c,d,h,p,u,g,f,m,y]=await(0,i.l)(["esri/core/screenUtils","esri/Color","esri/portal/Portal","esri/symbols/CIMSymbol","esri/symbols/WebStyleSymbol","esri/core/devEnvironmentUtils","esri/core/promiseUtils","esri/core/urlUtils","esri/portal/PortalItem","esri/symbols/support/previewSymbol2D","esri/symbols/support/gfxUtils","esri/symbols/support/jsonUtils","esri/symbols/support/styleUtils","esri/symbols/support/svgUtils","esri/symbols/support/symbolUtils","esri/symbols/support/cimSymbolUtils","esri/symbols/support/webStyleSymbolUtils"]);this.Color=t,this.Portal=o,this.CIMSymbol=s,this.WebStyleSymbol=r,this.devEnvironmentUtils=l,this.previewSymbol2D=d,this.promiseUtils=n,this.urlUtils=a,this.PortalItem=c,this.gfxUtils=h,this.jsonUtils=p,this.screenUtils=e,this.styleUtils=u,this.svgUtils=g,this.symbolUtils=f,this.cimSymbolUtils=m,this.webStyleSymbolUtils=y,this.loaded=!0}};function l(e){return"cim"===(null==e?void 0:e.type)}function n(e){return"simple-marker"===(null==e?void 0:e.type)}function a(e){return"picture-marker"===(null==e?void 0:e.type)}function c(e){return"simple-line"===(null==e?void 0:e.type)}function d(e){return"simple-fill"===(null==e?void 0:e.type)}function h(e){return"CIMPointSymbol"===e.data.symbol.type}function p(e){return"CIMLineSymbol"===e.data.symbol.type}function u(e){return"CIMPolygonSymbol"===e.data.symbol.type}}}]);