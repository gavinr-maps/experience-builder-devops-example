"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_common_feature-report_node_modules_arcgis-survey123_feature-report-compone-2040c9"],{48833:(e,t,o)=>{o.r(t),o.d(t,{error_detail_modal:()=>d,success_detail_modal:()=>l});var r=o(98612),a=o(12542),s=o(28593);const d=class{constructor(e){(0,r.r)(this,e),this.job=void 0,this.open=void 0,this.maxFailedOIDLength=void 0}componentWillLoad(){return this.utilService=s.U.getService(),Promise.resolve(!0).then((()=>a.T.getService().getTranslate())).then((e=>{const t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}componentDidRender(){this.updateFailedOIDlength(this.job)}updateFailedOIDlength(e){if(this.maxFailedOIDLength>0)return;let t=120;const o=this.modal.shadowRoot.querySelector(".helperSpan");return e.failedInfo&&e.failedInfo.length&&o&&e.failedInfo.forEach((e=>{o.innerHTML=e.objectIds,o.offsetWidth>t&&(t=o.offsetWidth)})),this.maxFailedOIDLength=t,t}render(){return(0,r.h)(r.H,{key:"0b61a6addd4d68c37b0365d451228057e73ac2b8"},(0,r.h)("div",{key:"90b551f2a3aa5dd8ef56f31477f74c38877dccc1",class:"helper"},(0,r.h)("div",{key:"230f9d212e262c38a46501cc0e59970beb99d2d3"},(0,r.h)("span",{key:"6e0fd70e442d267c7c24f1b93f36db51feae2869",class:"helperSpan"}))),(0,r.h)("calcite-modal",{key:"10ef11a413ebc0a52d850fc311995ea965a0f2a6",open:this.open,"aria-labelledby":"modal-title",onCalciteModalClose:()=>{this.open=!1},id:"example-modal"},(0,r.h)("div",{key:"1349abb0810aca7c2d52774772c935c5daffe850",slot:"header",id:"modal-title"},this.langTasks.detailFailedOIDs,this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length?" ("+this.job.resultInfo.failedObjectIds.length+") ":""),(0,r.h)("div",{key:"a55f170fa50548b630ca5b0e63a36a67d27f5eaf",slot:"content"},(0,r.h)("div",{key:"2e3297036883292c234031bdd5e344be80aac82e",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`,overflow:"auto"}},this.job&&this.job.failedInfo&&this.job.failedInfo.length?(0,r.h)("table",{class:"table table-striped table-bordered error-table"},(0,r.h)("thead",null,(0,r.h)("tr",null,(0,r.h)("th",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength+16}px`}},this.langTasks.detailFailedOIDs),(0,r.h)("th",null,this.langTasks.detailStatusMsg))),(0,r.h)("tbody",null,this.job.failedInfo.map((e=>(0,r.h)("tr",null,(0,r.h)("td",null,(0,r.h)("div",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength}px`}},e.objectIds)),(0,r.h)("td",null,(0,r.h)("div",{class:"message",innerHTML:this.utilService.parseMarkdown(e.messages)}))))))):""))),(0,r.h)("slot",{key:"3f65867c3551d0d24ea523a47d0ba77cb0377af3"}))}get modal(){return(0,r.a)(this)}};d.style=":host{display:block}:host .helper{width:0;height:0;overflow:hidden;visibility:hidden}:host .helper div{width:9999px}:host .helper span{padding:8px}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}";const l=class{constructor(e){(0,r.r)(this,e),this.job=void 0,this.open=void 0}componentWillLoad(){return Promise.resolve(!0).then((()=>{const e=a.T.getService().getTranslateSync(),t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}render(){return(0,r.h)(r.H,{key:"78b16065100ace943da88dbb06dc461bdbfb04d3"},(0,r.h)("calcite-modal",{key:"ddf123fad7b15bb6ff323c3e3ca70b992fe39ed8",open:this.open,onCalciteModalClose:()=>{this.open=!1},"aria-labelledby":"modal-title",id:"example-modal"},(0,r.h)("div",{key:"701bd1b07a9c326b5ed827dd17ff6509d0ca1165",slot:"header",id:"modal-title"},this.langTasks.detailSucceededOIDs,this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?" ("+this.job.resultInfo.succeededObjectIds.length+") ":""),(0,r.h)("div",{key:"e4a34c372a0cb2f5b77bf53e8c15d7bc2a1f528c",slot:"content"},(0,r.h)("div",{key:"e26b57d66fea1f5fc17bc97eed82f824fd0984e0",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`}},this.job&&this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?(0,r.h)("table",{class:"table table-striped table-bordered error-table"},(0,r.h)("tbody",null,(0,r.h)("tr",null,(0,r.h)("td",null,(0,r.h)("div",{class:"message",style:{maxWidth:"720px"}},this.job.resultInfo.succeededObjectIds))))):""))),(0,r.h)("slot",{key:"e13cefbd869c6a5e42152a58dfdf9e573de272c8"}))}get modal(){return(0,r.a)(this)}};l.style=":host{display:block}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}"},12542:(e,t,o)=>{o.d(t,{P:()=>a,T:()=>i});var r=o(98612);class a{static setProps(e){const t=a.paramesWhitelist;let o="";const r=window.location.hostname.match(/survey123(.*?).arcgis.com/);r&&r[1]&&["dev","qa","beta"].includes(r[1])&&(o=r[1]);const s={apiUrl:`https://survey123${o}.arcgis.com/api/featureReport`,itemId:null,token:null,outputFormat:"docx",portalUrl:"https://www.arcgis.com",locale:this.getLocale(),f:"json"};if("object"==typeof e)for(let o in e)t.indexOf(o)>=0&&(a[o]=e[o]||s[o]||e[o],"locale"===o&&e[o]&&(a[o]=this.convertToSupportedLang(e[o])));"docx"!==a.outputFormat&&"pdf"!==a.outputFormat&&(a.outputFormat="docx")}static getLocale(e){let t=(e=Object.assign({},e||{})).userInfo||{},o=e.portalInfo||{};const r=navigator.language||navigator.userLanguage;return this.convertToSupportedLang(e.userDefinedLocale)||this.convertToSupportedLang(t.culture)||this.convertToSupportedLang(o.culture)||this.convertToSupportedLang(r)||"en"}static convertToSupportedLang(e){e=((e=e||"")+"").toLowerCase();const t=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"].find((t=>t.toLowerCase()===e||t.toLowerCase()===e.split("-")[0]));return["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","it-CH","de-CH","de-AT","fr-CH"].find((t=>t.toLowerCase()===e))||t}}a.paramesWhitelist=["token","portalUrl","apiUrl","featureLayerUrl","surveyItemId","templateItemId","queryParameters","mergeFiles","outputFormat","outputReportName","outputPackageName","packageFiles","uploadInfo","webmapItemId","mapScale","locale","utcOffset","where","username","show","hide","inputFeatureTemplate","label","reportTemplateIds","clientId","requestSource"];const s="en",d=["ar","bg","bs","ca","cs","da","de","el",s,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"],l=["ar","bg","bs","ca","cs","da","de","de-at","de-ch","el",s,"en-au","en-ca","en-gb","es","es-mx","et","fi","fr","fr-ch","he","hi","hr","hu","id","it","it-ch","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];class i{static getService(){return this.service||(this.service=new i),this.service}getTranslate(){const e=this.getSupportedLocale(a.locale||"en");return Promise.resolve(!0).then((()=>{if(this.cache&&this.cache[e])try{return JSON.parse(this.cache[e])}catch(e){return null}})).then((t=>t||fetch((0,r.g)(`./assets/i18n/${e}.json`)).then((e=>{if(!e.ok)throw new Error("could not fetch the translate json file");return e.json()})))).then((t=>{if(t){if(this.cache=this.cache||{},!this.cache[e])try{this.cache[e]=JSON.stringify(t)}catch(e){}if(a.label){const e={inputFeatures:"inputFeatures",selectTemplate:"chooseTemplateLabel1",reportSetting:"resultSettingsLabel1",fileOptions:"outputMode",reportName:"saveToAGOItemName",saveToAGSAccount:"saveToAGOFolder",outputFormat:"outputFormat",showCredits:"creditsEstimate",generateReport:"generate",previewMode:"previewReport"},o=JSON.parse(a.label);Object.keys(o).forEach((r=>{const a=o[r];"recentReports"===r&&(t.customPrint.recentTasks.label=a);const s=e[r];["inputFeatures","selectTemplate","reportSetting","fileOptions","reportName","saveToAGSAccount","outputFormat","showCredits","generateReport","previewReport"].indexOf(r)>=0&&(t.customPrint[s]=a)}))}i.currentLangObj=t}return t})).catch((e=>{throw new Error(e)}))}getTranslateSync(){return i.currentLangObj}getSupportedLocale(e,t="cldr"){const o="cldr"===t?l:d;return e?o.includes(e)?e:"nb"===(e=e.toLowerCase())?"no":"t9n"===t&&"pt"===e?"pt-br":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,o)=>`${t}-${o.toUpperCase()}`)),o.includes(e)||(e=e.split("-")[0])),"zh"===e?"zh-cn":o.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),s)):s}}}}]);