/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-df44f3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-df44f3"],{99004:(t,e,r)=>{r.d(e,{c:()=>n,g:()=>i});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}},86973:(t,e,r)=>{r.r(e),r.d(e,{arcgis_member_browser_filter_affiliation:()=>c});var n=r(7263),i=r(32023),o=r(31670),s=r(52042),a=r(46143),l=r(69773);r(11935),r(94788),r(46581),r(28926),r(70506),r(99004),r(65215),r(93816),r(78613);const c=class{constructor(t){(0,n.r)(this,t),this.arcgisMemberBrowserFilter=(0,n.c)(this,"arcgisMemberBrowserFilter",7),this.initAffiliations=async()=>{var t;const{portal:e}=null!==o.c&&void 0!==o.c?o.c:{};if(!e)return;await this.loadPartnerOrgs();const r=await(0,a.e)(e,this.store.state.groupId),n=(null===(t=r.find((t=>t.value===e.id)))||void 0===t?void 0:t.count)||0;let i;this.affiliations=[{id:e.id,label:this.i18n.myOrg,count:n}],r.forEach((t=>{var r;const n=null===(r=this.store.state.partnerCollaborations)||void 0===r?void 0:r.find((e=>e.to.orgId===t.value));n?this.affiliations.push({id:n.to.orgId,label:n.to.name,count:t.count}):t.value!==e.id&&(i?(i.id+=`,${t.value}`,i.count+=t.count):i={id:t.value,label:this.i18n.other,count:t.count})})),i&&this.affiliations.push(i)},this.loadPartnerOrgs=async()=>{var t;const{portal:e}=null!==o.c&&void 0!==o.c?o.c:{},r=null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.subscriptionInfo;!this.store.state.partnerCollaborations&&r&&(0,s.c)(e)&&(this.store.state.partnerCollaborations=await(0,a.c)(e))},this.orgIds=void 0,this.expanded=void 0,this.affiliations=void 0}componentWillLoad(){this.store=(0,i.g)(this.el),this.i18n=this.store.state.i18n.filterAffiliation}componentDidLoad(){this.initAffiliations(),(0,o.o)("portal",this.initAffiliations),(0,l.a)("affiliation",this.store,(()=>this.orgIds=null))}getEventDetail(){const{orgIds:t}=this;if(!t)return{id:"affiliation",param:"orgIds",value:"",label:""};const e=this.affiliations.find((e=>e.id===t));return{id:"affiliation",param:"orgIds",value:e.id,label:this.i18n.label.replace("${name}",e.label)}}render(){const{portal:t}=o.c,{group:e}=this.store.state;return this.store.state.myOrgView||!t||t.isPortal||!this.affiliations||this.affiliations.length<=1||"org"===(null==e?void 0:e.membershipAccess)||(null==e?void 0:e.hiddenMembers)?null:(0,n.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.orgIds,onArcgisBrowserFilterRemove:()=>{this.orgIds=null},filterID:"affiliation"},(0,n.h)("div",{class:"tree-wrapper"},(0,n.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:t=>{var e;const r=(null===(e=t.target.selectedItems)||void 0===e?void 0:e[0].dataset.orgIds)||"";this.orgIds===r?this.orgIds=null:this.orgIds=r,this.arcgisMemberBrowserFilter.emit(this.getEventDetail())}},this.affiliations.map((t=>(0,n.h)("calcite-tree-item",{key:t.id,"data-org-ids":t.id,selected:t.id===this.orgIds},(0,n.h)("a",null,t.label," (",t.count,")")))))))}get el(){return(0,n.d)(this)}}},70506:(t,e,r)=>{r.d(e,{e:()=>o});var n,i=r(99004),o={exports:{}};n=o.exports,i.c,function(t){var e={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function i(t){if(t.toLowerCase()===n)return n;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function o(t){return void 0===t&&(t=r),"https://js.arcgis.com/".concat(t,"/")}function s(t){void 0===t&&(t=r);var e=o(t),s=i(t);if(s!==n&&3===s.major){var a=s.minor<=10?"js/":"";return"".concat(e).concat(a,"esri/css/esri.css")}return"".concat(e,"esri/themes/light/main.css")}function a(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}function l(t,e){if(e){var r=document.querySelector(e);r.parentNode.insertBefore(t,r)}else document.head.appendChild(t)}function c(t){return document.querySelector('link[href*="'.concat(t,'"]'))}function u(t){return!t||i(t)?s(t):t}function d(t,e){var r=u(t),n=c(r);return n||l(n=a(r),e),n}var f={};function v(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}function h(t,e,r){var n;r&&(n=p(t,r));var i=function(){e(t),t.removeEventListener("load",i,!1),n&&t.removeEventListener("error",n,!1)};t.addEventListener("load",i,!1)}function p(t,e){var r=function(n){e(n.error||new Error("There was an error attempting to load ".concat(t.src))),t.removeEventListener("error",r,!1)};return t.addEventListener("error",r,!1),r}function m(t){void 0===t&&(t={}),f=t}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var t=window.require;return t&&t.on}function y(t){void 0===t&&(t={});var r={};[f,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}));var n=r.version,i=r.url||o(n);return new e.Promise((function(t,e){var o=g();if(o){var s=o.getAttribute("src");s!==i?e(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):w()?t(o):h(o,t,e)}else if(w())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=r.css;a&&d(!0===a?n:a,r.insertCssBefore),h(o=v(i),(function(){o.setAttribute("data-esri-loader","loaded"),t(o)}),e),document.body.appendChild(o)}}))}function b(t){return new e.Promise((function(e,r){var n=window.require.on("error",r);window.require(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.remove(),e(t)}))}))}function I(t,e){if(void 0===e&&(e={}),w())return b(t);var r=g(),n=r&&r.getAttribute("src");return!e.url&&n&&(e.url=n),y(e).then((function(){return b(t)}))}t.utils=e,t.loadModules=I,t.getScript=g,t.isLoaded=w,t.loadScript=y,t.setDefaultOptions=m,t.loadCss=d,Object.defineProperty(t,"__esModule",{value:!0})}(n)},28926:(t,e,r)=>{r.d(e,{l:()=>i});var n=r(70506);const i=async(t,e)=>(await n.e.exports.loadModules(t,e)).map((t=>t.__esModule&&t.default?t.default:t))},93816:(t,e,r)=>{r.d(e,{f:()=>i});var n=r(46581);async function i(t,e,r="results",i=!1){let o,s,a,l,c=1,u=[];e.start=c,e.num||(e.num=100);try{const d=await(0,n.r)(t,e);if(!(null==d?void 0:d[r]))return u;for(u=[...u,...d[r]],c=d.nextStart,o=d.total-u.length,s=Math.ceil(o/e.num),a=[],l=0;l<s;l++)if(e.start=c+l*e.num,i){const i=await(0,n.r)(t,e);(null==i?void 0:i[r])&&(u=[...u,...i[r]])}else a.push((0,n.r)(t,e));if(!i){(await Promise.all(a)).forEach((t=>{u=[...u,...t[r]]}))}return u}catch(t){return u}}},46143:(t,e,r)=>{r.d(e,{a:()=>s,b:()=>a,c:()=>f,d:()=>v,e:()=>h,f:()=>l,g:()=>m,h:()=>p,i:()=>c,j:()=>u,k:()=>d});var n=r(94788),i=r(46581),o=r(93816);async function s(t){const e=(0,n.c)(t);return await(0,o.f)(`${e}portals/self/userLicenseTypes`,{num:10},"userLicenseTypes")}async function a(t){const e=(0,n.c)(t),r=await(0,o.f)(`${e}portals/self/roles`,{returnPrivileges:!0},"roles");return r.sort(((t,e)=>{const r=t.name.toLowerCase(),n=e.name.toLowerCase();return r>n?1:r<n?-1:0})),r}async function l(t,e){const r=(0,n.c)(t);let s;try{s=(await(0,i.r)(`${r}community/groups/${e}/userlist`,{num:0})).owner}catch(t){}return{admins:await(0,o.f)(`${r}community/groups/${e}/userlist`,{memberType:"admin"},"users"),owner:null==s?void 0:s.username}}async function c(t,e){const r=(0,n.c)(t),o=await(0,i.r)(`${r}community/users/${e}`),s=(null==o?void 0:o.groups)||[];return s.sort(((t,e)=>{const r="owner"===t.userMembership.memberType?1:-1,n="owner"===e.userMembership.memberType?1:-1,i=t.title.toLowerCase(),o=e.title.toLowerCase();return r!==n?n-r:i>o?1:i<o?-1:0})),s}async function u(t,e){const r=(0,n.c)(t);try{return await(0,i.r)(`${r}community/groups`,e)}catch(t){return}}async function d(t,e){const r=(0,n.c)(t);return await(0,o.f)(`${r}community/groups`,e)}async function f(t){const e=(0,n.c)(t);try{return(await(0,i.r)(`${e}portals/self/trustedOrgs`,{num:100})).trustedOrgs.filter((t=>t.from.established>-1&&t.to.established>-1)).sort(((t,e)=>t.to.name>e.to.name?1:t.to.name<e.to.name?-1:0))}catch(t){return[]}}async function v(t){const e=(0,n.c)(t);return await(0,o.f)(`${e}portals/self/contacts`,{type:"collaboration",collaborators:!0},"users")}async function h(t,e){var r,o;const s=(0,n.c)(t);try{return(null===(o=null===(r=(await(0,i.r)(`${s}community/users`,{searchUserAccess:"groupMember",groups:e,countFields:"accountid",num:0,countSize:200})).aggregations.counts)||void 0===r?void 0:r[0])||void 0===o?void 0:o.fieldValues)||[]}catch(t){return[]}}async function p(t){var e,r,o;const s=(0,n.c)(t);try{const[t,n,a,l]=await Promise.all([(0,i.r)(`${s}portals/self/idp`),(0,i.r)(`${s}portals/self/idp/federation`),(0,i.r)(`${s}portals/self/oidc`),(0,i.r)(`${s}portals/self/socialProviders`)]);return{hasSAML:Boolean((null==t?void 0:t.id)?t:(null==n?void 0:n.id)?n:null),socialProviders:null===(e=null==l?void 0:l.config)||void 0===e?void 0:e.providers,oidcId:null===(o=null===(r=null==a?void 0:a.oidcProviders)||void 0===r?void 0:r[0])||void 0===o?void 0:o.id}}catch(t){return{hasSAML:!1}}}async function m(t){const e=(0,n.c)(t);try{const t=await(0,i.r)(`${e}portals/self/purchases`),r=g(t.purchases),n=g(t.trials),o=[...r,...n];return o.sort(((t,e)=>{const r=t.title.toLowerCase(),n=e.title.toLowerCase();return r>n?1:r<n?-1:0})),o}catch(t){return[]}}function g(t){const e=[];return t.forEach((({listing:t,provision:r})=>{var n;(null==t?void 0:t.type.includes("Application"))&&(null===(n=null==r?void 0:r.orgEntitlements)||void 0===n?void 0:n.entitlements)&&e.push({id:t.itemId,title:t.title})})),e}},69773:(t,e,r)=>{r.d(e,{a:()=>o,b:()=>a,g:()=>c,i:()=>i,o:()=>s});var n=r(78613);const i=t=>"item-browser"===t.state.type,o=(t,e,r)=>{e.onChange("filters",(e=>{e[t]&&e[t].value||r()}))},s=(t,e)=>{t.onChange("preview",(t=>{e()}))},a=(t,e)=>{t.onChange("groupId",(t=>{e()}))},l=new Map;function c(t,e){const r=l.get(t);if(r)return r;const i=(0,n.c)(t,e);return i?(l.set(t,i.store),i.store):null}},32023:(t,e,r)=>{r.d(e,{g:()=>o,o:()=>s});var n=r(11935),i=r(69773);function o(t){return(0,i.g)(t,"arcgis-member-browser")}(0,n.c)({type:"member-browser",includeExternalUsers:!1});const s=(t,e)=>{t.onChange("sort",(t=>{e(t)}))}},52042:(t,e,r)=>{function n(t){var e;const r=null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.subscriptionInfo;return r&&["Organizational Plan","Community","In House","ConnectED","ELA","Education Site License","Education","HUP Online Entitlement","Demo and Marketing"].includes(r.type)}r.d(e,{c:()=>n})}}]);