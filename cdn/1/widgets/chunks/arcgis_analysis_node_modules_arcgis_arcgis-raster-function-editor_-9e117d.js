"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-9e117d"],{61591:(e,t,i)=>{i.r(t),i.d(t,{rfx_cte_clipping_geometry:()=>d});var r=i(17002),s=i(62559),n=(i(5294),i(14385)),a=i(15517),p=i(19562);i(23795),i(17902),i(56451),i(68852),i(588),i(71802),i(44345),i(33752);const l="clippingGeometryOrRasterHelpClickHandler",g="useinputFeaturesHelpClickHandler",o="outputExtentHelpClickHandler",c="clippingRaster",h="clippingGeometry",u="currentExtent",d=class{constructor(e){(0,r.r)(this,e),this.rfxArgumentChange=(0,r.c)(this,"rfxArgumentChange",7),this.rasterOrGeometryValueMapper={geometryValue:void 0,rasterValue:void 0},this.extentMapper={mapExtent:void 0,inputRasterExtent:void 0,clippingRasterGeometryExtent:void 0,clippingFeatureGeometryExtent:void 0,useInputFeatureGeometryExtent:void 0},this.helpActionClickEventHandlers=new Map,this.inituseInputFeatureGeometry=e=>{this.useInputFeatureGeometryRfxArg=e;const{triggerArgs:t}=this.widgetArgs;t.UseInputFeatureGeometry.input=this.useInputFeatureGeometryRfxArg,this.useInputFeatureGeometryRfxArg?.addEventListener("calciteCheckboxChange",(e=>{const t=e.target.checked;this.useInputFeatureGeometryRfxArgValue=t,this.widgetArgs.triggerArgs.UseInputFeatureGeometry.value=t,this.widgetArgs.inputArgs.ClippingGeometry.value=this.useInputFeatureGeometryRfxArgValue?this.extentMapper.useInputFeatureGeometryExtent:this.extentMapper.clippingFeatureGeometryExtent}))},this.initExtent=e=>{this.extentWidget=e;const{inputArgs:t}=this.widgetArgs;t.Extent.input=this.extentWidget},this.handleClippingGeometryTypesChange=e=>{e.stopPropagation();const t=e.target;switch(this.clippingGeometryTypeSelected=t.value,this.clippingGeometryTypeSelected){case u:this.extentMapper.mapExtent=(0,a.l)(this.map?.extent),this.widgetArgs.inputArgs.ClippingRaster.value=void 0,this.widgetArgs.inputArgs.ClippingGeometry.value=void 0;break;case c:this.widgetArgs.inputArgs.ClippingGeometry.value=void 0;break;case h:this.widgetArgs.inputArgs.ClippingRaster.value=void 0}},this.setMapExtent=()=>{(0,n.o)(this.map)||(this.extentMapper.mapExtent=(0,a.l)(this.map?.extent),this.renderFlag=!this.renderFlag)},this.renderUpdateActiveMapExtentButton=()=>(0,r.h)("calcite-button",{alignment:"center",appearance:"outline",kind:"neutral",scale:p.U.Scale,type:"button",width:"full",onClick:this.setMapExtent},this.strings.currentMapExtent),this.handleClippingGeometryRasterChange=async({detail:{value:e}})=>{this.rasterOrGeometryValueMapper.rasterValue=e;const t=await(this.clippingGeometryRasterArg?.getSelectedLayer?.()),i=(0,a.k)(t);this.widgetArgs.inputArgs.ClippingRaster.value=(0,a.e)(t),this.extentMapper.clippingRasterGeometryExtent=i,this.renderFlag=!this.renderFlag},this.handleClippingGeometryFeatureChange=async({detail:{value:e}})=>{this.rasterOrGeometryValueMapper.geometryValue=e;const t=await(this.clippingGeometryFeatureArg?.getSelectedLayer?.()),i=(0,a.k)(t);this.extentMapper.clippingFeatureGeometryExtent=i;const r=await(0,a.m)(t);let s={};s="polygon"===t.geometryType?{rings:r?.map((e=>e?.toJSON().rings?.[0])),spatialReference:r?.[0]?.toJSON().spatialReference}:"point"===t.geometryType?{geometries:r?.map((e=>{const t=e.toJSON();return{x:t.x,y:t.y}})),spatialReference:r?.[0]?.toJSON().spatialReference}:i,this.extentMapper.useInputFeatureGeometryExtent=s,this.widgetArgs.inputArgs.ClippingGeometry.value=this.useInputFeatureGeometryRfxArgValue?s:i,this.renderFlag=!this.renderFlag},this.widgetArgs=void 0,this.clippingGeometryTypeSelected=void 0,this.clippingTypeRfxArgValue=void 0,this.useInputFeatureGeometryRfxArgValue=!1,this.extentvalue=void 0,this.renderFlag=!1}onWidgetArgsChange(e){this.processWidgetArgs(e)}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.b)(this.hostElement,(0,r.g)("."))),await this.setInitialState(this.widgetArgs)}componentWillRender(){const e={1:()=>{switch(this.clippingGeometryTypeSelected){case u:return this.extentMapper.mapExtent;case c:return this.extentMapper.clippingRasterGeometryExtent;case h:return this.extentMapper.clippingFeatureGeometryExtent}},2:()=>this.extentMapper.inputRasterExtent}[this.clippingTypeRfxArgValue].bind(this)();this.extentvalue=e}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({browseProperties:e,triggerArgs:t}){this.map=e.map,((0,n.o)(t)||(0,n.o)(t.Raster)||(0,n.o)(t.ClippingType)||(0,n.o)(t.UseInputFeatureGeometry))&&console.error("Invalid Schema: TriggerArgs is incorrect!");const i=t.Raster;this.rasterArg=i,i.input?.addEventListener("rfxArgumentChange",this.handleRasterChange.bind(this));const r=t.ClippingType;this.clippingTypeRfxArg=r,r.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.clippingTypeRfxArgValue=e}))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs.inputArgs.ClippingGeometry.displayName,referenceElement:this.clippingGeometryOrRasterContainer,helpTextID:this.widgetArgs.helpTextIDs?.clip_clippinggeometryorraster}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs.inputArgs.Extent.displayName,referenceElement:this.extentContainer,helpTextID:this.widgetArgs.helpTextIDs?.clip_outputextent});this.helpActionClickEventHandlers.set(l,e),this.helpActionClickEventHandlers.set(o,t)}async setInitialState({inputArgs:e,triggerArgs:t}){const i=t.Raster,r=i?.input,s=await(r?.getSelectedLayer?.());this.extentMapper.inputRasterExtent=(0,a.k)(s);const p=t.ClippingType;this.clippingTypeRfxArgValue=p.value;const l=t.UseInputFeatureGeometry;this.useInputFeatureGeometryRfxArgValue=!!l.value;const g=e.Extent;this.extentvalue=g.value,this.extentMapper.mapExtent=(0,a.l)(this.map?.extent);const o=!(0,n.o)(e.ClippingRaster?.value),d=!(0,n.o)(e.ClippingGeometry?.value),y=!o&&!d,m=1===this.clippingTypeRfxArgValue;o&&m&&(this.extentMapper.clippingRasterGeometryExtent=this.extentvalue),d&&m&&(this.extentMapper.clippingFeatureGeometryExtent=this.extentvalue),this.clippingGeometryTypeSelected=y?u:o?c:h}async handleRasterChange(){const e=this.rasterArg?.input,t=await(e?.getSelectedLayer?.()),i=(0,a.k)(t);this.extentMapper.inputRasterExtent=i}renderClippingGeometryTypes(){const e=[{key:u,label:this.strings.activeMapViewExtent},{key:c,label:this.strings.chooseRaster},{key:h,label:this.strings.chooseGeometry}];return(0,r.h)("rfx-dtex-common-select",{mode:this.widgetArgs.mode,options:e,value:this.clippingGeometryTypeSelected,onRfxArgumentChange:this.handleClippingGeometryTypesChange})}renderClippingGeometryRaster(){const{inputLayers:e}=this.widgetArgs;return(0,r.h)("rfx-dte-raster-input",{mode:this.widgetArgs.mode,ref:e=>this.clippingGeometryRasterArg=e,inputLayers:e,value:this.rasterOrGeometryValueMapper.rasterValue,onRfxArgumentChange:this.handleClippingGeometryRasterChange,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick})}renderClippingGeometryFeature(){const{featureLayers:e}=this.widgetArgs;return(0,r.h)("rfx-dte-feature-select",{mode:this.widgetArgs.mode,ref:e=>this.clippingGeometryFeatureArg=e,inputLayers:e,value:this.rasterOrGeometryValueMapper.geometryValue,onRfxArgumentChange:this.handleClippingGeometryFeatureChange,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick})}render(){return(0,r.h)("div",{key:"f577fcc94d4549a56029c44a2bc524acd892765f"},(0,r.h)("calcite-label",{key:"231aa92a77eee91991566dc1a34f30dbf6ee403c",alignment:"start",scale:p.U.Scale,layout:"default",ref:e=>{this.clippingGeometryOrRasterContainer=e}},(0,r.h)("rfx-label",{key:"86ab5da2c653bc01731bcd35fdd056509d558bc9",label:this.widgetArgs.inputArgs.ClippingGeometry.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),this.renderClippingGeometryTypes(),this.clippingGeometryTypeSelected===u?this.renderUpdateActiveMapExtentButton():null,this.clippingGeometryTypeSelected===c?this.renderClippingGeometryRaster():null,this.clippingGeometryTypeSelected===h?this.renderClippingGeometryFeature():null),this.clippingGeometryTypeSelected===h?(0,r.h)("calcite-label",{alignment:"start",scale:p.U.Scale,layout:"inline-space-between",ref:e=>{this.useInputFeatureGeometryContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs.triggerArgs.UseInputFeatureGeometry.displayName,referenceElement:this.useInputFeatureGeometryContainer,helpTextID:this.widgetArgs.helpTextIDs?.clip_useinputfeaturesforclippinggeometry});this.helpActionClickEventHandlers.set(g,t)}},(0,r.h)("calcite-checkbox",{checked:this.useInputFeatureGeometryRfxArgValue,ref:this.inituseInputFeatureGeometry}),(0,r.h)("rfx-label",{label:this.widgetArgs.triggerArgs.UseInputFeatureGeometry.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()})):null,(0,r.h)("calcite-label",{key:"30c3d9decad61b487a39218f85b986be6d3497ce",alignment:"start",scale:p.U.Scale,layout:"default",ref:e=>{this.extentContainer=e}},(0,r.h)("rfx-label",{key:"8fc2c2b0bf4250e363437693f0a03ce969459fcf",label:this.widgetArgs.inputArgs.Extent.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,r.h)("rfx-dte-extent",{key:"4818611ab81dc6269569a08ad891914866e15150",ref:this.initExtent,value:this.extentvalue})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}static get watchers(){return{widgetArgs:["onWidgetArgsChange"]}}};i(63716),i(55448),i(2924),i(11840),i(52373),i(440),i(66744),i(38146),i(15195)},19562:(e,t,i)=>{i.d(t,{C:()=>s,U:()=>r,a:()=>n});const r={Scale:"s",PopoverTimer:60},s={s:"s",m:"m",l:"l"},n={absolute:"absolute",fixed:"fixed"}}}]);