/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-b9f2eb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-b9f2eb"],{32756:(e,o,r)=>{r.d(o,{a:()=>C,b:()=>d,c:()=>h,d:()=>y,e:()=>f,f:()=>m,g:()=>u,h:()=>p});r(77040),r(70506);var l=r(82646);let s;const n="polygon";function t(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}async function a(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=s,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>s=e)),o}function i(e,o,r){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},r),{portal:"..."})))),e.edit(o,r)}function c(e,o){const{symbol:r,info:{marker:l,stroke:s,fill:n}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==r?void 0:r.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(s)),console.log("onStylerEdit - info.fill:",JSON.stringify(n))),e(o)}async function p(e){const{mapView:o,modules:r,portal:s,strings:p}=l.s,u=(0,l.a9)(),{onChange:m,popoverNode:d}=e,f=(0,l.d)(u,"color"),g=await a(d);let y,C;if(f){const e=f.stops.map((e=>e.color)),t=r.colorSchemes.getSchemes({basemapTheme:await r.colorUtils.getBackgroundColorTheme(o),geometryType:n,theme:"high-to-low"});let a=(0,l.ad)(t,0);a=a.filter((e=>{var o;return(null===(o=e.colors)||void 0===o?void 0:o.length)===f.stops.length}));const c=a.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})));y=({detail:e})=>{const o=(0,l.a9)();(0,l.d)(o,"color").stops.reverse().forEach(((o,r)=>{o.color=e.info.fill.color[r]})),m()},C=i(g,(0,l.q)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRamps:c}},fill:{color:e.reverse()}}),g.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency}}else{const e=t;y=({detail:e})=>{(0,l.a9)().color=e.symbol.color,m()},C=i(g,(0,l.q)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",optional:!1,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:e}},fill:{color:u.color||e[1]},fillEnabled:!0}),g.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency}}g.addEventListener("arcgisSymbolStylerEdit",c.bind(null,y)),d.addStyler(g),await C}async function u(e){const{modules:o,strings:r}=l.s,s=(0,l.a9)(),{onChange:n,popoverNode:t}=e,i=await a(t);e.defaultColors=s.colorRamp?g(s.colorRamp).map((e=>new o.esriColor(e))):null;const c=i.edit(new o.SimpleMarkerSymbol,w(e));i.stringOverrides={fillColor:r.styler.color};i.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const r=o.esriLang.clone(e.color);(0,l.a9)().colorRamp=h(r.reverse()),n()})),t.addStyler(i),await c}async function m(e){const{modules:o,strings:r}=l.s,s=(0,l.a9)(),{onChange:n,popoverNode:t}=e,i=await a(t);e.defaultColors=s.colorRamp?g(s.colorRamp).map((e=>new o.esriColor(e))):null;const c=i.edit(new o.SimpleMarkerSymbol,w(e));i.stringOverrides={fillColor:r.styler.color};i.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const r=o.esriLang.clone(e.color);(0,l.a9)().colorRamp=h(r.reverse()),n()})),t.addStyler(i),await c}async function d(e){var o;const{classedSymbolSelectedIdx:r,portal:s,modules:n,strings:p}=l.s,u=(0,l.a9)(),{onChange:m,popoverNode:d}=e,f=(0,l.a)();let g=(null===(o=u.classBreakInfos)||void 0===o?void 0:o.length)?n.esriLang.clone(u.classBreakInfos[r].symbol):(0,l.q)(f);const y="picture-marker"!==g.type&&!!g.color,C=(0,l.ab)(g),h=t();let w;if("simple-fill"===g.type){const e=g;e.outline&&(w={color:e.outline.color||new n.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style})}const b=await a(d),v=i(b,n.esriLang.clone(g),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(g),suggestedColors:h,parts:{transparency:!1}}},fill:{color:(0,l.Q)(g)},stroke:w,fillEnabled:y,strokeEnabled:C});b.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency},b.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:e}})=>{e.outline&&(e.outline.width=0);const o=(0,l.b)(),s=o.classBreakInfos.slice();s[r].symbol=e,o.classBreakInfos=s,m()}))),d.addStyler(b),await v}async function f(e){var o;const{modules:r,strings:s}=l.s,n=(0,l.a9)(),{onChange:t,popoverNode:i}=e;let c=v(n.authoringInfo.colorRamp,n.classBreakInfos.length).map((e=>new r.esriColor(e.slice(1))));n.classBreakInfos&&(c=n.classBreakInfos.map((e=>e.symbol.color)));const p=await a(i);e.defaultColors=((null===(o=n.authoringInfo)||void 0===o?void 0:o.colorRamp)?c:[[0,0,255],[0,255,255],[255,255,0],[255,0,0]]).map((e=>new r.esriColor(e))),k(e.defaultColors);const u=p.edit(new r.SimpleMarkerSymbol,w(e));p.stringOverrides={fillColor:s.styler.color,fillTransparency:s.styler.transparency};p.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=r.esriLang.clone(e.color);let s=(0,l.a9)();const n=r.esriLang.clone(o).reverse();s.classBreakInfos.map(((e,o)=>e.symbol.color=new r.esriColor(n[o])));const a=function(e){var o;const{modules:r}=l.s,s=(0,l.a9)(),n=b(),t=r.esriLang.clone(n);t.forEach((e=>{e.stops=v(h(e.stops),s.classBreakInfos.length).map((e=>new r.esriColor(e.slice(1)))).reverse()}));const a=t.filter((o=>{const l=JSON.stringify(o.stops)===JSON.stringify(e),s=JSON.stringify(r.esriLang.clone(o.stops).reverse())===JSON.stringify(e);return l||s}));if(a.length){return h(null===(o=n.filter((e=>e.name===a[0].name))[0])||void 0===o?void 0:o.stops)}return null}(o);a&&(s.authoringInfo.colorRamp=a),t()})),i.addStyler(p),await u}function g(e){if("multipart"===(null==e?void 0:e.type)){const o=e.colorRamps,r=o.map((e=>e.fromColor));return r.push(o[o.length-1].toColor),r}return[e.fromColor,e.toColor]}async function y(e){var o,r,s,t,i;const{mapView:c,modules:p}=l.s,u=(0,l.a9)(),{onChange:m,popoverNode:d}=e,f=u.uniqueValueInfos,y=await a(d),C=p.typeSchemes.getSchemes({basemap:c.map.basemap,geometryType:(0,l.E)()||n}),b=[],S=(0,l.ad)(C,Math.min(f.length,10)),R=S[0].colors;b.push(...(null==f?void 0:f.length)?u.uniqueValueInfos.map(((e,o)=>(0,l.Q)(e.symbol)||new p.esriColor(R[o%R.length]))):[]);const O=S.map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name})));if(!(null===(o=u.authoringInfo)||void 0===o?void 0:o.colorRamp)&&b||!function(e){const{modules:o}=l.s,r=o.rasterColorRampUtils.getColorRampName(e);return!!r}(null===(r=u.authoringInfo)||void 0===r?void 0:r.colorRamp)&&!function(e){if(!(null==e?void 0:e.colorRamps))return!1;const{mapView:o,modules:r}=l.s,s=(0,l.a9)(),t=s.uniqueValueInfos,a=r.typeSchemes.getSchemes({basemap:o.map.basemap,geometryType:(0,l.E)()||n}),i=(0,l.ad)(a,Math.min(t.length,10)),c=i.filter((o=>o.colors.length===e.colorRamps.length+1)),p=[];p.push(e.colorRamps[0].fromColor),e.colorRamps.forEach((e=>{p.push(e.toColor)}));const u=c.filter((e=>{const o=JSON.stringify(e.colors)===JSON.stringify(p),l=JSON.stringify(r.esriLang.clone(e.colors).reverse())===JSON.stringify(p);return o||l}));return u.length>0}(null===(s=u.authoringInfo)||void 0===s?void 0:s.colorRamp))e.defaultColors=b.reverse()||null;else{const o=v(null===(t=u.authoringInfo)||void 0===t?void 0:t.colorRamp,u.uniqueValueInfos.length).map((e=>e.slice(1)));JSON.stringify(o)!==JSON.stringify(b)&&(e.defaultColors=b.reverse()||null)}e.extraColorRamps=O,e.defaultColors||(e.defaultColors=(null===(i=u.authoringInfo)||void 0===i?void 0:i.colorRamp)?g(u.authoringInfo.colorRamp).reverse().map((e=>new p.esriColor(e))):b.reverse()||null),k(e.defaultColors);const I=y.edit(new p.SimpleMarkerSymbol,w(e));y.stringOverrides={fillColor:""};y.addEventListener("arcgisSymbolStylerFillChange",(({detail:e})=>{const o=h(p.esriLang.clone(e.color)),r=(0,l.a9)(),s=r.authoringInfo||{};s.colorRamp=o,r.authoringInfo=s;const n=v(o,r.uniqueValueInfos.length).map((e=>e.slice(1))),t=[];r.uniqueValueInfos.forEach(((e,o)=>{e=e.clone(),t.push(e),(0,l.W)(e.symbol,new p.esriColor(n[o]))})),r.uniqueValueInfos=t,m()})),d.addStyler(y),await I}async function C(e){const{mapView:o,selectedValue:r,lastDefault:s,portal:n,modules:t}=l.s,p=(0,l.a9)(),u=(0,l.g)(),{onChange:m,popoverNode:d}=e,f=(0,l.D)();let g=-1===r?p.defaultSymbol||s.defaultSymbol:p.uniqueValueInfos[r].symbol;(function(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1})(g)||(g=(0,l.q)(u),-1!==r||p.defaultSymbol||(s.defaultSymbol=g));const y="picture-marker"!==g.type&&!!g.color,C=(0,l.ab)(g);let h;if(-1===r)h=function(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}();else{const e=t.typeSchemes.getSchemes({basemap:o.map.basemap,geometryType:(0,l.E)()});h=(0,l.ae)(e).slice(0,16)}let w;const b=g;w=b.outline?{color:b.outline.color?b.outline.color:new t.esriColor([0,0,0,.5]),size:b.outline.width,style:b.outline.style,autoAdjusted:!1}:{color:new t.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!1};const v=await a(d);let k;k=i(v,t.esriLang.clone(g),{portal:n,symbolFilter:f&&!(0,l.af)()?"simple":void 0,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,parts:{transparency:!1}}},fill:{color:(0,l.Q)(g)||S(h[r],.85)},stroke:w,fillEnabled:y,strokeEnabled:C}),v.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:e}})=>{e.outline&&(e.outline.width=0);const o=(0,l.b)();if(-1===r)o.defaultSymbol=e;else{const l=o.uniqueValueInfos.slice();l[r].symbol=e,o.uniqueValueInfos=l}m()}))),d.addStyler(v),await k}function h(e){const{modules:o}=l.s,r=[];for(let l=0;l<e.length-1;l++)r[l]=new o.AlgorithmicColorRamp({algorithm:"hsv",fromColor:e[l],toColor:e[l+1]||new o.esriColor({r:255,g:255,b:255,a:1})});if(e.length>2){return new o.MultipartColorRamp({colorRamps:r})}return r[0]}function w(e){const{layer:o,modules:r,portal:s}=l.s,n=o,t=(0,l.a9)(),{defaultColors:a,extraColorRamps:i}=e,c={color:(null==a?void 0:a.reverse())||[new r.esriColor([255,255,255,1]),new r.esriColor([0,0,0,1])]},p={color:new r.esriColor([0,0,0,.5]),size:1,style:"solid"},u=b();return i&&u.push(...i),u.sort((e=>e.tags.indexOf("raster")>-1?-1:1)),"class-breaks"===t.type?u.forEach((e=>{e.stops=v(h(e.stops),t.classBreakInfos.length).map((e=>new r.esriColor(e.slice(1)))).reverse()})):"unique-value"===t.type&&u.forEach((e=>e.stops.reverse())),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"class-breaks"===t.type?"discrete":"continuous",colorRamps:u,open:!0,colorRampsOpen:!0,parts:{colorRamps:!0,transparency:"imagery-tile"===n.type&&"unique-value"!==t.type},extraParts:{autoStrokeAdjust:!1,width:!0}}},stroke:Object.assign(Object.assign({},p),{color:[new r.esriColor([13,38,68,1]),new r.esriColor([56,98,122,1]),new r.esriColor([98,158,176,1]),new r.esriColor([177,205,194,1]),new r.esriColor([255,252,212,1])]}),fill:c}}function b(){const{modules:e}=l.s;return e.rasterColorRampUtils.all().map((({name:e,colors:o})=>({name:e,stops:o,tags:["raster"]})))}function v(e,o){const{modules:r}=l.s;return r.rasterColorRampUtils.convertColorRampToColormap(e,{numColors:o,interpolateAlpha:!0})}function S(e,o){return e&&(e.a=o),e}function k(e){const{modules:o}=l.s;null==e||e.forEach(((r,l)=>{0===r.r&&0===r.g&&0===r.b&&0===r.a&&(e[l]=new o.esriColor([255,255,255,0]))}))}}}]);