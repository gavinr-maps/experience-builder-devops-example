/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161"],{99004:(e,t,r)=>{r.d(t,{c:()=>n,g:()=>a});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},71700:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>i,c:()=>o,d:()=>n});const n=(0,r(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=n.state,o=n.state,i=n.state},67575:(e,t,r)=>{r.d(t,{a:()=>n,i:()=>a});const n={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service"},a=e=>!!Object.values(n).includes(e)},39582:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select_folder:()=>s});var n=r(7263),a=r(71700),o=r(79468),i=r(99907);r(11935),r(46581),r(31670),r(28926),r(70506),r(99004),r(94788),r(65215),r(15437),r(67575);const s=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.serverFolderPath=null,this.publisherFolderPath="",this.publisherFolderPathIsDriveLetterLocation=!1,this.publisherFolderPathHostname="",this.newServerFolderPath="",this.nfsHostName="",this.nfsSharePath="",this.error=null}async componentWillLoad(){this.i18n=i.u.i18n.dataStoreSelectFolder,this.checkIfDriveLetterLocation(a.a.publisherFolderPath||""),this.publisherFolderPathHostname=a.a.publisherFolderPathHostname,this.serverFolderPath=a.a.serverFolderPath||null,this.newServerFolderPath=a.a.newServerFolderPath,this.nfsHostName=a.a.nfsHostName,this.nfsSharePath=a.a.nfsSharePath}checkIfDriveLetterLocation(e){this.publisherFolderPath=e,this.publisherFolderPathIsDriveLetterLocation=1===e.split(":")[0].length}validateFolderInputs(){if(!this.publisherFolderPath)return this.error="invalidPublisherFolderPath",!1;if(this.publisherFolderPathIsDriveLetterLocation&&!this.publisherFolderPathHostname)return this.error="invalidPublisherHostName",!1;if("newPath"===this.serverFolderPath&&!this.newServerFolderPath)return this.error="invalidServerFolderPath",!1;if("nfsHostAndPath"===this.serverFolderPath){if(!this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsHostAndPath",!1;if(!this.nfsHostName&&this.nfsSharePath)return this.error="invalidNfsHostName",!1;if(this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsPath",!1}return!0}renderErrorItem(){var e,t;const{i18n:r,error:a}=this;return(0,n.h)("arcgis-new-item-alert",{heading:null===(e=r.errors[a])||void 0===e?void 0:e.heading,description:null===(t=r.errors[a])||void 0===t?void 0:t.description,active:null!==a,onAlertDismiss:()=>{this.error=null}})}handleNext(){this.validateFolderInputs()&&(a.a.publisherFolderPath=this.publisherFolderPath,a.a.serverFolderPath=this.serverFolderPath,this.publisherFolderPathIsDriveLetterLocation&&this.publisherFolderPathHostname?a.a.publisherFolderPathHostname=this.publisherFolderPathHostname:a.a.publisherFolderPathHostname=null,"newPath"===this.serverFolderPath&&this.newServerFolderPath?a.a.newServerFolderPath=this.newServerFolderPath:a.a.newServerFolderPath=null,"nfsHostAndPath"===this.serverFolderPath?(a.a.nfsHostName=this.nfsHostName,a.a.nfsSharePath=this.nfsSharePath):(a.a.nfsHostName=null,a.a.nfsSharePath=null),this.newItemUpdatePage.emit("dataStoreSelectServerList"))}render(){const{i18n:e,publisherFolderPathIsDriveLetterLocation:t}=this;return(0,n.h)("div",{key:"871bab2b0e462bf5fd1118a216ddaebbba333269"},(0,n.h)("arcgis-new-item-description",{key:"b34ad2c51314b2be9d447d998ae449a4f30dcbdd",header:e.heading}),(0,n.h)("div",{key:"c65acfa49a9940493498ef0ce767223f02dde2cf",class:"input-label"},(0,n.h)("calcite-label",{key:"a6d32fc11f14ae2d4a292c7ffee11f5692f089fc"},e.publisherFolderPath.heading,(0,n.h)("calcite-input",{key:"publisher-folder-path",placeholder:e.publisherFolderPath.placeholder,value:this.publisherFolderPath,required:!0,onCalciteInputChange:e=>{const t=e.target.value;this.checkIfDriveLetterLocation(t)}}))),t&&(0,n.h)("div",{key:"7eee70e1e6fee0d843690ae3127aa3da7e8bf10b",class:"input-label"},(0,n.h)("calcite-label",{key:"86c4c6e1a7e57222f5fd3740d32247c7f692c40e"},e.publisherFolderPath.hostname,(0,n.h)("calcite-input",{key:"publisher-folder-path-hostname",type:"textarea",value:this.publisherFolderPathHostname,onCalciteInputChange:e=>{const t=e.target.value;this.publisherFolderPathHostname=t}}),(0,n.h)("div",{key:"2432b295a92f8710920bb459e20553c0546dd9a9",class:"hostname-info"},e.publisherFolderPath.hostnameInfo))),(0,n.h)("div",{key:"8f1a84ac5d6c87e2e7169f886f7bc582a038c4df",class:"input-label"},(0,n.h)("calcite-label",{key:"95a59279b5054fab2c391e2daf411bb8e837cd43"},e.serverFolderPath.heading)),(0,n.h)("calcite-tile-select-group",{layout:"vertical",key:"server-folder-path-select"},(0,n.h)("calcite-tile-select",{class:"tile-select",key:"publisher-folder-path-select",checked:null===this.serverFolderPath,description:e.serverFolderPath.sameAsPublisher,name:"same-as-publisher-folder-path","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverFolderPath=null}}),(0,n.h)("calcite-tile-select",{class:"tile-select",key:"new-server-folder-path-select",checked:"newPath"===this.serverFolderPath,description:e.serverFolderPath.newPath,name:"new-path","input-enabled":!0,width:"full",type:"radio",value:"newPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="newPath"}}),(0,o.i)()&&(0,n.h)("calcite-tile-select",{key:"nfs-host-and-path-select",checked:"nfsHostAndPath"===this.serverFolderPath,description:e.serverFolderPath.nfsHostAndPath.description,name:"nfs-host-and-path","input-enabled":!0,width:"full",type:"radio",value:"nfsHostAndPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="nfsHostAndPath"}})),"newPath"===this.serverFolderPath&&(0,n.h)("div",{key:"fc74789bc78763cffb273061e1001b0d0154acab",class:"input-label"},(0,n.h)("calcite-input",{key:"new-server-folder-path",placeholder:e.serverFolderPath.placeholder,value:this.newServerFolderPath,onCalciteInputChange:e=>{const t=e.target.value;this.newServerFolderPath=t}})),"nfsHostAndPath"===this.serverFolderPath&&(0,n.h)("div",{key:"b04b58f2f23a3ac503888dad85434eedeaafcbd1"},(0,n.h)("div",{key:"9780708fa53aace8e801f0397ba93dbae3552889",class:"input-label"},(0,n.h)("calcite-label",{key:"a8e5f40b0514f17b2ec5c11bb93e8e0b3f506419"},e.serverFolderPath.nfsHostAndPath.hostname,(0,n.h)("calcite-input",{key:"nfs-hostname",type:"textarea",value:this.nfsHostName,placeholder:"mynfshost.domain.com",onCalciteInputChange:e=>{const t=e.target.value;this.nfsHostName=t}}))),(0,n.h)("div",{key:"1f3aabc0940ca2e00054c795143ac705270c9893",class:"input-label"},(0,n.h)("calcite-label",{key:"6cfeae1992929541f97123f57a95b2b1a2db6f4f"},e.serverFolderPath.nfsHostAndPath.sharePath,(0,n.h)("calcite-input",{key:"nfs-sharepath",type:"textarea",value:this.nfsSharePath,placeholder:"/data",onCalciteInputChange:e=>{const t=e.target.value;this.nfsSharePath=t}})))),this.renderErrorItem())}};s.style=".input-label{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.hostname-info{font-size:0.75rem}"},79468:(e,t,r)=>{r.d(t,{a:()=>f,b:()=>p,c:()=>u,d:()=>h,e:()=>i,f:()=>s,g:()=>g,h:()=>d,i:()=>P,j:()=>v,k:()=>w,l:()=>c,m:()=>l});var n=r(46581),a=r(31670),o=r(15437);function i(e,t){const r={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(r.clientPath=e.publisherFolderPath,r.info.path=e.newServerFolderPath,r.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(r.clientPath=e.publisherFolderPath,r.provider="UserManaged",r.info.datastoreConnectionType="replicated",r.info.fileServerPath=e.nfsSharePath,r.info.fileServerHost=e.nfsHostName,r.info.fileServerType="nfs"),r}function s(e,t){const r={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(r.info.connectionString=e.serverConnectionString,r.info.clientConnectionString=e.publisherConnectionString,r.info.dataStoreConnectionType="replicated"):"bigQuery"===e.databaseProvider||"snowflake"===e.databaseProvider?r.info.JDBCConnection=e.jdbcConnection:r.info.connectionString=e.publisherConnectionString,r}const c=async(e,t,r,n)=>{let a,o;if((null==r?void 0:r.length)>0){try{o=JSON.parse(r)}catch(e){return{error:{code:"invalidJSON"}}}a=function(e,t){const{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:h}=t,u={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:h}};return u}(e,o)}else(null==n?void 0:n.length)>0&&(a=function(e,t,r){const n={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:r};return n}(e,t,n));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{JDBCConnection:a}}}};function l(e){const{user:t,password:r,database:n,role:a,server:o,warehouse:i,schema:s}=e;return{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{JDBCConnection:{user:t,password:r,database:n,role:a,connectionUrl:`jdbc:snowflake://${o}`,warehouse:i,schema:s}}}}function d(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const r={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?r.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete r.info.connectionProperties.fallbackServerAddresses,r}function h(e,t){const r="bdfs"===e.addDataStoreType?e.bdfsCloudProvider:e.provider,n={info:{}},a={credentialType:"accesskey"};return"amazon"===r&&("accessKey"===e.credentialType?(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey):a.credentialType=e.credentialType,"custom"===e.selectedRegion.id?a.regionEndpointUrl=e.storageURL:(a.regionEndpointUrl=b(e.regions,e.selectedRegion),a.region=e.selectedRegion.id),n.info.objectStore=e.bucketName,n.provider="amazon"),"google"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,a.regionEndpointUrl="https://storage.googleapis.com",n.info.objectStore=e.bucketName,n.provider="Google"),"azure"!==r&&"azuredatalakegen2store"!==r||("sharedKey"===e.azureAuthenticationType?(a.credentialType="accessKey",a.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(a.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(a.tenantId=e.tenantId,a.clientId=e.clientId,a.clientSecret=e.clientSecret,a.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(a.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(a.credentialType=e.azureAuthenticationType,a.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(a.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?a.regionEndpointUrl=e.endpoint:a.accountEndpoint=b(e.regions,e.environment),a.accountName=e.accountName,"azure"===r?(n.info.objectStore=e.containerName,n.provider="azure"):(n.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.r)(e.cloudFolder)}`:e.containerName,n.provider="azureDataLakeStore")),"alibaba"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,n.info.objectStore=e.bucketName,n.provider="Alibaba",a.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:b(e.regions,e.selectedRegion)),a.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==r&&(n.info.objectStore=n.info.objectStore+"/"+(0,o.r)(e.cloudFolder)),n.type="cloudStore",n.path="/cloudStores/"+t,n.info.connectionString=JSON.stringify(a),n}function u(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsFilesharePath}),connectionType:"fileShare"}}}function f(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsHdfsPath,username:e.bdfsHdfsUsername}),connectionType:"hdfs"}}}function p(e,t){const r={type:"bigDataFileShare",path:"/bigDataFileShares/"+t,info:{connectionString:"",connectionType:"hive"}},n=e.useNonDefaultDatabase;return r.info.connectionString=JSON.stringify({metaStoreUris:e.metastoreUris,database:n&&e.nonDefaultDatabaseName||"default"}),r}function v(e,t){return JSON.stringify({info:{connectionString:JSON.stringify({path:t}),connectionType:"dataStore"},path:`/bigDataFileShares/${e}`,type:"bigDataFileShare"})}function b(e,t){let r;return e.forEach((function(e){e.id===t.id&&(r=e.blobStoreEndpoint||e.storageEndpointSuffix)})),r}const g=async(e,t)=>{const r=e.results.out_connectionString.paramUrl,a=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${r}`,o=await(0,n.r)(a);return y(o)},y=e=>{const t=e.value;return{connectionStringProps:m(t),connectionString:t}},m=e=>{let t=[];return e&&e.split(";").forEach((e=>{const r=e.split("=");2!==r.length||S(t,r[0])||t.push({key:r[0],value:r[1]})})),t},S=(e,t)=>e.some((e=>e.key===t)),P=()=>{var e;const t=a.c.portal,r=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===r},w=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`}},70506:(e,t,r)=>{r.d(t,{e:()=>o});var n,a=r(99004),o={exports:{}};n=o.exports,a.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function a(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function i(e){void 0===e&&(e=r);var t=o(e),i=a(e);if(i!==n&&3===i.major){var s=i.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||a(e)?i(e):e}function h(e,t){var r=d(e),n=l(r);return n||c(n=s(r),t),n}var u={};function f(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function p(e,t,r){var n;r&&(n=v(e,r));var a=function(){t(e),e.removeEventListener("load",a,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",a,!1)}function v(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function b(e){void 0===e&&(e={}),u=e}function g(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var r={};[u,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var n=r.version,a=r.url||o(n);return new t.Promise((function(e,t){var o=g();if(o){var i=o.getAttribute("src");i!==a?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):y()?e(o):p(o,e,t)}else if(y())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&h(!0===s?n:s,r.insertCssBefore),p(o=f(a),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function S(e){return new t.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}function P(e,t){if(void 0===t&&(t={}),y())return S(e);var r=g(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),m(t).then((function(){return S(e)}))}e.utils=t,e.loadModules=P,e.getScript=g,e.isLoaded=y,e.loadScript=m,e.setDefaultOptions=b,e.loadCss=h,Object.defineProperty(e,"__esModule",{value:!0})}(n)},28926:(e,t,r)=>{r.d(t,{l:()=>a});var n=r(70506);const a=async(e,t)=>(await n.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},81457:(e,t,r)=>{r.d(t,{a:()=>d,b:()=>l,c:()=>h,d:()=>o,e:()=>a,g:()=>s,r:()=>c,s:()=>i});var n=r(11246);function a(e,t,r,n){!function(e,t,r){r=r||{};let n=null==r?void 0:r.expires;if("number"==typeof n){const e=new Date,t=24*n*60*60*1e3;e.setTime(Date.now()+t),n=r.expires=e}"string"!=typeof n&&(null==n?void 0:n.toUTCString)&&(r.expires=n.toUTCString());let a,o=`${e}=${encodeURIComponent(t)}`;for(a in r){o+=`; ${a}`;const e=r[a];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,n?JSON.stringify(t):t,r)}function o(e,t){const r=function(e){const t=document.cookie,r=new RegExp(`(?:^|; )${(0,n.e)(e)}=([^;]*)`),a=t.match(r);return a?decodeURIComponent(a[1]):void 0}(e);return r&&t?JSON.parse(r):r}function i(e,t,r){window.localStorage.setItem(e,r?JSON.stringify(t):t)}function s(e,t){const r=window.localStorage.getItem(e);return r&&t?JSON.parse(r):r}function c(e){window.localStorage.removeItem(e)}function l(e,t,r){window.sessionStorage.setItem(e,r?JSON.stringify(t):t)}function d(e,t){const r=window.sessionStorage.getItem(e);return r&&t?JSON.parse(r):r}function h(e){window.sessionStorage.removeItem(e)}},99907:(e,t,r)=>{r.d(t,{a:()=>n,u:()=>a});const n=(0,r(11935).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),a=n.state},15437:(e,t,r)=>{r.d(t,{a:()=>p,b:()=>f,c:()=>d,d:()=>b,e:()=>v,f:()=>g,g:()=>y,h:()=>c,i:()=>m,r:()=>l,s:()=>u,u:()=>h});var n=r(94788),a=r(31670),o=r(28926),i=r(81457),s=r(67575);function c(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function l(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function d(e){var t;const r=null!==(t=null===a.c||void 0===a.c?void 0:a.c.api)&&void 0!==t?t:4,[n]=await(0,o.l)([4===r?"esri/core/urlUtils":"esri/urlUtils"]);let i=n.urlToObject(e);i.query=i.query||{};for(let e in i.query||{})i.query.hasOwnProperty(e)&&(Array.isArray(i.query[e])||(i.query[e]=i.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return i}function h(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function u(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function f(e){const{config:t,portal:r}=a.c;let n=!1;if(!e)return!1;if((t.httpsDomains||[]).forEach((t=>{(e.indexOf(`.${t}/`)>-1||e.indexOf(`/${t}/`)>-1)&&(n=!0)})),!n){let t=r.portalHostname;t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),e.indexOf(t)>-1&&(n=!0)}return n}function p(e){if(!e)return!1;const{config:t,portal:r}=a.c,o=(0,n.g)(r),i=new URL(o).hostname,s=!1===t.isMultiTenant,c=-1!==e.indexOf(".arcgis.com/"),l=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),d=r.supportsHostedServices&&-1!==e.indexOf(i)&&!s;return c&&l||!c&&d}function v(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const t=(0,i.d)("esri_auth",!0);return"web"!==(null===(e=null==t?void 0:t.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function b(e){let t=e.toLowerCase();-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t=(e="https://"+e).toLowerCase());let r=t.indexOf("//");r=t.indexOf("/",r+2),-1==r?t=(e+="/arcgis/rest/services").toLowerCase():r==t.length-1&&(t=(e+="arcgis/rest/services").toLowerCase());let n=t.indexOf("/arcgis",r);n==t.length-7?t=(e+="/rest/services").toLowerCase():n==t.length-8&&(t=(e+="rest/services").toLowerCase()),n=t.indexOf("/server",r),t.endsWith("/server")?t=(e+="/rest/services").toLowerCase():t.endsWith("/server/")&&(t=(e+="rest/services").toLowerCase());const a=t.indexOf("/rest/services",r),o=t.indexOf("/services",r),i=t.indexOf("/rest",r);return-1==a&&o>-1?t=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==a&&i>-1&&(t=(e=`${e.substring(0,i)}/rest/services${e.substring(i+5)}`).toLowerCase()),t.indexOf("/rest/services"),e}const g=(e,t=!1)=>(e=c(e),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!t&&"https:"!==location.protocol||!p(e)&&!f(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),y=(e,t=!1)=>{var r,a,o;if(!e)return{error:{code:"invalidUrl"}};if(m(e,t))return{error:{code:"httpWarning"}};const i=decodeURIComponent(e),c=i.replace(n.v,"").match(/((\.|\/)*(kml|kmz))/gi),l=i.replace(n.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),d=i.replace(n.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),h=i.replace(n.v,"").match(/((\.|\/)*(rss))/gi),u=null===(r=i.replace(n.v,"").match(n.r))||void 0===r?void 0:r[1],f=i.replace(n.v,"").match(n.h),p=i.replace(n.v,"").match(/((\.|\/)*(csv))/gi),v=i.replace(n.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let b=null;if(i.match(n.f))b="GeoJson";else if(!d||l||u)if(u&&!l)b=s.a[u];else if(f)b="Map Service";else if(l){const e="/"===(null==l?void 0:l[0].charAt(0))?"/":"=";b=null===(o=null===(a=null==l?void 0:l[0])||void 0===a?void 0:a.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else c?b="KML":h?b="GeoRSS":p?b="CSV":v?b="Tile Layer":i.endsWith("KnowledgeGraphServer")&&(b="Knowledge Graph");else b="OGCFeatureServer";return{result:b}},m=(e,t)=>!t&&e.includes("http://")}}]);