/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-01624a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-01624a"],{11935:(e,i,t)=>{t.d(i,{c:()=>a});var n=t(7263);const o=e=>!("isConnected"in e)||e.isConnected,r=((e,i)=>{let t;return(...n)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,e(...n)}),i)}})((e=>{for(let i of e.keys())e.set(i,e.get(i).filter(o))}),2e3),l=e=>"function"==typeof e?e():e,s=(e,i)=>{const t=e.indexOf(i);t>=0&&(e[t]=e[e.length-1],e.length--)},a=(e,i)=>{const t=((e,i=((e,i)=>e!==i))=>{const t=l(e);let n=new Map(Object.entries(null!=t?t:{}));const o={dispose:[],get:[],set:[],reset:[]},r=()=>{var i;n=new Map(Object.entries(null!==(i=l(e))&&void 0!==i?i:{})),o.reset.forEach((e=>e()))},a=e=>(o.get.forEach((i=>i(e))),n.get(e)),c=(e,t)=>{const r=n.get(e);i(t,r,e)&&(n.set(e,t),o.set.forEach((i=>i(e,t,r))))},u="undefined"==typeof Proxy?{}:new Proxy(t,{get:(e,i)=>a(i),ownKeys:e=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,i)=>n.has(i),set:(e,i,t)=>(c(i,t),!0)}),d=(e,i)=>(o[e].push(i),()=>{s(o[e],i)});return{state:u,get:a,set:c,on:d,onChange:(i,t)=>{const n=d("set",((e,n)=>{e===i&&t(n)})),o=d("reset",(()=>t(l(e)[i])));return()=>{n(),o()}},use:(...e)=>{const i=e.reduce(((e,i)=>(i.set&&e.push(d("set",i.set)),i.get&&e.push(d("get",i.get)),i.reset&&e.push(d("reset",i.reset)),i.dispose&&e.push(d("dispose",i.dispose)),e)),[]);return()=>i.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const i=n.get(e);o.set.forEach((t=>t(e,i,i)))}}})(e,i);return t.use((()=>{if("function"!=typeof n.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:i=>{const t=(0,n.g)();t&&((e,i,t)=>{const n=e.get(i);n?n.includes(t)||n.push(t):e.set(i,[t])})(e,i,t)},set:i=>{const t=e.get(i);t&&e.set(i,t.filter(n.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(n.f))),r(e)}}})()),t}},82646:(e,i,t)=>{t.d(i,{$:()=>je,A:()=>T,B:()=>E,C:()=>D,D:()=>I,E:()=>S,F:()=>m,G:()=>X,H:()=>K,I:()=>B,J:()=>oi,K:()=>pe,L:()=>A,M:()=>H,N:()=>W,O:()=>F,P:()=>L,Q:()=>De,R:()=>he,S:()=>le,T:()=>ri,U:()=>li,V:()=>c,W:()=>Be,X:()=>Le,Y:()=>Ue,Z:()=>Ie,_:()=>Se,a:()=>oe,a0:()=>We,a1:()=>Te,a2:()=>be,a3:()=>Fe,a4:()=>ve,a5:()=>vi,a6:()=>di,a7:()=>gi,a8:()=>Z,a9:()=>Y,aA:()=>He,aB:()=>$e,aC:()=>Ze,aD:()=>ei,aE:()=>Ae,aF:()=>Pe,aG:()=>b,aH:()=>w,aI:()=>ae,aJ:()=>ue,aK:()=>_e,aL:()=>V,aM:()=>y,aN:()=>v,aO:()=>G,aP:()=>C,aQ:()=>_,aR:()=>x,aa:()=>xe,ab:()=>Je,ac:()=>Ye,ad:()=>Ce,ae:()=>Ne,af:()=>Ke,ag:()=>re,ah:()=>f,ai:()=>Ve,aj:()=>Qe,ak:()=>ke,al:()=>mi,am:()=>N,an:()=>pi,ao:()=>ci,ap:()=>ui,aq:()=>te,ar:()=>hi,as:()=>fi,at:()=>yi,au:()=>h,av:()=>Si,aw:()=>g,ax:()=>bi,ay:()=>Oe,az:()=>Xe,b:()=>de,c:()=>ze,d:()=>ni,e:()=>ie,f:()=>d,g:()=>Q,h:()=>n,i:()=>j,j:()=>M,k:()=>se,l:()=>fe,m:()=>u,n:()=>p,o:()=>ai,p:()=>si,q:()=>Me,r:()=>R,s:()=>Re,t:()=>k,u:()=>me,v:()=>U,w:()=>o,x:()=>P,y:()=>q,z:()=>J});t(77040),t(70506);var n,o,r=t(58233),l=t(62159),s=t(11935),a=t(1991);function c(e){return 0===Object.keys(e).length&&e.constructor===Object}function u(){document.querySelectorAll("calcite-popover").forEach((e=>{let i=!1;if(e.classList.forEach((e=>{e.startsWith("smart-mapping-")&&e.endsWith("-popover")&&(i=!0)})),i){e.setAttribute("open","false");const i=e.parentNode;null==i||i.removeChild(e)}})),document.querySelectorAll("arcgis-smart-mapping-styler-popover, arcgis-smart-mapping-info-popover, arcgis-smart-mapping-symbol-pair-popover, arcgis-smart-mapping-dropdown").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function d(e,i,t){if(i&&(null==e?void 0:e.tagName)===i.toUpperCase()||t&&(null==e?void 0:e.classList.contains(t)))return e;{let n=null==e?void 0:e.parentElement;for(;n;){if(i&&n.tagName===i.toUpperCase()||t&&n.classList.contains(t))return n;if("BODY"===n.tagName)break;n=n.parentElement}}}function p(e,i){const t=function(e){if("CALCITE-PANEL"===(null==e?void 0:e.tagName))return e;if("CALCITE-FLOW-ITEM"===(null==e?void 0:e.tagName))return e;{let i=null==e?void 0:e.parentElement;for(;i;){if("CALCITE-PANEL"===i.tagName)return i;if("CALCITE-FLOW-ITEM"===i.tagName)return i;i=i.parentElement}}}(e);t&&(t.disabled=i)}function m(e){let i=null==e?void 0:e.parentElement;if("CALCITE-FLOW"===(null==i?void 0:i.tagName)){let t=0;return i.childNodes.forEach(((i,n)=>{i===e&&(t=n)})),0===t}return!1}function f(e){const{containsFlow:i}=Re;return d(e,i?"calcite-flow":"arcgis-smart-mapping")}function y(e,i,t,n=!0){let o=document.getElementById(t);(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o);const r=document.createElement("calcite-tooltip");r.className="smart-mapping-tooltip",r.id=t,r.placement="auto",r.referenceElement=e,r.open=n,r.innerHTML=i,document.body.append(r)}function g(e,i,t=!0){const n=document.createElement("calcite-tooltip");n.className="smart-mapping-tooltip",n.referenceElement=e,n.open=t,n.innerHTML=i,document.body.append(n)}function h(){document.querySelectorAll(".smart-mapping-tooltip").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function v(e){const i=document.getElementById(e);"smart-mapping-tooltip"===(null==i?void 0:i.className)&&(null==i?void 0:i.parentNode)&&i.parentNode.removeChild(i)}function b(e){return e.min===e.max&&F(e.min)&&(e.min>0?(e.min=0,e.max=2*e.max):e.min<0?(e.min=2*e.min,e.max=0):(e.min=-10,e.max=10)),e}function S(){var e;const{layer:i,useFeatureReduction:t}=Re;return"featureReduction"in i&&"binning"===(null===(e=i.featureReduction)||void 0===e?void 0:e.type)&&t||"imagery"===i.type||"imagery-tile"===i.type?"polygon":"geo-rss"===i.type?"point":i.geometryType}function T(){const{layer:e}=Re;return"stream"===e.type||"point"===S()||"multipoint"===S()}function I(){const{layer:e}=Re;return!("stream"===e.type)&&"polygon"===S()}function E(){const{layer:e}=Re;return!("stream"===e.type)&&"polyline"===S()}function F(e){return null!=e}function x(e){if(e.simpleFieldType===o.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}function C(e){setTimeout((()=>{e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),setTimeout((()=>{var e;const i=null===(e=document.getElementsByTagName("calcite-shell"))||void 0===e?void 0:e[0];i&&(i.scrollTop=0)}),100)}),100)}function N(e){const i=(0,l.a)(e),t=(0,r.g)(e),n=new Intl.NumberFormat(i,{style:"percent"}).format(0);return"rtl"===t?n.endsWith("%"):n.startsWith("%")}function w(e,i){return e.minValue<.001&&e.maxValue<.001?`${e.minValue.toFixed(i).toLocaleString()} - ${e.maxValue.toFixed(i).toLocaleString()}`:`${e.minValue.toLocaleString()} - ${e.maxValue.toLocaleString()}`}function R(e){return"feature"===e.type}!function(e){e.MISSING="missing",e.IN_PROGRESS="inProgress",e.SUCCESS="success",e.FAILED="failed"}(n||(n={})),function(e){e.NUMBER="number",e.STRING="string",e.DATE="date",e.OID="oid",e.GUID="guid",e.UNKNOWN="unknown"}(o||(o={}));let z=["id","fips","fid","objectid","_objectid","__objectid","x","y","lat","long","latitude","longitude","shape","shape_length","shape_leng","shape_area","perimeter","stretched_value","fnode_","tnode_","lpoly_","rpoly_","poly_","subclass","rings_ok","rings_nok","st_length(shape)","st_area(shape)"];function M(){const{layer:e,mapImageSublayer:i}=Re;let{layerFields:t}=Re;if(!e||t)return Promise.resolve();if(Re.layerFields=function(){var e;const{layer:i,useFeatureReduction:t,modules:n}=Re;if("featureReduction"in i&&"binning"===(null===(e=i.featureReduction)||void 0===e?void 0:e.type)&&t){const e=i.featureReduction.fields,t=[];return e.forEach((e=>{const o=i.fields.find((i=>i.name===e.onStatisticField));e.onStatisticField&&!o||t.push(new n.Field({name:e.name,alias:e.alias||e.name,type:J(e)}))})),t}return"fields"in i&&i.fields}(),i&&i.layer.portalItem&&i.layer.url.indexOf("https://demographics")>-1&&i.layer.url.indexOf(".arcgis.com")>-1){return i.layer.portalItem.fetchData().then((e=>{if(null==e?void 0:e.thematicGroup){const i=e.thematicGroup.fieldNames;i&&(t=t.filter((e=>i.indexOf(e.name)>-1)))}return O(),Promise.resolve()})).catch((()=>(O(),Promise.resolve())))}return O(),Promise.resolve()}function O(){var e,i;const{layer:t,mapImageSublayer:n,layerFields:r,supportsArcade:l}=Re,s=t.hasOwnProperty("capabilities")&&(null===(i=null===(e=t.capabilities)||void 0===e?void 0:e.query)||void 0===i?void 0:i.supportsSqlExpression);Re.fields=[],Re.stringFieldsCount=0,Re.dateFieldsCount=0,Re.numberFieldsCount=0;const a="popupTemplate"in t&&t.popupTemplate?t.popupTemplate.fieldInfos:[],c=se().filter((e=>!!e.field)).map((e=>e.field.toLowerCase()));(null==c?void 0:c.length)&&(z=z.filter((e=>-1===c.indexOf(e)))),r.forEach((e=>{if(z.indexOf(e.name.toLowerCase())>-1)return;if(["date","date-only"].indexOf(e.type)>-1&&(n&&!l||"stream"!==t.type&&!s))return;const i=a?a.filter((i=>i.fieldName===e.name)):null,r=i&&i.length?i[0].label:null,u={layerField:e,label:r||e.alias||e.name};!function(e,i){const{useFeatureReduction:t}=Re;switch(J(e.layerField)){case"string":case"date-only":case t&&"date":case t&&"timestamp-offset":e.simpleFieldType=o.STRING,Re.stringFieldsCount++;break;case"date":e.simpleFieldType=o.DATE,Re.dateFieldsCount++;break;case"oid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.OID);break;case"guid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.GUID);break;case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":e.simpleFieldType=o.NUMBER,Re.numberFieldsCount++}}(u,c),u.simpleFieldType&&Re.fields.push(u)}))}function k(e){if(j()){const i=Si().filter((i=>i.name===e));if(i.length){const e=i[0];return{label:e.alias,layerField:e,simpleFieldType:o.STRING}}}else{const i=Re.fields.filter((i=>i.layerField.name===e));if(i.length)return i[0]}}function _(){const e=Re.fields.filter((e=>e.simpleFieldType===o.NUMBER));if(e.length)return e[0]}function V(){return Re.numberFieldsCount>0}function D(){const{selectedFields:e}=Re,i={string:0,number:0,date:0,unknown:0,expression:0,featureReductionExpression:0};return e.forEach((e=>{let t;if(i.expression+=e.expression?1:0,i.featureReductionExpression+=e.featureReductionExpression?1:0,e.field){const i=k(e.field);t=i?i.simpleFieldType:o.UNKNOWN}else t=e.simpleFieldType;switch(t){case o.NUMBER:case o.OID:case o.GUID:i.number++;break;case o.STRING:i.string++;break;case o.DATE:i.date++;break;case o.UNKNOWN:i.unknown++}})),i}function B(e){const{fields:i}=Re,t={string:0,number:0,date:0,expression:0};return(e=e||i).forEach((e=>{switch(e.simpleFieldType){case o.NUMBER:case o.OID:case o.GUID:t.number++;break;case o.STRING:t.string++;break;case o.DATE:t.date++}})),t}function A(e){const{layer:i}=Re;"featureReduction"in i&&i.featureReduction&&"binning"===i.featureReduction.type||L(e)}function L(e){const{layer:i}=Re;"geojson"!==i.type&&"wfs"!==i.type&&"feature"!==i.type||(i.outFields=e)}function U(e,i){let t=!0;return e.length===i.length&&(e.forEach(((e,n)=>{t&&!P(e,i[n])&&(t=!1)})),t)}function P(e,i){return!(!e||!i||e.field!=i.field||e.expression!=i.expression||e.expressionTitle!=i.expressionTitle)}function G(e){return e.simpleFieldType===o.DATE}function q(e){const i=e.layerField;switch(J(i)){case"small-integer":case"big-integer":case"integer":case"single":case"double":if("domain"in i&&i.domain)return"string";switch("valueType"in i&&i.valueType){case"name-or-title":case"type-or-category":case"description":case"location-or-place-name":case"ordered-or-ranked":case"binary":case"unique-identifier":case"date-and-time":return"string";case"count-or-amount":return"integer";default:return"double"}case"string":case"date-only":return"string";case"date":return"date";default:return"string"}}function J(e){const{layer:i}=Re;if(e&&"fields"in i){if("type"in e)return e.type;if("statisticType"in e){if(e.onStatisticExpression)return"number"===e.onStatisticExpression.returnType?"double":e.onStatisticExpression.returnType;const t=i.fields.find((i=>i.name===e.onStatisticField));if(!e.onStatisticField||t){if("count"===e.statisticType)return"integer";if("avg"===e.statisticType)return"double";if(["min","max","sum","mode"].indexOf(e.statisticType)>-1)return(null==t?void 0:t.type)||"integer"}}else;}}function j(){const{layer:e}=Re;return["imagery","imagery-tile"].indexOf(e.type)>-1}var W,H;!function(e){e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications"}(W||(W={})),function(e){e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed"}(H||(H={}));const $=e=>{const i=(e=>localStorage.getItem(e))(e);return i?JSON.parse(i):{}},K=(e,i)=>{const t=$(e);t[i.key]=i.value,((e,i)=>{localStorage.setItem(e,i)})(e,JSON.stringify(t))},X=(e,i)=>{const t=$(e);return(null==t?void 0:t.hasOwnProperty(i))?t[i]:null};function Y(){const{layer:e}=Re;return"renderer"in e&&e.renderer}function Q(){var e,i;const{layer:t}=Re,n=t;switch(null===(e=null==n?void 0:n.renderer)||void 0===e?void 0:e.type){case"flow":return"raster-flow";case"vector-field":return"raster-vector-field";case"class-breaks":return"raster-class-breaks";case"unique-value":return"raster-unique-value";case"raster-stretch":return function(){var e,i,t,n;const{layer:o}=Re,r=o,l="raster-stretch"===(null===(e=Y())||void 0===e?void 0:e.type);if(!l)return!1;const s=(null===(i=r.bandIds)||void 0===i?void 0:i.length)>1,a=(null===(t=r.rasterInfo)||void 0===t?void 0:t.bandCount)>1,c=(null===(n=Y().gamma)||void 0===n?void 0:n.length)>1;return l&&(s||a&&c)}()?"raster-rgb":"raster-stretch";case"raster-shaded-relief":return"raster-shaded-relief";default:return null===(i=n.renderer)||void 0===i?void 0:i.type}}function Z(e){const{modules:i}=Re;ee(i.esriLang.clone(e||de()))}function ee(e){const{layer:i}=Re;"renderer"in i&&(i.renderer=e)}async function ie(){const{layer:e,modules:i}=Re,t=e,{rasterFunction:n}=t;if(!t.bandIds){const e=await i.smartMappingRasterUtils.getDefaultBandCombination({layer:t,rasterFunction:n});t.bandIds=e}const o=await i.smartMappingRasterUtils.getSupportedRendererInfo({layer:t,rasterFunction:n});return ee(o.defaultRenderer),o.defaultRenderer}function te(e){const{modules:i}=Re;if(!e)return[new i.esriColor([0,0,0,1]),new i.esriColor([50,50,50,1]),new i.esriColor([73,73,73,1]),new i.esriColor([140,140,140,1]),new i.esriColor([255,255,255,1])];if("multipart"!==(null==e?void 0:e.type))return[e.fromColor,e.toColor];const t=e.colorRamps,n=t.map((e=>e.fromColor));return n.push(t[t.length-1].toColor),n}const ne="polygon";function oe(){return re(de())}function re(e){var i;const t=ti(e,"size"),n=ti(e,"color"),o=ni(e,"color"),r=oi(e,"color"),l=oi(e,"size"),s=oi(e,"reference-size");let a="unknown";if(e.normalizationType&&"field"!==e.normalizationType)return"unknown";if("simple"===e.type)a="simple";else if("dot-density"===e.type)a="dot-density";else if("heatmap"===e.type)a="heatmap";else if("class-breaks"===e.type){const c=e;if(n)a=c.valueExpression&&!r?"color":t?l&&l.units?"color-size-age":r&&r.units?"color-age-size":"color-size":r&&r.style&&o.normalizationField?"compare":r&&r.units?t?"color-age-size":"color-age":s?"color-size":"color";else if(t)a="univariate-color-size"===(null===(i=c.authoringInfo)||void 0===i?void 0:i.type)?"color-size":c.valueExpression&&!l?"size":l&&l.units?"size-age":"size";else{const i=e,t=i.authoringInfo;a=t?"class-breaks-color"===t.type?"color":"class-breaks-size"===t.type||s||ye(i.classBreakInfos)?"size":"color":I()?i.valueExpression?ye(i.classBreakInfos)?"size":"color":i.backgroundFillSymbol?"size":"color":ye(i.classBreakInfos)?"size":"color"}}else"unique-value"===e.type?a=e.valueExpression?e.authoringInfo&&"predominance"===e.authoringInfo.type||"Predominant category"===e.valueExpressionTitle?ti(e,"size")?"predominance-size":"predominance":e.authoringInfo&&"relationship"===e.authoringInfo.type?ti(e,"size")||s?"relationship-size":"relationship":ti(e,"size")||s?"type-size":"type":t?l&&l.units?"type-size-age":"type-size":s?"type-size":"type":"pie-chart"===e.type&&(a=ti(e,"size")?"chart-size":"chart");return a}function le(e){const i=ni(e,"color"),t=ni(e,"size"),n=re(e);(null==i?void 0:i.normalizationField)?(e.normalizationField=i.normalizationField,e.normalizationType="field"):["color-size","color-age-size","color-size-age"].indexOf(n)>-1&&i?(e.normalizationField=void 0,e.normalizationType=void 0):"size"===n&&(null==t?void 0:t.normalizationField)&&(e.normalizationField=t.normalizationField,e.normalizationType="field")}function se(e){var i;let t=[];switch(re(e=e||de())){case"relationship":case"relationship-size":{t=[{field:e.authoringInfo.field1.field,simpleFieldType:o.NUMBER},{field:e.authoringInfo.field2.field,simpleFieldType:o.NUMBER}];const i=ni(e,"size"),n=oi(e,"reference-size");if(i){const e=k(i.field);t.push({field:i.field,expression:i.valueExpression,expressionTitle:i.valueExpressionTitle,simpleFieldType:i.field&&e?e.simpleFieldType:o.NUMBER})}else n&&t.push({field:n.field,simpleFieldType:o.NUMBER});break}case"predominance":case"predominance-size":t=e.uniqueValueInfos.map((e=>{var i;return{field:""+e.value,simpleFieldType:(null===(i=k(""+e.value))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"chart":case"chart-size":t=e.attributes.map((e=>{const i=k(e.field);return{field:e.field,expression:e.valueExpression,expressionTitle:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER}}))}if(t.length)return t;switch(e.type){case"dot-density":t=e.attributes.map((e=>{var i;return{field:e.field,simpleFieldType:(null===(i=k(e.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"heatmap":{const n=e;t=n.field?[{field:n.field,simpleFieldType:(null===(i=k(n.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}]:[];break}case"class-breaks":{const i=e,n=k(i.field);t=[{field:i.field,expression:n?void 0:i.valueExpression,expressionTitle:n?void 0:i.valueExpressionTitle,simpleFieldType:i.field&&n?n.simpleFieldType:o.NUMBER}];const r=ni(e,"color"),l=ni(e,"size"),s=oi(e,"color"),a=oi(e,"size"),c=oi(e,"reference-size");if(r&&l)if(r.field===l.field&&r.valueExpression===l.valueExpression&&r.valueExpressionTitle===l.valueExpressionTitle){const e=k(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}else{if(s&&s.units)t=[{field:s.field,simpleFieldType:o.DATE}];else{const e=k(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}if(a&&a.units)t.push({field:a.field,simpleFieldType:o.DATE});else{const e=k(l.field);t.push({field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER})}}else if(r){if(s&&s.units)t=[{field:s.field,simpleFieldType:o.DATE}];else{const e=k(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}c&&t.push({field:c.field,simpleFieldType:o.NUMBER})}else if(l)if(a&&a.units)t=[{field:a.field,simpleFieldType:o.DATE}];else{const e=k(l.field);t=[{field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER}]}else c&&(t=[{field:c.field,simpleFieldType:o.NUMBER}]);if(s&&s.style&&r.normalizationField){const e=k(r.field),i=k(r.normalizationField);t=[{field:r.field,simpleFieldType:e?e.simpleFieldType:o.NUMBER},{field:r.normalizationField,simpleFieldType:i?i.simpleFieldType:o.NUMBER}]}break}case"unique-value":if(e.authoringInfo&&"predominance"===e.authoringInfo.type){t=e.uniqueValueInfos.map((e=>{const i=k(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}))}else if(e.authoringInfo&&"chart"===e.authoringInfo.type){t=e.uniqueValueInfos.map((e=>{const i=k(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}))}else if(e.authoringInfo&&"relationship"===e.authoringInfo.type){const i=k(e.authoringInfo.field1.field),n=k(e.authoringInfo.field2.field);t=[{field:e.authoringInfo.field1.field,simpleFieldType:i?i.simpleFieldType:o.NUMBER},{field:e.authoringInfo.field2.field,simpleFieldType:n?n.simpleFieldType:o.NUMBER}]}else{const i=e,n=k(i.field);let r=o.NUMBER;i.field&&n?r=n.simpleFieldType:i.valueExpression&&i.uniqueValueInfos&&i.uniqueValueInfos[0]&&"string"==typeof i.uniqueValueInfos[0].value&&(r=o.STRING),t=[{field:i.field,expression:n?void 0:i.valueExpression,expressionTitle:n?void 0:i.valueExpressionTitle,simpleFieldType:r}];const l=ni(e,"size"),s=oi(e,"reference-size");if(l){let i=l.field;if(!i){i=(oi(e,"size")||{}).field}const n=k(i);t.push({field:i,expression:n?void 0:l.valueExpression,expressionTitle:n?void 0:l.valueExpressionTitle,simpleFieldType:i&&n?n.simpleFieldType:o.NUMBER})}else s&&t.push({field:s.field,simpleFieldType:o.NUMBER})}}return t}function ae(e,i,t=!1){if(i&&5!==i.length)return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};switch(e){case"high-to-low":case"above":case"below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};case"above-and-below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!t,visibleElements:{interactiveTrack:!t}};case"centered-on":case"extremes":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!0,visibleElements:{interactiveTrack:!0}}}}function ce(){const{mapView:e}=Re,i=e.map.basemap.baseLayers.getItemAt(0);if(!i.url)return"esri.layers.OpenStreetMapLayer"===i.declaredClass?"osm":"topo";const t=i.url.toLowerCase();return t.indexOf("arcgis/rest/services/World_Street_Map".toLowerCase())>-1?"streets":t.indexOf("ArcGIS/rest/services/Canvas/World_Light_Gray_Base".toLowerCase())>-1?"gray":t.indexOf("arcgis/rest/services/World_Topo_Map".toLowerCase())>-1||t.indexOf("arcgis/rest/services/USGSTopo".toLowerCase())>-1?"topo":t.indexOf("ArcGIS/rest/services/World_Terrain_Base".toLowerCase())>-1?"terrain":t.indexOf("arcgis/rest/services/NatGeo_World_Map".toLowerCase())>-1?"national-geographic":t.indexOf("arcgis/rest/services/Ocean/World_Ocean_Base".toLowerCase())>-1?"oceans":t.indexOf("arcgis/rest/services/World_Imagery".toLowerCase())>-1?"satellite":t.indexOf("ArcGIS/rest/services/Reference/World_Boundaries_and_Places".toLowerCase())>-1?"hybrid":t.indexOf("arcgis/rest/services/Canvas/World_Dark_Gray_Base".toLowerCase())>-1?"dark-gray":"topo"}function ue(e,i,t){if(!(0,a.i)(i)||!(0,a.i)(t))return null;const n=e[0].value,o=e[e.length-1].value,r=.3*(o-n);return{min:n-r>i?n-r:null,max:o+r<t?o+r:null,minMaxSame:n===o}}function de(){var e;const{layer:i}=Re,{useFeatureReduction:t}=Re;return"featureReduction"in i&&"binning"===(null===(e=i.featureReduction)||void 0===e?void 0:e.type)&&t?i.featureReduction.renderer:"renderer"in i&&i.renderer}function pe(e){const i=de(),t="authoringInfo"in i&&i.authoringInfo,n=oi(de(),"color"),o=oi(de(),"size");return oi(de(),"reference-size")&&"size"===e?"reference-size":("color"===e?null==n?void 0:n.theme:"size"===e?null==o?void 0:o.theme:(null==t?void 0:t.univariateTheme)||(null==n?void 0:n.theme)||(null==o?void 0:o.theme))||""}function me(e){const{layer:i,mapImageSublayer:t}=Re;if("geo-rss"===i.type){const e=i;e.pointSymbol=e.pointSymbol.clone(),e.lineSymbol=e.lineSymbol.clone(),e.polygonSymbol=e.polygonSymbol.clone()}else!function(e){var i;const{layer:t,useFeatureReduction:n}=Re;"featureReduction"in t&&"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)&&n?t.featureReduction.renderer=e:"renderer"in t&&(t.renderer=e)}((e||de()).clone()),t&&(t.renderer=(e||de()).clone())}function fe(e,i){const{layer:t,modules:n}=Re;i&&"featureReduction"in t&&(t.featureReduction=null),me(n.rendererJsonUtils.fromJSON(e)),i&&"featureReduction"in t&&(t.featureReduction=i)}function ye(e){let i,t;for(i=0;i<e.length;i++){const n=e[i].symbol;for(t=0;t<e.length;t++){const o=e[t].symbol;if(i!==t&&ge(n,o))return!0}}return!1}function ge(e,i){return"picture-marker"!=e.type&&("cross"===e.style||"x"===e.style?"cross"===i.style||"x"===i.style?!e.outline.color&&!i.outline.color||e.outline.color&&i.outline.color&&e.outline.color.toString()===i.outline.color.toString():!e.outline.color&&!i.color||e.outline.color&&i.color&&e.outline.color.toString()===i.color.toString():"cross"===i.style||"x"===i.style?!e.color&&!i.outline.color||e.color&&i.outline.color&&e.color.toString()===i.outline.color.toString():!e.color&&!i.color||e.color&&i.color&&e.color.toString()===i.color.toString())}function he(e){const{modules:i}=Re,t=de(),n=oe();if(["unique-size","unique-size-age"].indexOf(n)>-1)return null;let o;const r=ni(t,"color"),l=t.classBreakInfos?t.classBreakInfos:t.uniqueValueInfos;let s;return r?(s=r.stops.map((e=>e.color)),o=i.colorSchemes.getMatchingSchemes({theme:e||"high-to-low",colors:s,geometryType:S()||ne})):l&&l.length>=1&&(s=l?l.map((e=>De(e.symbol))).filter((e=>e)):null,s&&s.length&&(s.length>10&&(s=s.slice(0,9)),o=function(e,i){const{modules:t}=Re;let n=t.colorSchemes.getMatchingSchemes({theme:i||"high-to-low",colors:e,geometryType:S()||ne});!i||n&&n.length||(n=t.colorSchemes.getMatchingSchemes({theme:"high-to-low",colors:e,geometryType:S()||ne}));n&&n.length||(n=t.colorSchemes.getMatchingSchemes({theme:"above-and-below",colors:e,geometryType:S()||ne}));return n}(s,e))),o&&o.length?o[0]:null}function ve(){const{mapView:e,modules:i}=Re,t=de().uniqueValueInfos;if(!t||t.length<2)return null;const n=Math.sqrt(t.length),o=i.relationshipSchemes.getSchemes({basemap:e.map.basemap||"topo",geometryType:S()}),r=[o.primaryScheme].concat(o.secondarySchemes),l=[];return r.forEach((e=>{let o=[];e.colorsForClassBreaks[n-2].colors.forEach((e=>{o=o.concat(i.esriLang.clone(e))}));t.some((e=>{const i=De(e.symbol);return!!i&&!o.find((e=>xe(e,i)))}))||l.push(e)})),l.length?l[0]:null}function be(){const{mapView:e,modules:i}=Re,t=de();if(!t.uniqueValueInfos||t.uniqueValueInfos.length<2)return null;return Ee(i.typeSchemes.getSchemes({basemap:e.map.basemap,geometryType:S()||ne}))}function Se(){const{mapView:e,modules:i}=Re,t=de();if(!t.uniqueValueInfos||t.uniqueValueInfos.length<2)return null;return Ee(i.predominanceSchemes.getSchemes({basemap:e.map.basemap,geometryType:S(),numColors:10}))}function Te(){const{mapView:e,modules:i}=Re,t=de();if(!t.attributes||t.attributes.length<2)return null;return Ee(i.pieChartSchemes.getSchemes({basemap:e.map.basemap,geometryType:S(),numColors:10}))}function Ie(){const{mapView:e,modules:i}=Re,t=de();let n;n=t.colorStops.filter(((e,i)=>i>=3)).map((e=>e.color));const o=i.heatmapSchemes.getSchemes({basemap:e.map.basemap||"topo"}),r=[o.primaryScheme].concat(o.secondarySchemes),l=[];return r.forEach((e=>{n.some(((i,t)=>!xe(e.colors[t],i)))||l.push(e)})),l.length?l[0]:null}function Ee(e){const i=de().uniqueValueInfos;if(!i||i.length<2)return null;const t=Ce(e,Math.min(i.length,10)),n=[];return t.forEach((e=>{i.filter(((e,i)=>i<10)).some(((i,t)=>{const n=De(i.symbol);return!!n&&!xe(e.colors[t],n)}))||n.push(e.scheme)})),n.length?n[0]:null}function Fe(){const{mapView:e,modules:i}=Re;return i.typeSchemes.getSchemes({basemap:e.map.basemap,geometryType:S()||ne}).primaryScheme}function xe(e,i){return e.r===i.r&&e.g===i.g&&e.b===i.b}function Ce(e,i){const t=we(e),n=[];return t.forEach((e=>{const t=i>0,o=!!e.colorsForClassBreaks;let r;r=t&&o?function(e,i){const t=e.length;let n=[];for(let o=0;o<t;o++){const t=e[o];if(i<t.numClasses)break;n=t.colors}return n}(e.colorsForClassBreaks,i):e.colors,n.push({colors:r,scheme:e})})),n}function Ne(e){const i=we(e);let t=[];return i.forEach((function(e){e.colors&&(t=t.concat(e.colors))})),function(e){const i={};return e.filter((function(e){const t=!i[e.toHex()];return t&&(i[e.toHex()]=1),t}))}(t)}function we(e){return[e.primaryScheme].concat(e.secondarySchemes)}const Re=(0,s.c)({selectedFields:[],hideLayerTitle:!1,supportsArcade:!1,stringFieldsCount:-1,dateFieldsCount:-1,numberFieldsCount:-1,isRTL:!1,containsFlow:!0,oneFeatureResponseStatus:n.MISSING}).state;function ze(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=n.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0}function Me(e){const{modules:i}=Re,t=i.typeSchemes.getSchemes({theme:"default",basemap:ce(),geometryType:S()}).primaryScheme;let n;if(T()||e&&["size","color-size","color-age-size","color-size-age","color-age-size-age","type-size","predominance-size","chart-size","relationship-size"].indexOf(e)>-1){const e=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.outline.color),width:t.outline.width});n=new i.SimpleMarkerSymbol({style:"circle",size:t.size,outline:e,color:t.noDataColor})}else if(I()){const e=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.outline.color),width:t.outline.width});n=new i.SimpleFillSymbol({style:"solid",outline:e,color:t.noDataColor})}else E()&&(n=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.noDataColor),width:t.width}));return n}function Oe(e){const{modules:i}=Re,t=i.typeSchemes.getSchemes({theme:"default",basemap:ce(),geometryType:"line"===e?"polyline":e}).primaryScheme;let n;if("point"===e){const e=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.outline.color),width:t.outline.width});n=new i.SimpleMarkerSymbol({style:"circle",size:t.size,outline:e,color:t.noDataColor})}else if("polygon"===e){const e=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.outline.color),width:t.outline.width});n=new i.SimpleFillSymbol({style:"solid",outline:e,color:t.noDataColor})}else"line"===e&&(n=new i.SimpleLineSymbol({style:"solid",color:new i.esriColor(t.noDataColor),width:t.width}));return n}function ke(){const{modules:e}=Re;return new e.SimpleFillSymbol({color:[184,184,184,1],style:"solid",outline:{color:"white",width:1}})}function _e(e){if(!e)return!1;let i=!1;const t=De(e);if(e&&"esri.symbols.SimpleFillSymbol"===e.declaredClass){const n=e.outline;t&&0!==t.a||n&&n.color&&0!==n.color.a||(i=!0)}else if(e&&"esri.symbols.SimpleLineSymbol"===e.declaredClass)t&&0!==t.a||(i=!0);else if(e&&"esri.symbols.SimpleMarkerSymbol"===e.declaredClass){const n=e.outline;t&&0!==t.a||n&&n.color&&0!==n.color.a||(i=!0)}return i}function Ve(e){const{modules:i}=Re;if(e){return"dark"===i.previewSymbol2D.getContrastingBackgroundTheme(e,245)}return!1}function De(e){var i,t;const{modules:n}=Re;return"cim"===(null==e?void 0:e.type)?n.esriColor.fromJSON(null===(i=n.cimSymbolUtils.getCIMSymbolColor(e))||void 0===i?void 0:i.toJSON()):"simple-marker"===(null==e?void 0:e.type)&&["x","cross"].indexOf(null==e?void 0:e.style)>-1?null===(t=null==e?void 0:e.outline)||void 0===t?void 0:t.color:null==e?void 0:e.color}function Be(e,i){const{modules:t}=Re;"picture-marker"!==e.type&&("cim"===e.type?t.cimSymbolUtils.applyCIMSymbolColor(e,i):"simple-marker"===e.type&&e.style&&["cross","x"].indexOf(e.style)>-1?(e.outline||(e.outline=new __esri.SimpleLineSymbol),e.outline.color=i):e.color=i)}function Ae(e,i){return e&&(e.a=i),e}function Le(e){const{modules:i}=Re;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolSize(e):e.size?e.size:e.width}function Ue(e,i){const{modules:t}=Re;if("cim"===e.type)t.cimSymbolUtils.scaleCIMSymbolTo(e,i);else if((0,a.i)(e.size))e.size=i;else{const t=e.height/e.width;e.width=i,e.height=e.width*t}}function Pe(e){var i,t;const n=null===(i=e.data.symbol.symbolLayers)||void 0===i?void 0:i.find((e=>["CIMSolidStroke","CIMPictureStroke"].indexOf(e.type)>-1));return null!==(t=null==n?void 0:n.width)&&void 0!==t?t:0}function Ge(e){const{modules:i}=Re;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolRotation(e,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1?e.angle:void 0}function qe(e,i){const{modules:t}=Re;null!=i&&("cim"===e.type?t.cimSymbolUtils.applyCIMSymbolRotation(e,i,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1&&(e.angle=i))}function Je(e){var i;return"picture-marker"!==e.type&&("cim"===e.type?["CIMPolygonSymbol"].indexOf(e.data.symbol.type)>-1&&!!$e(e):!!(null===(i=e.outline)||void 0===i?void 0:i.color))}function je(e,i){var t,n;if(null===(t=e.uniqueValueInfos)||void 0===t?void 0:t.length){const t=e.uniqueValueInfos.slice();t.map((e=>{const t=i.clone();Be(t,De(e.symbol)),e.symbol=t})),e.uniqueValueInfos=t}else if(null===(n=e.classBreakInfos)||void 0===n?void 0:n.length){const t=e.classBreakInfos.slice();t.map((e=>{const t=i.clone();Be(t,De(e.symbol)),e.symbol=t})),e.classBreakInfos=t}else if(e.symbol){const t=i.clone();Be(t,De(e.symbol)),e.symbol=t}}function We(e,i){var t,n;if(null===(t=e.uniqueValueInfos)||void 0===t?void 0:t.length){const t=e.uniqueValueInfos.slice();t.map((e=>{const t=i.clone();Be(t,De(e.symbol)),e.symbol=t})),e.uniqueValueInfos=t}else if(null===(n=e.classBreakInfos)||void 0===n?void 0:n.length){const t=e.classBreakInfos.slice();t.map((e=>{const t=i.clone();Be(t,De(e.symbol)),e.symbol=t})),e.classBreakInfos=t}else if(e.symbol){const t=i.clone();Be(t,De(e.symbol)),e.symbol=t}}function He(e){var i;return"cim"===e.type&&"CIMLineSymbol"===(null===(i=e.data.symbol)||void 0===i?void 0:i.type)}function $e(e){var i,t,n;if("CIMPointSymbol"!==(null===(i=e.data.symbol)||void 0===i?void 0:i.type))return"CIMLineSymbol"===(null===(t=e.data.symbol)||void 0===t?void 0:t.type)?function(e){const i=e.data.symbol.symbolLayers;return i[0]}(e):"CIMPolygonSymbol"===(null===(n=e.data.symbol)||void 0===n?void 0:n.type)?function(e){const i=e.data.symbol.symbolLayers;return i.find((e=>"CIMSolidStroke"===e.type))}(e):void 0}function Ke(){var e;const{mapImageSublayer:i,layer:t}=Re;return!i||!!(null===(e=t.sourceJSON)||void 0===e?void 0:e.cimVersion)}function Xe(e){return!!(e.style&&["cross","x"].indexOf(e.style)>-1)}function Ye(e){return"picture-marker"===e.type||"cim"===e.type&&!function(e){const{modules:i}=Re;return!!i.cimSymbolUtils.getCIMSymbolColor(e)}(e)}function Qe(e,i){return"simple-line"===e.type?{width:12,height:3}:"cim"===e.type&&"CIMLineSymbol"===e.data.symbol.type?void 0:"simple-fill"===e.type?14:"cim"===e.type&&"CIMPolygonSymbol"===e.data.symbol.type?i?18:void 0:"cim"===e.type?20:14}function Ze(e,i){var t,n,o,r;if(e.type!==i.type)return{hasOtherChanges:!0,any:!0};const l=Ge(e)!==Ge(i),s=Math.abs(Le(e)-Le(i))>.01,a=JSON.stringify(null===(t=De(e))||void 0===t?void 0:t.toJSON())!==JSON.stringify(null===(n=De(i))||void 0===n?void 0:n.toJSON()),c=["simple-marker","simple-fill"].indexOf(e.type)>-1&&JSON.stringify(null===(o=e.outline)||void 0===o?void 0:o.toJSON())!==JSON.stringify(null===(r=i.outline)||void 0===r?void 0:r.toJSON()),u=e.clone();Ue(u,Le(i)),Be(u,De(i)),["simple-marker","simple-fill"].indexOf(e.type)>-1&&(u.outline=i.outline.clone()),qe(u,Ge(i));const d=!function(e,i){if(JSON.stringify(e.toJSON())===JSON.stringify(i.toJSON()))return!0;if("cim"===e.type&&"cim"===i.type)return ii(e.toJSON().symbol,i.toJSON().symbol);return!1}(u,i);return{rotation:l&&!s&&!a&&!c&&!d,size:s&&!l&&!a&&!c&&!d,outline:c&&!l&&!s&&!a&&!d,color:a&&!l&&!s&&!c&&!d,other:d,any:l||s||c||a||d}}function ei(e,i,t,n){var o;return n.rotation?qe(e,Ge(i)):n.size?Ue(e,Le(i)):n.color?("picture-marker"===e.type&&(e=i.clone()),Be(e,t)):n.outline?"picture-marker"===e.type?e=i.clone():e.outline=null===(o=i.outline)||void 0===o?void 0:o.clone():Be(e=i.clone(),t),e}function ii(e,i){const t=Object.keys,n=typeof e;return e&&i&&"object"===n&&n===typeof i?t(e).length===t(i).length&&t(e).every((t=>"size"===t||"width"===t?Math.abs(e[t]-i[t])<.01:ii(e[t],i[t]))):e===i}function ti(e,i,t){const n=e&&e.visualVariables;return!!n&&n.some((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o)}))}function ni(e,i,t){const n=e&&e.visualVariables;if(n){const e=n.filter((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o&&!n)}));if(e.length)return e[0]}}function oi(e,i,t){if(!e.authoringInfo)return;const n=e&&e.authoringInfo&&e.authoringInfo.visualVariables;if(n){const e=n.filter((e=>{const n=e.target;return"reference-size"===i?"size"===e.type&&"reference-size"===e.theme:e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)||n===t)}));if(e.length)return e[0]}}function ri(e,i,t){const n=e&&e.visualVariables;if(n){const e=n.filter((e=>{const n=e.target,o="$view.scale"===e.valueExpression;return!(e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)&&!o||n===t||"auto"===t&&o))}));if(e.length)return e}}function li(e,i,t){if(!("authoringInfo"in e)||!e.authoringInfo)return;let n=e&&e.authoringInfo.visualVariables&&e.authoringInfo.visualVariables;if(n){"reference-size"===i&&(n=n.filter((e=>!("size"===e.type&&"reference-size"===(null==e?void 0:e.theme)))));const e=n.filter((e=>{const n=e.target;return!(e.type===i&&(!(0,a.i)(n)&&!(0,a.i)(t)||n===t))}));if(e.length)return e}}function si(e){const i=re(e),t=ni(e,"size","outline"),n=ni(e,"size","auto"),o=ni(e,"rotation");let r,l;return-1===["predominance","predominance-size"].indexOf(i)&&(r=ni(e,"opacity"),l=oi(e,"opacity")),{sizeOutlineVisVar:t,sizeAutoVisVar:n,opacityVisVar:r,authOpacityVisVar:l,rotationVisVar:o}}function ai(e,i,t){const{sizeOutlineVisVar:n,opacityVisVar:o,authOpacityVisVar:r,rotationVisVar:l}=e;!oi(i,"reference-size")&&n&&(i.visualVariables=ri(i,"size","outline")||[],i.visualVariables.push(n)),!o||!r||t&&t.notOpacity||(i.visualVariables=ri(i,"opacity")||[],i.visualVariables.push(o),i.authoringInfo=i.authoringInfo||{},i.authoringInfo.visualVariables=li(i,"opacity")||[],i.authoringInfo.visualVariables.push(r)),l&&(i.visualVariables=i.visualVariables||[],i.visualVariables.push(l))}var ci;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(ci||(ci={}));const ui={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,STRETCH_TYPE:ci.NONE};async function di(){const{layer:e,modules:i}=Re,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return t.bandIds=await mi(),i.RasterRGBCreator.createRenderer({layer:t,rasterFunction:n,rgbBandIds:t.bandIds}).then((e=>(t.effect=void 0,Z(e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function pi(e){const{layer:i,modules:t}=Re,n=i,o=Y(),r="imagery"===n.type?n.rasterFunction:void 0;return e=e||{},t.RasterRGBCreator.createRenderer({layer:n,rasterFunction:r,rgbBandIds:n.bandIds,stretchType:e.stretchType||o.stretchType,useGamma:e.useGamma||o.useGamma,gamma:e.gamma||o.useGamma?o.gamma:[1,1,1]}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,F(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=ui.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}async function mi(){var e;const{layer:i,modules:t}=Re,n=i,{rasterInfo:o}=n,{bandCount:r}=o;let l=await t.RasterRendererUtils.getDefaultBandCombination({layer:n});const s=l.length;return s!==r&&l.push(...new Array(3-s).fill(r-1)),3!==(null===(e=n.bandIds)||void 0===e?void 0:e.length)&&(n.bandIds=l),n.bandIds}var fi;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(fi||(fi={}));const yi={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,BAND_INDEX:0,STRETCH_TYPE:fi.NONE};function gi(){const{layer:e,modules:i}=Re,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return t.bandIds=[0],i.RasterStretchCreator.createRenderer({layer:t,rasterFunction:n}).then((e=>(t.effect=void 0,Z(e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function hi(e){const{layer:i,modules:t}=Re,n=i,o=Y(),r="imagery"===n.type?n.rasterFunction:void 0;return e=e||{},t.RasterStretchCreator.createRenderer({layer:n,rasterFunction:r,stretchType:e.stretchType||o.stretchType,useGamma:e.useGamma||o.useGamma,gamma:e.gamma||o.useGamma?o.gamma:[1]}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,F(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=yi.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}async function vi(){const{layer:e,modules:i}=Re,t=e,n="imagery"===t.type?t.rasterFunction:void 0;return i.RasterUniqueValueCreator.createRenderer({layer:t,rasterFunction:n})}function bi(e){var i;const{layer:t,modules:n}=Re,o=t,r=Y(),l="imagery"===o.type?o.rasterFunction:void 0;return e=e||{},n.RasterUniqueValueCreator.createRenderer({layer:o,rasterFunction:l,classFieldName:e.field||r.field,colorRamp:null!==(i=e.colorRamp)&&void 0!==i?i:null}).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}function Si(){var e;const{layer:i,modules:t,strings:n}=Re,o=i;let r;const{rasterInfo:l}=o,s=null===(e=null==l?void 0:l.attributeTable)||void 0===e?void 0:e.fields;return r=s?s.filter((e=>"oid"!==e.type)):[new t.Field({name:"value",alias:n.panels.uniqueValue.value})],r}}}]);