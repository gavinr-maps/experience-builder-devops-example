/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-bd0311.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-bd0311"],{99004:(e,t,r)=>{r.d(t,{c:()=>o,g:()=>n});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},45946:(e,t,r)=>{r.r(t),r.d(t,{arcgis_member_browser_filter_org_groups:()=>c});var o=r(7263),n=r(32023),s=r(46143),i=r(31670),a=r(69773);r(11935),r(94788),r(46581),r(28926),r(70506),r(99004),r(65215),r(93816),r(78613);const c=class{constructor(e){(0,o.r)(this,e),this.arcgisMemberBrowserFilter=(0,o.c)(this,"arcgisMemberBrowserFilter",7),this.MAX_COUNT=500,this.groupsTotal=0,this.getOrgGroupsCount=async()=>{const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{},t=this.getParams();t.num=1;const r=await(0,s.j)(e,t);return(null==r?void 0:r.total)||0},this.loadOrgGroups=async()=>{const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{};if(!this.groups&&e){const t=await this.getOrgGroupsCount();this.groupsTotal=t,t>this.MAX_COUNT?this.groups=[]:this.groups=await(0,s.k)(e,this.getParams())}},this.handleSearchInput=async e=>{const t=e.target;if(this.searchTerm=t.value,this.groupsTotal>this.MAX_COUNT){const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{},t=this.getParams();t.q=`${t.q} ${this.searchTerm}`;const r=await(0,s.j)(e,t);this.groups=r.results}},this.selectedGroupId=void 0,this.expanded=void 0,this.groups=void 0,this.searchTerm=""}componentWillLoad(){this.store=(0,n.g)(this.el),this.i18n=this.store.state.i18n.filterOrgGroups}async componentDidLoad(){this.loadOrgGroups(),(0,i.o)("portal",this.loadOrgGroups),(0,a.a)("orgGroup",this.store,(()=>{this.selectedGroupId=null}))}getParams(){const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{};let t=`orgid:${e.id}`;return e.isPortal&&(t+=' -owner:"esri_livingatlas" -owner:"esri_boundaries" -owner:"esri_demographics" -owner:"esri_webstyles"'),{q:t,start:1,num:100,sortField:"title",sortOrder:"asc"}}getEventDetail(){var e;const{selectedGroupId:t}=this,r=t?null===(e=this.groups)||void 0===e?void 0:e.find((e=>e.id===t)):null;return{id:"orgGroup",param:"group",value:t||"",label:r?this.i18n.label.replace("${name}",r.title):""}}async emitEvent(){const e=await this.getEventDetail();this.arcgisMemberBrowserFilter.emit(e)}render(){var e;const{portal:t}=null!==i.c&&void 0!==i.c?i.c:{},r=null===(e=this.groups)||void 0===e?void 0:e.filter((e=>this.groupsTotal>this.MAX_COUNT||!this.searchTerm||e.title.toLowerCase().includes(this.searchTerm.toLowerCase())));return(null==t?void 0:t.id)&&this.groupsTotal?(0,o.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.selectedGroupId,onArcgisBrowserFilterRemove:()=>{this.selectedGroupId=null},filterID:"orgGroup"},(0,o.h)("div",null,this.groupsTotal>15&&(0,o.h)("calcite-input",{type:"search",icon:"search",placeholder:this.i18n.searchGroups,onCalciteInputInput:this.handleSearchInput}),(0,o.h)("div",{class:"tree-wrapper"},(0,o.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:e=>{var t;const r=(null===(t=e.target.selectedItems)||void 0===t?void 0:t[0].dataset.groupId)||"";this.selectedGroupId===r?this.selectedGroupId=null:this.selectedGroupId=r,this.emitEvent()}},r.map((e=>(0,o.h)("calcite-tree-item",{key:e.id,"data-group-id":e.id,selected:e.id===this.selectedGroupId},(0,o.h)("a",null,e.title)))))))):null}get el(){return(0,o.d)(this)}};c.style=".tree-wrapper{max-height:14rem;overflow:auto}"},70506:(e,t,r)=>{r.d(t,{e:()=>s});var o,n=r(99004),s={exports:{}};o=s.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",o="next";function n(e){if(e.toLowerCase()===o)return o;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function s(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function i(e){void 0===e&&(e=r);var t=s(e),i=n(e);if(i!==o&&3===i.major){var a=i.minor<=10?"js/":"";return"".concat(t).concat(a,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function a(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function u(e){return!e||n(e)?i(e):e}function d(e,t){var r=u(e),o=l(r);return o||c(o=a(r),t),o}var p={};function h(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function v(e,t,r){var o;r&&(o=f(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),o&&e.removeEventListener("error",o,!1)};e.addEventListener("load",n,!1)}function f(e,t){var r=function(o){t(o.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function m(e){void 0===e&&(e={}),p=e}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var o=r.version,n=r.url||s(o);return new t.Promise((function(e,t){var s=g();if(s){var i=s.getAttribute("src");i!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):w()?e(s):v(s,e,t)}else if(w())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=r.css;a&&d(!0===a?o:a,r.insertCssBefore),v(s=h(n),(function(){s.setAttribute("data-esri-loader","loaded"),e(s)}),t),document.body.appendChild(s)}}))}function b(e){return new t.Promise((function(t,r){var o=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];o.remove(),t(e)}))}))}function _(e,t){if(void 0===t&&(t={}),w())return b(e);var r=g(),o=r&&r.getAttribute("src");return!t.url&&o&&(t.url=o),y(t).then((function(){return b(e)}))}e.utils=t,e.loadModules=_,e.getScript=g,e.isLoaded=w,e.loadScript=y,e.setDefaultOptions=m,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(o)},28926:(e,t,r)=>{r.d(t,{l:()=>n});var o=r(70506);const n=async(e,t)=>(await o.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},93816:(e,t,r)=>{r.d(t,{f:()=>n});var o=r(46581);async function n(e,t,r="results",n=!1){let s,i,a,c,l=1,u=[];t.start=l,t.num||(t.num=100);try{const d=await(0,o.r)(e,t);if(!(null==d?void 0:d[r]))return u;for(u=[...u,...d[r]],l=d.nextStart,s=d.total-u.length,i=Math.ceil(s/t.num),a=[],c=0;c<i;c++)if(t.start=l+c*t.num,n){const n=await(0,o.r)(e,t);(null==n?void 0:n[r])&&(u=[...u,...n[r]])}else a.push((0,o.r)(e,t));if(!n){(await Promise.all(a)).forEach((e=>{u=[...u,...e[r]]}))}return u}catch(e){return u}}},46143:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>a,c:()=>p,d:()=>h,e:()=>v,f:()=>c,g:()=>m,h:()=>f,i:()=>l,j:()=>u,k:()=>d});var o=r(94788),n=r(46581),s=r(93816);async function i(e){const t=(0,o.c)(e);return await(0,s.f)(`${t}portals/self/userLicenseTypes`,{num:10},"userLicenseTypes")}async function a(e){const t=(0,o.c)(e),r=await(0,s.f)(`${t}portals/self/roles`,{returnPrivileges:!0},"roles");return r.sort(((e,t)=>{const r=e.name.toLowerCase(),o=t.name.toLowerCase();return r>o?1:r<o?-1:0})),r}async function c(e,t){const r=(0,o.c)(e);let i;try{i=(await(0,n.r)(`${r}community/groups/${t}/userlist`,{num:0})).owner}catch(e){}return{admins:await(0,s.f)(`${r}community/groups/${t}/userlist`,{memberType:"admin"},"users"),owner:null==i?void 0:i.username}}async function l(e,t){const r=(0,o.c)(e),s=await(0,n.r)(`${r}community/users/${t}`),i=(null==s?void 0:s.groups)||[];return i.sort(((e,t)=>{const r="owner"===e.userMembership.memberType?1:-1,o="owner"===t.userMembership.memberType?1:-1,n=e.title.toLowerCase(),s=t.title.toLowerCase();return r!==o?o-r:n>s?1:n<s?-1:0})),i}async function u(e,t){const r=(0,o.c)(e);try{return await(0,n.r)(`${r}community/groups`,t)}catch(e){return}}async function d(e,t){const r=(0,o.c)(e);return await(0,s.f)(`${r}community/groups`,t)}async function p(e){const t=(0,o.c)(e);try{return(await(0,n.r)(`${t}portals/self/trustedOrgs`,{num:100})).trustedOrgs.filter((e=>e.from.established>-1&&e.to.established>-1)).sort(((e,t)=>e.to.name>t.to.name?1:e.to.name<t.to.name?-1:0))}catch(e){return[]}}async function h(e){const t=(0,o.c)(e);return await(0,s.f)(`${t}portals/self/contacts`,{type:"collaboration",collaborators:!0},"users")}async function v(e,t){var r,s;const i=(0,o.c)(e);try{return(null===(s=null===(r=(await(0,n.r)(`${i}community/users`,{searchUserAccess:"groupMember",groups:t,countFields:"accountid",num:0,countSize:200})).aggregations.counts)||void 0===r?void 0:r[0])||void 0===s?void 0:s.fieldValues)||[]}catch(e){return[]}}async function f(e){var t,r,s;const i=(0,o.c)(e);try{const[e,o,a,c]=await Promise.all([(0,n.r)(`${i}portals/self/idp`),(0,n.r)(`${i}portals/self/idp/federation`),(0,n.r)(`${i}portals/self/oidc`),(0,n.r)(`${i}portals/self/socialProviders`)]);return{hasSAML:Boolean((null==e?void 0:e.id)?e:(null==o?void 0:o.id)?o:null),socialProviders:null===(t=null==c?void 0:c.config)||void 0===t?void 0:t.providers,oidcId:null===(s=null===(r=null==a?void 0:a.oidcProviders)||void 0===r?void 0:r[0])||void 0===s?void 0:s.id}}catch(e){return{hasSAML:!1}}}async function m(e){const t=(0,o.c)(e);try{const e=await(0,n.r)(`${t}portals/self/purchases`),r=g(e.purchases),o=g(e.trials),s=[...r,...o];return s.sort(((e,t)=>{const r=e.title.toLowerCase(),o=t.title.toLowerCase();return r>o?1:r<o?-1:0})),s}catch(e){return[]}}function g(e){const t=[];return e.forEach((({listing:e,provision:r})=>{var o;(null==e?void 0:e.type.includes("Application"))&&(null===(o=null==r?void 0:r.orgEntitlements)||void 0===o?void 0:o.entitlements)&&t.push({id:e.itemId,title:e.title})})),t}},69773:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>a,g:()=>l,i:()=>n,o:()=>i});var o=r(78613);const n=e=>"item-browser"===e.state.type,s=(e,t,r)=>{t.onChange("filters",(t=>{t[e]&&t[e].value||r()}))},i=(e,t)=>{e.onChange("preview",(e=>{t()}))},a=(e,t)=>{e.onChange("groupId",(e=>{t()}))},c=new Map;function l(e,t){const r=c.get(e);if(r)return r;const n=(0,o.c)(e,t);return n?(c.set(e,n.store),n.store):null}},32023:(e,t,r)=>{r.d(t,{g:()=>s,o:()=>i});var o=r(11935),n=r(69773);function s(e){return(0,n.g)(e,"arcgis-member-browser")}(0,o.c)({type:"member-browser",includeExternalUsers:!1});const i=(e,t)=>{e.onChange("sort",(e=>{t(e)}))}}}]);