/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8de064.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8de064"],{99004:(t,e,r)=>{r.d(e,{c:()=>o,g:()=>n});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}},34630:(t,e,r)=>{r.r(e),r.d(e,{arcgis_member_browser_filter_partner_collabs:()=>c});var o=r(7263),n=r(32023),i=r(31670),a=r(46143),s=r(52042);r(11935),r(69773),r(78613),r(94788),r(46581),r(28926),r(70506),r(99004),r(65215),r(93816);const c=class{constructor(t){(0,o.r)(this,t),this.arcgisMemberBrowserFilter=(0,o.c)(this,"arcgisMemberBrowserFilter",7),this.arcgisMemberBrowserCoordinatorsSwitchCange=(0,o.c)(this,"arcgisMemberBrowserCoordinatorsSwitchCange",7),this.loadData=async()=>{await this.loadPartnerCollaborations(),await this.loadCoordinators()},this.loadPartnerCollaborations=async()=>{var t;const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{},r=null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.subscriptionInfo;!this.partnerCollaborations&&r&&(0,s.c)(e)&&(this.partnerCollaborations=await(0,a.c)(e),this.partnerCollaborations.sort(((t,e)=>t.to.name>e.to.name?1:t.to.name<e.to.name?-1:0)))},this.loadCoordinators=async()=>{var t;const{portal:e}=null!==i.c&&void 0!==i.c?i.c:{},r=null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.subscriptionInfo;!this.coordinators&&r&&(0,s.c)(e)&&(this.coordinators=await(0,a.d)(e),this.store.state.collaborationCoordinators=this.coordinators)},this.handleSwitchChange=t=>{const e=t.target;this.store.state.coordinatorsOnly=e.checked,this.arcgisMemberBrowserCoordinatorsSwitchCange.emit({checked:t.target.checked})},this.partnerOrgId=void 0,this.expanded=void 0,this.partnerCollaborations=void 0,this.coordinators=void 0}componentWillLoad(){this.store=(0,n.g)(this.el),this.i18n=this.store.state.i18n.filterPartnerCollabs}componentDidLoad(){this.loadData(),(0,i.o)("portal",this.loadData)}getEventDetail(){var t;const{partnerOrgId:e}=this;if(!e)return{id:"partnerOrg",param:"orgid",value:"",label:""};const r=null===(t=this.partnerCollaborations)||void 0===t?void 0:t.find((t=>t.to.orgId===e));return{id:"partnerOrg",param:"orgid",value:r.to.orgId,label:this.i18n.label.replace("${name}",r.to.name)}}async emitEvent(){const t=await this.getEventDetail();this.arcgisMemberBrowserFilter.emit(t)}render(){var t,e,r;const{portal:n}=i.c;return n&&(null===(t=this.partnerCollaborations)||void 0===t?void 0:t.length)&&(0,s.c)(n)&&this.store.state.includeExternalUsers?(0,o.h)("div",null,(null===(e=this.store.state.collaborationCoordinators)||void 0===e?void 0:e.length)>0&&(0,o.h)("calcite-label",{layout:"inline",class:"switch-label",style:{"padding-top":"1rem"}},(0,o.h)("span",{class:"switch-label-text"},this.i18n.coordinatorsOnly," ",(0,o.h)("calcite-icon",{id:"coordinators-only-icon",scale:"s",icon:"information"}),(0,o.h)("calcite-tooltip",{referenceElement:"coordinators-only-icon"},(0,o.h)("p",null,this.i18n.coordinatorsDescription))),(0,o.h)("calcite-switch",{checked:this.store.state.coordinatorsOnly,onCalciteSwitchChange:this.handleSwitchChange})),(0,o.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.partnerOrgId,onArcgisBrowserFilterRemove:()=>{this.partnerOrgId=null},filterID:"partnerOrg"},(0,o.h)("div",{class:"tree-wrapper"},(0,o.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:t=>{var e;const r=(null===(e=t.target.selectedItems)||void 0===e?void 0:e[0].dataset.partnerOrg)||"";this.partnerOrgId===r?this.partnerOrgId=null:this.partnerOrgId=r,this.emitEvent()}},null===(r=this.partnerCollaborations)||void 0===r?void 0:r.map((t=>(0,o.h)("calcite-tree-item",{key:t.to.orgId,"data-partner-org":t.to.orgId,selected:t.to.orgId===this.partnerOrgId},(0,o.h)("a",null,t.to.name)))))))):null}get el(){return(0,o.d)(this)}};c.style=".switch-label-text{margin-inline-end:0.5rem;display:flex;flex:1 1 0%;align-items:center}.switch-label{padding-top:1rem;padding-bottom:0.25rem;border-top:1px solid var(--calcite-ui-border-1)}.tree-wrapper{max-height:14rem;overflow:auto}"},70506:(t,e,r)=>{r.d(e,{e:()=>i});var o,n=r(99004),i={exports:{}};o=i.exports,n.c,function(t){var e={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",o="next";function n(t){if(t.toLowerCase()===o)return o;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function i(t){return void 0===t&&(t=r),"https://js.arcgis.com/".concat(t,"/")}function a(t){void 0===t&&(t=r);var e=i(t),a=n(t);if(a!==o&&3===a.major){var s=a.minor<=10?"js/":"";return"".concat(e).concat(s,"esri/css/esri.css")}return"".concat(e,"esri/themes/light/main.css")}function s(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}function c(t,e){if(e){var r=document.querySelector(e);r.parentNode.insertBefore(t,r)}else document.head.appendChild(t)}function l(t){return document.querySelector('link[href*="'.concat(t,'"]'))}function d(t){return!t||n(t)?a(t):t}function u(t,e){var r=d(t),o=l(r);return o||c(o=s(r),e),o}var h={};function p(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}function v(t,e,r){var o;r&&(o=m(t,r));var n=function(){e(t),t.removeEventListener("load",n,!1),o&&t.removeEventListener("error",o,!1)};t.addEventListener("load",n,!1)}function m(t,e){var r=function(o){e(o.error||new Error("There was an error attempting to load ".concat(t.src))),t.removeEventListener("error",r,!1)};return t.addEventListener("error",r,!1),r}function f(t){void 0===t&&(t={}),h=t}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var t=window.require;return t&&t.on}function y(t){void 0===t&&(t={});var r={};[h,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}));var o=r.version,n=r.url||i(o);return new e.Promise((function(t,e){var i=g();if(i){var a=i.getAttribute("src");a!==n?e(new Error("The ArcGIS API for JavaScript is already loaded (".concat(a,")."))):w()?t(i):v(i,t,e)}else if(w())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&u(!0===s?o:s,r.insertCssBefore),v(i=p(n),(function(){i.setAttribute("data-esri-loader","loaded"),t(i)}),e),document.body.appendChild(i)}}))}function b(t){return new e.Promise((function(e,r){var o=window.require.on("error",r);window.require(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o.remove(),e(t)}))}))}function C(t,e){if(void 0===e&&(e={}),w())return b(t);var r=g(),o=r&&r.getAttribute("src");return!e.url&&o&&(e.url=o),y(e).then((function(){return b(t)}))}t.utils=e,t.loadModules=C,t.getScript=g,t.isLoaded=w,t.loadScript=y,t.setDefaultOptions=f,t.loadCss=u,Object.defineProperty(t,"__esModule",{value:!0})}(o)},28926:(t,e,r)=>{r.d(e,{l:()=>n});var o=r(70506);const n=async(t,e)=>(await o.e.exports.loadModules(t,e)).map((t=>t.__esModule&&t.default?t.default:t))},93816:(t,e,r)=>{r.d(e,{f:()=>n});var o=r(46581);async function n(t,e,r="results",n=!1){let i,a,s,c,l=1,d=[];e.start=l,e.num||(e.num=100);try{const u=await(0,o.r)(t,e);if(!(null==u?void 0:u[r]))return d;for(d=[...d,...u[r]],l=u.nextStart,i=u.total-d.length,a=Math.ceil(i/e.num),s=[],c=0;c<a;c++)if(e.start=l+c*e.num,n){const n=await(0,o.r)(t,e);(null==n?void 0:n[r])&&(d=[...d,...n[r]])}else s.push((0,o.r)(t,e));if(!n){(await Promise.all(s)).forEach((t=>{d=[...d,...t[r]]}))}return d}catch(t){return d}}},46143:(t,e,r)=>{r.d(e,{a:()=>a,b:()=>s,c:()=>h,d:()=>p,e:()=>v,f:()=>c,g:()=>f,h:()=>m,i:()=>l,j:()=>d,k:()=>u});var o=r(94788),n=r(46581),i=r(93816);async function a(t){const e=(0,o.c)(t);return await(0,i.f)(`${e}portals/self/userLicenseTypes`,{num:10},"userLicenseTypes")}async function s(t){const e=(0,o.c)(t),r=await(0,i.f)(`${e}portals/self/roles`,{returnPrivileges:!0},"roles");return r.sort(((t,e)=>{const r=t.name.toLowerCase(),o=e.name.toLowerCase();return r>o?1:r<o?-1:0})),r}async function c(t,e){const r=(0,o.c)(t);let a;try{a=(await(0,n.r)(`${r}community/groups/${e}/userlist`,{num:0})).owner}catch(t){}return{admins:await(0,i.f)(`${r}community/groups/${e}/userlist`,{memberType:"admin"},"users"),owner:null==a?void 0:a.username}}async function l(t,e){const r=(0,o.c)(t),i=await(0,n.r)(`${r}community/users/${e}`),a=(null==i?void 0:i.groups)||[];return a.sort(((t,e)=>{const r="owner"===t.userMembership.memberType?1:-1,o="owner"===e.userMembership.memberType?1:-1,n=t.title.toLowerCase(),i=e.title.toLowerCase();return r!==o?o-r:n>i?1:n<i?-1:0})),a}async function d(t,e){const r=(0,o.c)(t);try{return await(0,n.r)(`${r}community/groups`,e)}catch(t){return}}async function u(t,e){const r=(0,o.c)(t);return await(0,i.f)(`${r}community/groups`,e)}async function h(t){const e=(0,o.c)(t);try{return(await(0,n.r)(`${e}portals/self/trustedOrgs`,{num:100})).trustedOrgs.filter((t=>t.from.established>-1&&t.to.established>-1)).sort(((t,e)=>t.to.name>e.to.name?1:t.to.name<e.to.name?-1:0))}catch(t){return[]}}async function p(t){const e=(0,o.c)(t);return await(0,i.f)(`${e}portals/self/contacts`,{type:"collaboration",collaborators:!0},"users")}async function v(t,e){var r,i;const a=(0,o.c)(t);try{return(null===(i=null===(r=(await(0,n.r)(`${a}community/users`,{searchUserAccess:"groupMember",groups:e,countFields:"accountid",num:0,countSize:200})).aggregations.counts)||void 0===r?void 0:r[0])||void 0===i?void 0:i.fieldValues)||[]}catch(t){return[]}}async function m(t){var e,r,i;const a=(0,o.c)(t);try{const[t,o,s,c]=await Promise.all([(0,n.r)(`${a}portals/self/idp`),(0,n.r)(`${a}portals/self/idp/federation`),(0,n.r)(`${a}portals/self/oidc`),(0,n.r)(`${a}portals/self/socialProviders`)]);return{hasSAML:Boolean((null==t?void 0:t.id)?t:(null==o?void 0:o.id)?o:null),socialProviders:null===(e=null==c?void 0:c.config)||void 0===e?void 0:e.providers,oidcId:null===(i=null===(r=null==s?void 0:s.oidcProviders)||void 0===r?void 0:r[0])||void 0===i?void 0:i.id}}catch(t){return{hasSAML:!1}}}async function f(t){const e=(0,o.c)(t);try{const t=await(0,n.r)(`${e}portals/self/purchases`),r=g(t.purchases),o=g(t.trials),i=[...r,...o];return i.sort(((t,e)=>{const r=t.title.toLowerCase(),o=e.title.toLowerCase();return r>o?1:r<o?-1:0})),i}catch(t){return[]}}function g(t){const e=[];return t.forEach((({listing:t,provision:r})=>{var o;(null==t?void 0:t.type.includes("Application"))&&(null===(o=null==r?void 0:r.orgEntitlements)||void 0===o?void 0:o.entitlements)&&e.push({id:t.itemId,title:t.title})})),e}},69773:(t,e,r)=>{r.d(e,{a:()=>i,b:()=>s,g:()=>l,i:()=>n,o:()=>a});var o=r(78613);const n=t=>"item-browser"===t.state.type,i=(t,e,r)=>{e.onChange("filters",(e=>{e[t]&&e[t].value||r()}))},a=(t,e)=>{t.onChange("preview",(t=>{e()}))},s=(t,e)=>{t.onChange("groupId",(t=>{e()}))},c=new Map;function l(t,e){const r=c.get(t);if(r)return r;const n=(0,o.c)(t,e);return n?(c.set(t,n.store),n.store):null}},32023:(t,e,r)=>{r.d(e,{g:()=>i,o:()=>a});var o=r(11935),n=r(69773);function i(t){return(0,n.g)(t,"arcgis-member-browser")}(0,o.c)({type:"member-browser",includeExternalUsers:!1});const a=(t,e)=>{t.onChange("sort",(t=>{e(t)}))}},52042:(t,e,r)=>{function o(t){var e;const r=null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.subscriptionInfo;return r&&["Organizational Plan","Community","In House","ConnectED","ELA","Education Site License","Education","HUP Online Entitlement","Demo and Marketing"].includes(r.type)}r.d(e,{c:()=>o})}}]);