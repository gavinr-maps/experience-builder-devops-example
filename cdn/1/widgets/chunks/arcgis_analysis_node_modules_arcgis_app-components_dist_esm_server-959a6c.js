/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_server-959a6c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_server-959a6c"],{71700:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>s,c:()=>i,d:()=>r});const r=(0,n(11935).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),o=r.state,i=r.state,s=r.state},8045:(e,t,n)=>{n.d(t,{a:()=>o,f:()=>i,s:()=>l});var r=n(11246);const o=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",i=e=>{const t=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,r.b)(t(e)):(0,r.b)(e.flatMap((e=>[...t(e)]))):[]},s=async e=>new Promise(((t,n)=>{for(let r=0;r<e.length;r++)e[r].then((n=>{const o=[...e];o.splice(r,1),t({remainingPromises:o,result:n})})).catch(n)}));async function l(e,t){var n,r;const o=[],{getBatchSize:i,onPromiseCompleted:l,onPromiseThrow:u,shouldContinue:a}=null!=t?t:{};let c=[];for(let t=0;t<(null!==(n=null==i?void 0:i())&&void 0!==n?n:1);t++)try{const t=e();t&&c.push(t)}catch(e){null==u||u(e)}let d=null;for(;c.length>0&&(!a||a(d));)try{const{remainingPromises:t,result:n}=await s(c);c=t,d=n,n&&o.push(n),null==l||l(n);const u=null!==(r=null==i?void 0:i())&&void 0!==r?r:1;for(;c.length<u;){const t=e();if(t&&c.push(t),null==t)break}}catch(e){null==u||u(e)}return o}},2174:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>s,c:()=>c,d:()=>d,e:()=>p,f:()=>f,g:()=>k,h:()=>y,i:()=>u,j:()=>h,k:()=>$,l:()=>w,m:()=>j,n:()=>b,o:()=>m,p:()=>g,q:()=>v,u:()=>a});var r=n(28926),o=n(94788);function i(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function s(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function l(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function u(e,t){return e.owner===t.username}function a(e,t){return u(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,o="admin"===e.itemControl,i=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!u(e,t)&&o&&r.includes("esri_")&&!i.includes(r))return!1;return o}(e,t)}const c=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),d=(e,t)=>`${(0,o.a)(t)}item.html?id=${e}`,p=(e,t)=>`${(0,o.g)(t)}/content/users/${e}`,v=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{});function m(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Spatiotemporal")}function f(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("View Service")}function y(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Hosted Service")}function w(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Multi Services View")}function g(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function h(e){var t;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const i=n.portal,[s]=await(0,r.l)(["esri/request"]);if(null==i?void 0:i.user){return s(`${(0,o.g)(i)}community/users/${i.user.username}`,{query:{f:"json",token:null===(t=n.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,n;const r=null!==(n=null===(t=e.data)||void 0===t?void 0:t.groups)&&void 0!==n?n:[];return Promise.resolve(r)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function $(e){var t;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const i=n.portal,[s]=await(0,r.l)(["esri/request"]);return s(`${(0,o.g)(i)}content/items/${n.id}/groups`,{query:{f:"json",token:null===(t=n.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,n,r,o,i,s;const l=[...null!==(n=null===(t=e.data)||void 0===t?void 0:t.admin)&&void 0!==n?n:[],...null!==(o=null===(r=e.data)||void 0===r?void 0:r.member)&&void 0!==o?o:[],...null!==(s=null===(i=e.data)||void 0===i?void 0:i.other)&&void 0!==s?s:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function b(e,t,{relationshipType:n,direction:i}){const s=`${(0,o.g)(t)}content/items/${e}/relatedItems`,[l]=await(0,r.l)(["esri/request"]);return await l(s,{query:{f:"json",relationshipType:n,direction:i},method:"get",responseType:"json"})}function j(e,t){return null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>e.id===t.id&&e.capabilities.includes("updateitemcontrol")))))}const k=(e,t)=>`${t}/content/items/${e}`},51325:(e,t,n)=>{n.d(t,{a:()=>r,i:()=>o});const r=(0,n(11935).c)({title:"",snippet:"",tags:[],categories:[]}),o=r.state},50852:(e,t,n)=>{n.d(t,{a:()=>b,b:()=>_,c:()=>x,d:()=>C,e:()=>j,f:()=>y,g:()=>$,h:()=>w,i:()=>g,j:()=>S,k:()=>h,l:()=>U,m:()=>k,n:()=>f,o:()=>m,p:()=>P,s:()=>O,u:()=>I});var r=n(7652),o=n(31670),i=n(2174),s=n(94788),l=n(65215),u=n(51325),a=n(71700),c=n(99907),d=n(8045),p=n(86537),v=n(46581);function m(e){return(null==e?void 0:e.id)===(null==e?void 0:e.username)}function f(e){return["all","recycle"].includes(null==e?void 0:e.id)||m(e)}function y({title:e,snippet:t,tags:n}){return{title:e,snippet:t,tags:(0,d.f)(n).join(",")}}const w=(e,t,n)=>{var r,o;const{file:i,type:s,extension:l,dataUrl:u,properties:a,typeKeywords:c,existingItem:d}=t,v=y(e);if(n){const e=d;v.title=(null===(r=null==e?void 0:e.sourceData)||void 0===r?void 0:r.title)||e.title||v.title||""}const m=[...null===(o=p.a[s])||void 0===o?void 0:o.typeKeywords,...c?[c]:[],l].join(", "),f=Object.assign({type:s,extension:l},a?{properties:JSON.stringify(a)}:{}),w=i?{file:i}:{dataUrl:u.includes('httpHeaders={"Authorization"')?u:encodeURI(u)};return Object.assign(Object.assign(Object.assign(Object.assign({},f),w),v),{typeKeywords:m})},g=(e,t,n)=>{const r=!!n,o=!!t.addAsUniqueFile,i=w(e,t,r),s=new FormData;return s.append("f","json"),s.append("async","true"),Object.keys(i).forEach((e=>{if(o&&"file"===e){const n=t.fileName;s.append(e,i[e],n)}else s.append(e,i[e])})),s},h=(e,t)=>{const n=(null==t?void 0:t.id)&&!f(t)?`/${t.id}`:"";return`${e.userContentUrl}${n}/addItem`},$=(e,t)=>`${(0,s.g)(t)}content/items/${e}`,b=async(e,t)=>{try{const n=$(e,t);return{result:await(0,v.r)(n)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},j=async(e,t)=>{const n=new FormData;switch(t.type){case"base64":n.append("data",t.data);break;case"url":n.append("url",t.url);break;case"file":n.append("file",t.file)}return n.append("f","json"),n.append("token",(0,l.g)(o.c.portal)),await(0,v.a)(`${(0,s.g)()}content/users/${o.c.user.username}/items/${e}/updateThumbnail`,n,{},"post")};async function k(e,t){const n=`${o.c.user.userContentUrl}/moveItems`;return await(0,v.r)(n,{items:e,folder:t},{},"post")}async function C(e,{permanentDelete:t=!1}={},n){null!=n||(n=o.c.user);const r=`${n.userContentUrl}/items/${e}/delete`;return await(0,v.r)(r,{permanentDelete:t},{},"post")}async function I(e,t,n){var i;const s=null!==(i=null!=n?n:o.c.user)&&void 0!==i?i:o.c.portal.user,l=`${"append"===(null===c.u||void 0===c.u?void 0:c.u.workflow)?(0,r.g)({username:a.a.existingItem.owner},o.c.portal):s.userContentUrl}/items/${e}/update`;return(0,v.r)(l,t,{},"post")}const P=async(e,t)=>{try{const n=`${(0,s.g)(t)}content/items/${e}/data`;return{result:await(0,v.r)(n)}}catch(e){return{error:{code:"unhandledError"}}}},S=async(e,t,n)=>{const r=o.c.user,i=`${"append"===c.u.workflow?t.existingItem.itemOwner.userContentUrl:r.userContentUrl}/items/${e}/commit`,s=g(u.i,t,!!n);s.delete("file");return await(0,v.a)(i,s,{},"post")},U=async(e,t)=>{const n=o.c.user,r=`${t?(0,i.e)(t,o.c.portal):n.userContentUrl}/items/${e}/cancel`;return await(0,v.r)(r,{},{},"post")},_=async e=>{const t=h(o.c.user,u.i.folder),n=y(u.i),r=Object.assign({},e);return delete r.initialFolders,delete r.initialTitle,delete r.newItemMode,delete r.serviceInfo,delete r.allowStoredAuth,delete r.isSecured,delete r.checkAuth,delete r.agsType,delete r.developerCredentialsType,delete r.applicationEnvironment,delete r.apiKeyReferrerUrls,delete r.developerCredentialsRedirectUrls,delete r.developerPrivileges,delete r.selectedAppPrivileges,delete r.selectedItemPrivileges,delete r.formattedItemPrivileges,await(0,v.r)(t,Object.assign(Object.assign(Object.assign(Object.assign({},r),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),n),{},"post")};async function O(e,t,n,r,l,u){null!=l||(l=o.c.user),null!=u||(u=o.c.portal);const a=n&&n.id!==l.username?n.id:"root",c=e.replace(`.${r}`,"");if("featurecollection"===r||"Microsoft Excel"===t)return null;const d=[`title: "${c}"`,`type: "${t}"`,`owner: "${l.username}"`,`ownerfolder: "${a}"`],p=await(0,v.r)(`${(0,s.g)(u)}search`,{filter:d.join(" AND "),num:1});return(null==p?void 0:p.total)>0?{num:p.num,itemURLList:p.results.map((e=>(0,i.d)(e.id,o.c.config.baseUrl)))}:null}async function x(e,t){const n=(0,d.a)(e),{user:r,config:l,portal:a}=o.c,{folder:c}=u.i,p=c&&c.id!==r.username?c.id:"root",m=[`owner: "${r.username}"`,`ownerfolder: "${p}"`];t&&m.push(`type: "${t}"`);let f,y=1;for(let e=0;e<10&&!f&&y>-1;e++){const{nextStart:e,results:t}=await(0,v.r)(`${(0,s.g)()}search`,{[a.isPortal?"q":"filter"]:m.join(" AND "),num:100,start:y});f=t.find((e=>e.name===n)),y=e}return f?(0,i.d)(f.id,l.baseUrl):null}},99907:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>o});const r=(0,n(11935).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),o=r.state},7652:(e,t,n)=>{n.d(t,{a:()=>d,b:()=>u,c:()=>m,d:()=>a,e:()=>p,f:()=>v,g:()=>c,h:()=>s,u:()=>f});var r=n(46581),o=n(31670),i=n(94788);async function s(e,t){return(0,r.r)(`${(0,i.g)(t)}/community/users/${e}`)}async function l(){return(0,r.r)(`${(0,i.g)()}/community/self`)}async function u(e,t){var n;if(null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.user),!e)return[];const i=await(0,r.f)((()=>l()),"communitySelf",e.username);return(null!==(n=null==i?void 0:i.groups)&&void 0!==n?n:[]).sort(((e,n)=>{var r;return null===(r=e.title)||void 0===r?void 0:r.localeCompare(n.title,t||"en",{sensitivity:"base"})}))}async function a(){const e=null===o.c||void 0===o.c?void 0:o.c.user;if(!e)return null;return(await(0,r.f)((()=>l()),"communitySelf",e.username)).favGroupId}function c(e,t){var n;return null!==(n=null==e?void 0:e.userContentUrl)&&void 0!==n?n:`${(0,i.g)(t)}content/users/${e.username}`}async function d(e){var t;const n=null!==(t=null!=e?e:o.c.user)&&void 0!==t?t:o.c.portal.user,i=await async function(e){var t;const n=c(null!==(t=null!=e?e:o.c.user)&&void 0!==t?t:o.c.portal.user,o.c.portal);try{return await(0,r.r)(n,{num:1})}catch(e){return null}}(n);if(!i)return null;const{folders:s}=i,{username:l}=n;return[{username:l,id:l,title:l,created:"now"},...s.sort(((e,t)=>e.title.localeCompare(t.title)))]}async function p(e,t){var n;const r=null!==(n=null!=t?t:o.c.user)&&void 0!==n?n:o.c.portal.user,i=await d(r);return null==i?void 0:i.find((t=>t.id===e))}function v(e){return{username:e,id:e,title:e,created:"now"}}async function m(e,t){var n,i;try{const i=`${c(null!==(n=null!=t?t:o.c.user)&&void 0!==n?n:o.c.portal.user,o.c.portal)}/createFolder`;return{result:await(0,r.r)(i,{title:e},{},"post")}}catch(e){return console.error(e),(null===(i=e.details)||void 0===i?void 0:i.messages).some((e=>e.includes("not available")))?{error:{code:"folderNameExists"}}:{error:{code:"unhandledError"}}}}async function f(e,t,n){var i;const s=`${c(null!==(i=null!=n?n:o.c.user)&&void 0!==i?i:o.c.portal.user,o.c.portal)}/${e}/updateFolder`;try{const e=await(0,r.r)(s,{newTitle:t},{},"post");return e.error?{error:{code:"unhandledError"}}:{result:e}}catch(e){return{error:{code:"unhandledError"}}}}}}]);