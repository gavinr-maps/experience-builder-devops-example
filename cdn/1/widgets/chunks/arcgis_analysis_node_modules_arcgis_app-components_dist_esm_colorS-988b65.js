/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-988b65.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-988b65"],{96533:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>v,c:()=>r,d:()=>p,e:()=>I,f:()=>d,g:()=>g,h:()=>u,i:()=>S,j:()=>h,k:()=>f,l:()=>z,m:()=>m,n:()=>b,s:()=>c});n(77040),n(70506);var l=n(82646),s=n(96432),o=n(1991),a=n(64391);function r(e){var i,n;const{layer:s,useFeatureReduction:a,mapImageSublayer:r,mapView:t,supportsArcade:d,modules:u}=l.s,f=s;if(r&&!d)return function(e){var i,n;const{layer:s,useFeatureReduction:a,mapImageSublayer:r,mapView:t,modules:d}=l.s,u=s;e=e||{};const f=(0,l.p)((0,l.b)()),c=null===(i=e.fieldInfos)||void 0===i?void 0:i[0];return d.SizeCreator.createClassBreaksRenderer({layer:u,view:t,field:null==c?void 0:c.field,valueExpression:null==c?void 0:c.expression,valueExpressionTitle:null==c?void 0:c.expressionTitle,normalizationField:void 0,classificationMethod:e.classificationMethod?e.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===e.classificationMethod?e.standardDeviationInterval?e.standardDeviationInterval:1:void 0,numClasses:e.numClasses?e.numClasses:4,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,l.D)()),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)&&a}).then((e=>((0,l.o)(f,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}(e);const m=(0,l.b)(),b=m.authoringInfo,z=(0,l.J)(m,"reference-size"),v=(0,l.a)();e=e||{};const p=(0,l.p)((0,l.b)()),I=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],g=e.theme?e.theme:z?"reference-size":void 0,h={layer:f,view:t,field:null==I?void 0:I.field,theme:g,valueExpression:null==I?void 0:I.expression,valueExpressionTitle:null==I?void 0:I.expressionTitle,normalizationField:e.normalizationField,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,l.D)()),sizeOptimizationEnabled:!r&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=f.featureReduction)||void 0===n?void 0:n.type)&&a,referenceSizeOptions:e.theme&&"reference-size"!==e.theme||!(null==I?void 0:I.field)?void 0:(0,o.i)(e.referenceSizeOptions)?e.referenceSizeOptions:z?{symbolStyle:z.referenceSizeSymbolStyle}:void 0};return u.SizeCreator.createContinuousRenderer(h).then((i=>{const n=(0,l.J)(i.renderer,"reference-size");if(!e.noReuse&&c(e)&&["size","color-size","type-size","relationship-size"].indexOf(v)>-1&&b&&"above-and-below"!==b.univariateTheme&&!(0,o.i)(n)&&!(0,o.i)(z)){const e=(0,l.b)().clone(),n=(0,l.d)(e,"size"),s=(0,l.J)(e,"size"),o=(0,l.d)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[s],(0,l.S)(i.renderer)}return(0,l.o)(p,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i;const{layer:n,mapImageSublayer:s,mapView:a,modules:r}=l.s,t=n,d=(0,l.b)().authoringInfo,u=(0,l.a)();e=e||{};const f=(0,l.p)((0,l.b)()),m=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],b=e.theme?e.theme:"high-to-low",z={layer:t,view:a,startTime:null==m?void 0:m.field,endTime:new Date,theme:b,unit:void 0,outlineOptimizationEnabled:!s&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,l.D)()),sizeOptimizationEnabled:!0,legendOptions:e.legendOptions,defaultSymbolEnabled:!1};return r.SizeCreator.createAgeRenderer(z).then((i=>{if(c(e)&&["size-age","color-size-age","type-size-age"].indexOf(u)>-1&&d&&"above-and-below"!==(null==d?void 0:d.univariateTheme)){const e=(0,l.b)().clone(),n=(0,l.d)(e,"size"),s=(0,l.J)(e,"size"),o=(0,l.d)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[s],(0,l.S)(i.renderer)}return(0,l.o)(f,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function d(e){var i,n,s,a;const{layer:r,useFeatureReduction:t,mapImageSublayer:d,mapView:u,supportsArcade:c,modules:m}=l.s,b=r;if(d&&!c)return f(e);e=e||{};const z=(0,l.b)(),v=z.authoringInfo||{},p=(0,l.a)(),I=(0,l.d)(z,"size"),g=(0,l.J)(z,"size"),h=(0,l.J)(z,"reference-size"),S=(0,l.p)(z);let y;if(["type-size","relationship-size"].indexOf(p)>-1){const e=(0,l.b)();y=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,l.q)(p)}else y=z.classBreakInfos&&z.classBreakInfos.length?z.classBreakInfos[z.classBreakInfos.length-1].symbol:(0,l.q)(p);const x=z.defaultSymbol,O=z.defaultLabel,V=z.backgroundFillSymbol,E=(0,o.i)(e.referenceSizeOptions)?"reference-size":e.theme?e.theme:g&&!h?g.theme:h?"reference-size":"high-to-low";let k=!1;if(I)E===I.theme&&(k=I.minSize.stops?I.minSize.stops[0].size>I.maxSize.stops[0].size:I.minSize>I.maxSize);else if(!h){const e=z.classBreakInfos[0].symbol,i=z.classBreakInfos[z.classBreakInfos.length-1].symbol,n=(0,l.X)(e),s=(0,l.X)(i);k=n>s}if(e.fieldInfos&&e.fieldInfos[0]&&I&&e.fieldInfos[0].field===I.field&&e.fieldInfos[0].expression===I.valueExpression&&e.normalizationField===I.normalizationField&&(delete e.fieldInfos,(0,l.V)(e))){const e=z.clone();return e.visualVariables=(0,l.T)(z,"color"),Promise.resolve({renderer:e})}const T=e.fieldInfos&&e.fieldInfos[0]?e.fieldInfos[0]:I?{field:I.field,expression:I.valueExpression,expressionTitle:I.valueExpressionTitle,simpleFieldType:l.w.NUMBER}:h?{field:h.field,simpleFieldType:l.w.NUMBER}:{field:z.field,expression:z.valueExpression,expressionTitle:z.valueExpressionTitle,simpleFieldType:l.w.NUMBER},B=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:I?I.normalizationField:h?h.normalizationField:z.normalizationField;let F=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0]||"manual"===v.classificationMethod&&!e.theme||"equal-interval"===v.classificationMethod)&&(F=!0);const j=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:F?void 0:I?null==g?void 0:g.minSliderValue:h?h.minSliderValue:z.classBreakInfos[0].minValue,P=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:F?void 0:I?null==g?void 0:g.maxSliderValue:h?h.maxSliderValue:z.classBreakInfos[z.classBreakInfos.length-1].maxValue,w={layer:b,view:u,theme:E,field:T.field,valueExpression:T.expression,valueExpressionTitle:T.expressionTitle,normalizationField:B,minValue:j,maxValue:P,outlineOptimizationEnabled:!d&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!S.sizeOutlineVisVar),sizeOptimizationEnabled:!d&&(!I||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof(null==I?void 0:I.minSize))),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==I?void 0:I.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(s=z.legendOptions)||void 0===s?void 0:s.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!z.defaultSymbol,forBinning:"binning"===(null===(a=b.featureReduction)||void 0===a?void 0:a.type)&&t,referenceSizeOptions:e.theme&&"reference-size"!==e.theme?void 0:(0,o.i)(e.referenceSizeOptions)?e.referenceSizeOptions:h?{symbolStyle:h.referenceSizeSymbolStyle}:void 0};return m.SizeCreator.createContinuousRenderer(w).then((i=>{var n,s;const o=(0,l.J)(i.renderer,"reference-size"),a=(null==h?void 0:h.referenceSizeSymbolStyle)!==(null==o?void 0:o.referenceSizeSymbolStyle);if(e.referenceSizeOptions||h||(i.renderer.authoringInfo.visualVariables=(0,l.U)(i.renderer,"reference-size")||[]),e.discardMinMax&&!h&&!o){const e=(0,l.d)(z,"size"),n=(0,l.d)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if(!e.fieldInfos&&void 0===e.normalizationField&&I&&!o&&E===(null==I?void 0:I.theme)){const e=(0,l.d)(i.renderer,"size");e.minDataValue=I.minDataValue,e.maxDataValue=I.maxDataValue}if(!h&&o&&(i.renderer.defaultLabel=void 0,i.renderer.defaultSymbol=void 0,i.renderer.backgroundFillSymbol=void 0),["color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size","predominance-size"].indexOf(p)>-1){if(a)return Promise.resolve(i);z.visualVariables=(0,l.T)(z,"size")||[],z.visualVariables=(0,l.T)(z,"size","outline")||[],z.authoringInfo.visualVariables=(0,l.U)(z,"size")||[],z.authoringInfo.visualVariables=(0,l.U)(z,"reference-size")||[];const e=(0,l.d)(i.renderer,"size");e&&z.visualVariables.push(e);const n=(0,l.d)(i.renderer,"size","outline");n&&z.visualVariables.push(n);const s=(0,l.J)(i.renderer,"size");return s&&z.authoringInfo.visualVariables.push(s),(0,l.S)(z),i.renderer=z.clone(),Promise.resolve(i)}if((0,l.o)(S,i.renderer),!a&&y&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=y),a&&y&&(null===(s=i.renderer.classBreakInfos)||void 0===s?void 0:s.length)){const e=(0,l.Q)(y);(0,l.W)(i.renderer.classBreakInfos[0].symbol,e)}if(!x||o&&!h||(i.renderer.defaultSymbol=x,i.renderer.defaultLabel=O),!V||o&&!h||(i.renderer.backgroundFillSymbol=V),k){const e=(0,l.d)(i.renderer,"size");if(e){const i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function u(e){var i,n,s;const{layer:a,mapImageSublayer:r,mapView:t,modules:d}=l.s,u=a;e=e||{};const f=(0,l.b)(),c=(0,l.a)(),m=(0,l.d)(f,"size"),b=(0,l.J)(f,"size"),z=(0,l.p)(f),v=e.startTime?e.startTime:b.startTime,p=e.endTime?e.endTime:b.endTime;let I;if(["type-size-age"].indexOf(c)>-1){const e=(0,l.b)();I=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,l.q)(c)}else I=f.classBreakInfos&&f.classBreakInfos.length?f.classBreakInfos[0].symbol:(0,l.q)(c);const g=f.defaultSymbol,h=f.defaultLabel,S=f.backgroundFillSymbol;let y=!1;if(m)y=m.minSize.stops?m.minSize.stops[0].size>m.maxSize.stops[0].size:m.minSize>m.maxSize,"below"===b.theme&&(y=!y);else{const e=f.classBreakInfos[0].symbol,i=f.classBreakInfos[f.classBreakInfos.length-1].symbol,n=(0,l.X)(e),s=(0,l.X)(i);y=n>s}if(e.fieldInfos&&e.fieldInfos[0]&&m&&e.fieldInfos[0].field===m.field&&(delete e.fieldInfos,(0,l.V)(e))){const e=f.clone();return e.visualVariables=(0,l.T)(f,"color"),Promise.resolve({renderer:e})}let x=!1;(e.startTime||e.endTime||e.units||e.fieldInfo||e.theme)&&(x=!0);const O=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:x?void 0:b?b.minSliderValue:f.classBreakInfos[0].minValue,V=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:x?void 0:b?b.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue,E={layer:u,view:t,theme:e.theme?e.theme:b?b.theme:"high-to-low",startTime:v,endTime:p,unit:e.units?e.units:b.units,minValue:O,maxValue:V,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&(!m||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof m.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==m?void 0:m.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(s=f.legendOptions)||void 0===s?void 0:s.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!f.defaultSymbol};return d.SizeCreator.createAgeRenderer(E).then((i=>{var n;if(e.discardMinMax){const e=(0,l.d)(f,"size"),n=(0,l.d)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if((0,l.J)(i.renderer,"size").field=b.field,!x){const e=(0,l.d)(i.renderer,"size");e.minDataValue=m.minDataValue,e.maxDataValue=m.maxDataValue}if(["color-size-age"].indexOf(c)>-1){f.visualVariables=(0,l.T)(f,"size")||[],f.visualVariables=(0,l.T)(f,"size","outline")||[],f.authoringInfo.visualVariables=(0,l.U)(f,"size")||[];const e=(0,l.d)(i.renderer,"size");f.visualVariables.push(e);const n=(0,l.J)(i.renderer,"size");f.authoringInfo.visualVariables.push(n);const s=(0,l.d)(i.renderer,"size","outline");return s&&f.visualVariables.push(s),(0,l.S)(f),i.renderer=f.clone(),Promise.resolve(i)}if((0,l.o)(z,i.renderer),I&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=I),g&&(i.renderer.defaultSymbol=g,i.renderer.defaultLabel=h),S&&(i.renderer.backgroundFillSymbol=S),y){const e=(0,l.d)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function f(e){var i;const{layer:n,useFeatureReduction:s,mapImageSublayer:a,mapView:r,modules:t}=l.s,d=n;e=e||{};const u=(0,l.b)(),f=(0,l.a)(),c=u.authoringInfo,m=(0,l.d)(u,"size"),b=(0,l.J)(u,"size"),z=(0,l.p)(u),v={field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:l.w.NUMBER};let p=e.fieldInfos?e.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:l.w.NUMBER}:v;const I=void 0!==e.normalizationField?e.normalizationField:m?m.normalizationField:u.normalizationField;let g;if(["type-size"].indexOf(f)>-1){const e=(0,l.b)();g=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,l.q)(f)}else g=u.classBreakInfos&&u.classBreakInfos.length?u.classBreakInfos[0].symbol:(0,l.q)(f);const h=u.defaultSymbol,S=u.defaultLabel,y=u.backgroundFillSymbol;let x=!1;if(u.classBreakInfos.length>1){const e=u.classBreakInfos[0].symbol,i=u.classBreakInfos[1].symbol,n=(0,l.X)(e)||0,s=(0,l.X)(i)||0;x=n>s}if(!m&&c&&(0,l.x)(p,v)&&I===u.normalizationField&&(delete e.fieldInfos,(0,l.V)(e))){const e=u.clone();return e.visualVariables=(0,l.T)(u,"color"),Promise.resolve({renderer:e})}const O=e.classificationMethod?e.classificationMethod:(null==c?void 0:c.classificationMethod)&&"manual"!==c.classificationMethod?c.classificationMethod:"equal-interval",V="standard-deviation"===O?e.standardDeviationInterval?e.standardDeviationInterval:c.standardDeviationInterval?c.standardDeviationInterval:1:void 0;let E=!0;!e.classificationMethod||e.classificationMethod===(null==c?void 0:c.classificationMethod)||"standard-deviation"!==e.classificationMethod&&"standard-deviation"!==(null==c?void 0:c.classificationMethod)||(E=!1);let k=!1;(void 0!==e.normalizationField||!(0,l.x)(p,v)||"equal-interval"!==O||(null==b?void 0:b.minSliderValue)||(null==b?void 0:b.maxSliderValue))&&(k=!0);const T=(0,o.i)(e.min)?e.min:k?void 0:b?b.minSliderValue:u.classBreakInfos[0].minValue,B=(0,o.i)(e.max)?e.max:k?void 0:b?b.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue;return t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:p.field,valueExpression:p.expression,valueExpressionTitle:p.expressionTitle,normalizationField:I,classificationMethod:O,standardDeviationInterval:V,numClasses:(0,o.i)(e.numClasses)?e.numClasses:m||!E?4:u.classBreakInfos.length,minValue:T,maxValue:B,outlineOptimizationEnabled:!a&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),legendOptions:e.legendOptions||u.legendOptions,defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&s}).then((e=>{if((0,l.o)(z,e.renderer),g&&e.renderer.classBreakInfos&&e.renderer.classBreakInfos.map((e=>{const i=g.clone();(0,l.Y)(i,(0,l.X)(e.symbol)),e.symbol=i})),h&&(e.renderer.defaultSymbol=h,e.renderer.defaultLabel=S),y&&(e.renderer.backgroundFillSymbol=y),x){const i=(0,l.d)(e.renderer,"size"),n=i.minSize;i.minSize=i.maxSize,i.maxSize=n}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function c(e){var i;const n=(0,l.b)().clone(),s=(0,l.a)();if(["size","size-age","color-size","color-size-age","color-age-size","type-size","type-size-age","relationship-size"].indexOf(s)>-1&&void 0===e.normalizationField){let o;const a=(0,l.d)(n,"size");if(a)if(["size-age","color-size-age","type-size-age"].indexOf(s)>-1){o={field:(0,l.J)(n,"size").field}}else o={field:a.field,expression:a.valueExpression,expressionTitle:a.valueExpressionTitle};else o={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,l.x)(null===(i=e.fieldInfos)||void 0===i?void 0:i[0],o))return!0}return!1}function m(){const{mapView:e,modules:i}=l.s,n=(0,l.b)(),s=(0,l.d)(n,"size"),o=(0,l.J)(n,"reference-size"),r=e.scale;let t;if(null==s?void 0:s.stops)t=i.esriLang.clone(s.stops);else if(null==o?void 0:o.sizeStops)o.referenceSizeScale&&(0,a.s)(),t=i.esriLang.clone(o.sizeStops);else{const{minSize:e,maxSize:n,minDataValue:l,maxDataValue:o}=s;let a,d;if("number"==typeof e)a=e,d=n;else{const i=e.stops.length-1;r>e.stops[i].value?(a=e.stops[i].size,d=n.stops[i].size):e.stops.forEach(((e,i)=>{r<=e.value&&(a=e.size,d=n.stops[i].size)}))}t=[new i.SizeStop({value:l,size:a}),new i.SizeStop({value:o,size:d})]}return t}function b(){return(0,l.b)().classBreakInfos.map((e=>{const i=e.symbol;return{min:e.minValue,max:e.maxValue,size:(0,l.X)(i)}}))}async function z(e){var i,n,s;const{layer:a,modules:r,useFeatureReduction:t,mapView:d}=l.s,u=(0,l.b)(),f=(0,l.J)(u,"reference-size");e=e||{};const c={layer:a,view:d,renderer:u.clone(),field:f.field,normalizationField:f.normalizationField,sizeStops:null!==(i=e.sizeStops)&&void 0!==i?i:r.esriLang.clone(f.sizeStops),forBinning:"binning"===(null===(n=a.featureReduction)||void 0===n?void 0:n.type)&&t,sizeOptimizationEnabled:(0,o.i)(f.referenceSizeScale),referenceSizeOptions:null!==(s=e.referenceSizeOptions)&&void 0!==s?s:{symbolStyle:f.referenceSizeSymbolStyle}};return await r.SizeCreator.updateRendererWithReferenceSize(c).then((e=>e),(e=>Promise.reject(e)))}function v(e){const i=(0,l.b)().authoringInfo,n=(0,l.a)(),s=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[s]})&&["color-size","color-age-size","type-size"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,l.d)((0,l.b)(),"size"))return y((0,l.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return r(Object.assign(Object.assign({},e),{fieldInfos:[s]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function p(e){const i=(0,l.b)().authoringInfo,n=(0,l.a)(),s=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[s]})&&["color-size","color-age-size","type-size"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,l.d)((0,l.b)(),"size"))return x((0,l.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return r(Object.assign(Object.assign({},e),{fieldInfos:[s]})).then((i=>x(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function I(e){const i=(0,l.b)().authoringInfo,n=(0,l.a)(),s=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[s]})&&["color-size-age","type-size-age"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,l.d)((0,l.b)(),"size"))return y((0,l.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return t(Object.assign(Object.assign({},e),{fieldInfos:[s]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function g(e,i){return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,s.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,l.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function h(e,i){return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,s.d)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,l.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function S(e,i){return e=e||{},u(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,s.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,l.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function y(e,i){const n=(0,l.b)(),o=n.authoringInfo,a=(0,l.a)(),r=(0,l.J)(n,"color");if((0,l.d)(n,"color")&&(0,s.s)(i)&&["color","color-size","color-size-age"].indexOf(a)>-1&&o&&"above-and-below"!==(null==o?void 0:o.univariateTheme)&&-1===["centered-on","extremes"].indexOf(null==r?void 0:r.theme)){const n=(0,l.b)().clone();if(O(n,e),2===i.fieldInfos.length){const e=n.authoringInfo;e.type=null,e.univariateTheme=null,e.univariateSymbolStyle=null}return Promise.resolve({renderer:n})}return(0,s.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(O(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function x(e,i){const n=(0,l.b)().authoringInfo,o=(0,l.a)();if((0,s.s)(i)&&["color-age","color-age-size"].indexOf(o)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)){const i=(0,l.b)().clone();return O(i,e),Promise.resolve({renderer:i})}return(0,s.a)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(O(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function O(e,i){var n;if(!e.authoringInfo)return;e.visualVariables=(0,l.T)(e,"size")||[],e.visualVariables=(0,l.T)(e,"size","auto")||[];const s=(0,l.d)(i,"size");(0,l.J)(i,"reference-size")||e.visualVariables.push(s),e.authoringInfo.visualVariables=(0,l.U)(e,"size")||[];const o=(0,l.J)(i,"size");e.authoringInfo.visualVariables.push(o);const a=(null===(n=i.classBreakInfos)||void 0===n?void 0:n.length)?i.classBreakInfos:i.uniqueValueInfos;let r=(null==a?void 0:a.length)?a[0].symbol:(0,l.q)("color-size");if("picture-marker"===r.type&&(r=(0,l.q)("color-size")),(0,l.D)()){e.classBreakInfos.map((e=>{const i=(0,l.Q)(e.symbol);e.symbol=r.clone(),(0,l.W)(e.symbol,i)})),e.backgroundFillSymbol=i.backgroundFillSymbol;const n=(0,l.d)(i,"size","outline");n&&e.visualVariables.push(n)}!function(e){const{modules:i}=l.s;"simple-line"===e.type?(e.color=[0,0,0,.5],e.width=1):"cim"===e.type?((0,l.W)(e,new i.esriColor([0,0,0,.5])),(0,l.Y)(e,4)):(e.color=null,e.outline.color=[0,0,0,.5],(0,l.Y)(e,4))}(r)}}}]);