"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_styl-237a5f"],{5619:(e,t,s)=>{s.r(t),s.d(t,{a:()=>i,g:()=>d,i:()=>l,s:()=>N,t:()=>o});var n=s(18758),r=s(59920);function o(e,t,s,r){const o=function(e,t,s){if(!e)return null;if(s&&"web-scene"===s.origin&&!(e instanceof n.A)&&!(e instanceof n.b)){const r="cim"!==e.type?function(e,t=!1,s=!1,r=!0){if(!e)return{symbol:null};let o;if((0,n.c)(e)||e instanceof n.b)o=e.clone();else if("cim"===e.type)o=n.L.fromCIMSymbol(e);else if(e instanceof n.d)o=n.u.fromSimpleLineSymbol(e);else if(e instanceof n.y)o=n.L.fromSimpleMarkerSymbol(e);else if(e instanceof n.n)o=n.L.fromPictureMarkerSymbol(e);else if(e instanceof n.a)o=n.h.fromSimpleFillSymbol(e);else{if(!(e instanceof n.e))return{error:new n.s("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=r?n.f.fromTextSymbol(e):n.L.fromTextSymbol(e)}if(t&&(o.id=e.id),s&&(0,n.c)(o))for(let e=0;e<o.symbolLayers.length;++e)o.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:o}}(e):{symbol:null,error:new n.s("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return r.symbol?r.symbol.write(t,s):(s.messages&&s.messages.push(new n.s("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:r.error})),null)}return s&&"web-map"===s.origin&&"web-style"===e.type?(s.messages&&s.messages.push(new n.s("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:s})),null):e.write(t,s)}(e,{},r);o&&(t[s]=o)}function l(e,t){return(0,n.k)(e,null,t)}function i(e,t){return e&&(t=t||r.e.location.hostname)?null!=t.match(a)||null!=t.match(c)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(m)||null!=t.match(u)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const a=/^devext.arcgis.com$/,m=/^qaext.arcgis.com$/,c=/^[\w-]*\.mapsdevext.arcgis.com$/,u=/^[\w-]*\.mapsqa.arcgis.com$/,y=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,a,m,/^jsapps.esri.com$/,c,u];const f=()=>function(e){return!!(0,r.t)(`enable-feature:${e}`)}("force-wosr"),b={};function p(e,t,s){const r=t.portal||n.w.getDefault();let o;const l=`${r.url} - ${r.user&&r.user.username} - ${e}`;return b[l]||(b[l]=function(e,t,s){return t.load(s).then((()=>{const r=new n.i({disableExtraQuery:!0,query:`owner:${S} AND type:${$} AND typekeywords:"${e}"`});return t.queryItems(r,s)})).then((({results:t})=>{let r=null;const o=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===o))&&e.type===$&&e.owner===S){r=e;break}if(!r)throw new n.s("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return r.load(s)}))}(e,r,s).then((e=>(o=e,e.fetchData()))).then((t=>({data:t,baseUrl:o.itemUrl,styleName:e})))),b[l]}function d(e,t,s){return e.styleUrl?function(e,t){return g(e,t).then((t=>({data:t.data,baseUrl:(0,n.g)(e),styleUrl:e})))}(e.styleUrl,s):e.styleName?p(e.styleName,t,s):Promise.reject(new n.s("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function w(e,t,s,o,a){const m=e.data,c={portal:s.portal,url:(0,n.j)(e.baseUrl),origin:"portal-item"},u=m.items.find((e=>e.name===t));if(!u){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new n.s("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let b=(0,n.l)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!f())for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}(u,o),c),p=u.thumbnail&&u.thumbnail.href;const d=u.thumbnail&&u.thumbnail.imageData;(function(e){return e=e||r.e.location.hostname,y.some((t=>{var s;return null!=(null==(s=e)?void 0:s.match(t))}))})()&&(b=i(b),p=i(p));const w={portal:s.portal,url:(0,n.j)((0,n.g)(b)),origin:"portal-item"};return g(b,a).then((r=>{const i=l("cimRef"===o?h(r.data):r.data,w);if(i&&(0,n.c)(i)){if(p){const e=(0,n.l)(p,c);i.thumbnail=new n.m({url:e})}else d&&(i.thumbnail=new n.m({url:`data:image/png;base64,${d}`}));e.styleUrl?i.styleOrigin=new n.p({portal:s.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(i.styleOrigin=new n.p({portal:s.portal,styleName:e.styleName,name:t}))}return i}))}function h(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function g(e,t){const s={responseType:"json",query:{f:"json"},...t};return(0,n.U)((0,n.z)(e),s)}const S="esri_en",$="Style",_="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json",N=Object.freeze({__proto__:null,fetchStyle:d,fetchSymbolFromStyle:w,resolveWebStyleSymbol:function(e,t,s,r){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,s){const r=_.replace(/\{SymbolName\}/gi,e.name);return g(r,s).then((e=>l(h(e.data),{portal:t.portal,url:(0,n.j)((0,n.g)(r)),origin:"portal-item"})))}(e,t,r):d(e,t,r).then((n=>w(n,e.name,t,s,r))):Promise.reject(new n.s("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))},styleNameFromItem:function(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}})}}]);