/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-aab83f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-aab83f"],{99004:(e,t,r)=>{r.d(t,{c:()=>i,g:()=>n});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},52166:(e,t,r)=>{r.d(t,{D:()=>d,M:()=>p,a:()=>l,b:()=>c,h:()=>u});var i=r(73596),n=r(51325),a=r(50852),o=r(71700),s=r(7380);const l=e=>{const{title:t,fileName:r,extension:a}=(0,i.s)(e);return n.i.title=t,o.a.file=e,o.a.fileName=r,o.a.newItemMode="file",o.a.extension=a,a},c=e=>{const t=(0,s.f)(e)[0],{type:r,nextStep:i}=t;return o.a.type=r,{nextStep:i,type:r}},u=async(e,t)=>{try{e&&!t&&await(0,a.d)(e,{permanentDelete:!0})}catch(e){return}},d=864e5,p=1e3},71366:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_developer_credentials_input:()=>p});var i=r(7263),n=r(41168),a=r(31670),o=r(94788),s=r(39274),l=r(71700),c=r(99907),u=r(71695),d=r(52166);r(46581),r(28926),r(70506),r(99004),r(65215),r(11935),r(51325),r(49712),r(90079),r(57399),r(50852),r(7652),r(2174),r(86537),r(66488),r(67575),r(15437),r(73596),r(91253),r(43780),r(59673),r(59296),r(7380);const p=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.workflowComplete=(0,i.c)(this,"workflowComplete",7),this.canShowLearnMore=!0,this.isRegisteringApiKey=!1,this.isRegisterTerminalPage=()=>"register"===c.u.workflow&&"oauth"===this.selectedCredentialType,this.setAlertMessage=e=>{this.alertInfo=this.i18n.error[e]},this.setUnsupportedUrlAlertMessage=()=>{const e=this.i18nBase.featureLayerFromUrl.error;this.alertInfo={title:e.invalidFeatureLayerUrl.title,description:this.i18n.error.registerError.description}},this.alertInfo=void 0,this.selectedApplicationEnvironment="multiple",this.redirectUrls=[],this.referrerUrls=[],this.expirationDate=null,this.url="",this.isLoading=!1,this.canCreateAPIKey=!1}componentWillLoad(){var e,t;this.i18n=c.u.i18n.developerCredentialsInput,this.i18nBase=c.u.i18n,this.selectedCredentialType=l.a.developerCredentialsType;const r=l.a.existingItem;r&&("API Key"===r.type?(this.isRegisteringApiKey=!0,c.u.nextText="register"):"Application"!==r.type&&"register"!==c.u.workflow||(this.selectedCredentialType="oauth")),this.isRegisterTerminalPage()&&(c.u.nextText="register"),this.selectedApplicationEnvironment=l.a.applicationEnvironment||"multiple",this.url=null!==(e=l.a.url)&&void 0!==e?e:null===(t=l.a.existingItem)||void 0===t?void 0:t.url;const i=l.a.developerCredentialsRedirectUrls;this.redirectUrls=(null==i?void 0:i.length)>0?i:[""];const n=l.a.apiKeyReferrerUrls;this.referrerUrls=(null==n?void 0:n.length)>0?n:[""];const o=l.a.apiToken1ExpirationDate,s=new Date;s.setDate(s.getDate()+90),this.expirationDate=o?new Date(o):s;const{portal:u,config:{helpBase:d}}=a.c;this.canShowLearnMore=!u.isPortal||d.includes("https://enterprise.arcgis.com/")}async componentDidLoad(){if(!a.c.subscriptionInfo){this.isLoading=!0;const{result:e}=await(0,n.g)(a.c.portal,a.c.user);a.c.subscriptionInfo=e,this.isLoading=!1}this.canCreateAPIKey=(0,u.t)()}async handleNext(){const{selectedCredentialType:e,selectedApplicationEnvironment:t,isRegisterTerminalPage:r,redirectUrls:i,redirectManagementRef:n,referrerUrls:c,referrerManagementRef:p,urlRef:v,setAlertMessage:f,url:h,expirationDate:m,isRegisteringApiKey:g}=this;if(await(null==v?void 0:v.validateInput()))return void v.focusMainInput();const w=i.filter((e=>e));if(g||"oauth"===e){if(w.length<=0)return f("redirectEmpty"),void n.focusInputByIndex(0);if(new Set(w).size!==w.length)return f("redirectDuplicated"),void n.focusInputByIndex(0)}const y=c.filter((e=>e));if(g&&y.length<1)return f("referrerEmpty"),void p.focusInputByIndex(0);if(!m&&"apiToken"===e)return f("expirationDateEmpty"),void this.expirationDateRef.focus();if("oauth"===e){if(!await this.redirectManagementRef.validateAllInputs({focusWhenInvalid:!0}))return void this.setUnsupportedUrlAlertMessage()}if(r()){this.isLoading=!0;const{result:e}=await(0,s.z)("oauth",l.a.id,(0,o.g)(a.c.portal),{appType:t,redirect_uris:w,url:h});return this.isLoading=!1,void(e?this.workflowComplete.emit({id:l.a.id,redirectUrls:w,httpReferrers:y,clientId:e.client_id,clientSecret:e.client_secret,appType:e.appType}):this.setUnsupportedUrlAlertMessage())}l.a.developerCredentialsType=e,l.a.applicationEnvironment=g?void 0:t,l.a.apiKeyReferrerUrls=y,l.a.developerCredentialsRedirectUrls=w,l.a.type=g?"API Key":"Application",l.a.url=g?void 0:h;const x=new Date;x.setDate(x.getDate()+90),x.setTime(x.getTime()+d.D-d.M),l.a.apiToken1ExpirationDate="apiToken"===e?m.getTime():x.getTime();const D=(0,u.u)(a.c.user);this.newItemUpdatePage.emit(g?"serviceScope":D?"developerCredentialsPrivilegePicker":"itemProperties")}handleExpirationDate(e){const t=e.getTime()+d.D-d.M;this.expirationDate=new Date(t)}render(){const{i18n:e,selectedCredentialType:t,selectedApplicationEnvironment:r,redirectUrls:n,alertInfo:a,referrerUrls:o,url:s,isRegisteringApiKey:l,canShowLearnMore:u,expirationDate:p}=this,v=new Date;return(0,i.h)(i.H,null,l&&(0,i.h)("p",{innerHTML:u?e.oauth2Hint.replace("${apiLinkStart}",'<a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/security/types-of-authentication/" target="_blank">').replace("${endLink}","</a>"):e.oauth2HintNoLink}),(l||"oauth"===t)&&(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-data-array-management",{header:e.redirectUrlsTitle,description:e.redirectUrlsDescription,addNewText:c.u.i18n.common.add,placeholder:"https://<server>[:port]",initialData:n,required:!0,validateData:e=>{const t=new RegExp(/[^ -~]/).test(e.content);return e.content.length>0&&!t},onDataChanged:({detail:{allData:e}})=>{this.redirectUrls=e.map((e=>e.content))},ref:e=>this.redirectManagementRef=e})),"apiToken"===t&&(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-new-item-description",{header:e.setExpirationDateTitle,content:e.setExpirationDateDescription}),(0,i.h)("div",{class:"expiration-date-container"},(0,i.h)("calcite-label",null,(0,i.h)("p",{class:"expiration-date-subheader"},e.expirationDate),(0,i.h)("calcite-input-date-picker",{valueAsDate:(null==p?void 0:p[0])||p,minAsDate:v,maxAsDate:(()=>{const e=new Date;return e.setFullYear(e.getFullYear()+1),e.setTime(e.getTime()+d.D-d.M),e})(),ref:e=>this.expirationDateRef=e,onCalciteInputDatePickerChange:e=>{const t=e.target.valueAsDate,r=Array.isArray(t)?t[0]:t;this.handleExpirationDate(r)}})))),(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-data-array-management",{header:e.refererUrlsTitle,description:e.refererUrlsDescription,addNewText:c.u.i18n.common.add,placeholder:"http://your-app.com",initialData:o,required:!0,validateData:e=>e.content.length>0,onDataChanged:({detail:{allData:e}})=>{this.referrerUrls=e.map((e=>e.content))},ref:e=>this.referrerManagementRef=e})),"oauth"===t&&(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-application-environment",{defaultEnvironment:r,onArcgisApplicationEnvironmentChange:e=>{this.selectedApplicationEnvironment=e.detail}})),!l&&"oauth"===t&&(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-new-item-url",{onNewItemUrlChange:e=>{this.url=e.detail.url},url:s,ref:e=>this.urlRef=e,required:!1,headerScale:"m"})),(0,i.h)("arcgis-new-item-alert",{heading:null==a?void 0:a.title,description:null==a?void 0:a.description,active:!!a,onAlertDismiss:()=>this.alertInfo=null}))}};p.style=".section{margin-bottom:2rem}.expiration-date-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;background-color:var(--calcite-color-background)}.expiration-date-subheader{margin-bottom:0.75rem}calcite-input-date-picker{width:13rem}"},70506:(e,t,r)=>{r.d(t,{e:()=>a});var i,n=r(99004),a={exports:{}};i=a.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",i="next";function n(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){void 0===e&&(e=r);var t=a(e),o=n(e);if(o!==i&&3===o.major){var s=o.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function l(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function u(e){return!e||n(e)?o(e):e}function d(e,t){var r=u(e),i=c(r);return i||l(i=s(r),t),i}var p={};function v(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function f(e,t,r){var i;r&&(i=h(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)}function h(e,t){var r=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function m(e){void 0===e&&(e={}),p=e}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var i=r.version,n=r.url||a(i);return new t.Promise((function(e,t){var a=g();if(a){var o=a.getAttribute("src");o!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):w()?e(a):f(a,e,t)}else if(w())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&d(!0===s?i:s,r.insertCssBefore),f(a=v(n),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),t),document.body.appendChild(a)}}))}function x(e){return new t.Promise((function(t,r){var i=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];i.remove(),t(e)}))}))}function D(e,t){if(void 0===t&&(t={}),w())return x(e);var r=g(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),y(t).then((function(){return x(e)}))}e.utils=t,e.loadModules=D,e.getScript=g,e.isLoaded=w,e.loadScript=y,e.setDefaultOptions=m,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(i)},7380:(e,t,r)=>{r.d(t,{a:()=>l,f:()=>a,i:()=>s,m:()=>o});var i=r(11246),n=r(86537);function a(e,t){let r;r=t?t.map((e=>e.type)):Object.keys(n.a);let i=[];return r.forEach((t=>{var r;(null===(r=n.a[t].fileExt)||void 0===r?void 0:r.indexOf(e))>=0&&i.push(n.a[t])})),i}function o(e){return e?(0,i.b)(e.flatMap((e=>{var t;return null===(t=n.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const s=e=>e/1024/1024>50,l=e=>e/1024/1024>20},28926:(e,t,r)=>{r.d(t,{l:()=>n});var i=r(70506);const n=async(e,t)=>(await i.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},71695:(e,t,r)=>{r.d(t,{a:()=>U,b:()=>p,c:()=>E,d:()=>g,e:()=>w,f:()=>x,g:()=>v,h:()=>m,i:()=>D,j:()=>b,k:()=>P,l:()=>u,m:()=>A,n:()=>d,o:()=>R,p:()=>k,q:()=>M,r:()=>C,s:()=>S,t:()=>L,u:()=>N,v:()=>O,w:()=>l,x:()=>T,y:()=>I,z:()=>_});var i=r(66488),n=r(94788),a=r(59296),o=r(31670),s=r(46581);async function l(){return new Promise((async e=>{const{portal:t}=o.c;if(null==t?void 0:t.isPortal){const r=t.helperServices.geocode,i=await function(e){const{config:t,portal:r}=o.c;return new Promise((async(i,n)=>{const a=e.filter((e=>c(e.url,r))).filter((e=>e.isEsriBatchGeocoder))[0];if(a){const e=a.url.split("/servers/")[1].split("/rest/services/")[0],r=`${t.restBaseUrl}/content/items/${e}`;try{i((await(0,s.r)(r)).url)}catch(e){n(e)}}else n("No world geocoder configured")}))}(r);e(i)}else{const r=function(e){const t=null==e?void 0:e.portalHostname;if(-1!==t.indexOf("dev"))return"dev";if(-1!==t.indexOf("qa"))return"qa";return""}(t);e(`https://geocode${r}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function c(e="",t){var r;const i=t.isPortal,n=e.toLowerCase(),a=n.indexOf("/geocodeserver")>-1&&n.indexOf("/rest/services/")>-1,o=i&&n.indexOf(null===(r=t.portalHostname)||void 0===r?void 0:r.toLowerCase())>-1,s=!i&&n.indexOf("utility")&&n.indexOf(".arcgis.com")>-1;return a&&(o||s)}function u(e){return(0,a.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,a.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function p(e,t){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,i.i)(t,e)}async function v(e,t){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,i.i)(t,e)}const f=async(e,t)=>{var r;return await v(e,t)&&(!t.isPortal||!!t.supports3DTilesServices||!!(null===(r=t.sourceJSON)||void 0===r?void 0:r.supports3DTilesServices))};function h(e){return!(0,a.a)(e)&&!0}function m(e){var t;return!(0,a.a)(e)&&(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishScenes"))}const g=e=>!(0,a.a)(e);function w(e,t,r){var i,n;const a=!!(null===(n=null===(i=t.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===n?void 0:n.url),o=function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(t.isPortal||y(r))}(e,t,r),s=t.isPortal?o:o||function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!t.isPortal&&y(r)}(e,t,r);return a&&s}function y(e){return null==e?void 0:e.some((e=>{var t;return null===(t=e.entitlements)||void 0===t?void 0:t.some((e=>"image"===e.toLowerCase()))}))}async function x(e){var t;const{userLicensedItems:r}=await(0,s.r)(`${null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl}/community/self?returnUserLicensedItems=true`);return r}function D(e,t){var r,i;const o=null===(r=t.helperServices)||void 0===r?void 0:r.geocode.some((({url:e})=>c(e,t))),s=null!==(i=null==e?void 0:e.privileges)&&void 0!==i?i:[];return!(0,a.a)(e)&&o&&(!t.isPortal||!(0,n.i)(t)&&s.includes("portal:user:viewOrgItems")&&s.includes("portal:user:createItem"))}const b=e=>!(0,a.a)(e);function I(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function T(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function P(e,t){var r;return!!t.isPortal&&!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:registerDataStores"))}function A(e){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const C=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function E(e,t,r){return!t.isPortal&&await p(e,t)&&await async function(e,t,r){return!(0,a.a)(e)&&!!t.supportsHostedServices&&u(e)&&(await v(e,t)||await p(e,t)||m(e)||h(e)||w(e,t,r))}(e,t,r)}async function U(e,t,r){switch(t){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return p(e,r);case"Tile Package":return v(e,r);case"3DTiles Package":return f(e,r);case"Vector Tile Package":return h(e);case"Scene Package":return m(e);case"Service Definition":return async function(e,t){return await p(e,t)&&await v(e,t)}(e,r);default:return!0}}function k(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageCredits"))}function S(e,t){var r,i,n;return(0,a.c)(e)||k(e)||!!((null!==(r=null==e?void 0:e.assignedCredits)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.assignedCredits)>-1&&(null===(n=null==t?void 0:t.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const L=e=>!1;function _(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))}function M(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))}function R(e){return(0,a.b)(e)||M(e)&&function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewItems"))}(e)&&(function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:reassignItems"))}(e))}function O(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const N=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},41168:(e,t,r)=>{r.d(t,{a:()=>a,g:()=>o});var i=r(46581),n=r(94788);const a=async e=>{try{return{result:await(0,i.r)(`${(0,n.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},o=async(e,t)=>await(0,i.f)((()=>a(e)),"subscriptionType",(0,i.b)(t))}}]);