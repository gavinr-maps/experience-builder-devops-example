/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-763357.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-763357"],{80804:(e,t,i)=>{i.r(t),i.d(t,{arcgis_field_pick_list:()=>u,arcgis_smart_mapping_action:()=>m,arcgis_smart_mapping_attribute_input:()=>g,arcgis_smart_mapping_symbol_button:()=>f});var s=i(7263),l=i(58233),n=i(77040),o=i(62159),r=(i(70506),i(82646)),a=i(49541),d=i(1991),c=i(32756),h=i(12234),p=i(60496);i(28926),i(78613),i(99004),i(11935),i(64391),i(75002);const u=class{constructor(e){(0,s.r)(this,e),this.arcgisFieldPickListDismissed=(0,s.c)(this,"arcgisFieldPickListDismissed",7),this.arcgisFieldPickListChange=(0,s.c)(this,"arcgisFieldPickListChange",7),this.arcgisFieldPickListSortByChange=(0,s.c)(this,"arcgisFieldPickListSortByChange",7),this.calciteValueList=e=>(0,s.h)("calcite-pick-list-item",{key:e.name,label:e.alias||e.name,description:(()=>this.showFieldName&&!0!==e.hideFieldName?`{${e.name}}`:this.showDescription&&!0!==e.hideDescription&&e.description?e.description:null)(),value:e.name,selected:!this.multiple&&e.name===this.selectedFields[0]||this.multiple&&this.selectedFields.indexOf(e.name)>-1,metadata:{label:e.alias,fieldName:e.name}},this.showFieldInfoCheck(e)&&(0,s.h)("calcite-action",{slot:"actions-end",text:this.strings.info,title:this.strings.info,scale:"s",icon:"information",onClick:t=>{var i;t.stopPropagation();const s=t.target,l=document.createElement("calcite-flow-item");l.heading=null!==(i=e.alias)&&void 0!==i?i:e.name,l.description=e.name;const n=document.createElement("arcgis-field-info");n.lang=this.currentLanguageIntl,n.fieldName=e.name,n.layer=this.layer,n.view=this.mapView,n.classList.add("content"),l.appendChild(n),l.addEventListener("calciteFlowItemBack",(()=>setTimeout((()=>requestAnimationFrame((()=>s.setFocus()))),200))),this.flowElement.appendChild(l),setTimeout((()=>requestAnimationFrame((()=>l.setFocus()))),200)}})),this.selectedFields=[],this.fields=void 0,this.popoverProps=void 0,this.layer=void 0,this.mapView=void 0,this.showFieldInfo=!1,this.showFieldName=!1,this.showDescription=!1,this.showSelectionAll=!1,this.showCancel=!0,this.showSort=!0,this.showFilterLength=10,this.multiple=!1,this.heading=void 0,this.okBtnText=void 0,this.filterPlaceholderText=void 0,this.sortBy=void 0,this.groupFieldsAndExpressions=!1,this.fieldsGroupHeading=void 0,this.expressionsGroupHeading=void 0,this.customExpressionCheck=void 0,this.lastSortyBy=n.L.default,this.filterFields=null}updateGroupedLists(){this.fieldsOnly=[...this.getSortedList()].filter((e=>!this.isExpression(e))),this.expressionsOnly=[...this.getSortedList()].filter((e=>this.isExpression(e)))}async componentWillLoad(){const e=await(0,o.g)(this.hostElement);this.strings=e[0],this.currentLanguage=e[1],this.currentLanguageIntl=e[2],!this.multiple&&this.selectedFields.length>1&&(this.selectedFields=[this.selectedFields[0]]),this.lastSortyBy=this.sortBy||this.lastSortyBy,this.updateGroupedLists()}componentDidLoad(){this.setUpObserver(),this.popoverNode.open=!0,setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),200)}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}calciteFilterChangeHandler(e){var t,i;e.stopPropagation();const s=null===(t=null==e?void 0:e.path)||void 0===t?void 0:t.find((e=>"CALCITE-FILTER"===e.nodeName));this.filterFields=null===(i=null==s?void 0:s.filteredItems)||void 0===i?void 0:i.map((e=>e.value))}async setFocus(){setTimeout((()=>requestAnimationFrame((()=>this.panelElement.setFocus()))),1)}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}getSortedList(){const e=[...this.fields];return this.lastSortyBy===n.L.display?e.sort(((e,t)=>e.alias.localeCompare(t.alias))):this.lastSortyBy===n.L.field?e.sort(((e,t)=>e.name.localeCompare(t.name))):this.lastSortyBy===n.L.type&&e.sort(((e,t)=>e.type.localeCompare(t.type))),e}showFieldInfoCheck(e){return!!this.showFieldInfo&&(!this.isExpression(e)&&!e.name.includes(n.f.relationship))}selectDeselect(){var e;return(null===(e=this.filterFields)||void 0===e?void 0:e.length)?this.filterContainsAll():this.selectedFields.length===this.fields.length}filterContainsAll(){return this.filterFields.every((e=>this.selectedFields.some((t=>t===e))))}render(){var e,t;const i=(0,s.h)("calcite-button",{slot:"footer",appearance:this.showCancel?"solid":"outline-fill",width:this.showCancel?"half":"full",scale:"m",onClick:()=>{this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields})}},this.okBtnText||(this.multiple?this.strings.done:this.strings.ok)),o=(0,s.h)("calcite-button",{slot:"footer",appearance:"outline-fill",width:this.multiple?"half":"full",scale:"m",onClick:()=>this.arcgisFieldPickListDismissed.emit()},this.strings.cancel),r=this.fields.every((e=>!!e.type)),a=(0,s.h)("calcite-dropdown",{slot:"menu-actions",placement:"bottom-end",overlayPositioning:"fixed",ref:e=>this.dropdownNode=e,onCalciteDropdownOpen:()=>{var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer.observe(this.popoverNode,{attributes:!0})},onCalciteDropdownClose:()=>{var e;return null===(e=this.observer)||void 0===e?void 0:e.disconnect()}},(0,s.h)("calcite-action",{slot:"trigger",text:this.strings.sort,title:this.strings.sort},(0,s.h)("calcite-icon",{scale:"s",icon:"sortDescending"})),(0,s.h)("calcite-dropdown-group",null,(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===n.L.default,onClick:()=>{this.lastSortyBy=n.L.default,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.default),(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===n.L.display,onClick:()=>{this.lastSortyBy=n.L.display,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.displayName),r&&(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===n.L.type,onClick:()=>{this.lastSortyBy=n.L.type,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.type),(0,s.h)("calcite-dropdown-item",{selected:this.lastSortyBy===n.L.field,onClick:()=>{this.lastSortyBy=n.L.field,this.arcgisFieldPickListSortByChange.emit(this.lastSortyBy)}},this.strings.fieldName))),d=(0,s.h)("div",{class:"selection-button-div"},(0,s.h)("calcite-button",{appearance:"transparent",scale:"s",width:"full",onClick:()=>{var e,t;this.selectDeselect()?this.selectedFields=(null===(e=this.filterFields)||void 0===e?void 0:e.length)?this.selectedFields.filter((e=>!this.filterFields.includes(e))):[]:this.selectedFields=(null===(t=this.filterFields)||void 0===t?void 0:t.length)?[...new Set([...this.selectedFields,...this.filterFields])]:this.fields.map((e=>e.name))}},this.selectDeselect()?this.strings.deselectAll:this.strings.selectAll));return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{dir:(0,l.g)(this.hostElement),style:{zIndex:`${null!==(e=this.popoverProps.zIndex)&&void 0!==e?e:100}`},placement:this.popoverProps.placement||"leading-start",open:!1,pointerDisabled:!0,referenceElement:this.popoverProps.refElement,offsetDistance:this.popoverProps.offsetDistance||-Math.round(this.popoverProps.refElement.getBoundingClientRect().width),offsetSkidding:this.popoverProps.offsetSkidding||0,overlayPositioning:this.popoverProps.overlayPositioning,triggerDisabled:this.popoverProps.triggerDisabled,autoClose:this.popoverProps.autoClose,label:this.heading||(this.multiple?this.strings.headerSelect:this.strings.header),onCalcitePopoverClose:()=>this.arcgisFieldPickListDismissed.emit(),ref:e=>this.popoverNode=e},(0,s.h)("calcite-flow",{ref:e=>{this.flowElement=e},style:{width:`${this.popoverProps.popoverWidth||this.popoverProps.refElement.getBoundingClientRect().width}px`}},(0,s.h)("calcite-flow-item",{ref:e=>this.panelElement=e,class:"panel",heading:this.heading||(this.multiple?this.strings.headerSelect:this.strings.header),closable:!0,onCalciteFlowItemClose:()=>this.arcgisFieldPickListDismissed.emit()},this.multiple&&i,this.showCancel&&o,!this.fields.length&&(0,s.h)("slot",{name:"no-fields"}),(0,s.h)("calcite-pick-list",{multiple:this.multiple,ref:e=>{this.pickListNode=e},class:"content",filterEnabled:this.fields.length>=this.showFilterLength,filterPlaceholder:null!==(t=this.filterPlaceholderText)&&void 0!==t?t:this.strings.filter,onCalciteListChange:async()=>{const e=await this.pickListNode.getSelectedItems();this.selectedFields=[...new Set([...this.selectedFields.filter((t=>e.has(t))),...e.keys()])],this.arcgisFieldPickListChange.emit({selectedFields:this.selectedFields}),this.multiple||this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields})}},this.fields.length>=this.showFilterLength&&this.showSort&&a,this.multiple&&this.showSelectionAll&&this.fields.length>0&&d,this.renderListItems())))))}renderListItems(){return this.groupFieldsAndExpressions?(0,s.h)(s.F,null,this.expressionsOnly.length>0&&(0,s.h)("calcite-pick-list-group",{groupTitle:this.expressionsGroupHeading},this.expressionsOnly.map((e=>this.calciteValueList(e)))),this.fieldsOnly.length>0&&(0,s.h)("calcite-pick-list-group",{groupTitle:this.fieldsGroupHeading},this.fieldsOnly.map((e=>this.calciteValueList(e))))):(0,s.h)(s.F,null,[...this.getSortedList()].map((e=>this.calciteValueList(e))))}setUpObserver(){this.observer=new MutationObserver((e=>{for(const t of e)"style"===t.attributeName&&"hidden"===this.popoverNode.style.visibility&&(this.dropdownNode.open=!1)}))}isExpression(e){return this.customExpressionCheck?this.customExpressionCheck(e):this.defaultExpressionCheck(e)}defaultExpressionCheck(e){return e.name.includes(n.f.expression)}get hostElement(){return(0,s.d)(this)}static get watchers(){return{fields:["updateGroupedLists"],lastSortyBy:["updateGroupedLists"],customExpressionCheck:["updateGroupedLists"]}}};u.style=".panel{min-height:300px}.content{max-height:60vh}.selection-button-div{padding:4px 10px}";const m=class{constructor(e){(0,s.r)(this,e),this.hasOutline=!0,this.text=void 0,this.icon=void 0,this.disabled=!1}async setFocus(){var e;null===(e=this.calciteActionNode)||void 0===e||e.setFocus()}disconnectedCallback(){(0,r.au)()}render(){return(0,s.h)("calcite-action",{key:"00463ca016996e77f704ca6672657547f0f0cf89",class:""+(this.hasOutline?"smart-mapping-action-outline":""),scale:"s",text:this.text,icon:this.icon,disabled:this.disabled,ref:e=>this.calciteActionNode=e,onMouseOver:()=>(0,r.aw)(this.calciteActionNode,this.text),onMouseOut:()=>(0,r.au)(),onFocus:()=>(0,r.aw)(this.calciteActionNode,this.text),onFocusout:()=>(0,r.au)()})}get hostElement(){return(0,s.d)(this)}};m.style=".smart-mapping-action-outline{border:#eaeaea 1px solid}";const g=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingAttributeInputChange=(0,s.c)(this,"arcgisSmartMappingAttributeInputChange",7),this.arcgisSmartMappingAttributeInputError=(0,s.c)(this,"arcgisSmartMappingAttributeInputError",7),this.fieldList=void 0,this.selectedField=void 0,this.label=void 0,this.mode="simple",this.popoverReferenceElement=void 0,this.hideLabel=!1}async clear(){this.currentField=null,(0,s.f)(this.hostElement)}componentWillLoad(){this.currentField=this.selectedField,this.popoverReferenceElement||(this.popoverReferenceElement=(0,r.f)(this.hostElement,"calcite-flow-item"))}componentWillUpdate(){this.currentField!==this.selectedField&&(this.currentField=this.selectedField)}render(){const{strings:e}=r.s;return this.hideLabel?(0,s.h)("div",{class:"field-select-with-icon"},this.renderFieldButton(),"remove"===this.mode&&this.currentField&&this.renderRemoveButton(),"expression"===this.mode&&this.renderArcadeButton()):(0,s.h)("calcite-label",null,this.label||e.attributeInput.attribute,(0,s.h)("div",{class:"field-select-with-icon"},this.renderFieldButton(),"remove"===this.mode&&this.currentField&&this.renderRemoveButton(),"expression"===this.mode&&this.renderArcadeButton()))}renderArcadeButton(){var e;const{strings:t}=r.s,i=this.currentField.field?t.attributeInput.useExpression:t.attributeInput.useField;return(0,s.h)(s.F,null,(0,s.h)("div",null,"\xa0"),(0,s.h)("calcite-button",{id:"smart-mapping-attribute-switch",appearance:"outline-fill",kind:"neutral",iconStart:(null===(e=this.currentField)||void 0===e?void 0:e.field)?"code":"brackets-curly",label:i,class:"field-button",onClick:()=>this.handleSwitchAttributeType(),ref:e=>this.switchButtonNode=e}),(0,s.h)("calcite-tooltip",{referenceElement:"smart-mapping-attribute-switch",label:i},i))}renderFieldButton(){var e,t,i,l,n,o;const{strings:a}=r.s,d="remove"!==this.mode&&"expression"!==this.mode||!this.currentField?"":"non-simple-field-button",c=(null===(e=this.currentField)||void 0===e?void 0:e.field)&&1===this.fieldList.length&&"remove"!==this.mode;return(0,s.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",disabled:c,iconEnd:(null===(t=this.currentField)||void 0===t?void 0:t.expression)?"pencil":c?void 0:"chevron-down",width:"full",class:`field-button ${d}`,onClick:async()=>{var e;(null===(e=this.currentField)||void 0===e?void 0:e.expression)?(await this.openArcadeEditorModal(this.currentField),this.fieldButtonNode.setFocus()):this.openFieldPickList()},ref:e=>{e&&(this.fieldButtonNode=e)}},(null===(i=this.currentField)||void 0===i?void 0:i.field)?null===(l=(0,r.t)(this.currentField.field))||void 0===l?void 0:l.label:(null===(n=this.currentField)||void 0===n?void 0:n.expression)?null===(o=this.currentField)||void 0===o?void 0:o.expressionTitle:a.attributeInput.chooseField)}renderRemoveButton(){const{strings:e}=r.s;return(0,s.h)(s.F,null,(0,s.h)("div",null,"\xa0"),(0,s.h)("calcite-button",{id:"smart-mapping-attribute-switch",appearance:"outline-fill",kind:"neutral",iconStart:"x",label:e.clear,class:"field-button",onClick:()=>this.handleRemoveField()}),(0,s.h)("calcite-tooltip",{referenceElement:"smart-mapping-attribute-switch",label:e.clear},e.clear))}async handleRemoveField(){this.currentField=null,this.arcgisSmartMappingAttributeInputChange.emit()}async handleSwitchAttributeType(){var e,t;if((0,r.m)(),null===(e=this.currentField)||void 0===e?void 0:e.field)if(null===(t=this.lastSettings)||void 0===t?void 0:t.expression){const e={expression:this.lastSettings.expression,expressionTitle:this.lastSettings.expressionTitle,simpleFieldType:this.lastSettings.simpleFieldType};this.currentField.field=null,this.currentField=e,this.arcgisSmartMappingAttributeInputChange.emit(this.currentField)}else try{await this.openArcadeEditorModal(),this.fieldButtonNode.setFocus()}catch(e){this.switchButtonNode.setFocus()}else this.openFieldPickList()}async openArcadeEditorModal(e){const{strings:t}=r.s;(0,r.m)();try{return(e=await(0,a.u)(e)).simpleFieldType===r.w.STRING?void this.arcgisSmartMappingAttributeInputError.emit({message:t.attributeInput.errors.expressionMustBeNumber,type:"warning"}):(e.simpleFieldType===r.w.UNKNOWN&&(e.simpleFieldType=r.w.NUMBER),this.currentField.field=null,this.currentField.expression=e.expression,this.currentField.expressionTitle=e.expressionTitle,this.currentField.simpleFieldType=e.simpleFieldType,this.arcgisSmartMappingAttributeInputChange.emit(this.currentField),new Promise((e=>{e()})))}catch(e){return new Promise(((e,t)=>{t()}))}}openFieldPickList(){const{layer:e,mapView:t,strings:i}=r.s;(0,r.m)();const s=document.createElement("arcgis-field-pick-list");s.fields=this.fieldList.map((e=>({name:e.layerField.name,alias:e.label,type:e.simpleFieldType,description:"description"in e.layerField?e.layerField.description:void 0}))),this.currentField?(s.heading=i.replaceField,s.selectedFields=[this.currentField.field]):s.heading=i.addField,s.popoverProps={refElement:this.popoverReferenceElement,placement:"leading",offsetDistance:0,popoverWidth:1.05*this.popoverReferenceElement.getBoundingClientRect().width,overlayPositioning:"absolute",flipDisabled:!1,triggerDisabled:!1},s.layer=e,s.mapView=t,s.showFieldInfo=!0,s.sortBy=this.lastFieldSortBy,(0,r.n)(this.popoverReferenceElement,!0),document.body.appendChild(s),s.addEventListener("arcgisFieldPickListSortByChange",(e=>{this.lastFieldSortBy=e.detail})),s.addEventListener("arcgisFieldPickListDismissed",(e=>{var t,i;if(null===(t=e.detail)||void 0===t?void 0:t.selectedFields){const t=(0,r.t)(e.detail.selectedFields[0]),s={field:t.layerField.name,simpleFieldType:t.simpleFieldType};(null===(i=this.currentField)||void 0===i?void 0:i.expression)&&(this.lastSettings={expression:this.currentField.expression,expressionTitle:this.currentField.expressionTitle,simpleFieldType:this.currentField.simpleFieldType}),this.currentField=s,this.arcgisSmartMappingAttributeInputChange.emit(this.currentField)}this.fieldButtonNode.setFocus(),document.body.removeChild(s),(0,r.n)(this.popoverReferenceElement,!1)}))}get hostElement(){return(0,s.d)(this)}};g.style=".field-select-with-icon{display:flex;width:100%;justify-content:space-between;align-items:stretch;min-width:0}.field-button:focus{z-index:10}.non-simple-field-button{width:calc(100% - 32px)}";const f=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSymbolButtonSymbolChange=(0,s.c)(this,"arcgisSmartMappingSymbolButtonSymbolChange",7),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();this.symbolNodeWidth=t.contentRect.width})),this.afterCreateSymbolDiv=(e,t)=>{var i;if(!t)return;const{isReferenceSize:s}=this,{modules:l}=r.s,{colors:n,symbol:o}=e,a=this.buttonNode,d=a?a.getBoundingClientRect().width:0;if(a&&!d)return;for(;null===(i=null==t?void 0:t.childNodes)||void 0===i?void 0:i.length;)t.removeChild(t.childNodes[0]);if(n){const e=l.symbolUtils.renderColorRampPreviewHTML(n,{align:"horizontal",width:d?d-40:150,height:16});t.appendChild(e)}else if(o){const e=d?Math.round((0,p.p)(d-40)):110,i="simple-line"===o.type||"cim"===o.type&&"CIMLineSymbol"===o.data.symbol.type,n="simple-fill"===o.type||"cim"===o.type&&"CIMPolygonSymbol"===o.data.symbol.type,r="cim"===o.type&&!i&&!n,a=i?{width:e,height:"simple-line"===o.type?3:6}:n?{width:s?18:e,height:s?18:12}:r?16:14;l.symbolUtils.renderPreviewHTML(o,{size:a,symbolConfig:n?{isSquareFill:!0}:void 0}).then((e=>{t.style.height=n?s?"24px":"16px":r?"21px":"auto",t.appendChild(e)}))}},this.handleClick=async()=>{const{internalPopoverReferenceElement:e,label:t,popoverNode:i,buttonNode:s}=this,{strings:l}=r.s;if(i)this.onPopoverClose();else{(0,r.m)(),this.selected=!0;document.createElement("div").className="symbol-styler-div",this.popoverNode=(0,h.c)({referenceElement:"string"==typeof e?document.getElementById(e):e,heading:t||l.styler.symbolStyle}),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverClose",(()=>{this.onPopoverClose(),setTimeout((()=>s.focus()),300)})),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverDisconnected",(()=>{this.onPopoverClose()}));const i=this.getOnClickCall();this.symbolStylerWatchScaleHandle=await i({popoverNode:this.popoverNode,onChange:()=>{(0,r.u)(),this.arcgisSmartMappingSymbolButtonSymbolChange.emit()}})}},this.type=void 0,this.rampType=void 0,this.label=void 0,this.hideLabel=void 0,this.symbol=void 0,this.colors=void 0,this.width=void 0,this.isReferenceSize=!1,this.popoverReferenceElement=void 0,this.selected=!1,this.symbolNodeWidth=void 0}async setFocus(){var e;null===(e=this.buttonNode)||void 0===e||e.focus()}disconnectedCallback(){this.onPopoverClose(),this.resizeObserver.unobserve(this.buttonNode)}componentDidLoad(){if(this.internalPopoverReferenceElement=this.popoverReferenceElement,!this.internalPopoverReferenceElement){const e=(0,d.q)(this.hostElement,"calcite-panel"),t=(0,d.q)(this.hostElement,"calcite-flow-item");this.internalPopoverReferenceElement=t||e}(0,s.f)(this.hostElement),this.resizeObserver.observe(this.buttonNode)}render(){const{label:e,width:t,hideLabel:i}=this,{strings:l}=r.s;return(0,s.h)(s.H,{key:"0c24d0b77d53a8745b366602cb37e65a52ea3fc8"},(0,s.h)("div",{key:"54af18d7850d0045a29be983d4cfc47cd9344eef",class:"block-content-padding "+("half"===t?"half":"")},!i&&(0,s.h)("calcite-label",{key:"7a3d3bb40a4b95510aadda92151062769f397c92",id:"symbol-button-label"},e||l.styler.symbolStyle,this.renderSymbolButton()),i&&this.renderSymbolButton()))}renderSymbolButton(){const{rampType:e,symbol:t,colors:i,selected:l}=this,{modules:n}=r.s;"raster-class-breaks"===((0,r.i)()?(0,r.g)():(0,r.a)())&&(null==i||i.forEach(((e,t)=>{0===e.r&&0===e.g&&0===e.b&&0===e.a&&(i[t]=new n.esriColor([255,255,255,0]))})));let o="discrete"===e&&(null==i?void 0:i.length)?i.map(((e,t)=>{var l;return(0,s.h)("div",{key:`symbol-button-icon-${t}`,class:"classed-color-icon-section",style:{width:95/Math.min(10,i.length)+"%",backgroundColor:`${null!==(l=null==e?void 0:e.toHex())&&void 0!==l?l:"#ffffff"}`}})})):null;const a=!e&&(0,r.aK)(t),d=(0,r.E)()||"point",c={"symbol-selector":!0,"symbol-is-white":(0,r.ai)(t),selected:l};return(0,s.h)("div",{class:c,onClick:this.handleClick,role:"button",tabIndex:0,"aria-labelledby":"symbol-button-label","aria-haspopup":"true","aria-expanded":!!l,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleClick())},ref:e=>this.buttonNode=e},a?this.renderTransparentSymbol(t):"discrete"===e?(0,s.h)("div",{class:"classed-color-icon","aria-hidden":"true"},o):(0,s.h)("div",{key:`${t||i}`,class:`symbol-icon ${d}`,style:{width:.95*this.symbolNodeWidth+"px"},ref:e=>{this.afterCreateSymbolDiv({colors:i,symbol:t},e),this.symbolNode=e},"aria-hidden":"true"}),(0,s.h)("div",{class:"symbol-edit-button"},(0,s.h)("calcite-icon",{scale:"s",icon:"pencil"})))}renderTransparentSymbol(e){return(0,s.h)("div",{key:e,class:"symbol-icon transparent","aria-hidden":"true",style:{width:.95*this.symbolNodeWidth+"px"},ref:e=>this.symbolNode=e},(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("defs",null,(0,s.h)("pattern",{id:"16cf9653474-widget-3-bg-fill",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},(0,s.h)("image",{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-bg-fill)",height:"100%",width:"100%"}),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-ramp-fill)",height:"100%",width:"100%"})))}getOnClickCall(){const{type:e}=this;switch(e){case"background":case"background":return h.n;case"simple":return h.w;case"size":return h.v;case"color-ramp":return h.u;case"relationship-ramp":return h.t;case"geo-rss-point":return h.s.bind(this,"point");case"geo-rss-line":return h.s.bind(this,"line");case"geo-rss-polygon":return h.s.bind(this,"polygon");case"dot-density-ramp":return h.q;case"dot-density-background":return h.p;case"dot-density-value":return h.a;case"heatmap-ramp":return h.o;case"predominance-ramp":return h.m;case"above":return h.l;case"below":return h.k;case"chart-ramp":return h.j;case"type-ramp":return h.i;case"raster-flow":return c.h;case"raster-stretch":return c.g;case"raster-shaded-relief":return c.f;case"raster-class-breaks":return c.e;case"raster-unique-value":return c.d;case"default":return h.h}}onPopoverClose(){var e;null===(e=this.symbolStylerWatchScaleHandle)||void 0===e||e.remove(),this.selected=!1,(0,h.r)(this.popoverNode),this.popoverNode=void 0}get hostElement(){return(0,s.d)(this)}};f.style=".half{width:49%}.symbol-selector{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.symbol-selector:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.symbol-selector:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.symbol-selector:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.symbol-selector.selected{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.symbol-icon{max-height:30px;overflow:hidden}.symbol-icon.transparent{height:15px;width:100%}.symbol-icon.transparent svg{height:15px;width:95%;stroke:#e0e0e0;stroke-width:1px}.symbol-is-white{background-color:#f3f3f3}.symbol-edit-button{padding:1px;height:18px;width:18px;border:none;cursor:pointer;color:var(--calcite-ui-icon-color)}.symbol-edit-button:focus{outline:none}.classed-color-icon{width:100%;height:16px;overflow:hidden;border-radius:0}.classed-color-icon-section{height:16px;display:inline-block}"},49541:(e,t,i)=>{i.d(t,{u:()=>n});var s=i(1991),l=i(82646);i(77040),i(70506);async function n(e){const{layer:t,strings:i,modules:n}=l.s,r=t,a="// "+i.arcade.defaultExpressionScript_line1+"\r\n// "+i.arcade.defaultExpressionScript_line2+"\r\n// Round(($feature.oak_count / $feature.all_trees_count) * 100, 2)\r\n\r\n",d=document.createElement("arcgis-modal-arcade");return d.arcadeScript=(null==e?void 0:e.expression)||a,d.arcadeProfile=function(){const{layer:e,useFeatureReduction:t}=l.s;return{id:"visualization",definitions:{$feature:t?{fields:(0,s.l)(e.featureReduction.popupTemplate,!1)}:e}}}(),d.testData=await async function(){const{layer:e,mapView:t,useFeatureReduction:i}=l.s;return{profileVariableInstances:{$feature:i?await(0,s.m)(t,e,e.featureReduction.popupTemplate):await o(),$view:{scale:t.scale}},spatialReference:t.spatialReference}}(),d.addExistingExpressions=!0,d.layer=r,d.arcadeTitle=(null==e?void 0:e.expressionTitle)||i.arcade.newExpression,d.arcadeTitleEditable=!0,d.arcadeTitleEditingEnabled=!(null==e?void 0:e.expressionTitle),document.body.appendChild(d),new Promise(((e,t)=>{d.addEventListener("arcgisModalArcadeClose",(i=>{if(document.body.removeChild(d),!i.detail)return void t();const{script:s,title:o,predictOutputType:c}=i.detail;if(s&&s!==a)return n.fieldUtils.getExpressionFields(r,[s]).then((t=>{(0,l.P)(t),e({expression:s,expressionTitle:o,simpleFieldType:"number"===c?l.w.NUMBER:"string"===c?l.w.STRING:"date"===c?l.w.NUMBER:l.w.UNKNOWN})}));t()}))}))}async function o(){var e;const{layer:t,mapView:i,modules:s}=l.s;let n;if(!("fields"in t))return null;{await async function(){const{oneFeatureResponse:e,oneFeatureResponseStatus:t}=l.s;if(e&&t!==l.h.MISSING)return l.s.oneFeatureResponse;{const e=await function(){const{mapView:e,layer:t,mapImageSublayer:i}=l.s;if(!("fields"in t))return Promise.reject("getOneFeature: wrong layer type");if(i)return r();return e.whenLayerView(t).then((e=>{if("feature"===t.type&&!t.url||"wfs"===t.type){const e=t.createQuery();return e.start=0,e.num=5,e.outFields=["*"],t.queryFeatures(e).then((e=>e.features&&e.features.length?Promise.resolve(e):Promise.resolve(a())))}{const i="hasM"in t&&t.hasM,s="hasZ"in t&&t.hasZ,l=e.availableFields.length===t.fields.length&&!i&&!s;if("createQuery"in t&&l){const i=t.createQuery();return i.start=0,i.num=5,i.outFields=["*"],e.queryFeatures(i).then((e=>e.features&&e.features.length?Promise.resolve(e):r()))}return r()}}))}();return l.s.oneFeatureResponse=(null==e?void 0:e.features.length)&&e,l.s.oneFeatureResponseStatus=(null==e?void 0:e.features.length)?l.h.SUCCESS:l.h.FAILED,e}}();const{oneFeatureResponse:o}=l.s;if(null===(e=null==o?void 0:o.features)||void 0===e?void 0:e.length)n=s.esriLang.clone(o.features[0]);else{const e={};t.fields.forEach((t=>{["small-integer","big-integer","integer","single","double","string","date","date-only","oid","guid"].indexOf(t.type)>-1&&!1===t.nullable?t.defaultValue?e[t.name]=t.defaultValue:"string"===t.type?e[t.name]="":e[t.name]=0:e[t.name]=null}));const o=i.extent;let r,a;(0,l.D)()?(r=new s.Polygon({spatialReference:new s.SpatialReference(i.spatialReference.toJSON())}),r.addRing([[o.xmin,o.ymin],[o.xmax,o.ymin],[o.xmax,o.ymax],[o.xmin,o.ymax],[o.xmin,o.ymin]]),a=new s.SimpleLineSymbol):(0,l.A)()?(r=new s.Point(o.center.toJSON()),a=new s.SimpleMarkerSymbol):(0,l.B)()&&(r=new s.Polyline({spatialReference:new s.SpatialReference(i.spatialReference.toJSON())}),r.addPath([[o.xmin,o.ymin],[o.xmax,o.ymax]]),a=new s.SimpleFillSymbol),n=new s.Graphic({geometry:r,symbol:a,attributes:e})}}return n}function r(){var e,t;const{layer:i,mapView:s,modules:n}=l.s;if(!("queryFeatures"in i))return Promise.resolve(a());const o=new n.Query({outFields:["*"],where:"1=1",outSpatialReference:s.spatialReference,returnGeometry:!0,returnM:"hasM"in i&&i.hasM,returnZ:"hasZ"in i&&i.hasZ});return"sourceJSON"in i&&(null===(t=null===(e=i.sourceJSON)||void 0===e?void 0:e.advancedQueryCapabilities)||void 0===t?void 0:t.supportsPagination)&&(o.num=1),i.queryFeatures(o).then((e=>Promise.resolve(e)),(()=>Promise.resolve(a())))}function a(){const{layer:e,modules:t}=l.s,i={};"fields"in e&&e.fields.forEach((e=>{e.defaultValue?i[e.name]=e.defaultValue:["small-integer","big-integer","integer","single","double","long","date","oid"].indexOf(e.type)>-1?i[e.name]=0:"date-only"===e.type?i[e.name]=null:i[e.name]=""}));const s=new t.Graphic({geometry:void 0,symbol:void 0,attributes:i});return new t.FeatureSet({features:[s],fields:[],geometryType:(0,l.E)(),spatialReference:"spatialReference"in e&&e.spatialReference.clone()})}},60496:(e,t,i)=>{i.d(t,{a:()=>l,p:()=>n});const s=96;function l(e){return e?e/72*s:0}function n(e){return e?72*e/s:0}}}]);