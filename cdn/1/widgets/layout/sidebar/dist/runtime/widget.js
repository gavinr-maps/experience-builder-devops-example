System.register(["jimu-core","jimu-layouts/layout-runtime","jimu-ui"],(function(e,t){var o={},i={},s={};return{setters:[function(e){o.AppMode=e.AppMode,o.BaseVersionManager=e.BaseVersionManager,o.Immutable=e.Immutable,o.React=e.React,o.appActions=e.appActions,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.jsx=e.jsx,o.moduleLoader=e.moduleLoader,o.polished=e.polished},function(e){i.LayoutEntry=e.LayoutEntry,i.PageContext=e.PageContext,i.utils=e.utils},function(e){s.Button=e.Button,s.Icon=e.Icon,s.Loading=e.Loading,s.NormalLineType=e.NormalLineType,s.styleUtils=e.styleUtils}],execute:function(){e((()=>{var e={10119:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m14 4-6 8-6-8h12Z" fill="#000"></path></svg>'},30900:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 14 4 8l8-6v12Z" fill="#000"></path></svg>'},98940:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m4 2 8 6-8 6V2Z" fill="#000"></path></svg>'},25280:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m2 12 6-8 6 8H2Z" fill="#000"></path></svg>'},72957:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.854 2.153a.485.485 0 0 0-.708 0 .538.538 0 0 0 0 .738l5.5 5.956a.485.485 0 0 0 .708 0l5.5-5.956a.538.538 0 0 0 0-.738.485.485 0 0 0-.708 0L8 7.74 2.854 2.153Zm0 5a.485.485 0 0 0-.708 0 .538.538 0 0 0 0 .738l5.5 5.956a.485.485 0 0 0 .708 0l5.5-5.956a.538.538 0 0 0 0-.738.485.485 0 0 0-.708 0L8 12.74 2.854 7.153Z" fill="#000"></path></svg>'},59788:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z" fill="#000"></path></svg>'},13930:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.847 2.854a.485.485 0 0 0 0-.708.538.538 0 0 0-.738 0l-5.956 5.5a.485.485 0 0 0 0 .708l5.956 5.5a.538.538 0 0 0 .738 0 .486.486 0 0 0 0-.708L8.26 8l5.587-5.146Zm-5 0a.485.485 0 0 0 0-.708.538.538 0 0 0-.738 0l-5.956 5.5a.485.485 0 0 0 0 .708l5.956 5.5a.538.538 0 0 0 .738 0 .485.485 0 0 0 0-.708L3.26 8l5.587-5.146Z" fill="#000"></path></svg>'},11407:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0Z" fill="#000"></path></svg>'},53622:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.153 13.146a.485.485 0 0 0 0 .708.538.538 0 0 0 .738 0l5.956-5.5a.485.485 0 0 0 0-.708l-5.956-5.5a.538.538 0 0 0-.738 0 .485.485 0 0 0 0 .708L7.74 8l-5.587 5.146Zm5 0a.485.485 0 0 0 0 .708.538.538 0 0 0 .738 0l5.956-5.5a.485.485 0 0 0 0-.708l-5.956-5.5a.538.538 0 0 0-.738 0 .485.485 0 0 0 0 .708L12.74 8l-5.587 5.146Z" fill="#000"></path></svg>'},3273:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.538.538 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.538.538 0 0 1-.738 0Z" fill="#000"></path></svg>'},50427:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.146 13.847a.486.486 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 8.26l5.146 5.587Zm0-5a.485.485 0 0 0 .708 0 .538.538 0 0 0 0-.738l-5.5-5.956a.485.485 0 0 0-.708 0l-5.5 5.956a.538.538 0 0 0 0 .738.485.485 0 0 0 .708 0L8 3.26l5.146 5.587Z" fill="#000"></path></svg>'},96009:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .538.538 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.538.538 0 0 1 0 .738Z" fill="#000"></path></svg>'},48891:e=>{"use strict";e.exports=o},74758:e=>{"use strict";e.exports=i},30726:e=>{"use strict";e.exports=s}},t={};function l(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,l),s.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{default:()=>U});var e,t,o,i,s=l(48891),n=l(74758),a=l(30726);class d extends s.React.PureComponent{render(){const{style:e,className:t,innerLayouts:o,itemStyle:i}=this.props;return s.React.createElement("div",{className:(0,s.classNames)("side d-flex",t),style:Object.assign(Object.assign(Object.assign({},e),a.styleUtils.toCSSStyle(i)),{overflow:"auto"})},s.React.createElement(n.LayoutEntry,{className:"border-0",layouts:o,isInWidget:!0,ignoreMinHeight:!0}))}}!function(e){e.First="FIRST",e.Second="SECOND"}(e||(e={})),function(e){e.Start="START",e.Center="CENTER",e.End="END"}(t||(t={})),function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(o||(o={})),function(e){e.Left="LEFT",e.Right="RIGHT",e.Up="UP",e.Down="DOWN"}(i||(i={})),(0,s.Immutable)({direction:o.Horizontal,collapseSide:e.First,overlay:!1,size:"300px",divider:{visible:!0,lineStyle:{type:a.NormalLineType.SOLID,color:"var(--light-500)",width:"1px"}},resizable:!1,toggleBtn:{visible:!0,icon:i.Left,iconSource:0,offsetX:15,offsetY:0,position:t.Center,iconSize:14,width:15,height:60,border:{type:a.NormalLineType.SOLID,color:"var(--light-500)",width:"1px"},color:{normal:{icon:{useTheme:!1,color:"var(--black)"},bg:{useTheme:!0,color:"var(--light)"}},hover:{bg:{useTheme:!0,color:"var(--light)"}}},expandStyle:{style:{borderRadius:"0 92px 92px 0"}},collapseStyle:{style:{borderRadius:"0 92px 92px 0"}}},defaultState:1});var p=l(11407),c=l.n(p),u=l(3273),h=l.n(u),g=l(96009),v=l.n(g),f=l(59788),S=l.n(f),m=l(13930),x=l.n(m),b=l(53622),y=l.n(b),w=l(50427),$=l.n(w),z=l(72957),L=l.n(z),B=l(30900),R=l.n(B),C=l(98940),j=l.n(C),M=l(25280),N=l.n(M),F=l(10119),I=l.n(F);const H={};H[i.Left]=c(),H[i.Right]=h(),H[i.Up]=v(),H[i.Down]=S();const P={};P[i.Left]=x(),P[i.Right]=y(),P[i.Up]=$(),P[i.Down]=L();const T={};function A(e,t){return 1===t?P[e]:2===t?T[e]:H[e]}T[i.Left]=R(),T[i.Right]=j(),T[i.Up]=N(),T[i.Down]=I();class V extends s.React.PureComponent{getStyle(){var e;const{width:t,height:o,color:i,border:l}=this.props;return s.css`
      padding: 0;
      width: ${t}px;
      height: ${o}px;

      background-color: ${i.normal.bg.color} !important;
      &:hover {
        background-color: ${i.hover.bg.color} !important;
      }

      border: ${null!==(e=a.styleUtils.toCSSBorder(l))&&void 0!==e?e:"none"} !important;

      .jimu-icon {
        margin: 0;
      }
    `}flipStyle(e){if(!this.props.shouldFlip)return e;let t=(0,s.Immutable)(e);if(null!=e.borderRadius){const o=e.borderRadius.split(" ");t=t.set("borderRadius",`${o[1]} ${o[0]} ${o[3]} ${o[2]}`)}return t}render(){const{icon:e,iconSize:t,iconSource:o,style:i,expanded:l,shouldFlip:r,color:n,onClick:d}=this.props,p=r?180:0;return(0,s.jsx)(a.Button,{className:"sidebar-controller d-flex justify-content-center align-items-center",css:this.getStyle(),style:this.flipStyle(i),onClick:d,"aria-expanded":l},(0,s.jsx)(a.Icon,{className:"icon",rotate:l?0+p:180+p,icon:A(e,o),size:t,color:n.normal.icon.color}))}}const E=s.css`
  transition: all 200ms;
`;class Z extends s.React.PureComponent{constructor(e){super(e),this.removeSplitHandler=()=>{null!=this.interactable&&(this.interactable.unset(),this.interactable=null)},this.handleToggleSidebar=e=>{e.stopPropagation(),(0,s.getAppStore)().dispatch(s.appActions.widgetStatePropChange(this.props.widgetId,"collapse",!this.props.sidebarVisible))},this.state={isResizing:!1,deltaSize:0}}componentDidMount(){const{firstLayouts:e,secondLayouts:t,config:o}=this.props;null!=e&&null!=t&&this.bindSplitHandler(),(0,s.getAppStore)().dispatch(s.appActions.widgetStatePropChange(this.props.widgetId,"collapse",0!==o.defaultState))}componentDidUpdate(){const{firstLayouts:e,secondLayouts:t}=this.props;null!=e&&null!=t&&null==this.interactable&&this.bindSplitHandler(),null!=this.interactable&&this.interactable.draggable({startAxis:this.props.direction===o.Horizontal?"x":"y",lockAxis:this.props.direction===o.Horizontal?"x":"y"})}componentWillUnmount(){this.removeSplitHandler()}calSidebarSize(){const{config:e}=this.props;let t;return t=0!==this.state.deltaSize?n.utils.isPercentage(e.size)?`${parseFloat(e.size)*this.domSize/100+this.state.deltaSize}px`:`${parseFloat(e.size)+this.state.deltaSize}px`:e.size,t}createCollapsibleSide(t,i){const{config:l,direction:r}=this.props,n=this.calSidebarSize(),a=this.shouldFlipLeftAndRight();let d;d=r===o.Horizontal?s.css`
        width: ${n};
        transform: ${l.overlay&&!this.props.sidebarVisible?l.collapseSide===e.First?`translateX(-${n})`:`translateX(${n})`:"none"};
        top: ${l.overlay?0:"auto"};
        bottom: ${l.overlay?0:"auto"};
        left: ${l.overlay&&i===e.First?0:"auto"};
        right: ${l.overlay&&i===e.Second?0:"auto"};
      `:s.css`
        height: ${n};
        transform: ${l.overlay&&!this.props.sidebarVisible?l.collapseSide===e.First?`translateY(-${n})`:`translateY(${n})`:"none"};
        left: ${l.overlay?0:"auto"};
        right: ${l.overlay?0:"auto"};
        top: ${l.overlay&&i===e.First?0:"auto"};
        bottom: ${l.overlay&&i===e.Second?0:"auto"};
      `;const p=this.layoutItemComponent;return(0,s.jsx)("div",{css:s.css`
        ${this.state.isResizing?"":E}
        ${d}
        position: ${l.overlay?"absolute":"relative"};
        overflow: visible;
        z-index: 2;
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
      `,className:(0,s.classNames)("d-flex",{"flex-column":r===o.Vertical})},(0,s.jsx)(p,{innerLayouts:t,itemStyle:i===e.First?l.firstPanelStyle:l.secondPanelStyle,collapsed:!this.props.sidebarVisible,className:(0,s.classNames)({"h-100":r===o.Vertical,"w-100":r===o.Horizontal})}),this.createController(a))}splitStyle(){const{direction:t,config:i,appMode:l}=this.props,r=this.calSidebarSize(),n=!this.props.sidebarVisible,d=null!=i.divider&&i.divider.visible&&null!=i.divider.lineStyle?a.styleUtils.toCSSBorder(i.divider.lineStyle):"none";return t===o.Horizontal?s.css`
        width: 1px;
        border-left: ${d};
        position: ${i.overlay?"absolute":"relative"};
        left: ${i.overlay&&!n&&i.collapseSide===e.First?r:"auto"};
        right: ${i.overlay&&!n&&i.collapseSide===e.Second?r:"auto"};
        display: ${n?"none":"block"};
        height: ${i.overlay?"100%":"auto"};
        &:after {
          display: ${i.resizable||l===s.AppMode.Design?"block":"none"};
          position: absolute;
          content: '';
          width: 5px;
          top: 0;
          bottom: 0;
          left: -2px;
          cursor: col-resize;
        }
        z-index: 3;
      `:s.css`
      height: 1px;
      border-top: ${d};
      position: ${i.overlay?"absolute":"relative"};
      top: ${i.overlay&&!n&&i.collapseSide===e.First?r:"auto"};
      bottom: ${i.overlay&&!n&&i.collapseSide===e.Second?r:"auto"};
      display: ${n?"none":"block"};
      width: ${i.overlay?"100%":"auto"};
      &:after {
        display: ${i.resizable||l===s.AppMode.Design?"block":"none"};
        position: absolute;
        content: '';
        height: 5px;
        top: -2px;
        right: 0;
        left: 0;
        cursor: row-resize;
      }
      z-index: 3;
    `}createController(i){const{config:l,theme:r,direction:n}=this.props;if(null!=l.toggleBtn&&!l.toggleBtn.visible)return null;const a=this.props.sidebarVisible?l.toggleBtn.collapseStyle:l.toggleBtn.expandStyle;let d,p,c,u=0,h=0;if(n===o.Horizontal){l.toggleBtn.position===t.Start?d=0:l.toggleBtn.position===t.Center&&(d="50%",h=-l.toggleBtn.height/2);const o=l.collapseSide===e.Second;c=s.css`
        top: ${l.toggleBtn.position!==t.End?d:"auto"};
        bottom: ${l.toggleBtn.position===t.End?0:"auto"};
        right: ${o?"auto":0};
        left: ${o?0:"auto"};
      `}else l.toggleBtn.position===t.Start?p=0:l.toggleBtn.position===t.Center&&(p="50%",u=-l.toggleBtn.width/2),c=s.css`
        left: ${l.toggleBtn.position!==t.End?p:"auto"};
        right: ${l.toggleBtn.position===t.End?0:"auto"};
        bottom: ${l.collapseSide===e.First?0:"auto"};
        top: ${l.collapseSide===e.Second?0:"auto"};
      `;const{style:g}=a,{iconSize:v,width:f,height:S,color:m,icon:x,border:b,iconSource:y}=l.toggleBtn;return(0,s.jsx)("div",{css:s.css`
          ${c}
          position: absolute;
          transform: translate(${l.toggleBtn.offsetX+u}px, ${l.toggleBtn.offsetY+h}px);
        `},(0,s.jsx)(V,{theme:r,icon:x,iconSize:v,expanded:this.props.sidebarVisible,width:f,height:S,color:m,style:g,shouldFlip:i,border:b,iconSource:y,onClick:this.handleToggleSidebar}))}createNormalSide(t,o){const i=this.layoutItemComponent,{config:l}=this.props;return(0,s.jsx)("div",{css:this.state.isResizing?"":E,className:"flex-shrink-0 flex-grow-1 d-flex",style:{zIndex:0,flexBasis:this.props.sidebarVisible?"0":"100%",overflow:"auto"}},(0,s.jsx)(i,{itemStyle:o===e.First?l.firstPanelStyle:l.secondPanelStyle,innerLayouts:t,className:"w-100"}))}shouldFlipLeftAndRight(){const{direction:e}=this.props;return e===o.Horizontal&&(0,s.getAppStore)().getState().appContext.isRTL}render(){const{config:t,firstLayouts:i,secondLayouts:l,direction:r}=this.props;return null==i||null==l?(0,s.jsx)(a.Loading,null):(0,s.jsx)(n.PageContext.Consumer,null,(n=>{const a=n.builderTheme;return(0,s.jsx)("div",{className:(0,s.classNames)("d-flex w-100",{"flex-column":r===o.Vertical}),ref:e=>this.ref=e,css:s.css`
            border: 1px dashed ${null!=a?s.polished.rgba(a.colors.palette.dark[300],.3):""};
            position: relative;
            overflow: hidden;
            justify-content: ${t.collapseSide===e.First?"flex-end":"flex-start"};
            body:not(.design-mode) & {
              border: none;
            }
          `},t.collapseSide===e.First?this.createCollapsibleSide(i,e.First):this.createNormalSide(i,e.First),(0,s.jsx)("div",{css:this.splitStyle(),ref:e=>this.splitRef=e}),t.collapseSide===e.Second?this.createCollapsibleSide(l,e.Second):this.createNormalSide(l,e.Second))}))}}class k extends Z{constructor(e){super(e),this.bindSplitHandler=()=>{null==this.interactModule?s.moduleLoader.loadModule("jimu-core/dnd").then((e=>{this.interactModule=e.interact,this.initHandler()})).catch((e=>{console.error(e)})):this.initHandler()},this.layoutItemComponent=d}initHandler(){const{config:t}=this.props;let i,s;null!=this.splitRef&&t.resizable&&null==this.interactable&&(this.interactable=this.interactModule(this.splitRef).origin("parent").draggable({inertia:!1,autoScroll:!1,modifiers:[this.interactModule.modifiers.restrict({restriction:"parent"})],startAxis:this.props.direction===o.Horizontal?"x":"y",lockAxis:this.props.direction===o.Horizontal?"x":"y",onstart:t=>{t.stopPropagation();const l=this.props.config.collapseSide===e.First?1:-1;if(this.props.direction===o.Horizontal){const e=n.utils.isRTL()?-1:1;i=this.state.deltaSize*l*e,s=0}else i=0,s=this.state.deltaSize*l;const r=this.ref.getBoundingClientRect();this.domSize=this.props.direction===o.Horizontal?r.width:r.height,this.setState({isResizing:!0})},onmove:t=>{if(t.stopPropagation(),i+=t.dx,s+=t.dy,this.props.direction===o.Horizontal){const t=n.utils.isRTL()?-1:1;this.props.config.collapseSide===e.First?this.setState({deltaSize:Math.round(i*t)}):this.setState({deltaSize:-Math.round(i*t)})}else this.props.config.collapseSide===e.First?this.setState({deltaSize:Math.round(s)}):this.setState({deltaSize:-Math.round(s)})},onend:e=>{e.stopPropagation(),this.setState({isResizing:!1})}}))}}class O extends s.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.8.0",description:"Online 10.1.",upgrader:e=>{let t=e;return t=t.setIn(["toggleBtn","color","normal","icon","color"],"var(--dark-800)"),t=t.setIn(["toggleBtn","color","normal","bg","color"],"var(--light-100)"),t=t.setIn(["toggleBtn","color","hover","bg","color"],"var(--light-200)"),t=t.setIn(["toggleBtn","border"],{type:"solid",color:"var(--light-500)",width:"1px"}),t}}]}}const D=new O;class U extends s.React.PureComponent{render(){const{layouts:e,theme:t,builderSupportModules:o}=this.props,i=window.jimuConfig.isInBuilder?o.widgetModules.SidebarLayoutBuilder:k;return null==i?(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"No layout component!"):(0,s.jsx)("div",{className:"widget-sidebar-layout d-flex w-100 h-100"},(0,s.jsx)(i,{theme:t,widgetId:this.props.id,direction:this.props.config.direction,firstLayouts:e.FIRST,secondLayouts:e.SECOND,config:this.props.config,sidebarVisible:this.props.sidebarVisible}))}}U.mapExtraStateProps=(e,t)=>{var o,i,s;return{sidebarVisible:null===(s=null===(i=null===(o=null==e?void 0:e.widgetsState)||void 0===o?void 0:o[t.id])||void 0===i?void 0:i.collapse)||void 0===s||s}},U.versionManager=D})(),r})())}}}));