"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[66361],{66361:(e,a,t)=>{t.r(a),t.d(a,{fromUrl:()=>c});var r=t(70375),n=t(3466),l=t(20692),s=t(8308),i=t(54957),y=t(92557),u=t(40371);const o={FeatureLayer:!0,SceneLayer:!0};async function c(e){const a=e.properties?.customParameters,c=await async function(e,a){let t=(0,l.Qc)(e);if(null==t&&(t=await async function(e,a){const t=await(0,u.T)(e,{customParameters:a});let r=null,s=null;const i=t.type;if("Feature Layer"===i||"Table"===i?(r="FeatureServer",s=t.id??null):"indexedVector"===i?r="VectorTileServer":t.hasOwnProperty("mapName")?r="MapServer":t.hasOwnProperty("bandCount")&&t.hasOwnProperty("pixelSizeX")?r="ImageServer":t.hasOwnProperty("maxRecordCount")&&t.hasOwnProperty("allowGeometryUpdates")?r="FeatureServer":t.hasOwnProperty("streamUrls")?r="StreamServer":f(t)?(r="SceneServer",s=t.id):t.hasOwnProperty("layers")&&f(t.layers?.[0])&&(r="SceneServer"),!r)return null;const y=null!=s?(0,l.DR)(e):null;return{title:null!=y&&t.name||(0,n.vt)(e),serverType:r,sublayer:s,url:{path:null!=y?y.serviceUrl:(0,n.mN)(e).path}}}(e,a)),null==t)throw new r.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:c,sublayer:d}=t;let b;const w={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(c){case"MapServer":b=null!=d?"FeatureLayer":await async function(e,a){return(await(0,u.T)(e,{customParameters:a})).tileInfo}(e,a)?"TileLayer":"MapImageLayer";break;case"ImageServer":{const t=await(0,u.T)(e,{customParameters:a}),{tileInfo:r,cacheType:n}=t;b=r?"LERC"!==r?.format?.toUpperCase()||n&&"elevation"!==n.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const e=await(0,u.T)(t.url.path,{customParameters:a});if(b="SceneLayer",e){const a=e?.layers;if("Voxel"===e?.layerType)b="VoxelLayer";else if(a?.length){const e=a[0]?.layerType;null!=e&&null!=i.fb[e]&&(b=i.fb[e])}}break}default:b=w[c]}const h="FeatureServer"===c,m={parsedUrl:t,Constructor:null,layerOrTableId:h?d:void 0,sublayerIds:null,tableIds:null};if(o[b]&&null==d){const t=await async function(e,a,t){let r,n=!1;if("FeatureServer"===a){const a=await(0,s.V)(e,{customParameters:t});n=!!a.layersJSON,r=a.layersJSON||a.serviceJSON}else r=await(0,u.T)(e,{customParameters:t});const l=r?.layers,i=r?.tables;return{layerIds:l?.map((e=>e.id)).reverse()||[],tableIds:i?.map((e=>e.id)).reverse()||[],layerInfos:n?l:[],tableInfos:n?i:[]}}(e,c,a);h&&(m.sublayerInfos=t.layerInfos,m.tableInfos=t.tableInfos),1!==t.layerIds.length+t.tableIds.length?(m.sublayerIds=t.layerIds,m.tableIds=t.tableIds):h&&(m.layerOrTableId=t.layerIds[0]??t.tableIds[0],m.sourceJSON=t.layerInfos?.[0]??t.tableInfos?.[0])}return m.Constructor=await async function(e){return(0,y.T[e])()}(b),m}(e.url,a),b={...e.properties,url:e.url};if(!c.sublayerIds)return null!=c.layerOrTableId&&(b.layerId=c.layerOrTableId,b.sourceJSON=c.sourceJSON),new c.Constructor(b);const w=new(0,(await t.e(13840).then(t.bind(t,13840))).default)({title:c.parsedUrl.title});return function(e,a,t){function r(e,r){const n={...t,layerId:e,sublayerTitleMode:"service-name"};return null!=r&&(n.sourceJSON=r),new a.Constructor(n)}a.sublayerIds.forEach((t=>{const n=r(t,d(a.sublayerInfos,t));e.add(n)})),a.tableIds.forEach((t=>{const n=r(t,d(a.tableInfos,t));e.tables.add(n)}))}(w,c,b),w}function d(e,a){return e?e.find((e=>e.id===a)):null}function f(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}},8308:(e,a,t)=>{t.d(a,{V:()=>n});var r=t(40371);async function n(e,a){const t=await(0,r.T)(e,a);t.layers=t.layers.filter(l);const n={serviceJSON:t};if((t.currentVersion??0)<10.5)return n;const s=await(0,r.T)(e+"/layers",a);return n.layersJSON={layers:s.layers.filter(l),tables:s.tables},n}function l(e){return!e.type||"Feature Layer"===e.type}},92557:(e,a,t)=>{t.d(a,{T:()=>r});const r={BingMapsLayer:async()=>(await t.e(31968).then(t.bind(t,31968))).default,BuildingSceneLayer:async()=>(await Promise.all([t.e(77324),t.e(46273),t.e(80349),t.e(59871)]).then(t.bind(t,59871))).default,CSVLayer:async()=>(await t.e(89849).then(t.bind(t,89849))).default,DimensionLayer:async()=>(await t.e(10442).then(t.bind(t,10442))).default,ElevationLayer:async()=>(await t.e(90451).then(t.bind(t,90451))).default,FeatureLayer:async()=>(await Promise.resolve().then(t.bind(t,12926))).default,GeoJSONLayer:async()=>(await t.e(81655).then(t.bind(t,81655))).default,GeoRSSLayer:async()=>(await t.e(84417).then(t.bind(t,84417))).default,GroupLayer:async()=>(await t.e(13840).then(t.bind(t,13840))).default,ImageryLayer:async()=>(await Promise.all([t.e(5499),t.e(31434),t.e(73954),t.e(86776)]).then(t.bind(t,38645))).default,ImageryTileLayer:async()=>(await Promise.all([t.e(5499),t.e(31434),t.e(494),t.e(73954),t.e(50455)]).then(t.bind(t,50455))).default,IntegratedMeshLayer:async()=>(await Promise.all([t.e(77324),t.e(96479)]).then(t.bind(t,96479))).default,KMLLayer:async()=>(await t.e(80693).then(t.bind(t,80693))).default,LineOfSightLayer:async()=>(await t.e(64277).then(t.bind(t,64277))).default,LinkChartLayer:async()=>(await Promise.all([t.e(3362),t.e(54718),t.e(2264),t.e(89240)]).then(t.bind(t,89240))).default,MapImageLayer:async()=>(await Promise.all([t.e(54666),t.e(69420)]).then(t.bind(t,69420))).default,MapNotesLayer:async()=>(await t.e(50849).then(t.bind(t,50849))).default,MediaLayer:async()=>(await t.e(44130).then(t.bind(t,44130))).default,OGCFeatureLayer:async()=>(await t.e(53963).then(t.bind(t,53963))).default,OpenStreetMapLayer:async()=>(await t.e(33206).then(t.bind(t,81388))).default,OrientedImageryLayer:async()=>(await t.e(93414).then(t.bind(t,93414))).default,PointCloudLayer:async()=>(await t.e(73108).then(t.bind(t,73108))).default,RouteLayer:async()=>(await Promise.all([t.e(63970),t.e(15015)]).then(t.bind(t,15015))).default,SceneLayer:async()=>(await Promise.all([t.e(77324),t.e(46273),t.e(80349),t.e(74606)]).then(t.bind(t,74606))).default,StreamLayer:async()=>(await t.e(75609).then(t.bind(t,75609))).default,SubtypeGroupLayer:async()=>(await t.e(27764).then(t.bind(t,27764))).default,TileLayer:async()=>(await Promise.all([t.e(54666),t.e(75369)]).then(t.bind(t,75369))).default,UnknownLayer:async()=>(await t.e(40081).then(t.bind(t,40081))).default,UnsupportedLayer:async()=>(await t.e(74864).then(t.bind(t,74864))).default,VectorTileLayer:async()=>(await Promise.all([t.e(83319),t.e(63043),t.e(52138)]).then(t.bind(t,16358))).default,VoxelLayer:async()=>(await t.e(85519).then(t.bind(t,85519))).default,WFSLayer:async()=>(await t.e(84420).then(t.bind(t,84420))).default,WMSLayer:async()=>(await t.e(61936).then(t.bind(t,61936))).default,WMTSLayer:async()=>(await t.e(69862).then(t.bind(t,69862))).default,WebTileLayer:async()=>(await t.e(89859).then(t.bind(t,89859))).default}},40371:(e,a,t)=>{t.d(a,{T:()=>n});var r=t(66341);async function n(e,a){const{data:t}=await(0,r.default)(e,{responseType:"json",query:{f:"json",...a?.customParameters,token:a?.apiKey}});return t}}}]);