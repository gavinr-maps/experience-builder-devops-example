"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[97532],{10110:(e,i,t)=>{t.d(i,{G:()=>a});var s=t(10994),r=t(91907);class a extends s.Z{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(e){const i=this.createRenderParams(e),{context:t,painter:s,profiler:a}=i;this._prevFBO=t.getBoundFramebufferObject(),a.recordContainerStart(this.name);const l=this._getFbo(i),n=s.getRenderTarget();t.bindFramebuffer(l),s.setRenderTarget(l),t.setDepthWriteEnabled(!0),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1);for(const i of this.children)i.beforeRender(e);for(const e of this.children)e.processRender(i);for(const i of this.children)i.afterRender(e);s.setRenderTarget(n),s.releaseFbo(l),t.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(i,this._clippingInfos?255:0,this.computedOpacity),l.colorTexture&&(t.setStencilTestEnabled(!1),t.setStencilWriteMask(0),s.blitTexture(t,l.colorTexture,r.cw.NEAREST)),s.compositeLayer(i,this.computedOpacity),a.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:i,painter:t}=e,{width:s,height:r}=i.getViewport();return t.acquireFbo(s,r)}}},97532:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var s=t(36663),r=(t(13802),t(7283),t(7753),t(39994),t(70375),t(40266)),a=t(10110),l=t(80347),n=t(6865),h=t(58811),d=t(76868),o=t(81977),y=t(26216);let c=class extends y.Z{constructor(e){super(e),this.type="group",this.layerViews=new n.Z}destroy(){this.handles.removeAll(),this.layerViews.length=0}_allLayerViewVisibility(e){this.layerViews.forEach((i=>{i.visible=e}))}initialize(){this.handles.add([this.layerViews.on("change",(e=>this._layerViewsChangeHandler(e))),(0,d.YP)((()=>this.layer?.visibilityMode),(()=>{this.layer&&this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))}),d.Z_),(0,d.YP)((()=>this.visible),(e=>{this._applyVisibility((()=>this._allLayerViewVisibility(e)),(()=>{}))}),d.Z_)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(e){this._set("layerViews",(0,h.Z)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden("visible")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return!!i?.visible}));return e&&this._findLayerViewForLayer(e)}_applyExclusiveVisibility(e){null==e&&null==(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.at(0))),this.layerViews.forEach((i=>{i.visible=i===e}))}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map((e=>(0,d.YP)((()=>e.visible),(i=>this._applyVisibility((()=>{i!==this.visible&&(e.visible=this.visible)}),(()=>this._applyExclusiveVisibility(i?e:null)))),d.Z_))).toArray(),"grouplayerview:visible");const i=e.added[e.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(i?.visible?i:null)))}_applyVisibility(e,i){this._hasLayerViewVisibleOverrides()&&("inherited"===this.layer?.visibilityMode?e():"exclusive"===this.layer?.visibilityMode&&i())}};(0,s._)([(0,o.Cb)({cast:h.R})],c.prototype,"layerViews",null),(0,s._)([(0,o.Cb)({readOnly:!0})],c.prototype,"updatingProgress",null),(0,s._)([(0,o.Cb)()],c.prototype,"view",void 0),c=(0,s._)([(0,r.j)("esri.views.layers.GroupLayerView")],c);const p=c;let b=class extends((0,l.y)(p)){constructor(){super(...arguments),this.container=new a.G}attach(){this._updateStageChildren(),this.addAttachHandles(this.layerViews.on("after-changes",(()=>this._updateStageChildren())))}detach(){this.container.removeAllChildren()}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,i)=>this.container.addChildAt(e.container,i)))}};b=(0,s._)([(0,r.j)("esri.views.2d.layers.GroupLayerView2D")],b);const u=b}}]);