define(["require","exports","esri/request","esri/core/urlUtils","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/identity/IdentityManager","esri/core/reactiveUtils","esri/rest/support/Query","esri/core/promiseUtils","esri/portal/PortalItemResource","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/layers/Layer","esri/portal/PortalItem","esri/layers/support/Field","esri/renderers/Renderer","esri/rest/support/FeatureSet","esri/config","esri/smartMapping/statistics/uniqueValues","esri/rest/support/JobInfo","esri/rest/geoprocessor","esri/core/sql"],(function(e,t,r,n,o,i,a,s,l,c,u,f,d,p,y,v,h,m,b,g,$,j,w,_){"use strict";function S(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var P=S(r),E=O(n),I=S(s),A=S(d),T=O(p),N=S(y),k=S(v),L=S(h),R=S(m),x=S(b),U=S(g),C=O(w);let z,D,F,M=!1,G=!1,V=!1,B=!1,J=null,K=!1;const H="http://www.w3.org/1999/xlink",Y={},q=e=>"object"==(e=typeof e)||"function"===e,W=(e,t,...r)=>{let n=null,o=null,i=null,a=!1,s=!1;const l=[],c=t=>{for(let r=0;r<t.length;r++)n=t[r],Array.isArray(n)?c(n):null!=n&&"boolean"!=typeof n&&((a="function"!=typeof e&&!q(n))&&(n=String(n)),a&&s?l[l.length-1].$text$+=n:l.push(a?Q(null,n):n),s=a)};if(c(r),t&&(t.key&&(o=t.key),t.name&&(i=t.name),true)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if("function"==typeof e)return e(null===t?{}:t,l,ee);const u=Q(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=o,u.$name$=i,u},Q=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return r},X={},Z=e=>e&&e.$tag$===X,ee={forEach:(e,t)=>e.map(te).forEach(t),map:(e,t)=>e.map(te).map(t).map(re)},te=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),re=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),W(e.vtag,t,...e.vchildren||[])}const t=Q(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},ne=new WeakMap,oe=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),ie=(e,t,r,n,o,i)=>{if(r!==n){let a=Ue(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,o=se(r),i=se(n);t.remove(...o.filter((e=>e&&!i.includes(e)))),t.add(...i.filter((e=>e&&!o.includes(e))))}else if("style"===t){for(const t in r)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)r&&n[t]===r[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=q(n);if((a||l&&null!==n)&&!o)try{if(e.tagName.includes("-"))e[t]=n;else{const o=null==n?"":n;"list"===t?a=!1:null!=r&&e[t]==o||(e[t]=o)}}catch(e){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(H,t):e.removeAttribute(t)):(!a||4&i||o)&&!l&&(n=!0===n?"":n,c?e.setAttributeNS(H,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):Ue(Fe,s)?s.slice(2):s[2]+t.slice(3),r&&Ve.rel(e,t,r,!1),n&&Ve.ael(e,t,n,!1)}},ae=/\s/,se=e=>e?e.split(ae):[],le=(e,t,r,n)=>{const o=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Y,a=t.$attrs$||Y;for(n in i)n in a||ie(o,n,i[n],void 0,r,t.$flags$);for(n in a)ie(o,n,i[n],a[n],r,t.$flags$)},ce=(e,t,r,n)=>{const o=t.$children$[r];let i,a,s,l=0;if(M||(V=!0,"slot"===o.$tag$&&(z&&n.classList.add(z+"-s"),o.$flags$|=o.$children$?2:1)),null!==o.$text$)i=o.$elm$=Me.createTextNode(o.$text$);else if(1&o.$flags$)i=o.$elm$=Me.createTextNode("");else{if(B||(B="svg"===o.$tag$),i=o.$elm$=Me.createElementNS(B?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&o.$flags$?"slot-fb":o.$tag$),B&&"foreignObject"===o.$tag$&&(B=!1),le(null,o,B),null!=z&&i["s-si"]!==z&&i.classList.add(i["s-si"]=z),o.$children$)for(l=0;l<o.$children$.length;++l)a=ce(e,o,l,i),a&&i.appendChild(a);"svg"===o.$tag$?B=!1:"foreignObject"===i.tagName&&(B=!0)}return i["s-hn"]=F,3&o.$flags$&&(i["s-sr"]=!0,i["s-cr"]=D,i["s-sn"]=o.$name$||"",s=e&&e.$children$&&e.$children$[r],s&&s.$tag$===o.$tag$&&e.$elm$&&ue(e.$elm$,!1)),i},ue=(e,t)=>{Ve.$flags$|=1;const r=e.childNodes;for(let e=r.length-1;e>=0;e--){const n=r[e];n["s-hn"]!==F&&n["s-ol"]&&(ve(n).insertBefore(n,ye(n)),n["s-ol"].remove(),n["s-ol"]=void 0,V=!0),t&&ue(n,t)}Ve.$flags$&=-2},fe=(e,t,r,n,o,i)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===F&&(s=s.shadowRoot);o<=i;++o)n[o]&&(a=ce(null,r,o,e),a&&(n[o].$elm$=a,s.insertBefore(a,ye(t))))},de=(e,t,r,n,o)=>{for(;t<=r;++t)(n=e[t])&&(o=n.$elm$,je(n),G=!0,o["s-ol"]?o["s-ol"].remove():ue(o,!0),o.remove())},pe=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),ye=e=>e&&e["s-ol"]||e,ve=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,he=(e,t)=>{const r=t.$elm$=e.$elm$,n=e.$children$,o=t.$children$,i=t.$tag$,a=t.$text$;let s;null===a?(B="svg"===i||"foreignObject"!==i&&B,"slot"===i||le(e,t,B),null!==n&&null!==o?((e,t,r,n)=>{let o,i,a=0,s=0,l=0,c=0,u=t.length-1,f=t[0],d=t[u],p=n.length-1,y=n[0],v=n[p];for(;a<=u&&s<=p;)if(null==f)f=t[++a];else if(null==d)d=t[--u];else if(null==y)y=n[++s];else if(null==v)v=n[--p];else if(pe(f,y))he(f,y),f=t[++a],y=n[++s];else if(pe(d,v))he(d,v),d=t[--u],v=n[--p];else if(pe(f,v))"slot"!==f.$tag$&&"slot"!==v.$tag$||ue(f.$elm$.parentNode,!1),he(f,v),e.insertBefore(f.$elm$,d.$elm$.nextSibling),f=t[++a],v=n[--p];else if(pe(d,y))"slot"!==f.$tag$&&"slot"!==v.$tag$||ue(d.$elm$.parentNode,!1),he(d,y),e.insertBefore(d.$elm$,f.$elm$),d=t[--u],y=n[++s];else{for(l=-1,c=a;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===y.$key$){l=c;break}l>=0?(i=t[l],i.$tag$!==y.$tag$?o=ce(t&&t[s],r,l,e):(he(i,y),t[l]=void 0,o=i.$elm$),y=n[++s]):(o=ce(t&&t[s],r,s,e),y=n[++s]),o&&ve(f.$elm$).insertBefore(o,ye(f.$elm$))}a>u?fe(e,null==n[p+1]?null:n[p+1].$elm$,r,n,s,p):s>p&&de(t,a,u)})(r,n,t,o):null!==o?(null!==e.$text$&&(r.textContent=""),fe(r,null,t,o,0,o.length-1)):null!==n&&de(n,0,n.length-1),B&&"svg"===i&&(B=!1)):(s=r["s-cr"])?s.parentNode.textContent=a:e.$text$!==a&&(r.data=a)},me=e=>{const t=e.childNodes;let r,n,o,i,a,s;for(n=0,o=t.length;n<o;n++)if(r=t[n],1===r.nodeType){if(r["s-sr"])for(a=r["s-sn"],r.hidden=!1,i=0;i<o;i++)if(s=t[i].nodeType,t[i]["s-hn"]!==r["s-hn"]||""!==a){if(1===s&&a===t[i].getAttribute("slot")){r.hidden=!0;break}}else if(1===s||3===s&&""!==t[i].textContent.trim()){r.hidden=!0;break}me(r)}},be=[],ge=e=>{let t,r,n,o,i,a,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(r=t["s-cr"])&&r.parentNode)for(n=r.parentNode.childNodes,o=t["s-sn"],a=n.length-1;a>=0;a--)r=n[a],r["s-cn"]||r["s-nr"]||r["s-hn"]===t["s-hn"]||($e(r,o)?(i=be.find((e=>e.$nodeToRelocate$===r)),G=!0,r["s-sn"]=r["s-sn"]||o,i?i.$slotRefNode$=t:be.push({$slotRefNode$:t,$nodeToRelocate$:r}),r["s-sr"]&&be.map((e=>{$e(e.$nodeToRelocate$,r["s-sn"])&&(i=be.find((e=>e.$nodeToRelocate$===r)),i&&!e.$slotRefNode$&&(e.$slotRefNode$=i.$slotRefNode$))}))):be.some((e=>e.$nodeToRelocate$===r))||be.push({$nodeToRelocate$:r}));1===t.nodeType&&ge(t)}},$e=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,je=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(je)},we=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,Qe((()=>_e(e,t)))),_e=(e,t)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),o=r;let i;return i=Ee(o,t?"componentWillLoad":"componentWillUpdate"),i=Ie(i,(()=>Ee(o,"componentWillRender"))),n(),Ie(i,(()=>Se(e,o,t)))},Se=async(e,t,r)=>{const n=e.$hostElement$,o=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],r&&(e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,o=(t.$tagName$,()=>{}),i=((e,t,r,n)=>{var o;let i=oe(t,r);const a=ze.get(i);if(e=11===e.nodeType?e:Me,a)if("string"==typeof a){e=e.head||e;let t,r=ne.get(e);if(r||ne.set(e,r=new Set),!r.has(i)){{t=Me.createElement("style"),t.innerHTML=a;const r=null!==(o=Ve.$nonce$)&&void 0!==o?o:function(e){var t,r,n;return null!==(n=null===(r=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===r?void 0:r.getAttribute("content"))&&void 0!==n?n:void 0}(Me);null!=r&&t.setAttribute("nonce",r),e.insertBefore(t,e.querySelector("link"))}r&&r.add(i)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return i})(Be&&r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);10&n&&(r["s-sc"]=i,r.classList.add(i+"-h"),2&n&&r.classList.add(i+"-s")),o()})(e);const i=(e.$cmpMeta$.$tagName$,()=>{});Oe(e,t,n),i(),o(),Pe(e)},Oe=(e,t,r)=>{try{J=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const r=e.$hostElement$,n=e.$cmpMeta$,o=e.$vnode$||Q(null,null),i=Z(t)?t:W(null,null,t);if(F=r.tagName,n.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},n.$attrsToReflect$.map((([e,t])=>i.$attrs$[t]=r[e]))),i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=o.$elm$=r.shadowRoot||r,z=r["s-sc"],D=r["s-cr"],M=Be&&0!=(1&n.$flags$),G=!1,he(o,i),Ve.$flags$|=1,V){let e,t,r,n,o,a;ge(i.$elm$);let s=0;for(;s<be.length;s++)e=be[s],t=e.$nodeToRelocate$,t["s-ol"]||(r=Me.createTextNode(""),r["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=r,t));for(s=0;s<be.length;s++)if(e=be[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,o=e.$slotRefNode$.nextSibling,r=t["s-ol"];r=r.previousSibling;)if(a=r["s-nr"],a&&a["s-sn"]===t["s-sn"]&&n===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){o=a;break}(!o&&n!==t.parentNode||t.nextSibling!==o)&&t!==o&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,o))}else 1===t.nodeType&&(t.hidden=!0)}G&&me(i.$elm$),Ve.$flags$&=-2,be.length=0})(e,t)}catch(t){Ce(t,e.$hostElement$)}return J=null,null},Pe=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Ee(t,"componentDidRender"),64&e.$flags$?Ee(t,"componentDidUpdate"):(e.$flags$|=64,Ee(t,"componentDidLoad"))},Ee=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){Ce(e)}},Ie=(e,t)=>e&&e.then?e.then(t):t(),Ae=(e,t,r)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;r.map((([e,[r]])=>{(31&r||32&r)&&Object.defineProperty(n,e,{get(){return t=e,xe(this).$instanceValues$.get(t);var t},set(r){((e,t,r,n)=>{const o=xe(e),i=e,a=o.$instanceValues$.get(t),s=o.$flags$,l=i;var c,u;c=r,u=n.$members$[t][0],r=null==c||q(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const f=Number.isNaN(a)&&Number.isNaN(r);if(r!==a&&!f){if(o.$instanceValues$.set(t,r),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map((e=>{try{l[e](r,a,t)}catch(e){Ce(e,i)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(r,a,t))return;we(o,!1)}}})(this,e,r,t)},configurable:!0,enumerable:!0})}));{const o=new Map;n.attributeChangedCallback=function(e,t,r){Ve.jmp((()=>{const t=o.get(e);if(this.hasOwnProperty(t))r=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==r)return;this[t]=(null!==r||"boolean"!=typeof this[t])&&r}))},e.observedAttributes=r.filter((([e,t])=>15&t[0])).map((([e,r])=>{const n=r[1]||e;return o.set(n,e),512&r[0]&&t.$attrsToReflect$.push([e,n]),n}))}}return e},Te=(e,t,r,n)=>{r&&r.map((([r,n,o])=>{const i=ke(e,r),a=Ne(t,o),s=Le(r);Ve.ael(i,n,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Ve.rel(i,n,a,s)))}))},Ne=(e,t)=>r=>{try{e.$hostElement$[t](r)}catch(e){Ce(e)}},ke=(e,t)=>4&t?Me:8&t?Fe:16&t?Me.body:e,Le=e=>Je?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Re=new WeakMap,xe=e=>Re.get(e),Ue=(e,t)=>t in e,Ce=(e,t)=>(0,console.error)(e,t),ze=new Map,De=[],Fe="undefined"!=typeof window?window:{},Me=Fe.document||{head:{}},Ge=Fe.HTMLElement||class{},Ve={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},Be=!0,Je=(()=>{let e=!1;try{Me.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Ke=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),He=[],Ye=[],qe=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){Ce(e)}e.length=0},We=()=>{qe(He),qe(Ye),(K=He.length>0)&&Ve.raf(We)},Qe=(Xe=Ye,!0,e=>{Xe.push(e),K||(K=!0,4&Ve.$flags$?(e=>{Promise.resolve(void 0).then(e)})(We):Ve.raf(We))});var Xe;function Ze(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))}var et="object"==typeof global&&global&&global.Object===Object&&global,tt="object"==typeof self&&self&&self.Object===Object&&self,rt=et||tt||Function("return this")(),nt=rt.Symbol,ot=Object.prototype,it=ot.hasOwnProperty,at=ot.toString,st=nt?nt.toStringTag:void 0,lt=Object.prototype.toString,ct="[object Null]",ut="[object Undefined]",ft=nt?nt.toStringTag:void 0;function dt(e){return null==e?void 0===e?ut:ct:ft&&ft in Object(e)?function(e){var t=it.call(e,st),r=e[st];try{e[st]=void 0;var n=!0}catch(e){}var o=at.call(e);return n&&(t?e[st]=r:delete e[st]),o}(e):function(e){return lt.call(e)}(e)}function pt(e){return null!=e&&"object"==typeof e}var yt="[object Symbol]";function vt(e){return"symbol"==typeof e||pt(e)&&dt(e)==yt}function ht(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var mt=Array.isArray,bt=1/0,gt=nt?nt.prototype:void 0,$t=gt?gt.toString:void 0;function jt(e){if("string"==typeof e)return e;if(mt(e))return ht(e,jt)+"";if(vt(e))return $t?$t.call(e):"";var t=e+"";return"0"==t&&1/e==-bt?"-0":t}function wt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _t(e){return e}var St="[object AsyncFunction]",Ot="[object Function]",Pt="[object GeneratorFunction]",Et="[object Proxy]";function It(e){if(!wt(e))return!1;var t=dt(e);return t==Ot||t==Pt||t==St||t==Et}var At,Tt=rt["__core-js_shared__"],Nt=(At=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+At:"",kt=Function.prototype.toString;function Lt(e){if(null!=e){try{return kt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Rt=/^\[object .+?Constructor\]$/,xt=Function.prototype,Ut=Object.prototype,Ct=xt.toString,zt=Ut.hasOwnProperty,Dt=RegExp("^"+Ct.call(zt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ft(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!wt(e)||(t=e,Nt&&Nt in t))&&(It(e)?Dt:Rt).test(Lt(e));var t}(r)?r:void 0}var Mt=Ft(rt,"WeakMap"),Gt=Object.create,Vt=function(){function e(){}return function(t){if(!wt(t))return{};if(Gt)return Gt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Bt=Vt;function Jt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Kt=Date.now;function Ht(e){return function(){return e}}var Yt,qt,Wt,Qt=function(){try{var e=Ft(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Xt=Qt,Zt=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:Ht(t),writable:!0})}:_t,er=(Yt=Zt,qt=0,Wt=0,function(){var e=Kt(),t=16-(e-Wt);if(Wt=e,t>0){if(++qt>=800)return arguments[0]}else qt=0;return Yt.apply(void 0,arguments)}),tr=er;function rr(e){return e!=e}function nr(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t):function(e,t,r,n){for(var o=e.length,i=-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,rr)}(e,t)>-1}var or=9007199254740991,ir=/^(?:0|[1-9]\d*)$/;function ar(e,t){var r=typeof e;return!!(t=null==t?or:t)&&("number"==r||"symbol"!=r&&ir.test(e))&&e>-1&&e%1==0&&e<t}function sr(e,t,r){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function lr(e,t){return e===t||e!=e&&t!=t}var cr=Object.prototype.hasOwnProperty;function ur(e,t,r){var n=e[t];cr.call(e,t)&&lr(n,r)&&(void 0!==r||t in e)||sr(e,t,r)}function fr(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?sr(r,s,l):ur(r,s,l)}return r}var dr=Math.max;function pr(e,t,r){return t=dr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=dr(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),Jt(e,this,s)}}function yr(e,t){return tr(pr(e,t,_t),e+"")}var vr=9007199254740991;function hr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=vr}function mr(e){return null!=e&&hr(e.length)&&!It(e)}function br(e,t,r){if(!wt(r))return!1;var n=typeof t;return!!("number"==n?mr(r)&&ar(t,r.length):"string"==n&&t in r)&&lr(r[t],e)}function gr(e){return yr((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&br(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}var $r=Object.prototype;function jr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$r)}function wr(e){return pt(e)&&"[object Arguments]"==dt(e)}var _r=Object.prototype,Sr=_r.hasOwnProperty,Or=_r.propertyIsEnumerable,Pr=wr(function(){return arguments}())?wr:function(e){return pt(e)&&Sr.call(e,"callee")&&!Or.call(e,"callee")},Er=Pr,Ir="object"==typeof t&&t&&!t.nodeType&&t,Ar=Ir&&"object"==typeof module&&module&&!module.nodeType&&module,Tr=Ar&&Ar.exports===Ir?rt.Buffer:void 0,Nr=(Tr?Tr.isBuffer:void 0)||function(){return!1},kr={};function Lr(e){return function(t){return e(t)}}kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Arguments]"]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object Boolean]"]=kr["[object DataView]"]=kr["[object Date]"]=kr["[object Error]"]=kr["[object Function]"]=kr["[object Map]"]=kr["[object Number]"]=kr["[object Object]"]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object WeakMap]"]=!1;var Rr="object"==typeof t&&t&&!t.nodeType&&t,xr=Rr&&"object"==typeof module&&module&&!module.nodeType&&module,Ur=xr&&xr.exports===Rr&&et.process,Cr=function(){try{return xr&&xr.require&&xr.require("util").types||Ur&&Ur.binding&&Ur.binding("util")}catch(e){}}(),zr=Cr&&Cr.isTypedArray,Dr=zr?Lr(zr):function(e){return pt(e)&&hr(e.length)&&!!kr[dt(e)]},Fr=Dr,Mr=Object.prototype.hasOwnProperty;function Gr(e,t){var r=mt(e),n=!r&&Er(e),o=!r&&!n&&Nr(e),i=!r&&!n&&!o&&Fr(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!Mr.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ar(c,l))||s.push(c);return s}function Vr(e,t){return function(r){return e(t(r))}}var Br=Vr(Object.keys,Object),Jr=Object.prototype.hasOwnProperty;function Kr(e){if(!jr(e))return Br(e);var t=[];for(var r in Object(e))Jr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Hr(e){return mr(e)?Gr(e):Kr(e)}var Yr=Object.prototype.hasOwnProperty,qr=gr((function(e,t){if(jr(t)||mr(t))fr(t,Hr(t),e);else for(var r in t)Yr.call(t,r)&&ur(e,r,t[r])})),Wr=qr,Qr=Object.prototype.hasOwnProperty;function Xr(e){return mr(e)?Gr(e,!0):function(e){if(!wt(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=jr(e),r=[];for(var n in e)("constructor"!=n||!t&&Qr.call(e,n))&&r.push(n);return r}(e)}var Zr=gr((function(e,t,r,n){fr(t,Xr(t),e,n)})),en=Zr,tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rn=/^\w*$/;function nn(e,t){if(mt(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!vt(e))||rn.test(e)||!tn.test(e)||null!=t&&e in Object(t)}var on=Ft(Object,"create"),an=Object.prototype.hasOwnProperty,sn=Object.prototype.hasOwnProperty;function ln(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function cn(e,t){for(var r=e.length;r--;)if(lr(e[r][0],t))return r;return-1}ln.prototype.clear=function(){this.__data__=on?on(null):{},this.size=0},ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ln.prototype.get=function(e){var t=this.__data__;if(on){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return an.call(t,e)?t[e]:void 0},ln.prototype.has=function(e){var t=this.__data__;return on?void 0!==t[e]:sn.call(t,e)},ln.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=on&&void 0===t?"__lodash_hash_undefined__":t,this};var un=Array.prototype.splice;function fn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fn.prototype.clear=function(){this.__data__=[],this.size=0},fn.prototype.delete=function(e){var t=this.__data__,r=cn(t,e);return!(r<0||(r==t.length-1?t.pop():un.call(t,r,1),--this.size,0))},fn.prototype.get=function(e){var t=this.__data__,r=cn(t,e);return r<0?void 0:t[r][1]},fn.prototype.has=function(e){return cn(this.__data__,e)>-1},fn.prototype.set=function(e,t){var r=this.__data__,n=cn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var dn=Ft(rt,"Map");function pn(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yn.prototype.clear=function(){this.size=0,this.__data__={hash:new ln,map:new(dn||fn),string:new ln}},yn.prototype.delete=function(e){var t=pn(this,e).delete(e);return this.size-=t?1:0,t},yn.prototype.get=function(e){return pn(this,e).get(e)},yn.prototype.has=function(e){return pn(this,e).has(e)},yn.prototype.set=function(e,t){var r=pn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function vn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(vn.Cache||yn),r}vn.Cache=yn;var hn,mn,bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,$n=(hn=vn((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(bn,(function(e,r,n,o){t.push(n?o.replace(gn,"$1"):r||e)})),t}),(function(e){return 500===mn.size&&mn.clear(),e})),mn=hn.cache,hn);function jn(e){return null==e?"":jt(e)}function wn(e,t){return mt(e)?e:nn(e,t)?[e]:$n(jn(e))}var _n=1/0;function Sn(e){if("string"==typeof e||vt(e))return e;var t=e+"";return"0"==t&&1/e==-_n?"-0":t}function On(e,t){for(var r=0,n=(t=wn(t,e)).length;null!=e&&r<n;)e=e[Sn(t[r++])];return r&&r==n?e:void 0}function Pn(e,t,r){var n=null==e?void 0:On(e,t);return void 0===n?r:n}function En(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var In=nt?nt.isConcatSpreadable:void 0;function An(e){return mt(e)||Er(e)||!!(In&&e&&e[In])}function Tn(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=An),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?Tn(s,t-1,r,n,o):En(o,s):n||(o[o.length]=s)}return o}function Nn(e){return null!=e&&e.length?Tn(e,1):[]}function kn(e){return tr(pr(e,void 0,Nn),e+"")}var Ln=Vr(Object.getPrototypeOf,Object),Rn="[object Object]",xn=Function.prototype,Un=Object.prototype,Cn=xn.toString,zn=Un.hasOwnProperty,Dn=Cn.call(Object);function Fn(e){if(!pt(e)||dt(e)!=Rn)return!1;var t=Ln(e);if(null===t)return!0;var r=zn.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Cn.call(r)==Dn}var Mn="[object DOMException]",Gn="[object Error]";function Vn(e){if(!pt(e))return!1;var t=dt(e);return t==Gn||t==Mn||"string"==typeof e.message&&"string"==typeof e.name&&!Fn(e)}var Bn=yr((function(e,t){try{return Jt(e,void 0,t)}catch(e){return Vn(e)?e:new Error(e)}})),Jn=Bn;function Kn(e){var t=this.__data__=new fn(e);this.size=t.size}Kn.prototype.clear=function(){this.__data__=new fn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof fn){var n=r.__data__;if(!dn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new yn(n)}return r.set(e,t),this.size=r.size,this};var Hn="object"==typeof t&&t&&!t.nodeType&&t,Yn=Hn&&"object"==typeof module&&module&&!module.nodeType&&module,qn=Yn&&Yn.exports===Hn?rt.Buffer:void 0,Wn=qn?qn.allocUnsafe:void 0;function Qn(){return[]}var Xn=Object.prototype.propertyIsEnumerable,Zn=Object.getOwnPropertySymbols,eo=Zn?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,o=null==t?0:t.length,i=0,a=[];++n<o;){var s=t[n];l=s,Xn.call(e,l)&&(a[i++]=s)}var l;return a}(Zn(e)))}:Qn,to=eo,ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)En(t,to(e)),e=Ln(e);return t}:Qn,no=ro;function oo(e,t,r){var n=t(e);return mt(e)?n:En(n,r(e))}function io(e){return oo(e,Hr,to)}function ao(e){return oo(e,Xr,no)}var so=Ft(rt,"DataView"),lo=Ft(rt,"Promise"),co=Ft(rt,"Set"),uo="[object Map]",fo="[object Promise]",po="[object Set]",yo="[object WeakMap]",vo="[object DataView]",ho=Lt(so),mo=Lt(dn),bo=Lt(lo),go=Lt(co),$o=Lt(Mt),jo=dt;(so&&jo(new so(new ArrayBuffer(1)))!=vo||dn&&jo(new dn)!=uo||lo&&jo(lo.resolve())!=fo||co&&jo(new co)!=po||Mt&&jo(new Mt)!=yo)&&(jo=function(e){var t=dt(e),r="[object Object]"==t?e.constructor:void 0,n=r?Lt(r):"";if(n)switch(n){case ho:return vo;case mo:return uo;case bo:return fo;case go:return po;case $o:return yo}return t});var wo=jo,_o=Object.prototype.hasOwnProperty,So=rt.Uint8Array;function Oo(e){var t=new e.constructor(e.byteLength);return new So(t).set(new So(e)),t}var Po=/\w*$/,Eo=nt?nt.prototype:void 0,Io=Eo?Eo.valueOf:void 0,Ao="[object Boolean]",To="[object Date]",No="[object Map]",ko="[object Number]",Lo="[object RegExp]",Ro="[object Set]",xo="[object String]",Uo="[object Symbol]",Co="[object ArrayBuffer]",zo="[object DataView]",Do="[object Float32Array]",Fo="[object Float64Array]",Mo="[object Int8Array]",Go="[object Int16Array]",Vo="[object Int32Array]",Bo="[object Uint8Array]",Jo="[object Uint8ClampedArray]",Ko="[object Uint16Array]",Ho="[object Uint32Array]";var Yo=Cr&&Cr.isMap,qo=Yo?Lr(Yo):function(e){return pt(e)&&"[object Map]"==wo(e)},Wo=qo,Qo=Cr&&Cr.isSet,Xo=Qo?Lr(Qo):function(e){return pt(e)&&"[object Set]"==wo(e)},Zo=Xo,ei="[object Arguments]",ti="[object Function]",ri="[object Object]",ni={};function oi(e,t,r,n,o,i){var a,s=1&t,l=2&t,c=4&t;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!wt(e))return e;var u=mt(e);if(u){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&_o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,a)}else{var f=wo(e),d=f==ti||"[object GeneratorFunction]"==f;if(Nr(e))return function(e,t){if(t)return e.slice();var r=e.length,n=Wn?Wn(r):new e.constructor(r);return e.copy(n),n}(e,s);if(f==ri||f==ei||d&&!o){if(a=l||d?{}:function(e){return"function"!=typeof e.constructor||jr(e)?{}:Bt(Ln(e))}(e),!s)return l?function(e,t){return fr(e,no(e),t)}(e,function(e,t){return e&&fr(t,Xr(t),e)}(a,e)):function(e,t){return fr(e,to(e),t)}(e,function(e,t){return e&&fr(t,Hr(t),e)}(a,e))}else{if(!ni[f])return o?e:{};a=function(e,t,r){var n,o,i,a=e.constructor;switch(t){case Co:return Oo(e);case Ao:case To:return new a(+e);case zo:return function(e,t){var r=t?Oo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Do:case Fo:case Mo:case Go:case Vo:case Bo:case Jo:case Ko:case Ho:return function(e,t){var r=t?Oo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case No:return new a;case ko:case xo:return new a(e);case Lo:return(i=new(o=e).constructor(o.source,Po.exec(o))).lastIndex=o.lastIndex,i;case Ro:return new a;case Uo:return n=e,Io?Object(Io.call(n)):{}}}(e,f,s)}}i||(i=new Kn);var p=i.get(e);if(p)return p;i.set(e,a),Zo(e)?e.forEach((function(n){a.add(oi(n,t,r,n,e,i))})):Wo(e)&&e.forEach((function(n,o){a.set(o,oi(n,t,r,o,e,i))}));var y=u?void 0:(c?l?ao:io:l?Xr:Hr)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r););}(y||e,(function(n,o){y&&(n=e[o=n]),ur(a,o,oi(n,t,r,o,e,i))})),a}function ii(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new yn;++t<r;)this.add(e[t])}function ai(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function si(e,t){return e.has(t)}ni[ei]=ni["[object Array]"]=ni["[object ArrayBuffer]"]=ni["[object DataView]"]=ni["[object Boolean]"]=ni["[object Date]"]=ni["[object Float32Array]"]=ni["[object Float64Array]"]=ni["[object Int8Array]"]=ni["[object Int16Array]"]=ni["[object Int32Array]"]=ni["[object Map]"]=ni["[object Number]"]=ni[ri]=ni["[object RegExp]"]=ni["[object Set]"]=ni["[object String]"]=ni["[object Symbol]"]=ni["[object Uint8Array]"]=ni["[object Uint8ClampedArray]"]=ni["[object Uint16Array]"]=ni["[object Uint32Array]"]=!0,ni["[object Error]"]=ni[ti]=ni["[object WeakMap]"]=!1,ii.prototype.add=ii.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ii.prototype.has=function(e){return this.__data__.has(e)};var li=1,ci=2;function ui(e,t,r,n,o,i){var a=r&li,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var f=-1,d=!0,p=r&ci?new ii:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var y=e[f],v=t[f];if(n)var h=a?n(v,y,f,t,e,i):n(y,v,f,e,t,i);if(void 0!==h){if(h)continue;d=!1;break}if(p){if(!ai(t,(function(e,t){if(!si(p,t)&&(y===e||o(y,e,r,n,i)))return p.push(t)}))){d=!1;break}}else if(y!==v&&!o(y,v,r,n,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function fi(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function di(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var pi=1,yi=2,vi="[object Boolean]",hi="[object Date]",mi="[object Error]",bi="[object Map]",gi="[object Number]",$i="[object RegExp]",ji="[object Set]",wi="[object String]",_i="[object Symbol]",Si="[object ArrayBuffer]",Oi="[object DataView]",Pi=nt?nt.prototype:void 0,Ei=Pi?Pi.valueOf:void 0,Ii=1,Ai=Object.prototype.hasOwnProperty,Ti=1,Ni="[object Arguments]",ki="[object Array]",Li="[object Object]",Ri=Object.prototype.hasOwnProperty;function xi(e,t,r,n,o){return e===t||(null==e||null==t||!pt(e)&&!pt(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=mt(e),s=mt(t),l=a?ki:wo(e),c=s?ki:wo(t),u=(l=l==Ni?Li:l)==Li,f=(c=c==Ni?Li:c)==Li,d=l==c;if(d&&Nr(e)){if(!Nr(t))return!1;a=!0,u=!1}if(d&&!u)return i||(i=new Kn),a||Fr(e)?ui(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case Oi:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Si:return!(e.byteLength!=t.byteLength||!i(new So(e),new So(t)));case vi:case hi:case gi:return lr(+e,+t);case mi:return e.name==t.name&&e.message==t.message;case $i:case wi:return e==t+"";case bi:var s=fi;case ji:var l=n&pi;if(s||(s=di),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=yi,a.set(e,t);var u=ui(s(e),s(t),n,o,i,a);return a.delete(e),u;case _i:if(Ei)return Ei.call(e)==Ei.call(t)}return!1}(e,t,l,r,n,o,i);if(!(r&Ti)){var p=u&&Ri.call(e,"__wrapped__"),y=f&&Ri.call(t,"__wrapped__");if(p||y){var v=p?e.value():e,h=y?t.value():t;return i||(i=new Kn),o(v,h,r,n,i)}}return!!d&&(i||(i=new Kn),function(e,t,r,n,o,i){var a=r&Ii,s=io(e),l=s.length;if(l!=io(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Ai.call(t,u)))return!1}var f=i.get(e),d=i.get(t);if(f&&d)return f==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);for(var y=a;++c<l;){var v=e[u=s[c]],h=t[u];if(n)var m=a?n(h,v,u,t,e,i):n(v,h,u,e,t,i);if(!(void 0===m?v===h||o(v,h,r,n,i):m)){p=!1;break}y||(y="constructor"==u)}if(p&&!y){var b=e.constructor,g=t.constructor;b==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))}(e,t,r,n,xi,o))}var Ui=1,Ci=2;function zi(e){return e==e&&!wt(e)}function Di(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function Fi(e,t){return null!=e&&t in Object(e)}function Mi(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=wn(t,e)).length,i=!1;++n<o;){var a=Sn(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&hr(o)&&ar(a,o)&&(mt(e)||Er(e))}(e,t,Fi)}var Gi=1,Vi=2;function Bi(e){return"function"==typeof e?e:null==e?_t:"object"==typeof e?mt(e)?(n=e[0],o=e[1],nn(n)&&zi(o)?Di(Sn(n),o):function(e){var t=Pn(e,n);return void 0===t&&t===o?Mi(e,n):xi(o,t,Gi|Vi)}):(r=function(e){for(var t=Hr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,zi(o)]}return t}(t=e),1==r.length&&r[0][2]?Di(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=r[o])[0],l=e[s],c=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else{var u,f=new Kn;if(!(void 0===u?xi(c,l,Ui|Ci,n,f):u))return!1}}return!0}(e,0,r)}):function(e){return nn(e)?(t=Sn(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return On(t,e)}}(e);var t}(e);var t,r,n,o}var Ji=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e};function Ki(e){return pt(e)&&mr(e)}function Hi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Yi,qi=(Yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==Yi?void 0:Yi[e]}),Wi=/[&<>"']/g,Qi=RegExp(Wi.source),Xi=Math.min;function Zi(e){return Ki(e)?e:[]}yr((function(e){var t=Hi(e),r=ht(e,Zi);return t===Hi(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?function(e,t,r){for(var n=nr,o=e[0].length,i=e.length,a=i,s=Array(i),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=ht(u,Lr(t))),l=Xi(u.length,l),s[a]=t||o>=120&&u.length>=120?new ii(a&&u):void 0}u=e[0];var f=-1,d=s[0];e:for(;++f<o&&c.length<l;){var p=u[f],y=t?t(p):p;if(p=0!==p?p:0,!(d?si(d,y):n(c,y,r))){for(a=i;--a;){var v=s[a];if(!(v?si(v,y):n(e[a],y,r)))continue e}d&&d.push(y),c.push(p)}}return c}(r,Bi(t)):[]}));var ea="[object Map]",ta="[object Set]",ra=Object.prototype.hasOwnProperty;function na(e){if(null==e)return!0;if(mr(e)&&(mt(e)||"string"==typeof e||"function"==typeof e.splice||Nr(e)||Fr(e)||Er(e)))return!e.length;var t=wo(e);if(t==ea||t==ta)return!e.size;if(jr(e))return!Kr(e).length;for(var r in e)if(ra.call(e,r))return!1;return!0}var oa="Expected a function";function ia(e,t){return null==(e=function(e,t){return t.length<2?e:On(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=wn(t,e)))||delete e[Sn(Hi(t))]}function aa(e){return Fn(e)?void 0:e}var sa=kn((function(e,t){var r={};if(null==e)return r;var n=!1;t=ht(t,(function(t){return t=wn(t,e),n||(n=t.length>1),t})),fr(e,ao(e),r),n&&(r=oi(r,7,aa));for(var o=t.length;o--;)ia(r,t[o]);return r})),la=sa;function ca(e,t,r,n){if(!wt(e))return e;for(var o=-1,i=(t=wn(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=Sn(t[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=wt(u)?u:ar(t[o+1])?[]:{})}ur(s,l,c),s=s[l]}return e}function ua(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=On(e,a);r(s,a)&&ca(i,wn(a,e),s)}return i}function fa(e,t){if(null==e)return{};var r=ht(ao(e),(function(e){return[e]}));return t=Bi(t),ua(e,r,(function(e,r){return t(e,r[0])}))}function da(e,t){return fa(e,function(e){if("function"!=typeof e)throw new TypeError(oa);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Bi(t)))}var pa=kn((function(e,t){return null==e?{}:function(e,t){return ua(e,t,(function(t,r){return Mi(e,r)}))}(e,t)})),ya=pa;function va(e,t,r){return null==e?e:ca(e,t,r)}var ha=Object.prototype,ma=ha.hasOwnProperty;function ba(e,t,r,n){return void 0===e||lr(e,ha[r])&&!ma.call(n,r)?t:e}var ga={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function $a(e){return"\\"+ga[e]}var ja=/<%=([\s\S]+?)%>/g,wa={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ja,variable:"",imports:{_:{escape:function(e){return(e=jn(e))&&Qi.test(e)?e.replace(Wi,qi):e}}}},_a=/\b__p \+= '';/g,Sa=/\b(__p \+=) '' \+/g,Oa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pa=/[()=,{}\[\]\/\s]/,Ea=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ia=/($^)/,Aa=/['\n\r\u2028\u2029\\]/g,Ta=Object.prototype.hasOwnProperty;var Na=co&&1/di(new co([,-0]))[1]==1/0?function(e){return new co(e)}:function(){};function ka(e){let t;return t=fa(e,Fn),t=function(e,t){var r={};return t=Bi(t),function(e,t){e&&Ji(e,t,Hr)}(e,(function(e,n,o){sr(r,n,t(e,n,o))})),r}(t,ka),t=da(t,na),t=Wr(da(e,Fn),t),t}function La(e){return null==e||"string"==typeof e&&""===e||Fn(e)&&na(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===mt(e)&&function(e){let t=!0;if("object"==typeof e&&!1===mt(e))for(const r in e){const n=null==e?void 0:e[r];if(!0===e.hasOwnProperty(r)&&null!=n&&""!==n){t=!1;break}}return t}(e)}function Ra(e,t){return Ze(this,void 0,void 0,(function*(){return P.default(e,t)}))}yr((function(e){var t=Hi(e);return Ki(t)&&(t=void 0),function(e,t,r){var n=-1,o=nr,i=e.length,a=!0,s=[],l=s;if(i>=200){var c=t?null:Na(e);if(c)return di(c);a=!1,o=si,l=new ii}else l=t?[]:s;e:for(;++n<i;){var u=e[n],f=t?t(u):u;if(u=0!==u?u:0,a&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(u)}else o(l,f,r)||(l!==s&&l.push(f),s.push(u))}return s}(Tn(e,1,Ki,!0),Bi(t))}));const xa={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},Ua=[...Object.values(xa),"ar-u-nu-latn","en-AU","en-GB","es-ES","es-MX","de-AT","de-CH","de-DE","it-CH","it-IT"],Ca=[xa.Arabic,xa.Hebrew],za=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"];function Da(e=document.documentElement){var t;const r=("[lang]",function e(t){let r;return r=void 0===t||t===document||t===window?null:t.closest("[lang]")||e(t.getRootNode().host),r}(e));const n=null!==(t=null==r?void 0:r.lang)&&void 0!==t?t:window.navigator.language,o=function(e){let t=xa.English;if(void 0!==e){const r=Object.values(xa),n=r.filter((e=>-1!==e.indexOf("-")));if(-1!==e.indexOf("-")){const[t,r]=e.split("-");e=`${t}-${r.toUpperCase()}`}if(!0===n.includes(e))t=e;else{const n=function(e){const t=null==e?void 0:e.match(/^([a-z]{2})-([A-Z]{1,2})$/);let r=xa.English;return null!=t&&(null==t?void 0:t.length)>1?r=t[1]:2===(null==e?void 0:e.length)&&e.toLowerCase()===e&&(r=e),r}(e);!0===r.includes(n)&&(t=n)}}return t}(n),i=function(e){let t=Ua.find((t=>t===e));if(void 0===t&&(t=e),void 0!==t&&-1!==t.indexOf("-")){const[e,r]=t.split("-");t=`${e}-${r.toUpperCase()}`}return"ar"===t&&(t="ar-u-nu-latn"),t}(n);return{locale:o,rtl:Ca.includes(o),formatLocale:i}}class Fa extends Error{constructor(e,t,r,n){super(t),this.name=e,this.details=r,this.cause=n}}const Ma={Default:"defaultError",LayerLoadFailure:"layerLoadFailure",LayerUnavailable:"layerUnavailable",QueryFeaturesError:"queryFeaturesError",PortalLoadError:"portalLoadError",InsufficientCreditsError:"InsufficientCreditsError",CreditThresholdExceededError:"creditThresholdExceededError",ServiceNameExistsError:"serviceNameExistsError",NetworkError:"networkError",ToolValidationError:"toolValidationError",KeyPropertiesError:"keyPropertiesError",CreditEstimationError:"creditEstimationError",SpecialCharactersInServiceNameError:"specialCharactersInServiceNameError"};var Ga=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},Va=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return Ga()}try{return __global__||Ga()}finally{delete Object.prototype.__global__}}(),Ba="object"==typeof globalThis&&globalThis&&globalThis.Array===Array?globalThis:Va,Ja=Ba,Ka={object:!0,symbol:!0},Ha={exports:{}},Ya=function(e){return null!=e},qa=Ya,Wa={object:!0,function:!0,undefined:!0},Qa=function(e){if(!function(e){return!!qa(e)&&hasOwnProperty.call(Wa,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},Xa=/^\s*class[\s{/}]/,Za=Function.prototype.toString,es=function(e){return null!=e},ts=es,rs=Object.keys,ns=function(){try{return!0}catch(e){return!1}}()?Object.keys:function(e){return rs(ts(e)?Object(e):e)},os=es,is=ns,as=Math.max,ss=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var r,n,o,i=as(arguments.length,2);for(e=Object(function(e){if(!os(e))throw new TypeError("Cannot use null or undefined");return e}(e)),o=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},n=1;n<i;++n)is(t=arguments[n]).forEach(o);if(void 0!==r)throw r;return e},ls=es,cs=Array.prototype.forEach,us=Object.create,fs="razdwatrzy",ds=String.prototype.indexOf,ps="function"==typeof fs.contains&&!0===fs.contains("dwa")&&!1===fs.contains("foo")?String.prototype.contains:function(e){return ds.call(this,e,arguments[1])>-1},ys=Ya,vs=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!Qa(e)}(e)&&!Xa.test(Za.call(e))},hs=ss,ms=function(e){var t=us(null);return cs.call(arguments,(function(e){ls(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)})),t},bs=ps,gs=Ha.exports=function(e,t){var r,n,o,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],ys(e)?(r=bs.call(e,"c"),n=bs.call(e,"e"),o=bs.call(e,"w")):(r=o=!0,n=!1),a={value:t,configurable:r,enumerable:n,writable:o},i?hs(ms(i),a):a};gs.gs=function(e,t,r){var n,o,i,a;return"string"!=typeof e?(i=r,r=t,t=e,e=null):i=arguments[3],ys(t)?vs(t)?ys(r)?vs(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,ys(e)?(n=bs.call(e,"c"),o=bs.call(e,"e")):(n=!0,o=!1),a={get:t,set:r,configurable:n,enumerable:o},i?hs(ms(i),a):a};var $s,js,ws,_s=function(e){if(!function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}(e))throw new TypeError(e+" is not a symbol");return e},Ss=Ha.exports,Os=Object.create,Ps=Object.defineProperty,Es=Object.prototype,Is=Os(null),As=Ha.exports,Ts=Ba.Symbol,Ns=Ha.exports,ks=_s,Ls=Object.create(null),Rs=Ha.exports,xs=_s,Us=Ba.Symbol,Cs=function(e){for(var t,r,n=0;Is[e+(n||"")];)++n;return Is[e+=n||""]=!0,Ps(Es,t="@@"+e,Ss.gs(null,(function(e){r||(r=!0,Ps(this,t,Ss(e)),r=!1)}))),t},zs=Object.create,Ds=Object.defineProperties,Fs=Object.defineProperty;if("function"==typeof Us)try{String(Us()),ws=!0}catch(e){}else Us=null;js=function(e){if(this instanceof js)throw new TypeError("Symbol is not a constructor");return $s(e)};var Ms,Gs=$s=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return ws?Us(t):(r=zs(js.prototype),t=void 0===t?"":String(t),Ds(r,{__description__:Rs("",t),__name__:Rs("",Cs(t))}))};(function(e){Object.defineProperties(e,{hasInstance:As("",Ts&&Ts.hasInstance||e("hasInstance")),isConcatSpreadable:As("",Ts&&Ts.isConcatSpreadable||e("isConcatSpreadable")),iterator:As("",Ts&&Ts.iterator||e("iterator")),match:As("",Ts&&Ts.match||e("match")),replace:As("",Ts&&Ts.replace||e("replace")),search:As("",Ts&&Ts.search||e("search")),species:As("",Ts&&Ts.species||e("species")),split:As("",Ts&&Ts.split||e("split")),toPrimitive:As("",Ts&&Ts.toPrimitive||e("toPrimitive")),toStringTag:As("",Ts&&Ts.toStringTag||e("toStringTag")),unscopables:As("",Ts&&Ts.unscopables||e("unscopables"))})})($s),function(e){Object.defineProperties(e,{for:Ns((function(t){return Ls[t]?Ls[t]:Ls[t]=e(String(t))})),keyFor:Ns((function(e){var t;for(t in ks(e),Ls)if(Ls[t]===e)return t}))})}($s),Ds(js.prototype,{constructor:Rs($s),toString:Rs("",(function(){return this.__name__}))}),Ds($s.prototype,{toString:Rs((function(){return"Symbol ("+xs(this).__description__+")"})),valueOf:Rs((function(){return xs(this)}))}),Fs($s.prototype,$s.toPrimitive,Rs("",(function(){var e=xs(this);return"symbol"==typeof e?e:e.toString()}))),Fs($s.prototype,$s.toStringTag,Rs("c","Symbol")),Fs(js.prototype,$s.toStringTag,Rs("c",$s.prototype[$s.toStringTag])),Fs(js.prototype,$s.toPrimitive,Rs("c",$s.prototype[$s.toPrimitive])),("function"==typeof(Ms=Ja.Symbol)&&(Ms("test symbol"),Ka[typeof Ms.iterator]&&Ka[typeof Ms.toPrimitive]&&Ka[typeof Ms.toStringTag])?Ba.Symbol:Gs)("-");const Vs="esriGPParameterDirectionOutput",Bs="parameterViewModel",Js={ImageService:"Image Service",FeatureService:"Feature Service",BigData:"Big Data File Share",Csv:"CSV",Xls:"Microsoft Excel",MapService:"Map Service",FeatureLayer:"Feature Layer",BigDataFeature:"featureClass",Table:"Table",BigDataTable:"table",MultiValueGrid:"Multi-Variable Grid",GeoprocessingService:"Geoprocessing Service",RasterFunctionTemplate:"Raster function template",BdfsTemplate:"bdfstemplate",DeepLearningPackage:"Deep Learning Package",File:"files",Doc:"documents",Image:"images",PDF:"pdfs",Csvs:"csvs"},Ks="_SelectedLayers";function Hs(e){return`${e}${Ks}`}var Ys={exports:{}};function qs(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function Ws(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Qs(e,t,r,n,o){return r.bind(t,e,n,o)}function Xs(e,t){return Qs(e,this,1===e.length?qs:Ws,t.cache.create(),t.serializer)}function Zs(){return JSON.stringify(arguments)}function el(){this.cache=Object.create(null)}el.prototype.has=function(e){return e in this.cache},el.prototype.get=function(e){return this.cache[e]},el.prototype.set=function(e,t){this.cache[e]=t};var tl={create:function(){return new el}};Ys.exports=function(e,t){var r=t&&t.cache?t.cache:tl,n=t&&t.serializer?t.serializer:Zs;return(t&&t.strategy?t.strategy:Xs)(e,{cache:r,serializer:n})},Ys.exports.strategies={variadic:function(e,t){return Qs(e,this,Ws,t.cache.create(),t.serializer)},monadic:function(e,t){return Qs(e,this,qs,t.cache.create(),t.serializer)}};var rl=Ys.exports;const nl=["SingleLine","Address","Address2","Address3","Neighborhood","City","Subregion","Region","Postal","PostalExt","CountryCode"];function ol(e){return E.urlToObject(e).path}rl((e=>Ze(void 0,void 0,void 0,(function*(){const{geocodeServiceURL:t,locale:r}=e;let n;if(La(t))n={ruleType:"expression",expression:"$[Data].geocodeServiceURL = NULL",destination:"sourceCountry",effectParams:{visible:!1}};else{let e,o;try{({data:{countries:e,detailedCountries:o}}=yield Ra(`${t}?f=json`,{responseType:"json"}))}catch(e){throw console.error("Failed to get Locator info"),e}const i={};o.forEach((e=>{var t;const n=e.localizedNames,o=r.length>2&&r;let a;if("boolean"!=typeof o&&(a=n[o]),void 0===a){const e=2===r.length?r.slice(0,2):r;if(a=n[e],void 0===a){const t=Object.keys(n).find((t=>t.startsWith(e)));void 0!==t&&(a=n[t])}}null!=a&&""!==a||(a=null!==(t=n[xa.English])&&void 0!==t?t:n[xa.EnglishUSA]),i[e.name]=a})),n={ruleType:"expression",expression:"$[Data].geocodeServiceURL NOT null",destination:"sourceCountry",effectParams:{visible:!0,choiceList:e,choiceListLabels:i}}}return n}))),{serializer:e=>{const{geocodeServiceURL:t}=e;return null!=t?t:"EMPTY_KEY"}}),rl((e=>Ze(void 0,void 0,void 0,(function*(){const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e;let o,i;if(!(La(t)||La(r)&&La(n))){let t,r;i=yield kl(e);try{t=JSON.parse(i.field_info),r=JSON.parse(i.field_mapping)}catch(e){throw console.error("Failed to parse result of AnalyzeGeocodeInput"),e}const n=t.map((e=>e[0])),a=n.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{});o={ruleType:"expression",expression:"($[Data].geocodeServiceURL NOT null) AND (($[Data].inputTable NOT null) OR ($[Data].inputFileItem NOT null))",destination:"geocodeUIParameters",effectParams:nl.reduce(((e,t,o)=>{var i;const s=null===(i=r.find((e=>e[1]===t)))||void 0===i?void 0:i[0];return Object.assign(Object.assign({},e),{[`UIparameterInfos[${o}].choiceList`]:n,[`UIparameterInfos[${o}].choiceListLabels`]:a,[`UIparameterInfos[${o}].defaultValue`]:s})}),{})}}return{addressFieldsRule:o,geocodeParameters:i}}))),{serializer:e=>{const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e,o=null==r?void 0:r.itemid,i=null==n?void 0:n.url;return La(t)||La(o)&&La(i)?"EMPTY_KEY":`${t}${o}${i}`}});const il="analysis_ui";function al(t,r){return Ze(this,void 0,void 0,(function*(){const n=yield function(t=Da().locale){return Ze(this,void 0,void 0,(function*(){let r=yield new Promise((function(t,r){e(["./errors.t9n.en-6cb15d51-ec6687ba"],t,r)}));switch(t){case xa.Arabic:r=yield new Promise((function(t,r){e(["./errors.t9n.ar-1b9d7225-eec60ef0"],t,r)}));break;case xa.Bosnian:r=yield new Promise((function(t,r){e(["./errors.t9n.bs-377a5410-36feae22"],t,r)}));break;case xa.Bulgarian:r=yield new Promise((function(t,r){e(["./errors.t9n.bg-89d094b5-f3a42236"],t,r)}));break;case xa.Catalan:r=yield new Promise((function(t,r){e(["./errors.t9n.ca-b4c83c33-77badc85"],t,r)}));break;case xa.Czech:r=yield new Promise((function(t,r){e(["./errors.t9n.cs-96fcf27d-5a68866c"],t,r)}));break;case xa.Danish:r=yield new Promise((function(t,r){e(["./errors.t9n.da-cefe0c47-400ac533"],t,r)}));break;case xa.German:r=yield new Promise((function(t,r){e(["./errors.t9n.de-a1b0ae17-75bd70bd"],t,r)}));break;case xa.Greek:r=yield new Promise((function(t,r){e(["./errors.t9n.el-0a20e1cc-f205fa3c"],t,r)}));break;case xa.EnglishUSA:r=yield new Promise((function(t,r){e(["./errors.t9n.en-US-c9f50f19-bfc18c90"],t,r)}));break;case xa.Spanish:r=yield new Promise((function(t,r){e(["./errors.t9n.es-0dd138a7-685bae6d"],t,r)}));break;case xa.Estonian:r=yield new Promise((function(t,r){e(["./errors.t9n.et-57cc3980-71d1d3cc"],t,r)}));break;case xa.Finnish:r=yield new Promise((function(t,r){e(["./errors.t9n.fi-7d2525cb-ee1341ef"],t,r)}));break;case xa.French:r=yield new Promise((function(t,r){e(["./errors.t9n.fr-b2186e48-039cdd3b"],t,r)}));break;case xa.Hebrew:r=yield new Promise((function(t,r){e(["./errors.t9n.he-f487411b-ce3790da"],t,r)}));break;case xa.Croatian:r=yield new Promise((function(t,r){e(["./errors.t9n.hr-61ca76d9-0ded7300"],t,r)}));break;case xa.Hungarian:r=yield new Promise((function(t,r){e(["./errors.t9n.hu-7fa01d3c-3e46d3ff"],t,r)}));break;case xa.Indonesian:r=yield new Promise((function(t,r){e(["./errors.t9n.id-6801fef5-12a6065a"],t,r)}));break;case xa.Italian:r=yield new Promise((function(t,r){e(["./errors.t9n.it-568c2b04-f569a426"],t,r)}));break;case xa.Japanese:r=yield new Promise((function(t,r){e(["./errors.t9n.ja-6042d3af-c4353778"],t,r)}));break;case xa.Korean:r=yield new Promise((function(t,r){e(["./errors.t9n.ko-4d01f228-4249027d"],t,r)}));break;case xa.Lithuanian:r=yield new Promise((function(t,r){e(["./errors.t9n.lt-7f94cd9d-e8c5451e"],t,r)}));break;case xa.Latvian:r=yield new Promise((function(t,r){e(["./errors.t9n.lv-0223c6ae-bc578f6e"],t,r)}));break;case xa.NorwegianBokml:r=yield new Promise((function(t,r){e(["./errors.t9n.nb-1f800b8b-d80f86f9"],t,r)}));break;case xa.Dutch:r=yield new Promise((function(t,r){e(["./errors.t9n.nl-dd20c6e1-7e8305ea"],t,r)}));break;case xa.Polish:r=yield new Promise((function(t,r){e(["./errors.t9n.pl-e71d8c8e-90143aa3"],t,r)}));break;case xa.PortugueseBrazil:r=yield new Promise((function(t,r){e(["./errors.t9n.pt-BR-6cdb50a3-a30b4c73"],t,r)}));break;case xa.PortuguesePortugal:r=yield new Promise((function(t,r){e(["./errors.t9n.pt-PT-6b3866f5-f900ebb9"],t,r)}));break;case xa.Romanian:r=yield new Promise((function(t,r){e(["./errors.t9n.ro-86e7cba9-e05751a7"],t,r)}));break;case xa.Russian:r=yield new Promise((function(t,r){e(["./errors.t9n.ru-23cdd703-b9a3b092"],t,r)}));break;case xa.Serbian:r=yield new Promise((function(t,r){e(["./errors.t9n.sr-fad84a78-ef8ae32c"],t,r)}));break;case xa.Slovak:r=yield new Promise((function(t,r){e(["./errors.t9n.sk-3b14f765-561c1ed2"],t,r)}));break;case xa.Slovenian:r=yield new Promise((function(t,r){e(["./errors.t9n.sl-e900baaf-ade630c3"],t,r)}));break;case xa.Swedish:r=yield new Promise((function(t,r){e(["./errors.t9n.sv-4613eae2-7ca6eb35"],t,r)}));break;case xa.Thai:r=yield new Promise((function(t,r){e(["./errors.t9n.th-5732c8a4-354229a2"],t,r)}));break;case xa.Turkish:r=yield new Promise((function(t,r){e(["./errors.t9n.tr-ccd64dcc-7c34546a"],t,r)}));break;case xa.Ukrainian:r=yield new Promise((function(t,r){e(["./errors.t9n.uk-e6c5f2f4-65cbc527"],t,r)}));break;case xa.Vietnamese:r=yield new Promise((function(t,r){e(["./errors.t9n.vi-3f1e30b4-7047265c"],t,r)}));break;case xa.ChineseChina:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-CN-8e563d8f-1457d2df"],t,r)}));break;case xa.ChineseHongKong:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-HK-23eb2505-8285427c"],t,r)}));break;case xa.ChineseTaiwan:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-TW-4017c011-811e3724"],t,r)}))}return r}))}(),o=n[t];throw new Fa(t,null!=o?o:n.defaultError,{type:il},r)}))}function sl(e){return"imagery"===e.type}function ll(e){return"map-notes"===e.type}function cl(e){return"featureSet"in e}const ul=vn((e=>{var t;const r={};let n;if(void 0!==e.featureSet){if(r.source=x.default.fromJSON(e.featureSet).features,n=e.layerDefinition,void 0!==n.fields&&(r.fields=n.fields.map((e=>L.default.fromJSON(e)))),void 0!==n.objectIdField&&(r.objectIdField=n.objectIdField),void 0!==n.geometryType){let e="point";switch(n.geometryType){case"esriGeometryMultipoint":e="multipoint";break;case"esriGeometryPoint":e="point";break;case"esriGeometryPolygon":e="polygon";break;case"esriGeometryPolyline":e="polyline"}r.geometryType=e}void 0!==n.spatialReference&&(r.spatialReference=n.spatialReference),void 0!==(null===(t=n.drawingInfo)||void 0===t?void 0:t.renderer)&&(r.renderer=R.default.fromJSON(n.drawingInfo.renderer))}return new A.default(r)}));function fl(e){let t="";if(void 0!==e&&""!==e){const r=e.split("/"),n=function(e){let t="";if(void 0!==e&&""!==e){const r=e.split("/").filter((e=>!0===new RegExp("[A-Z]{1}[a-z]+Server").test(e)));t=r[r.length-1]}return t}(e);t=r[r.indexOf(n)-1]}return t}function dl(e){return Ze(this,void 0,void 0,(function*(){let t;try{t=yield N.default.fromArcGISServerUrl({url:ol(e)})}catch(e){yield al(Ma.LayerUnavailable,e)}return t}))}function pl(e){return Ze(this,void 0,void 0,(function*(){let t;try{t=yield N.default.fromPortalItem({portalItem:new k.default({id:e})})}catch(e){yield al(Ma.LayerUnavailable,e)}return t}))}function yl(e){return Ze(this,void 0,void 0,(function*(){let t;try{t=yield!0===function(e){return"group"===e.type}(e)?e.loadAll():e.load()}catch(e){yield al(Ma.LayerLoadFailure,e)}return t}))}function vl(e,t){var r;return Ze(this,void 0,void 0,(function*(){const n=[],o=[];e.forEach((e=>{let r;if("url"in e){const n=t=>{var r;const n="layerId"in t?`/${null!==(r=t.layerId)&&void 0!==r?r:0}`:"",o=`${t.url}${n}`;return ol(e.url)===o};r=t.find((e=>n(e)))}else"itemId"in e?r=t.find((t=>{var r;return e.itemId===(null===(r=t.portalItem)||void 0===r?void 0:r.id)})):cl(e)&&void 0!==(null==e?void 0:e.layerDefinition.name)&&(r=t.find((t=>(null==e?void 0:e.layerDefinition.name)===t.title)));void 0===r?n.push(e):o.push(r)}));const i=n.map((e=>Ze(this,void 0,void 0,(function*(){var t;let r;try{r=yield function(e){var t;return Ze(this,void 0,void 0,(function*(){let r;const n=[],{url:o,itemId:i}=e;if(!1===La(o))try{r=yield dl(o)}catch(e){n.push(e)}if(!1===La(i)&&!0===La(r))try{r=yield pl(i)}catch(e){n.push(e)}return cl(e)&&(r=new A.default({title:null!==(t=null==e?void 0:e.layerDefinition.name)&&void 0!==t?t:""})),!0===La(r)&&n.length>0&&(yield al(Ma.LayerUnavailable,n)),r}))}(e)}catch(n){n.name,Ma.LayerUnavailable;{const o={id:Date.now(),title:null!==(t=fl(null==e?void 0:e.url))&&void 0!==t?t:"",loaded:!1,load:()=>Promise.reject(o),loadError:n};r=o}}try{r=yield yl(r)}catch(e){}return r}))));let a=yield Promise.all(i);return a=null!==(r=a.filter((e=>void 0!==e)))&&void 0!==r?r:[],[o,a]}))}vn(((e,t)=>Ze(void 0,void 0,void 0,(function*(){let r=!1;if(!0===window.location.href.includes("://localhost:")||void 0===t)r=!0;else{const n=`${e}${e.indexOf("?")>-1?"&":"?"}f=json`;U.default.request.proxyUrl=`${t}/sharing/proxy`;try{r=!1===La((yield Ra(n,{useProxy:!0})).data)}catch(e){r=!1}}return!0===r?e:void 0}))));class hl{prepare(e,t){return e}postProcess(e,t){return e}}const ml=e=>"object"==typeof e&&null!==e;function bl(e){return class extends e{getKeys(e,t){let r=[];if(Array.isArray(t.serializationKeys)&&t.serializationKeys.length>0)r=t.serializationKeys;else if(ml(e)){const t=Array.isArray(e)?e.flatMap((e=>ml(e)&&!Array.isArray(e)?Object.keys(e):[])):Object.keys(e);r=[...new Set(t)]}return this.toSerializeKeys=r,r}}}function gl(e){return Object.values(e).map((e=>La(e)?"":`${e}`)).join(" ").trim()}class $l extends(bl(hl)){serialize(e){return gl(e)}prepare(e,t){this.originalValue=e,this.getKeys(e,t);let r=e;return r=ya(e,this.toSerializeKeys),r}postProcess(e,t){let r=e;if(void 0!==t.serializationParameterName){const n=la(this.originalValue,this.toSerializeKeys);va(n,t.serializationParameterName,e),r=n}return r}}class jl extends(bl(hl)){serialize(e){return function(e,t){let r=[];const n=Array.isArray(e),o=void 0!==t&&t.length>0;return n&&o?e.forEach((e=>{if("object"==typeof e){const n=ya(e,t);La(n)||r.push(gl(n))}})):!0===n&&!1===o&&e.length>0&&e.every((e=>"string"==typeof e))&&(r=e),r}(e,this.toSerializeKeys)}prepare(e,t){return this.getKeys(e,t),e}}class wl extends(bl(hl)){serialize(e){return function(e,t,r){const n={},o=Array.isArray(e),i=void 0!==t&&t.length>0,a=o&&i&&void 0!==r;if(a){let o=[];e.forEach((e=>{if("object"==typeof e){const r=ya(e,t);o=[...o,...Object.values(r)]}})),va(n,r,o)}return a?n:e}(e,this.toSerializeKeys,this.toSerializeName)}prepare(e,t){return this.toSerializeName=t.serializationParameterName,this.getKeys(e,t),e}}class _l extends(bl(hl)){serialize(e){return"string"==typeof e?e:JSON.stringify(e)}}const Sl={sequentialValues:$l,sequentialValueArray:jl,arrayValues:wl,stringValue:_l,default:class extends hl{serialize(e){return e}}},Ol={ExcludedUIOnlyParamKeys:["itemProperties","userSettings"],ExcludedUIOnlyParamPartialKeys:[Ks],AlwaysIncludedUIOnlyParamKeys:["saveResultIn"]};function Pl(e){const t={};for(const r of e)void 0!==r.UIparameters?Object.assign(t,Pl(r.UIparameters)):void 0!==r.name&&void 0!==r.name&&(t[r.name]=r);return t}function El(e){null!=e||(e="standard");let t="";return t="raster"===e?"_ra":"",t}const Il=vn((e=>Ze(void 0,void 0,void 0,(function*(){const{locale:t,name:r,assetPrefix:n,analysisEngine:o,memoizedHelper:i}=e,a=`${r.toLowerCase()}${El(o)}`;let s,l,c,u;const f=`${n}/tool-ui-json/${a}.tool.ui.json`,d=`${n}/tool-json/${a}.tool.json`,p=`${n}/t9n/${a}/${a}.t9n.${t}.json`,y=`${n}/t9n/common.t9n.${t}.json`;let v=t;t===xa.English||t===xa.EnglishUSA?v="":v===xa.NorwegianBokml&&(v="no");const h=`${n}/help/${""!==v?v+"/":""}${r}${El(o)}.html`;try{u=yield i(d),s=yield i(f),l=yield i(p),c=yield i(y),l=Object.assign(Object.assign({},c),l)}catch(e){s=void 0}return{toolJson:u,toolUIJson:s,toolT9n:l,toolHelpFilePath:h}}))));function Al(e,t=!1){var r,n,o;let i=e;if(!0===t){const t=JSON.parse(e),a={"serviceProperties.name":null===(r=t.serviceProperties)||void 0===r?void 0:r.name,"itemProperties.title":null===(n=t.itemProperties)||void 0===n?void 0:n.title},[s,l]=null!==(o=Object.entries(a).find((([e,t])=>void 0!==t)))&&void 0!==o?o:[];if(void 0!==s){const e=function(e){return e.replace(/\s/g,"_")}(l);va(t,s,e)}i=JSON.stringify(t)}return i}function Tl(e,t,r){const n={};return void 0!==e&&(void 0===e.resultType||void 0!==e.resultType&&["TILED_IMAGERY_LAYER","DYNAMIC_IMAGERY_LAYER","FEATURE_LAYER",Js.FeatureLayer,Js.FeatureService,Js.ImageService].includes(e.resultType))&&(n.serviceProperties={name:t[r]}),void 0!==n.serviceProperties&&void 0!==e.resultType&&null!==e.resultType&&["TILED_IMAGERY_LAYER","DYNAMIC_IMAGERY_LAYER"].includes(e.resultType)&&(n.serviceProperties.capabilities="TILED_IMAGERY_LAYER"===e.resultType?"Image, TilesOnly":"Image"),void 0!==e.itemProperties&&(n.itemProperties=e.itemProperties,void 0!==n.itemProperties&&(n.itemProperties.title=t[r],n.itemProperties.folderId=e.saveResultIn)),JSON.stringify(n)}function Nl(e,t){let r;const n=e.serializationType;if(void 0!==n){const o=new Sl[n],i=o.prepare(t,e),a=o.serialize(i);r=o.postProcess(a,e)}return r}rl((e=>Ze(void 0,void 0,void 0,(function*(){const{url:t}=e,r=`${t}/sharing/rest/community/self`,n=I.default.findCredential(r);let o;void 0!==n&&(o=n.token);const i={query:{returnUserLicensedItems:!0,token:o,f:"json"}};try{const{data:{userLicensedItems:e}}=yield Ra(r,i);return[...e.map((({entitlements:e})=>e))].flat()}catch(e){yield al(Ma.NetworkError)}return[]}))),{serializer:e=>`${e.user.username}`}),rl((e=>Ze(void 0,void 0,void 0,(function*(){let t={isMultidimensional:!1};const r="imagery-tile"===e.type?e.rasterInfo.multidimensionalInfo:e.multidimensionalInfo,n=e.multidimensionalSubset;if(null!=r){const o=null!=n?e.getMultidimensionalSubsetVariables():r.variables;if(void 0!==o&&o.length>0){const e=[],r=[],n={},i={},a={},s={},l={},c={},u={};o.forEach(((t,o)=>{let a="";const f=t.name;t.dimensions.forEach(((t,r)=>{var d,p;const y=t.name;-1===e.indexOf(y)&&e.push(y);const v=r>0?`,${y}=${null===(d=t.values)||void 0===d?void 0:d.length}`:`${y}=${null===(p=t.values)||void 0===p?void 0:p.length}`;if(a=a.concat(v),0===r&&(i[f]={}),void 0===n[y]&&(n[y]=[]),i[f][y]=t.values,0===o){const e=t.values;if(void 0!==e)if("StdTime"!==y||void 0!==t.unit&&"ISO8601"!==t.unit)Array.isArray(e)&&"number"==typeof e[0]?s[y]=l[y]=e.map(String):Array.isArray(e[0])&&Array.isArray(e[1])&&(s[y]=e[0].map(String),l[y]=e[1].map(String));else{const t=[],r=[],n={},o={};e.forEach((e=>{if("number"==typeof e){const i=new Date(e),a=i.toLocaleString(),s=i.toISOString();t.push(s),r.push(s),n[s]=a,o[s]=a}else if(Array.isArray(e)){const i=new Date(e[0]),a=new Date(e[1]),s=i.toISOString(),l=a.toISOString();t.push(s),r.push(l),n[s]=i.toLocaleString(),o[l]=a.toLocaleString()}})),s[y]=t,l[y]=r,c[y]=n,u[y]=o}}n[y].push(f)})),r.push({name:f,alias:`${f}[${a}](${t.description})`,type:"string"})}));for(const e in n){const t=r.filter((t=>n[e].indexOf(t.name)>-1));a[e]={id:"1",name:e,description:"DimensionVariables",getFields:()=>Promise.resolve(t)}}t={isMultidimensional:!0,dimensions:e,dimensionVariableDatasets:a,dimensionValues:i,variablesDataset:{id:"1",name:"Variables",description:"Variables",getFields:()=>Promise.resolve(r)},dimensionMinValues:s,dimensionMaxValues:l,dimensionMinValuesWithLabels:c,dimensionMaxValuesWithLabels:u}}}const o="imagery"===e.type?yield e.generateRasterInfo(e.renderingRule):e.rasterInfo;return t.rasterInfo=o,t}))));const kl=e=>Ze(void 0,void 0,void 0,(function*(){const{asyncGeocodeUrl:t}=e,r=yield C.submitJob(`${t}/AnalyzeGeocodeInput`,Object.assign(Object.assign({},la(e,"asyncGeocodeUrl")),{f:"json"}));try{return yield r.waitForJobCompletion(),(yield r.fetchResultData("geocodeParameters")).value}catch(e){throw console.error("AnalyzeGeocodeInput failed"),e}}));rl(((e,t)=>new k.default({id:e,portal:t})),{serializer:e=>{var t;return`${e[0]}-${null===(t=e[1])||void 0===t?void 0:t.url}`}}),rl((e=>Ze(void 0,void 0,void 0,(function*(){var t,r;const{restUrl:n}=e,o=`${n}/portals/helpmap`;let i;try{const e=yield P.default(o,{query:{f:"json"},responseType:"json",method:"auto"});i=null!==(r=yield null===(t=e.data)||void 0===t?void 0:t.helpMap)&&void 0!==r?r:void 0}catch(e){i=void 0}return i}))),{serializer:e=>{var t;return`${e[0]}-${null===(t=e[1])||void 0===t?void 0:t.url}`}}),t.CLIENT_THROWN_ERROR=il,t.DEFAULT_CREDIT_ERROR_KEY="creditsDefault",t.DEFAULT_ERROR_KEY="default",t.H=Ge,t.Host=X,t.PortalDeploymentType={Enterprise:"ArcGISEnterprise",Kubernetes:"ArcGISEnterpriseOnKubernetes"},t.SupportedLocales=xa,t.UIDefaults={DebounceTimer:400,HelpDebounceTimer:1500,PopoverTimer:60,Scale:"s"},t.UIInputStatus={IDLE:"idle",VALID:"valid",INVALID:"invalid"},t.calculateParameterValues=function(e){const t=Object.assign({},e);for(const e in t)"CALCULATE_CURRENT_TIME"===t[e]&&(t[e]=(new Date).getTime());return t},t.convertJobParamsToToolData=function(e){var t,r,n,o,i,a;return Ze(this,void 0,void 0,(function*(){const{jobParams:s,uiOnlyParams:l,toolName:c,availableMapLayers:u,toolJSON:f}=e,d={};let p=[];const y=null==l?void 0:l[Bs];let v=s;"ChooseBestFacilities"===c&&(v=Object.assign(Object.assign({},s),l));for(const e in v){const s=v[e],c=Pn(y,[e,"submissionName"]),h=null===(t=null==f?void 0:f.parameters)||void 0===t?void 0:t.find((t=>t.name===e||t.name===c)),m=null!==(r=l[`${e}_ParamGroupDataType`])&&void 0!==r?r:null==h?void 0:h.dataType;if(void 0!==s&&void 0!==h)switch(m){case"GPDate":case"GPBoolean":case"GPDouble":case"GPLong":case"GPMultiValue:GPDouble":case"GPLinearUnit":case"Field":d[e]=s;break;case"GPString":if("context"===e){d[e]=La(s)?void 0:s;continue}if(!Array.isArray(s)){if("object"!=typeof s||Array.isArray(s))if("string"==typeof s&&(s.includes("serviceProperties")||s.includes("itemProperties"))){const t=JSON.parse(s);d[e]=null!==(a=null!==(o=null===(n=null==t?void 0:t.serviceProperties)||void 0===n?void 0:n.name)&&void 0!==o?o:null===(i=t.itemProperties)||void 0===i?void 0:i.title)&&void 0!==a?a:void 0}else d[e]=String(s);else if("model"===e||"modelArguments"===e)d[e]=s;else{const t=s,[r,n]=yield vl([t],u),o=Hs(e);d[e]=t,d[o]=[...r,...n],p=p.concat(n)}break}h.dataType="GPMultiValue:GPString";case"GPMultiValue:GPString":const t=Array.isArray(s)?s:[s];if(t.every((e=>"object"==typeof e))){const r=t,[n,o]=yield vl(r,u),i=Hs(e);d[e]=r,d[i]=[...n,...o],p=p.concat(o)}else d[e]=t.map((e=>String(e)));break;case"GPFeatureRecordSetLayer":case"GPRecordSet":case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":{const t=s,[r,n]=yield vl(Array.isArray(t)?t:[t],u),o=Hs(e);d[e]=t,d[o]=[...r,...n],p=p.concat(n)}}}return{convertedJobParams:d,layers:p}}))},t.createEvent=(e,t,r)=>{const n=e;return{emit:e=>((e,t,r)=>{const n=Ve.ce(t,r);return e.dispatchEvent(n),n})(n,t,{bubbles:!!(4&r),composed:!!(2&r),cancelable:!!(1&r),detail:e})}},t.fetchComponentLocaleStrings=function(e,t){return Ze(this,void 0,void 0,(function*(){const r=e.tagName.toLowerCase(),{locale:n,rtl:o}=Da(e),i=yield function(e){return Ze(this,void 0,void 0,(function*(){const{path:t,locale:r,baseURL:n}=e;let o={};try{const e=yield fetch(`${n}t9n/${t}.t9n.${r}.json`);o=yield e.json()}catch(e){const r=yield fetch(`${n}t9n/${t}.t9n.${xa.English}.json`);o=yield r.json()}return o}))}({path:r,locale:n,baseURL:t});return{strings:i,dir:!0===o?"rtl":"ltr",locale:n}}))},t.forceUpdate=e=>{{const t=xe(e),r=t.$hostElement$.isConnected;return r&&2==(18&t.$flags$)&&we(t,!1),r}},t.formatAnalysisEngineSuffix=El,t.formatLearnMoreHelpUrl=function(e){const{locale:t="en",portalUrl:r,url:n}=e;let{basePath:o}=e;"en-US"===t&&(o=o.replace("/en-US/","/en/"));const i=t.toLocaleLowerCase();return!0===za.includes(i)&&(o=o.replace(/^https?:\/\/[^/]+\/en/,(e=>e.replace("en",i)))),void 0!==r?function(e,t){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const r=window.location.href,n=new URL(r).origin,o=new URL(t).origin;n!==o&&(e=`${o}${e}`)}return e}(`${o}${n}`,r):`${o}${n}`},t.formatMessage=function(e,t){return function(e,t,r){var n=wa.imports._.templateSettings||wa;r&&br(e,t,r)&&(t=void 0),e=jn(e),t=en({},t,n,ba);var o,i,a=en({},t.imports,n.imports,ba),s=Hr(a),l=function(e,t){return ht(t,(function(t){return e[t]}))}(a,s),c=0,u=t.interpolate||Ia,f="__p += '",d=RegExp((t.escape||Ia).source+"|"+u.source+"|"+(u===ja?Ea:Ia).source+"|"+(t.evaluate||Ia).source+"|$","g"),p=Ta.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(d,(function(t,r,n,a,s,l){return n||(n=a),f+=e.slice(c,l).replace(Aa,$a),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),f+="';\n";var y=Ta.call(t,"variable")&&t.variable;if(y){if(Pa.test(y))throw new Error("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(i?f.replace(_a,""):f).replace(Sa,"$1").replace(Oa,"$1;"),f="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Jn((function(){return Function(s,p+"return "+f).apply(void 0,l)}));if(v.source=f,Vn(v))throw v;return v}(e)(t)},t.formatNumberToLocale=function(e,t){let r="";if(!La(e)&&!Number.isNaN(e)){const n=Da().formatLocale;r=Intl.NumberFormat(n,t).format(Number(e))}return r},t.getAnalysisLayers=function(e,t){return Ze(this,void 0,void 0,(function*(){const r=e.filter((e=>ll(e)));let n=e.filter((e=>!ll(e))),o=[];if(r.length>0){const e=yield Promise.allSettled(r.map((e=>function(e,t){return Ze(this,void 0,void 0,(function*(){yield e.beforeSave();const r=e.toJSON({origin:"web-map"}).featureCollection.layers.filter((e=>e.featureSet.features.length>0&&"Text"!==e.layerDefinition.name)).map((r=>Ze(this,void 0,void 0,(function*(){const n=ul(r),o=function(e,t){let r;switch(e.geometryType){case"point":r=t.toolInfoKeys.points;break;case"polygon":r=t.toolInfoKeys.polygons;break;case"polyline":r=t.toolInfoKeys.lines}return r}(n,t),i=function(e){var t,r;const n=null!==(r=null===(t=e.parent)||void 0===t?void 0:t.title)&&void 0!==r?r:void 0;return void 0!==n?`${n} - ${e.title}`:e.title}(e);return n.title=void 0!==o?`${i} (${o})`:i,yield n.load(),n}))));return yield Promise.all(r)}))}(e,t))));o=e.filter((e=>"fulfilled"===e.status)).map((e=>e.value)).flat()}const i=yield Promise.allSettled(n.map((e=>e.loaded?Promise.resolve(e):e.load())));return n=i.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),[...n,...o]}))},t.getAssetPath=e=>{const t=new URL(e,Ve.$resourcesUrl$);return t.origin!==Fe.location.origin?t.href:t.pathname},t.getDefaultToolUIJson=function(e,t){var r,n,o,i,a;const s=[],l=[];return null===(r=e.parameters)||void 0===r||r.forEach((e=>{var r;const n={name:e.name,label:e.name};e.direction===Vs?(n.componentName="analysis-string-input",l.push(n)):"esri_out_feature_service_name"===e.name&&"esriGPParameterDirectionInput"===e.direction?(n.label=null!==(r=null==t?void 0:t.outputName)&&void 0!==r?r:"Output name",l.push(n)):s.push(n)})),{toolName:e.name,version:"0.1.0",UIparameters:[{componentName:"analysis-block",UIparameters:s},{componentName:"analysis-block",label:l.length>0?null!==(n=null==t?void 0:t.resultLayersGroupLabel)&&void 0!==n?n:"Result layers":null!==(o=null==t?void 0:t.resultLayerGroupLabel)&&void 0!==o?o:"Result layer",summaryText:l.length>0?null!==(i=null==t?void 0:t.resultLayersGroupText)&&void 0!==i?i:"Provide a unique names for the result layers.":null!==(a=null==t?void 0:t.resultLayerGroupText)&&void 0!==a?a:"Provide a unique name for the result layer.",UIparameters:l}]}},t.getGPFeatureRecordSetLayerValue=function(e,t){var r,n,o;let i;if(!1===La(e.url)){const a=I.default.findCredential(e.url);if(i={url:`${e.url}/${null!==(r=e.layerId)&&void 0!==r?r:0}`},void 0!==a&&(i.serviceToken=a.token),!1===La(e.definitionExpression)&&(i.filter=e.definitionExpression),!1===La(null===(n=e.sourceJSON)||void 0===n?void 0:n.serviceItemId)&&(i.itemId=null===(o=e.sourceJSON)||void 0===o?void 0:o.serviceItemId),!1===La(e.timeInfo)&&!0===e.useViewTime&&!1===La(null==t?void 0:t.timeExtent)){let e="";void 0!==(null==t?void 0:t.timeExtent.start)?(e+=null==t?void 0:t.timeExtent.start.getTime(),void 0!==(null==t?void 0:t.timeExtent.end)&&(e+=`, ${null==t?void 0:t.timeExtent.end.getTime()}`)):void 0!==(null==t?void 0:t.timeExtent.end)&&(e+=null==t?void 0:t.timeExtent.end.getTime()),e.length>0&&(i.time=e)}}else void 0!==e.source&&(i=function(e){const t=e.source.toArray(),r=t.map((e=>e.toJSON())),n=t[0].geometry,o={layerDefinition:{id:e.id,drawingInfo:{renderer:e.renderer.toJSON()},name:e.title},featureSet:{features:r},nextObjectId:t.length,showLegend:!0};return La(e.objectIdField)||(o.layerDefinition.objectIdField=e.objectIdField),La(n)||(o.layerDefinition.geometryType=T.getJsonType(n)),La(e.spatialReference)||(o.layerDefinition.spatialReference=e.spatialReference.toJSON()),La(e.fields)||(o.layerDefinition.fields=null==e?void 0:e.fields.map((e=>{const t=e.toJSON();return"esriFieldTypeOID"===t.type&&-1===t.length&&delete t.length,"esriFieldTypeString"===t.type&&-1===t.length&&(t.length=255),t}))),La(e.types)||(o.layerDefinition.types=e.types.map((e=>e.toJSON()))),La(e.typeIdField)||(o.layerDefinition.typeIdField=e.typeIdField),La(e.popupTemplate)||(o.popupInfo=e.popupTemplate.toJSON()),o}(e));return i},t.getHelpBaseUrl=function(e){var t;return null!==(t=null==e?void 0:e.sourceJSON.helpBase)&&void 0!==t?t:""},t.getImageryLayerValue=function(e){var t;let r;if(!1===La(e.url)){let n=e.url;n&&n.indexOf("?token=")>0&&(n=n.slice(0,n.indexOf("?token=")));const o=I.default.findCredential(e.url);if(r={url:`${n}`},void 0!==o&&(r={url:`${n}?token=${o.token}`}),sl(e)&&void 0!==e.renderingRule&&null!==e.renderingRule&&(r.renderingRule=e.renderingRule.toJSON()),sl(e)&&void 0!==e.definitionExpression&&null!==e.definitionExpression){let n=null!==(t=e.mosaicRule)&&void 0!==t?t:__esri.MosaicRule.fromJSON(e.sourceJSON);null!=n&&(n=n.clone(),n.where=e.definitionExpression,r.mosaicRule=n.toJSON())}else sl(e)&&void 0!==e.mosaicRule&&null!==e.mosaicRule&&(r.mosaicRule=e.mosaicRule.toJSON())}return r},t.getJobParams=function(e,t){var r;const{parameters:n}=e,o=null===(r=null==n?void 0:n.filter((e=>e.direction!==Vs)))||void 0===r?void 0:r.map((e=>e.name));let i=ya(t,o);return i=ka(i),i},t.getLayerObject=function(e){return Ze(this,void 0,void 0,(function*(){let t;return"object"==typeof e&&"itemId"in e&&!1===La(e.itemId)?t=yield pl(e.itemId):"object"==typeof e&&"url"in e&&!1===La(e.url)&&(t=yield dl(e.url)),void 0!==t&&(t=yield yl(t)),t}))},t.getLocaleInfo=Da,t.getRenderingRef=()=>J,t.getResultParams=function(e){const{parameters:t}=e,r=null==t?void 0:t.filter((e=>e.direction===Vs)).map((e=>e.name));return null!=r?r:[]},t.getToolJSONs=Il,t.getUIOnlyParams=function(e,t,r=[]){const{ExcludedUIOnlyParamKeys:n,ExcludedUIOnlyParamPartialKeys:o,AlwaysIncludedUIOnlyParamKeys:i}=Ol,a={};for(const t of i)a[t]=e[t];const s=[...n,...t],l=[...o,...r],c=[...s,...Object.keys(e).filter((e=>l.some((t=>e.includes(t)))))],u=la(e,c);return Object.keys(u).forEach((e=>{La(u[e])&&delete u[e]})),Object.assign(Object.assign({},u),a)},t.h=W,t.hasNAPrivilege=function(e){const t=null==e?void 0:e.sourceJSON.privileges;return void 0!==t&&t.includes("premium:user:networkanalysis")},t.isEmptyDataItem=La,t.isFeatureLayer=function(e){return"feature"===e.type},t.isImageryLayer=sl,t.isImageryTileLayer=function(e){return"imagery-tile"===e.type},t.isTravelModeUsedByTool=function(e){return["ChooseBestFacilities","ConnectOriginsToDestinations","CreateDriveTimeAreas","EnrichLayer","FindNearest","PlanRoutes","SummarizeNearby"].includes(e)},t.prepJobParamsForSubmission=function(e){var t,r,n;const{jobParams:o,toolData:i,toolUIJson:a,toolName:s,toolJSON:l,isPortal:c=!1}=e;let u=Object.assign({},o);const f=Pl(a),d=function(e){let t=["outputName"];return!0===(null==e?void 0:e.includes("aboveGroundLevelOutputName"))&&t.push("aboveGroundLevelOutputName"),!1===(null==e?void 0:e.includes("outputName"))&&(t=e.filter((e=>e.toLowerCase().includes("output")))),t}(null===(r=null===(t=null==l?void 0:l.parameters)||void 0===t?void 0:t.filter((e=>e.direction!==Vs)))||void 0===r?void 0:r.map((e=>e.name)));if("BatchGeocode"===s&&void 0!==i){const e=i.geocodeUIParameters,t=i.geocodeParameters,r="singleField"===i.singleOrMultiFieldSwitch,o=f.geocodeUIParameters.UIparameterInfos.map((e=>e.name));let a;a=r?o.reduce(((t,r)=>{var n,o;return"SingleLine"===r?t.push([null!==(n=e[r])&&void 0!==n?n:"",r]):t.push([null!==(o=e[r])&&void 0!==o?o:"",""]),t}),[]):o.reduce(((t,r)=>{var n;return"SingleLine"!==r&&t.push([null!==(n=e[r])&&void 0!==n?n:"",r]),t}),[]),t.field_mapping=JSON.stringify(a),u.geocodeParameters=t,La(u.inputFileItem)||(u.inputFileItem={itemid:null===(n=u.inputFileItem)||void 0===n?void 0:n.itemId})}for(const e in u){const t=f[e],r=u[e];if(La(r))u[e]=void 0;else if("object"==typeof r&&void 0!==(null==t?void 0:t.serializationType))u[e]=Nl(t,r);else if("string"==typeof r&&d.includes(e)&&void 0!==i){const t=Tl(i,o,e);let r=t;try{r=Al(t,c)}catch(e){}u[e]=r}}if("ChooseBestFacilities"===s){const e=null==i?void 0:i[Bs];u=function({jobParams:e,UIOnlyParams:t,toolUIParamModel:r,useSubmissionName:n=!0}){const o=Object.assign({},e);if(!1===La(r)){const i={};for(const[a,s]of Object.entries(Object.assign(Object.assign({},e),t))){const e=void 0!==(null==r?void 0:r[a]),t=Pn(r,[a,"submissionName"]),l=e&&Pn(r,[a,"visible"],!0);if(void 0!==t&&!0===l){const e=!0===n?a:t;i[!0===n?t:a]=s,delete o[e]}else!1===e&&"context"!==a&&delete o[a]}Object.assign(o,i)}return o}({jobParams:u,UIOnlyParams:la(i,Object.keys(u)),toolUIParamModel:e})}return da(u,La)},t.proxyCustomElement=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[],!Be&&1&r.$flags$&&(r.$flags$|=8);const n=e.prototype.connectedCallback,o=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){((e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};Te(e,r,t.$listeners$),Re.set(e,r)})(this,r)},connectedCallback(){(e=>{if(0==(1&Ve.$flags$)){const t=xe(e),r=t.$cmpMeta$,n=(r.$tagName$,()=>{});1&t.$flags$?(Te(e,t,r.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&r.$flags$&&(e=>{const t=e["s-cr"]=Me.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),r.$members$&&Object.entries(r.$members$).map((([t,[r]])=>{if(31&r&&e.hasOwnProperty(t)){const r=e[t];delete e[t],e[t]=r}})),(async(e,t,r,n,o)=>{if(0==(32&t.$flags$)&&(o=e.constructor,t.$flags$|=32,customElements.whenDefined(r.$tagName$).then((()=>t.$flags$|=128)),o.style)){let n=o.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>De.map((t=>t(e))).find((e=>!!e)))(e)]);const i=oe(r,t.$modeName$);if(!ze.has(i)){const e=(r.$tagName$,()=>{});((e,t,r)=>{let n=ze.get(e);Ke&&r?(n=n||new CSSStyleSheet,"string"==typeof n?n=t:n.replaceSync(t)):n=t,ze.set(e,n)})(i,n,!!(1&r.$flags$)),e()}}t.$ancestorComponent$,we(t,!0)})(e,t,r)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&Ve.$flags$)){const t=xe(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),o&&o.call(this)},__attachShadow(){Be?this.attachShadow({mode:"open",delegatesFocus:!!(16&r.$flags$)}):this.shadowRoot=this}}),e.is=r.$tagName$,Ae(e,r)},t.sanitizeTokensFromJobParams=function e(t){for(const r of Object.keys(t)){let n=t[r];null!=n&&("string"==typeof n&&n.includes("http")?n=ol(n):Array.isArray(n)?n.forEach((e=>{"object"==typeof e&&"url"in e&&void 0!==e.url&&null!==e.url&&(e.url=ol(e.url),e.serviceToken=void 0)})):"object"==typeof n&&"url"in n&&void 0!==n.url&&null!==n.url?(n.url=ol(n.url),n.serviceToken=void 0):"context"===r&&"object"==typeof n&&e(n)),t[r]=n}return t},t.sanitizeUrl=ol,t.setAssetPath=e=>Ve.$resourcesUrl$=e,t.setNonce=e=>Ve.$nonce$=e,t.setPlatformOptions=e=>Object.assign(Ve,e),t.toCamelToolName=e=>`${e.charAt(0).toLowerCase()}${e.slice(1)}`,t.toPascalToolName=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`}));