define(["exports","./index2-52261f8e","./shared-components-4e078ab3","./store-d154d928","./analysis-tool-context-5cb0d8b6"],(function(e,t,s,l,a){"use strict";const i=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisToolRasterSettingsHelpClick=t.createEvent(this,"analysisToolRasterSettingsHelpClick",7),this.loadedLayerObjects={},this.inferUIState=async()=>{const{cellSize:e,mask:a,snapRaster:i,resamplingMethod:n,parallelProcessingFactor:r,processorType:o}=l.state.context;if("object"==typeof e&&!t.isEmptyDataItem(e)&&"url"in e){this.selectedCellSizeOption=s.CellSizeOptions.Layer;const t=await l.getEnvSettingsLayer(e);void 0!==t&&(this.loadedLayerObjects.cellSize=t,void 0!==t&&void 0===l.findExistingLayer(t.url)&&this.browsedLayers.push(t))}else this.selectedCellSizeOption="number"==typeof e?s.CellSizeOptions.Value:e===s.CellSizeOptions.MinOf?s.CellSizeOptions.MinOf:s.CellSizeOptions.MaxOf;if(void 0!==i){const e=await l.getEnvSettingsLayer(i);void 0!==e&&(this.loadedLayerObjects.snapRaster=e,void 0!==e&&void 0===l.findExistingLayer(e.url)&&this.browsedLayers.push(e))}if(void 0!==a){const e=await l.getEnvSettingsLayer(a);void 0!==e&&(this.loadedLayerObjects.mask=e,void 0!==e&&void 0===l.findExistingLayer(e.url)&&this.browsedLayers.push(e))}void 0!==n&&(this.selectedResamplingMethodOption=n),void 0!==r&&(this.parallelProcessingFactorValue=r),void 0!==o&&(this.selectedProcessorTypeOption=o)},this.renderSnapRasterParameter=()=>{var e;const{strings:s,loadedLayerObjects:i}=this;return t.h("div",null,t.h("analysis-label",{label:s.snapRaster,onAnalysisLabelHelpActionClick:e=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.SnapRaster,parameterName:s.snapRaster,refElement:e.target})}),t.h("analysis-layer-input",{layerFilterType:a.LayerFilterType.Imagery_All,mapLayers:[...l.state.mapLayers,...this.browsedLayers],selectedLayers:null==i?void 0:i.snapRaster,user:null===(e=l.state.portal)||void 0===e?void 0:e.user,mapView:l.state.mapView,onAnalysisLayerInputChange:e=>this.handleAnalysisLayerInputChange(e,a.AnalysisToolContextKeys.SnapRaster)}))},this.renderCellSizeParameter=()=>{var e;const{strings:i,loadedLayerObjects:n,selectedCellSizeOption:r}=this;return t.h("div",null,t.h("analysis-label",{label:i.cellSize,onAnalysisLabelHelpActionClick:e=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.CellSize,parameterName:i.cellSize,refElement:e.target})}),t.h("calcite-select",{scale:s.UIDefaults.Scale,class:s.SharedHTMLClasses.controlSpacing,label:i.cellSize,value:r,onCalciteSelectChange:e=>this.handleCalciteSelectChange(e)},t.h("calcite-option",{value:s.CellSizeOptions.MaxOf,selected:r===s.CellSizeOptions.MaxOf},i.maxOf),t.h("calcite-option",{value:s.CellSizeOptions.MinOf,selected:r===s.CellSizeOptions.MinOf},i.minOf),t.h("calcite-option",{value:s.CellSizeOptions.Value,selected:r===s.CellSizeOptions.Value},i.asSpecified),t.h("calcite-option",{value:s.CellSizeOptions.Layer,selected:r===s.CellSizeOptions.Layer},i.fromLayer)),r===s.CellSizeOptions.Value&&t.h("analysis-number-input",{ref:e=>{this.numberInputElement=e},required:!0,value:l.state.context.cellSize,scale:s.UIDefaults.Scale,label:"",min:0,excludeMinValue:!0,numberType:"float",onAnalysisNumberInputChange:e=>l.state.context.cellSize=Number(e.target.value)}),r===s.CellSizeOptions.Layer&&t.h("analysis-layer-input",{ref:e=>{this.layerInputElement=e},required:!0,layerFilterType:a.LayerFilterType.Imagery_All,mapLayers:[...l.state.mapLayers,...this.browsedLayers],selectedLayers:null==n?void 0:n.cellSize,user:null===(e=l.state.portal)||void 0===e?void 0:e.user,mapView:l.state.mapView,onAnalysisLayerInputChange:e=>this.handleAnalysisLayerInputChange(e,a.AnalysisToolContextKeys.CellSize)}))},this.renderMaskParameter=()=>{var e;const{strings:s,loadedLayerObjects:i}=this;return t.h("div",null,t.h("analysis-label",{label:s.mask,onAnalysisLabelHelpActionClick:e=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.Mask,parameterName:s.mask,refElement:e.target})}),t.h("analysis-layer-input",{mapLayers:[...l.state.mapLayers,...this.browsedLayers],selectedLayers:null==i?void 0:i.mask,layerFilterType:[a.LayerFilterType.Imagery_All,a.LayerFilterType.Feature_All],user:null===(e=l.state.portal)||void 0===e?void 0:e.user,mapView:l.state.mapView,onAnalysisLayerInputChange:e=>this.handleAnalysisLayerInputChange(e,a.AnalysisToolContextKeys.Mask)}))},this.renderResamplingMethodParameter=()=>{const{strings:e,selectedResamplingMethodOption:l}=this;return t.h("div",null,t.h("analysis-label",{label:e.resamplingMethod,onAnalysisLabelHelpActionClick:t=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.ResamplingMethod,parameterName:e.resamplingMethod,refElement:t.target})}),t.h("calcite-select",{scale:s.UIDefaults.Scale,class:s.SharedHTMLClasses.controlSpacing,label:e.resamplingMethod,value:l,onCalciteSelectChange:e=>this.handleResamplingMethodSelectChange(e)},t.h("calcite-option",{value:s.ResamplingMethodOptions.Nearest,selected:l===s.ResamplingMethodOptions.Nearest},e.nearest),t.h("calcite-option",{value:s.ResamplingMethodOptions.Bilinear,selected:l===s.ResamplingMethodOptions.Bilinear},e.bilinear),t.h("calcite-option",{value:s.ResamplingMethodOptions.Cubic,selected:l===s.ResamplingMethodOptions.Cubic},e.cubic)))},this.renderParallelProcessingFactorParameter=()=>{const{strings:e,parallelProcessingFactorValue:s}=this;return t.h("analysis-string-input",{value:s,label:e.parallelProcessingFactor,required:!1,selectionMode:"single",placeholderText:e.parallelProcessingFactorPlaceholderText,onAnalysisStringInputChange:e=>this.handleParallelProcessingFactorInputChange(e),onAnalysisHelpClick:t=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.ParallelProcessingFactor,parameterName:e.parallelProcessingFactor,refElement:t.target})})},this.renderProcessorTypeParameter=()=>{const{strings:e,selectedProcessorTypeOption:l}=this;return t.h("div",null,t.h("analysis-label",{label:e.processorType,onAnalysisLabelHelpActionClick:t=>this.analysisToolRasterSettingsHelpClick.emit({key:a.AnalysisToolContextKeys.ProcessorType,parameterName:e.processorType,refElement:t.target})}),t.h("calcite-select",{scale:s.UIDefaults.Scale,class:s.SharedHTMLClasses.controlSpacing,label:e.processorType,value:l,onCalciteSelectChange:e=>this.handleProcessorTypeSelectChange(e)},t.h("calcite-option",{value:s.ProcessorTypeOptions.Empty,selected:l===s.ProcessorTypeOptions.Empty},e.automatic),t.h("calcite-option",{value:s.ProcessorTypeOptions.CPU,selected:l===s.ProcessorTypeOptions.CPU},e.CPU),t.h("calcite-option",{value:s.ProcessorTypeOptions.GPU,selected:l===s.ProcessorTypeOptions.GPU},e.GPU)))},this.handleCalciteSelectChange=e=>{var t;this.selectedCellSizeOption=null===(t=e.target)||void 0===t?void 0:t.selectedOption.value,this.selectedCellSizeOption!==s.CellSizeOptions.MaxOf&&this.selectedCellSizeOption!==s.CellSizeOptions.MinOf||(l.state.context.cellSize=this.selectedCellSizeOption)},this.handleResamplingMethodSelectChange=e=>{var t;this.selectedResamplingMethodOption=null===(t=e.target)||void 0===t?void 0:t.selectedOption.value,l.state.context.resamplingMethod=this.selectedResamplingMethodOption},this.handleAnalysisLayerInputChange=(e,s)=>{var a;const i=null===(a=e.target)||void 0===a?void 0:a.selectedLayers;if(void 0!==i){let e;t.isFeatureLayer(i)?e=t.getGPFeatureRecordSetLayerValue(i,l.state.mapView):(t.isImageryLayer(i)||t.isImageryTileLayer(i))&&(e=t.getImageryLayerValue(i)),l.state.context[s]=e}else delete l.state.context[s]},this.handleParallelProcessingFactorInputChange=e=>{var t;this.parallelProcessingFactorValue=null===(t=e.target)||void 0===t?void 0:t.value,l.state.context.parallelProcessingFactor=this.parallelProcessingFactorValue},this.handleProcessorTypeSelectChange=e=>{var t;this.selectedProcessorTypeOption=null===(t=e.target)||void 0===t?void 0:t.selectedOption.value,l.state.context.processorType=this.selectedProcessorTypeOption===s.ProcessorTypeOptions.Empty?void 0:this.selectedProcessorTypeOption},this.browsedLayers=[],this.selectedCellSizeOption=s.CellSizeOptions.MaxOf,this.selectedResamplingMethodOption=s.ResamplingMethodOptions.Nearest,this.parallelProcessingFactorValue="",this.selectedProcessorTypeOption=s.ProcessorTypeOptions.Empty,this.hideCellSize=!1,this.hideResamplingMethod=!1,this.hideMask=!1,this.hideSnapRaster=!1,this.hideParallelProcessingFactor=!1,this.hideProcessorType=!1}async validateRasterSettings(){let e=!0;switch(this.selectedCellSizeOption){case s.CellSizeOptions.Layer:const t=this.layerInputElement;null!=t&&(e=await t.checkValidity());break;case s.CellSizeOptions.Value:const l=this.numberInputElement;null!=l&&(e=await l.checkValidity())}return e}resetUI(){var e;this.loadedLayerObjects={},this.selectedCellSizeOption=s.CellSizeOptions.MaxOf,this.selectedResamplingMethodOption=s.ResamplingMethodOptions.Nearest,this.parallelProcessingFactorValue="",this.selectedProcessorTypeOption=s.ProcessorTypeOptions.Empty;const t=null===(e=this.hostElement.shadowRoot)||void 0===e?void 0:e.querySelectorAll("analysis-layer-input");return null==t||t.forEach((e=>e.selectedLayerIds=[])),Promise.resolve()}async componentWillLoad(){({strings:this.strings}=await t.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),await this.inferUIState()}render(){const{hideCellSize:e,hideSnapRaster:s,hideMask:l,hideResamplingMethod:a,hideParallelProcessingFactor:i,hideProcessorType:n}=this;return t.h(t.Host,null,!1===s?this.renderSnapRasterParameter():null,!1===e?this.renderCellSizeParameter():null,!1===l?this.renderMaskParameter():null,!1===a?this.renderResamplingMethodParameter():null,!1===i?this.renderParallelProcessingFactorParameter():null,!1===n?this.renderProcessorTypeParameter():null)}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return":root{display:flex}.control-spacing{margin-bottom:var(--analysis-three-quarter-spacing)}.label-container{display:flex;margin-bottom:var(--analysis-quarter-spacing);gap:var(--analysis-quarter-spacing)}.analysis-border{border:1px solid var(--analysis-ui-border-input)}:host{display:flex;flex-direction:column;--calcite-ui-border-input:var(--analysis-ui-border-input)}"}},[1,"analysis-tool-raster-settings",{hideCellSize:[516,"hide-cell-size"],hideResamplingMethod:[516,"hide-resampling-method"],hideMask:[516,"hide-mask"],hideSnapRaster:[516,"hide-snap-raster"],hideParallelProcessingFactor:[516,"hide-parallel-processing-factor"],hideProcessorType:[516,"hide-processor-type"],browsedLayers:[32],selectedCellSizeOption:[32],selectedResamplingMethodOption:[32],parallelProcessingFactorValue:[32],selectedProcessorTypeOption:[32],validateRasterSettings:[64],resetUI:[64]}]);function n(){"undefined"!=typeof customElements&&["analysis-tool-raster-settings"].forEach((e=>{"analysis-tool-raster-settings"===e&&(customElements.get(e)||customElements.define(e,i))}))}n(),e.AnalysisToolRasterSettings=i,e.defineCustomElement=n}));