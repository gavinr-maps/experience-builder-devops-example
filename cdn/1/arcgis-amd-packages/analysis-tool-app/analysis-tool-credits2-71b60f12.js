define(["require","exports","./index2-52261f8e","esri/rest/support/JobInfo","esri/rest/geoprocessor","esri/request","esri/core/urlUtils","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/identity/IdentityManager","esri/core/reactiveUtils","esri/rest/support/Query","esri/core/promiseUtils","esri/portal/PortalItemResource","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/layers/Layer","esri/portal/PortalItem","esri/layers/support/Field","esri/renderers/Renderer","esri/rest/support/FeatureSet","esri/config","esri/smartMapping/statistics/uniqueValues","esri/core/sql","./store-d154d928","./analysis-tool-credits-popover2-1ec8ea99"],(function(e,t,r,n,o,i,a,s,c,l,u,d,f,p,v,h,y,b,m,g,j,w,_,P,E,O,S){"use strict";function C(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var A=C(n),T=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}(o),k=C(i),I=C(u),x=C(h),R=C(m),$=C(g),F=C(j),z=C(w),N=C(_);function U(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function M(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))}var L="object"==typeof global&&global&&global.Object===Object&&global,D="object"==typeof self&&self&&self.Object===Object&&self,J=L||D||Function("return this")(),V=J.Symbol,G=Object.prototype,B=G.hasOwnProperty,K=G.toString,H=V?V.toStringTag:void 0,q=Object.prototype.toString,W="[object Null]",Y="[object Undefined]",Q=V?V.toStringTag:void 0;function X(e){return null==e?void 0===e?Y:W:Q&&Q in Object(e)?function(e){var t=B.call(e,H),r=e[H];try{e[H]=void 0;var n=!0}catch(e){}var o=K.call(e);return n&&(t?e[H]=r:delete e[H]),o}(e):function(e){return q.call(e)}(e)}function Z(e){return null!=e&&"object"==typeof e}var ee="[object Symbol]";function te(e){return"symbol"==typeof e||Z(e)&&X(e)==ee}function re(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var ne=Array.isArray,oe=1/0,ie=V?V.prototype:void 0,ae=ie?ie.toString:void 0;function se(e){if("string"==typeof e)return e;if(ne(e))return re(e,se)+"";if(te(e))return ae?ae.call(e):"";var t=e+"";return"0"==t&&1/e==-oe?"-0":t}function ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function le(e){return e}var ue="[object AsyncFunction]",de="[object Function]",fe="[object GeneratorFunction]",pe="[object Proxy]";function ve(e){if(!ce(e))return!1;var t=X(e);return t==de||t==fe||t==ue||t==pe}var he,ye=J["__core-js_shared__"],be=(he=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||""))?"Symbol(src)_1."+he:"",me=Function.prototype.toString;function ge(e){if(null!=e){try{return me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var je=/^\[object .+?Constructor\]$/,we=Function.prototype,_e=Object.prototype,Pe=we.toString,Ee=_e.hasOwnProperty,Oe=RegExp("^"+Pe.call(Ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Se(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ce(e)||(t=e,be&&be in t))&&(ve(e)?Oe:je).test(ge(e));var t}(r)?r:void 0}var Ce=Se(J,"WeakMap"),Ae=Object.create,Te=function(){function e(){}return function(t){if(!ce(t))return{};if(Ae)return Ae(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ke=Te;function Ie(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var xe=Date.now;function Re(e){return function(){return e}}var $e,Fe,ze,Ne=function(){try{var e=Se(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ue=Ne,Me=Ue?function(e,t){return Ue(e,"toString",{configurable:!0,enumerable:!1,value:Re(t),writable:!0})}:le,Le=($e=Me,Fe=0,ze=0,function(){var e=xe(),t=16-(e-ze);if(ze=e,t>0){if(++Fe>=800)return arguments[0]}else Fe=0;return $e.apply(void 0,arguments)}),De=Le;function Je(e){return e!=e}function Ve(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t):function(e,t,r,n){for(var o=e.length,i=-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,Je)}(e,t)>-1}var Ge=9007199254740991,Be=/^(?:0|[1-9]\d*)$/;function Ke(e,t){var r=typeof e;return!!(t=null==t?Ge:t)&&("number"==r||"symbol"!=r&&Be.test(e))&&e>-1&&e%1==0&&e<t}function He(e,t,r){"__proto__"==t&&Ue?Ue(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function qe(e,t){return e===t||e!=e&&t!=t}var We=Object.prototype.hasOwnProperty;function Ye(e,t,r){var n=e[t];We.call(e,t)&&qe(n,r)&&(void 0!==r||t in e)||He(e,t,r)}function Qe(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),o?He(r,s,c):Ye(r,s,c)}return r}var Xe=Math.max;function Ze(e,t,r){return t=Xe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Xe(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),Ie(e,this,s)}}function et(e,t){return De(Ze(e,t,le),e+"")}var tt=9007199254740991;function rt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=tt}function nt(e){return null!=e&&rt(e.length)&&!ve(e)}function ot(e,t,r){if(!ce(r))return!1;var n=typeof t;return!!("number"==n?nt(r)&&Ke(t,r.length):"string"==n&&t in r)&&qe(r[t],e)}function it(e){return et((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&ot(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}var at=Object.prototype;function st(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function ct(e){return Z(e)&&"[object Arguments]"==X(e)}var lt=Object.prototype,ut=lt.hasOwnProperty,dt=lt.propertyIsEnumerable,ft=ct(function(){return arguments}())?ct:function(e){return Z(e)&&ut.call(e,"callee")&&!dt.call(e,"callee")},pt=ft,vt="object"==typeof t&&t&&!t.nodeType&&t,ht=vt&&"object"==typeof module&&module&&!module.nodeType&&module,yt=ht&&ht.exports===vt?J.Buffer:void 0,bt=(yt?yt.isBuffer:void 0)||function(){return!1},mt={};function gt(e){return function(t){return e(t)}}mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var jt="object"==typeof t&&t&&!t.nodeType&&t,wt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,_t=wt&&wt.exports===jt&&L.process,Pt=function(){try{return wt&&wt.require&&wt.require("util").types||_t&&_t.binding&&_t.binding("util")}catch(e){}}(),Et=Pt&&Pt.isTypedArray,Ot=Et?gt(Et):function(e){return Z(e)&&rt(e.length)&&!!mt[X(e)]},St=Ot,Ct=Object.prototype.hasOwnProperty;function At(e,t){var r=ne(e),n=!r&&pt(e),o=!r&&!n&&bt(e),i=!r&&!n&&!o&&St(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var l in e)!t&&!Ct.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ke(l,c))||s.push(l);return s}function Tt(e,t){return function(r){return e(t(r))}}var kt=Tt(Object.keys,Object),It=Object.prototype.hasOwnProperty;function xt(e){if(!st(e))return kt(e);var t=[];for(var r in Object(e))It.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Rt(e){return nt(e)?At(e):xt(e)}var $t=Object.prototype.hasOwnProperty;it((function(e,t){if(st(t)||nt(t))Qe(t,Rt(t),e);else for(var r in t)$t.call(t,r)&&Ye(e,r,t[r])}));var Ft=Object.prototype.hasOwnProperty;function zt(e){return nt(e)?At(e,!0):function(e){if(!ce(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=st(e),r=[];for(var n in e)("constructor"!=n||!t&&Ft.call(e,n))&&r.push(n);return r}(e)}var Nt=it((function(e,t,r,n){Qe(t,zt(t),e,n)})),Ut=Nt,Mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/;function Dt(e,t){if(ne(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!te(e))||Lt.test(e)||!Mt.test(e)||null!=t&&e in Object(t)}var Jt=Se(Object,"create"),Vt=Object.prototype.hasOwnProperty,Gt=Object.prototype.hasOwnProperty;function Bt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kt(e,t){for(var r=e.length;r--;)if(qe(e[r][0],t))return r;return-1}Bt.prototype.clear=function(){this.__data__=Jt?Jt(null):{},this.size=0},Bt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bt.prototype.get=function(e){var t=this.__data__;if(Jt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Vt.call(t,e)?t[e]:void 0},Bt.prototype.has=function(e){var t=this.__data__;return Jt?void 0!==t[e]:Gt.call(t,e)},Bt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Jt&&void 0===t?"__lodash_hash_undefined__":t,this};var Ht=Array.prototype.splice;function qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qt.prototype.clear=function(){this.__data__=[],this.size=0},qt.prototype.delete=function(e){var t=this.__data__,r=Kt(t,e);return!(r<0||(r==t.length-1?t.pop():Ht.call(t,r,1),--this.size,0))},qt.prototype.get=function(e){var t=this.__data__,r=Kt(t,e);return r<0?void 0:t[r][1]},qt.prototype.has=function(e){return Kt(this.__data__,e)>-1},qt.prototype.set=function(e,t){var r=this.__data__,n=Kt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Wt=Se(J,"Map");function Yt(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qt.prototype.clear=function(){this.size=0,this.__data__={hash:new Bt,map:new(Wt||qt),string:new Bt}},Qt.prototype.delete=function(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t},Qt.prototype.get=function(e){return Yt(this,e).get(e)},Qt.prototype.has=function(e){return Yt(this,e).has(e)},Qt.prototype.set=function(e,t){var r=Yt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Xt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Xt.Cache||Qt),r}Xt.Cache=Qt;var Zt,er,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rr=/\\(\\)?/g,nr=(Zt=Xt((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(tr,(function(e,r,n,o){t.push(n?o.replace(rr,"$1"):r||e)})),t}),(function(e){return 500===er.size&&er.clear(),e})),er=Zt.cache,Zt);function or(e){return null==e?"":se(e)}function ir(e,t){return ne(e)?e:Dt(e,t)?[e]:nr(or(e))}var ar=1/0;function sr(e){if("string"==typeof e||te(e))return e;var t=e+"";return"0"==t&&1/e==-ar?"-0":t}function cr(e,t){for(var r=0,n=(t=ir(t,e)).length;null!=e&&r<n;)e=e[sr(t[r++])];return r&&r==n?e:void 0}function lr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var ur=V?V.isConcatSpreadable:void 0;function dr(e){return ne(e)||pt(e)||!!(ur&&e&&e[ur])}function fr(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=dr),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?fr(s,t-1,r,n,o):lr(o,s):n||(o[o.length]=s)}return o}function pr(e){return null!=e&&e.length?fr(e,1):[]}function vr(e){return De(Ze(e,void 0,pr),e+"")}var hr=Tt(Object.getPrototypeOf,Object),yr="[object Object]",br=Function.prototype,mr=Object.prototype,gr=br.toString,jr=mr.hasOwnProperty,wr=gr.call(Object);function _r(e){if(!Z(e)||X(e)!=yr)return!1;var t=hr(e);if(null===t)return!0;var r=jr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&gr.call(r)==wr}var Pr="[object DOMException]",Er="[object Error]";function Or(e){if(!Z(e))return!1;var t=X(e);return t==Er||t==Pr||"string"==typeof e.message&&"string"==typeof e.name&&!_r(e)}var Sr=et((function(e,t){try{return Ie(e,void 0,t)}catch(e){return Or(e)?e:new Error(e)}})),Cr=Sr;function Ar(e){var t=this.__data__=new qt(e);this.size=t.size}Ar.prototype.clear=function(){this.__data__=new qt,this.size=0},Ar.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ar.prototype.get=function(e){return this.__data__.get(e)},Ar.prototype.has=function(e){return this.__data__.has(e)},Ar.prototype.set=function(e,t){var r=this.__data__;if(r instanceof qt){var n=r.__data__;if(!Wt||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qt(n)}return r.set(e,t),this.size=r.size,this};var Tr="object"==typeof t&&t&&!t.nodeType&&t,kr=Tr&&"object"==typeof module&&module&&!module.nodeType&&module,Ir=kr&&kr.exports===Tr?J.Buffer:void 0,xr=Ir?Ir.allocUnsafe:void 0;function Rr(){return[]}var $r=Object.prototype.propertyIsEnumerable,Fr=Object.getOwnPropertySymbols,zr=Fr?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,o=null==t?0:t.length,i=0,a=[];++n<o;){var s=t[n];c=s,$r.call(e,c)&&(a[i++]=s)}var c;return a}(Fr(e)))}:Rr,Nr=zr,Ur=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)lr(t,Nr(e)),e=hr(e);return t}:Rr,Mr=Ur;function Lr(e,t,r){var n=t(e);return ne(e)?n:lr(n,r(e))}function Dr(e){return Lr(e,Rt,Nr)}function Jr(e){return Lr(e,zt,Mr)}var Vr=Se(J,"DataView"),Gr=Se(J,"Promise"),Br=Se(J,"Set"),Kr="[object Map]",Hr="[object Promise]",qr="[object Set]",Wr="[object WeakMap]",Yr="[object DataView]",Qr=ge(Vr),Xr=ge(Wt),Zr=ge(Gr),en=ge(Br),tn=ge(Ce),rn=X;(Vr&&rn(new Vr(new ArrayBuffer(1)))!=Yr||Wt&&rn(new Wt)!=Kr||Gr&&rn(Gr.resolve())!=Hr||Br&&rn(new Br)!=qr||Ce&&rn(new Ce)!=Wr)&&(rn=function(e){var t=X(e),r="[object Object]"==t?e.constructor:void 0,n=r?ge(r):"";if(n)switch(n){case Qr:return Yr;case Xr:return Kr;case Zr:return Hr;case en:return qr;case tn:return Wr}return t});var nn=rn,on=Object.prototype.hasOwnProperty,an=J.Uint8Array;function sn(e){var t=new e.constructor(e.byteLength);return new an(t).set(new an(e)),t}var cn=/\w*$/,ln=V?V.prototype:void 0,un=ln?ln.valueOf:void 0,dn="[object Boolean]",fn="[object Date]",pn="[object Map]",vn="[object Number]",hn="[object RegExp]",yn="[object Set]",bn="[object String]",mn="[object Symbol]",gn="[object ArrayBuffer]",jn="[object DataView]",wn="[object Float32Array]",_n="[object Float64Array]",Pn="[object Int8Array]",En="[object Int16Array]",On="[object Int32Array]",Sn="[object Uint8Array]",Cn="[object Uint8ClampedArray]",An="[object Uint16Array]",Tn="[object Uint32Array]";var kn=Pt&&Pt.isMap,In=kn?gt(kn):function(e){return Z(e)&&"[object Map]"==nn(e)},xn=In,Rn=Pt&&Pt.isSet,$n=Rn?gt(Rn):function(e){return Z(e)&&"[object Set]"==nn(e)},Fn=$n,zn="[object Arguments]",Nn="[object Function]",Un="[object Object]",Mn={};function Ln(e,t,r,n,o,i){var a,s=1&t,c=2&t,l=4&t;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!ce(e))return e;var u=ne(e);if(u){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&on.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,a)}else{var d=nn(e),f=d==Nn||"[object GeneratorFunction]"==d;if(bt(e))return function(e,t){if(t)return e.slice();var r=e.length,n=xr?xr(r):new e.constructor(r);return e.copy(n),n}(e,s);if(d==Un||d==zn||f&&!o){if(a=c||f?{}:function(e){return"function"!=typeof e.constructor||st(e)?{}:ke(hr(e))}(e),!s)return c?function(e,t){return Qe(e,Mr(e),t)}(e,function(e,t){return e&&Qe(t,zt(t),e)}(a,e)):function(e,t){return Qe(e,Nr(e),t)}(e,function(e,t){return e&&Qe(t,Rt(t),e)}(a,e))}else{if(!Mn[d])return o?e:{};a=function(e,t,r){var n,o,i,a=e.constructor;switch(t){case gn:return sn(e);case dn:case fn:return new a(+e);case jn:return function(e,t){var r=t?sn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case wn:case _n:case Pn:case En:case On:case Sn:case Cn:case An:case Tn:return function(e,t){var r=t?sn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case pn:return new a;case vn:case bn:return new a(e);case hn:return(i=new(o=e).constructor(o.source,cn.exec(o))).lastIndex=o.lastIndex,i;case yn:return new a;case mn:return n=e,un?Object(un.call(n)):{}}}(e,d,s)}}i||(i=new Ar);var p=i.get(e);if(p)return p;i.set(e,a),Fn(e)?e.forEach((function(n){a.add(Ln(n,t,r,n,e,i))})):xn(e)&&e.forEach((function(n,o){a.set(o,Ln(n,t,r,o,e,i))}));var v=u?void 0:(l?c?Jr:Dr:c?zt:Rt)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r););}(v||e,(function(n,o){v&&(n=e[o=n]),Ye(a,o,Ln(n,t,r,o,e,i))})),a}function Dn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Qt;++t<r;)this.add(e[t])}function Jn(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Vn(e,t){return e.has(t)}Mn[zn]=Mn["[object Array]"]=Mn["[object ArrayBuffer]"]=Mn["[object DataView]"]=Mn["[object Boolean]"]=Mn["[object Date]"]=Mn["[object Float32Array]"]=Mn["[object Float64Array]"]=Mn["[object Int8Array]"]=Mn["[object Int16Array]"]=Mn["[object Int32Array]"]=Mn["[object Map]"]=Mn["[object Number]"]=Mn[Un]=Mn["[object RegExp]"]=Mn["[object Set]"]=Mn["[object String]"]=Mn["[object Symbol]"]=Mn["[object Uint8Array]"]=Mn["[object Uint8ClampedArray]"]=Mn["[object Uint16Array]"]=Mn["[object Uint32Array]"]=!0,Mn["[object Error]"]=Mn[Nn]=Mn["[object WeakMap]"]=!1,Dn.prototype.add=Dn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(e){return this.__data__.has(e)};var Gn=1,Bn=2;function Kn(e,t,r,n,o,i){var a=r&Gn,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=i.get(e),u=i.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=r&Bn?new Dn:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var v=e[d],h=t[d];if(n)var y=a?n(h,v,d,t,e,i):n(v,h,d,e,t,i);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!Jn(t,(function(e,t){if(!Vn(p,t)&&(v===e||o(v,e,r,n,i)))return p.push(t)}))){f=!1;break}}else if(v!==h&&!o(v,h,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Hn(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function qn(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Wn=1,Yn=2,Qn="[object Boolean]",Xn="[object Date]",Zn="[object Error]",eo="[object Map]",to="[object Number]",ro="[object RegExp]",no="[object Set]",oo="[object String]",io="[object Symbol]",ao="[object ArrayBuffer]",so="[object DataView]",co=V?V.prototype:void 0,lo=co?co.valueOf:void 0,uo=1,fo=Object.prototype.hasOwnProperty,po=1,vo="[object Arguments]",ho="[object Array]",yo="[object Object]",bo=Object.prototype.hasOwnProperty;function mo(e,t,r,n,o){return e===t||(null==e||null==t||!Z(e)&&!Z(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=ne(e),s=ne(t),c=a?ho:nn(e),l=s?ho:nn(t),u=(c=c==vo?yo:c)==yo,d=(l=l==vo?yo:l)==yo,f=c==l;if(f&&bt(e)){if(!bt(t))return!1;a=!0,u=!1}if(f&&!u)return i||(i=new Ar),a||St(e)?Kn(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case so:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ao:return!(e.byteLength!=t.byteLength||!i(new an(e),new an(t)));case Qn:case Xn:case to:return qe(+e,+t);case Zn:return e.name==t.name&&e.message==t.message;case ro:case oo:return e==t+"";case eo:var s=Hn;case no:var c=n&Wn;if(s||(s=qn),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;n|=Yn,a.set(e,t);var u=Kn(s(e),s(t),n,o,i,a);return a.delete(e),u;case io:if(lo)return lo.call(e)==lo.call(t)}return!1}(e,t,c,r,n,o,i);if(!(r&po)){var p=u&&bo.call(e,"__wrapped__"),v=d&&bo.call(t,"__wrapped__");if(p||v){var h=p?e.value():e,y=v?t.value():t;return i||(i=new Ar),o(h,y,r,n,i)}}return!!f&&(i||(i=new Ar),function(e,t,r,n,o,i){var a=r&uo,s=Dr(e),c=s.length;if(c!=Dr(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:fo.call(t,u)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=a;++l<c;){var h=e[u=s[l]],y=t[u];if(n)var b=a?n(y,h,u,t,e,i):n(h,y,u,e,t,i);if(!(void 0===b?h===y||o(h,y,r,n,i):b)){p=!1;break}v||(v="constructor"==u)}if(p&&!v){var m=e.constructor,g=t.constructor;m==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))}(e,t,r,n,mo,o))}var go=1,jo=2;function wo(e){return e==e&&!ce(e)}function _o(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function Po(e,t){return null!=e&&t in Object(e)}function Eo(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=ir(t,e)).length,i=!1;++n<o;){var a=sr(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&rt(o)&&Ke(a,o)&&(ne(e)||pt(e))}(e,t,Po)}var Oo=1,So=2;function Co(e){return"function"==typeof e?e:null==e?le:"object"==typeof e?ne(e)?(n=e[0],o=e[1],Dt(n)&&wo(o)?_o(sr(n),o):function(e){var t=function(e,t,r){var n=null==e?void 0:cr(e,t);return void 0===n?void 0:n}(e,n);return void 0===t&&t===o?Eo(e,n):mo(o,t,Oo|So)}):(r=function(e){for(var t=Rt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,wo(o)]}return t}(t=e),1==r.length&&r[0][2]?_o(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=r[o])[0],c=e[s],l=a[1];if(a[2]){if(void 0===c&&!(s in e))return!1}else{var u,d=new Ar;if(!(void 0===u?mo(l,c,go|jo,n,d):u))return!1}}return!0}(e,0,r)}):function(e){return Dt(e)?(t=sr(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return cr(t,e)}}(e);var t}(e);var t,r,n,o}function Ao(e){return Z(e)&&nt(e)}function To(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ko,Io=(ko={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==ko?void 0:ko[e]}),xo=/[&<>"']/g,Ro=RegExp(xo.source),$o=Math.min;function Fo(e){return Ao(e)?e:[]}et((function(e){var t=To(e),r=re(e,Fo);return t===To(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?function(e,t,r){for(var n=Ve,o=e[0].length,i=e.length,a=i,s=Array(i),c=1/0,l=[];a--;){var u=e[a];a&&t&&(u=re(u,gt(t))),c=$o(u.length,c),s[a]=t||o>=120&&u.length>=120?new Dn(a&&u):void 0}u=e[0];var d=-1,f=s[0];e:for(;++d<o&&l.length<c;){var p=u[d],v=t?t(p):p;if(p=0!==p?p:0,!(f?Vn(f,v):n(l,v,r))){for(a=i;--a;){var h=s[a];if(!(h?Vn(h,v):n(e[a],v,r)))continue e}f&&f.push(v),l.push(p)}}return l}(r,Co(t)):[]}));var zo="[object Map]",No="[object Set]",Uo=Object.prototype.hasOwnProperty;function Mo(e,t){return null==(e=function(e,t){return t.length<2?e:cr(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=ir(t,e)))||delete e[sr(To(t))]}function Lo(e){return _r(e)?void 0:e}var Do=vr((function(e,t){var r={};if(null==e)return r;var n=!1;t=re(t,(function(t){return t=ir(t,e),n||(n=t.length>1),t})),Qe(e,Jr(e),r),n&&(r=Ln(r,7,Lo));for(var o=t.length;o--;)Mo(r,t[o]);return r})),Jo=Do;function Vo(e,t,r,n){if(!ce(e))return e;for(var o=-1,i=(t=ir(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=sr(t[o]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var u=s[c];void 0===(l=n?n(u,c,s):void 0)&&(l=ce(u)?u:Ke(t[o+1])?[]:{})}Ye(s,c,l),s=s[c]}return e}vr((function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=cr(e,a);r(0,a)&&Vo(i,ir(a,e),s)}return i}(e,t,(function(t,r){return Eo(e,r)}))}(e,t)}));var Go=Object.prototype,Bo=Go.hasOwnProperty;function Ko(e,t,r,n){return void 0===e||qe(e,Go[r])&&!Bo.call(n,r)?t:e}var Ho={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function qo(e){return"\\"+Ho[e]}var Wo=/<%=([\s\S]+?)%>/g,Yo={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Wo,variable:"",imports:{_:{escape:function(e){return(e=or(e))&&Ro.test(e)?e.replace(xo,Io):e}}}},Qo="Invalid `variable` option passed into `_.template`",Xo=/\b__p \+= '';/g,Zo=/\b(__p \+=) '' \+/g,ei=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ti=/[()=,{}\[\]\/\s]/,ri=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ni=/($^)/,oi=/['\n\r\u2028\u2029\\]/g,ii=Object.prototype.hasOwnProperty;var ai=Br&&1/qn(new Br([,-0]))[1]==1/0?function(e){return new Br(e)}:function(){};function si(e){return null==e||"string"==typeof e&&""===e||_r(e)&&function(e){if(null==e)return!0;if(nt(e)&&(ne(e)||"string"==typeof e||"function"==typeof e.splice||bt(e)||St(e)||pt(e)))return!e.length;var t=nn(e);if(t==zo||t==No)return!e.size;if(st(e))return!xt(e).length;for(var r in e)if(Uo.call(e,r))return!1;return!0}(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===ne(e)&&function(e){let t=!0;if("object"==typeof e&&!1===ne(e))for(const r in e){const n=null==e?void 0:e[r];if(!0===e.hasOwnProperty(r)&&null!=n&&""!==n){t=!1;break}}return t}(e)}function ci(e,t){return M(this,void 0,void 0,(function*(){return k.default(e,t)}))}et((function(e){var t=To(e);return Ao(t)&&(t=void 0),function(e,t,r){var n=-1,o=Ve,i=e.length,a=!0,s=[],c=s;if(i>=200){var l=t?null:ai(e);if(l)return qn(l);a=!1,o=Vn,c=new Dn}else c=t?[]:s;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=0!==u?u:0,a&&d==d){for(var f=c.length;f--;)if(c[f]===d)continue e;t&&c.push(d),s.push(u)}else o(c,d,r)||(c!==s&&c.push(d),s.push(u))}return s}(fr(e,1,Ao,!0),Co(t))}));const li={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},ui=[...Object.values(li),"ar-u-nu-latn","en-AU","en-GB","es-ES","es-MX","de-AT","de-CH","de-DE","it-CH","it-IT"],di=[li.Arabic,li.Hebrew];function fi(e,t){return function(e,t,r){var n=Yo.imports._.templateSettings||Yo;r&&ot(e,t,r)&&(t=void 0),e=or(e),t=Ut({},t,n,Ko);var o,i,a=Ut({},t.imports,n.imports,Ko),s=Rt(a),c=function(e,t){return re(t,(function(t){return e[t]}))}(a,s),l=0,u=t.interpolate||ni,d="__p += '",f=RegExp((t.escape||ni).source+"|"+u.source+"|"+(u===Wo?ri:ni).source+"|"+(t.evaluate||ni).source+"|$","g"),p=ii.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,r,n,a,s,c){return n||(n=a),d+=e.slice(l,c).replace(oi,qo),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var v=ii.call(t,"variable")&&t.variable;if(v){if(ti.test(v))throw new Error(Qo)}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(Xo,""):d).replace(Zo,"$1").replace(ei,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var h=Cr((function(){return Function(s,p+"return "+d).apply(void 0,c)}));if(h.source=d,Or(h))throw h;return h}(e)(t)}function pi(e=document.documentElement){var t;const r=("[lang]",function e(t){let r;return r=void 0===t||t===document||t===window?null:t.closest("[lang]")||e(t.getRootNode().host),r}(e));const n=null!==(t=null==r?void 0:r.lang)&&void 0!==t?t:window.navigator.language,o=function(e){let t=li.English;if(void 0!==e){const r=Object.values(li),n=r.filter((e=>-1!==e.indexOf("-")));if(-1!==e.indexOf("-")){const[t,r]=e.split("-");e=`${t}-${r.toUpperCase()}`}if(!0===n.includes(e))t=e;else{const n=function(e){const t=null==e?void 0:e.match(/^([a-z]{2})-([A-Z]{1,2})$/);let r=li.English;return null!=t&&(null==t?void 0:t.length)>1?r=t[1]:2===(null==e?void 0:e.length)&&e.toLowerCase()===e&&(r=e),r}(e);!0===r.includes(n)&&(t=n)}}return t}(n),i=function(e){let t=ui.find((t=>t===e));if(void 0===t&&(t=e),void 0!==t&&-1!==t.indexOf("-")){const[e,r]=t.split("-");t=`${e}-${r.toUpperCase()}`}return"ar"===t&&(t="ar-u-nu-latn"),t}(n);return{locale:o,rtl:di.includes(o),formatLocale:i}}class vi extends Error{constructor(e,t,r,n){super(t),this.name=e,this.details=r,this.cause=n}}const hi="InsufficientCreditsError",yi="creditThresholdExceededError",bi="serviceNameExistsError",mi="networkError",gi="specialCharactersInServiceNameError";var ji=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},wi=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return ji()}try{return __global__||ji()}finally{delete Object.prototype.__global__}}(),_i="object"==typeof globalThis&&globalThis&&globalThis.Array===Array?globalThis:wi,Pi=_i,Ei={object:!0,symbol:!0},Oi={exports:{}},Si=function(e){return null!=e},Ci=Si,Ai={object:!0,function:!0,undefined:!0},Ti=function(e){if(!function(e){return!!Ci(e)&&hasOwnProperty.call(Ai,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},ki=/^\s*class[\s{/}]/,Ii=Function.prototype.toString,xi=function(e){return null!=e},Ri=xi,$i=Object.keys,Fi=function(){try{return!0}catch(e){return!1}}()?Object.keys:function(e){return $i(Ri(e)?Object(e):e)},zi=xi,Ni=Fi,Ui=Math.max,Mi=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var r,n,o,i=Ui(arguments.length,2);for(e=Object(function(e){if(!zi(e))throw new TypeError("Cannot use null or undefined");return e}(e)),o=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},n=1;n<i;++n)Ni(t=arguments[n]).forEach(o);if(void 0!==r)throw r;return e},Li=xi,Di=Array.prototype.forEach,Ji=Object.create,Vi="razdwatrzy",Gi=String.prototype.indexOf,Bi="function"==typeof Vi.contains&&!0===Vi.contains("dwa")&&!1===Vi.contains("foo")?String.prototype.contains:function(e){return Gi.call(this,e,arguments[1])>-1},Ki=Si,Hi=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!Ti(e)}(e)&&!ki.test(Ii.call(e))},qi=Mi,Wi=function(e){var t=Ji(null);return Di.call(arguments,(function(e){Li(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)})),t},Yi=Bi,Qi=Oi.exports=function(e,t){var r,n,o,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],Ki(e)?(r=Yi.call(e,"c"),n=Yi.call(e,"e"),o=Yi.call(e,"w")):(r=o=!0,n=!1),a={value:t,configurable:r,enumerable:n,writable:o},i?qi(Wi(i),a):a};Qi.gs=function(e,t,r){var n,o,i,a;return"string"!=typeof e?(i=r,r=t,t=e,e=null):i=arguments[3],Ki(t)?Hi(t)?Ki(r)?Hi(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,Ki(e)?(n=Yi.call(e,"c"),o=Yi.call(e,"e")):(n=!0,o=!1),a={get:t,set:r,configurable:n,enumerable:o},i?qi(Wi(i),a):a};var Xi,Zi,ea,ta=function(e){if(!function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}(e))throw new TypeError(e+" is not a symbol");return e},ra=Oi.exports,na=Object.create,oa=Object.defineProperty,ia=Object.prototype,aa=na(null),sa=Oi.exports,ca=_i.Symbol,la=Oi.exports,ua=ta,da=Object.create(null),fa=Oi.exports,pa=ta,va=_i.Symbol,ha=function(e){for(var t,r,n=0;aa[e+(n||"")];)++n;return aa[e+=n||""]=!0,oa(ia,t="@@"+e,ra.gs(null,(function(e){r||(r=!0,oa(this,t,ra(e)),r=!1)}))),t},ya=Object.create,ba=Object.defineProperties,ma=Object.defineProperty;if("function"==typeof va)try{String(va()),ea=!0}catch(e){}else va=null;Zi=function(e){if(this instanceof Zi)throw new TypeError("Symbol is not a constructor");return Xi(e)};var ga,ja=Xi=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return ea?va(t):(r=ya(Zi.prototype),t=void 0===t?"":String(t),ba(r,{__description__:fa("",t),__name__:fa("",ha(t))}))};(function(e){Object.defineProperties(e,{hasInstance:sa("",ca&&ca.hasInstance||e("hasInstance")),isConcatSpreadable:sa("",ca&&ca.isConcatSpreadable||e("isConcatSpreadable")),iterator:sa("",ca&&ca.iterator||e("iterator")),match:sa("",ca&&ca.match||e("match")),replace:sa("",ca&&ca.replace||e("replace")),search:sa("",ca&&ca.search||e("search")),species:sa("",ca&&ca.species||e("species")),split:sa("",ca&&ca.split||e("split")),toPrimitive:sa("",ca&&ca.toPrimitive||e("toPrimitive")),toStringTag:sa("",ca&&ca.toStringTag||e("toStringTag")),unscopables:sa("",ca&&ca.unscopables||e("unscopables"))})})(Xi),function(e){Object.defineProperties(e,{for:la((function(t){return da[t]?da[t]:da[t]=e(String(t))})),keyFor:la((function(e){var t;for(t in ua(e),da)if(da[t]===e)return t}))})}(Xi),ba(Zi.prototype,{constructor:fa(Xi),toString:fa("",(function(){return this.__name__}))}),ba(Xi.prototype,{toString:fa((function(){return"Symbol ("+pa(this).__description__+")"})),valueOf:fa((function(){return pa(this)}))}),ma(Xi.prototype,Xi.toPrimitive,fa("",(function(){var e=pa(this);return"symbol"==typeof e?e:e.toString()}))),ma(Xi.prototype,Xi.toStringTag,fa("c","Symbol")),ma(Zi.prototype,Xi.toStringTag,fa("c",Xi.prototype[Xi.toStringTag])),ma(Zi.prototype,Xi.toPrimitive,fa("c",Xi.prototype[Xi.toPrimitive])),("function"==typeof(ga=Pi.Symbol)&&(ga("test symbol"),Ei[typeof ga.iterator]&&Ei[typeof ga.toPrimitive]&&Ei[typeof ga.toStringTag])?_i.Symbol:ja)("-");var wa={exports:{}};function _a(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function Pa(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Ea(e,t,r,n,o){return r.bind(t,e,n,o)}function Oa(e,t){return Ea(e,this,1===e.length?_a:Pa,t.cache.create(),t.serializer)}function Sa(){return JSON.stringify(arguments)}function Ca(){this.cache=Object.create(null)}Ca.prototype.has=function(e){return e in this.cache},Ca.prototype.get=function(e){return this.cache[e]},Ca.prototype.set=function(e,t){this.cache[e]=t};var Aa={create:function(){return new Ca}};wa.exports=function(e,t){var r=t&&t.cache?t.cache:Aa,n=t&&t.serializer?t.serializer:Sa;return(t&&t.strategy?t.strategy:Oa)(e,{cache:r,serializer:n})},wa.exports.strategies={variadic:function(e,t){return Ea(e,this,Pa,t.cache.create(),t.serializer)},monadic:function(e,t){return Ea(e,this,_a,t.cache.create(),t.serializer)}};var Ta=wa.exports;const ka=["SingleLine","Address","Address2","Address3","Neighborhood","City","Subregion","Region","Postal","PostalExt","CountryCode"];Ta((e=>M(void 0,void 0,void 0,(function*(){const{geocodeServiceURL:t,locale:r}=e;let n;if(si(t))n={ruleType:"expression",expression:"$[Data].geocodeServiceURL = NULL",destination:"sourceCountry",effectParams:{visible:!1}};else{let e,o;try{({data:{countries:e,detailedCountries:o}}=yield ci(`${t}?f=json`,{responseType:"json"}))}catch(e){throw console.error("Failed to get Locator info"),e}const i={};o.forEach((e=>{var t;const n=e.localizedNames,o=r.length>2&&r;let a;if("boolean"!=typeof o&&(a=n[o]),void 0===a){const e=2===r.length?r.slice(0,2):r;if(a=n[e],void 0===a){const t=Object.keys(n).find((t=>t.startsWith(e)));void 0!==t&&(a=n[t])}}null!=a&&""!==a||(a=null!==(t=n[li.English])&&void 0!==t?t:n[li.EnglishUSA]),i[e.name]=a})),n={ruleType:"expression",expression:"$[Data].geocodeServiceURL NOT null",destination:"sourceCountry",effectParams:{visible:!0,choiceList:e,choiceListLabels:i}}}return n}))),{serializer:e=>{const{geocodeServiceURL:t}=e;return null!=t?t:"EMPTY_KEY"}}),Ta((e=>M(void 0,void 0,void 0,(function*(){const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e;let o,i;if(!(si(t)||si(r)&&si(n))){let t,r;i=yield $a(e);try{t=JSON.parse(i.field_info),r=JSON.parse(i.field_mapping)}catch(e){throw console.error("Failed to parse result of AnalyzeGeocodeInput"),e}const n=t.map((e=>e[0])),a=n.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{});o={ruleType:"expression",expression:"($[Data].geocodeServiceURL NOT null) AND (($[Data].inputTable NOT null) OR ($[Data].inputFileItem NOT null))",destination:"geocodeUIParameters",effectParams:ka.reduce(((e,t,o)=>{var i;const s=null===(i=r.find((e=>e[1]===t)))||void 0===i?void 0:i[0];return Object.assign(Object.assign({},e),{[`UIparameterInfos[${o}].choiceList`]:n,[`UIparameterInfos[${o}].choiceListLabels`]:a,[`UIparameterInfos[${o}].defaultValue`]:s})}),{})}}return{addressFieldsRule:o,geocodeParameters:i}}))),{serializer:e=>{const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e,o=null==r?void 0:r.itemid,i=null==n?void 0:n.url;return si(t)||si(o)&&si(i)?"EMPTY_KEY":`${t}${o}${i}`}});function Ia(t,r){return M(this,void 0,void 0,(function*(){const n=yield function(t=pi().locale){return M(this,void 0,void 0,(function*(){let r=yield new Promise((function(t,r){e(["./errors.t9n.en-6cb15d51-6b6d9a9f-9eae65b2"],t,r)}));switch(t){case li.Arabic:r=yield new Promise((function(t,r){e(["./errors.t9n.ar-1b9d7225-1ecdb6c0-53c31cde"],t,r)}));break;case li.Bosnian:r=yield new Promise((function(t,r){e(["./errors.t9n.bs-377a5410-cdbaf960-2083c5aa"],t,r)}));break;case li.Bulgarian:r=yield new Promise((function(t,r){e(["./errors.t9n.bg-89d094b5-977ecfea-6e721500"],t,r)}));break;case li.Catalan:r=yield new Promise((function(t,r){e(["./errors.t9n.ca-b4c83c33-1bc59588-9b30d03c"],t,r)}));break;case li.Czech:r=yield new Promise((function(t,r){e(["./errors.t9n.cs-96fcf27d-9b9ab191-015cf419"],t,r)}));break;case li.Danish:r=yield new Promise((function(t,r){e(["./errors.t9n.da-cefe0c47-a25d4108-76cf0587"],t,r)}));break;case li.German:r=yield new Promise((function(t,r){e(["./errors.t9n.de-a1b0ae17-398646ca-11fa189f"],t,r)}));break;case li.Greek:r=yield new Promise((function(t,r){e(["./errors.t9n.el-0a20e1cc-d2dff5c0-e061784f"],t,r)}));break;case li.EnglishUSA:r=yield new Promise((function(t,r){e(["./errors.t9n.en-US-c9f50f19-f32c2d3b-dee2c6fc"],t,r)}));break;case li.Spanish:r=yield new Promise((function(t,r){e(["./errors.t9n.es-0dd138a7-69747b34-977f59d5"],t,r)}));break;case li.Estonian:r=yield new Promise((function(t,r){e(["./errors.t9n.et-57cc3980-1bdd9c2d-73dacf77"],t,r)}));break;case li.Finnish:r=yield new Promise((function(t,r){e(["./errors.t9n.fi-7d2525cb-4b956ccb-79dd28cb"],t,r)}));break;case li.French:r=yield new Promise((function(t,r){e(["./errors.t9n.fr-b2186e48-5ce9dd13-ebc56b4e"],t,r)}));break;case li.Hebrew:r=yield new Promise((function(t,r){e(["./errors.t9n.he-f487411b-0d58dc1d-e52105cd"],t,r)}));break;case li.Croatian:r=yield new Promise((function(t,r){e(["./errors.t9n.hr-61ca76d9-ddadf0d2-601d957e"],t,r)}));break;case li.Hungarian:r=yield new Promise((function(t,r){e(["./errors.t9n.hu-7fa01d3c-a864095a-7b6aabdf"],t,r)}));break;case li.Indonesian:r=yield new Promise((function(t,r){e(["./errors.t9n.id-6801fef5-56d34b5e-e913b9cd"],t,r)}));break;case li.Italian:r=yield new Promise((function(t,r){e(["./errors.t9n.it-568c2b04-817f6e26-f940078a"],t,r)}));break;case li.Japanese:r=yield new Promise((function(t,r){e(["./errors.t9n.ja-6042d3af-c76450b2-4ded7c57"],t,r)}));break;case li.Korean:r=yield new Promise((function(t,r){e(["./errors.t9n.ko-4d01f228-fa522d19-dae6bec2"],t,r)}));break;case li.Lithuanian:r=yield new Promise((function(t,r){e(["./errors.t9n.lt-7f94cd9d-a8765c78-e6a8521e"],t,r)}));break;case li.Latvian:r=yield new Promise((function(t,r){e(["./errors.t9n.lv-0223c6ae-e87e5f50-ce5ed667"],t,r)}));break;case li.NorwegianBokml:r=yield new Promise((function(t,r){e(["./errors.t9n.nb-1f800b8b-560eaaa6-bee8de21"],t,r)}));break;case li.Dutch:r=yield new Promise((function(t,r){e(["./errors.t9n.nl-dd20c6e1-25d5f4a6-42e7aba2"],t,r)}));break;case li.Polish:r=yield new Promise((function(t,r){e(["./errors.t9n.pl-e71d8c8e-00ab0f1d-72b9eca5"],t,r)}));break;case li.PortugueseBrazil:r=yield new Promise((function(t,r){e(["./errors.t9n.pt-BR-6cdb50a3-a18ab931-a4763035"],t,r)}));break;case li.PortuguesePortugal:r=yield new Promise((function(t,r){e(["./errors.t9n.pt-PT-6b3866f5-ebf06039-4facc845"],t,r)}));break;case li.Romanian:r=yield new Promise((function(t,r){e(["./errors.t9n.ro-86e7cba9-d4c8d6a2-06349efc"],t,r)}));break;case li.Russian:r=yield new Promise((function(t,r){e(["./errors.t9n.ru-23cdd703-c3cdda0a-de688fc7"],t,r)}));break;case li.Serbian:r=yield new Promise((function(t,r){e(["./errors.t9n.sr-fad84a78-d22f27be-956451e2"],t,r)}));break;case li.Slovak:r=yield new Promise((function(t,r){e(["./errors.t9n.sk-3b14f765-25690031-b3624a0c"],t,r)}));break;case li.Slovenian:r=yield new Promise((function(t,r){e(["./errors.t9n.sl-e900baaf-eca6555a-55e071c1"],t,r)}));break;case li.Swedish:r=yield new Promise((function(t,r){e(["./errors.t9n.sv-4613eae2-34db6f33-68d400f1"],t,r)}));break;case li.Thai:r=yield new Promise((function(t,r){e(["./errors.t9n.th-5732c8a4-9920e4e0-b3888374"],t,r)}));break;case li.Turkish:r=yield new Promise((function(t,r){e(["./errors.t9n.tr-ccd64dcc-b4db56b1-9da4a030"],t,r)}));break;case li.Ukrainian:r=yield new Promise((function(t,r){e(["./errors.t9n.uk-e6c5f2f4-f9b80043-bfe92819"],t,r)}));break;case li.Vietnamese:r=yield new Promise((function(t,r){e(["./errors.t9n.vi-3f1e30b4-091aee60-2ffe0b4a"],t,r)}));break;case li.ChineseChina:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-CN-8e563d8f-16f78c33-252bc1bf"],t,r)}));break;case li.ChineseHongKong:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-HK-23eb2505-deff0e0d-be89713e"],t,r)}));break;case li.ChineseTaiwan:r=yield new Promise((function(t,r){e(["./errors.t9n.zh-TW-4017c011-d5202fc0-2e785921"],t,r)}))}return r}))}(),o=n[t];throw new vi(t,null!=o?o:n.defaultError,{type:"analysis_ui"},r)}))}function xa(e){null!=e||(e="standard");let t="";return t="raster"===e?"_ra":"",t}function Ra(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]||e}Xt((e=>{var t;const r={};let n;if(void 0!==e.featureSet){if(r.source=z.default.fromJSON(e.featureSet).features,n=e.layerDefinition,void 0!==n.fields&&(r.fields=n.fields.map((e=>$.default.fromJSON(e)))),void 0!==n.objectIdField&&(r.objectIdField=n.objectIdField),void 0!==n.geometryType){let e="point";switch(n.geometryType){case"esriGeometryMultipoint":e="multipoint";break;case"esriGeometryPoint":e="point";break;case"esriGeometryPolygon":e="polygon";break;case"esriGeometryPolyline":e="polyline"}r.geometryType=e}void 0!==n.spatialReference&&(r.spatialReference=n.spatialReference),void 0!==(null===(t=n.drawingInfo)||void 0===t?void 0:t.renderer)&&(r.renderer=F.default.fromJSON(n.drawingInfo.renderer))}return new x.default(r)})),Xt(((e,t)=>M(void 0,void 0,void 0,(function*(){let r=!1;if(!0===window.location.href.includes("://localhost:")||void 0===t)r=!0;else{const n=`${e}${e.indexOf("?")>-1?"&":"?"}f=json`;N.default.request.proxyUrl=`${t}/sharing/proxy`;try{r=!1===si((yield ci(n,{useProxy:!0})).data)}catch(e){r=!1}}return!0===r?e:void 0})))),Xt((e=>M(void 0,void 0,void 0,(function*(){const{locale:t,name:r,assetPrefix:n,analysisEngine:o,memoizedHelper:i}=e,a=`${r.toLowerCase()}${xa(o)}`;let s,c,l,u;const d=`${n}/tool-ui-json/${a}.tool.ui.json`,f=`${n}/tool-json/${a}.tool.json`,p=`${n}/t9n/${a}/${a}.t9n.${t}.json`,v=`${n}/t9n/common.t9n.${t}.json`;let h=t;t===li.English||t===li.EnglishUSA?h="":h===li.NorwegianBokml&&(h="no");const y=`${n}/help/${""!==h?h+"/":""}${r}${xa(o)}.html`;try{u=yield i(f),s=yield i(d),c=yield i(p),l=yield i(v),c=Object.assign(Object.assign({},l),c)}catch(e){s=void 0}return{toolJson:u,toolUIJson:s,toolT9n:c,toolHelpFilePath:y}})))),Ta((e=>M(void 0,void 0,void 0,(function*(){const{url:t}=e,r=`${t}/sharing/rest/community/self`,n=I.default.findCredential(r);let o;void 0!==n&&(o=n.token);const i={query:{returnUserLicensedItems:!0,token:o,f:"json"}};try{const{data:{userLicensedItems:e}}=yield ci(r,i);return[...e.map((({entitlements:e})=>e))].flat()}catch(e){yield Ia(mi)}return[]}))),{serializer:e=>`${e.user.username}`}),Ta((e=>M(void 0,void 0,void 0,(function*(){let t={isMultidimensional:!1};const r="imagery-tile"===e.type?e.rasterInfo.multidimensionalInfo:e.multidimensionalInfo,n=e.multidimensionalSubset;if(null!=r){const o=null!=n?e.getMultidimensionalSubsetVariables():r.variables;if(void 0!==o&&o.length>0){const e=[],r=[],n={},i={},a={},s={},c={},l={},u={};o.forEach(((t,o)=>{let a="";const d=t.name;t.dimensions.forEach(((t,r)=>{var f,p;const v=t.name;-1===e.indexOf(v)&&e.push(v);const h=r>0?`,${v}=${null===(f=t.values)||void 0===f?void 0:f.length}`:`${v}=${null===(p=t.values)||void 0===p?void 0:p.length}`;if(a=a.concat(h),0===r&&(i[d]={}),void 0===n[v]&&(n[v]=[]),i[d][v]=t.values,0===o){const e=t.values;if(void 0!==e)if("StdTime"!==v||void 0!==t.unit&&"ISO8601"!==t.unit)Array.isArray(e)&&"number"==typeof e[0]?s[v]=c[v]=e.map(String):Array.isArray(e[0])&&Array.isArray(e[1])&&(s[v]=e[0].map(String),c[v]=e[1].map(String));else{const t=[],r=[],n={},o={};e.forEach((e=>{if("number"==typeof e){const i=new Date(e),a=i.toLocaleString(),s=i.toISOString();t.push(s),r.push(s),n[s]=a,o[s]=a}else if(Array.isArray(e)){const i=new Date(e[0]),a=new Date(e[1]),s=i.toISOString(),c=a.toISOString();t.push(s),r.push(c),n[s]=i.toLocaleString(),o[c]=a.toLocaleString()}})),s[v]=t,c[v]=r,l[v]=n,u[v]=o}}n[v].push(d)})),r.push({name:d,alias:`${d}[${a}](${t.description})`,type:"string"})}));for(const e in n){const t=r.filter((t=>n[e].indexOf(t.name)>-1));a[e]={id:"1",name:e,description:"DimensionVariables",getFields:()=>Promise.resolve(t)}}t={isMultidimensional:!0,dimensions:e,dimensionVariableDatasets:a,dimensionValues:i,variablesDataset:{id:"1",name:"Variables",description:"Variables",getFields:()=>Promise.resolve(r)},dimensionMinValues:s,dimensionMaxValues:c,dimensionMinValuesWithLabels:l,dimensionMaxValuesWithLabels:u}}}const o="imagery"===e.type?yield e.generateRasterInfo(e.renderingRule):e.rasterInfo;return t.rasterInfo=o,t}))));const $a=e=>M(void 0,void 0,void 0,(function*(){const{asyncGeocodeUrl:t}=e,r=yield T.submitJob(`${t}/AnalyzeGeocodeInput`,Object.assign(Object.assign({},Jo(e,"asyncGeocodeUrl")),{f:"json"}));try{return yield r.waitForJobCompletion(),(yield r.fetchResultData("geocodeParameters")).value}catch(e){throw console.error("AnalyzeGeocodeInput failed"),e}}));Ta(((e,t)=>new R.default({id:e,portal:t})),{serializer:e=>{var t;return`${e[0]}-${null===(t=e[1])||void 0===t?void 0:t.url}`}}),Ta((e=>M(void 0,void 0,void 0,(function*(){var t,r;const{restUrl:n}=e,o=`${n}/portals/helpmap`;let i;try{const e=yield k.default(o,{query:{f:"json"},responseType:"json",method:"auto"});i=null!==(r=yield null===(t=e.data)||void 0===t?void 0:t.helpMap)&&void 0!==r?r:void 0}catch(e){i=void 0}return i}))),{serializer:e=>{var t;return`${e[0]}-${null===(t=e[1])||void 0===t?void 0:t.url}`}});const Fa="esriExecutionTypeAsynchronous",za="esriExecutionTypeSynchronous",Na={Standard:"standard",GeoAnalytics:"geoanalytics",Raster:"raster",Pipelines:"pipelines",Session:"session"};var Ua={exports:{}};function Ma(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function La(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Da(e,t,r,n,o){return r.bind(t,e,n,o)}function Ja(e,t){return Da(e,this,1===e.length?Ma:La,t.cache.create(),t.serializer)}function Va(){return JSON.stringify(arguments)}function Ga(){this.cache=Object.create(null)}Ga.prototype.has=function(e){return e in this.cache},Ga.prototype.get=function(e){return this.cache[e]},Ga.prototype.set=function(e,t){this.cache[e]=t};var Ba={create:function(){return new Ga}};Ua.exports=function(e,t){var r=t&&t.cache?t.cache:Ba,n=t&&t.serializer?t.serializer:Va;return(t&&t.strategy?t.strategy:Ja)(e,{cache:r,serializer:n})},Ua.exports.strategies={variadic:function(e,t){return Da(e,this,La,t.cache.create(),t.serializer)},monadic:function(e,t){return Da(e,this,Ma,t.cache.create(),t.serializer)}};var Ka=Ua.exports;function Ha(e,t,r=!1){let n=t.helperServices.analysis.url;switch(e){case Na.GeoAnalytics:n=t.helperServices.geoanalytics.url;break;case Na.Raster:n=t.helperServices.rasterAnalytics.url;break;case Na.Standard:n=r?t.helperServices.asyncGeocode.url:t.helperServices.analysis.url}return n}const qa=e=>{const t=Array.from(e).map((e=>{let t;return t="object"==typeof e&&void 0!==e.id?e.id:e,t}));return JSON.stringify(t)},Wa=Ka(((e,t,r)=>U(void 0,void 0,void 0,(function*(){var n;const o=`${Ha(t,r,"BatchGeocode"===e)}/${e}?f=json`,i=yield k.default(o,{responseType:"json",authMode:"no-prompt"}),a=yield i.data;return null===(n=a.parameters)||void 0===n||n.forEach((e=>{null===e.defaultValue&&(e.defaultValue=void 0)})),a}))),{serializer:qa}),Ya=Ka(((e,t)=>U(void 0,void 0,void 0,(function*(){const r=Ha(e,t),n=yield k.default(`${r}?f=json`,{responseType:"json"}),{data:{tasks:o}}=n,i=o.map((r=>Wa(r,e,t)));return yield Promise.all(i)}))),{serializer:qa});Ka(((e,t)=>U(void 0,void 0,void 0,(function*(){let r=[];return r=void 0!==t?yield Ya(t,e):[...yield Ya(Na.Standard,e),...yield Ya(Na.Raster,e),...yield Ya(Na.GeoAnalytics,e)],new Map(r.map((e=>[e.name.toLowerCase(),e])))}))),{serializer:qa});const Qa=Ka((e=>U(void 0,void 0,void 0,(function*(){const{helperServices:t}=e;let r;if(void 0!==t.routingUtilities){const e=yield T.execute(`${t.routingUtilities.url}/GetTravelModes?f=json`),{results:[{value:{features:n}},{value:o}]}=e;r={travelModes:n.map((e=>JSON.parse(e.attributes.TravelMode))),defaultTravelModeId:o}}return r}))),{serializer:qa}),Xa=Ka(((e,t)=>U(void 0,void 0,void 0,(function*(){var r;const n=`${e}/${t}?f=json`,o=yield k.default(n,{responseType:"json",authMode:"no-prompt"}),i=yield o.data;return null===(r=i.parameters)||void 0===r||r.forEach((e=>{null===e.defaultValue&&(e.defaultValue=void 0)})),i}))));Ka((e=>U(void 0,void 0,void 0,(function*(){const t=yield k.default(`${e}?f=json`,{responseType:"json"}),{data:{tasks:r}}=t,n=r.map((t=>Xa(e,t)));return yield Promise.all(n)}))));const Za={ResultDataComplete:"analysisCoreResultDataComplete",JobStatus:"analysisCoreJobStatus",CreditEstimateComplete:"creditEstimateComplete"};function es(e){return{detail:e,composed:!0,cancelable:!0,bubbles:!0}}function ts(e,t){e.dispatchEvent(new window.CustomEvent(Za.ResultDataComplete,es(t)))}function rs(e,t){e.dispatchEvent(new window.CustomEvent(Za.JobStatus,es(t)))}const ns=[{toolName:"CreateViewshed",analysisEngine:Na.Standard},{toolName:"CreateWatersheds",analysisEngine:Na.Standard},{toolName:"TraceDownstream",analysisEngine:Na.Standard}];function os(e){var t;return U(this,void 0,void 0,(function*(){const{portal:r,jobParams:n,analysisEngine:i,toolName:a,toolElement:s}=e,c=Ha(null!=i?i:Na.Standard,r,"BatchGeocode"===a);let l=[];if(void 0!==ns.find((e=>e.toolName===a&&e.analysisEngine===i)))l=[{dateType:"string",value:{cost:0,totalRecords:0}}];else{let e="";switch(i){case Na.Raster:e=c+"/EstimateRasterAnalysisCost";break;case Na.Standard:e=c.replace("tasks/GPServer","Estimate/GPServer/EstimateCredits")}const r={};for(const e in n)"object"==typeof n[e]&&void 0!==n[e]?r[e]=JSON.stringify(n[e]):r[e]=n[e];const u=i===Na.Raster?{inputAnalysisTask:{name:a,parameters:r}}:{taskName:a,taskParameters:r},d=(yield k.default(`${e}?f=json`,{responseType:"json"})).data,f=null===(t=null==d?void 0:d.parameters)||void 0===t?void 0:t.filter((e=>"esriGPParameterDirectionOutput"===e.direction));let p;switch(d.executionType){case za:p=yield o.execute(e,u),l=p.results;break;case Fa:{const t=yield T.submitJob(e,u),r={interval:1500,statusCallback:e=>{rs(s,{jobInfo:e})}};yield t.waitForJobCompletion(r);const n=null==f?void 0:f.map((e=>t.fetchResultData(e.name)));l=yield Promise.all(n);break}}}var u;return void 0!==s&&(u=l,s.dispatchEvent(new window.CustomEvent(Za.CreditEstimateComplete,es(u)))),l}))}const is=/^[\p{L}\p{N}_][\p{L}\p{N}_\s]*[\p{L}\p{N}_]$/u;const as={Tool:"tool",RasterFunction:"rft"},ss="estimateCreditsCurrentParameters",cs=r.proxyCustomElement(class extends r.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisToolCreditsValidationFailure=r.createEvent(this,"analysisToolCreditsValidationFailure",7),this.estimateCredits=async()=>{var e,t,n,o;this.onCreditsPopoverClose();const i=this.toolElement,a=await(null==i?void 0:i.validateTool()),s=await(null===(e=this.toolSettingsElement)||void 0===e?void 0:e.validateSettings());if(!1===(null==a?void 0:a.valid)||!1===(null==s?void 0:s.valid)){const e=Array.from(new Set([...null==a?void 0:a.errorKeys,...null==s?void 0:s.errorKeys]));null==e||e.forEach(((t,n)=>{t===r.DEFAULT_ERROR_KEY&&(e[n]=r.DEFAULT_CREDIT_ERROR_KEY)}));const t={valid:!1,errorKeys:e};return this.analysisToolCreditsValidationFailure.emit(t),void(this.errorMessage=this.strings.creditsEstimationFailed)}if(this.errorMessage=void 0,this.estimatingCredits=!0,this.isInformationMessage=!1,void 0!==this.toolJson){const e=r.getJobParams(this.toolJson,null==i?void 0:i.toolData),a=r.calculateParameterValues(e),s=O.addContextToJobParams(a,this.toolName,null==i?void 0:i.toolData),c=r.prepJobParamsForSubmission({jobParams:s,toolData:null!==(t=null==i?void 0:i.toolData)&&void 0!==t?t:{},toolUIJson:null!==(o=null===(n=null==i?void 0:i.toolUIJson)||void 0===n?void 0:n.UIparameters)&&void 0!==o?o:[],toolName:this.toolName});let l={valid:!0,errorKeys:[]};try{await os({toolName:this.toolName,portal:this.portal,jobParams:c,analysisEngine:this.analysisEngine,toolElement:this.hostElement})}catch(e){this.errorMessage=this.strings.creditsEstimationFailed,l={valid:!1,errorKeys:[ss]}}this.analysisToolCreditsValidationFailure.emit(l),this.estimatingCredits=!1,this.creditsEstimated=!0}},this.estimateRFxCredits=async()=>{var e,t,n;this.onCreditsPopoverClose();const o=this.toolElement,i=await(null==o?void 0:o.validateRFx()),a=await(null===(e=this.toolSettingsElement)||void 0===e?void 0:e.validateSettings()),s=await(null===(t=this.toolOutputElement)||void 0===t?void 0:t.validateRFxOutput());if(!1===(null==a?void 0:a.valid)||!1===(null==i?void 0:i.valid)||!1===(null==s?void 0:s.valid)){const e=Array.from(new Set([...null==a?void 0:a.errorKeys,...null==i?void 0:i.errorStrings,...null==s?void 0:s.errorKeys]));null==e||e.forEach(((t,n)=>{t===r.DEFAULT_ERROR_KEY&&(e[n]=r.DEFAULT_CREDIT_ERROR_KEY)}));const t={valid:!1,errorKeys:e};return this.analysisToolCreditsValidationFailure.emit(t),void(this.errorMessage=this.strings.creditsEstimationFailed)}this.errorMessage=void 0,this.estimatingCredits=!0,this.isInformationMessage=!1;const c={rasterFunction:await(null==o?void 0:o.getUpdatedRFTWithValues()),outputName:await(null===(n=this.toolOutputElement)||void 0===n?void 0:n.getOutputParameters())};if(void 0!==c){const e=O.addContextToJobParams(c,this.toolName,void 0),t={};Object.keys(e).forEach((r=>t[r]=JSON.stringify(e[r])));let r={valid:!0,errorKeys:[]};try{await os({toolName:"GenerateRaster",portal:this.portal,jobParams:t,analysisEngine:this.analysisEngine,toolElement:this.hostElement})}catch(e){this.errorMessage=this.strings.creditsEstimationFailed,r={valid:!1,errorKeys:[ss]}}this.analysisToolCreditsValidationFailure.emit(r),this.estimatingCredits=!1,this.creditsEstimated=!0}},this.createCreditsPopover=()=>{void 0===this.creditsPopover&&(this.creditsPopover=document.createElement("analysis-tool-credits-popover"),this.creditsPopover.addEventListener("creditsPopoverClose",this.onCreditsPopoverClose)),this.creditsPopover.referenceElement=this.popoverActionElement,this.creditsPopover.numberOfInputFeatures=this.numberOfInputFeatures,this.creditsPopover.creditsPerFeature=this.creditsPerFeature,this.creditsPopover.estimatedCredits=this.estimatedCredits,this.creditsPopover.creditsRemaining=this.creditsRemaining,!1===document.body.contains(this.creditsPopover)&&(document.body.appendChild(this.creditsPopover),this.creditsPopover.open=!0)},this.onCreditsPopoverClose=()=>{void 0!==this.creditsPopover&&(this.creditsPopover.open=!1,this.creditsPopover.remove())},this.renderErrorMessage=()=>r.h("calcite-input-message",{status:this.isInformationMessage?r.UIInputStatus.IDLE:r.UIInputStatus.INVALID,icon:this.isInformationMessage?"information":"exclamationMarkTriangle",hidden:void 0===this.errorMessage},this.errorMessage),this.numberOfInputFeatures=void 0,this.creditsPerFeature=void 0,this.estimatedCredits=void 0,this.creditsRemaining=void 0,this.estimatingCredits=!1,this.creditsEstimated=!1,this.errorMessage=void 0,this.isInformationMessage=!1,this.analysisEngine=void 0,this.toolJson=void 0,this.toolName=void 0,this.toolSettingsElement=void 0,this.toolElement=void 0,this.portal=void 0,this.analysisType=void 0,this.toolOutputElement=void 0}disconnectedCallback(){this.onCreditsPopoverClose()}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await r.fetchComponentLocaleStrings(this.hostElement,r.getAssetPath(".")))}async clearCreditsEstimation(){return this.numberOfInputFeatures=void 0,this.creditsPerFeature=void 0,this.estimatedCredits=void 0,this.creditsRemaining=void 0,this.errorMessage=void 0,this.estimatingCredits=!1,this.creditsEstimated=!1,this.isInformationMessage=!1,Promise.resolve()}onCreditEstimateComplete(e){var t,r;if(this.creditsPerFeature=void 0,this.creditsRemaining=void 0,void 0!==e.detail&&e.detail.length>0){const n=e.detail[0].value;this.estimatedCredits=null!==(r=null!==(t=n.maximumCost)&&void 0!==t?t:n.cost)&&void 0!==r?r:n.credits,ns.find((e=>e.toolName===this.toolName&&e.analysisEngine===this.analysisEngine))&&(n.totalRecords=0,this.isInformationMessage=!0,this.errorMessage=this.strings.zeroCreditsMessage),this.numberOfInputFeatures=n.totalRecords}this.estimatingCredits=!1,this.creditsEstimated=!0}renderCreditsEstimated(){return this.creditsEstimated?r.h("div",null,r.h("div",{class:"estimated-credits"},r.h("div",null,this.strings.estimatedCredits),r.h("div",{class:"credits"},void 0===this.errorMessage&&!1===this.estimatingCredits&&r.h("calcite-button",{class:"info-button",ref:e=>{this.popoverActionElement=e},appearance:"outline","icon-start":"information",round:!0,disabled:this.estimatingCredits,onClick:this.createCreditsPopover},r.formatNumberToLocale(this.estimatedCredits)),r.h("calcite-action",{class:!0===this.estimatingCredits?"hide":"",onClick:this.analysisType===as.RasterFunction?this.estimateRFxCredits:this.estimateCredits,text:"refresh",appearance:"transparent",icon:"refresh"}),r.h("calcite-loader",{style:{display:!1===this.estimatingCredits?"none":void 0},label:this.strings.loader,class:"loader",inline:!0}))),r.h("div",{class:"error-message"},void 0!==this.errorMessage?this.renderErrorMessage():null)):null}render(){return r.h(r.Host,{class:{"analysis--rtl":"rtl"===this.dir}},r.h("div",{class:"credit-block"},!this.creditsEstimated&&r.h("calcite-button",{alignment:"center",round:!0,appearance:"transparent",onClick:this.analysisType===as.RasterFunction?this.estimateRFxCredits:this.estimateCredits,loading:this.estimatingCredits,class:"estimate-credit-button"},this.creditsEstimated?this.strings.estimatedCredits:this.strings.estimateCredits),this.renderCreditsEstimated()))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return":host{display:flex;width:100%}.credit-block{display:flex;justify-content:center;width:100%;margin:0;background-color:var(--calcite-ui-foreground-1)}.estimate-credit-button{padding:12px 0}.estimated-credits{width:100%;display:flex;justify-content:space-between;align-items:center}.credits{display:flex;align-items:center}.loader{padding:var(--analysis-quarter-spacing);margin-left:3.75rem;margin-right:0rem;margin-top:0.75rem}.error-message{padding-bottom:1rem}.hide{display:none}.info-button{margin-left:1rem;margin-right:0rem}:host(.analysis--rtl) .loader{margin-left:0rem;margin-right:3.75rem}:host(.analysis--rtl) .info-button{margin-left:0rem;margin-right:1rem}"}},[1,"analysis-tool-credits",{analysisEngine:[513,"analysis-engine"],toolJson:[16],toolName:[513,"tool-name"],toolSettingsElement:[16],toolElement:[16],portal:[16],analysisType:[1,"analysis-type"],toolOutputElement:[16],numberOfInputFeatures:[32],creditsPerFeature:[32],estimatedCredits:[32],creditsRemaining:[32],estimatingCredits:[32],creditsEstimated:[32],errorMessage:[32],isInformationMessage:[32],clearCreditsEstimation:[64]},[[0,"creditEstimateComplete","onCreditEstimateComplete"]]]);function ls(){"undefined"!=typeof customElements&&["analysis-tool-credits","analysis-tool-credits-popover"].forEach((e=>{switch(e){case"analysis-tool-credits":customElements.get(e)||customElements.define(e,cs);break;case"analysis-tool-credits-popover":customElements.get(e)||S.defineCustomElement()}}))}ls(),t.AnalysisEngine={Standard:"standard",GeoAnalytics:"geoanalytics",Raster:"raster",Pipelines:"pipelines",Session:"session"},t.AnalysisToolCredits=cs,t.AnalysisType=as,t.defineCustomElement=ls,t.execute=function(e){return U(this,void 0,void 0,(function*(){const{portal:t}=e,{jobParamsPayload:r,jobParams:n,toolUiParameters:o,toolName:i,analysisEngine:a,analysisType:s,resultParams:c,containerElement:l,gpMessages:u,webToolServerUrl:d,executionType:f,creditCheckOptions:p}=e;let v=function(e){let t=!0;return t=!0!==si(null==e?void 0:e.orgId)&&(function(e){var t,r;return null!==(r=null===(t=e.role)||void 0===t?void 0:t.includes("admin"))&&void 0!==r&&r}(e)||function(e){var t,r;return null!==(r=null===(t=e.role)||void 0===t?void 0:t.includes("publisher"))&&void 0!==r&&r}(e)),t}(t.user);const h=Object.keys(r).some((e=>{const t=r[e];return"string"==typeof t&&t.includes("serviceProperties")})),y=function(e,t){const r=[];return e.forEach((e=>{var n,o,i,a;if(e in t){const s=JSON.parse(t[e]),c=null!==(a=null!==(o=null===(n=null==s?void 0:s.serviceProperties)||void 0===n?void 0:n.name)&&void 0!==o?o:null===(i=null==s?void 0:s.itemProperties)||void 0===i?void 0:i.title)&&void 0!==a?a:void 0;void 0!==c&&r.push(c)}})),r}(Object.keys(r).filter((e=>{const t=r[e];return"string"==typeof t&&(t.includes("serviceProperties")||t.includes("itemProperties"))})),r),b=function(e){return e.every((e=>is.test(e)))}(y);if(!1===b&&(yield Ia(gi)),h){const e=y.map((e=>{const r=t.isPortal?function(e){return e.replace(/\s/g,"_")}(e):e;return function(e){return U(this,void 0,void 0,(function*(){const{portal:{url:t,id:r},itemType:n}=e,{serviceName:o}=e,i=`${t}/sharing/rest/portals/${r}/isServiceNameAvailable?f=json`,a={query:{f:"json",name:o,type:n}};let s=!0;try{s=(yield k.default(i,a)).data.available}catch(e){yield Ia(mi)}return s}))}({portal:t,serviceName:r,itemType:a!==Na.Raster||void 0!==o.resultType&&"FEATURE_LAYER"===o.resultType?"Feature Service":"Image Service"})}));v=!(yield Promise.all(e)).some((e=>!1===e)),!1===v&&(yield Ia(bi))}const{skipCreditChecks:m=!1,creditThreshold:g}=null!=p?p:{};if(!1===m&&void 0===d&&(e.analysisEngine===Na.Standard||e.analysisEngine===Na.Raster)){const r=function(e){var t,r,n;const o=function(e){const t="object"==typeof e&&null!==e,r=t&&"totalRecords"in e&&("maximumCost"in e||"cost"in e),n=t&&"credits"in e&&"functions"in e&&Array.isArray(e.functions)&&e.functions.every((e=>"object"==typeof e&&null!==e&&"name"in e&&"costFactor"in e&&"gigaPixels"in e));return t&&(r||n)}(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.value)?e[0].value:void 0,i=null!==(n=null!==(r=null==o?void 0:o.maximumCost)&&void 0!==r?r:null==o?void 0:o.cost)&&void 0!==n?n:null==o?void 0:o.credits;return Number.isNaN(i)?void 0:i}(yield os({toolName:e.toolName,portal:t,jobParams:e.jobParamsPayload,analysisEngine:e.analysisEngine,toolElement:e.containerElement}));v=function(e,t){let r=!0;return void 0!==t.sourceJSON.availableCredits&&void 0!==e&&(r=t.sourceJSON.availableCredits>e),r}(r,t.user),!1===v&&(yield Ia(hi)),v=function(e,t){return void 0===t||void 0===e||e<=t}(r,g),!1===v&&(yield Ia(yi,{estimatedCredits:r,creditThreshold:g}))}if(!0===v){const e=`${void 0===d?Ha(a,t,"BatchGeocode"===i):d}/${i}?f=json`;if(f===za){const t=yield T.execute(e,n),r=t.results,c=A.default.fromJSON({messages:t.messages});rs(l,{jobInfo:c,submissionData:{toolName:i,analysisEngine:a,analysisType:s,jobParams:n,toolUiParameters:o}}),ts(l,{results:r,jobInfo:c})}else{const t=yield T.submitJob(e,r);rs(l,{jobInfo:t,submissionData:{toolName:i,analysisEngine:a,analysisType:s,jobParams:n,toolUiParameters:o}});const d={interval:1500,statusCallback:e=>{rs(l,{jobInfo:e})}};try{let e;if(yield t.waitForJobCompletion(d),!0===c.includes("processInfo"))try{e=function(e,t={}){let r="";return e.forEach((e=>{const n=JSON.parse(e),{message:o,messageCode:i,params:a,style:s}=n;if(Array.isArray(o)){const e={};let n=s;o.forEach(((r,o)=>{const s=`${i}_${o}`;n=n.replace("></",">${"+s+"}</");let c=void 0!==t[s]?t[s]:r;c=fi(c,a),c=function(e){return e.replace(/[<>]/g,Ra)}(c),e[s]=`${c}`})),r+=fi(n,e)}else{let e=void 0!==t[i]?t[i]:o;e=fi(e,a);const n=s.indexOf("</");r+=`${s.substring(0,n)}${e}${s.substring(n)}`}})),r}((yield t.fetchResultData("processInfo")).value,u);const r=c.indexOf("processInfo");c.splice(r,1)}catch(e){}const r=c.map((e=>t.fetchResultData(e))),n=(yield Promise.allSettled(r)).filter((e=>"fulfilled"===e.status)).map((e=>e.value));(function(e,t){U(this,void 0,void 0,(function*(){const r=[];e.forEach((e=>{if("object"==typeof e.value&&"itemId"in e.value&&!si(e.value.itemId)&&void 0!==t){const n=e.value.itemId;r.push(function(e,t){return M(this,void 0,void 0,(function*(){const r=new R.default({id:e}),n=yield r.load();let o=Object.assign(n,t);return o=yield o.update(),o}))}(n,{description:t}))}})),yield Promise.all(r)}))})(n,e),ts(l,{results:n,jobInfo:t})}catch(e){rs(l,{jobInfo:t})}}}}))},t.getTravelModes=Qa}));