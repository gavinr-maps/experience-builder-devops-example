define(["exports","./index2-52261f8e","./shared-components-4e078ab3"],(function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")(),a=i.Symbol,s=Object.prototype,c=s.hasOwnProperty,u=s.toString,l=a?a.toStringTag:void 0,p=Object.prototype.toString,f="[object Null]",d="[object Undefined]",h=a?a.toStringTag:void 0;function y(t){return null==t?void 0===t?d:f:h&&h in Object(t)?function(t){var e=c.call(t,l),n=t[l];try{t[l]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[l]=n:delete t[l]),o}(t):function(t){return p.call(t)}(t)}function v(t){return null!=t&&"object"==typeof t}var g="[object Symbol]";function _(t){return"symbol"==typeof t||v(t)&&y(t)==g}var b=Array.isArray,x=1/0,O=a?a.prototype:void 0,m=O?O.toString:void 0;function j(t){if("string"==typeof t)return t;if(b(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,j)+"";if(_(t))return m?m.call(t):"";var e=t+"";return"0"==e&&1/t==-x?"-0":e}function E(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var w="[object AsyncFunction]",S="[object Function]",R="[object GeneratorFunction]",C="[object Proxy]";function T(t){if(!E(t))return!1;var e=y(t);return e==S||e==R||e==w||e==C}var P,M=i["__core-js_shared__"],k=(P=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",$=Function.prototype.toString;function z(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var A=/^\[object .+?Constructor\]$/,I=Function.prototype,L=Object.prototype,D=I.toString,F=L.hasOwnProperty,U=RegExp("^"+D.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!E(t)||(e=t,k&&k in e))&&(T(t)?U:A).test(z(t));var e}(n)?n:void 0}var V=function(){try{var t=G(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),N=9007199254740991,H=/^(?:0|[1-9]\d*)$/;function W(t,e){var n=typeof t;return!!(e=null==e?N:e)&&("number"==n||"symbol"!=n&&H.test(t))&&t>-1&&t%1==0&&t<e}function K(t,e,n){"__proto__"==e&&V?V(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function q(t,e){return t===e||t!=t&&e!=e}var J=Object.prototype.hasOwnProperty;function B(t,e,n){var r=t[e];J.call(t,e)&&q(r,n)&&(void 0!==n||e in t)||K(t,e,n)}var Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Y=G(Object,"create"),Z=Object.prototype.hasOwnProperty,tt=Object.prototype.hasOwnProperty;function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t,e){for(var n=t.length;n--;)if(q(t[n][0],e))return n;return-1}et.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et.prototype.get=function(t){var e=this.__data__;if(Y){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Z.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return Y?void 0!==e[t]:tt.call(e,t)},et.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Y&&void 0===e?"__lodash_hash_undefined__":e,this};var rt=Array.prototype.splice;function ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ot.prototype.clear=function(){this.__data__=[],this.size=0},ot.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0||(n==e.length-1?e.pop():rt.call(e,n,1),--this.size,0))},ot.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},ot.prototype.has=function(t){return nt(this.__data__,t)>-1},ot.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var it=G(i,"Map");function at(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function st(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}st.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(it||ot),string:new et}},st.prototype.delete=function(t){var e=at(this,t).delete(t);return this.size-=e?1:0,e},st.prototype.get=function(t){return at(this,t).get(t)},st.prototype.has=function(t){return at(this,t).has(t)},st.prototype.set=function(t,e){var n=at(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ct(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ct.Cache||st),n}ct.Cache=st;var ut,lt,pt,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/\\(\\)?/g,ht=(ut=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ft,(function(t,n,r,o){e.push(r?o.replace(dt,"$1"):n||t)})),e},lt=ct(ut,(function(t){return 500===pt.size&&pt.clear(),t})),pt=lt.cache,lt);function yt(t,e){return b(t)?t:function(t,e){if(b(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!_(t))||X.test(t)||!Q.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:ht(function(t){return null==t?"":j(t)}(t))}var vt=1/0;function gt(t){if("string"==typeof t||_(t))return t;var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function _t(t,e,n,r){if(!E(t))return t;for(var o=-1,i=(e=yt(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var c=gt(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=E(l)?l:W(e[o+1])?[]:{})}B(s,c,u),s=s[c]}return t}function bt(t,e,n){return null==t?t:_t(t,e,n)}const xt=t=>!("isConnected"in t)||t.isConnected,Ot=((t,e)=>{let n;return(...t)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(xt))})(...t)}),2e3)}})(),mt=t=>"function"==typeof t?t():t,jt=e.getLocaleInfo().locale,Et=((t,n)=>{const r=((t,e=((t,e)=>t!==e))=>{const n=mt(t);let r=new Map(Object.entries(null!=n?n:{}));const o={dispose:[],get:[],set:[],reset:[]},i=()=>{var e;r=new Map(Object.entries(null!==(e=mt(t))&&void 0!==e?e:{})),o.reset.forEach((t=>t()))},a=t=>(o.get.forEach((e=>e(t))),r.get(t)),s=(t,n)=>{const i=r.get(t);e(n,i,t)&&(r.set(t,n),o.set.forEach((e=>e(t,n,i))))},c="undefined"==typeof Proxy?{}:new Proxy(n,{get:(t,e)=>a(e),ownKeys:t=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>r.has(e),set:(t,e,n)=>(s(e,n),!0)}),u=(t,e)=>(o[t].push(e),()=>{((t,e)=>{const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.length--)})(o[t],e)});return{state:c,get:a,set:s,on:u,onChange:(e,n)=>{const r=u("set",((t,r)=>{t===e&&n(r)})),o=u("reset",(()=>n(mt(t)[e])));return()=>{r(),o()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(u("set",e.set)),e.get&&t.push(u("get",e.get)),e.reset&&t.push(u("reset",e.reset)),e.dispose&&t.push(u("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{o.dispose.forEach((t=>t())),i()},reset:i,forceUpdate:t=>{const e=r.get(t);o.set.forEach((n=>n(t,e,e)))}}})(t,void 0);return r.use((()=>{if("function"!=typeof e.getRenderingRef)return{};const t=new Map;return{dispose:()=>t.clear(),get:n=>{const r=e.getRenderingRef();r&&((t,e,n)=>{const r=t.get(e);r?r.includes(n)||r.push(n):t.set(e,[n])})(t,n,r)},set:n=>{const r=t.get(n);r&&t.set(n,r.filter(e.forceUpdate)),Ot(t)},reset:()=>{t.forEach((t=>t.forEach(e.forceUpdate))),Ot(t)}}})()),r})({analysisToolRef:void 0,context:{},creditUsageSettings:{askConfirmation:!0,creditThreshold:100},mapLevelContext:{},settingsSelectedExtentOption:n.ExtentOptions.Default,settingsSelectedOutSpatialRefOption:n.OutSROptions.SameAsInput,mapLayers:[],mapView:void 0,portal:void 0,portalHelpMap:void 0,locale:jt}),wt=Et.state;function St(t){return wt.mapLayers.find((e=>{var n;let r=e.url;return"layerId"in e&&(r+=`/${null!==(n=e.layerId)&&void 0!==n?n:0}`),r===t}))}Et.onChange("settingsSelectedOutSpatialRefOption",(()=>{delete wt.context.outSR,wt.context=Object.assign({},wt.context)})),Et.onChange("settingsSelectedExtentOption",(t=>{switch(t){case n.ExtentOptions.Default:case n.ExtentOptions.Layer:case n.ExtentOptions.Coordinates:delete wt.context.extent,wt.context=Object.assign({},wt.context);break;case n.ExtentOptions.MapExtent:wt.context.extent=n.ExtentOptions.MapExtent,wt.context=Object.assign({},wt.context)}})),Et.onChange("context",(()=>{void 0!==wt.analysisToolRef&&(wt.analysisToolRef.environmentSettings=wt.context)})),t.DEFAULT_CREDIT_THRESHOLD=100,t.ListCache=ot,t.Map$1=it,t.MapCache=st,t.Symbol=a,t.addContextToJobParams=function(t,r,o,i){var a,s;const c=Object.assign({},wt.context);if(c.extent===n.ExtentOptions.MapExtent&&void 0!==(null===(a=wt.mapView)||void 0===a?void 0:a.extent)){let t=null===(s=wt.mapView)||void 0===s?void 0:s.extent.clone();t=t.shiftCentralMeridian();const{xmin:n,ymin:r,xmax:o,ymax:i,spatialReference:a}=t,{wkid:u,latestWkid:l,wkt:p}=a;c.extent={xmin:n,ymin:r,xmax:o,ymax:i},e.isEmptyDataItem(u)||bt(c.extent,"spatialReference.wkid",u),e.isEmptyDataItem(l)||bt(c.extent,"spatialReference.latestWkid",l),e.isEmptyDataItem(p)||bt(c.extent,"spatialReference.wkt",p)}void 0!==i&&(null==i?void 0:i.length)>0&&i.forEach((t=>{delete c[t]}));const u=e.isEmptyDataItem(c)?t:Object.assign(Object.assign({},t),{context:c}),l=u.context;if("Sample"===r){const t=Object.assign(Object.assign({},l),{processAsMultidimensional:null==o?void 0:o.processMultidimension});u.context=t}else if("FindOutliers"===r){const t=`${null==o?void 0:o.randomGenerator} MERSENNE_TWISTER`,e=Object.assign(Object.assign({},l),{randomGenerator:t});u.context=e}return u},t.assignValue=B,t.baseAssignValue=K,t.baseGetTag=y,t.baseSet=_t,t.castPath=yt,t.defineProperty=V,t.eq=q,t.findExistingLayer=St,t.freeGlobal=r,t.getEnvSettingsLayer=async function(t){let n;const r=St(t.url);if(void 0===r)try{const r=await e.getLayerObject(t);void 0!==r&&(n=r)}catch(e){n=null!=n?n:t}else n=r;return n},t.getNative=G,t.isArray=b,t.isFunction=T,t.isIndex=W,t.isObject=E,t.isObjectLike=v,t.root=i,t.set=bt,t.state=wt,t.toKey=gt,t.toSource=z}));