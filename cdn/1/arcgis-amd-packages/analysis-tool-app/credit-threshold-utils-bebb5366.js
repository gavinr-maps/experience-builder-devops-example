define(["exports","./analysis-tool-settings2-1bbbff0c","./store-d154d928","./index2-52261f8e","./shared-components-4e078ab3","./analysis-tool-context-5cb0d8b6","./popover-utils-84821839"],(function(t,e,n,r,a,i,o){"use strict";var s,c,l,u=Date.now,d=n.defineProperty?function(t,e){return n.defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t},f=(s=d,c=0,l=0,function(){var t=u(),e=16-(t-l);if(l=t,e>0){if(++c>=800)return arguments[0]}else c=0;return s.apply(void 0,arguments)}),p=Math.max;function v(t,e){for(var r=0,a=(e=n.castPath(e,t)).length;null!=t&&r<a;)t=t[n.toKey(e[r++])];return r&&r==a?t:void 0}var h=n.Symbol?n.Symbol.isConcatSpreadable:void 0;function y(t){return n.isArray(t)||e.isArguments(t)||!!(h&&t&&t[h])}function g(t,n,r,a,i){var o=-1,s=t.length;for(r||(r=y),i||(i=[]);++o<s;){var c=t[o];n>0&&r(c)?n>1?g(c,n-1,r,a,i):e.arrayPush(i,c):a||(i[i.length]=c)}return i}function b(t){return null!=t&&t.length?g(t,1):[]}function m(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n.MapCache;++e<r;)this.add(t[e])}function S(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}m.prototype.add=m.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},m.prototype.has=function(t){return this.__data__.has(t)};var O=1,x=2;function E(t,e,n,r,a,i){var o=n&O,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;var d=-1,f=!0,p=n&x?new m:void 0;for(i.set(t,e),i.set(e,t);++d<s;){var v=t[d],h=e[d];if(r)var y=o?r(h,v,d,e,t,i):r(v,h,d,t,e,i);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!S(e,(function(t,e){if(o=e,!p.has(o)&&(v===t||a(v,t,n,r,i)))return p.push(e);var o}))){f=!1;break}}else if(v!==h&&!a(v,h,n,r,i)){f=!1;break}}return i.delete(t),i.delete(e),f}function _(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function A(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var C=1,j=2,w="[object Boolean]",k="[object Date]",L="[object Error]",R="[object Map]",P="[object Number]",D="[object RegExp]",I="[object Set]",K="[object String]",M="[object Symbol]",T="[object ArrayBuffer]",B="[object DataView]",z=n.Symbol?n.Symbol.prototype:void 0,V=z?z.valueOf:void 0,q=1,F=Object.prototype.hasOwnProperty,U=1,$="[object Arguments]",H="[object Array]",N="[object Object]",W=Object.prototype.hasOwnProperty;function G(t,r,a,i,o){return t===r||(null==t||null==r||!n.isObjectLike(t)&&!n.isObjectLike(r)?t!=t&&r!=r:function(t,r,a,i,o,s){var c=n.isArray(t),l=n.isArray(r),u=c?H:e.getTag$1(t),d=l?H:e.getTag$1(r),f=(u=u==$?N:u)==N,p=(d=d==$?N:d)==N,v=u==d;if(v&&e.isBuffer(t)){if(!e.isBuffer(r))return!1;c=!0,f=!1}if(v&&!f)return s||(s=new e.Stack),c||e.isTypedArray(t)?E(t,r,a,i,o,s):function(t,r,a,i,o,s,c){switch(a){case B:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case T:return!(t.byteLength!=r.byteLength||!s(new e.Uint8Array(t),new e.Uint8Array(r)));case w:case k:case P:return n.eq(+t,+r);case L:return t.name==r.name&&t.message==r.message;case D:case K:return t==r+"";case R:var l=_;case I:var u=i&C;if(l||(l=A),t.size!=r.size&&!u)return!1;var d=c.get(t);if(d)return d==r;i|=j,c.set(t,r);var f=E(l(t),l(r),i,o,s,c);return c.delete(t),f;case M:if(V)return V.call(t)==V.call(r)}return!1}(t,r,u,a,i,o,s);if(!(a&U)){var h=f&&W.call(t,"__wrapped__"),y=p&&W.call(r,"__wrapped__");if(h||y){var g=h?t.value():t,b=y?r.value():r;return s||(s=new e.Stack),o(g,b,a,i,s)}}return!!v&&(s||(s=new e.Stack),function(t,n,r,a,i,o){var s=r&q,c=e.getAllKeys(t),l=c.length;if(l!=e.getAllKeys(n).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in n:F.call(n,d)))return!1}var f=o.get(t),p=o.get(n);if(f&&p)return f==n&&p==t;var v=!0;o.set(t,n),o.set(n,t);for(var h=s;++u<l;){var y=t[d=c[u]],g=n[d];if(a)var b=s?a(g,y,d,n,t,o):a(y,g,d,t,n,o);if(!(void 0===b?y===g||i(y,g,r,a,o):b)){v=!1;break}h||(h="constructor"==d)}if(v&&!h){var m=t.constructor,S=n.constructor;m==S||!("constructor"in t)||!("constructor"in n)||"function"==typeof m&&m instanceof m&&"function"==typeof S&&S instanceof S||(v=!1)}return o.delete(t),o.delete(n),v}(t,r,a,i,o,s))}(t,r,a,i,G,o))}function J(t,e){return null!=t&&e in Object(t)}function Q(t,r){return function(t,e,r){for(var a=-1,i=e.length,o={};++a<i;){var s=e[a],c=v(t,s);r(0,s)&&n.baseSet(o,n.castPath(s,t),c)}return o}(t,r,(function(r,a){return function(t,r){return null!=t&&function(t,r,a){for(var i=-1,o=(r=n.castPath(r,t)).length,s=!1;++i<o;){var c=n.toKey(r[i]);if(!(s=null!=t&&a(t,c)))break;t=t[c]}return s||++i!=o?s:!!(o=null==t?0:t.length)&&e.isLength(o)&&n.isIndex(c,o)&&(n.isArray(t)||e.isArguments(t))}(t,r,J)}(t,a)}))}var X=function(t){return f(function(t,e,n){return e=p(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=p(r.length-e,0),o=Array(i);++a<i;)o[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,void 0,b),t+"")}((function(t,e){return null==t?{}:Q(t,e)}));const Y={modal:{width:"s",kind:"warning"},buttonPrimary:{slot:"primary"},buttonSecondary:{slot:"secondary",appearance:"outline"},header:{slot:"header",style:"\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n    "},headerIcon:{icon:"exclamation-mark-triangle-f",style:"\n      margin: 0 1rem;\n      --calcite-ui-icon-color: var(--calcite-ui-warning);\n    "},content:{slot:"content"}},Z=(t,e,n)=>{const r=document.createElement(t);var a,i;return a=r,i=n,Object.keys(i).forEach((t=>{a.setAttribute(t,i[t])})),r.innerText=e,r};t.ValidityState={Valid:"valid",Warning:"warning",Error:"error"},t.cloneDeep=function(t){return e.baseClone(t,5)},t.createCreditThresholdModalElement=function(t,e){const{modal:n,buttonPrimary:r,buttonSecondary:a,header:i,headerIcon:s,content:c}=Y,{continueRun:l,cancelRun:u,thresholdExceeded:d,creditEstimate:f,creditThreshold:p,confirmationPrompt:v,learnMore:h,heading:y}=t,g=Z("calcite-modal","",n),b=Z("div","",i),m=Z("div",y,{}),S=Z("calcite-icon","",s);b.appendChild(S),b.appendChild(m);const O=Z("calcite-button",l,r),x=Z("calcite-button",u,a),E=Z("div","",c);E.appendChild(Z("p",d,{})),E.appendChild(Z("p",f+"\n"+p,{})),E.appendChild(Z("p",v,{}));const _=Z("calcite-link",h,{href:e,target:"_blank"});E.appendChild(_),g.appendChild(b),g.appendChild(E),g.appendChild(O),g.appendChild(x);const A=new Promise((t=>{const e=n=>{let r=!1;r=n.target.getAttribute("slot")===Y.buttonPrimary.slot,g.removeEventListener("calciteModalClose",e),O.removeEventListener("click",e),x.removeEventListener("click",e),g.open=!1,o.removeOpenableDomElement(g),t(r)};g.addEventListener("calciteModalClose",e),O.addEventListener("click",e),x.addEventListener("click",e)}));return{modalElement:g,modalResult:A}},t.isEqual=function(t,e){return G(t,e)},t.setContextFromHistory=function(t){r.isEmptyDataItem(t)?(n.state.context={},n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput,n.state.settingsSelectedExtentOption=a.ExtentOptions.Default):(r.isEmptyDataItem(null==t?void 0:t.outSR)?n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput:n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.BrowseCS,r.isEmptyDataItem(null==t?void 0:t.extent)?n.state.settingsSelectedExtentOption=a.ExtentOptions.Default:n.state.settingsSelectedExtentOption=a.ExtentOptions.Coordinates,n.state.context=null!=t?t:{})},t.setContextFromMapLevel=function(t,e,r){void 0!==r&&(n.state.mapLevelContext=r);const{settingsSelectedExtentOption:a,settingsSelectedOutSpatialRefOption:o,context:s}=n.state.mapLevelContext;void 0!==a&&(n.state.settingsSelectedExtentOption=a),void 0!==o&&(n.state.settingsSelectedOutSpatialRefOption=o);const c=null==t?void 0:t.environmentSettings,l=[];void 0!==c?(void 0!==c.standard?l.push(...c.standard):l.push(...i.AnalysisStandardContextKeys),void 0!==c.raster?l.push(...c.raster):"raster"===e&&l.push(...i.AnalysisRasterContextKeys)):(l.push(...i.AnalysisStandardContextKeys),"raster"===e&&l.push(...i.AnalysisRasterContextKeys)),n.state.context=X(null!=s?s:{},l)}}));