<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="Stylesheet" href="css/analysis.css" />
    <script type="text/javascript">
        function init() {
            if (window.location.hash) {
                var parentDiv, nodes, i, helpInfo, helpId, helpInfoArr, helpEnvFilter, envContent, hideEnvClass, hideNodes;
                helpInfo = window.location.hash.substring(1);
                    if(helpInfo.indexOf("-")) {
                        helpInfoArr = helpInfo.split("-");
                        helpId = helpInfoArr[0];
                        helpEnvFilter = helpInfoArr[1];
                    }
                    else {
                        helpId = helpInfo;
                    }
                parentDiv = document.getElementById("topics");
                nodes = parentDiv.children;
                    hideEnvClass = (helpEnvFilter === "OnlineOnly"? "PortalOnly": "OnlineOnly");
                    if(document.getElementsByClassName) {
                        hideNodes = document.getElementsByClassName(hideEnvClass);
                    }
                    else {
                        hideNodes = document.querySelectorAll(hideEnvClass);
                    }
                for(i=0; i < nodes.length; i++) {
                    if(nodes[i].id !== helpId) {
                        nodes[i].style.display ="none";
                    }
                    }
                    for(i=0; i < hideNodes.length; i++) {
                        hideNodes[i].style.display ="none";
                    }
                }
            }
    </script>
</head>
<body onload="init()">
<div id="topics">
    <div id="toolDescription" class="largesize">
        <h2>Append Data</h2><p/>
        <h2><img src="./images/GUID-8C95EAE0-904A-42C4-8C3D-303E74FD6DD7-web.png" alt="Append Data workflow diagram"></h2>
        <hr/>
    <p>This tool appends data to an existing hosted feature layer. Append Data modifies the original input layer and does not generate a new output layer. You can match fields based on the field name and field type, or you can apply more advanced matching methods.
    </p>
    <p>The following are examples: 
        <ul>
            <li>You're an employee of a large insurance company who generates sales records monthly. For your annual report, the monthly data must be compiled for analysis.  To initiate sales analysis, you can leverage  Append Data to update your  AnnualReport_2018 layer once your monthly  numbers become available. Since you know your organization maintains a consistent schema each month, you can use the   default field mapping method to efficiently append  features based on field name and type.
            </li>
            <li>Ten environmental groups each collect hundreds of thousands of climate  measurements within their jurisdiction.  These organizations want to compile their data to better understand regional and global patterns. Each organization determines the schema for their dataset. They each specified different field names for temperature and wind speed data.  Given the field name differences  between datasets, field mapping can be leveraged to specify how to append temperature and wind speed measurements to their respective fields.
            </li>
        </ul>
        
    </p>
    </div>
    <!--Parameter divs for each param-->
    <div id="inputLayer">
        <div><h2>Choose layer to append to</h2></div>
        <hr/>
        <div>
            <p>The table, point, line, or polygon features to which the data will be appended.
            </p>
            <table>
            <tr><td colspan="3"><hr size="1" noshade="noshade"></td></tr>
            <tr><td valign="baseline"><img src="../images/caution.png"></td><td valign="baseline"><h2>Caution:&ensp;</h2></td>
            <td valign="baseline">
                <p>The layer you append to will be modified during execution of the tool. Before proceeding, ensure that you want to modify this layer.
                </p>
            </td></tr>
            <tr><td colspan="3"><hr size="1" noshade="noshade"></td></tr>
            </table>
            <p>In addition to choosing a layer from your map, you can choose  <b>Choose Analysis Layer</b> at the bottom of the drop-down list to browse to your contents for a hosted feature layer. 
            </p>
        </div>
    </div>
    <div id="appendLayer">
        <div><h2>Choose layer to append</h2></div>
        <hr/>
        <div>
            <p>The table, point, line, or polygon features to append to the input layer.
            </p>
            <p>In addition to choosing a layer from your map, you can choose  <b>Choose Analysis Layer</b> at the bottom of the drop-down list to browse to your contents for a big data file share dataset or feature layer. You may optionally apply a filter on your input layer or apply a selection on hosted layers added to your map. Filters and selections are only applied for analysis. 
            </p>
        </div>
    </div>
    <div id="filter">
        <div><h2>Append all features or define a subset  (optional)</h2></div>
        <hr/>
        <div>
            <p>Identifies the features to be appended. This parameter is optional.
            </p>
        </div>
    </div>
    <div id="fieldMapping">
        <div><h2>Choose how to append fields (optional)</h2></div>
        <hr/>
        <div>
            <p>Specifies how the append layer fields are appended to the input layer. By default, all matching input and append fields will be appended. Fields are a match if they have the same field name and the same field type. Optionally, you can choose how fields are matched, or calculate Arcade expressions to populate field values.
            </p>
            <p>For example, you have an input layer with  <i>field_number</i>, <i>field_string</i>, <i>date_field</i>, <i>unused_field</i> fields, and an append layer with <i>field_string</i>, <i>field_number</i>, and <i>MY_DATE_FIELD</i> fields.
                <ul>
                    <li>By default, the tool will match  <i>field_number</i> in the input layer to <i>field_number</i> in the append layer, and <i>field_string</i>  in the input layer to <i>field_string</i> in the append layer.
                    </li>
                    <li>By default, the input layer  <i>date_field</i> and <i>unused_field</i> fields will be populated with values of <i>null</i> because they have no matching field in the append layer.
                    </li>
                    <li>Optionally, you can append values to fields that were not automatically matched by default. For example,  <i>date_field</i> in the input layer can be matched to the append field <i>MY_DATE_FIELD</i>. To do this, use the drop-down menu next to <i>date_field</i> in the first column and select <i>MY_DATE_FIELD</i> from the drop-down menu  in the second column.
                    </li>
                </ul>
                 As another example, an input layer has numeric fields <i>value_1</i>, <i>value_2</i>, <i>value_3</i>, and <i>my_Average</i>, and an append layer has numeric fields <i>value_1</i>, <i>value_2</i>, and <i>value_3</i>.
                <ul>
                    <li>By default,  <i>value_1</i>, <i>value_2</i>, and <i>value_3</i> will be matched and appended.
                    </li>
                    <li>In addition to default behavior, values can be calculated for the  <i>my_Average</i> field. Do this using multiple fields and mathematical operations by selecting the <b>Expression</b> drop-down option in the column next to <i>my_Average</i> and building a custom Arcade expression such as <pre>average($feature[&quot;value_1&quot;] + $feature[&quot;value_2&quot;] + $feature[&quot;value_3&quot;])</pre>.
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
</div>
</html>
