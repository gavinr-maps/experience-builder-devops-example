define(["exports","./index-86304dcd","./index2-600fb1b2","./utils-2b3d82c1","./analysis-label2-b880686f","./analysis-spatial-reference-selector2-e3494e33","./analysis-tree2-79fa9cfa"],(function(e,t,s,a,i,l,n){"use strict";const r=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.analysisSpatialReferenceInputChange=t.createEvent(this,"analysisSpatialReferenceInputChange",7),this.analysisHelpClick=t.createEvent(this,"analysisHelpClick",7),this.createPopover=e=>{this.spatialReferencePopover&&(this.spatialReferencePopover.remove(),this.spatialReferencePopover=void 0),this.spatialReferencePopover=document.createElement("calcite-popover");const t={autoClose:!0,dir:this.dir,focusTrapDisabled:!0,heading:this.strings.browseCoordinateSystems,closable:!0,open:!0,referenceElement:e.target};Object.assign(this.spatialReferencePopover,t),this.spatialReferencePopover.addEventListener("calcitePopoverClose",this.handleSpatialReferenceClose);const s=document.createElement("analysis-spatial-reference-selector");s.hideCategories=this.hideCategories,s.value=this.value,s.addEventListener("analysisSpatialReferenceValueChange",this.handleSpatialReferenceChange),s.addEventListener("analysisSpatialReferenceSelectorDismissed",this.handleSpatialReferenceClose),this.spatialReferencePopover.append(s),document.body.append(this.spatialReferencePopover),setTimeout((()=>requestAnimationFrame((()=>{var e;return null===(e=this.spatialReferencePopover)||void 0===e?void 0:e.setFocus()}))),1)},this.validate=()=>(this.required&&void 0===this.value?this.errorMessage=s.formatMessage(this.strings.isRequired,{label:this.label}):this.errorMessage=void 0,void 0===this.errorMessage),this.handleSpatialReferenceChange=e=>{this.value={latestWkid:e.detail.latestWkid,wkid:e.detail.latestWkid},this.analysisSpatialReferenceInputChange.emit(this.value)},this.handleSpatialReferenceClose=()=>{var e;null===(e=this.spatialReferencePopover)||void 0===e||e.remove(),this.spatialReferencePopover=void 0,this.validate()},this.label=void 0,this.required=!1,this.hideCategories=void 0,this.value=void 0,this.errorMessage=void 0}onValueChange(){var e,t,s,a;void 0!==this.value&&(null!==(e=(s=this.value).wkid)&&void 0!==e||(s.wkid=this.value.latestWkid),null!==(t=(a=this.value).latestWkid)&&void 0!==t||(a.latestWkid=this.value.wkid)),this.validate()}async componentWillLoad(){var e,a,i,l;({strings:this.strings,dir:this.dir}=await s.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),void 0!==this.value&&(null!==(e=(i=this.value).wkid)&&void 0!==e||(i.wkid=this.value.latestWkid),null!==(a=(l=this.value).latestWkid)&&void 0!==a||(l.latestWkid=this.value.wkid))}disconnectedCallback(){var e;null===(e=this.spatialReferencePopover)||void 0===e||e.remove()}async checkValidity(){this.validate();const e=void 0===this.errorMessage||""===this.errorMessage;return Promise.resolve(e)}render(){var e,i;const l=s.isEmptyDataItem(this.value)?this.strings.browseCoordinateSystems:null!==(i=s.getSpatialReferenceDescription(null===(e=this.value)||void 0===e?void 0:e.latestWkid))&&void 0!==i?i:this.strings.browseCoordinateSystems;return t.h(t.Host,null,void 0!==this.label&&""!==this.label?t.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,t.h("calcite-button",{width:"full",appearance:"outline",kind:"neutral","icon-end":"chevron-down",alignment:"icon-end-space-between",onClick:this.createPopover,class:"select-button",scale:a.UIDefaults.Scale},l),t.h("calcite-input-message",{status:"invalid",scale:a.UIDefaults.Scale,hidden:void 0===this.errorMessage,icon:"exclamationMarkTriangle"},this.errorMessage))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["onValueChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;flex-direction:column;width:var(--analysis-component-default-width)}.select-button{margin-bottom:var(--analysis-half-spacing)}"}},[0,"analysis-spatial-reference-input",{label:[513],required:[516],hideCategories:[16],value:[1040],errorMessage:[513,"error-message"],checkValidity:[64]}]);function o(){"undefined"!=typeof customElements&&["analysis-spatial-reference-input","analysis-label","analysis-spatial-reference-selector","analysis-tree"].forEach((e=>{switch(e){case"analysis-spatial-reference-input":customElements.get(e)||customElements.define(e,r);break;case"analysis-label":customElements.get(e)||i.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||l.defineCustomElement();break;case"analysis-tree":customElements.get(e)||n.defineCustomElement()}}))}o(),e.AnalysisSpatialReferenceInput=r,e.defineCustomElement=o}));