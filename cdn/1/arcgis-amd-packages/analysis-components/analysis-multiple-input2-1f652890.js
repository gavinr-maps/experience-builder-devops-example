define(["exports","./index-86304dcd","./index2-600fb1b2","./utils-2b3d82c1"],(function(e,i,t,s){"use strict";const a="custom-input-label",l=i.proxyCustomElement(class extends i.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisMultipleInputChange=i.createEvent(this,"analysisMultipleInputChange",7),this.renderCombobox=()=>{var e;const{choiceList:a,errorMessage:l,value:n,scale:o,placeholderText:r}=this,h=void 0!==this.errorMessage,u=null==a?void 0:a.map((e=>{const i=void 0!==n&&n.includes(e);return this.buildComboBoxItem(e,i)})),d=t.formatValidationParamsMessage(this.validationParams),v=!1===t.isEmptyDataItem(d)||!0===h,c=h?t.UIInputStatus.INVALID:t.getUIInputStatusFromMessageType(null===(e=this.validationParams)||void 0===e?void 0:e.type);return i.h("calcite-label",{scale:o},i.h("calcite-combobox",{label:this.label,scale:o,selectionMode:"multiple",placeholder:null!=r?r:this.strings.defaultPlaceholder,onCalciteComboboxChange:this.handleComboboxChange},u),i.h("calcite-input-message",{status:c,scale:s.UIDefaults.Scale,hidden:!v,icon:"exclamationMarkTriangle"},null!=l?l:d))},this.buildComboBoxItem=(e,t)=>i.h("calcite-combobox-item",{key:e,value:e,textLabel:e,selected:t}),this.buildChip=e=>i.h("calcite-chip",{closable:!0,scale:s.UIDefaults.Scale,value:e,key:e,onCalciteChipClose:this.handleChipClose},t.formatNumberToLocale(e)),this.handleComboboxChange=e=>{var i;const t=null===(i=e.target)||void 0===i?void 0:i.selectedItems,s=null==t?void 0:t.map((e=>e.value));Array.isArray(s)&&0!==s.length||!0!==this.required?(this.value=s,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()):this.errorMessage=this.strings.requiredInputMessage},this.handleNewChip=()=>{var e,i;if(this.isAtMaxValues)return;const t=null===(e=this.inputElement)||void 0===e?void 0:e.value;if(void 0!==t&&""!==t&&(this.errorMessage=this.validate([t]),this.isValid)){const e=new Set([...null!==(i=this.value)&&void 0!==i?i:[],t]);this.value=Array.from(e),this.analysisMultipleInputChange.emit(this.value),void 0!==this.inputElement&&(this.inputElement.value=""),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()}},this.handleKeyDown=e=>{var i;"Tab"===(null==e?void 0:e.key)&&""!==(null===(i=this.inputElement)||void 0===i?void 0:i.value)&&(e.preventDefault(),this.handleNewChip())},this.handleChipClose=async e=>{const i=null==e?void 0:e.target,t=null==i?void 0:i.value,s=null==i?void 0:i.previousElementSibling,a=this.value.filter((e=>e!==t));this.value=a,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues(),await(null==s?void 0:s.setFocus())},this.checkUnderMinValues=()=>{var e;const i=null===(e=this.validationOptions)||void 0===e?void 0:e.minValues;void 0!==i&&(this.errorMessage=this.isUnderMinValues?t.formatMessage(this.strings.minValuesMessage,{minValues:t.formatNumberToLocale(i)}):this.errorMessage)},this.value=void 0,this.label=void 0,this.placeholderText=void 0,this.dataType="number",this.choiceList=void 0,this.scale=s.UIDefaults.Scale,this.required=void 0,this.validationParams=void 0,this.validationOptions=void 0,this.errorMessage=void 0}get isValid(){return void 0===this.errorMessage||""===this.errorMessage}get isOverMaxValues(){var e,i,t;const s=null!==(i=null===(e=this.validationOptions)||void 0===e?void 0:e.maxValues)&&void 0!==i?i:Number.MAX_SAFE_INTEGER;return(null===(t=this.value)||void 0===t?void 0:t.length)>s}get isAtMaxValues(){var e,i,t;const s=null!==(i=null===(e=this.validationOptions)||void 0===e?void 0:e.maxValues)&&void 0!==i?i:Number.MAX_SAFE_INTEGER;return(null===(t=this.value)||void 0===t?void 0:t.length)===s}get isUnderMinValues(){var e,i,t;const s=null!==(i=null===(e=this.validationOptions)||void 0===e?void 0:e.minValues)&&void 0!==i?i:0;return(null===(t=this.value)||void 0===t?void 0:t.length)<s}async checkValidity(){var e,i,s,a;return this.isOverMaxValues&&(this.errorMessage=t.formatMessage(this.strings.maxValuesMessage,{maxValues:t.formatNumberToLocale(null===(e=this.validationOptions)||void 0===e?void 0:e.maxValues)})),0!==(null===(i=this.value)||void 0===i?void 0:i.length)&&this.isUnderMinValues&&(this.errorMessage=t.formatMessage(this.strings.minValuesMessage,{minValues:t.formatNumberToLocale(null===(s=this.validationOptions)||void 0===s?void 0:s.minValues)})),this.errorMessage=null!==(a=this.validate(this.value))&&void 0!==a?a:this.errorMessage,Promise.resolve(this.isValid)}async componentWillLoad(){({strings:this.strings}=await t.fetchComponentLocaleStrings(this.hostElement,i.getAssetPath(".")))}render(){return void 0!==this.choiceList&&this.choiceList.length>0?this.renderCombobox():this.renderNoChoiceList()}renderNoChoiceList(){var e,l,n,o,r,h,u,d,v,c;const m=void 0!==this.errorMessage;let p,g=!1;void 0!==(null===(e=this.validationOptions)||void 0===e?void 0:e.maxValues)&&(g=!m&&this.isAtMaxValues,p=t.formatMessage(this.strings.maxValuesMessage,{maxValues:t.formatNumberToLocale(this.validationOptions.maxValues)}));const b=t.formatValidationParamsMessage(this.validationParams),M=!0===m||!0===g,y=!1===t.isEmptyDataItem(b)||M,f=M?t.UIInputStatus.INVALID:t.getUIInputStatusFromMessageType(null===(l=this.validationParams)||void 0===l?void 0:l.type),x=M?t.UIInputStatus.INVALID:t.isEmptyDataItem(this.validationParams)?t.UIInputStatus.IDLE:t.getUIInputStatusFromMessageType(null===(n=this.validationParams)||void 0===n?void 0:n.type);return i.h(i.Host,null,i.h("calcite-label",{scale:this.scale,class:a},this.label,i.h("calcite-input",{disabled:this.isAtMaxValues,type:this.dataType,placeholder:null!==(o=this.placeholderText)&&void 0!==o?o:this.strings.defaultPlaceholder,scale:this.scale,status:x,numberButtonType:"none",max:null===(r=this.validationOptions)||void 0===r?void 0:r.max,min:null===(h=this.validationOptions)||void 0===h?void 0:h.min,step:!0===(null===(u=this.validationOptions)||void 0===u?void 0:u.isFloatType)?"any":1,onCalciteInputChange:this.handleNewChip,onKeyDown:this.handleKeyDown,ref:e=>this.inputElement=e},i.h("calcite-button",{disabled:this.isAtMaxValues,scale:this.scale,slot:"action",onClick:this.handleNewChip,"icon-start":"plus"},this.strings.add)),i.h("calcite-input-message",{class:a,status:f,scale:s.UIDefaults.Scale,hidden:!y,icon:"exclamationMarkTriangle"},null!==(v=null!==(d=this.errorMessage)&&void 0!==d?d:p)&&void 0!==v?v:b)),i.h("div",{class:"chip-container"},null===(c=this.value)||void 0===c?void 0:c.map((e=>this.buildChip(e)))))}validate(e=this.value){let i;if(!0!==this.required||void 0!==e&&0!==(null==e?void 0:e.length))if("number"===this.dataType){const a=Object.assign({required:!1},this.validationOptions),l=e=>s.validateNumber(t.parseNumber(e),a),n=null==e?void 0:e.map(l).find((e=>void 0!==e)),{min:o,max:r}=a,h={min:t.formatNumberToLocale(o),max:t.formatNumberToLocale(r)};i=void 0!==n?t.formatMessage(this.strings[n],h):void 0}else i=void 0;else i=this.strings.requiredInputMessage;return i}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{--calcite-ui-border-input:var(--analysis-ui-border-input)}.chip-container{display:flex;flex-wrap:wrap;gap:0.25rem}.custom-input-label{margin-bottom:var(--analysis-quarter-spacing)/2}"}},[1,"analysis-multiple-input",{value:[1040],label:[513],placeholderText:[513,"placeholder-text"],dataType:[513,"data-type"],choiceList:[16],scale:[1],required:[516],validationParams:[16],validationOptions:[16],errorMessage:[1025,"error-message"],checkValidity:[64]}]);function n(){"undefined"!=typeof customElements&&["analysis-multiple-input"].forEach((e=>{"analysis-multiple-input"===e&&(customElements.get(e)||customElements.define(e,l))}))}n(),e.AnalysisMultipleInput=l,e.defineCustomElement=n}));