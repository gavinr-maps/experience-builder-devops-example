define(["exports","./index2-600fb1b2"],(function(e,a){"use strict";const r={Feature_All:"feature",Feature_Extract:"extract",Feature_Point:"feature_point",Feature_MultiPoint:"feature_multiPoint",Feature_Line:"feature_line",Feature_Polygon:"feature_polygon",Feature_Table:"table",Imagery_All:"imagery",Imagery_SingleBand:"imagery_singleBand",Imagery_MultiBand:"imagery_multiBand",Imagery_Integer:"imagery_integer",Imagery_Float:"imagery_float",Imagery_Multidimension:"imagery_multidimension",Imagery_Trend:"imagery_trend",Imagery_Change:"imagery_change"},t="invalidIntegerMessage";async function i(e,r){let t=!1;try{const i=await a.request(`${e}/keyProperties?f=json`,{responseType:"json"});t=void 0!==i.data&&void 0!==i.data[r]&&void 0!==i.data[r].DimensionName}catch(e){await a.throwError(a.ErrorKeywords.KeyPropertiesError)}return t}async function n(e){var t;const{layer:n,layerFilterType:s,user:o}=e;let l=!1;switch(s){case r.Imagery_All:l=a.isImageryLayer(n)||a.isImageryTileLayer(n);break;case r.Imagery_SingleBand:l=a.isImageryLayer(n)?1===n.serviceRasterInfo.bandCount:!!a.isImageryTileLayer(n)&&1===n.rasterInfo.bandCount;break;case r.Imagery_MultiBand:l=a.isImageryLayer(n)?n.serviceRasterInfo.bandCount>1:!!a.isImageryTileLayer(n)&&n.rasterInfo.bandCount>1;break;case r.Imagery_Integer:const e=a.isImageryLayer(n)?n.pixelType:a.isImageryTileLayer(n)?n.rasterInfo.pixelType:"";l=e.startsWith("u")||e.startsWith("s");break;case r.Imagery_Float:l=(a.isImageryLayer(n)?n.pixelType:a.isImageryTileLayer(n)?n.rasterInfo.pixelType:"").startsWith("f");break;case r.Imagery_Multidimension:l=a.isImageryLayer(n)&&n.hasMultidimensions||a.isImageryTileLayer(n)&&(null===(t=n.multidimensionalDefinition)||void 0===t?void 0:t.length)>0;break;case r.Imagery_Trend:(a.isImageryLayer(n)||a.isImageryTileLayer(n))&&(l=await i(n.url,"TrendParameters"));break;case r.Imagery_Change:(a.isImageryLayer(n)||a.isImageryTileLayer(n))&&(l=await i(n.url,"ChangeAnalysisParameters"));break;case r.Feature_All:l=a.isFeatureLayer(n)&&!a.isTableLayer(n);break;case r.Feature_Point:l=a.isFeatureLayer(n)&&!a.isTableLayer(n)&&"point"===n.geometryType;break;case r.Feature_MultiPoint:l=a.isFeatureLayer(n)&&!a.isTableLayer(n)&&"multipoint"===n.geometryType;break;case r.Feature_Line:l=a.isFeatureLayer(n)&&!a.isTableLayer(n)&&"polyline"===n.geometryType;break;case r.Feature_Polygon:l=a.isFeatureLayer(n)&&!a.isTableLayer(n)&&"polygon"===n.geometryType;break;case r.Feature_Table:l=a.isTableLayer(n);break;case r.Feature_Extract:l=await a.canExtractLayer(n,o)}return l}function s(e,a){const r=e.map((e=>`type:"${e}"`)).join(" OR ");return void 0!==a?`${a} (${r})`:`(${r})`}e.LayerFilterType=r,e.LayerInputActions={Select:"select",Filter:"filter",Reset:"reset",Remove:"remove"},e.StatisticType={Any:"any",Count:"count",First:"first",Last:"last",Maximum:"max",Mean:"mean",Minimum:"min",Range:"range",StdDev:"stddev",Sum:"sum",Variance:"variance"},e.UIDefaults={DebounceTimer:400,HelpDebounceTimer:1500,PopoverTimer:60,Scale:"s",MediumScale:"m"},e.addOpenableDomElement=function(e,a){!1===e.body.contains(a)&&(e.body.appendChild(a),a.open=!0)},e.filterLayersByType=async function(e){const{layers:a,layerFilterTypes:r,user:t}=e;let i=a,s=[];if(void 0!==r){let e;e=Array.isArray(r)?a.map((e=>(async()=>{for(const a of r)if(await n({layer:e,layerFilterType:a,user:t}))return!0;return!1})())):a.map((e=>n({layer:e,layerFilterType:r,user:t})));const o=await Promise.all(e);i=a.filter(((e,a)=>o[a])),s=a.filter(((e,a)=>!o[a]))}return{validLayers:i,filteredLayers:s}},e.formatLayerUrlAndId=function(e){return`${e.url}/${e.layerId}`},e.getBaseUrl=function(e){const{customBaseUrl:a,portalHostname:r,urlKey:t}=e,{protocol:i}=window.location;return`${i}//${t?`${t}.${a}`:r}`},e.makeAllowedGeometriesByType=function(e){const a=Array.isArray(e)?e:[e],t=new Set;return a.forEach((e=>{switch(e){case r.Feature_All:t.add("point"),t.add("multipoint"),t.add("polyline"),t.add("polygon");break;case r.Feature_Point:t.add("point");break;case r.Feature_MultiPoint:t.add("multipoint");break;case r.Feature_Line:t.add("polyline");break;case r.Feature_Polygon:t.add("polygon");break;case r.Feature_Table:t.add("nonspatial");break;case r.Feature_Extract:t.add("point"),t.add("multipoint"),t.add("polyline"),t.add("polygon"),t.add("nonspatial")}})),0===t.size?void 0:Array.from(t)},e.makePortalSearchFilter=s,e.makePortalSearchFilterByType=function(e){const a=Array.isArray(e)?e:[e],t=new Set;return a.forEach((e=>{switch(e){case r.Feature_Extract:case r.Feature_All:case r.Feature_Point:case r.Feature_MultiPoint:case r.Feature_Line:case r.Feature_Polygon:case r.Feature_Table:t.add("Feature Service");break;case r.Imagery_All:case r.Imagery_SingleBand:case r.Imagery_MultiBand:case r.Imagery_Integer:case r.Imagery_Float:case r.Imagery_Multidimension:case r.Imagery_Trend:case r.Imagery_Change:t.add("Image Service");break;default:t.add("Feature Service"),t.add("Image Service")}})),s(Array.from(t))},e.removeOpenableDomElement=function(e){void 0!==e&&(e.open=!1,e.remove())},e.validateNumber=(e,r)=>{const{required:i,isFloatType:n,excludeMinValue:s,excludeMaxValue:o,min:l,max:y}=r;let u;return a.isValidNumber(e)?!1!==n||Number.isInteger(e)?void 0!==l&&void 0!==e&&(e<l||!0===s&&e<=l)?u=!0===s?"strictlyMinimumMessage":"belowMinimumMessage":void 0!==y&&void 0!==e&&(e>y||!0===o&&e>=y)&&(u=!0===o?"strictlyMaximumMessage":"aboveMaximumMessage"):u=t:void 0!==e?u=!0===n?"invalidDoubleMessage":t:!0===i&&(u="requiredInputMessage"),u}}));