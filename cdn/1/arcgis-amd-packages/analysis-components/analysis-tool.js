define(["exports","./index-86304dcd","./index2-600fb1b2","./primitiveFactory-2717fa00","./utils-2b3d82c1","./analysis-value-table2-6200681e","./analysis-attribute-expression2-f34aed10","./analysis-block2-9cfb89d3","./analysis-boolean-input2-10e22433","./analysis-chip-group2-2361bfef","./analysis-dataset-input2-144fd55c","./analysis-dataset-input-popover2-6e06b4c4","./analysis-date-input2-a3eee199","./analysis-expression-group2-0d72ca83","./analysis-field-input2-00f0f6a4","./analysis-field-select2-5be8f180","./analysis-folder-input2-1973e9af","./analysis-geoenrichment-databrowser2-dbeaea59","./analysis-geoenrichment-input2-d9f2f892","./analysis-help-popover2-b2419ead","./analysis-item-browser2-db031f89","./analysis-item-input2-14927f19","./analysis-key-value2-cc80731c","./analysis-label2-b880686f","./analysis-layer-input2-df2bc8f1","./analysis-layer-input-popover2-fe1e3b94","./analysis-linear-unit-input2-79a3e9cb","./analysis-multiple-input2-1f652890","./analysis-number-input2-cecfa17d","./analysis-parameter-group2-fb5ea8b5","./analysis-query-builder2-19c561dd","./analysis-query-entry2-c95d7a4d","./analysis-query-input2-2ac9834d","./analysis-query-modal2-d2d9489a","./analysis-query-target-select2-b8d3432e","./analysis-section2-894d3a7f","./analysis-spatial-expression2-90d05c57","./analysis-spatial-reference-input2-b717f27f","./analysis-spatial-reference-selector2-e3494e33","./analysis-string-input2-192086f8","./analysis-summary-fields2-587141b3","./analysis-summary-fields-popover2-71590aef","./analysis-traffic-time-input2-120e03e0","./analysis-tree2-79fa9cfa","./analysis-workflow-select2-7ecf2f29","./analysis-workflow-select-popover2-29b3b286","./isEqual-7dac7fee","./get-4ace6219","esri/request","esri/core/urlUtils","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/identity/IdentityManager","esri/core/reactiveUtils","esri/rest/support/Query","esri/core/promiseUtils","esri/portal/PortalItemResource","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/layers/Layer","esri/portal/PortalItem","esri/layers/support/Field","esri/renderers/Renderer","esri/rest/support/FeatureSet","esri/config","esri/smartMapping/statistics/uniqueValues","esri/rest/support/JobInfo","esri/rest/geoprocessor","esri/core/sql","./set-bd0d1ec7","./_baseGet-9bd467fe","./_MapCache-84d65af1","./isObject-072a0200","./isSymbol-765de845","./_Uint8Array-190b1a5d","./t9n-cc9a26c8","./expressions-86d9b535","./identity-47e9f05a","./helpmap-dbc7a68f","./_baseIsEqual-422e05a5"],(function(e,a,t,s,l,i,n,o,r,u,p,d,m,c,h,y,v,f,g,b,E,I,U,C,T,P,k,D,x,S,H,L,J,M,O,w,A,V,F,j,N,R,q,_,B,G,K,W,z,$,Q,Y,Z,X,ee,ae,te,se,le,ie,ne,oe,re,ue,pe,de,me,ce,he,ye,ve,fe,ge,be,Ee,Ie,Ue,Ce,Te,Pe,ke){"use strict";const De="parameterViewModel",xe=["choiceListLabels","label","visible","componentName","serializationType","serializationParameterName","serializationKeys","uiParameterInfoSubSet","submissionName"],Se=["dataType","choiceList"],He=e=>{var{name:t,onSetRef:l,onValueChange:i,onHelpClick:n,label:o,value:r}=e,u=s.__rest(e,["name","onSetRef","onValueChange","onHelpClick","label","value"]);return a.h("analysis-value-table",Object.assign({key:t,ref:l,onAnalysisValueTableChange:i,label:o,value:r,onAnalysisHelpClick:n},u))},Le=(e,a)=>a,Je={[s.AnalysisToolParamDataType.GPValueTable]:He},Me=Object.assign(Object.assign({},s.primitiveComponentByType),Je),Oe={"analysis-parameter-group":e=>{var{name:t,value:l,onSetRef:i,onValueChange:n,onHelpClick:o,label:r,required:u,UIparameterInfos:p,dataType:d,paramGroupDataType:m}=e,c=s.__rest(e,["name","value","onSetRef","onValueChange","onHelpClick","label","required","UIparameterInfos","dataType","paramGroupDataType"]);const h=null!=m?m:d;return a.h("analysis-parameter-group",Object.assign({key:t,groupLabel:r,required:u,value:l,UIparameterInfos:p,dataType:h,ref:i,onAnalysisParameterGroupInputChange:n,onAnalysisHelpClick:o},c))},"analysis-value-table":He,"analysis-key-value":e=>{var{value:t,layout:l,parameterInfos:i,onSetRef:n,onValueChange:o,onHelpClick:r,UIparameterInfos:u,label:p}=e,d=s.__rest(e,["value","layout","parameterInfos","onSetRef","onValueChange","onHelpClick","UIparameterInfos","label"]);return a.h("analysis-key-value",Object.assign({value:t,layout:l,parameterInfos:i,UIparameterInfos:u,label:p,ref:n,onAnalysisKeyValueChange:o,onAnalysisHelpClick:r},d))}},we=Object.assign(Object.assign({},s.primitiveComponentByName),Oe),Ae={"analysis-block":(e,t)=>{var{label:l,summaryText:i}=e,n=s.__rest(e,["label","summaryText"]);return a.h("analysis-block",Object.assign({label:l,summaryText:i},n),t)},"analysis-section":({label:e,open:t},s)=>a.h("analysis-section",{label:e,open:t},s)},Ve=e=>{let t;return void 0!==e.componentName?t=we[e.componentName]:void 0!==e.dataType&&(t=Me[e.dataType]),t=null!=t?t:s.NotFoundInput,a.h(t,Object.assign({},s.standardizeInputProperties(e)))},Fe=Ve,je=(e,t)=>{let l;void 0!==e.componentName&&(l=Ae[e.componentName]);const i=s.__rest(e,["componentName"]);return l=null!=l?l:Le,a.h(l,Object.assign({},i),t)};function Ne(e,a){const{helpUrl:t,helpId:s,heading:i,referenceElement:n,isHelpFileExternalAsset:o,portalHelpMap:r,portal:u,helpFileName:p,learnMoreBaseUrl:d,learnMoreUrl:m,analysisEngine:c,offsetDistance:h,offsetSkidding:y,externalHelpMap:v}=a;return void 0!==e&&(l.removeOpenableDomElement(e),e=void 0),e=function(e){const{helpUrl:a,helpId:t,heading:s,referenceElement:l,isHelpFileExternalAsset:i,portalHelpMap:n,portal:o,helpFileName:r,learnMoreBaseUrl:u,learnMoreUrl:p,analysisEngine:d,placement:m,offsetDistance:c,offsetSkidding:h,externalHelpMap:y}=e,v=document.createElement("analysis-help-popover");return v.helpUrl=a,v.helpId=t,v.heading=s,v.referenceElement=l,v.placement=null!=m?m:"leading-start",v.isHelpFileExternalAsset=i,v.portalHelpMap=n,v.portal=o,v.helpFileName=r,v.analysisEngine=d,v.learnMoreBaseUrl=u,v.learnMoreUrl=p,void 0!==c&&(v.offsetDistance=c),void 0!==h&&(v.offsetSkidding=h),v.externalHelpMap=y,v}({helpUrl:t,helpId:s,heading:i,referenceElement:n,isHelpFileExternalAsset:o,portalHelpMap:r,portal:u,helpFileName:p,analysisEngine:c,learnMoreBaseUrl:d,learnMoreUrl:m,offsetDistance:h,offsetSkidding:y,externalHelpMap:v}),l.addOpenableDomElement(document,e),e}const Re=(e,a)=>{let t=e;return void 0!==a&&void 0!==e&&e.startsWith("$")&&(t=a[e.replace("$","")]),t};function qe(e,a){var{label:t,placeholderText:l,heading:i,filterPlaceholderText:n,selectButtonLabel:o,replaceTooltipText:r,choiceListLabels:u,UIparameterInfos:p,validationParams:d,parameterGroupDataTypeLabel:m,disabledTooltip:c,noFieldsText:h,noLayersText:y}=e,v=s.__rest(e,["label","placeholderText","heading","filterPlaceholderText","selectButtonLabel","replaceTooltipText","choiceListLabels","UIparameterInfos","validationParams","parameterGroupDataTypeLabel","disabledTooltip","noFieldsText","noLayersText"]);const f=void 0!==u?((e,a)=>{const t={};return void 0!==e&&Object.entries(e).forEach((([e,s])=>{const l=Re(s,a);void 0!==l&&(t[e]=l)})),t})(u,a):void 0,g=void 0!==p?p.map((e=>qe(e,a))):void 0,b=void 0!==d?((e,a)=>{const t={};return void 0!==e&&Object.entries(e).forEach((([e,s])=>{if("object"==typeof s)t.variables=s;else{const l=Re(s,a);void 0!==l&&(t[e]=l)}})),t})(d,a):void 0;return Object.assign({label:Re(t,a),placeholderText:Re(l,a),heading:Re(i,a),filterPlaceholderText:Re(n,a),selectButtonLabel:Re(o,a),replaceTooltipText:Re(r,a),choiceListLabels:f,UIparameterInfos:g,validationParams:b,parameterGroupDataTypeLabel:Re(m,a),disabledTooltip:Re(c,a),noFieldsText:Re(h,a),noLayersText:Re(y,a)},v)}const _e=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisToolDataChange=a.createEvent(this,"analysisToolDataChange",7),this.analysisToolHelpPopoverChange=a.createEvent(this,"analysisToolHelpPopoverChange",7),this.analysisToolLoaded=a.createEvent(this,"analysisToolLoaded",7),this.locale=t.SupportedLocales.EnglishUSA,this.parameterViewModel={},this.renderParameter=e=>{var s,i;const n=null!==(s=null==e?void 0:e.value)&&void 0!==s?s:this.toolData[null==e?void 0:e.name],o=null!==(i=null==e?void 0:e.name)&&void 0!==i?i:null==e?void 0:e.displayName,r=t.generateSelectedLayersKey(null==e?void 0:e.name),u=this.toolData[r];let p=u;0===(null==u?void 0:u.length)?p=void 0:1===(null==u?void 0:u.length)&&(p=u[0]);const d=t.generateParamGroupDataTypeKey(null==e?void 0:e.name),m=this.toolData[d];return a.h(Ve,Object.assign({},e,{key:o,name:o,value:n,mapLayers:this.mapLayers,analysisDatasets:this.analysisDatasets,mapView:this.mapView,selectedLayers:p,paramGroupDataType:m,portal:this.portal,user:this.user,portalHelpMap:this.portalHelpMap,toolData:this.toolData,onSetRef:a=>this.handleOnSetRef(e.name,a),onValueChange:a=>this.parameterChanged(e.name,a),onHelpClick:a=>{var t,s,l,i,n,o,r;const{paramName:u=e.name,paramLabel:p=(null!==(t=e.label)&&void 0!==t?t:u),refElement:d=this.renderedParameters[u]}=null!==(s=a.detail)&&void 0!==s?s:{};this.toolHelpPopover=Ne(this.toolHelpPopover,{analysisEngine:this.analysisEngine,helpUrl:this.toolHelpFilePath,helpId:u,helpFileName:null===(l=this.toolJson)||void 0===l?void 0:l.name,heading:p,referenceElement:d,isHelpFileExternalAsset:this.isHelpFileExternalAsset,portal:null!==(i=this.portal)&&void 0!==i?i:null===(n=this.user)||void 0===n?void 0:n.portal,portalHelpMap:this.portalHelpMap,learnMoreBaseUrl:null!==(r=null===(o=this.portal)||void 0===o?void 0:o.sourceJSON.helpBase)&&void 0!==r?r:void 0})},onClick:()=>{l.removeOpenableDomElement(this.toolHelpPopover)}}))},this.renderParameterContainer=(e,t)=>{var s;const l=null==e?void 0:e.summaryText,i=U.AnalysisToolUILayout.Vertical;return a.h(je,Object.assign({},e,{componentName:e.componentName,label:e.label,summaryText:Re(l,null!==(s=this.toolUIStrings)&&void 0!==s?s:this.internalToolUIStrings)}),a.h("div",{class:`parameters-container ${i}`},t))},this.handleOnSetRef=(e,a)=>{null!==a?this.renderedParameters[e]=a:(delete this.renderedParameters[e],delete this.toolData[e])},this.parameterChanged=(e,a)=>{var s,l,i;const n=Object.assign({},this.toolData),{travelModeInfo:o}=null!==(s=this.toolUIJson)&&void 0!==s?s:{};if(null!==a.target&&void 0!==e){const s=a.target;if(void 0!==this.toolJson&&s.value!==t.StraightLineParameterValue&&!0===t.isTravelModeParameter(e,this.toolJson.name)){if(void 0!==(null==o?void 0:o.travelModes)){const a=null==o?void 0:o.travelModes.filter((e=>e.id===s.value))[0];n[e]=Object.assign({},a)}}else if("timeOfDay"===e){const a=s.value;n[e]=null==a?void 0:a.timeOfDay,n.timeZoneForTimeOfDay=null==a?void 0:a.timeZoneForTimeOfDay}else if("analysisVariables"===e){const{analysisVariables:a,country:t,hierarchy:i,labels:o,countryAlias:r,hierarchyAlias:u}=null!==(l=s.value)&&void 0!==l?l:{};n[e]=a,n.labels=o,void 0!==t&&(n.country=t),void 0!==i&&(n.hierarchy=i),void 0!==r&&(n.countryAlias=r),void 0!==u&&(n.hierarchyAlias=u)}else if("queryBuilder"===e){const{expressions:e,inputLayers:a}=null!==(i=s.value)&&void 0!==i?i:{};n.expressions=e,n.inputLayers=a}else{let a;if("ANALYSIS-PARAMETER-GROUP"===s.nodeName){a=s.value,n[e]=a;const l=t.generateParamGroupDataTypeKey(e),i=s.dataType;n[l]=i}else a=s.value,n[e]=a}n[De]=this[De],this.toolData=n,this.analysisToolDataChange.emit(n)}},this.toolUIJson=void 0,this.toolHelpFilePath=void 0,this.isHelpFileExternalAsset=!1,this.analysisEngine=b.AnalysisEngine.Standard,this.usePanel=!0,this.closable=!0,this.toolUIStrings=void 0,this.toolJson=void 0,this.toolData={},this.mapLayers=void 0,this.mapView=void 0,this.analysisDatasets=void 0,this.learnMoreUrl=void 0,this.externalHelpMap=void 0,this.user=void 0,this.portal=void 0,this.portalHelpMap=void 0,this.toolHelpPopover=void 0,this.environmentSettings=void 0,this.renderedParameters={},this.internalToolUIStrings=void 0}toolUIJsonChange(e,a){!1===K.isEqual(null==e?void 0:e.t9n,null==a?void 0:a.t9n)&&(this.internalToolUIStrings=Object.assign({},null==e?void 0:e.t9n))}async toolDataChange(e,a){var s,l,i,n,o;const r=null===(s=this.portal)||void 0===s?void 0:s.helperServices.asyncGeocode.url,u=null===(l=this.portal)||void 0===l?void 0:l.helperServices.geoenrichment.url;if(t.isEmptyDataItem(r)||"BatchGeocode"!==(null===(i=this.toolJson)||void 0===i?void 0:i.name)||void 0===this.toolUIJson){if(!t.isEmptyDataItem(u)&&"EnrichLayer"===(null===(o=this.toolJson)||void 0===o?void 0:o.name)&&void 0!==this.toolUIJson&&!K.isEqual(c.omit(null==e?void 0:e.inputLayer,"serviceToken"),c.omit(null==a?void 0:a.inputLayer,"serviceToken"))){let a;void 0===e||t.isEmptyDataItem(null==e?void 0:e.inputLayer)||(a=await t.getCountry({inputLayer:this.renderedParameters.inputLayer.selectedLayers,mapView:this.mapView,geoenrichmentUrl:u}),e.country=a),void 0!==e&&(e.analysisVariables=void 0,e.hierarchy=void 0),this.toolData=Object.assign({},e)}}else{const a=null==e?void 0:e.geocodeServiceURL,s=null===(n=this.toolUIJson.rules)||void 0===n?void 0:n.filter((e=>"sourceCountry"!==e.destination&&"geocodeUIParameters"!==e.destination)),l=await t.getToolUIJsonWithSourceCountryRule({geocodeServiceURL:a,locale:this.locale});let i={asyncGeocodeUrl:r,geocodeServiceURL:a,locale:this.locale};const o=W.get(this.renderedParameters,"inputFileItem.selectedItem"),u=null==e?void 0:e.inputTable;if(t.isEmptyDataItem(null==o?void 0:o.id))t.isEmptyDataItem(null==u?void 0:u.url)||(i=Object.assign(Object.assign({},i),{inputTable:{url:u.url,serviceToken:u.serviceToken}}));else{const e="CSV"===o.type?"csv":"xlsx";i=Object.assign(Object.assign({},i),{inputFileItem:{itemid:o.id},inputFileParameters:{fileType:e,headerRowExists:"true",columnDelimiter:"",textQualifier:""}})}const{addressFieldsRule:p,geocodeParameters:d}=await t.getAddressFieldMappingRules(i);this.toolData.geocodeParameters=d,void 0!==s&&(s.push(l),p&&s.push(p),this.toolUIJson.rules=s,this.toolUIJson=Object.assign({},this.toolUIJson))}}async onUserChange(){var e;let a=!1;void 0!==this.portal&&(a=await t.isStandardAnalysisServerAdvanced(this.portal)),this.toolData=Object.assign(Object.assign({},this.toolData),{userSettings:{unitSystem:null===(e=this.user)||void 0===e?void 0:e.units,hasNAPrivilege:t.hasNAPrivilege(this.user),hasGEPrivilege:t.hasGeoEnrichmentPrivilege(this.user),hasAdvancedLicense:a}}),this.analysisToolDataChange.emit(this.toolData)}toolHelpPopoverChange(){this.analysisToolHelpPopoverChange.emit()}disconnectedCallback(){l.removeOpenableDomElement(this.toolHelpPopover)}async componentWillLoad(){var e,a,s,l;const{rtl:i,locale:n}=t.getLocaleInfo(this.hostElement);this.locale=n,this.dir=!0===i?"rtl":"ltr";let o=!1;void 0!==this.user&&(o=await t.isStandardAnalysisServerAdvanced(null===(e=this.user)||void 0===e?void 0:e.portal)),void 0!==this.toolUIJson&&this.toolUIJsonChange(this.toolUIJson),void 0!==this.toolUIStrings&&(this.internalToolUIStrings=Object.assign({},this.toolUIStrings),void 0!==this.toolUIJson&&void 0===(null===(a=this.toolUIJson)||void 0===a?void 0:a.t9n)&&(this.toolUIJson.t9n=this.toolUIStrings)),!0===t.isEmptyDataItem(this.toolData)&&void 0!==(null===(s=this.toolJson)||void 0===s?void 0:s.parameters)&&(this.toolData=this.getDefaultValues(o,this.toolJson.parameters,null===(l=this.toolUIJson)||void 0===l?void 0:l.UIparameters),t.isEmptyDataItem(this.toolData)||this.analysisToolDataChange.emit(this.toolData))}componentDidLoad(){this.analysisToolLoaded.emit()}async validateTool(){const e=await this.checkToolValidity(),a=this.checkToolValidationRules();return void 0!==e&&a.push(e),{valid:0===a.length,errorKeys:a}}render(){var e,s,l,i,n,o;const r=void 0!==this.toolUIJson?this.renderWithUIParameters(this.toolUIJson.UIparameters):this.renderWithoutUIParameters();let u;if(void 0!==this.toolJson&&void 0!==(null===(e=this.internalToolUIStrings)||void 0===e?void 0:e.toolInfo)){const e=`${t.toCamelToolName(null===(s=this.toolJson)||void 0===s?void 0:s.name)}${t.formatAnalysisEngineSuffix(this.analysisEngine)}`;u=null===(l=this.internalToolUIStrings.toolInfo)||void 0===l?void 0:l[e]}return u=null!==(n=null!=u?u:null===(i=this.toolUIJson)||void 0===i?void 0:i.toolName)&&void 0!==n?n:null===(o=this.toolJson)||void 0===o?void 0:o.displayName,a.h(a.Host,null,!0===this.usePanel?a.h("calcite-panel",{dir:this.dir,heading:u,closable:this.closable,ref:e=>{this.panelElement=e}},a.h("calcite-action",{label:"",text:"",icon:"information",slot:"header-actions-end",onClick:()=>{var e,a,t,s;void 0!==this.toolHelpFilePath&&(this.toolHelpPopover=Ne(this.toolHelpPopover,{helpUrl:this.toolHelpFilePath,helpId:"toolDescription",heading:u,referenceElement:this.panelElement,isHelpFileExternalAsset:!0,portal:null!==(e=this.portal)&&void 0!==e?e:null===(a=this.user)||void 0===a?void 0:a.portal,portalHelpMap:this.portalHelpMap,helpFileName:null===(t=this.toolJson)||void 0===t?void 0:t.name,analysisEngine:this.analysisEngine,learnMoreBaseUrl:null===(s=this.portal)||void 0===s?void 0:s.sourceJSON.helpBase,learnMoreUrl:this.learnMoreUrl,offsetDistance:15,externalHelpMap:this.externalHelpMap}))}}),r):r)}renderWithUIParameters(e){var a,s,l,n,o,r,u;const{rules:p,travelModeInfo:d}=null!==(a=this.toolUIJson)&&void 0!==a?a:{},m=i.getRulesByDestination(null!=p?p:[]),c=i.joinParams(null!=e?e:[],null!==(l=null===(s=this.toolJson)||void 0===s?void 0:s.parameters)&&void 0!==l?l:[]),h=[];for(let e of c){const a=e.name;if(void 0===a){h.push(e);continue}let s=this.toolData;void 0!==this.toolJson&&!0===t.isTravelModeParameter(a,this.toolJson.name)?[e,s]=i.adaptForTravelModes({param:e,data:s,travelModeInfo:d,straightLineLabel:null!==(o=null===(n=this.internalToolUIStrings)||void 0===n?void 0:n.straightLineLabel)&&void 0!==o?o:void 0}):(null!==(r=s[a])&&void 0!==r||(s[a]=e.value),e.value=s[a]);const l=m.get(a);if(void 0!==l&&([e,s]=i.applyRules({param:e,data:s,rules:l,renderedParameters:this.renderedParameters,currentTool:this.hostElement})),[e,s]=i.applyVisibilityRules({param:e,data:s,renderedParameters:this.renderedParameters}),h.push(e),void 0!==e.name&&void 0===e.UIparameters){const a=U.pick(e,[...xe,...Se]);if("UIparameterInfos"in e){const t={};null===(u=e.UIparameterInfos)||void 0===u||u.forEach((e=>{void 0!==e.name&&(t[e.name]=U.pick(e,xe))})),a.uiParameterInfoSubSet=t}this[De][e.name]=a}}return h.filter((e=>!1!==e.visible)).map((e=>{var a;return qe(e,null!==(a=this.toolUIStrings)&&void 0!==a?a:this.internalToolUIStrings)})).map((e=>{if(void 0!==e.UIparameters){const a=this.renderWithUIParameters(e.UIparameters);return this.renderParameterContainer(e,a)}{const a=e;return this.renderParameter(a)}}))}renderWithoutUIParameters(){var e,a;const t=null!==(a=null===(e=this.toolJson)||void 0===e?void 0:e.parameters)&&void 0!==a?a:[];return null==t?void 0:t.filter((e=>"esriGPParameterDirectionInput"===e.direction)).map(this.renderParameter)}getDefaultValues(e,a,s){var l,n;let o={};const{travelModeInfo:r,rules:u}=null!==(l=this.toolUIJson)&&void 0!==l?l:{},{name:p}=null!==(n=this.toolJson)&&void 0!==n?n:{},d=t.getUIParamsByName(null!=s?s:[]);return o=i.applyUserSettings({defaultValues:o,user:this.user,hasAdvancedLicense:e}),o=i.applyToolUIJsonParameterDefaults({defaultValues:o,toolName:p,toolUIJsonParametersByName:d,travelModeInfo:r}),o=i.applyToolParameterDefaults({defaultValues:o,toolJsonParameters:a,toolUIJsonParametersByName:d}),o=i.applyUserSettingsRules({defaultValues:o,toolUIJsonParametersByName:d,rules:u}),o}async checkToolValidity(){const e=Object.values(this.renderedParameters).filter((e=>"checkValidity"in e&&"function"==typeof e.checkValidity)).map((e=>e.checkValidity()));return!0===await Promise.all(e).then((e=>e.every((e=>!0===e))))?void 0:t.DEFAULT_ERROR_KEY}checkToolValidationRules(){const{validationRules:e}=this.toolUIJson||{},a=[];return null==e||e.forEach((e=>{!0===t.processValidationRule({rule:e,data:this.toolData,renderedParams:this.renderedParameters,currentTool:this.hostElement})&&a.push(e.errorKey)})),a}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{toolUIJson:["toolUIJsonChange"],toolData:["toolDataChange"],user:["onUserChange"],toolHelpPopover:["toolHelpPopoverChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.parameters-container{display:flex;justify-content:space-between;column-gap:5%;width:var(--analysis-parameter-default-width)}.horizontal{flex-direction:row;align-items:center}.vertical{flex-direction:column}"}},[1,"analysis-tool",{toolUIJson:[16],toolHelpFilePath:[513,"tool-help-file-path"],isHelpFileExternalAsset:[516,"is-help-file-external-asset"],analysisEngine:[513,"analysis-engine"],usePanel:[516,"use-panel"],closable:[516],toolUIStrings:[16],toolJson:[16],toolData:[1040],mapLayers:[16],mapView:[16],analysisDatasets:[16],learnMoreUrl:[513,"learn-more-url"],externalHelpMap:[16],user:[16],portal:[16],portalHelpMap:[16],toolHelpPopover:[1040],environmentSettings:[16],renderedParameters:[32],internalToolUIStrings:[32],validateTool:[64]}]);function Be(){"undefined"!=typeof customElements&&["analysis-tool","analysis-attribute-expression","analysis-block","analysis-boolean-input","analysis-chip-group","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-help-popover","analysis-item-browser","analysis-item-input","analysis-key-value","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-parameter-group","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-section","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-value-table","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-tool":customElements.get(e)||customElements.define(e,_e);break;case"analysis-attribute-expression":customElements.get(e)||n.defineCustomElement();break;case"analysis-block":customElements.get(e)||o.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||r.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||u.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||p.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||d.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||m.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||c.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||h.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||y.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||v.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||f.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||g.defineCustomElement();break;case"analysis-help-popover":customElements.get(e)||b.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||E.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||I.defineCustomElement();break;case"analysis-key-value":customElements.get(e)||U.defineCustomElement();break;case"analysis-label":customElements.get(e)||C.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||T.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||P.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||k.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||D.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||x.defineCustomElement();break;case"analysis-parameter-group":customElements.get(e)||S.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||H.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||L.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||J.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||M.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||O.defineCustomElement();break;case"analysis-section":customElements.get(e)||w.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||A.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||V.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||F.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||j.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||N.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||R.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||q.defineCustomElement();break;case"analysis-tree":customElements.get(e)||_.defineCustomElement();break;case"analysis-value-table":customElements.get(e)||i.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||B.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||G.defineCustomElement()}}))}Be();const Ge=_e,Ke=Be;e.A=Ve,e.AnalysisTool=Ge,e.a=je,e.c=Fe,e.defineCustomElement=Ke,e.s=Ne,Object.defineProperty(e,"__esModule",{value:!0})}));