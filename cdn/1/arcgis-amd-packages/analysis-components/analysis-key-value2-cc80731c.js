define(["exports","./index-86304dcd","./index2-600fb1b2","./primitiveFactory-2717fa00","./analysis-attribute-expression2-f34aed10","./analysis-boolean-input2-10e22433","./analysis-chip-group2-2361bfef","./analysis-dataset-input2-144fd55c","./analysis-dataset-input-popover2-6e06b4c4","./analysis-date-input2-a3eee199","./analysis-expression-group2-0d72ca83","./analysis-field-input2-00f0f6a4","./analysis-field-select2-5be8f180","./analysis-folder-input2-1973e9af","./analysis-geoenrichment-databrowser2-dbeaea59","./analysis-geoenrichment-input2-d9f2f892","./analysis-item-browser2-db031f89","./analysis-item-input2-14927f19","./analysis-label2-b880686f","./analysis-layer-input2-df2bc8f1","./analysis-layer-input-popover2-fe1e3b94","./analysis-linear-unit-input2-79a3e9cb","./analysis-multiple-input2-1f652890","./analysis-number-input2-cecfa17d","./analysis-query-builder2-19c561dd","./analysis-query-entry2-c95d7a4d","./analysis-query-input2-2ac9834d","./analysis-query-modal2-d2d9489a","./analysis-query-target-select2-b8d3432e","./analysis-spatial-expression2-90d05c57","./analysis-spatial-reference-input2-b717f27f","./analysis-spatial-reference-selector2-e3494e33","./analysis-string-input2-192086f8","./analysis-summary-fields2-587141b3","./analysis-summary-fields-popover2-71590aef","./analysis-traffic-time-input2-120e03e0","./analysis-tree2-79fa9cfa","./analysis-workflow-select2-7ecf2f29","./analysis-workflow-select-popover2-29b3b286","./get-4ace6219","./set-bd0d1ec7","./_baseGet-9bd467fe","./isEqual-7dac7fee"],(function(e,a,s,t,n,i,l,r,o,u,m,c,p,y,d,f,h,v,g,b,E,k,C,I,q,w,_,x,V,z,P,H,A,U,$,M,j,K,L,D,O,R,S){"use strict";const G={Vertical:"vertical",Horizontal:"horizontal"};var N=m.flatRest((function(e,a){return null==e?{}:function(e,a){return function(e,a,s){for(var t=-1,n=a.length,i={};++t<n;){var l=a[t],r=R.baseGet(e,l);s(0,l)&&O.baseSet(i,R.castPath(l,e),r)}return i}(e,a,(function(a,s){return E.hasIn(e,s)}))}(e,a)}));const T="key-value",F={groupContainer:`${T}__group-container`,groupLabel:`${T}__group-label-text`,groupHorizontal:`${T}__horizontal-layout`,groupAction:`${T}__group-action`,groupActionHorizontal:`${T}__group-action-horizontal`};function W(e){return void 0!==e.name}const B=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisKeyValueChange=a.createEvent(this,"analysisKeyValueChange",7),this.analysisHelpClick=a.createEvent(this,"analysisHelpClick",7),this.mappedElementMap=new Map,this.updateValue=(e,a)=>{const s=this.mappedElementMap.get(e),t=a;D.get(this.value,e)!==t&&(this.value=Object.assign({},this.value),O.set(this.value,e,t),void 0!==s&&(s.value=t,this.validateParameter(e)),this.analysisKeyValueChange.emit({path:e,value:this.value}))},this.parameterValueChanged=e=>{const a=this.mappedElementMap.get(e);void 0!==a&&(this.value=Object.assign({},this.value),O.set(this.value,e,a.value),this.validate()),this.analysisKeyValueChange.emit({path:e,value:this.value})},this.setAnalysisRef=(e,a)=>{null!=a?this.mappedElementMap.set(e,a):this.mappedElementMap.delete(e)},this.value=void 0,this.parameterInfos=void 0,this.UIparameterInfos=void 0,this.label=void 0,this.required=void 0,this.layout=void 0}parameterInfosChange(e,a){var t;const n=[];null===(t=this.combinedParameterInfos)||void 0===t||t.forEach((e=>{var t;"object"==typeof e&&(n.push(e.name),void 0!==a||s.isEmptyDataItem(this.value)?this.updateValue(e.name,e.value):e.value=null!==(t=this.value[e.name])&&void 0!==t?t:e.value)})),this.value=N(this.value,n),this.analysisKeyValueChange.emit({path:"init",value:this.value})}UIparameterInfosChange(e,a){var t;S.isEqual(e,a)||(s.isEmptyDataItem(this.value)&&(this.value={}),null===(t=this.combinedParameterInfos)||void 0===t||t.forEach((e=>{var a,s;if(void 0!==e.name&&"object"==typeof this.value)if(!1===e.visible)delete this.value[e.name];else{const t=null!==(s=null!==(a=this.value[e.name])&&void 0!==a?a:e.value)&&void 0!==s?s:e.defaultValue;this.updateValue(e.name,t)}})))}get combinedParameterInfos(){var e;let a=null!==(e=this.parameterInfos)&&void 0!==e?e:[];return void 0!==this.UIparameterInfos&&(a=this.UIparameterInfos.filter(W).map((e=>{var a;const s=null===(a=this.parameterInfos)||void 0===a?void 0:a.find((a=>a.name===e.name));return Object.assign(Object.assign({},s),e)}))),a}componentWillLoad(){this.UIparameterInfosChange(this.UIparameterInfos),this.analysisKeyValueChange.emit({path:"init",value:this.value})}render(){return a.h(a.Host,null,a.h("analysis-label",{label:this.label,required:!1,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),this.renderParameters(this.combinedParameterInfos))}renderParameters(e,s,t){return(null==e?void 0:e.length)>0&&a.h("div",null,void 0!==s?a.h("div",{class:F.groupLabel},t):null,a.h("div",{class:F.groupContainer},null==e?void 0:e.map((e=>{var t,n,i,l,r;const o=void 0!==s?`${s}[${e.name}]`:`${e.name}`,u=null===(t=e.visible)||void 0===t||t;return(null==e?void 0:e.parameterInfos)&&!e.dataType.includes("MultiValue")?this.renderParameters(e.parameterInfos,o,null!==(i=null!==(n=e.label)&&void 0!==n?n:e.displayName)&&void 0!==i?i:e.name):u&&a.h("div",{class:this.layout===G.Horizontal?F.groupHorizontal:""},a.h("analysis-label",{class:F.groupLabel,label:null!==(r=null!==(l=e.label)&&void 0!==l?l:e.displayName)&&void 0!==r?r:e.name,hideHelp:!0,required:!0===this.required||"required"in e&&!0===e.required}),a.h("div",{class:this.layout===G.Horizontal?F.groupActionHorizontal:F.groupAction},this.renderDefaultComponent(e,o)))}))))}renderDefaultComponent(e,s){const n=D.get(this.value,s);return a.h(t.AnalysisPrimitiveParameter,Object.assign({key:s,required:this.required},e,{label:"",onValueChange:()=>this.parameterValueChanged(`${s}`),onSetRef:e=>this.setAnalysisRef(`${s}`,e),value:n}))}async checkValidity(){return Promise.resolve(this.validate())}async validate(){const e=Array.from(this.mappedElementMap.keys()).map((async e=>this.validateParameter(e)));return(await Promise.all(e)).every((e=>!0===e))}async validateParameter(e){var a;const s=this.mappedElementMap.get(e),t=null!==(a=this.combinedParameterInfos.find((a=>a.name===e)))&&void 0!==a?a:{};let n=!0;if(void 0!==s)if("checkValidity"in s)n=await s.checkValidity();else{const e="required"in t&&t.required;n=!1==(!0===this.required||!0===e)||void 0!==s.value}return n}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{parameterInfos:["parameterInfosChange"],UIparameterInfos:["UIparameterInfosChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{height:100%;margin-bottom:var(--analysis-half-spacing)}.key-value__group-container{display:flex;flex-direction:column;border:1px var(--calcite-ui-border-1) solid;border-radius:var(--calcite-border-radius);padding:var(--analysis-half-spacing) var(--analysis-half-spacing) 0 var(--analysis-half-spacing);margin-bottom:var(--analysis-half-spacing)}.key-value__group-label-text{margin-bottom:var(--analysis-quarter-spacing);align-self:center;width:48%;font-size:var(--calcite-font-size--2)}.key-value__group-action{align-self:flex-end;width:100%}.key-value__group-action-horizontal{align-self:flex-end;width:50%}.key-value__horizontal-layout{display:flex;width:var(--analysis-component-default-width);justify-content:space-between}"}},[1,"analysis-key-value",{value:[1040],parameterInfos:[16],UIparameterInfos:[16],label:[513],required:[516],layout:[1],checkValidity:[64]}]);function J(){"undefined"!=typeof customElements&&["analysis-key-value","analysis-attribute-expression","analysis-boolean-input","analysis-chip-group","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-item-browser","analysis-item-input","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-key-value":customElements.get(e)||customElements.define(e,B);break;case"analysis-attribute-expression":customElements.get(e)||n.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||i.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||l.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||r.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||o.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||u.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||m.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||c.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||p.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||y.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||d.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||f.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||h.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||v.defineCustomElement();break;case"analysis-label":customElements.get(e)||g.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||b.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||E.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||k.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||C.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||I.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||q.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||w.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||_.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||x.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||V.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||z.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||P.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||H.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||A.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||U.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||$.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||M.defineCustomElement();break;case"analysis-tree":customElements.get(e)||j.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||K.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||L.defineCustomElement()}}))}J(),e.AnalysisKeyValue=B,e.AnalysisToolUILayout=G,e.defineCustomElement=J,e.pick=N}));