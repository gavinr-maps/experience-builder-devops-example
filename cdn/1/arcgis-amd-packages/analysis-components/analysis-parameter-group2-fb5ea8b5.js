define(["exports","./index-86304dcd","./primitiveFactory-2717fa00","./index2-600fb1b2","./utils-2b3d82c1","./analysis-attribute-expression2-f34aed10","./analysis-boolean-input2-10e22433","./analysis-chip-group2-2361bfef","./analysis-dataset-input2-144fd55c","./analysis-dataset-input-popover2-6e06b4c4","./analysis-date-input2-a3eee199","./analysis-expression-group2-0d72ca83","./analysis-field-input2-00f0f6a4","./analysis-field-select2-5be8f180","./analysis-folder-input2-1973e9af","./analysis-geoenrichment-databrowser2-dbeaea59","./analysis-geoenrichment-input2-d9f2f892","./analysis-item-browser2-db031f89","./analysis-item-input2-14927f19","./analysis-label2-b880686f","./analysis-layer-input2-df2bc8f1","./analysis-layer-input-popover2-fe1e3b94","./analysis-linear-unit-input2-79a3e9cb","./analysis-multiple-input2-1f652890","./analysis-number-input2-cecfa17d","./analysis-query-builder2-19c561dd","./analysis-query-entry2-c95d7a4d","./analysis-query-input2-2ac9834d","./analysis-query-modal2-d2d9489a","./analysis-query-target-select2-b8d3432e","./analysis-spatial-expression2-90d05c57","./analysis-spatial-reference-input2-b717f27f","./analysis-spatial-reference-selector2-e3494e33","./analysis-string-input2-192086f8","./analysis-summary-fields2-587141b3","./analysis-summary-fields-popover2-71590aef","./analysis-traffic-time-input2-120e03e0","./analysis-tree2-79fa9cfa","./analysis-workflow-select2-7ecf2f29","./analysis-workflow-select-popover2-29b3b286"],(function(e,a,t,s,i,n,l,r,o,u,p,m,y,c,d,h,f,g,b,E,v,C,T,k,P,D,I,M,V,w,G,A,q,L,U,S,x,R,_,H){"use strict";const F={[t.AnalysisToolParamDataType.GPString]:{icon:"string"},[t.AnalysisToolParamDataType.GPMultiValueString]:{icon:"string"},[t.AnalysisToolParamDataType.GPBoolean]:{icon:"boolean"},[t.AnalysisToolParamDataType.GPDouble]:{icon:"number"},[t.AnalysisToolParamDataType.GPMultiValueDouble]:{icon:"number"},[t.AnalysisToolParamDataType.GPLong]:{icon:"number"},[t.AnalysisToolParamDataType.GPDate]:{icon:"calendar"},[t.AnalysisToolParamDataType.GPLinearUnit]:{icon:"line-straight"},[t.AnalysisToolParamDataType.GPFeatureRecordSetLayer]:{icon:"feature-layer"},[t.AnalysisToolParamDataType.GPMultiValueFeatureRecordSetLayer]:{icon:"feature-layer"},[t.AnalysisToolParamDataType.GPRecordSet]:{icon:"table"},[t.AnalysisToolParamDataType.GPMultiValueRecordSet]:{icon:"tables"},[t.AnalysisToolParamDataType.GPRasterDataLayer]:{icon:"image-layer"},[t.AnalysisToolParamDataType.GPDataFile]:{icon:"data"},[t.AnalysisToolParamDataType.GPField]:{icon:"brackets-curly"},[t.AnalysisToolParamDataType.GPMultiValueField]:{icon:"brackets-curly"},[t.AnalysisToolParamDataType.GPValueTable]:{icon:"brackets-curly"}},O="NEVER_SET",N=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisParameterGroupInputChange=a.createEvent(this,"analysisParameterGroupInputChange",7),this.analysisHelpClick=a.createEvent(this,"analysisHelpClick",7),this.selectionOptionChange=()=>{const e=this.pickerElement;this.dataType=e.selectedOption.value},this.selectedChipsChange=()=>{var e;const[a]=this.pickerElement.selectedChips;this.dataType=null!==(e=a)&&void 0!==e?e:this.dataType,void 0===a&&(this.pickerElement.selectedChips=[this.dataType])},this.parameterValueChanged=()=>{var e;const a=null===(e=this.mappedElement)||void 0===e?void 0:e.value;this.updateValue(a,this.value)},this.setAnalysisRef=e=>{null!=e&&(this.mappedElement=e)},this.groupLabel=void 0,this.value=void 0,this.dataType=void 0,this.required=void 0,this.visibleTypes=[],this.UIparameterInfos=void 0,this.pickerElement=void 0,this.mappedElement=void 0,this.UIparameterMap=new Map,this.data=new Map,this.layerIdMap=new Map}onDataTypeChange(e,a){e!==a&&this.updateValue(this.currentDataMapValue,this.value)}onVisibleTypesChange(e){this.visibleTypes=null!=e?e:[]}onUIparameterInfosChange(e){this.updateWithUIParameterInfos(e)}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await s.fetchComponentLocaleStrings(this.hostElement,a.getAssetPath("."))),this.updateWithUIParameterInfos(this.UIparameterInfos)}async checkValidity(){return Promise.resolve(this.validate())}async validate(){let e;return e=void 0!==this.mappedElement&&"checkValidity"in this.mappedElement?await this.mappedElement.checkValidity():!0!==this.required||void 0!==this.value,e}saveValue(e,a){const t=void 0!==e?this.data.get(e):void 0;void 0!==e&&a!==t&&this.data.set(e,a)}updateValue(e,a){e!==a&&(this.value=e,this.saveValue(this.currentDataType,this.value),this.analysisParameterGroupInputChange.emit({data:e}))}getNewLayerIdState(e,a){return void 0!==e?e:a===O?O:"NO_LAYER"}updateLayerIdMap(e,a){var t;const s=null!==(t=this.layerIdMap.get(e))&&void 0!==t?t:O,i=null==a?void 0:a.id,n=this.getNewLayerIdState(i,s);this.layerIdMap.set(e,n),n!==s&&s!==O&&this.saveValue(e,void 0)}updateUIParameterMap(e){const{dataType:a}=e,s=t.__rest(e,["dataType"]);this.UIparameterMap.set(a,s)}updateDataMap(e){var a;const{dataType:t,value:s,defaultValue:i,mapLayer:n}=e;void 0!==t&&this.updateLayerIdMap(t,n);const l=null!==(a=null!=s?s:this.data.get(t))&&void 0!==a?a:i;this.saveValue(t,l)}updateWithUIParameterInfos(e){this.saveValue(this.dataType,this.value),this.UIparameterMap.clear();const a=null!=e?e:[];for(const e of a)this.updateUIParameterMap(e),this.updateDataMap(e);this.updateValue(this.currentDataMapValue,this.value)}get types(){return[...this.UIparameterMap.keys()].filter((e=>0===this.visibleTypes.length||this.visibleTypes.includes(e)))}get currentDataType(){return void 0!==this.dataType&&!1!==this.types.includes(this.dataType)||(this.dataType=this.types[0]),this.dataType}get currentDataMapValue(){return this.data.get(this.currentDataType)}getChipGroupData(){return this.types.reduce(((e,a)=>{var t,s;const i=this.UIparameterMap.get(a),{icon:n}=F[a],l=null!==(s=null!==(t=null==i?void 0:i.parameterGroupDataTypeLabel)&&void 0!==t?t:this.strings[a])&&void 0!==s?s:a;return e.labels.push(l),e.icons.push(n),e}),{labels:[],icons:[]})}renderChipGroup(){const e=this.types,t=this.getChipGroupData();return a.h("analysis-chip-group",{ref:e=>{this.pickerElement=e},selectionMode:"single",value:e,chipLabel:t.labels,selectedChips:[this.currentDataType],iconLabel:t.icons,label:this.groupLabel,required:!0,onAnalysisChipGroupSelectionChange:this.selectedChipsChange})}renderSelect(){return a.h("calcite-select",{ref:e=>{this.pickerElement=e},label:this.strings.gpSelection,onCalciteSelectChange:this.selectionOptionChange,scale:i.UIDefaults.Scale},a.h("calcite-option-group",{label:this.strings.gpTypes},this.types.map((e=>{var t;return a.h("calcite-option",{key:e,value:e},null!==(t=this.strings[e])&&void 0!==t?t:e)}))))}renderDefaultComponent(){var e;const s=this.currentDataType,i=this.currentDataMapValue,n=null!==(e=this.UIparameterMap.get(this.currentDataType))&&void 0!==e?e:{};return a.h(t.AnalysisPrimitiveParameter,Object.assign({dataType:s},n,{value:i,required:this.required,onSetRef:this.setAnalysisRef,onValueChange:this.parameterValueChanged}))}render(){return a.h(a.Host,{dir:this.dir},a.h("analysis-label",{label:this.groupLabel,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),this.types.length<=2?this.renderChipGroup():this.renderSelect(),this.renderDefaultComponent())}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{dataType:["onDataTypeChange"],visibleTypes:["onVisibleTypesChange"],UIparameterInfos:["onUIparameterInfosChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{--calcite-ui-border-input:var(--analysis-ui-border-input);margin-bottom:var(--analysis-half-spacing)}"}},[1,"analysis-parameter-group",{groupLabel:[513,"group-label"],value:[1032],dataType:[1537,"data-type"],required:[516],visibleTypes:[16],UIparameterInfos:[16],pickerElement:[32],mappedElement:[32],UIparameterMap:[32],data:[32],layerIdMap:[32],checkValidity:[64]}]);function W(){"undefined"!=typeof customElements&&["analysis-parameter-group","analysis-attribute-expression","analysis-boolean-input","analysis-chip-group","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-item-browser","analysis-item-input","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-parameter-group":customElements.get(e)||customElements.define(e,N);break;case"analysis-attribute-expression":customElements.get(e)||n.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||l.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||r.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||o.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||u.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||p.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||m.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||y.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||c.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||d.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||h.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||f.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||g.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||b.defineCustomElement();break;case"analysis-label":customElements.get(e)||E.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||v.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||C.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||T.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||k.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||P.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||D.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||I.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||M.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||V.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||w.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||G.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||A.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||q.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||L.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||U.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||S.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||x.defineCustomElement();break;case"analysis-tree":customElements.get(e)||R.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||_.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||H.defineCustomElement()}}))}W(),e.AnalysisParameterGroup=N,e.defineCustomElement=W}));