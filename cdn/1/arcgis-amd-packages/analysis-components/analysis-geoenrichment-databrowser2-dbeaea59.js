define(["exports","./index-86304dcd","./index2-600fb1b2"],(function(e,t,i){"use strict";const a=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.analysisDataBrowserSelectionChange=t.createEvent(this,"analysisDataBrowserSelectionChange",7),this.analysisDataBrowserClose=t.createEvent(this,"analysisDataBrowserClose",7),this.onBackButtonClick=async()=>{void 0!==this.dataBrowserElement&&await this.dataBrowserElement.back()},this.close=()=>{void 0!==this.containerRef&&(this.containerRef.open=!1)},this.onSelectButtonClick=()=>{var e,t,a,s,o;const n=this.dataBrowserElement.widget._shoppingCart._content,r=[];Object.values(n).map((e=>{var t;!1===i.isEmptyDataItem(null===(t=null==e?void 0:e.group)||void 0===t?void 0:t.value)&&!0===this.dataBrowserElement.widget.selection.includes(e.group.value)&&r.push({value:e.group.value,label:e.label})}));const l=this.dataBrowserElement.widget.countryID,c=this.dataBrowserElement.widget.hierarchyID,d=null===(s=null===(a=null===(t=null===(e=this.dataBrowserElement.widget._pages)||void 0===e?void 0:e.categories)||void 0===t?void 0:t._countrySelect)||void 0===a?void 0:a._countries)||void 0===s?void 0:s[l],h=null===(o=null==d?void 0:d.hierarchies)||void 0===o?void 0:o.find((e=>e.ID===c)),u=null==d?void 0:d.name,v=null==h?void 0:h.alias,m={selectedValues:r,countryId:l,hierarchyId:c,countryAlias:u,hierarchyAlias:v};this.analysisDataBrowserSelectionChange.emit(m),this.close()},this.onClose=()=>{this.analysisDataBrowserClose.emit()},this.onOpen=()=>{void 0!==this.dataBrowserElement&&void 0!==this.dataBrowserElement.widget&&!1===i.isEmptyDataItem(this.value)&&(this.dataBrowserElement.countryId=this.countryId,this.dataBrowserElement.widget.hierarchyID=this.hierarchyId,this.dataBrowserElement.widget.selection=this.value)},this.showBackButton=!1,this.value=void 0,this.countryId=void 0,this.hierarchyId=void 0,this.portal=void 0}portalChange(e){var t,i,a;this.geoenrichmentUrl=null!==(a=null===(i=null===(t=null==e?void 0:e.helperServices)||void 0===t?void 0:t.geoenrichment)||void 0===i?void 0:i.url)&&void 0!==a?a:"https://geoenrichdev.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"}async componentWillLoad(){({strings:this.strings,locale:this.locale,dir:this.dir}=await i.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),this.portalChange(this.portal)}componentDidLoad(){try{setTimeout((()=>requestAnimationFrame((()=>{var e;return null===(e=this.containerRef)||void 0===e?void 0:e.setFocus()}))),1)}catch(e){}}render(){return this.renderModal()}renderModal(){return t.h("calcite-modal",{class:"databrowser-modal-variables",open:!0,escapeDisabled:!0,outsideCloseDisabled:!0,focusTrapDisabled:!0,onCalciteModalOpen:this.onOpen,onCalciteModalClose:this.onClose,ref:e=>this.containerRef=e},t.h("div",{slot:"header"},this.strings.header),t.h("div",{slot:"content",class:"databrowser-modal-content"},this.renderDataBrowser()),!0===this.showBackButton&&t.h("calcite-button",{slot:"back",kind:"neutral",appearance:"outline",iconStart:"chevron-left",width:"full",onClick:this.onBackButtonClick},this.strings.back),t.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:this.close},this.strings.cancel),t.h("calcite-button",{slot:"primary",width:"full",onClick:this.onSelectButtonClick},this.strings.select))}renderDataBrowser(){var e;return t.h("arcgis-geoenrichment-databrowser",{locale:this.locale,class:{"analysis--rtl":"rtl"===this.dir},allowHierarchies:!0,countryId:null!==(e=this.countryId)&&void 0!==e?e:"US",geoenrichmentUrl:this.geoenrichmentUrl,displayAllGlobalVariables:!0,hideApplyButton:!0,hideBackButton:!0,hideCancelButton:!0,hidePageBackButton:!0,ref:e=>{this.dataBrowserElement=e},onPageLoaded:()=>{var e,t,a,s;return this.showBackButton=!1===i.isEmptyDataItem(null===(t=null===(e=this.dataBrowserElement)||void 0===e?void 0:e.widget)||void 0===t?void 0:t.currentPageId)&&"categories"!==(null===(s=null===(a=this.dataBrowserElement)||void 0===a?void 0:a.widget)||void 0===s?void 0:s.currentPageId)}})}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{portal:["portalChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-ui-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height:30vh;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.databrowser-modal-content{height:100%}.databrowser-modal-variables{--calcite-modal-height:min(700px, calc(60vh + 100px));--calcite-modal-content-padding:0px}.esri4GEDataBrowser_Title{display:none}.esri4GEWizard_Buttons{display:flex}.esri4GEPopup .esri4GEOnDemandSelectFlowListPopup .esri4GEOnDemandSelectVeryTallList500Popup{top:20px}"}},[0,"analysis-geoenrichment-databrowser",{value:[8],countryId:[513,"country-id"],hierarchyId:[513,"hierarchy-id"],portal:[16],showBackButton:[32]}]);function s(){"undefined"!=typeof customElements&&["analysis-geoenrichment-databrowser"].forEach((e=>{"analysis-geoenrichment-databrowser"===e&&(customElements.get(e)||customElements.define(e,a))}))}s(),e.AnalysisGeoenrichmentDatabrowser=a,e.defineCustomElement=s}));