/*! For license information please see arcgis-charts-action-bar.js.LICENSE.txt */
define(["exports","./interfaces-ae2b4c35","esri/request","esri/rest/support/FeatureSet","esri/layers/support/Field","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/renderers/support/jsonUtils","esri/portal/Portal","esri/core/promiseUtils","esri/rest/support/Query","esri/rest/support/StatisticDefinition","esri/TimeExtent"],(function(t,e,i,a,o,s,l,n,c,h,r,d,u){"use strict";function v(t,e){const i=document.createElement("calcite-tooltip");return i.innerHTML=t,i.style.setProperty("opacity","1"),void 0!==e&&(i.referenceElement=e),document.body.appendChild(i),i}function p(t){return t?.remove(),null}const A=e.proxyCustomElement(class extends e.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.arcgisChartsDefaultActionSelect=e.createEvent(this,"arcgisChartsDefaultActionSelect",7),this.arcgisChartsActionBarToggle=e.createEvent(this,"arcgisChartsActionBarToggle",7),this.expandAction=null,this.handleDefaultActionClick=t=>{const i=t.target,a={actionId:i.id,actionActive:!1};switch(i.id){case e.DefaultChartActions.Legend:this.activateLegend=!1===this.activateLegend,a.actionActive=this.activateLegend;break;case e.DefaultChartActions.RotateChart:this.activateRotateChart=!1===this.activateRotateChart,a.actionActive=this.activateRotateChart;break;case e.DefaultChartActions.FilterBySelection:this.activateFilterBySelection=!1===this.activateFilterBySelection,a.actionActive=this.activateFilterBySelection;break;case e.DefaultChartActions.FilterByExtent:this.activateFilterByExtent=!1===this.activateFilterByExtent,a.actionActive=this.activateFilterByExtent;break;case e.DefaultChartActions.Selection:this.activateSelection=!0,this.activateZoom=!1,a.actionActive=this.activateSelection;break;case e.DefaultChartActions.Zoom:this.activateSelection=!1,this.activateZoom=!0,a.actionActive=this.activateZoom;break;case e.DefaultChartActions.ClearSelection:this.disableClearSelection=!0,a.actionActive=this.activateClearSelection}this.arcgisChartsDefaultActionSelect.emit(a)},this.handleCalciteActionBarToggle=()=>{this.expanded=this.calciteActionBar.expanded,this.setCustomActionsExpanded(),this.arcgisChartsActionBarToggle.emit(this.expanded)},this.handleMouseOver=t=>{if(!1===this.calciteActionBar.expanded){const e=t.target;let i;void 0!==this.actionTooltip&&(this.actionTooltip=p(this.actionTooltip)),"CALCITE-ACTION"===e?.tagName?i=e:"DIV"===e?.tagName&&(i=e.firstChild),void 0!==i&&(this.actionTooltip=v(i.text,i),this.actionTooltip.open=!0)}else this.actionTooltip=p(this.actionTooltip)},this.handleMouseOut=()=>{null!==this.actionTooltip&&(this.actionTooltip=p(this.actionTooltip))},this.handleSlotChange=t=>{const e=t.target.assignedElements();for(const t of e)t.onmouseover=this.handleMouseOver},this.forceDisableActions=!1,this.activateLegend=!1,this.disableLegend=!1,this.legendTitle=void 0,this.activateRotateChart=!1,this.disableRotateChart=!1,this.rotateChartTitle=void 0,this.activateFilterBySelection=!1,this.disableFilterBySelection=!0,this.filterBySelectionTitle=void 0,this.activateFilterByExtent=!1,this.disableFilterByExtent=!1,this.filterByExtentTitle=void 0,this.activateSelection=!1,this.disableSelection=!1,this.selectionTitle=void 0,this.activateZoom=!1,this.disableZoom=!1,this.zoomTitle=void 0,this.activateFullExtent=!1,this.disableFullExtent=!1,this.fullExtentTitle=void 0,this.activateClearSelection=!1,this.disableClearSelection=!1,this.clearSelectionTitle=void 0,this.activateSwitchSelection=!1,this.disableSwitchSelection=!1,this.switchSelectionTitle=void 0,this.expanded=!1,this.actionBarHideActionsProps=void 0,this.actionTooltip=null}renderDefaultActions(){return[!0!==this.actionBarHideActionsProps?.hideLegend||!0!==this.actionBarHideActionsProps?.hideRotateChart?e.h("calcite-action-group",null,!0!==this.actionBarHideActionsProps?.hideLegend?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.Legend,text:this.legendTitle??this.strings?.legend,active:this.activateLegend,disabled:this.disableLegend||this.forceDisableActions,onClick:this.handleDefaultActionClick},e.h("calcite-icon",{icon:"legend",scale:"s",flipRtl:!0}))):null,!0!==this.actionBarHideActionsProps?.hideRotateChart?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.RotateChart,icon:"rotate",text:this.rotateChartTitle??this.strings?.rotateChart,active:this.activateRotateChart,disabled:this.disableRotateChart||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null):null,!0!==this.actionBarHideActionsProps?.hideFilterBySelection||!0!==this.actionBarHideActionsProps?.hideFilterByExtent?e.h("calcite-action-group",null,!0!==this.actionBarHideActionsProps?.hideFilterBySelection?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.FilterBySelection,icon:"selection-filter",text:this.filterBySelectionTitle??this.strings?.filterBySelection,active:this.activateFilterBySelection,disabled:this.disableFilterBySelection||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null,!0!==this.actionBarHideActionsProps?.hideFilterByExtent?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.FilterByExtent,icon:"extent-filter",text:this.filterByExtentTitle??this.strings?.filterByExtent,active:this.activateFilterByExtent,disabled:this.disableFilterByExtent||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null):null,!0!==this.actionBarHideActionsProps?.hideSelection||!0!==this.actionBarHideActionsProps?.hideZoom||!0!==this.actionBarHideActionsProps?.hideFullExtent||!0!==this.actionBarHideActionsProps?.hideClearSelection||!0!==this.actionBarHideActionsProps?.hideSwitchSelection?e.h("calcite-action-group",null,!0!==this.actionBarHideActionsProps?.hideZoom?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.Zoom,icon:"magnifying-glass",text:this.zoomTitle??this.strings?.zoom,active:this.activateZoom,disabled:this.disableZoom||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null,!0!==this.actionBarHideActionsProps?.hideSelection?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.Selection,icon:"cursor-selection",text:this.selectionTitle??this.strings?.selection,active:this.activateSelection,disabled:this.disableSelection||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null,!0!==this.actionBarHideActionsProps?.hideClearSelection?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.ClearSelection,icon:"erase",text:this.clearSelectionTitle??this.strings?.clearSelection,active:this.activateClearSelection,disabled:this.disableClearSelection||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null,!0!==this.actionBarHideActionsProps?.hideFullExtent?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.FullExtent,icon:"zoom-out-fixed",text:this.fullExtentTitle??this.strings?.fullExtent,active:this.activateFullExtent,disabled:this.disableFullExtent||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null,!0!==this.actionBarHideActionsProps?.hideSwitchSelection?e.h("div",{onMouseOver:this.handleMouseOver},e.h("calcite-action",{id:e.DefaultChartActions.SwitchSelection,icon:"arrow-right-left",text:this.switchSelectionTitle??this.strings?.switchSelection,active:this.activateSwitchSelection,disabled:this.disableSwitchSelection||this.forceDisableActions,onClick:this.handleDefaultActionClick})):null):null]}setCustomActionsExpanded(){this.el.querySelectorAll("calcite-action").forEach((t=>{t.textEnabled=this.expanded}))}render(){return e.h(e.Host,null,e.h("calcite-action-bar",{class:"action-bar",onCalciteActionBarToggle:this.handleCalciteActionBarToggle,onMouseOut:this.handleMouseOut,expanded:this.expanded,ref:t=>{this.calciteActionBar=t},messageOverrides:{expand:this.strings.expand,collapse:this.strings.collapse},"overflow-actions-disabled":!0},e.h("slot",{name:e.Slot.customActionTop,onSlotchange:this.handleSlotChange}),this.renderDefaultActions(),e.h("slot",{name:e.Slot.customActionBelow,onSlotchange:this.handleSlotChange})))}async componentWillLoad(){({strings:this.strings}=await e.fetchComponentLocaleStrings(this.el,e.getAssetPath(".")))}componentDidRender(){this.handleExpandTooltip()}disconnectedCallback(){this.actionTooltip?.remove()}handleExpandTooltip(){null===this.expandAction&&(this.expandAction=this.calciteActionBar.shadowRoot?.querySelector("calcite-action")??null,null!==this.expandAction&&(this.expandAction.addEventListener("mouseenter",(()=>{!1===this.calciteActionBar?.expanded&&null!==this.expandAction&&!1===document.body.contains(this.actionTooltip)&&(this.actionTooltip=v(this.strings.expand,this.expandAction),this.actionTooltip.open=!0)})),this.expandAction.addEventListener("mouseleave",(()=>{!1===this.calciteActionBar?.expanded&&null!==this.actionTooltip&&(this.actionTooltip=p(this.actionTooltip))})),this.expandAction.addEventListener("click",(()=>{!0===this.calciteActionBar?.expanded&&null!==this.actionTooltip&&(this.actionTooltip=p(this.actionTooltip))}))))}static get assetsDirs(){return["t9n"]}get el(){return this}static get style(){return".action-bar{display:flex;flex-direction:column;height:100%;border-right:1px solid var(--calcite-ui-border-2);overflow-x:hidden}"}},[1,"arcgis-charts-action-bar",{forceDisableActions:[516,"force-disable-actions"],activateLegend:[1540,"activate-legend"],disableLegend:[516,"disable-legend"],legendTitle:[513,"legend-title"],activateRotateChart:[1540,"activate-rotate-chart"],disableRotateChart:[516,"disable-rotate-chart"],rotateChartTitle:[513,"rotate-chart-title"],activateFilterBySelection:[1540,"activate-filter-by-selection"],disableFilterBySelection:[516,"disable-filter-by-selection"],filterBySelectionTitle:[513,"filter-by-selection-title"],activateFilterByExtent:[1540,"activate-filter-by-extent"],disableFilterByExtent:[516,"disable-filter-by-extent"],filterByExtentTitle:[513,"filter-by-extent-title"],activateSelection:[1540,"activate-selection"],disableSelection:[516,"disable-selection"],selectionTitle:[513,"selection-title"],activateZoom:[1540,"activate-zoom"],disableZoom:[516,"disable-zoom"],zoomTitle:[513,"zoom-title"],activateFullExtent:[516,"activate-full-extent"],disableFullExtent:[516,"disable-full-extent"],fullExtentTitle:[513,"full-extent-title"],activateClearSelection:[516,"activate-clear-selection"],disableClearSelection:[516,"disable-clear-selection"],clearSelectionTitle:[513,"clear-selection-title"],activateSwitchSelection:[516,"activate-switch-selection"],disableSwitchSelection:[516,"disable-switch-selection"],switchSelectionTitle:[513,"switch-selection-title"],expanded:[1540],actionBarHideActionsProps:[16],actionTooltip:[32]}]);function f(){"undefined"!=typeof customElements&&["arcgis-charts-action-bar"].forEach((t=>{"arcgis-charts-action-bar"===t&&(customElements.get(t)||customElements.define(t,A))}))}f();const C=A,g=f;t.A=A,t.ArcgisChartsActionBar=C,t.defineCustomElement=g,Object.defineProperty(t,"__esModule",{value:!0})}));