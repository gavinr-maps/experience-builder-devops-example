System.register(["jimu-core"],function(e,t){var n={};return{setters:[function(e){n.appActions=e.appActions,n.getAppStore=e.getAppStore,n.i18n=e.i18n,n.moduleLoader=e.moduleLoader,n.portalUrlUtils=e.portalUrlUtils,n.translatedLocales=e.translatedLocales}],execute:function(){e((()=>{"use strict";var e={244:e=>{e.exports=n}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};o.r(l),o.d(l,{TemplateType:()=>r,getAnchoredWindowTemplates:()=>y,getAppTemplates:()=>p,getBlockTemplates:()=>x,getFixedModalWindowTemplates:()=>S,getFixedNonModalWindowTemplates:()=>w,getFooterTemplates:()=>A,getFullScreenGridPageTemplates:()=>h,getFullScreenPageTemplates:()=>m,getGridTemplates:()=>C,getHeaderTemplates:()=>L,getScreenGroupTemplates:()=>P,getScreenTemplates:()=>$,getScrollingPageTemplates:()=>b,getTemplateCapabilities:()=>f,getTemplateCapabilitiesOnlyInCurrentLocale:()=>g,getTemplateConfig:()=>j,getTemplatesByCapabilityTags:()=>v,getWindowTemplates:()=>T,init:()=>d,loadI18nMessage:()=>F});var r,i=o(244);function a(e,t){var n;if(!t||0===(null==t?void 0:t.length)||!e)return!0;const o=(null===(n=null==e?void 0:e.tags)||void 0===n?void 0:n.map(e=>e.toLowerCase()))||[];if(0===o.length)return!1;let l=t;"string"!=typeof t[0]&&(l=null==t?void 0:t.map(e=>{var t;return null===(t=null==e?void 0:e.value)||void 0===t?void 0:t[0]}));let r=!0;return null==l||l.some(e=>!(null==o?void 0:o.includes(null==e?void 0:e.toLowerCase()))&&(r=!1,!0)),r}!function(e){e.Block="block",e.Grid="grid-widget",e.Header="header",e.Footer="footer",e.FullScreenPage="full-screen-page",e.FullScreenGridPage="full-screen-grid-page",e.ScrollingPage="scrolling-page",e.Window="window",e.ScreenGroup="screen-group",e.Screen="screen",e.App="app"}(r||(r={}));var u=function(e,t,n,o){return new(n||(n=Promise))(function(l,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function a(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,a)}u((o=o.apply(e,t||[])).next())})};let c=null,s={};function d(){return u(this,void 0,void 0,function*(){return yield F(),yield function(){if(c)return c;const e=(0,i.getAppStore)().getState().appContext.translatedLocale,t=i.moduleLoader.resolveModuleFullPath("templates/");return c=fetch(`${t}templates-info.json`).then(e=>e.json()).then(n=>(s=n,Object.keys(s).forEach(n=>{s[n]=s[n].filter(e=>{const t=(0,i.getAppStore)().getState().portalUrl;return!i.portalUrlUtils.isAGOLDomain(t)||!e.notSupportAGOL}),s[n].forEach(n=>{const o=`${t}${n.type}/${n.name}`;n.label=n.i18nLabel[e]||n.label||n.name,n.description=n.i18nDescription[e]||n.description||"",n.thumbnail=`${o}/${n.thumbnail}`,n.gifThumbnail&&(n.gifThumbnail=`${o}/${n.gifThumbnail}`),n.configUrl=`${o}/config.json`})}),s)),c}()})}function p(e,t,n){const o=s.app||[];if(!(n&&0!==(null==n?void 0:n.length)||e||t&&0!==(null==t?void 0:t.length)))return o;return o.filter(o=>{var l,r;const i=(null===(l=null==o?void 0:o.categoriesTags)||void 0===l?void 0:l.map(e=>e.toLowerCase()))||[];let u=!0;(null==n?void 0:n.length)>0&&(u=a(o,n));let c=!0;if((null==t?void 0:t.length)>0){c=t.filter(e=>i.includes(null==e?void 0:e.toLowerCase())).length>0}let s=!0;if(e){e=null==e?void 0:e.toLowerCase();const t=null===(r=null==o?void 0:o.label)||void 0===r?void 0:r.toLowerCase();s=t&&t.includes(e)}return u&&s&&c})}function f(e){const t=(0,i.getAppStore)().getState().appContext.translatedLocale,n=(null==s?void 0:s[e])||[];let o=[];return n.forEach(e=>{const n=(null==e?void 0:e.capabilities)||{};let l=(null==n?void 0:n.default)||[];t&&(l=(null==n?void 0:n[t])||[]);const r=l.map((e,o)=>{const l=function(e,t,n){const o=[];return Object.keys(e).forEach(l=>{if(n===l||"default"===l&&"en"!==n){const n=e[l];o.push(n[t])}}),o}(n,o,t);return{label:e,value:l}});(null==r?void 0:r.length)>0&&(o=o.concat(r))}),o=function(e){const t=new Set,n=[];return e.forEach(e=>{t.has(e.label)||(t.add(e.label),n.push(e))}),n}(o),o}function g(e){const t=(0,i.getAppStore)().getState().appContext.translatedLocale;let n=(null==s?void 0:s[e])||[];e===r.Window&&(n=T());let o=[];return n.forEach(e=>{const n=(null==e?void 0:e.capabilities)||{};let l=(null==n?void 0:n.default)||[];t&&(l=(null==n?void 0:n[t])||[]),o=o.concat(l)}),o=Array.from(new Set(o)),o}function v(e,t){let n=e;return(null==t?void 0:t.length)>0&&(n=e.filter(e=>a(e,t))),n}function m(e=!0){const t=s["full-screen-page"]||[];return e?t:t.filter(e=>!e.name.startsWith("blank"))}function h(e=!0){const t=s["full-screen-grid-page"]||[];return e?t:t.filter(e=>!e.name.startsWith("blank"))}function b(e=!0){const t=s["scrolling-page"]||[];return e?t:t.filter(e=>!e.name.startsWith("blank"))}function S(e=!0){const t=s["fixed-modal-window"]||[];return e?t:t.filter(e=>!e.name.startsWith("blank"))}function w(){return s["fixed-non-modal-window"]||[]}function y(){return s["anchored-window"]||[]}function T(e=!0){return S(e).concat(w()).concat(y())}function L(){return s.header||[]}function A(){return s.footer||[]}function x(){return s.block||[]}function C(){return s["grid-widget"]||[]}function P(){return s["screen-group"]||[]}function $(){return s.screen||[]}function j(e,t){return u(this,void 0,void 0,function*(){const n=i.moduleLoader.resolveModuleFullPath("templates/");return yield fetch(`${n}${e}/${t}/config.json`).then(e=>u(this,void 0,void 0,function*(){return yield e.json()})).then(e=>e)})}function F(){return u(this,void 0,void 0,function*(){const e=(0,i.getAppStore)().getState().appContext.locale;return yield function(e,t){return u(this,void 0,void 0,function*(){if(e=i.i18n.getLocaleToLoad(e,t)){const t=i.moduleLoader.resolveModuleFullPath("templates/");return yield i.i18n.loadLocaleMessages(`${t}/translations`,e).then(e=>e)}return Promise.resolve({})})}(e,i.translatedLocales).then(e=>(e&&(0,i.getAppStore)().dispatch(i.appActions.i18nMessagesLoaded("templates",e)),i.i18n.resetIntls(),e))})}return l})())}}});