System.register(["jimu-core"],(function(e,t){var n={};return{setters:[function(e){n.appActions=e.appActions,n.getAppStore=e.getAppStore,n.i18n=e.i18n,n.moduleLoader=e.moduleLoader,n.translatedLocales=e.translatedLocales}],execute:function(){e((()=>{"use strict";var e={891:e=>{e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{r.r(o),r.d(o,{TemplateType:()=>e,getAppTemplates:()=>u,getBlockTemplates:()=>m,getFooterTemplates:()=>f,getFullScreenGridPageTemplates:()=>s,getFullScreenPageTemplates:()=>c,getGridTemplates:()=>h,getHeaderTemplates:()=>g,getScreenGroupTemplates:()=>v,getScreenTemplates:()=>S,getScrollingPageTemplates:()=>p,getTemplateConfig:()=>y,getWindowTemplates:()=>d,init:()=>a,loadI18nMessage:()=>T});var e,t=r(891);!function(e){e.Block="block",e.Grid="grid-widget",e.Header="header",e.Footer="footer",e.FullScreenPage="full-screen-page",e.FullScreenGridPage="full-screen-grid-page",e.ScrollingPage="scrolling-page",e.Window="window",e.ScreenGroup="screen-group",e.Screen="screen",e.App="app"}(e||(e={}));var n=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,a)}u((r=r.apply(e,t||[])).next())}))};let i=null,l={};function a(){return n(this,void 0,void 0,(function*(){return yield T(),yield function(){if(i)return i;const e=(0,t.getAppStore)().getState().appContext.translatedLocale,n=t.moduleLoader.resolveModuleFullPath("templates/");return i=fetch(`${n}templates-info.json`).then((e=>e.json())).then((t=>(l=t,Object.keys(l).forEach((t=>{l[t].forEach((t=>{const r=`${n}${t.type}/${t.name}`;t.label=t.i18nLabel[e]||t.label||t.name,t.description=t.i18nDescription[e]||t.description||"",t.thumbnail=`${r}/${t.thumbnail}`,t.gifThumbnail&&(t.gifThumbnail=`${r}/${t.gifThumbnail}`),t.configUrl=`${r}/config.json`}))})),l))),i}()}))}function u(e){const t=l.app||[];return e&&0!==(null==e?void 0:e.length)?t.filter((t=>{const n=(null==t?void 0:t.tags)||[];return e.filter((e=>n.includes(e))).length>0})):t}function c(){return l["full-screen-page"]||[]}function s(){return l["full-screen-grid-page"]||[]}function p(){return l["scrolling-page"]||[]}function d(){return l.window||[]}function g(){return l.header||[]}function f(){return l.footer||[]}function m(){return l.block||[]}function h(){return l["grid-widget"]||[]}function v(){return l["screen-group"]||[]}function S(){return l.screen||[]}function y(e,t){return n(this,void 0,void 0,(function*(){return yield fetch(`../templates/${e}/${t}/config.json`).then((e=>n(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>e))}))}function T(){return n(this,void 0,void 0,(function*(){const e=(0,t.getAppStore)().getState().appContext.locale;return yield function(e,r){return n(this,void 0,void 0,(function*(){if(e=t.i18n.getLocaleToLoad(e,r)){const n=t.moduleLoader.resolveModuleFullPath("templates/");return yield t.i18n.loadLocaleMessages(`${n}/translations`,e).then((e=>e))}return Promise.resolve({})}))}(e,t.translatedLocales).then((e=>(e&&(0,t.getAppStore)().dispatch(t.appActions.i18nMessagesLoaded("templates",e)),t.i18n.resetIntls(),e)))}))}})(),o})())}}}));