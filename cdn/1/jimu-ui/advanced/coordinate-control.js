System.register(["esri/Graphic","esri/core/Handles","esri/geometry/Point","esri/layers/GraphicsLayer","esri/request","esri/rest/geometryService","esri/rest/locator","esri/symbols/support/jsonUtils","esri/widgets/CoordinateConversion/CoordinateConversionViewModel","esri/widgets/CoordinateConversion/support/Conversion","esri/widgets/CoordinateConversion/support/Format","esri/widgets/CoordinateConversion/support/formatUtils","jimu-core","jimu-theme","jimu-ui"],(function(t,e){var s={},o={},i={},n={},a={},r={},l={},p={},d={},c={},u={},h={},m={},g={},f={};return{setters:[function(t){s.default=t.default},function(t){o.default=t.default},function(t){i.default=t.default},function(t){n.default=t.default},function(t){a.default=t.default},function(t){r.default=t.default},function(t){l.default=t.default},function(t){p.default=t.default},function(t){d.default=t.default},function(t){c.default=t.default},function(t){u.default=t.default},function(t){h.default=t.default},function(t){m.React=t.React,m.classNames=t.classNames,m.css=t.css,m.getAppStore=t.getAppStore,m.injectIntl=t.injectIntl,m.jsx=t.jsx,m.utils=t.utils},function(t){g.registerStyles=t.registerStyles,g.withStyles=t.withStyles},function(t){f.AlertPopup=t.AlertPopup,f.Button=t.Button,f.Label=t.Label,f.ListGroup=t.ListGroup,f.ListGroupItem=t.ListGroupItem,f.Option=t.Option,f.Popper=t.Popper,f.Row=t.Row,f.Select=t.Select,f.TextArea=t.TextArea,f.TextInput=t.TextInput,f.defaultMessages=t.defaultMessages}],execute:function(){t((()=>{var t={20864:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13 6.133c0 .598-.28 1.46-.825 2.51-.53 1.02-1.247 2.102-1.981 3.102A45.718 45.718 0 0 1 8 14.492a48.01 48.01 0 0 1-2.194-2.747c-.734-1-1.451-2.081-1.98-3.102C3.28 7.593 3 6.731 3 6.133 3 3.277 5.26 1 8 1s5 2.277 5 5.133Zm1 0c0 2.685-3.768 7.311-5.332 9.115C8.258 15.722 8 16 8 16s-.258-.279-.668-.752C5.768 13.444 2 8.819 2 6.133 2 2.746 4.686 0 8 0s6 2.746 6 6.133ZM10 5.5a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></svg>'},41553:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994h2.839Zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48Zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" clip-rule="evenodd"></path></svg>'},62502:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 1h4.5v1H2.707l3.647 3.646-.708.708L2 2.707V5.5H1V1Zm1 1Zm13 13h-4.5v-1h2.793l-3.647-3.646.707-.708L14 13.293V10.5h1V15Zm-1-1ZM1 10.5V15h4.5v-1H2.707l3.647-3.646-.708-.708L2 13.293V10.5H1ZM2 14ZM15 1v4.5h-1V2.707l-3.646 3.647-.708-.708L13.293 2H10.5V1H15Zm-1 1Z" clip-rule="evenodd"></path></svg>'},55339:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z"></path></svg>'},50970:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5ZM5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1Zm0 1v9h9V5H5Z" clip-rule="evenodd"></path></svg>'},27218:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8Z"></path></svg>'},94129:t=>{"use strict";t.exports=s},14258:t=>{"use strict";t.exports=o},8294:t=>{"use strict";t.exports=i},42231:t=>{"use strict";t.exports=n},68831:t=>{"use strict";t.exports=a},98442:t=>{"use strict";t.exports=r},50724:t=>{"use strict";t.exports=l},45818:t=>{"use strict";t.exports=p},62969:t=>{"use strict";t.exports=d},30476:t=>{"use strict";t.exports=c},69715:t=>{"use strict";t.exports=u},62522:t=>{"use strict";t.exports=h},48891:t=>{"use strict";t.exports=m},34796:t=>{"use strict";t.exports=g},30726:t=>{"use strict";t.exports=f}},e={};function v(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,v),i.exports}v.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return v.d(e,{a:e}),e},v.d=(t,e)=>{for(var s in e)v.o(e,s)&&!v.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},v.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),v.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var y={};return(()=>{"use strict";v.r(y),v.d(y,{CoordinateControl:()=>Z});var t=v(34796),e=v(48891),s=v(30726),o=v(69715),i=v(50724);const n=(t,e)=>{const s=t[0]?[t[0]]:[];for(let o=1;o<t.length;o++){const i=t[o];let n=!1;for(let t=0;t<s.length;t++)if(i[e]===s[t][e]){n=!0;break}n||s.push(i)}return s};function a(t,e){return new o.default({name:"address",getConversionStrategy:()=>"server",conversionInfo:{convert:s=>new Promise(((o,n)=>{if(i.default)return i.default.locationToAddress(t,{location:s},{query:{}}).then((t=>{o({coordinate:t&&t.address&&t.score&&t.score>=e?t.address:"",location:s})}),(()=>{o({coordinate:"",location:s})}));o({coordinate:"",location:s})})),reverseConvert:s=>new Promise(((o,n)=>{if(i.default)return i.default.addressToLocations(t,{address:{SingleLine:s}},{query:{}}).then((t=>{t&&t.length>0&&(t=(t=t.filter((t=>t.score>=e&&t.location))).sort(((t,e)=>e.score-t.score)),o(t[0])),o(null)}),(()=>{o(null)}));o(null)}))},coordinateSegments:[{alias:"L",description:"Address",searchPattern:/.*/}],defaultPattern:"L"})}function r(t){const e=t;return new Promise(((t,s)=>{const o=[{name:"dd",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([°˚º^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([°˚º^~*]*)([EW\+\-\s])*)$/].map((function(t){return t.source})).join("")),notationType:"DDLatLongNotation",conversionType:"dd"},{name:"ddrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([°˚º^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([°˚º^~*]*)([NS\+\-\s])*)$/].map((function(t){return t.source})).join("")),notationType:"DDLongLatNotation",conversionType:"dd"},{name:"ddm",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[°˚º^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['′\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[°˚º^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['′\s_]*([EW\+\-\s])*)/,/[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DDMLatLongNotation",conversionType:"ddm"},{name:"ddmrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[°˚º^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['′\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[°˚º^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['′\s_]*([NS\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DDMLongLatNotation",conversionType:"ddm"},{name:"dms",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[°˚º^~*\s\-_]+([0-5]?\d|\d)['′\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["¨˝\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[°˚º^~*\s\-_]+([0-5]\d|\d)['′\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["¨˝\s_]*([EW\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DMSLatLongNotation",conversionType:"dms"},{name:"dmsrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[°˚º^~*\s\-_]+([0-5]\d|\d)['′\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["¨˝\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[°˚º^~*\s\-_]+([0-5]?\d|\d)['′\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["¨˝\s_]*([NS\+\-\s])*)[\s]*$/].map((function(t){return t.source})).join("")),notationType:"DMSLongLatNotation",conversionType:"dms"},{name:"mgrs",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map((function(t){return t.source})).join("")),notationType:"MGRSNotation",conversionType:"mgrs"},{name:"utm",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map((function(t){return t.source})).join("")),notationType:"UTMBandNotation",conversionType:"utm"}].filter((t=>t.pattern.test(e)));o.length>0?t(o):t([])}))}var l=v(14258),p=v(30476),d=v(62969),c=v(8294),u=v(94129),h=v(42231),m=v(45818),g=v(62522),f=v(98442),C=v(68831),w=v(20864),b=v.n(w);const x=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:b()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var S=v(50970),O=v.n(S);const P=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:O()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var j=v(62502),M=v.n(j);const I=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:M()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var N=v(41553),A=v.n(N);const L=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:A()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var E=v(55339),R=v.n(E);const T=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:R()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var k=v(27218),V=v.n(k);const F=t=>{const s=window.SVG,{className:o}=t,i=function(t,e){var s={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(s[o[i]]=t[o[i]])}return s}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",o);return s?e.React.createElement(s,Object.assign({className:n,src:V()},i)):e.React.createElement("svg",Object.assign({className:n},i))};var U=function(t,e,s,o){return new(s||(s=Promise))((function(i,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function r(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((o=o.apply(t,e||[])).next())}))};const B="dd",W=e.utils.getGeometryService(),G={type:"esriPMS",angle:0,xoffset:2,yoffset:8,contentType:"image/png",imageData:"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",url:"https://static.arcgis.com/images/Symbols/Basic/BlueShinyPin.png",height:24,width:24};class H extends e.React.PureComponent{constructor(t){var o;super(t),this._inputTextbox=e.React.createRef(),this._copyInputTextbox=e.React.createRef(),this.getSuggestionsTimer=null,this.componentDidMount=()=>{this._inputTextbox.current.focus(),this._isMounted=!0,this.state.coordinateVM||(this.validateGeocodeUrl(),this.createAPIWidget())},this.validateGeocodeUrl=()=>{this.validateGeocodeUrlForSuggestion(this.state.locatorUrl).then((t=>{this.setState({canSuggest:t})}))},this.validateGeocodeUrlForSuggestion=t=>U(this,void 0,void 0,(function*(){return new Promise((e=>{try{(0,C.default)(t,{query:{f:"json"},responseType:"json"}).then((t=>{var s;let o=!1;(null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.capabilities.includes("Suggest"))&&(o=!0),e(o)}),(t=>{console.error(t),e(!1)}))}catch(t){console.error(t),e(!1)}}))})),this.componentDidUpdate=(t,e)=>{var s,o,i,n,r;if(this.state.coordinateVM)if(t.jimuMapview&&null===this.props.jimuMapview||this.props.jimuMapview&&(null===(s=this.props.jimuMapview)||void 0===s?void 0:s.id)!==(null===(o=t.jimuMapview)||void 0===o?void 0:o.id))this.drawingLayer&&this.drawingLayer.removeAll(),null===(i=this.state.coordinateVM)||void 0===i||i.destroy(),null===(n=this.drawingLayer)||void 0===n||n.destroy(),null===(r=this._handles)||void 0===r||r.removeAll(),this.onClearInputClick(),this.setState({mapPointActive:!1,coordinateVM:null});else if(this.props.defaultCoordinate!==t.defaultCoordinate||this.props.defaultFormat!==t.defaultFormat){const t=this.props.defaultCoordinate?this.props.defaultCoordinate:B,e=this.state.supportedFormats.find((e=>e.name===t));this.setState({defaultCoords:e.name,defFormat:this.props.defaultFormat?this.props.defaultFormat:e.defaultPattern},(()=>{this.onInputSettingsOkClicked()}))}else this.drawingLayer&&this.drawingLayer.graphics.length>0&&this.props.defaultPointSymbol!==t.defaultPointSymbol&&this.setState({defPointSymbol:this.props.defaultPointSymbol},(()=>{const t=this.drawingLayer.graphics.getItemAt(0),e=this.state.defPointSymbol;t.symbol=m.default.fromJSON(e)}));else this.createAPIWidget();if(t.locatorURL&&t.locatorURL!==this.props.locatorURL)this.onClearInputClick(),this.setState({locatorUrl:this.props.locatorURL},(()=>{var t;this.validateGeocodeUrl();const e=null===(t=this.state.coordinateVM)||void 0===t?void 0:t.conversions;if(e){const t=a(this.state.locatorUrl,this.state.minimumCandidateScore);e.forEach(((e,s)=>{"address"===e.format.name&&(e.format=t)}))}}));else if(t.maxSuggestions!==this.props.maxSuggestions){this.setState({maximumSuggestions:this.props.maxSuggestions});const t=this.getCleanInput(this.state.inputValue);this.displaySuggestionList(t)}},this.componentWillUnmount=()=>{this._isMounted=!1,this.drawingLayer&&(this.drawingLayer.removeAll(),this.drawingLayer.destroy()),this._displayDefaultCursor()},this.createAPIWidget=()=>{if(this.state.locatorUrl&&(this.props.jimuMapview&&this.props.jimuMapview.view&&(this.drawingLayer=new h.default({listMode:"hide"}),this.props.jimuMapview.view.map.addMany([this.drawingLayer]),this._handles.add(this.props.jimuMapview.view.on("click",(t=>{this.state.mapPointActive&&(this.props.deactivateMapTool&&(this.setState({mapPointActive:!this.state.mapPointActive}),this._displayDefaultCursor()),this.drawingLayer.removeAll(),t.mapPoint&&this.showConversion(t.mapPoint,!1))}))),this._handles.add(this.props.jimuMapview.view.on("pointer-move",(t=>{this.state.mapPointActive&&this._isMounted&&this._displayMapPointCursor()})))),!this.state.coordinateVM)){const t=new d.default({view:this.props.jimuMapview?this.props.jimuMapview.view:null});t.watch("messages",(()=>{this._isMounted&&setTimeout((()=>{if(!this._isMounted)return;t.pause();const e=g.default.generateDefaultFormats(t.messages);t.conversions.removeAll();const s=[],o={name:"address",label:this.nls("address"),defaultPattern:"",currentPattern:"",enabled:!0,isCustom:!0};s.push(o);const i=new p.default({format:a(this.state.locatorUrl,this.state.minimumCandidateScore)});t.conversions.add(i),e.forEach((e=>{if("basemap"!==e.name){const o=new p.default({format:e});t.conversions.add(o);const i={name:e.name,label:this.nls(e.name),defaultPattern:e.defaultPattern,currentPattern:e.currentPattern,enabled:!0,isCustom:!0};s.push(i)}})),s.sort(((t,e)=>t.label.localeCompare(e.label))),this.setState({coordinateVM:t,supportedFormats:s},(()=>{var t,e;(null===(t=this.props)||void 0===t?void 0:t.getSupportedFormats)&&(null===(e=this.props)||void 0===e||e.getSupportedFormats(this.state.supportedFormats))}))}),400)}))}},this.nls=t=>{const e=Object.assign({},s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]?e[t]:t}):e[t]?e[t]:t},this.onMapPointClick=()=>{this.setState({mapPointActive:!this.state.mapPointActive,isAddressOptionsPopupOpen:!1},(()=>{this.state.mapPointActive?this._displayMapPointCursor():this._displayDefaultCursor()}))},this._displayMapPointCursor=()=>{this.props.jimuMapview&&this.props.jimuMapview.view&&this.props.jimuMapview.view&&this.props.jimuMapview.view.container&&"crosshair"!==this.props.jimuMapview.view.container.style.cursor&&(this.props.jimuMapview.view.container.style.cursor="crosshair")},this._displayDefaultCursor=()=>{this.props.jimuMapview&&this.props.jimuMapview.view&&this.props.jimuMapview.view&&this.props.jimuMapview.view.container&&null!==this.props.jimuMapview.view.container.style.cursor&&(this.props.jimuMapview.view.container.style.cursor="default")},this.onCopyClick=()=>{const t=this.props.inputLabelString?this.props.inputLabelString:"";window.getSelection&&window.getSelection().removeAllRanges();let e="("+this.nls(this.currentCoordinateFormat)+")\r\n"+this.state.inputValue;""!==t&&(e=t+e);const s=this.props.copyAllList?e+"\r\n\n"+this.props.copyAllList.join("\r\n\n"):e;this._copyInputTextbox.current.value=s,this._copyInputTextbox.current.select(),document.execCommand("copy"),this._copyInputTextbox.current.disabled=!0,this.setState({isCopyMessageOpen:!0}),setTimeout((()=>{window.getSelection&&window.getSelection().removeAllRanges(),this.setState({isCopyMessageOpen:!1}),this._copyInputTextbox.current.disabled=!1}),500)},this.onZoomClick=()=>{if(this.drawingLayer&&this.drawingLayer.graphics.length>0){const t=this.drawingLayer.graphics.getItemAt(0);this.props.jimuMapview.view.goTo({center:t.geometry,scale:this.props.zoomScale?this.props.zoomScale:5e4})}},this.onSettingsClick=()=>{this.setState({isInputSettingsPopupOpen:!this.state.isInputSettingsPopupOpen,isAddressOptionsPopupOpen:!1})},this.onInputSettingsOkClicked=()=>{"address"!==this.state.defaultCoords&&""===this.state.defFormat||(this.setState({isInputSettingsPopupOpen:!1}),this.currentCoordinateFormat=this.state.defaultCoords,this.state.coordinateVM.conversions.some((t=>{if(t.format.name===this.state.defaultCoords)return t.format.currentPattern=this.state.defFormat,!0})),""!==this.state.inputValue&&this.showConversion(this.location,!1))},this.onInputSettingsCancelClicked=()=>{let t="";this.state.coordinateVM.conversions.some((e=>{if(e.format.name===this.currentCoordinateFormat)return t=e.format.currentPattern,!0})),this.setState({isInputSettingsPopupOpen:!1,defaultCoords:this.currentCoordinateFormat,defFormat:t})},this.onInputCoordinateChange=t=>{t.target&&""===t.target.value.trim()?(this.setState({inputValue:"",disableCopyZoom:!0}),this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer),setTimeout((()=>{this.state.isAddressOptionsPopupOpen&&this.setState({isAddressOptionsPopupOpen:!1})}),500)):this.setState({inputValue:t.target.value},(()=>{const t=this.getCleanInput(this.state.inputValue);this.displaySuggestionList(t)}))},this.displaySuggestionList=t=>{r(t).then((e=>{e&&e.length>0?this.state.isAddressOptionsPopupOpen&&this.setState({isAddressOptionsPopupOpen:!1}):(this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer),this.getSuggestionsTimer=setTimeout((()=>{var e,s,o,a,r,l;this.state.canSuggest&&(e=this.state.locatorUrl,s=t,o=this.state.maximumSuggestions,(a=e,r=s,l=o,i.default.suggestLocations(a,{text:r,location:null},{query:{maxSuggestions:l}}).then((t=>t||[]),(t=>(console.error(t.message),[])))).then((t=>{let e=[];t.forEach(((t,s)=>{const o=t.text;if(o&&!function(t,e){return t.filter((t=>e===(null==t?void 0:t.suggestion))).length>0}(e,o)){const s={suggestion:o,magicKey:null==t?void 0:t.magicKey};e.push(s)}})),e=n(e,"suggestion");const s={suggestionItem:e.splice(0,o)};return Promise.resolve(s)})).catch((t=>Promise.reject(t)))).then((t=>{const e=[];t.suggestionItem.forEach(((t,s)=>{const o={value:t.suggestion+s,label:t.suggestion,magicKey:t.magicKey,mapPoint:null};e.push(o)})),e.length>0?this.setState({selectedAddress:e.length>0?e[0].value:"",addressOptions:e,isAddressOptionsPopupOpen:!0}):this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1})})).catch((t=>{console.log(t)}))}),300))}))},this.showParseCoordinateError=()=>{this.setState({disableCopyZoom:!0}),this.showMessage(this.nls("errorMsgTitle"),this.nls("parseCoordinatesError"))},this.onReverseConvertComplete=t=>{t&&this.showConversion(t,!0),this.props.processing&&this.props.processing(!1)},this.onErrorInReverseConvert=t=>{this.showParseCoordinateError(),console.error(t.message),this.props.processing&&this.props.processing(!1)},this.isValidNumber=t=>"number"==typeof t&&isFinite(t),this.isValidPoint=t=>t&&this.isValidNumber(t.x)&&this.isValidNumber(t.y),this.getFromGeoCoordinateString=t=>{const{coordinate:e,spatialReference:s,formatName:o}=t;return f.default.fromGeoCoordinateString(W,{strings:[e],sr:s,conversionType:o}).then((t=>{const e=new c.default({x:t[0][0],y:t[0][1],spatialReference:s});if(!this.isValidPoint(e))throw t;return e})).catch((t=>{throw new Error(t)}))},this.reverseConvertInput=(t,e,s)=>{this.state.coordinateVM.conversions.some((o=>t===o.format.name&&(this.props.processing&&this.props.processing(!0),s?this.state.coordinateVM.reverseConvert(e,o.format).then(this.onReverseConvertComplete,this.onErrorInReverseConvert):this.getFromGeoCoordinateString({coordinate:e,spatialReference:o.format.spatialReference,formatName:o.format.name}).then(this.onReverseConvertComplete,this.onErrorInReverseConvert),!0)))},this.getCleanInput=t=>(t=(t=(t=t.split("°‎").join("")).replace(/\n/g,"")).replace(/\s+/g," ").trim()).toUpperCase(),this.getProcessedTextInput=(t,e,s)=>{const o=function(t,e,s){const o=e.pattern.exec(t);let i,n,a,r,l,p,d,c,u,h,m=!1,g=e.name;switch(e.name){case"dd":i=o[2],n=o[7],a=o[10],r=o[16],l=o[3].replace(/[,:]/,"."),p=o[11].replace(/[,:]/,"."),g="dd";break;case"ddrev":i=o[11],n=o[16],a=o[2],r=o[8],l=o[12].replace(/[,:]/,"."),p=o[3].replace(/[,:]/,"."),g="dd";break;case"ddm":i=o[2],n=o[7],a=o[10],r=o[15],l=o[3],d=o[4].replace(/[,:]/,"."),p=o[11],c=o[12].replace(/[,:]/,"."),g="ddm";break;case"ddmrev":i=o[10],n=o[15],a=o[2],r=o[7],l=o[11],d=o[12].replace(/[,:]/,"."),p=o[3],c=o[4].replace(/[,:]/,"."),g="ddm";break;case"dms":i=o[2],n=o[8],a=o[11],r=o[17],l=o[3],d=o[4],u=o[5].replace(/[,:]/,"."),p=o[12],c=o[13],h=o[14].replace(/[,:]/,"."),g="dms";break;case"dmsrev":i=o[11],n=o[17],a=o[2],r=o[8],l=o[12],d=o[13],u=o[14].replace(/[,:]/,"."),p=o[3],c=o[4],h=o[5].replace(/[,:]/,"."),g="dms"}switch(i&&n?(m=!0,i=new RegExp(/[Ss-]/).test(i)?"-":"+"):i=i&&new RegExp(/[Ss-]/).test(i)||n&&new RegExp(/[Ss-]/).test(n)?"-":"+",a&&r?(m=!0,a=new RegExp(/[Ww-]/).test(a)?"-":"+"):a=a&&new RegExp(/[Ww-]/).test(a)||r&&new RegExp(/[Ww-]/).test(r)?"-":"+",g){case"dd":t=i+l+","+a+p;break;case"ddm":t=i+l+" "+d+","+a+p+" "+c;break;case"dms":t=i+l+" "+d+" "+u+","+a+p+" "+c+" "+h}return{prefixSuffixError:m,str:t}}(t,e);return o.prefixSuffixError&&!s&&this.showMessage("",this.nls("latLongWarningMessage")),o.str},this.getCurrentFormat=()=>{let t;return this.state.coordinateVM.conversions.some((e=>this.state.defaultCoords===e.format.name&&(t=e.format,!0))),t},this.tryParsingFormat=(t,e)=>U(this,void 0,void 0,(function*(){var s,o;try{const i=yield this.state.coordinateVM.reverseConvert(t,e.format);if(i){const n=yield this.state.coordinateVM.updateConversions([e],i);return(null==n?void 0:n.length)>0&&((null===(s=n[0])||void 0===s?void 0:s.displayCoordinate)===this.state.inputValue||(null===(o=n[0])||void 0===o?void 0:o.displayCoordinate)===t)?i:null}}catch(t){return null}})),this.onInputKeyDown=t=>{if("Enter"===t.key){this.getSuggestionsTimer&&clearInterval(this.getSuggestionsTimer);const t=this.getCleanInput(this.state.inputValue);r(t).then((e=>{if(e&&e.length>0)if(1===e.length){const s=e[0].conversionType,o=!("dd"===s||"ddm"===s||"dms"===s),i=this.getProcessedTextInput(t,e[0],!1);this.reverseConvertInput(s,i,o)}else this.confirmInputNotationFromUser(e);else this.props.processing&&this.props.processing(!0),(s=this.state.locatorUrl,o=t,n=this.state.minimumCandidateScore,i.default.addressToLocations(s,{address:{SingleLine:o}},{query:{}}).then((t=>(t=t.sort(((t,e)=>e.score-t.score))).filter((t=>t.score>=n&&t.location))),(t=>(console.error(t.message),[])))).then((e=>{if(e&&e.length>0)if(1===e.length)this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1},(()=>{this.showConversion(e[0].location,!0)}));else{const t=[];e.forEach(((e,s)=>{const o={value:e.address+s,label:e.address,mapPoint:e.location};t.push(o)})),this.setState({selectedAddress:t.length>0?t[0].value:"",addressOptions:t,isAddressOptionsPopupOpen:!0})}else if("address"!==this.state.defaultCoords){const e=[];this.state.coordinateVM.conversions.forEach((s=>{"address"!==s.format.name&&e.push(this.tryParsingFormat(t,s))})),e.length>0?Promise.all(e).then((t=>{let e=!1;t.some((t=>!!t&&(e=!0,this.onReverseConvertComplete(t),!0))),e||this.showParseCoordinateError()}),(t=>{this.showParseCoordinateError()})):this.showParseCoordinateError()}else this.showParseCoordinateError();this.props.processing&&this.props.processing(!1)}));var s,o,n}))}},this.confirmInputNotationFromUser=t=>{const e=[];t.forEach((t=>{const s={value:t.name,label:this.nls(t.notationType),notation:t};e.push(s)})),this.setState({addressOptions:[],isAddressOptionsPopupOpen:!1,confirmedInputNotation:e[0].value,inputNotationOptions:e,inputNotationWarning:t.length+" "+this.nls("multipleNotationLabel"),isConfirmInputNotationPopupOpen:!0})},this.onSelectedAddressChange=t=>{this.setState({selectedAddress:t},(()=>{this.state.selectedAddress&&(this.state.addressOptions.some((e=>{if(e.value===this.state.selectedAddress)return e.magicKey?(s=this.state.locatorUrl,o=e.magicKey,n=t,a=this.state.minimumCandidateScore,i.default.addressToLocations(s,{address:{SingleLine:n},outFields:["*"],magicKey:o},{query:{}}).then((t=>(t=t.sort(((t,e)=>e.score-t.score))).filter((t=>t.score>=a&&t.location))),(t=>(console.error(t.message),[])))).then((t=>{this.setState({inputValue:e.label}),this.showConversion(t[0].location,!0)})):e.mapPoint&&this.showConversion(e.mapPoint,!0),!0;var s,o,n,a})),this.setState({selectedAddress:"",addressOptions:[],isAddressOptionsPopupOpen:!1}))}))},this.onInputNotationChange=t=>{this.setState({confirmedInputNotation:t.target.value})},this.onConfirmInputOkClicked=()=>{if(this.state.confirmedInputNotation){const t=this.getCleanInput(this.state.inputValue);let e;this.state.inputNotationOptions.some((t=>{if(t.value===this.state.confirmedInputNotation)return e=t.notation,!0}));const s=this.getProcessedTextInput(t,e,!1);this.reverseConvertInput(e.conversionType,s,!1),this.setState({confirmedInputNotation:"",inputNotationOptions:[],isConfirmInputNotationPopupOpen:!1})}},this.onConfirmInputCancelClicked=()=>{this.setState({confirmedInputNotation:"",inputNotationOptions:[],isConfirmInputNotationPopupOpen:!1})},this.onClearInputClick=()=>{this.drawingLayer&&this.drawingLayer.removeAll(),this.setState({inputValue:"",disableCopyZoom:!0,isAddressOptionsPopupOpen:!1},(()=>{this.props.onClear&&this.props.onClear(),this._inputTextbox.current.focus()}))},this.onDefaultCoordsChange=t=>{this.setState({defaultCoords:t.target.value},(()=>{this.resetToDefaultPattern(this.state.defaultCoords)}))},this.onFormatChange=t=>{const e=t.target.value;this.setState({defFormat:e})},this.onFormatAcceptValue=t=>{this.setState({defFormat:t.trim()})},this.onResetButtonClick=()=>{const t=this.state.defaultCoords;this.resetToDefaultPattern(t)},this.resetToDefaultPattern=t=>{const e=this.state.supportedFormats.find((e=>e.name===t));e&&this.setState({defFormat:e.defaultPattern})},this.getProjectedLocation=(t,e)=>{const s=this.state.coordinateVM.formats.findIndex((t=>{if("dd"===t.name)return!0}));return new Promise(((o,i)=>{s>-1&&e?this.state.coordinateVM.formats.getItemAt(s)._project(t,e).then((t=>{o(t)})):o(t)}))},this.showLocationOnMap=(t,e)=>{this.drawingLayer&&this.props.jimuMapview&&this.props.jimuMapview.view&&this.getProjectedLocation(t,this.props.jimuMapview.view.spatialReference).then((t=>{this.drawingLayer.removeAll();const s=new u.default({geometry:t,symbol:m.default.fromJSON(this.state.defPointSymbol)});this.drawingLayer.add(s),e&&this.props.jimuMapview.view.set({center:t})}))},this.showConversion=(t,e)=>{if(this.location=t,this.showLocationOnMap(t,e),this.state.coordinateVM){this.setState({disableCopyZoom:!1});const e=this.state.coordinateVM.conversions.filter((t=>t.format.name===this.currentCoordinateFormat||"dd"===t.format.name));this.state.coordinateVM.updateConversions(e.toArray(),t).then((e=>{let s=null,o="";e.forEach((t=>{"dd"===t.format.name&&(s=t.position.location),t.format.name===this.currentCoordinateFormat&&(o=t.displayCoordinate?t.displayCoordinate:"","address"===this.currentCoordinateFormat&&""===o&&(o=this.nls("noAddressFoundMsg")))})),this.setState({inputValue:o},(()=>{const e={formattedCoordinateText:o,mapCoordinate:t,ddCoordinate:s};this.props.onConversionComplete(e)}))}),(t=>{console.log(t.message)}))}},this.onAddConversion=()=>{this.setState({isAddConversionPopupOpen:!0})},this.onAddPopperClose=()=>{this.setState({isAddConversionPopupOpen:!1})},this.showMessage=(t,e)=>{this.setState({isErrorMsgPopupOpen:!0,errorMsgPopupTitle:t,errorMsg:e})},this.hideMessage=()=>{this.setState({isErrorMsgPopupOpen:!1,errorMsgPopupTitle:"",errorMsg:""})},this.formatDisplayCoordinate=t=>this.isRTL&&this.currentCoordinateFormat&&"xy"===this.currentCoordinateFormat&&t&&"-"===t.charAt(0)?t.substr(1)+t.substr(0,1):t,this.getClearIcon=t=>t.length>0&&(0,e.jsx)("div",{"aria-label":this.nls("clear"),title:this.nls("clear"),onClick:this.onClearInputClick.bind(this)},(0,e.jsx)(T,{width:14,height:14,className:"search-clear"})),this.overrideInputWidthStyle=()=>{var t;const s=!!(null===(t=this.props.jimuMapview)||void 0===t?void 0:t.view);let o=29;return s&&(o+=29),this.props.showCopy&&(o+=29),this.props.showZoom&&s&&(o+=29),e.css`
    .cc-search-input {
      width: calc( 100% -  ${o}px);
    }
    `},this.isRTL=!1;const v=(0,e.getAppStore)().getState();this.isRTL=null===(o=null==v?void 0:v.appContext)||void 0===o?void 0:o.isRTL,this.state={mapPointActive:!1,isInputSettingsPopupOpen:!1,isAddConversionPopupOpen:!1,isCopyMessageOpen:!1,defaultCoords:this.props.defaultCoordinate?this.props.defaultCoordinate:B,defFormat:this.props.defaultFormat?this.props.defaultFormat:"Y°N, X°E",locatorUrl:this.props.locatorURL?this.props.locatorURL:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",minimumCandidateScore:this.props.minCandidateScore?this.props.minCandidateScore:100,maximumSuggestions:this.props.maxSuggestions||0===this.props.maxSuggestions?this.props.maxSuggestions:6,defPointSymbol:this.props.defaultPointSymbol?this.props.defaultPointSymbol:G,disableCopyZoom:!0,inputValue:"",coordinateVM:null,supportedFormats:null,isConfirmInputNotationPopupOpen:!1,inputNotationOptions:[],confirmedInputNotation:"",inputNotationWarning:"",addressOptions:[],selectedAddress:"",isAddressOptionsPopupOpen:!1,isErrorMsgPopupOpen:!1,errorMsgPopupTitle:"",errorMsg:"",canSuggest:!0},this.currentCoordinateFormat=this.props.defaultCoordinate?this.props.defaultCoordinate:B,this._handles=new l.default,this.location=new c.default,this._isMounted=!1}render(){var t,o;const i=(0,e.classNames)(this.props.className,"jimu-coordinate-control"),n=this.props.inputLabelString?this.props.inputLabelString:"";return(0,e.jsx)("div",{className:i},(0,e.jsx)(s.Row,{flow:"wrap","aria-label":n+"  ("+this.nls(this.state.defaultCoords)+")",className:"pl-3 pr-4"},(0,e.jsx)("label",{title:n+"  ("+this.nls(this.state.defaultCoords)+")",className:"jimu-widget-setting--row-label justify-content-start flex-grow-1 text-break setting-text-level-3 w-100 mr-0"},n+"  ("+this.nls(this.state.defaultCoords)+")"),(0,e.jsx)("div",{className:"adjust-buttons w-100 align-items-center",css:this.overrideInputWidthStyle()},(0,e.jsx)("div",{className:"cc-search-input"},(0,e.jsx)(s.TextInput,{role:"textbox","aria-label":n+"  ("+this.nls(this.state.defaultCoords)+")",size:"sm",placeholder:this.nls("inputPlaceHolder"),onKeyDown:this.onInputKeyDown,id:"textInput"+this.props.parentWidgetId,ref:this._inputTextbox,onChange:this.onInputCoordinateChange.bind(this),className:"search-input",value:this.formatDisplayCoordinate(this.state.inputValue),suffix:this.getClearIcon(this.formatDisplayCoordinate(this.state.inputValue))}),this.state.isAddressOptionsPopupOpen&&(0,e.jsx)("div",{ref:"textInput"+this.props.parentWidgetId},(0,e.jsx)(s.ListGroup,{className:"addressListGroup p-2 shadow"},this.state.addressOptions&&this.state.addressOptions.map(((t,o)=>(0,e.jsx)(s.ListGroupItem,{tabIndex:0,className:"listItem",key:o,onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||this.onSelectedAddressChange(t.value)},onClick:()=>this.onSelectedAddressChange(t.value)},t.label))))),(0,e.jsx)(s.TextArea,{tabIndex:-1,className:"hidden-copy-input",ref:this._copyInputTextbox})),(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("mapPoint"),title:this.nls("mapPoint"),className:(null===(t=this.props.jimuMapview)||void 0===t?void 0:t.view)?"actionButton":"hidden",type:"tertiary",icon:!0,size:"sm",active:this.state.mapPointActive,onClick:this.onMapPointClick.bind(this)},(0,e.jsx)(x,{size:"17"})),this.props.showCopy&&(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("copyAll"),"aria-disabled":this.state.disableCopyZoom,title:this.nls("copyAll"),className:"actionButton",type:"tertiary",icon:!0,size:"sm",active:this.state.isCopyMessageOpen,id:"refCopy"+this.props.parentWidgetId,disabled:this.state.disableCopyZoom,onClick:this.onCopyClick.bind(this)},(0,e.jsx)(P,{size:"17"})),this.props.jimuMapview&&this.props.showZoom&&(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("ZoomLabel"),"aria-disabled":this.state.disableCopyZoom,title:this.nls("ZoomLabel"),className:(null===(o=this.props.jimuMapview)||void 0===o?void 0:o.view)?"actionButton":"hidden",type:"tertiary",icon:!0,size:"sm",disabled:this.state.disableCopyZoom,onClick:this.onZoomClick.bind(this)},(0,e.jsx)(I,{size:"17"})),(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("inputSettingsTitle"),"aria-haspopup":"dialog",title:this.nls("inputSettingsTitle"),className:"actionButton",type:"tertiary",icon:!0,size:"sm",active:this.state.isInputSettingsPopupOpen,onClick:this.onSettingsClick.bind(this)},(0,e.jsx)(L,{size:"17"})))),(0,e.jsx)(s.AlertPopup,{className:i,"aria-expanded":this.state.isInputSettingsPopupOpen,isOpen:this.state.isInputSettingsPopupOpen,onClickOk:this.onInputSettingsOkClicked.bind(this),onClickClose:this.onInputSettingsCancelClicked.bind(this),title:this.nls("inputSettingsTitle")},(0,e.jsx)("table",{cellPadding:10},(0,e.jsx)("tbody",null,(0,e.jsx)("tr",null,(0,e.jsx)("td",{className:"labelDimension"},(0,e.jsx)(s.Label,null,this.nls("defaultCoordinate"))),(0,e.jsx)("td",null,(0,e.jsx)(s.Select,{"aria-label":this.nls("defaultCoordinate"),name:"defaultCoords",size:"sm",value:this.state.defaultCoords,onChange:this.onDefaultCoordsChange},this.state.supportedFormats&&this.state.supportedFormats.map(((t,o)=>(0,e.jsx)(s.Option,{tabIndex:0,role:"option","aria-label":t.label,key:o,value:t.name},t.label)))))),(0,e.jsx)("tr",{className:"address"===this.state.defaultCoords?"hidden":""},(0,e.jsx)("td",{className:"labelDimension"},(0,e.jsx)(s.Label,null,this.nls("coordinateFormat"))),(0,e.jsx)("td",null,(0,e.jsx)(s.TextInput,{role:"textbox","aria-label":this.nls("coordinateFormat"),value:this.state.defFormat,onAcceptValue:this.onFormatAcceptValue,onChange:this.onFormatChange,size:"sm",className:""===this.state.defFormat?"invalid-value":""})),(0,e.jsx)("td",null,(0,e.jsx)(s.Button,{role:"button","aria-label":this.nls("resetFormat"),title:this.nls("resetFormat"),className:"ml-2",icon:!0,type:"tertiary",size:"sm",onClick:this.onResetButtonClick.bind(this)},(0,e.jsx)(F,{size:"16"}))))))),this.state.isConfirmInputNotationPopupOpen&&(0,e.jsx)(s.AlertPopup,{"aria-expanded":this.state.isConfirmInputNotationPopupOpen,isOpen:this.state.isConfirmInputNotationPopupOpen,onClickOk:this.onConfirmInputOkClicked.bind(this),onClickClose:this.onConfirmInputCancelClicked.bind(this),title:this.nls("confirmInputNotation")},(0,e.jsx)("div",{className:"p-2"},(0,e.jsx)(s.Label,null,this.state.inputNotationWarning),(0,e.jsx)("br",null),(0,e.jsx)(s.Select,{"aria-label":this.state.inputNotationWarning,name:"confirmedInputNotation",size:"sm",value:this.state.confirmedInputNotation,onChange:this.onInputNotationChange},this.state.inputNotationOptions&&this.state.inputNotationOptions.map(((t,o)=>(0,e.jsx)(s.Option,{tabIndex:0,role:"option","aria-label":t.label,key:o,value:t.value},t.label)))))),this.state.isErrorMsgPopupOpen&&(0,e.jsx)(s.AlertPopup,{"aria-expanded":this.state.isErrorMsgPopupOpen,hideCancel:!0,isOpen:this.state.isErrorMsgPopupOpen,onClickOk:this.hideMessage.bind(this),onClickClose:this.hideMessage.bind(this),title:this.state.errorMsgPopupTitle},(0,e.jsx)("div",{className:"p-2"},this.state.errorMsg)),this.state.isCopyMessageOpen&&(0,e.jsx)(s.Popper,{open:this.state.isCopyMessageOpen,version:0,placement:"bottom",showArrow:!0,reference:"refCopy"+this.props.parentWidgetId,offset:[0,0]},(0,e.jsx)("div",{className:"p-2"},this.nls("copySuccessMessage"))))}}const Z=(0,t.withStyles)((0,e.injectIntl)(H),"CoordinateControl");(0,t.registerStyles)("jimu-ui/advanced/coordinate-control",{CoordinateControl:function(t){const s=t.theme;return e.css`
  .adjust-buttons {
    display: flex;
    flex-flow: row wrap;
  }

  .actionButton {
    margin: 2px 0px 0px 2px;
  }

  .actionButton:disabled{
    cursor: default;
  }

  .hidden {
    display: none;
  }

  .addressListGroup {
    position: absolute;
    max-height: 10rem;
    overflow-y: auto;
    z-index: 1;
    width: 100%;
    border: 1px solid ${s.border.color};
  }

  .listItem {
    padding: 5px 10px;
    border: none;
    cursor: pointer;
    margin: -7px -8px 6px -8px;
  }

  .listItem:hover {
    background-color: ${s.colors.palette.primary[300]};
  }

  .cc-search-input {
    position: relative;
    min-width: 100px;

      .search-clear {
        cursor: pointer;
      }

      .search-input {
        padding-right: 0.25rem;
      }

      .search-input::-ms-clear {
        display: none;
      }
  }

  .hidden-copy-input {
    opacity: 0.01;
    height:0;
    position:absolute;
    z-index: -1;
  }

  .labelDimension {
    width: 36%
  }

  .hidden {
    display: none;
  }

  .invalid-value {
    border: 1px solid ${s.colors.danger};
    box-shadow: 0 0 5px ${s.colors.danger};
  }

  `}})})(),y})())}}}));