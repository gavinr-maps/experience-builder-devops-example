System.register(["jimu-core","jimu-theme","jimu-ui","jimu-ui/advanced/data-source-selector","jimu-ui/basic/list-tree","jimu-ui/basic/sql-expression-runtime"],(function(e,t){var s={},a={},i={},l={},o={},r={};return{setters:[function(e){s.CONSTANTS=e.CONSTANTS,s.ClauseCascade=e.ClauseCascade,s.ClauseDisplayType=e.ClauseDisplayType,s.ClauseLabelDisplay=e.ClauseLabelDisplay,s.ClauseLogic=e.ClauseLogic,s.ClauseSourceType=e.ClauseSourceType,s.ClauseType=e.ClauseType,s.DataSourceComponent=e.DataSourceComponent,s.Immutable=e.Immutable,s.JimuFieldType=e.JimuFieldType,s.OrderRule=e.OrderRule,s.QueryScope=e.QueryScope,s.React=e.React,s.ReactResizeDetector=e.ReactResizeDetector,s.SqlExpressionMode=e.SqlExpressionMode,s.classNames=e.classNames,s.css=e.css,s.dataSourceUtils=e.dataSourceUtils,s.defaultMessages=e.defaultMessages,s.injectIntl=e.injectIntl,s.jsx=e.jsx,s.lodash=e.lodash,s.polished=e.polished,s.uuidv1=e.uuidv1},function(e){a.registerStyles=e.registerStyles,a.withStyles=e.withStyles,a.withTheme=e.withTheme},function(e){i.AdvancedButtonGroup=e.AdvancedButtonGroup,i.Badge=e.Badge,i.Button=e.Button,i.Checkbox=e.Checkbox,i.Dropdown=e.Dropdown,i.DropdownButton=e.DropdownButton,i.DropdownItem=e.DropdownItem,i.DropdownMenu=e.DropdownMenu,i.Icon=e.Icon,i.Label=e.Label,i.Modal=e.Modal,i.ModalBody=e.ModalBody,i.ModalFooter=e.ModalFooter,i.ModalHeader=e.ModalHeader,i.Popper=e.Popper,i.QueryScopeContext=e.QueryScopeContext,i.Radio=e.Radio,i.Select=e.Select,i.TextInput=e.TextInput,i.Tooltip=e.Tooltip,i.defaultMessages=e.defaultMessages},function(e){l.FieldSelector=e.FieldSelector},function(e){o.List=e.List,o.TreeItemActionType=e.TreeItemActionType},function(e){r.ClauseInputEditor=e.ClauseInputEditor,r.InputEditorRender=e.InputEditorRender,r.SqlExpressionSizeMode=e.SqlExpressionSizeMode,r.getCamelCase=e.getCamelCase,r.getClauseArrayByChange=e.getClauseArrayByChange,r.getClauseDefaultLabel=e.getClauseDefaultLabel,r.getClauseLabel=e.getClauseLabel,r.getDefaultClauseSet=e.getDefaultClauseSet,r.getDefaultClauseValObj=e.getDefaultClauseValObj,r.getDefaultSingleClause=e.getDefaultSingleClause,r.getDisplayTypes=e.getDisplayTypes,r.getInputEditorListByOperatorAndSourceType=e.getInputEditorListByOperatorAndSourceType,r.getOperatorsByShortType=e.getOperatorsByShortType,r.isAskForValueSupportedByOperatorAndSourceType=e.isAskForValueSupportedByOperatorAndSourceType,r.isCaseSensitiveSupportedByOperatorAndSourceType=e.isCaseSensitiveSupportedByOperatorAndSourceType,r.isSqlExpressionValid=e.isSqlExpressionValid}],execute:function(){e((()=>{var e={79594:(e,t,s)=>{var a={"./style_date_picker.svg":82253,"./style_date_time_picker.svg":48529,"./style_double_date_picker.svg":81277,"./style_double_date_time_picker.svg":59834,"./style_icon.svg":56390,"./style_multiple_pill_wrap_selector.svg":99962,"./style_multiple_select.svg":11501,"./style_simple_select.svg":84190,"./style_unique_pill_wrap_selector.svg":98248};function i(e){var t=l(e);return s(t)}function l(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=l,e.exports=i,i.id=79594},28455:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7Zm1.167 11.667H6.834v-2.334h2.333v2.334Zm-2.333-4.5V3.333h2.333v4.834H6.834Z" clip-rule="evenodd"></path></svg>'},12633:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.5 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2ZM2 9.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm.5 2.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2ZM7 3.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5ZM7.5 6a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-6ZM7 9.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm.5 2.5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-6Z" clip-rule="evenodd"></path></svg>'},19190:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.5 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm0 3a.5.5 0 0 0 0 1h11a.5.5 0 0 0 0-1h-11ZM2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5ZM2.5 9a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Z" clip-rule="evenodd"></path></svg>'},41553:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994h2.839Zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48Zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" clip-rule="evenodd"></path></svg>'},63335:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 2H1v5h14V2Zm-1 1v3H2V3h12ZM5 4H3v1h2V4ZM1 9h14v5H1V9Zm13 4v-3H2v3h12Zm-9-2H3v1h2v-1Z" clip-rule="evenodd"></path></svg>'},58959:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4ZM1 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5ZM1.5 9a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1h-10ZM1.5 12a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z"></path></svg>'},99820:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 13a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1h-4ZM1 9.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5ZM1.5 7a.5.5 0 0 1 0-1h10a.5.5 0 0 1 0 1h-10ZM1.5 4a.5.5 0 0 1 0-1h13a.5.5 0 0 1 0 1h-13Z"></path></svg>'},55339:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z"></path></svg>'},50970:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5ZM5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1Zm0 1v9h9V5H5Z" clip-rule="evenodd"></path></svg>'},34750:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5Z"></path></svg>'},9281:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.102 12.833H0L4.268 3h.976l4.24 9.833H8.368L7.28 10.25H2.176l-1.074 2.583Zm1.45-3.5h4.352L4.728 4.111 2.552 9.333ZM14.996 8.639c0-.565-.149-.986-.447-1.264-.297-.278-.73-.417-1.297-.417-.39 0-.753.07-1.087.209a2.601 2.601 0 0 0-.851.555l-.53-.625c.27-.268.623-.49 1.06-.666a4.079 4.079 0 0 1 1.506-.264c.353 0 .684.05.99.152.307.093.577.237.81.431.232.194.413.44.543.736.13.296.195.644.195 1.042v2.847c0 .25.01.51.028.778.019.268.047.495.084.68h-.85a6.914 6.914 0 0 1-.07-.514 5.418 5.418 0 0 1-.028-.541h-.028c-.298.435-.637.75-1.018.944-.372.185-.823.278-1.353.278-.251 0-.512-.037-.781-.111a2.15 2.15 0 0 1-.726-.333 2.047 2.047 0 0 1-.544-.612c-.139-.25-.209-.555-.209-.916 0-.5.126-.894.377-1.18.26-.297.604-.515 1.032-.654.428-.148.916-.24 1.464-.277.558-.047 1.135-.07 1.73-.07V8.64Zm-.28.944c-.39 0-.785.019-1.185.056-.39.028-.748.092-1.074.194a1.968 1.968 0 0 0-.78.417c-.205.185-.307.43-.307.736 0 .232.041.426.125.583.093.158.214.287.363.39.149.092.311.161.488.208.186.037.372.055.558.055.335 0 .632-.055.892-.166.26-.12.48-.278.656-.473.177-.203.311-.435.404-.694.093-.26.14-.532.14-.82v-.486h-.28Z"></path></svg>'},82253:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="nonzero"><path fill="#363636" d="M5.5 14A1.5 1.5 0 0 0 4 15.5v27A1.5 1.5 0 0 0 5.5 44h57a1.5 1.5 0 0 0 1.5-1.5v-27l-.007-.144A1.5 1.5 0 0 0 62.5 14h-57Zm57 1a.5.5 0 0 1 .5.5v27a.5.5 0 0 1-.5.5h-57a.5.5 0 0 1-.5-.5v-27a.5.5 0 0 1 .5-.5h57Z"></path><path fill="#363636" d="M8 18h4v4H8zM38 18h4v4h-4zM33 18h1v22h-1zM14 18h4v4h-4zM44 18h4v4h-4zM20 18h4v4h-4zM50 18h4v4h-4zM26 18h4v4h-4zM56 18h4v4h-4zM8 30h4v4H8zM38 30h4v4h-4zM14 30h4v4h-4zM44 30h4v4h-4zM50 30h4v4h-4zM20 30h4v4h-4zM26 30h4v4h-4zM56 30h4v4h-4zM8 36h4v4H8zM38 36h4v4h-4zM14 36h4v4h-4zM44 36h4v4h-4zM20 36h4v4h-4zM8 24h4v4H8zM38 24h4v4h-4z"></path><path fill="#6A6A6A" d="M14 24h4v4h-4z"></path><path fill="#363636" d="M44 24h4v4h-4zM20 24h4v4h-4zM50 24h4v4h-4zM26 24h4v4h-4zM56 24h4v4h-4z"></path><rect width="60" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect></g></svg>'},48529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="nonzero"><path fill="#363636" d="M5.5 14A1.5 1.5 0 0 0 4 15.5v27A1.5 1.5 0 0 0 5.5 44h57a1.5 1.5 0 0 0 1.5-1.5v-27l-.007-.144A1.5 1.5 0 0 0 62.5 14h-57Zm57 1a.5.5 0 0 1 .5.5v27a.5.5 0 0 1-.5.5h-57a.5.5 0 0 1-.5-.5v-27a.5.5 0 0 1 .5-.5h57Z"></path><path fill="#363636" d="M8 18h4v4H8zM38 18h4v4h-4zM33 18h1v22h-1zM14 18h4v4h-4zM44 18h4v4h-4zM20 18h4v4h-4zM50 18h4v4h-4zM26 18h4v4h-4zM56 18h4v4h-4zM8 30h4v4H8zM38 30h4v4h-4zM14 30h4v4h-4zM20 30h4v4h-4zM26 30h4v4h-4zM8 36h4v4H8zM38 36h4v4h-4zM14 36h4v4h-4zM20 36h4v4h-4zM8 24h4v4H8zM38 24h4v4h-4z"></path><path fill="#6A6A6A" d="M14 24h4v4h-4z"></path><path fill="#363636" d="M44 24h4v4h-4z"></path><path fill="#6A6A6A" d="M54.5 41a6.5 6.5 0 1 1 0-13 6.5 6.5 0 1 1 0 13Zm0-11.782a5.281 5.281 0 1 0 0 10.563 5.281 5.281 0 0 0 0-10.563Zm2.64 5.891H54.5a.61.61 0 0 1-.61-.61v-3.656a.61.61 0 0 1 1.219 0v3.048h2.031a.608.608 0 1 1 0 1.218Z"></path><path fill="#363636" d="M20 24h4v4h-4zM26 24h4v4h-4z"></path><rect width="60" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect></g></svg>'},81277:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="nonzero"><path fill="#363636" d="M5.5 14A1.5 1.5 0 0 0 4 15.5v27A1.5 1.5 0 0 0 5.5 44h57a1.5 1.5 0 0 0 1.5-1.5v-27l-.007-.144A1.5 1.5 0 0 0 62.5 14h-57Zm57 1a.5.5 0 0 1 .5.5v27a.5.5 0 0 1-.5.5h-57a.5.5 0 0 1-.5-.5v-27a.5.5 0 0 1 .5-.5h57Z"></path><path fill="#363636" d="M8 18h4v4H8z"></path><path fill="#6A6A6A" d="M38 18h4v4h-4z"></path><path fill="#363636" d="M33 18h1v22h-1zM14 18h4v4h-4z"></path><path fill="#6A6A6A" d="M44 18h4v4h-4z"></path><path fill="#363636" d="M20 18h4v4h-4z"></path><path fill="#6A6A6A" d="M50 18h4v4h-4z"></path><path fill="#363636" d="M26 18h4v4h-4z"></path><path fill="#6A6A6A" d="M56 18h4v4h-4z"></path><path fill="#363636" d="M8 30h4v4H8zM38 30h4v4h-4zM14 30h4v4h-4zM44 30h4v4h-4zM20 30h4v4h-4zM50 30h4v4h-4zM26 30h4v4h-4zM56 30h4v4h-4zM8 36h4v4H8zM38 36h4v4h-4z"></path><path fill="#6A6A6A" d="M14 36h4v4h-4z"></path><path fill="#363636" d="M44 36h4v4h-4z"></path><path fill="#6A6A6A" d="M20 36h4v4h-4z"></path><path fill="#363636" d="M8 24h4v4H8z"></path><path fill="#6A6A6A" d="M38 24h4v4h-4z"></path><path fill="#363636" d="M14 24h4v4h-4z"></path><path fill="#6A6A6A" d="M44 24h4v4h-4z"></path><path fill="#363636" d="M20 24h4v4h-4zM50 24h4v4h-4zM26 24h4v4h-4zM56 24h4v4h-4z"></path><rect width="28" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect><rect width="28" height="8" x="36" y="4" fill="#6A6A6A" rx="1"></rect></g></svg>'},59834:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="nonzero"><path fill="#363636" d="M5.5 14A1.5 1.5 0 0 0 4 15.5v27A1.5 1.5 0 0 0 5.5 44h57a1.5 1.5 0 0 0 1.5-1.5v-27l-.007-.144A1.5 1.5 0 0 0 62.5 14h-57Zm57 1a.5.5 0 0 1 .5.5v27a.5.5 0 0 1-.5.5h-57a.5.5 0 0 1-.5-.5v-27a.5.5 0 0 1 .5-.5h57Z"></path><path fill="#363636" d="M8 18h4v4H8z"></path><path fill="#6A6A6A" d="M38 18h4v4h-4z"></path><path fill="#363636" d="M33 18h1v22h-1zM14 18h4v4h-4z"></path><path fill="#6A6A6A" d="M44 18h4v4h-4z"></path><path fill="#363636" d="M20 18h4v4h-4z"></path><path fill="#6A6A6A" d="M50 18h4v4h-4z"></path><path fill="#363636" d="M26 18h4v4h-4z"></path><path fill="#6A6A6A" d="M56 18h4v4h-4z"></path><path fill="#363636" d="M8 30h4v4H8zM38 30h4v4h-4zM14 30h4v4h-4zM20 30h4v4h-4zM26 30h4v4h-4zM8 36h4v4H8zM38 36h4v4h-4z"></path><path fill="#6A6A6A" d="M14 36h4v4h-4zM20 36h4v4h-4z"></path><path fill="#363636" d="M8 24h4v4H8z"></path><path fill="#6A6A6A" d="M38 24h4v4h-4z"></path><path fill="#363636" d="M14 24h4v4h-4z"></path><path fill="#6A6A6A" d="M44 24h4v4h-4zM54.5 41a6.5 6.5 0 1 1 0-13 6.5 6.5 0 1 1 0 13Zm0-11.782a5.281 5.281 0 1 0 0 10.563 5.281 5.281 0 0 0 0-10.563Zm2.64 5.891H54.5a.61.61 0 0 1-.61-.61v-3.656a.61.61 0 0 1 1.219 0v3.048h2.031a.608.608 0 1 1 0 1.218Z"></path><path fill="#363636" d="M20 24h4v4h-4zM26 24h4v4h-4z"></path><rect width="28" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect><rect width="28" height="8" x="36" y="4" fill="#6A6A6A" rx="1"></rect></g></svg>'},56390:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#FFF" fill-rule="evenodd" d="m6.732 9.4 1.43 1.215a2.794 2.794 0 0 1-.507 4.602c-2.21 1.153-4.63 1.033-7.26-.362l-.293-.16a.2.2 0 0 1 .087-.374c1.847-.11 2.771-.888 2.771-2.334 0-1.063.299-1.96 1.18-2.59.88-.631 1.832-.457 2.592.003Zm-1.945.761c-.56.472-.825 1.055-.825 1.826 0 1.22-1.19 2.713-1.987 2.713 1.3.517 3.745.799 5.212-.368.174-.139.383-.251.531-.425a1.793 1.793 0 0 0-.205-2.53l-1.43-1.214a1.003 1.003 0 0 0-1.296-.002ZM15.55.251c.45.355.58.988.307 1.495L11.696 9.49a1.967 1.967 0 0 1-2.958.622l-.996-.788a2.018 2.018 0 0 1-.12-3.054l6.42-5.959a1.158 1.158 0 0 1 1.509-.06Zm-.84.798-6.42 5.96a1.01 1.01 0 0 0 .06 1.527l.997.787a.984.984 0 0 0 1.479-.31l4.162-7.745a.182.182 0 0 0-.047-.229.177.177 0 0 0-.23.01Z"></path></svg>'},99962:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="evenodd"><rect width="15" height="8" x="32" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="15" height="8" x="49" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="26" height="8" x="4" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="19" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect><rect width="34" height="8" x="4" y="14" fill="#6A6A6A" fill-rule="nonzero" rx="1"></rect><rect width="15" height="8" x="45" y="4" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="18" height="8" x="25" y="4" fill="#6A6A6A" rx="1"></rect><rect width="24" height="8" x="40" y="14" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="24" height="8" x="4" y="34" fill="#363636" fill-rule="nonzero" rx="1"></rect></g></svg>'},11501:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="evenodd"><path fill="#363636" fill-rule="nonzero" d="M63 14a1 1 0 0 1 1 1v28a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V15a1 1 0 0 1 1-1h58Zm0 1H5v28h58V15Z"></path><path fill="#6A6A6A" fill-rule="nonzero" d="M16 20h44v2H16zM13.055 19.16l-2.662 2.623-1.448-1.433a.56.56 0 0 0-.783 0 .546.546 0 0 0 0 .776l1.733 1.715c.117.116.325.168.498.158.173.007.381-.046.494-.158l2.951-2.906a.546.546 0 0 0 0-.775.56.56 0 0 0-.783 0ZM13.055 27.16l-2.662 2.623-1.448-1.433a.56.56 0 0 0-.783 0 .546.546 0 0 0 0 .776l1.733 1.715c.117.116.325.168.498.158.173.007.381-.046.494-.158l2.951-2.906a.546.546 0 0 0 0-.775.56.56 0 0 0-.783 0ZM13.055 35.16l-2.662 2.623-1.448-1.433a.56.56 0 0 0-.783 0 .546.546 0 0 0 0 .776l1.733 1.715c.117.116.325.168.498.158.173.007.381-.046.494-.158l2.951-2.906a.546.546 0 0 0 0-.775.56.56 0 0 0-.783 0ZM16 28h44v2H16zM16 36h44v2H16z"></path><rect width="60" height="8" x="4" y="4" fill="#6A6A6A" fill-rule="nonzero" rx="2"></rect><path fill="#181818" d="M55 6h6l-3 4zM7 7h46v2H7z"></path></g></svg>'},84190:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="evenodd"><path fill="#363636" fill-rule="nonzero" d="M63 14a1 1 0 0 1 1 1v28a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V15a1 1 0 0 1 1-1h58Zm0 1H5v28h58V15Z"></path><path fill="#6A6A6A" fill-rule="nonzero" d="M16 20h44v2H16z"></path><g filter="url(#filter-1)"><path fill="#999" fill-rule="nonzero" d="m13.055 19.16-2.662 2.623-1.448-1.433a.56.56 0 0 0-.783 0 .546.546 0 0 0 0 .776l1.733 1.715c.117.116.325.168.498.158.173.007.381-.046.494-.158l2.951-2.906a.546.546 0 0 0 0-.775.56.56 0 0 0-.783 0Z"></path></g><path fill="#363636" fill-rule="nonzero" d="M16 28h44v2H16zM16 36h44v2H16z"></path><rect width="60" height="8" x="4" y="4" fill="#6A6A6A" fill-rule="nonzero" rx="2"></rect><path fill="#181818" d="M55 6h6l-3 4zM7 7h46v2H7z"></path></g></svg>'},98248:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><g fill="none" fill-rule="evenodd"><rect width="15" height="8" x="32" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="15" height="8" x="49" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="26" height="8" x="4" y="24" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="19" height="8" x="4" y="4" fill="#6A6A6A" rx="1"></rect><rect width="34" height="8" x="4" y="14" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="15" height="8" x="45" y="4" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="18" height="8" x="25" y="4" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="24" height="8" x="40" y="14" fill="#363636" fill-rule="nonzero" rx="1"></rect><rect width="24" height="8" x="4" y="34" fill="#363636" fill-rule="nonzero" rx="1"></rect></g></svg>'},48891:e=>{"use strict";e.exports=s},34796:e=>{"use strict";e.exports=a},30726:e=>{"use strict";e.exports=i},338:e=>{"use strict";e.exports=l},59587:e=>{"use strict";e.exports=o},15506:e=>{"use strict";e.exports=r}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return(()=>{"use strict";n.r(p),n.d(p,{Sort:()=>de,SqlExpressionBuilder:()=>Y,SqlExpressionBuilderPopup:()=>se,_SqlExpressionBuilder:()=>X,_SqlExpressionBuilderPopup:()=>te});var e={};n.r(e),n.d(e,{InputEditorTypeSelector:()=>l,Sort:()=>o,SqlExpressionBuilder:()=>s,SqlExpressionClause:()=>a,SqlExpressionClauseSet:()=>i});var t=n(48891);function s(e){return t.css`
    &.use-scroll{
      height: 100%;
      .sql-expression-builder{
          height: 100%;
          .sql-expression-container{
            height: 100%;
            .builder-btn-container{
              padding-right: 2px;
            }
            .sql-expression-list{
              padding-right: 2px;
              max-height: calc(100vh - 255px);
              height: calc(100% - 36px);
              overflow-y: auto;
            }
          }
      }
    }

    .sql-expression-builder {
      padding: 5px;
      .no-data-tip{
        text-align: center;
      }

      .builder-btn-container{
        display: flex;
        margin: 0 0 15px 0;
        .add-button-container{
          margin-left: auto;
        }
      }
      .add-button-container{
        display: flex;
      }
    }

    &.small-mode,
    &.medium-mode{
      .sql-expression-builder .sql-expression-clause{
        display: block;
        .clause-controllers-container{
          width: 100%;
          margin-left: 0;
        }
        .clause-style-container{
          .input-editor.is-sql-builder {
            width: ${`calc(100% - ${window.jimuConfig.isBuilder?32:40}px)!important`};
          }
        }
      }
    }

    &.small-mode{ /* 350px */
      .sql-expression-builder{
        padding: 0;
        .sql-expression-container{
          min-width: 300px;
          overflow-x: auto;
          overflow-y: hidden;
          .builder-btn-container{
            margin-bottom: 1rem;
          }
          .sql-expression-single{
            padding: 0.25rem 1rem 0.5rem 1rem;
            margin-bottom: 0.5rem;
            .clause-main-container{
              display: block !important;

              .clause-field-and-operator{
                margin: 0.5rem 0 !important;
                justify-content: space-between;
                .clause-field-container, .clause-operator-container{
                  margin: 0;
                  width: calc(50% - 0.25rem);
                }
              }
              .clause-style-container{
                width: 100%;
                margin: 0.5rem 0 !important;
              }
            }
          }
          .sql-expression-set{
            .btn-container{
              padding: 0.5rem 1rem 0.5rem 1rem;
            }
            .sql-expression-single{
              margin-bottom: 0;
            }
          }
          .add-button-container{
            align-content: space-between;
            .jimu-btn{
              width: calc(50% - 7px);
            }
          }
        }
      }
    }
    &.medium-mode{ /* 350px - 614px */
      .sql-expression-builder{
        .clause-field-container,
        .clause-operator-container{
          width: 123px;
        }
        .clause-style-container{
          width: calc(100% - 270px);
        }
      }
    }
    &.large-mode{ /* 915px */
      .sql-expression-builder{
        .clause-field-container,
        .clause-operator-container{
          width: 150px;
        }
        .clause-style-container{
          width: 380px;
        }
      }
    }

  `}function a(e){const s=e.theme;return t.css`
    .sql-expression-single {
      background-color: ${s.colors.palette.light[400]};
      padding: 13px 5px;
      margin-bottom: 0.5rem;

      .sql-expression-clause{
        display: flex;

        .clause-main-container{
          display: flex;
          .clause-field-and-operator{
            display: flex;
            .clause-field-container,
            .clause-operator-container{
              margin: 0 4px;
            }
          }

          .clause-style-container{
            display: flex;
            flex-grow: 1;
            margin: 0 4px;
            .source-type-selector{
              margin-right: 8px;
              .jimu-btn{
                &.dropdown-icon-dot .icon-btn-sizer:after {
                  border-top: 2px solid #fff;
                }
                .jimu-icon {
                  color: #fff !important;
                }
              }
            }
          }
        }

        .clause-controllers-container{
          width: 150px;
          margin-left: 12px;
          margin-right: 1px;
          display: flex;
          justify-content: flex-end;

          .case-sensitive-btn, .more-input-setting-btn, .duplicate-btn, .delete-btn{
            margin: 0 2px;
            .jimu-badge{
              border-color: ${s.colors.black};
            }
          }

          .case-sensitive-btn.disabled, .case-sensitive-btn.disabled:hover, .case-sensitive-btn:disabled:hover{
            background: ${s.colors.secondary};
            background-color: ${s.colors.palette.light[400]};
            border: none;
          }
          .case-sensitive-btn:disabled .jimu-icon, .more-input-setting-btn:disabled .jimu-icon{
            opacity: 0.5;
          }

          /*temp for beta2*/
          .more-input-setting-btn-active,
          .dropdown-active {
            background-color: ${s.colors.primary} !important;
            color: ${s.colors.black} !important;
          }
        }
      }

      .ask-for-value-container{
        margin-top: 1.5rem;
        margin-left: 8px;
        .ask-for-value-radio{
          display: flex;
          margin: 10px 0;
        }
        .ask-for-value-options{
          margin-left: 20px;
          .ask-for-value-item{
            .ask-for-value-item-label{
              color: ${s.colors.palette.dark[400]};
              margin-bottom: 3px;
            }
          }
          .ask-for-value-middle-item{
            margin: 0 0.1rem;
          }
        }
      }
    }
  `}function i(e){const s=e.theme;return t.css`
    .sql-expression-set {
      margin-bottom: 0.5rem;
      background-color: ${s.colors.palette.light[400]};

      .btn-container{
        .jimu-btn{
          font-size: 12px;
        }
        display: flex;
        padding: 11px 5px 11px 10px;

        .and-or-container{
          margin: 0;
        }
        .add-button-container{
          margin-left: auto;
          margin-right: 0.125rem;
        }
      }

      .sql-expression-single{
        margin: 0;
        border: 0 !important;
        border-top: ${window.jimuConfig.isBuilder?4:1}px solid ${s.colors.palette.light[300]} !important;
      }
    }

  `}const l=e=>{const s=e.theme;return t.css`
    .style-button{
    }
    .style-warning{
      color: ${s.colors.palette.warning[500]};
    }
    .style-popper{
      .style-popper-content{
        width: 180px;
        display: flex;
        flex-wrap: wrap;
        padding: 10px;
        max-height: 300px;
        height: auto;
        overflow: auto;

        .style-item{
          margin: 5px;
          padding: 0;
          background-color: ${s.colors.palette.light[200]};

          &.active {
            outline: 2px solid ${s.colors.palette.primary[500]};
          }
        }
      }

    }
  `},o=e=>{const s=e.theme,a=s.colors,{emptyHintTopSpaceSize:i}=e,l=i?t.polished.rem(i-16):t.polished.rem(70);return t.css`
    width:100%;
    .sort-title {
        margin-bottom: 20px;
        color: ${a.black};
        font-size: 16px;
    }
    .padding-0 {
        padding: 0;
    }
    .ml-0 {
        margin-left: 0;
    }
    .delete-all-button {
        cursor: pointer;
    }
    .jimu-tree-item__body {
        margin-bottom: 10px;
        background: ${a.palette.light[500]};
        padding: 10px 10px 10px 0;
        box-shadow: 0 0 0 2px ${t.polished.rgba(a.white,.3)};
        flex: 1;
    }
    .multi-sort-select-con {
        & {
            display: flex;
            align-items: center;
            flex: 1;
        }
        .sort-field-selector {
            background:${a.palette.secondary[200]};
            border-radius: 2px;
            flex: 1;
            width: 0
        }

        .delete-button {
            cursor: pointer;
            text-align:right;
            margin-left: ${t.polished.rem(2)};
        }
        .delete-button svg {
            margin-right:0;
        }
    }
    .delete-sort-con {
        & {
            margin-left:5px;
        }
        .sort-button-l {
            border-radius: 2px 0 0 2px;
            border-right:none;
        }
        .sort-button-r {
            border-radius: 0px 2px 2px 0px;
            border-left:none;
        }
        .sort-button {
            border-color: ${s.border.color};
        }
        svg {
            margin-right:0;
        }
    }
    .add-option .add-option-button{
        & {
            width:100%;
            font-size:14px;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: ${t.polished.rem(16)};
        }
        svg {
            margin-right:0;
            margin-right:5px;
        }
    }
    .no-sort-remind {
        margin: ${l} auto 0;
        color: ${a.palette.light[800]};
        font-size: 13px;
        text-align: center;
    }
  `};var r=n(34796),h=n(30726),d=n(338),c=n(15506);class u extends t.React.PureComponent{constructor(){super(...arguments),this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.onChange=e=>{this.props&&this.props.onChange(e.target.value)}}render(){const e=this.props.list?this.props.list:this.props.value?[this.props.value]:[];return t.React.createElement(h.Select,{value:this.props.value||"",onChange:this.onChange,size:window.jimuConfig.isBuilder?"sm":"default"},e.map(((e,s)=>{const a=this.i18nMessage((0,c.getCamelCase)(e));return t.React.createElement("option",{key:s,value:e,label:a},a)})))}}const m=(0,t.injectIntl)(u);var g=n(63335),y=n.n(g);const v=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:y()},i)):t.React.createElement("svg",Object.assign({className:l},i))};class f extends t.React.PureComponent{constructor(e){super(e),this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.onTypeSelect=e=>{e!==this.props.sourceType&&this.props.onSelect(e)},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})},this.state={isOpen:!1}}render(){return(0,t.jsx)("div",{className:"source-type-selector"},(0,t.jsx)(h.Dropdown,{menuItemCheckMode:"singleCheck",activeIcon:!0},(0,t.jsx)(h.DropdownButton,{icon:!0,arrow:!1,dot:!0,size:window.jimuConfig.isBuilder?"sm":"default",type:"primary","data-toggle":"dropdown",title:this.i18nMessage("sourceType"),onClick:this.toggle},(0,t.jsx)(v,{className:"text-dark dropdown-icon"})),(0,t.jsx)(h.DropdownMenu,{showArrow:!0,strategy:"fixed",appendToBody:!1},(0,t.jsx)(h.DropdownItem,{header:!0},this.i18nMessage("sourceType")),this.props.list&&Object.keys(this.props.list).map(((e,s)=>(0,t.jsx)(h.DropdownItem,{key:s,onClick:()=>{this.onTypeSelect(e)},active:this.props.sourceType===e},this.i18nMessage((0,c.getCamelCase)(e))))))))}}const x=(0,t.injectIntl)(f);var b=n(28455),O=n.n(b);const S=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:O()},i)):t.React.createElement("svg",Object.assign({className:l},i))},C=[{name:"flip",enabled:!0}];class M extends t.React.PureComponent{constructor(e){super(e),this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.onTypeSelect=(e,s)=>{if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),s!==this.state.inputEditorType)if([c.ClauseInputEditor.UniquePillWrapSelector,c.ClauseInputEditor.MultiplePillWrapSelector].includes(s))if(this.props.codedValues)this.changeValueOptionByInputType(s,this.props.codedValues.length);else{const e={where:"(1=1)",returnGeometry:!1,outFields:[this.props.fieldName],returnDistinctValues:!0};this.props.dataSource.queryCount(e,{scope:t.QueryScope.InConfigView,widgetId:"check_count"}).then((e=>{this.changeValueOptionByInputType(s,e.count)}))}else this.changeValueOptionByInputType(s);else this.setState({isWarningShown:!1})},this.changeValueOptionByInputType=(e,s)=>{s&&s>20?this.setState({isWarningShown:!0}):(this.setState({inputEditorType:e}),t.lodash.debounce((()=>{this.props.onSelect(e),this.toggle()}),200)())},this.toggle=()=>{this.state.isOpen&&t.lodash.debounce((()=>{var e;null===(e=this.styleBtnRef)||void 0===e||e.focus()}),200)(),this.setState({isWarningShown:!1,isOpen:!this.state.isOpen})},this.state={isOpen:!1,isWarningShown:!1,inputEditorType:this.props.inputEditorType}}componentDidUpdate(e,t){e.inputEditorType!==this.props.inputEditorType&&this.setState({inputEditorType:this.props.inputEditorType})}render(){return(0,t.jsx)("div",{className:(0,t.classNames)("d-flex style-type-selector align-items-center",this.props.className)},(0,t.jsx)("div",{className:"style-button"},(0,t.jsx)(h.Button,{ref:e=>{this.styleBtnRef=e},size:"sm",className:"pl-3 pr-3 text-nowrap",type:"primary",onClick:this.toggle,"aria-label":this.i18nMessage("chooseStyle")},this.i18nMessage("chooseStyle"))),this.state.isWarningShown&&(0,t.jsx)("div",{className:"style-warning ml-2",role:"alert","aria-live":"polite"},(0,t.jsx)(S,{className:"mr-2"}),this.i18nMessage("invalidStyleWarnning")),(0,t.jsx)(h.Popper,{strategy:"fixed",disablePortal:!0,reference:this.styleBtnRef,open:this.state.isOpen,toggle:this.toggle,showArrow:!0,className:this.props.className,modifiers:C},(0,t.jsx)("div",{className:"style-popper"},(0,t.jsx)("div",{className:"style-popper-content"},this.props.list.map(((e,s)=>{const a=this.i18nMessage((0,c.getCamelCase)(e));return(0,t.jsx)(h.Tooltip,{title:a,placement:"bottom",key:s},(0,t.jsx)(h.Button,{icon:!0,type:"tertiary","aria-label":a,onClick:t=>{this.onTypeSelect(t,e)},className:(0,t.classNames)("style-item",{active:this.state.inputEditorType===e})},(0,t.jsx)(h.Icon,{className:"thumbnail",width:68,height:48,currentColor:!1,icon:n(79594)(`./style_${e.toLowerCase()}.svg`)})))}))))))}}const j=(0,r.withStyles)((0,t.injectIntl)(M),"InputEditorTypeSelector");var w=n(41553),A=n.n(w);const z=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:A()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var N=n(50970),T=n.n(N);const k=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:T()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var B=n(55339),V=n.n(B);const L=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:V()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var D=n(9281),E=n.n(D);const I=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:E()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var F=n(12633),_=n.n(F);const P=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:_()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var R=n(19190),q=n.n(R);const H=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:q()},i)):t.React.createElement("svg",Object.assign({className:l},i))},Z=[t.ClauseSourceType.SingleSelectFromUnique,t.ClauseSourceType.MultipleSelectFromUnique];class U extends t.React.PureComponent{constructor(e){super(e),this.getFieldObj=()=>{const e=this.props.dataSource.getSchema().fields;this.fieldObj=this.props.clause.jimuFieldName?(0,t.Immutable)(e[this.props.clause.jimuFieldName]):null},this._updateTwoStates=(e,t,s)=>{this._updateCaseSensitiveState(e,t),this._updateAskForValueState(e,t),s&&this.setState({rerender:!this.state.rerender})},this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.isCascadeSupported=()=>Z.includes(this.props.clause.valueOptions.sourceType),this.getOperatorsByField=e=>{let t=[];return e&&e.type&&(t=(0,c.getOperatorsByShortType)(e.type,this.props.isHosted)),t},this.deleteClause=()=>{this.props.onChange(null)},this.toggleCaseSensitive=()=>{this.onChanged({caseSensitive:!this.props.clause.caseSensitive})},this.duplicateClause=()=>{this.props.onChange(this.props.clause,!0)},this.toggleValueLabelPanel=()=>{this.setState({isValueLabelPanelShown:!this.state.isValueLabelPanelShown})},this.getLabel=(e=this.props.clause)=>{let t="";if(e.operator){const s=this.i18nMessage((0,c.getCamelCase)(e.operator));t=(0,c.getClauseLabel)(e,this.fieldObj,s)}return t},this.onAskForValueOptsChange=e=>{const t=Object.assign({},this.props.clause.askForValueOptions,e);this.onChanged({askForValueOptions:t})},this.onLabelAccept=(e,s)=>{const a=this.i18nMessage((0,c.getCamelCase)(this.props.clause.operator)),i=(0,c.getClauseDefaultLabel)(this.props.clause,this.fieldObj,a);if(e=e.trim(),s){if(""===e||e===i)return this.setState({displayLabel:i}),void t.lodash.debounce((()=>{this.onChanged({displayLabel:null})}),200)();this.setState({displayLabel:e}),this.onChanged({displayLabel:e})}else{const t=e===i?null:e;this.onAskForValueOptsChange({label:t})}},this.onLabelChange=e=>{this.setState({displayLabel:e.target.value})},this.setValueLabelStatus=e=>{let s={displayType:e,askForValueOptions:null,displayLabel:null};if(e===t.ClauseDisplayType.UseAskForValue)s.askForValueOptions=this.getAskForValueOptions();else{const e=this.props.clause.valueOptions,t=this.displayTypeList[e.sourceType][0];if(e.inputEditor!==t){const e=Object.assign({},this.props.clause.valueOptions,{inputEditor:t});s=Object.assign({},s,{valueOptions:e})}}this.onChanged(s)},this.setDisplayLabelCheckbox=e=>{let s=t.ClauseDisplayType.None,a=null;e&&(s=t.ClauseDisplayType.UseLabel,a=this.getLabel(Object.assign({},this.props.clause,{displayType:t.ClauseDisplayType.UseLabel}))),this.setState({displayLabel:a}),this.setValueLabelStatus(s)},this.getAskForValueOptions=(e=!1)=>({label:null,display:t.ClauseLabelDisplay.Block,hint:"",cascade:e||this.isCascadeSupported()?t.ClauseCascade.None:null}),this.onFieldChange=e=>{const s=e[0];if(!s)return;this.fieldObj=(0,t.Immutable)(s);const a=this._updateOptionsByField(s);this._updateTwoStates(this.operatorList[0],a.sourceType),this.onChanged({jimuFieldName:s.jimuName,operator:this.operatorList[0],caseSensitive:!1,displayType:t.ClauseDisplayType.None,askForValueOptions:null,displayLabel:null,valueOptions:a})},this._updateOptionsByField=(e,t)=>(this.operatorList=this.getOperatorsByField(e),t=t||this.operatorList[0],this._updateOptionsByOperator(e,t,e.jimuName)),this.onOperatorChange=e=>{const s=this._updateOptionsByOperator(this.fieldObj,e,this.fieldObj.jimuName);this._updateTwoStates(e,s.sourceType);const a=this.shouldOpenAskForValueAutomatically(s.sourceType);this.onChanged({operator:e,caseSensitive:!1,displayType:a?t.ClauseDisplayType.UseAskForValue:t.ClauseDisplayType.None,askForValueOptions:a?this.getAskForValueOptions(a):null,displayLabel:null,valueOptions:s})},this._updateOptionsByOperator=(e,t,s)=>{const a=(0,c.getDisplayTypes)(this.props.mode,e,t,this.props.dataSource,s);return this.displayTypeList=a.displayTypes,this.codedValues=a.codedValues,(0,c.getDefaultClauseValObj)(a.defaultSourceType,a.defaultInputEditorType)},this.onValueOptsChange=e=>{e.inputEditor!==this.props.clause.valueOptions.inputEditor&&(e.inputEditor=this.props.clause.valueOptions.inputEditor),this.onChanged({valueOptions:e})},this.isUniqueOrMultipleOnOutputDS=e=>{const s=this.props.dataSource.getDataSourceJson().isOutputFromWidget,a=[t.ClauseSourceType.SingleSelectFromUnique,t.ClauseSourceType.MultipleSelectFromUnique].includes(e);return s&&a},this.isOutputDsAndNoCodedValuesWhenUniqueOrMultiple=e=>this.isUniqueOrMultipleOnOutputDS(e)&&!this.codedValues,this.shouldOpenAskForValueAutomatically=e=>[t.ClauseSourceType.SingleSelectFromPredefined,t.ClauseSourceType.MultipleSelectFromPredefined].includes(e)||this.isUniqueOrMultipleOnOutputDS(e),this._resetToDefaultDateInputEditor=e=>{var s,a;return this.props.mode===t.SqlExpressionMode.All&&this.fieldObj.type===t.JimuFieldType.Date&&e===t.ClauseSourceType.UserInput&&(null===(a=null===(s=this.fieldObj.format)||void 0===s?void 0:s.dateFormat)||void 0===a?void 0:a.indexOf("Time"))>0},this.onSourceTypeSelect=e=>{let s="";Object.keys(this.displayTypeList).some((t=>{if(t===e)return s=this.displayTypeList[t][0],this._resetToDefaultDateInputEditor(t)&&(s=this.displayTypeList[t][1]),!0})),this._updateAskForValueState(this.props.clause.operator,e);const a=(0,c.getDefaultClauseValObj)(e,s),i=this.shouldOpenAskForValueAutomatically(e);this.onChanged({valueOptions:a,displayType:i?t.ClauseDisplayType.UseAskForValue:t.ClauseDisplayType.None,askForValueOptions:i?this.getAskForValueOptions(i):null,displayLabel:null})},this.onInputTypeSelect=e=>{this.onChanged({valueOptions:Object.assign({},this.props.clause.valueOptions,{inputEditor:e})})},this.getValueOptions=()=>{const e=this.props.clause.valueOptions;if(this.displayTypeList&&this.displayTypeList[e.sourceType]){const s=this.displayTypeList[e.sourceType][0];if(this.fieldObj.type===t.JimuFieldType.Date&&e.sourceType===t.ClauseSourceType.UserInput)return e;if(e.inputEditor!==s)return Object.assign({},e,{inputEditor:s})}return e},this.getControllers=(e,s)=>{const a=!this.props.isHosted&&s&&e.caseSensitive;return(0,t.jsx)("div",{className:"clause-controllers-container"},this.state.supportCaseSensitive&&(0,t.jsx)(h.Button,{className:"case-sensitive-btn",onClick:this.toggleCaseSensitive,icon:!0,size:"sm",type:"tertiary",disabled:!(!this.props.isHosted&&s),title:this.i18nMessage("caseSensitive"),"aria-label":this.i18nMessage("caseSensitive"),"aria-pressed":a},(0,t.jsx)(h.Badge,{dot:!0,color:"primary",hideBadge:!a},(0,t.jsx)(I,null))),this.props.mode===t.SqlExpressionMode.All&&(0,t.jsx)(h.Button,{type:"tertiary",onClick:this.toggleValueLabelPanel,icon:!0,size:"sm",className:(0,t.classNames)("more-input-setting-btn",{"more-input-setting-btn-active":this.state.isValueLabelPanelShown}),title:this.i18nMessage("moreInputSettings"),"aria-label":this.i18nMessage("moreInputSettings"),"aria-pressed":e.displayType!==t.ClauseDisplayType.None,"aria-expanded":this.state.isValueLabelPanelShown},(0,t.jsx)(h.Badge,{dot:!0,color:"primary",hideBadge:e.displayType===t.ClauseDisplayType.None},(0,t.jsx)(z,null))),(0,t.jsx)(h.Button,{type:"tertiary",onClick:this.duplicateClause,icon:!0,size:"sm",className:"duplicate-btn",title:this.i18nMessage("duplicate"),"aria-label":this.i18nMessage("duplicate")},(0,t.jsx)(k,null)),(0,t.jsx)(h.Button,{type:"tertiary",onClick:this.deleteClause,icon:!0,size:"sm",className:"delete-btn",title:this.i18nMessage("deleteClause"),"aria-label":this.i18nMessage("deleteClause")},(0,t.jsx)(L,null)))},this.isPredefinedWithNoValues=e=>{var s;return[t.ClauseSourceType.SingleSelectFromPredefined,t.ClauseSourceType.MultipleSelectFromPredefined].includes(e.valueOptions.sourceType)&&(!e.valueOptions.value||0===(null===(s=e.valueOptions.value)||void 0===s?void 0:s.length))},this.onChanged=e=>{let t=Object.assign({},this.props.clause,e),s=!0;if(this.isPredefinedWithNoValues(t)?s=!1:null!==t.askForValueOptions||t.operator.includes("BLANK")||(s=!(null===t.valueOptions.value||t.valueOptions.value.filter((e=>null===e||null===(null==e?void 0:e.value))).length>0)),s!==t.valueOptions.isValid){const e=(0,c.getDefaultClauseValObj)(t.valueOptions.sourceType,t.valueOptions.inputEditor,t.valueOptions.value,s);t=Object.assign({},t,{valueOptions:e})}this.props.onChange(t)},this._isMounted=!1,this.getFieldObj(),this.codedValues=this.props.clause&&this.fieldObj?this.getCodedValues():null,this.state={rerender:!1,displayLabel:this.getLabel(),supportCaseSensitive:!1,supportAskForValue:!1,isValueLabelPanelShown:!1}}getCodedValues(){return(0,c.getInputEditorListByOperatorAndSourceType)(this.props.clause.operator,this.props.clause.valueOptions.sourceType,this.props.dataSource,this.fieldObj.jimuName).codedValues}componentDidMount(){this._isMounted=!1,this.props.clause.operator&&(this._updateOptionsByField(this.fieldObj,this.props.clause.operator),this._updateTwoStates(this.props.clause.operator,this.props.clause.valueOptions.sourceType,!0))}componentDidUpdate(e,t){var s,a;if(this._isMounted)return;const i=this.props.clause.jimuFieldName!==e.clause.jimuFieldName,l=this.props.clause.operator!==e.clause.operator;if(i&&(this.getFieldObj(),this.operatorList=this.getOperatorsByField(this.fieldObj)),i||l){const e=(0,c.getDisplayTypes)(this.props.mode,this.fieldObj,this.props.clause.operator,this.props.dataSource,this.fieldObj.jimuName);this.displayTypeList=e.displayTypes,this.codedValues=e.codedValues,this._updateTwoStates(this.props.clause.operator,this.props.clause.valueOptions.sourceType,!0)}else(null===(s=this.props.clause.valueOptions)||void 0===s?void 0:s.value)!==(null===(a=e.clause.valueOptions)||void 0===a?void 0:a.value)&&null===this.props.clause.displayLabel&&this.setState({displayLabel:this.getLabel()})}componentWillMount(){this._isMounted=!0}_updateCaseSensitiveState(e,t){const s=(0,c.isCaseSensitiveSupportedByOperatorAndSourceType)(e,t);this.setState({supportCaseSensitive:s})}_updateAskForValueState(e,t){const s=(0,c.isAskForValueSupportedByOperatorAndSourceType)(e,t);this.setState({supportAskForValue:s})}render(){var e,s,a,i,l;const{clause:o}=this.props,r=this.getLabel(),n=!o.operator||!o.operator.includes("BLANK"),p=this.shouldOpenAskForValueAutomatically(null===(e=o.valueOptions)||void 0===e?void 0:e.sourceType);return(0,t.jsx)("div",{className:this.props.className?this.props.className:""},(0,t.jsx)("div",{className:(0,t.classNames)("sql-expression-single",{"surface-1":!window.jimuConfig.isBuilder})},(0,t.jsx)("div",{className:"sql-expression-clause"},this.props.sizeMode!==c.SqlExpressionSizeMode.Large&&this.getControllers(o,n),(0,t.jsx)("div",{className:"w-100 clause-main-container"},(0,t.jsx)("div",{className:"clause-field-and-operator"},(0,t.jsx)("div",{className:"clause-field-container"},(0,t.jsx)(d.FieldSelector,{dataSources:[this.props.dataSource],useDefault:!0,onChange:this.onFieldChange,selectedFields:this.fieldObj?(0,t.Immutable)([this.fieldObj.jimuName]):null,isDataSourceDropDownHidden:!0,isSearchInputHidden:!0,useDropdown:!0,dropdownProps:{size:window.jimuConfig.isBuilder?"sm":"default"}})),(0,t.jsx)("div",{className:"clause-operator-container"},(0,t.jsx)(m,{onChange:this.onOperatorChange,value:o.operator,list:this.operatorList}))),(0,t.jsx)("div",{className:"clause-style-container"},n&&(0,t.jsx)(x,{onSelect:this.onSourceTypeSelect,list:this.displayTypeList,sourceType:o.valueOptions.sourceType}),n&&(0,t.jsx)(c.InputEditorRender,{onChange:this.onValueOptsChange,dataSource:this.props.dataSource,codedValues:this.codedValues,valueOptions:this.getValueOptions(),fieldObj:this.fieldObj,runtime:!window.jimuConfig.isBuilder,isFromBuilder:!0,isSmallSize:this.props.sizeMode===c.SqlExpressionSizeMode.Small})),this.props.sizeMode===c.SqlExpressionSizeMode.Large&&this.getControllers(o,n))),this.state.isValueLabelPanelShown&&(0,t.jsx)("div",{className:"ask-for-value-container"},(0,t.jsx)("div",{className:"ask-for-value-radio d-flex mr-4"},(0,t.jsx)(h.Label,{check:!0,className:"d-flex"},(0,t.jsx)(h.Radio,{style:{cursor:"pointer"},className:"mr-2 align-text-bottom",onChange:e=>{this.setValueLabelStatus(t.ClauseDisplayType.None)},checked:o.displayType!==t.ClauseDisplayType.UseAskForValue,disabled:p}),this.i18nMessage("unAskForValues"))),o.displayType!==t.ClauseDisplayType.UseAskForValue&&(0,t.jsx)("div",{className:"ask-for-value-options d-flex align-items-center mt-2"},(0,t.jsx)(h.Label,{check:!0},(0,t.jsx)(h.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:o.displayType===t.ClauseDisplayType.UseLabel,onChange:e=>{this.setDisplayLabelCheckbox(e.target.checked)}}),this.i18nMessage("displayLabel")),o.displayType===t.ClauseDisplayType.UseLabel&&(0,t.jsx)("div",{className:"ml-2 w-25"},(0,t.jsx)(h.TextInput,{size:"sm",type:"text","aria-label":this.i18nMessage("displayLabel"),value:this.state.displayLabel,onChange:this.onLabelChange,onAcceptValue:e=>{this.onLabelAccept(e,!0)}}))),(0,t.jsx)("div",{className:"d-flex align-items-center"},this.state.supportAskForValue&&(0,t.jsx)("div",{className:"ask-for-value-radio d-flex"},(0,t.jsx)(h.Label,{check:!0,className:"d-flex"},(0,t.jsx)(h.Radio,{style:{cursor:"pointer"},className:"mr-2 align-text-bottom",onChange:()=>{this.setValueLabelStatus(t.ClauseDisplayType.UseAskForValue)},checked:o.displayType===t.ClauseDisplayType.UseAskForValue,disabled:p}),this.i18nMessage("askForValues"))),this.state.supportAskForValue&&o.displayType===t.ClauseDisplayType.UseAskForValue&&this.displayTypeList&&this.displayTypeList[o.valueOptions.sourceType].length>1&&!this.isOutputDsAndNoCodedValuesWhenUniqueOrMultiple(o.valueOptions.sourceType)&&(0,t.jsx)("div",{className:"ask-for-value-item ask-for-value-middle-item ml-5"},(0,t.jsx)(j,{onSelect:this.onInputTypeSelect,inputEditorType:o.valueOptions.inputEditor,list:this.displayTypeList[o.valueOptions.sourceType],fieldName:null===(s=this.fieldObj)||void 0===s?void 0:s.name,codedValues:this.codedValues,dataSource:this.props.dataSource}))),this.state.supportAskForValue&&o.displayType===t.ClauseDisplayType.UseAskForValue&&(0,t.jsx)("div",{className:"ask-for-value-options d-flex"},(0,t.jsx)(h.Label,{className:"ask-for-value-item col-md-3 p-1"},(0,t.jsx)("div",{className:"ask-for-value-item-label"},this.i18nMessage("label")),(0,t.jsx)("div",{className:"d-flex"},(0,t.jsx)(h.TextInput,{size:"sm",type:"text",style:{width:"calc(100% - 55px)"},defaultValue:r,onChange:e=>{this.onLabelAccept(e.target.value)}}),(0,t.jsx)(h.AdvancedButtonGroup,{className:"label-display-buttons pl-1"},(0,t.jsx)(h.Button,{onClick:()=>{this.onAskForValueOptsChange({display:t.ClauseLabelDisplay.Block})},icon:!0,size:"sm",disabled:""===r,title:this.i18nMessage("inlineLabel"),"aria-label":this.i18nMessage("inlineLabel"),active:(null===(a=o.askForValueOptions)||void 0===a?void 0:a.display)===t.ClauseLabelDisplay.Block},(0,t.jsx)(H,{autoFlip:!0})),(0,t.jsx)(h.Button,{onClick:()=>{this.onAskForValueOptsChange({display:t.ClauseLabelDisplay.Inline})},icon:!0,size:"sm",disabled:""===r,title:this.i18nMessage("separateLabel"),"aria-label":this.i18nMessage("separateLabel"),active:!(null===(i=o.askForValueOptions)||void 0===i?void 0:i.display)||(null===(l=o.askForValueOptions)||void 0===l?void 0:l.display)===t.ClauseLabelDisplay.Inline},(0,t.jsx)(P,{autoFlip:!0}))))),(0,t.jsx)(h.Label,{className:"ask-for-value-item ask-for-value-middle-item col-md-3 p-1"},(0,t.jsx)("div",{className:"ask-for-value-item-label"},this.i18nMessage("hint")),(0,t.jsx)(h.TextInput,{type:"text",defaultValue:o.askForValueOptions?o.askForValueOptions.hint:"",size:"sm",onBlur:e=>{this.onAskForValueOptsChange({hint:e.target.value})}})),this.isCascadeSupported()&&(0,t.jsx)(h.Label,{className:"ask-for-value-item col-md-5 p-1"},(0,t.jsx)("div",{className:"ask-for-value-item-label",title:this.i18nMessage("cascade")},this.i18nMessage("cascade")),(0,t.jsx)(h.Select,{size:"sm",value:o.askForValueOptions?o.askForValueOptions.cascade:t.ClauseCascade.None,onChange:e=>{this.onAskForValueOptsChange({cascade:e.target.value})}},(0,t.jsx)("option",{key:0,value:t.ClauseCascade.None},this.i18nMessage("noneCascadeTip")),(0,t.jsx)("option",{key:1,value:t.ClauseCascade.Previous},this.i18nMessage("previousCascadeTip")),(0,t.jsx)("option",{key:2,value:t.ClauseCascade.All},this.i18nMessage("allCascadeTip"))))))))}}const $=(0,r.withStyles)((0,t.injectIntl)(U),"SqlExpressionClause");var G=n(34750),W=n.n(G);const Q=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:W()},i)):t.React.createElement("svg",Object.assign({className:l},i))};class J extends t.React.PureComponent{constructor(e){super(e),this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.addClause=e=>{e.__id=(0,t.uuidv1)(),this.onChange({parts:this.props.clauseSet.parts.concat(e)})},this.duplicateClauseSet=()=>{this.props.onChange(this.props.clauseSet,!0)},this.deleteClauseSet=()=>{this.props.onChange(null)},this.changeAndOR=e=>{this.onChange({logicalOperator:e})},this.onClauseChange=(e,s,a)=>{if(a)return void this.addClause(e.asMutable({deep:!0}));const i=this.props.clauseSet.parts,l={};null===e&&2===i.length&&(l.logicalOperator=t.ClauseLogic.And),2===i.length&&2===i.filter((e=>""===e.jimuFieldName)).length?(l.parts=(0,c.getClauseArrayByChange)(i,e,"clause_set_clause_0"),e.__id=e.__id+"-2",l.parts=(0,c.getClauseArrayByChange)(l.parts,e,"clause_set_clause_1")):l.parts=(0,c.getClauseArrayByChange)(i,e,s),0!==l.parts.length?this.onChange(l):this.props.onChange(null)},this.onChange=e=>{const t=Object.assign({},this.props.clauseSet,e);this.props.onChange(t)},this.LogicalOperator=null}render(){const{logicalOperator:e,parts:s}=this.props.clauseSet,a=s||(0,t.Immutable)([]);return(0,t.jsx)("div",{className:this.props.className?this.props.className:""},0===a.length?null:(0,t.jsx)("div",{className:(0,t.classNames)("sql-expression-set",{"surface-1":!window.jimuConfig.isBuilder})},(0,t.jsx)("div",{className:"btn-container"},a.length<2?null:(0,t.jsx)(h.AdvancedButtonGroup,{className:"and-or-container"},(0,t.jsx)(h.Button,{active:e===t.ClauseLogic.And,onClick:()=>{this.changeAndOR(t.ClauseLogic.And)},size:"sm"},this.i18nMessage("and")),(0,t.jsx)(h.Button,{active:e===t.ClauseLogic.Or,onClick:()=>{this.changeAndOR(t.ClauseLogic.Or)},className:"ml-0",size:"sm"},this.i18nMessage("or"))),(0,t.jsx)("div",{className:"add-button-container"},(0,t.jsx)(h.Button,{type:"tertiary",onClick:e=>{this.addClause((0,c.getDefaultSingleClause)())},className:"mr-1",icon:!0,size:"sm",title:this.i18nMessage("addClause"),"aria-label":this.i18nMessage("addClause")},(0,t.jsx)(Q,null)),(0,t.jsx)(h.Button,{type:"tertiary",onClick:e=>{this.duplicateClauseSet()},className:"mr-1",icon:!0,size:"sm",title:this.i18nMessage("duplicate"),"aria-label":this.i18nMessage("duplicate")},(0,t.jsx)(k,null)),(0,t.jsx)(h.Button,{type:"tertiary",onClick:this.deleteClauseSet,icon:!0,size:"sm",title:this.i18nMessage("deleteClauseSet"),"aria-label":this.i18nMessage("deleteClauseSet")},(0,t.jsx)(L,null)))),a.map(((e,s)=>(0,t.jsx)($,{key:e.__id,clause:e,isHosted:this.props.isHosted,mode:this.props.mode,sizeMode:this.props.sizeMode,dataSource:this.props.dataSource,onChange:(e,t)=>{this.onClauseChange(e,"clause_set_clause_"+s,t)}})))))}}const K=(0,r.withStyles)((0,t.injectIntl)(J),"SqlExpressionClauseSet");class X extends t.React.PureComponent{constructor(e){var s;super(e),this.getDataSource=()=>{const e=this.props.dataSource;return e.dataViewId===t.CONSTANTS.SELECTION_DATA_VIEW_ID?e.getMainDataSource():e},this.i18nMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}),this.addClauseByType=(e,s)=>{s||(s=e?(0,c.getDefaultSingleClause)():(0,c.getDefaultClauseSet)(),s=this.getPartsArray((0,t.Immutable)([s]),"add")[0]);const a=this.state.partsArray.concat(s);this.setState({partsArray:a});const i=a.length<2?{parts:a,logicalOperator:t.ClauseLogic.And}:{parts:a};this.onChange(i)},this.changeAndOR=e=>{this.onChange({logicalOperator:e})},this.onClauseChange=(e,s,a)=>{if(a){const s=this.getPartsArray((0,t.Immutable)([e]),"update")[0];return void this.addClauseByType(e.type===t.ClauseType.Single,s)}const i=(0,c.getClauseArrayByChange)(this.state.partsArray.asMutable({deep:!0}),e,s);this.setState({partsArray:(0,t.Immutable)(i)}),this.onChange({parts:i})},this.onChange=e=>{let s=this.props.expression||(0,t.Immutable)({logicalOperator:t.ClauseLogic.And,parts:[]});if(e.parts){const a=this.getPartsArray((0,t.Immutable)(e.parts),"remove");s=s.set("parts",a)}e.logicalOperator&&(s=s.set("logicalOperator",e.logicalOperator));const a=t.dataSourceUtils.getArcGISSQL(s,this.getDataSource());a.sql===s.sql&&a.displaySQL===s.displaySQL||(s=s.set("sql",a.sql).set("displaySQL",a.displaySQL)),this.props.onChange&&this.props.onChange(s)},this.getPartsArray=(e,s)=>{const a=e.map((e=>{var a;if((e=this._getNewClauseOrClauseSet(e,s).clause).type===t.ClauseType.Set){let t=!1;const i=null===(a=e.parts)||void 0===a?void 0:a.map((e=>{const a=this._getNewClauseOrClauseSet(e,s);return t=a.isUpdated||t,a.clause}));t&&(e=e.set("parts",i))}return e}));return a},this._getNewClauseOrClauseSet=(e,s)=>{let a=!0;return"remove"===s?e=t.Immutable.without(e,"__id"):"update"===s?e=t.Immutable.set(e,"__id",(0,t.uuidv1)()):e.__id?a=!1:e=t.Immutable.set(e,"__id",(0,t.uuidv1)()),{clause:e,isUpdated:a}},this.onResize=e=>{let t=c.SqlExpressionSizeMode.Medium;e<600?t=c.SqlExpressionSizeMode.Small:e>900&&(t=c.SqlExpressionSizeMode.Large),this.setState({sizeMode:t})},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})};const a=this.getDataSource();a&&(this.isHosted=t.dataSourceUtils.isAGOLHostedService(a.url)),this.state={sizeMode:c.SqlExpressionSizeMode.Large,isOpen:!1,partsArray:this.getPartsArray((null===(s=this.props.expression)||void 0===s?void 0:s.parts)||(0,t.Immutable)([]),"add")}}componentDidUpdate(e){var s;this.props.forceUpdateExpression&&e.expression!==this.props.expression&&this.setState({partsArray:this.getPartsArray((null===(s=this.props.expression)||void 0===s?void 0:s.parts)||(0,t.Immutable)([]),"add")})}render(){var e;const s=(null===(e=this.props.expression)||void 0===e?void 0:e.logicalOperator)||t.ClauseLogic.And,a=this.props.mode?this.props.mode:t.SqlExpressionMode.All,i=this.getDataSource();return(0,t.jsx)("div",{className:(0,t.classNames)(this.props.className,"use-scroll",{"small-mode":this.state.sizeMode===c.SqlExpressionSizeMode.Small,"medium-mode":this.state.sizeMode===c.SqlExpressionSizeMode.Medium,"large-mode":this.state.sizeMode===c.SqlExpressionSizeMode.Large})},(0,t.jsx)(h.QueryScopeContext.Provider,{value:{scope:this.props.queryScope||t.QueryScope.InConfigView,widgetId:this.props.widgetId}},(0,t.jsx)("div",{style:this.props.style,className:"sql-expression-builder"},i?(0,t.jsx)("div",{className:"sql-expression-container"},(0,t.jsx)("div",{className:"builder-btn-container",style:{justifyContent:this.state.partsArray.length<2?"flex-end":"space-between"}},this.state.partsArray.length<2?null:(0,t.jsx)(h.AdvancedButtonGroup,{className:"and-or-container"},(0,t.jsx)(h.Button,{active:s===t.ClauseLogic.And,onClick:()=>{this.changeAndOR(t.ClauseLogic.And)},size:this.state.sizeMode===c.SqlExpressionSizeMode.Small&&window.jimuConfig.isBuilder?"sm":"default",className:"ml-0"},this.i18nMessage("and")),(0,t.jsx)(h.Button,{onClick:()=>{this.changeAndOR(t.ClauseLogic.Or)},active:s===t.ClauseLogic.Or,size:this.state.sizeMode===c.SqlExpressionSizeMode.Small&&window.jimuConfig.isBuilder?"sm":"default",className:"ml-0"},this.i18nMessage("or"))),this.state.sizeMode===c.SqlExpressionSizeMode.Small?(0,t.jsx)(h.Dropdown,{activeIcon:!0},(0,t.jsx)(h.DropdownButton,{arrow:!1,type:"default","data-toggle":"dropdown",size:window.jimuConfig.isBuilder?"sm":"default","a11y-description":0===this.state.partsArray.length?this.i18nMessage("noClauseTip"):"",className:"jimu-outline-inside",onClick:this.toggle},(0,t.jsx)(Q,{className:"text-dark dropdown-icon"}),this.i18nMessage("add")),(0,t.jsx)(h.DropdownMenu,{alignment:"end",appendToBody:!1},(0,t.jsx)(h.DropdownItem,{"aria-label":this.i18nMessage("clause"),onClick:()=>{this.addClauseByType(!0)}},this.i18nMessage("clause")),(0,t.jsx)(h.DropdownItem,{"aria-label":this.i18nMessage("clauseSet"),onClick:()=>{this.addClauseByType()}},this.i18nMessage("clauseSet")))):(0,t.jsx)("div",{className:"add-button-container"},(0,t.jsx)(h.Button,{className:"pl-5 pr-5","aria-label":this.i18nMessage("addClause"),"aria-describedby":"no-clause-tip",onClick:()=>{this.addClauseByType(!0)}},(0,t.jsx)(Q,{className:"mr-1"}),this.i18nMessage("addClause")),(0,t.jsx)(h.Button,{className:"ml-2 pl-5 pr-5","aria-label":this.i18nMessage("addClauseSet"),onClick:()=>{this.addClauseByType()}},(0,t.jsx)(Q,{className:"mr-1"}),this.i18nMessage("addClauseSet")))),(0,t.jsx)("div",{className:"sql-expression-list"},(0,t.jsx)(t.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}),0===this.state.partsArray.length?(0,t.jsx)("div",{className:"no-data-tip",id:"no-clause-tip"},this.i18nMessage("noClauseTip")):this.state.partsArray.map(((e,s)=>e.type===t.ClauseType.Single?(0,t.jsx)($,{key:e.__id,clause:e,isHosted:this.isHosted,mode:a,sizeMode:this.state.sizeMode,dataSource:i,onChange:(e,t)=>{this.onClauseChange(e,"clause_"+s,t)}}):(0,t.jsx)(K,{key:e.__id,clauseSet:e,isHosted:this.isHosted,mode:a,sizeMode:this.state.sizeMode,dataSource:i,onChange:(e,t)=>{this.onClauseChange(e,"clause_set_"+s,t)}}))))):(0,t.jsx)("div",{className:"no-data-tip"},this.i18nMessage("noDataTip")))))}}const Y=(0,r.withStyles)((0,t.injectIntl)(X),"SqlExpressionBuilder"),ee=Y;class te extends t.React.PureComponent{constructor(e){super(e),this.externalDsStyle={maxWidth:"960px"},this.handleToggle=e=>{var t,s;if(void 0===e)return void(null===(s=null===(t=this.headerRef.parentElement)||void 0===t?void 0:t.nextSibling)||void 0===s||s.focus());this.setState({isOpen:!1});const{toggle:a,isOpen:i}=this.props;void 0!==i&&a&&a(e)},this.handleOkBtn=()=>{(0,c.isSqlExpressionValid)(this.state.expression)?this.handleToggle(!0):this.setState({isValid:!1})},this.handleCancelBtn=()=>{this.setState({isValid:!0,expression:this.props.expression}),this.handleToggle(!1)},this.onModalClose=()=>{this.props.expression!==this.state.expression&&this.props.onChange&&this.props.onChange(this.state.expression)},this.i18nMessage=e=>{const{intl:t}=this.props;return t?t.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}):""},this.onChange=e=>{this.setState({isValid:!0,expression:e})},this.state={isValid:!0,isOpen:!!e.isOpen,expression:this.props.expression}}componentDidUpdate(e,t){this.props.expression!==e.expression&&this.setState({expression:this.props.expression})}render(){let{isOpen:e}=this.props;e=void 0===e?this.state.isOpen:e;const s=this.props.intl.formatMessage({id:"ok",defaultMessage:t.defaultMessages.ok}),a=this.props.intl.formatMessage({id:"cancel",defaultMessage:t.defaultMessages.cancel}),i=this.props,{expression:l}=i,o=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(i,["expression"]);return(0,t.jsx)(h.Modal,{onClosed:this.onModalClose,backdrop:"static",centered:!0,isOpen:e,toggle:()=>{this.handleToggle(void 0)},className:"sql-expression-builder-modal",contentClassName:"border-0 h-100",style:this.externalDsStyle,returnfocusafterclose:"true",size:"lg"},(0,t.jsx)(h.ModalHeader,{tag:"h4",toggle:this.handleCancelBtn},(0,t.jsx)("span",{ref:e=>{this.headerRef=e}},this.i18nMessage("builderName"))),(0,t.jsx)(h.ModalBody,null,(0,t.jsx)(ee,Object.assign({},o,{expression:this.state.expression,noScrollForList:!0,onChange:this.onChange}))),(0,t.jsx)(h.ModalFooter,null,(0,t.jsx)("div",{className:"m-0 w-100 d-block"},!this.state.isValid&&(0,t.jsx)("div",{role:"alert","aria-live":"polite",style:{color:this.props.theme.colors.palette.danger[700],fontSize:this.props.theme.sizes[3],marginTop:"-32px",marginBottom:"8px"}},(0,t.jsx)(S,{color:this.props.theme.colors.palette.danger[700],className:"mr-2"}),this.i18nMessage("sqlExprIncomplete")),(0,t.jsx)("div",{className:"d-flex"},(0,t.jsx)(h.Button,{"aria-label":s,type:"primary",onClick:this.handleOkBtn,className:"ml-auto mr-2",style:{minWidth:"64px"}},s),(0,t.jsx)(h.Button,{"aria-label":a,type:"secondary",onClick:this.handleCancelBtn,style:{minWidth:"64px"}},a)))))}}const se=(0,r.withTheme)((0,t.injectIntl)(te));var ae=n(59587),ie=n(58959),le=n.n(ie);const oe=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:le()},i)):t.React.createElement("svg",Object.assign({className:l},i))};var re=n(99820),ne=n.n(re);const pe=e=>{const s=window.SVG,{className:a}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s}(e,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",a);return s?t.React.createElement(s,Object.assign({className:l,src:ne()},i)):t.React.createElement("svg",Object.assign({className:l},i))};class he extends t.React.PureComponent{constructor(e){super(e),this.onOptionChange=(e,t,s)=>{const a=this.deepClone(this.props.value);a[e][t]=s,this.props.onSortButtonClick?this.props.onSortButtonClick(a,e):this.props.onChange(a,e)},this.onSelectChange=(e,t)=>{const s=e[0];if(!s)return;const a=this.deepClone(this.props.value),i=s.name;a[t].jimuFieldName=i,this.props.onSelect?this.props.onSelect(a,t):this.props.onChange(a,t)},this.addOption=()=>{const e=Array.isArray(this.props.value),t=this.deepClone(this.state.option),s=e?this.deepClone(this.props.value):[];s.push(t),this.props.onAddOption?this.props.onAddOption(s):this.props.onChange(s)},this.delecteOption=e=>{const t=this.deepClone(this.props.value);t.splice(e,1),this.props.onDelete?this.props.onDelete(t):this.props.onChange(t)},this.deepClone=e=>{const t=Array.isArray(e)?[]:{};for(const s in e){const a=("object"==typeof e[s]||"function"==typeof e[s])&&null!==e[s];t[s]=a?this.deepClone(e[s]):e[s]}return t},this.createOptionElement=(e,s,a)=>{const i=this.props.value[a].jimuFieldName?(0,t.Immutable)([this.props.value[a].jimuFieldName]):(0,t.Immutable)([]),l=e=>{"Enter"===e.key&&this.onOptionChange(a,"order",s.order===t.OrderRule.Asc?t.OrderRule.Desc:t.OrderRule.Asc)},o=e=>{"Enter"===e.key&&this.delecteOption(a)};return(0,t.jsx)("div",{className:"multi-sort-select-con"},this.props.useDataSource&&(0,t.jsx)("div",{className:"sort-field-selector"},(0,t.jsx)(d.FieldSelector,{useDataSources:e,onChange:(e,t)=>{this.onSelectChange(e,a)},selectedFields:i,isSearchInputHidden:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,dropdownProps:{useKeyUpEvent:!0}})),(0,t.jsx)("div",{className:"delete-sort-con"},(0,t.jsx)(h.Button,{size:"sm",icon:!0,type:"tertiary",className:"delete-button padding-0",title:s.order===t.OrderRule.Asc?this.nls("ascending"):this.nls("decending"),onKeyUp:e=>{l(e)},onClick:()=>{this.onOptionChange(a,"order",s.order===t.OrderRule.Asc?t.OrderRule.Desc:t.OrderRule.Asc)}},s.order===t.OrderRule.Asc&&(0,t.jsx)(oe,{size:"s",className:"sort-arrow-down-icon ml-0"}),s.order===t.OrderRule.Desc&&(0,t.jsx)(pe,{size:"s",className:"sort-arrow-down-icon ml-0"}))),(0,t.jsx)(h.Button,{size:"sm",icon:!0,type:"tertiary",className:"delete-button padding-0",title:this.nls("deleteOption"),onKeyUp:e=>{o(e)},onClick:()=>{this.delecteOption(a)}},(0,t.jsx)(L,{size:"s",className:"sort-arrow-down-icon ml-0"})))},this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:h.defaultMessages[e]}):e,this.onDataSourceCreated=e=>{},this.state={option:{jimuFieldName:"",order:t.OrderRule.Asc}}}render(){const{value:e}=this.props,s=this.props.intl.formatMessage({id:"invalidExpression",defaultMessage:h.defaultMessages.invalidExpression});return(0,t.jsx)("div",{className:(0,t.classNames)("multi-sort",{[this.props.className]:!!this.props.className})},(0,t.jsx)("div",{className:"add-option"},(0,t.jsx)(h.Button,{className:"add-option-button jimu-outline-inside",onClick:this.addOption,title:this.props.intl.formatMessage({id:"addSortBtntext",defaultMessage:h.defaultMessages.addSortBtntext})},(0,t.jsx)(Q,{size:"s",className:"sort-arrow-down-icon"}),this.props.intl.formatMessage({id:"addSortBtntext",defaultMessage:h.defaultMessages.addSortBtntext}))),(0,t.jsx)(t.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated},(a=>Array.isArray(this.props.value)?(0,t.jsx)(ae.List,{size:"sm",className:"setting-ui-unit-list",itemsJson:e.asMutable({deep:!0}).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`}))),dndEnabled:!0,onDidDrop:(e,t)=>{const{itemJsons:[,s]}=t.props;this.props.onChange(s.map((e=>e.itemStateDetailContent)))},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:ae.TreeItemActionType.RenderOverrideItem,children:[{name:ae.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:ae.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:ae.TreeItemActionType.RenderOverrideItemBody,children:[{name:ae.TreeItemActionType.RenderOverrideItemDragHandle},{name:ae.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,s)=>{var a;const{itemJsons:i}=s.props,l=i[0],o=i[1];return this.createOptionElement((0,t.Immutable)([null===(a=this.props.useDataSource)||void 0===a?void 0:a.asMutable({deep:!0})]),l.itemStateDetailContent,o.indexOf(l))}}):s)),Array.isArray(e)&&0===e.length&&(0,t.jsx)("div",{className:"no-sort-remind"},(0,t.jsx)("div",null,this.props.intl.formatMessage({id:"noSortRemindText",defaultMessage:h.defaultMessages.noSortRemindText})),(0,t.jsx)("div",null,this.props.intl.formatMessage({id:"pleaceAddOne",defaultMessage:h.defaultMessages.pleaceAddOne}))))}}const de=(0,r.withStyles)((0,t.injectIntl)(he),"Sort");(0,r.registerStyles)("jimu-ui/advanced/sql-expression-builder/",e)})(),p})())}}}));